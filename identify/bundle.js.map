{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/ol/index.js","webpack:///./node_modules/ol/extent.js","webpack:///./node_modules/ol/events.js","webpack:///./node_modules/ol/transform.js","webpack:///./node_modules/ol/webgl.js","webpack:///./node_modules/ol/geom/geometrytype.js","webpack:///./node_modules/ol/render/canvas.js","webpack:///./node_modules/ol/events/eventtype.js","webpack:///./node_modules/ol/math.js","webpack:///./node_modules/ol/obj.js","webpack:///./node_modules/ol/array.js","webpack:///./node_modules/ol/tilestate.js","webpack:///./node_modules/ol/asserts.js","webpack:///./node_modules/ol/object.js","webpack:///./node_modules/ol/dom.js","webpack:///./node_modules/ol/viewhint.js","webpack:///./node_modules/ol/functions.js","webpack:///./node_modules/ol/mapbrowsereventtype.js","webpack:///./node_modules/ol/has.js","webpack:///./node_modules/ol/geom/geometrylayout.js","webpack:///./node_modules/ol/interaction/property.js","webpack:///./node_modules/ol/interaction/interaction.js","webpack:///./node_modules/ol/sphere.js","webpack:///./node_modules/ol/proj/epsg3857.js","webpack:///./node_modules/ol/proj/epsg4326.js","webpack:///./node_modules/ol/proj/projections.js","webpack:///./node_modules/ol/proj/transforms.js","webpack:///./node_modules/ol/proj.js","webpack:///./node_modules/ol/events/event.js","webpack:///./node_modules/ol/geom/flat/transform.js","webpack:///./node_modules/ol/layertype.js","webpack:///./node_modules/ol/layer/property.js","webpack:///./node_modules/ol/layer/layer.js","webpack:///./node_modules/ol/css.js","webpack:///./node_modules/ol/events/condition.js","webpack:///./node_modules/ol/collection.js","webpack:///./node_modules/ol/imagestate.js","webpack:///./node_modules/ol/extent/relationship.js","webpack:///./node_modules/ol/proj/units.js","webpack:///./node_modules/ol/easing.js","webpack:///./node_modules/ol/geom/simplegeometry.js","webpack:///./node_modules/ol/events/eventtarget.js","webpack:///./node_modules/ol/interaction/pointer.js","webpack:///./node_modules/ol/collectioneventtype.js","webpack:///./node_modules/ol/color.js","webpack:///./node_modules/ol/render/eventtype.js","webpack:///./node_modules/ol/colorlike.js","webpack:///./node_modules/ol/source/state.js","webpack:///./node_modules/ol/style/stroke.js","webpack:///./node_modules/ol/layer/group.js","webpack:///./node_modules/ol/size.js","webpack:///./node_modules/ol/geom/flat/contains.js","webpack:///./node_modules/ol/geom/flat/inflate.js","webpack:///./node_modules/ol/string.js","webpack:///./node_modules/ol/coordinate.js","webpack:///./node_modules/ol/geom/flat/reverse.js","webpack:///./node_modules/ol/geom/flat/orient.js","webpack:///./node_modules/ol/tilerange.js","webpack:///./node_modules/ol/control/control.js","webpack:///./node_modules/ol/geom/flat/closest.js","webpack:///./node_modules/ol/style/fill.js","webpack:///./node_modules/ol/geom/flat/deflate.js","webpack:///./node_modules/ol/disposable.js","webpack:///./node_modules/ol/observable.js","webpack:///./node_modules/ol/objecteventtype.js","webpack:///./node_modules/ol/style/style.js","webpack:///./node_modules/ol/proj/projection.js","webpack:///./node_modules/ol/rotationconstraint.js","webpack:///./node_modules/ol/mapbrowserpointerevent.js","webpack:///./node_modules/ol/geom/linearring.js","webpack:///./node_modules/ol/geom/polygon.js","webpack:///./node_modules/ol/tilecoord.js","webpack:///./node_modules/css-loader/lib/css-base.js","webpack:///./node_modules/ol/geom/flat/simplify.js","webpack:///./node_modules/ol/mapevent.js","webpack:///./node_modules/style-loader/lib/addStyles.js","webpack:///./node_modules/ol/geom/geometry.js","webpack:///./node_modules/ol/mapeventtype.js","webpack:///./node_modules/ol/xml.js","webpack:///./node_modules/ol/featureloader.js","webpack:///./node_modules/ol/source/vectoreventtype.js","webpack:///./node_modules/ol/source/vector.js","webpack:///./node_modules/ol/layer/vector.js","webpack:///./node_modules/ol/geom/flat/area.js","webpack:///./node_modules/ol/style/image.js","webpack:///./node_modules/ol/style/regularshape.js","webpack:///./node_modules/ol/style/circle.js","webpack:///./node_modules/ol/structs/rbush.js","webpack:///./node_modules/ol/extent/corner.js","webpack:///./node_modules/ol/format/formattype.js","webpack:///./node_modules/rbush/index.js","webpack:///./node_modules/ol/interaction/dragpan.js","webpack:///./node_modules/ol/tilegrid/tilegrid.js","webpack:///./node_modules/ol/tilegrid.js","webpack:///./node_modules/ol/layer/base.js","webpack:///./node_modules/ol/proj/proj4.js","webpack:///./node_modules/ol/geom/point.js","webpack:///./node_modules/ol/structs/lrucache.js","webpack:///./node_modules/ol/geom/flat/intersectsextent.js","webpack:///./node_modules/ol/mapbrowserevent.js","webpack:///./node_modules/ol/attribution.js","webpack:///./node_modules/ol/source/source.js","webpack:///./node_modules/ol/layer/vectorrendertype.js","webpack:///./node_modules/ol/assertionerror.js","webpack:///./node_modules/css-loader/lib/url/escape.js","webpack:///./node_modules/ol/layer/tileproperty.js","webpack:///./node_modules/ol/layer/tile.js","webpack:///./node_modules/ol/centerconstraint.js","webpack:///./node_modules/ol/resolutionconstraint.js","webpack:///./node_modules/ol/viewproperty.js","webpack:///./node_modules/ol/view.js","webpack:///./node_modules/ol/control/attribution.js","webpack:///./node_modules/ol/control/rotate.js","webpack:///./node_modules/ol/control/zoom.js","webpack:///./node_modules/ol/control.js","webpack:///./node_modules/ol/pointer/eventtype.js","webpack:///./node_modules/ol/pointer/eventsource.js","webpack:///./node_modules/ol/pointer/mousesource.js","webpack:///./node_modules/ol/pointer/mssource.js","webpack:///./node_modules/ol/pointer/nativesource.js","webpack:///./node_modules/ol/pointer/pointerevent.js","webpack:///./node_modules/ol/pointer/touchsource.js","webpack:///./node_modules/ol/pointer/pointereventhandler.js","webpack:///./node_modules/ol/mapbrowsereventhandler.js","webpack:///./node_modules/ol/mapproperty.js","webpack:///./node_modules/ol/structs/priorityqueue.js","webpack:///./node_modules/ol/tilequeue.js","webpack:///./node_modules/ol/plugintype.js","webpack:///./node_modules/ol/plugins.js","webpack:///./node_modules/ol/renderer/type.js","webpack:///./node_modules/ol/pluggablemap.js","webpack:///./node_modules/ol/kinetic.js","webpack:///./node_modules/ol/interaction/doubleclickzoom.js","webpack:///./node_modules/ol/interaction/dragrotate.js","webpack:///./node_modules/ol/render/box.js","webpack:///./node_modules/ol/interaction/dragbox.js","webpack:///./node_modules/ol/interaction/dragzoom.js","webpack:///./node_modules/ol/events/keycode.js","webpack:///./node_modules/ol/interaction/keyboardpan.js","webpack:///./node_modules/ol/interaction/keyboardzoom.js","webpack:///./node_modules/ol/interaction/mousewheelzoom.js","webpack:///./node_modules/ol/interaction/pinchrotate.js","webpack:///./node_modules/ol/interaction/pinchzoom.js","webpack:///./node_modules/ol/interaction.js","webpack:///./node_modules/ol/imagebase.js","webpack:///./node_modules/ol/imagecanvas.js","webpack:///./node_modules/ol/render/event.js","webpack:///./node_modules/ol/render/vectorcontext.js","webpack:///./node_modules/ol/render/canvas/immediate.js","webpack:///./node_modules/ol/renderer/layer.js","webpack:///./node_modules/ol/renderer/canvas/layer.js","webpack:///./node_modules/ol/renderer/canvas/intermediatecanvas.js","webpack:///./node_modules/ol/renderer/canvas/imagelayer.js","webpack:///./node_modules/ol/style/iconimagecache.js","webpack:///./node_modules/ol/style.js","webpack:///./node_modules/ol/renderer/map.js","webpack:///./node_modules/ol/renderer/canvas/map.js","webpack:///./node_modules/ol/renderer/canvas/tilelayer.js","webpack:///./node_modules/ol/render/replaygroup.js","webpack:///./node_modules/ol/render/replaytype.js","webpack:///./node_modules/ol/geom/flat/textpath.js","webpack:///./node_modules/ol/render/canvas/instruction.js","webpack:///./node_modules/ol/render/replay.js","webpack:///./node_modules/ol/render/canvas/replay.js","webpack:///./node_modules/ol/render/canvas/imagereplay.js","webpack:///./node_modules/ol/render/canvas/linestringreplay.js","webpack:///./node_modules/ol/render/canvas/polygonreplay.js","webpack:///./node_modules/ol/geom/flat/straightchunk.js","webpack:///./node_modules/ol/style/textplacement.js","webpack:///./node_modules/ol/render/canvas/textreplay.js","webpack:///./node_modules/ol/render/canvas/replaygroup.js","webpack:///./node_modules/ol/renderer/vector.js","webpack:///./node_modules/ol/renderer/canvas/vectorlayer.js","webpack:///./node_modules/ol/layer/vectortilerendertype.js","webpack:///./node_modules/ol/renderer/canvas/vectortilelayer.js","webpack:///./node_modules/ol/webgl/shader.js","webpack:///./node_modules/ol/webgl/fragment.js","webpack:///./node_modules/ol/webgl/vertex.js","webpack:///./node_modules/ol/render/webgl/circlereplay/defaultshader.js","webpack:///./node_modules/ol/render/webgl/circlereplay/defaultshader/locations.js","webpack:///./node_modules/ol/vec/mat4.js","webpack:///./node_modules/ol/render/webgl/replay.js","webpack:///./node_modules/ol/render/webgl.js","webpack:///./node_modules/ol/webgl/buffer.js","webpack:///./node_modules/ol/render/webgl/circlereplay.js","webpack:///./node_modules/ol/render/webgl/texturereplay/defaultshader.js","webpack:///./node_modules/ol/render/webgl/texturereplay/defaultshader/locations.js","webpack:///./node_modules/ol/webgl/contexteventtype.js","webpack:///./node_modules/ol/webgl/context.js","webpack:///./node_modules/ol/render/webgl/texturereplay.js","webpack:///./node_modules/ol/render/webgl/imagereplay.js","webpack:///./node_modules/ol/geom/flat/topology.js","webpack:///./node_modules/ol/render/webgl/linestringreplay/defaultshader.js","webpack:///./node_modules/ol/render/webgl/linestringreplay/defaultshader/locations.js","webpack:///./node_modules/ol/render/webgl/linestringreplay.js","webpack:///./node_modules/ol/render/webgl/polygonreplay/defaultshader.js","webpack:///./node_modules/ol/render/webgl/polygonreplay/defaultshader/locations.js","webpack:///./node_modules/ol/structs/linkedlist.js","webpack:///./node_modules/ol/render/webgl/polygonreplay.js","webpack:///./node_modules/ol/style/atlas.js","webpack:///./node_modules/ol/style/atlasmanager.js","webpack:///./node_modules/ol/render/webgl/textreplay.js","webpack:///./node_modules/ol/render/webgl/replaygroup.js","webpack:///./node_modules/ol/render/webgl/immediate.js","webpack:///./node_modules/ol/renderer/webgl/defaultmapshader.js","webpack:///./node_modules/ol/renderer/webgl/defaultmapshader/locations.js","webpack:///./node_modules/ol/renderer/webgl/layer.js","webpack:///./node_modules/ol/renderer/webgl/imagelayer.js","webpack:///./node_modules/ol/renderer/webgl/map.js","webpack:///./node_modules/ol/renderer/webgl/tilelayershader.js","webpack:///./node_modules/ol/renderer/webgl/tilelayershader/locations.js","webpack:///./node_modules/ol/renderer/webgl/tilelayer.js","webpack:///./node_modules/ol/renderer/webgl/vectorlayer.js","webpack:///./node_modules/ol/map.js","webpack:///./node_modules/ol/feature.js","webpack:///./node_modules/ol/loadingstrategy.js","webpack:///./node_modules/ol/geom/flat/length.js","webpack:///./node_modules/ol/geom/flat/segments.js","webpack:///./node_modules/ol/geom/flat/interiorpoint.js","webpack:///./src/js/Component/Identify/component/ToolBar/img/box-select.png","webpack:///./src/js/Component/Identify/component/TitlePanel/ol-Identify-TitlePanel.css","webpack:///./src/js/Component/Identify/utils/MapSelection/ol-MapSelection-Utils.css","webpack:///./src/js/Component/Identify/component/AttrTable/ol-Identify-FeatureAttrTable.css","webpack:///./src/js/Component/Identify/component/LayerTree/ol-Identify-FeatureLayerTree.css","webpack:///./src/js/Component/Identify/component/TypeSelect/ol-Identify-TypeSelect.css","webpack:///./src/js/Component/Identify/utils/ol-Base-Utils.js","webpack:///./node_modules/ol/overlaypositioning.js","webpack:///./node_modules/ol/overlay.js","webpack:///./src/js/Component/AnimationMarker/ol-AnimationMarker.js","webpack:///./src/js/Component/Identify/utils/FeatureHighLight/ol-FeatureHighLight-Utils.js","webpack:///./node_modules/ol/layer/image.js","webpack:///./src/js/Component/Identify/utils/FeatureLayer/ol-FeatureLayer-Utils.js","webpack:///./src/js/Component/Identify/utils/MapSelection/ol-MapSelection-Utils.js","webpack:///./src/js/Component/Identify/utils/MapCoordinate/ol-MapCoordinate-Utils.js","webpack:///./src/js/Component/Identify/component/ol-Identify-BaseComponent","webpack:///./src/js/Component/Identify/component/TypeSelect/ol-Identify-TypeSelect.js","webpack:///./src/js/Component/Identify/component/LayerTree/ol-Identify-FeatureLayerTree.js","webpack:///./src/js/Component/Identify/component/AttrTable/ol-Identify-FeatureAttrTable.js","webpack:///./src/js/Component/Identify/component/ToolBar/ol_Identify-Tool.js","webpack:///./src/js/Component/Identify/component/ToolBar/ol-Identify-Toolbar.js","webpack:///./src/js/Component/Identify/component/TitlePanel/ol-Identify-TitlePanel.js","webpack:///./src/js/Component/Identify/ol-Identify.js","webpack:///./src/js/Component/Identify/component/TitlePanel/ol-Identify-TitlePanel.css?2fa0","webpack:///./src/js/Component/Identify/component/ToolBar/img/feature-fitbound.png","webpack:///./src/js/Component/Identify/component/ToolBar/img/table-hidden.png","webpack:///./src/js/Component/Identify/component/ToolBar/img/tree-hidden.png","webpack:///./src/js/Component/Identify/component/ToolBar/img/tree-clear.png","webpack:///./src/js/Component/Identify/component/AttrTable/ol-Identify-FeatureAttrTable.css?9017","webpack:///./src/js/Component/Identify/component/LayerTree/ol-Identify-FeatureLayerTree.css?ab20","webpack:///./src/js/Component/Identify/component/TypeSelect/img/icon-layer.png","webpack:///./src/js/Component/Identify/component/TypeSelect/img/tree-ldashed.png","webpack:///./src/js/Component/Identify/component/TypeSelect/ol-Identify-TypeSelect.css?9543","webpack:///./src/js/Component/Identify/utils/MapSelection/ol-MapSelection-Utils.css?0a44","webpack:///./src/js/Component/AnimationMarker/img/highlight-marker.png","webpack:///./src/js/Component/AnimationMarker/ol-AnimationMarker.css","webpack:///./src/js/Component/AnimationMarker/ol-AnimationMarker.css?82fc","webpack:///./src/js/Component/Identify/img/Identify_icon_selected.png","webpack:///./src/js/Component/Identify/img/Identify_icon.png","webpack:///./src/js/Component/Identify/component/ToolBar/ol-Identify-Toolbar.css","webpack:///./src/js/Component/Identify/component/LayerTree/img/tree-ldashed.png","webpack:///./src/js/Component/Identify/component/LayerTree/img/tree-maximize.png","webpack:///./src/js/Component/Identify/component/LayerTree/img/tree-gourp.png","webpack:///./src/js/Component/Identify/component/TypeSelect/img/pull-down.png","webpack:///./src/js/Component/Identify/ol-Identify.css","webpack:///./src/js/Component/Identify/ol-Identify.css?00b3","webpack:///./node_modules/quickselect/quickselect.js","webpack:///./node_modules/style-loader/lib/urls.js","webpack:///./node_modules/ol/tile.js","webpack:///./node_modules/ol/imagetile.js","webpack:///./node_modules/ol/tilecache.js","webpack:///./node_modules/ol/reproj.js","webpack:///./node_modules/ol/reproj/triangulation.js","webpack:///./node_modules/ol/reproj/tile.js","webpack:///./node_modules/ol/tileurlfunction.js","webpack:///./node_modules/ol/source/tile.js","webpack:///./node_modules/ol/source/tileeventtype.js","webpack:///./node_modules/ol/source/urltile.js","webpack:///./node_modules/ol/source/tileimage.js","webpack:///./node_modules/ol/source/xyz.js","webpack:///./node_modules/ol/source/osm.js","webpack:///./src/js/mapCreator.js","webpack:///./node_modules/ol/format/feature.js","webpack:///./node_modules/ol/format/jsonfeature.js","webpack:///./node_modules/ol/geom/geometrycollection.js","webpack:///./node_modules/ol/geom/flat/interpolate.js","webpack:///./node_modules/ol/geom/linestring.js","webpack:///./node_modules/ol/geom/multilinestring.js","webpack:///./node_modules/ol/geom/multipoint.js","webpack:///./node_modules/ol/geom/flat/center.js","webpack:///./node_modules/ol/geom/multipolygon.js","webpack:///./node_modules/ol/format/geojson.js","webpack:///./src/js/symbolCreator.js","webpack:///./src/js/layerCreator.js","webpack:///./src/index.js","webpack:///./node_modules/ol/ol.css","webpack:///./node_modules/ol/ol.css?f5a7","webpack:///./src/css/index.css","webpack:///./src/css/index.css?7a43"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_ol_","WEBGL_MAX_TEXTURE_SIZE","WEBGL_EXTENSIONS","inherits","childCtor","parentCtor","create","constructor","nullFunction","getUid","obj","ol_uid","uidCounter_","__webpack_exports__","_ol_extent_","coordinates","extent","createEmpty","ii","length","extendCoordinate","xs","ys","opt_extent","minX","Math","min","apply","minY","maxX","max","maxY","createOrUpdate","slice","x","y","dx","dy","coordinate","containsXY","extent1","extent2","relationship","_extent_relationship_js__WEBPACK_IMPORTED_MODULE_2__","UNKNOWN","LEFT","RIGHT","BELOW","ABOVE","INTERSECTING","Infinity","createOrUpdateEmpty","extendCoordinates","flatCoordinates","offset","end","stride","extendFlatCoordinates","rings","extendRings","extendXY","callback","opt_this","val","getBottomLeft","getBottomRight","getTopRight","getTopLeft","area","isEmpty","getWidth","getHeight","corner","_extent_corner_js__WEBPACK_IMPORTED_MODULE_1__","BOTTOM_LEFT","BOTTOM_RIGHT","TOP_LEFT","TOP_RIGHT","_asserts_js__WEBPACK_IMPORTED_MODULE_0__","assert","center","resolution","rotation","size","cosRotation","cos","sinRotation","sin","xCos","xSin","yCos","ySin","x0","x1","x2","x3","y0","y1","y2","y3","intersection","getIntersection","getArea","intersects","deltaX","deltaY","start","startRel","coordinateRelationship","endRel","startX","startY","endX","endY","slope","transformFn","boundingExtentXYs_","_ol_events_","listenerObj","boundListener","evt","listener","bindTo","target","callOnce","unlistenByKey","listeners","opt_setDeleteIndex","deleteIndex","type","listenerMap","ol_lm","undefined","getListeners","removeEventListener","_obj_js__WEBPACK_IMPORTED_MODULE_0__","clear","keys","opt_once","getListenerMap_","findListener_","addEventListener","bindListener_","push","listen","key","indexOf","splice","removeListeners_","_ol_transform_","tmp_","Array","reset","transform","set","multiply","transform1","transform2","a1","b1","c1","d1","e1","f1","a2","b2","c2","d2","e2","f2","a","b","e","f","setFromArray","rotate","angle","scale","translate","compose","dx1","dy1","sx","sy","dx2","dy2","invert","det","determinant","mat","_ol_webgl_","canvas","opt_attributes","context","CONTEXT_IDS_","getContext","POINT","LINE_STRING","LINEAR_RING","POLYGON","MULTI_POINT","MULTI_LINE_STRING","MULTI_POLYGON","GEOMETRY_COLLECTION","CIRCLE","span","heights","_ol_render_canvas_","defaultFont","defaultFillStyle","defaultLineCap","defaultLineDash","defaultLineDashOffset","defaultLineJoin","defaultMiterLimit","defaultStrokeStyle","defaultTextAlign","defaultTextBaseline","defaultPadding","defaultLineWidth","labelCache","_structs_lrucache_js__WEBPACK_IMPORTED_MODULE_3__","checkedFonts_","measureContext_","textHeights_","checkFont","interval","referenceWidth","retries","checked","font","text","isAvailable","fontFamily","getMeasureContext","measureText","width","available","check","done","_obj_js__WEBPACK_IMPORTED_MODULE_2__","window","clearInterval","fontSpec","fontFamilies","_css_js__WEBPACK_IMPORTED_MODULE_0__","getFontFamilies","setInterval","_dom_js__WEBPACK_IMPORTED_MODULE_1__","createCanvasContext2D","measureTextHeight","height","document","createElement","textContent","style","margin","padding","position","left","body","appendChild","offsetHeight","removeChild","measureTextWidth","measureContext","rotateAtOffset","offsetX","offsetY","resetTransform_","_transform_js__WEBPACK_IMPORTED_MODULE_4__","drawImage","opacity","image","originX","originY","w","h","alpha","globalAlpha","setTransform","CHANGE","CLEAR","CLICK","DBLCLICK","DRAGENTER","DRAGOVER","DROP","ERROR","KEYDOWN","KEYPRESS","LOAD","MOUSEDOWN","MOUSEMOVE","MOUSEOUT","MOUSEUP","MOUSEWHEEL","MSPOINTERDOWN","RESIZE","TOUCHSTART","TOUCHMOVE","TOUCHEND","WHEEL","_ol_math_","cosh","exp","roundUpToPowerOfTwo","pow","ceil","log","LN2","squaredSegmentDistance","t","squaredDistance","solveLinearSystem","maxRow","maxEl","abs","absValue","tmp","j","coef","k","toDegrees","angleInRadians","PI","toRadians","angleInDegrees","modulo","lerp","_ol_obj_","assign","var_sources","TypeError","output","arguments","source","getValues","values","_ol_array_","haystack","needle","opt_comparator","mid","cmp","comparator","numberSafeCompareFunction","low","high","found","arr","direction","begin","data","extension","isArray","func","arr1","arr2","len1","compareFnc","index","sort","every","el","idx","opt_func","opt_strict","compare","currentVal","res","IDLE","LOADING","LOADED","EMPTY","ABORT","_ol_asserts_","assertion","errorCode","_assertionerror_js__WEBPACK_IMPORTED_MODULE_0__","_ol_Object_","opt_values","_observable_js__WEBPACK_IMPORTED_MODULE_2__","this","_index_js__WEBPACK_IMPORTED_MODULE_0__","values_","setProperties","changeEventTypeCache_","getChangeEventType","getKeys","getProperties","_obj_js__WEBPACK_IMPORTED_MODULE_4__","notify","oldValue","eventType","dispatchEvent","Event","_objecteventtype_js__WEBPACK_IMPORTED_MODULE_1__","PROPERTYCHANGE","opt_silent","unset","_events_event_js__WEBPACK_IMPORTED_MODULE_3__","_ol_dom_","opt_width","opt_height","element","offsetWidth","getComputedStyle","parseInt","marginLeft","marginRight","marginTop","marginBottom","newNode","oldNode","parent","parentNode","replaceChild","node","lastChild","ANIMATING","INTERACTING","_ol_functions_","_ol_MapBrowserEventType_","SINGLECLICK","_events_eventtype_js__WEBPACK_IMPORTED_MODULE_0__","POINTERDRAG","POINTERMOVE","POINTERDOWN","POINTERUP","POINTEROVER","POINTEROUT","POINTERENTER","POINTERLEAVE","POINTERCANCEL","_ol_has_","ua","navigator","userAgent","toLowerCase","FIREFOX","SAFARI","WEBKIT","MAC","DEVICE_PIXEL_RATIO","devicePixelRatio","CANVAS_LINE_DASH","CANVAS","ENABLE_CANVAS","setLineDash","DEVICE_ORIENTATION","GEOLOCATION","TOUCH","ASSUME_TOUCH","POINTER","MSPOINTER","msPointerEnabled","WEBGL","ENABLE_WEBGL","textureSize","hasWebGL","extensions","gl","_webgl_js__WEBPACK_IMPORTED_MODULE_1__","failIfMajorPerformanceCaveat","getParameter","MAX_TEXTURE_SIZE","getSupportedExtensions","XY","XYZ","XYM","XYZM","ACTIVE","_ol_interaction_Interaction_","options","map_","setActive","handleEvent","ol","getActive","getMap","active","setMap","map","pan","view","delta","opt_duration","currentCenter","getCenter","constrainCenter","animate","duration","easing","linear","setCenter","opt_anchor","constrainRotation","rotateWithoutConstraints","currentRotation","getRotation","anchor","easeOut","zoom","opt_direction","constrainResolution","zoomWithoutConstraints","zoomByDelta","currentResolution","getResolution","resolutions","getResolutions","math","clamp","getMinResolution","getMaxResolution","calculateCenterZoom","setResolution","_ol_Sphere_","radius","geodesicArea","getArea_","haversineDistance","getDistance_","distance","bearing","lat1","lon1","dByR","lat","asin","lon","atan2","DEFAULT_RADIUS","getLength","geometry","opt_options","coords","jj","projection","clone","getType","geometrytype","getCoordinates","getLength_","geometries","getGeometries","Error","lat2","deltaLatBy2","deltaLonBy2","sqrt","len","sphere","_ol_proj_EPSG3857_","code","proj_projection","units","proj_units","METERS","EXTENT","global","worldExtent","WORLD_EXTENT","getPointResolution","point","RADIUS","Projection_","HALF_SIZE","PROJECTIONS","fromEPSG4326","input","opt_output","opt_dimension","dimension","halfSize","tan","toEPSG4326","atan","epsg3857","_ol_proj_EPSG4326_","opt_axisOrientation","DEGREES","axisOrientation","metersPerUnit","METERS_PER_UNIT","epsg4326","_ol_proj_projections_","cache_","proj_projections","_ol_proj_transforms_","destination","sourceCode","getCode","destinationCode","transforms","proj_transforms","_ol_proj_","SPHERE_","ENABLE_PROJ4JS","setProj4","proj4","proj_proj4","opt_units","pointResolution","getPointResolutionFunc","getUnits","getTransformFromProjections","vertices","getMetersPerUnit","addEquivalentProjections","projections","addProjections","forEach","add","cloneTransform","addEquivalentTransforms","projections1","projections2","forwardTransform","inverseTransform","projection1","projection2","addProjection","clearAllProjections","createProjection","defaultCode","addCoordinateTransforms","forward","inverse","sourceProj","destProj","createTransformFromCoordinateTransform","fromLonLat","opt_projection","toLonLat","lonLat","projectionLike","proj4js","defs","equivalent","equalUnits","getTransform","sourceProjection","destinationProjection","sourceDef","destinationDef","proj4Transform","identityTransform","transformExtent","ol_extent","applyTransform","transformWithProjections","addCommon","_ol_events_Event_","propagationStopped","preventDefault","stopPropagation","_ol_geom_flat_transform_","opt_dest","dest","anchorX","anchorY","IMAGE","TILE","VECTOR_TILE","VECTOR","OPACITY","VISIBLE","Z_INDEX","MAX_RESOLUTION","MIN_RESOLUTION","SOURCE","_ol_layer_Layer_","baseOptions","_obj_js__WEBPACK_IMPORTED_MODULE_6__","_layer_base_js__WEBPACK_IMPORTED_MODULE_4__","mapPrecomposeKey_","mapRenderKey_","sourceChangeKey_","_events_js__WEBPACK_IMPORTED_MODULE_0__","_object_js__WEBPACK_IMPORTED_MODULE_3__","_layer_property_js__WEBPACK_IMPORTED_MODULE_5__","handleSourcePropertyChange_","setSource","_index_js__WEBPACK_IMPORTED_MODULE_2__","visibleAtResolution","layerState","visible","minResolution","maxResolution","getLayersArray","opt_array","array","getLayerStatesArray","opt_states","states","getLayerState","getSource","getSourceState","getState","_source_state_js__WEBPACK_IMPORTED_MODULE_8__","UNDEFINED","handleSourceChange_","changed","_events_eventtype_js__WEBPACK_IMPORTED_MODULE_1__","_render_eventtype_js__WEBPACK_IMPORTED_MODULE_7__","PRECOMPOSE","managed","zIndex","frameState","layerStatesArray","layerStates","render","cache","_ol_css_","CLASS_HIDDEN","CLASS_SELECTABLE","CLASS_UNSELECTABLE","CLASS_UNSUPPORTED","CLASS_CONTROL","family","split","_ol_events_condition_","mapBrowserEvent","originalEvent","altKey","metaKey","ctrlKey","shiftKey","always","_functions_js__WEBPACK_IMPORTED_MODULE_2__","TRUE","click","_mapbrowsereventtype_js__WEBPACK_IMPORTED_MODULE_0__","mouseActionButton","button","_has_js__WEBPACK_IMPORTED_MODULE_3__","never","FALSE","pointerMove","singleClick","doubleClick","noModifierKeys","platformModifierKeyOnly","shiftKeyOnly","targetNotEditable","tagName","mouseOnly","_asserts_js__WEBPACK_IMPORTED_MODULE_1__","pointerEvent","pointerType","primaryAction","isPrimary","_events_event_js__WEBPACK_IMPORTED_MODULE_4__","_ol_Collection_","unique_","unique","array_","assertUnique_","updateLength_","pop","extend","fn","bind","getArray","item","Property_","LENGTH","insertAt","elem","_collectioneventtype_js__WEBPACK_IMPORTED_MODULE_2__","ADD","removeAt","remove","prev","REMOVE","setAt","opt_except","_assertionerror_js__WEBPACK_IMPORTED_MODULE_1__","opt_element","_ol_proj_Units_","FEET","PIXELS","TILE_PIXELS","USFEET","_ol_easing_","easeIn","inAndOut","_ol_geom_SimpleGeometry_","_geom_geometry_js__WEBPACK_IMPORTED_MODULE_3__","layout","_geom_geometrylayout_js__WEBPACK_IMPORTED_MODULE_4__","getLayoutForStride_","getStrideForLayout","_functions_js__WEBPACK_IMPORTED_MODULE_1__","computeExtent","_extent_js__WEBPACK_IMPORTED_MODULE_2__","createOrUpdateFromFlatCoordinates","getFirstCoordinate","getFlatCoordinates","getLastCoordinate","getLayout","getSimplifiedGeometry","squaredTolerance","simplifiedGeometryRevision","getRevision","simplifiedGeometryCache","simplifiedGeometryMaxMinSquaredTolerance","toString","simplifiedGeometry","getSimplifiedGeometryInternal","getStride","setFlatCoordinatesInternal","setCoordinates","opt_layout","setLayout","nesting","_geom_flat_transform_js__WEBPACK_IMPORTED_MODULE_5__","opt_sy","getExtent","transform2D","simpleGeometry","_ol_events_EventTarget_","_disposable_js__WEBPACK_IMPORTED_MODULE_1__","pendingRemovals_","dispatching_","listeners_","event","propagate","pendingRemovals","disposeInternal","_events_js__WEBPACK_IMPORTED_MODULE_2__","unlistenAll","hasListener","opt_type","_ol_interaction_Pointer_","_interaction_interaction_js__WEBPACK_IMPORTED_MODULE_4__","handleDownEvent_","handleDownEvent","handleDragEvent_","handleDragEvent","handleMoveEvent_","handleMoveEvent","handleUpEvent_","handleUpEvent","handlingDownUpSequence","trackedPointers_","targetPointers","centroid","pointerEvents","clientX","clientY","isPointerDraggingEvent_","_mapbrowsereventtype_js__WEBPACK_IMPORTED_MODULE_2__","updateTrackedPointers_","id","pointerId","_obj_js__WEBPACK_IMPORTED_MODULE_5__","_mapbrowserpointerevent_js__WEBPACK_IMPORTED_MODULE_3__","stopEvent","handledUp","handled","shouldStopEvent","cacheSize","_ol_color_","HEX_COLOR_RE_","NAMED_COLOR_RE_","asArray","color","fromString","asString","fromNamed","rgb","fromStringInternal_","g","parts","exec","hasAlpha","substr","Number","normalize","opt_color","result","_math_js__WEBPACK_IMPORTED_MODULE_1__","POSTCOMPOSE","RENDER","_ol_colorlike_","isColorLike","_color_js__WEBPACK_IMPORTED_MODULE_0__","CanvasPattern","CanvasGradient","READY","_ol_style_Stroke_","color_","lineCap_","lineCap","lineDash_","lineDash","lineDashOffset_","lineDashOffset","lineJoin_","lineJoin","miterLimit_","miterLimit","width_","checksum_","getColor","getLineCap","getLineDash","getLineDashOffset","getLineJoin","getMiterLimit","setColor","setLineCap","setLineDashOffset","setLineJoin","setMiterLimit","setWidth","getChecksum","_ol_layer_Group_","_obj_js__WEBPACK_IMPORTED_MODULE_10__","layers","_layer_base_js__WEBPACK_IMPORTED_MODULE_9__","layersListenerKeys_","listenerKeys_","_events_js__WEBPACK_IMPORTED_MODULE_6__","LAYERS","handleLayersChanged_","_collection_js__WEBPACK_IMPORTED_MODULE_1__","_asserts_js__WEBPACK_IMPORTED_MODULE_5__","setLayers","handleLayerChange_","getLayers","handleLayersAdd_","handleLayersRemove_","layer","layersArray","_objecteventtype_js__WEBPACK_IMPORTED_MODULE_4__","_events_eventtype_js__WEBPACK_IMPORTED_MODULE_7__","collectionEvent","pos","ownLayerState","_extent_js__WEBPACK_IMPORTED_MODULE_8__","_source_state_js__WEBPACK_IMPORTED_MODULE_11__","_ol_size_","buffer","opt_size","ratio","_ol_geom_flat_contains_","_extent_js__WEBPACK_IMPORTED_MODULE_0__","forEachCorner","linearRingContainsXY","wn","ends","endss","linearRingsContainsXY","_ol_geom_flat_inflate_","opt_coordinates","opt_coordinatess","coordinatess","opt_coordinatesss","coordinatesss","_ol_string_","number","opt_precision","numberString","toFixed","decimal","join","v1","v2","s1","s2","n1","n2","string","_ol_coordinate_","circle","getRadius","segment","along","opt_fractionDigits","toStringXY","hemispheres","degrees","normalizedDegrees","dflPrecision","precision","deg","floor","sec","padNumber","charAt","template","replace","coordinate1","coordinate2","equals","cosAngle","sinAngle","coord1","coord2","closestOnSegment","degreesToStringHDMS","format","_ol_geom_flat_reverse_","flat_reverse","_ol_geom_flat_orient_","edge","opt_right","right","isClockwise","linearRingIsClockwise","linearRingsAreOriented","orientLinearRings","_ol_TileRange_","tileRange","contains","tileCoord","containsTileRange","getSize","_ol_control_Control_","_object_js__WEBPACK_IMPORTED_MODULE_2__","target_","listenerKeys","setTarget","_dom_js__WEBPACK_IMPORTED_MODULE_3__","removeNode","_events_js__WEBPACK_IMPORTED_MODULE_4__","getOverlayContainerStopEvent","_mapeventtype_js__WEBPACK_IMPORTED_MODULE_1__","POSTRENDER","getElementById","_ol_geom_flat_closest_","offset1","offset2","closestPoint","_math_js__WEBPACK_IMPORTED_MODULE_0__","maxSquaredDelta","squaredDelta","getMaxSquaredDelta","getsMaxSquaredDelta","maxDelta","isRing","minSquaredDistance","opt_tmpPoint","tmpPoint","NaN","getClosestPoint","getsClosestPoint","_ol_style_Fill_","_color_js__WEBPACK_IMPORTED_MODULE_1__","_ol_geom_flat_deflate_","opt_ends","opt_endss","_ol_Disposable_","disposed_","dispose","_ol_Observable_","_events_eventtarget_js__WEBPACK_IMPORTED_MODULE_2__","revision_","unByKey","_events_js__WEBPACK_IMPORTED_MODULE_1__","_events_eventtype_js__WEBPACK_IMPORTED_MODULE_3__","on","once","listenOnce","un","unlisten","_ol_style_Style_","geometry_","geometryFunction_","defaultGeometryFunction","setGeometry","fill_","fill","image_","renderer_","renderer","stroke_","stroke","text_","zIndex_","getGeometry","getFill","getImage","getStroke","getText","getZIndex","getRenderer","setRenderer","getGeometryFunction","setFill","setImage","setStroke","setText","feature","setZIndex","createFunction","styleFunction","styles","default_","defaultFunction","_style_fill_js__WEBPACK_IMPORTED_MODULE_3__","_style_stroke_js__WEBPACK_IMPORTED_MODULE_4__","_style_circle_js__WEBPACK_IMPORTED_MODULE_2__","createDefaultEditing","white","blue","_geom_geometrytype_js__WEBPACK_IMPORTED_MODULE_1__","concat","_ol_proj_Projection_","code_","units_","extent_","worldExtent_","axisOrientation_","global_","canWrapX_","getPointResolutionFunc_","defaultTileGrid_","metersPerUnit_","_proj_proj4_js__WEBPACK_IMPORTED_MODULE_2__","def","axis","to_meter","canWrapX","_proj_units_js__WEBPACK_IMPORTED_MODULE_1__","getWorldExtent","getAxisOrientation","isGlobal","setGlobal","getDefaultTileGrid","setDefaultTileGrid","tileGrid","setExtent","setWorldExtent","setGetPointResolution","_ol_RotationConstraint_","theta","opt_tolerance","tolerance","_ol_MapBrowserPointerEvent_","opt_dragging","opt_frameState","_mapbrowserevent_js__WEBPACK_IMPORTED_MODULE_1__","_ol_geom_LinearRing_","simplegeometry","maxDelta_","maxDeltaRevision_","linearRing","setFlatCoordinates","closestPointXY","closestSquaredDistanceXY","closest","flat_area","inflate","simplifiedFlatCoordinates","simplify","douglasPeucker","simplifiedLinearRing","geometrylayout","intersectsExtent","deflate","linearring","_ol_geom_Polygon_","ends_","flatInteriorPointRevision_","flatInteriorPoint_","orientedRevision_","orientedFlatCoordinates_","appendLinearRing","polygon","getOrientedFlatCoordinates","linearRings","orient","getEnds","getFlatInteriorPoint","flatCenter","interiorpoint","getInteriorPoint","getLinearRingCount","getLinearRing","getLinearRings","simplifiedEnds","quantizes","simplifiedPolygon","intersectsextent","circular","opt_n","fromExtent","fromCircle","opt_sides","opt_angle","sides","arrayLength","makeRegular","startAngle","_ol_tilecoord_","z","opt_tileCoord","getKeyZXY","charCode","digits","mask","String","fromCharCode","getMinZoom","getMaxZoom","getTileRangeForExtentAndZ","getFullTileRange","useSourceMap","list","content","cssMapping","btoa","sourceMapping","sourceMap","unescape","encodeURIComponent","JSON","stringify","sourceURLs","sources","sourceRoot","cssWithMappingToString","mediaQuery","alreadyImportedModules","_ol_geom_flat_simplify_","highQuality","opt_simplifiedFlatCoordinates","radialDistance","simplifiedOffset","markers","stack","last","first","maxSquaredDistance","simplifiedEndss","douglasPeuckers","round","snap","quantize","_ol_MapEvent_","_events_event_js__WEBPACK_IMPORTED_MODULE_1__","memo","stylesInDom","isOldIE","all","atob","getElement","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","addStylesToDom","domStyle","refs","addStyle","listToStyles","newStyles","base","part","css","media","insertStyleElement","insertInto","lastStyleElementInsertedAtTop","nextSibling","insertBefore","firstChild","before","removeStyleElement","createStyleElement","attrs","addAttrs","setAttribute","update","styleIndex","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","link","rel","createLinkElement","autoFixUrls","convertToAbsoluteUrls","blob","oldSrc","href","styleSheet","cssText","createTextNode","newObj","DEBUG","newList","mayRemove","textStore","replaceText","replacement","filter","Boolean","cssNode","childNodes","_ol_geom_Geometry_","_object_js__WEBPACK_IMPORTED_MODULE_1__","extentRevision_","tmpTransform_","_transform_js__WEBPACK_IMPORTED_MODULE_7__","opt_closestPoint","intersectsCoordinate","_functions_js__WEBPACK_IMPORTED_MODULE_3__","returnOrUpdate","tmpTransform","_proj_js__WEBPACK_IMPORTED_MODULE_5__","_proj_units_js__WEBPACK_IMPORTED_MODULE_6__","inCoordinates","outCoordinates","pixelExtent","projectedExtent","_geom_flat_transform_js__WEBPACK_IMPORTED_MODULE_4__","MOVESTART","MOVEEND","_ol_xml_","DOCUMENT","implementation","createDocument","createElementNS","namespaceURI","qualifiedName","getAllTextContent","normalizeWhitespace","getAllTextContent_","accumulator","nodeType","Node","CDATA_SECTION_NODE","TEXT_NODE","nodeValue","isDocument","Document","isNode","getAttributeNS","setAttributeNS","parse","xml","DOMParser","parseFromString","makeArrayExtender","valueReader","objectStack","ol_array","makeArrayPusher","makeReplacer","makeObjectPropertyPusher","opt_property","localName","makeObjectPropertySetter","makeChildAppender","nodeWriter","makeArraySerializer","serializersNS","nodeFactory","serializers","makeSimpleNodeFactory","serialize","opt_nodeName","opt_namespaceURI","fixedNodeName","nodeName","OBJECT_PROPERTY_NODE_FACTORY","makeSequence","orderedKeys","sequence","makeStructureNS","namespaceURIs","structure","opt_structureNS","structureNS","parseNode","parsersNS","firstElementChild","nextElementSibling","parsers","parser","pushParseAndPop","opt_keys","pushSerializeAndPop","_ol_featureloader_","url","success","failure","xhr","XMLHttpRequest","open","formattype","ARRAY_BUFFER","responseType","onload","status","TEXT","responseText","XML","responseXML","response","readFeatures","featureProjection","readProjection","getLastExtent","onerror","send","loadFeaturesXhr","features","dataProjection","addFeatures","featureloader","vectoreventtype","ADDFEATURE","CHANGEFEATURE","REMOVEFEATURE","_ol_source_Vector_","source_source","attributions","logo","state","wrapX","loader_","format_","overlaps_","overlaps","url_","loader","asserts","strategy_","strategy","loadingstrategy","collection","useSpatialIndex","featuresRtree_","rbush","loadedExtentsRtree_","nullGeometryFeatures_","idIndex_","undefIdIndex_","featureChangeKeys_","featuresCollection_","ol_collection","addFeaturesInternal","bindFeaturesCollection_","addFeature","addFeatureInternal","featureKey","addToIndex_","setupChangeEvents_","insert","events","eventtype","handleFeatureChange_","objecteventtype","valid","getId","extents","newFeatures","geometryFeatures","load","modifyingCollection","collectioneventtype","removeFeature","opt_fast","featureId","removeFeatureInternal","clearEvent","forEachFeature","forEachFeatureAtCoordinateDirect","forEachFeatureInExtent","forEachInExtent","forEachFeatureIntersectingExtent","getFeaturesCollection","getFeatures","getAll","ol_obj","getFeaturesAtCoordinate","getFeaturesInExtent","getInExtent","getClosestFeatureToCoordinate","opt_filter","closestFeature","functions","previousMinSquaredDistance","minDistance","getFeatureById","getFormat","getOverlaps","getUrl","sid","removeFromIdIndex_","loadFeatures","loadedExtentsRtree","extentsToLoad","extentToLoad","containsExtent","removeLoadedExtent","removed","setLoader","opt_feature","events_event","_ol_layer_Vector_","renderBuffer","updateWhileAnimating","updateWhileInteracting","_layer_layer_js__WEBPACK_IMPORTED_MODULE_2__","declutter_","declutter","renderBuffer_","style_","styleFunction_","setStyle","updateWhileAnimating_","updateWhileInteracting_","renderMode_","renderMode","_layer_vectorrendertype_js__WEBPACK_IMPORTED_MODULE_3__","_layertype_js__WEBPACK_IMPORTED_MODULE_1__","getDeclutter","setDeclutter","getRenderBuffer","getRenderOrder","RENDER_ORDER","getStyle","getStyleFunction","getUpdateWhileAnimating","getUpdateWhileInteracting","setRenderOrder","renderOrder","_style_style_js__WEBPACK_IMPORTED_MODULE_5__","getRenderMode","_ol_geom_flat_area_","twiceArea","_ol_style_Image_","opacity_","rotateWithView_","rotateWithView","rotation_","scale_","snapToPixel_","snapToPixel","getOpacity","getRotateWithView","getScale","getSnapToPixel","getAnchor","pixelRatio","getHitDetectionImage","getImageState","getImageSize","getHitDetectionImageSize","getOrigin","setOpacity","setRotateWithView","setRotation","setScale","setSnapToPixel","listenImageChange","thisArg","unlistenImageChange","style_image","_ol_style_RegularShape_","checksums_","canvas_","hitDetectionCanvas_","origin_","points_","points","radius_","radius1","radius2_","radius2","angle_","anchor_","size_","imageSize_","hitDetectionImageSize_","atlasManager_","atlasManager","render_","getPoints","getRadius2","getAngle","imagestate","imageSize","strokeStyle","strokeWidth","colorlike","asColorLike","has","renderOptions","dom","draw_","createHitDetectionCanvas_","renderHitDetectionCallback","hasCustomHitDetectionImage","drawHitDetectionCanvas_","info","hitImage","angle0","radiusC","beginPath","arc","lineTo","fillStyle","lineWidth","closePath","strokeChecksum","fillChecksum","checksum","regularshape","_ol_style_Circle_","setRadius","_ol_structs_RBush_","opt_maxEntries","rbush_","rbush__WEBPACK_IMPORTED_MODULE_1___default","items_","items","uid","bbox","search","forEach_","_obj_js__WEBPACK_IMPORTED_MODULE_3__","quickselect","maxEntries","_maxEntries","_minEntries","_initFormat","findItem","equalsFn","calcBBox","toBBox","distBBox","children","destNode","createNode","child","leaf","compareNodeMinX","compareNodeMinY","bboxArea","bboxMargin","multiSelect","_all","childBBox","nodesToSearch","collides","_build","_splitRoot","tmpNode","_insert","goingUp","path","indexes","_condense","compareMinX","compareMinY","toJSON","fromJSON","N","M","right2","right3","N2","N1","_chooseSubtree","level","targetNode","enlargement","minArea","minEnlargement","insertPath","_split","_adjustParentBBoxes","_chooseSplitAxis","splitIndex","_chooseSplitIndex","bbox1","bbox2","overlap","minOverlap","_allDistMargin","leftBBox","rightBBox","siblings","compareArr","Function","_ol_interaction_DragPan_","_interaction_pointer_js__WEBPACK_IMPORTED_MODULE_6__","kinetic_","kinetic","lastCentroid","lastPointersCount_","condition_","condition","_events_condition_js__WEBPACK_IMPORTED_MODULE_4__","noKinetic_","getView","viewState","_coordinate_js__WEBPACK_IMPORTED_MODULE_2__","getDistance","centerpx","getPixelFromCoordinate","getCoordinateFromPixel","_easing_js__WEBPACK_IMPORTED_MODULE_3__","setHint","_viewhint_js__WEBPACK_IMPORTED_MODULE_1__","getAnimating","_functions_js__WEBPACK_IMPORTED_MODULE_5__","_ol_tilegrid_TileGrid_","zoomFactor","minZoom","resolutions_","isSorted","origins","zoomFactor_","maxZoom","origin","origins_","tileSizes_","tileSizes","tileSize_","tileSize","DEFAULT_TILE_SIZE","fullTileRanges_","tmpSize_","sizes","tilerange","calculateTileRanges_","tmpTileCoord_","forEachTileCoord","forEachTileCoordParentTileRange","opt_tileRange","tileCoordExtent","getTileCoordExtent","getTileCoordChildTileRange","getTileRangeExtent","ol_size","toSize","getTileSize","getTileCoordForXYAndZ_","getTileCoordCenter","getTileCoordForCoordAndResolution","getTileCoordForXYAndResolution_","reverseIntersectionPolicy","getZForResolution","adjustX","adjustY","xFromOrigin","yFromOrigin","tileCoordX","tileCoordY","tilecoord","getTileCoordForCoordAndZ","getTileCoordResolution","linearFindNearest","fullTileRanges","tilegrid","_ol_tilegrid_","createForProjection","projectionExtent","extentFromProjection","containsCoordinate","worldWidth","worldsAway","opt_maxZoom","opt_tileSize","opt_corner","extent_corner","resolutionsFromExtent","getCorner","proj","DEFAULT_MAX_ZOOM","createForExtent","half","_ol_layer_Base_","properties","_layer_property_js__WEBPACK_IMPORTED_MODULE_2__","state_","_math_js__WEBPACK_IMPORTED_MODULE_3__","sourceState","getVisible","setMaxResolution","setMinResolution","setVisible","zindex","_ol_proj_proj4_","_ol_geom_Point_","_geom_simplegeometry_js__WEBPACK_IMPORTED_MODULE_4__","_math_js__WEBPACK_IMPORTED_MODULE_6__","_extent_js__WEBPACK_IMPORTED_MODULE_1__","createOrUpdateFromCoordinate","_geom_geometrytype_js__WEBPACK_IMPORTED_MODULE_3__","_geom_flat_deflate_js__WEBPACK_IMPORTED_MODULE_5__","_geom_geometrylayout_js__WEBPACK_IMPORTED_MODULE_2__","_ol_structs_LRUCache_","opt_highWaterMark","highWaterMark","count_","entries_","oldest_","newest_","canExpireCache","getCount","containsKey","entry","value_","key_","newer","older","peekLast","peekLastKey","peekFirstKey","prune","_ol_geom_flat_intersectsextent_","coordinatesExtent","_flat_segments_js__WEBPACK_IMPORTED_MODULE_2__","point1","point2","intersectsSegment","lineString","_flat_contains_js__WEBPACK_IMPORTED_MODULE_1__","linearRingContainsExtent","_ol_MapBrowserEvent_","browserEvent","_mapevent_js__WEBPACK_IMPORTED_MODULE_1__","pixel","getEventPixel","dragging","_ol_Attribution_","html_","html","tileRanges_","tileRanges","getHTML","intersectsAnyTileRange","zKey","testTileRange","extentTileRange","ol_attribution","_ol_source_Source_","projection_","attributions_","attributions2_","adaptAttributions_","logo_","wrapX_","attributionLike","attribution","forEachFeatureAtCoordinate","getAttributions","getAttributions2","getLogo","getProjection","getWrapX","refresh","setAttributions","setLogo","setState","_ol_AssertionError_","VERSION","message","test","tileproperty","PRELOAD","USE_INTERIM_TILES_ON_ERROR","_ol_layer_Tile_","preload","useInterimTilesOnError","layer_layer","setPreload","setUseInterimTilesOnError","layertype","getPreload","getUseInterimTilesOnError","_ol_CenterConstraint_","centerconstraint","_ol_ResolutionConstraint_","power","opt_maxLevel","oldLevel","newLevel","resolutionconstraint","viewproperty","CENTER","RESOLUTION","ROTATION","_ol_View_","hints_","animations_","updateAnimationKey_","updateAnimations_","applyOptions_","resolutionConstraintInfo","createResolutionConstraint_","maxResolution_","minResolution_","minZoom_","centerConstraint","createCenterConstraint_","resolutionConstraint","constraint","rotationConstraint","createRotationConstraint_","constraints_","options_","getUpdatedOptions_","newOptions","getZoom","var_args","animationCount","isDef","setZoom","Date","now","series","animation","complete","sourceCenter","targetCenter","sourceResolution","targetResolution","sourceRotation","targetRotation","isNoopAnimation","viewhint","getInteracting","cancelAnimations","cancelAnimationFrame","more","seriesComplete","elapsed","fraction","progress","calculateCenterRotate","requestAnimationFrame","getSizeFromViewport_","selector","metrics","opt_delta","getConstraints","getHints","opt_hints","calculateExtent","getForViewAndSize","getZoomForResolution","setMaxZoom","setMinZoom","getResolutionForExtent","xResolution","yResolution","getResolutionForValueFunction","opt_power","getValueForResolutionFunction","nearest","getResolutionForZoom","fit","geometryOrExtent","minRotX","minRotY","maxRotX","maxRotY","rotX","rotY","isNaN","constrainedResolution","centerRotX","centerRotY","setTimeout","centerOn","centerX","centerY","hint","createExtent","none","DEFAULT_MIN_ZOOM","createSnapToResolutions","defaultMaxResolution","defaultMinResolution","createSnapToPower","enableRotation","rotationconstraint","createSnapToZero","createSnapToN","disable","_ol_control_Attribution_","ulElement_","logoLi_","display","collapsed_","collapsed","collapsible_","collapsible","className","tipLabel","collapseLabel","collapseLabel_","label","label_","activeLabel","title","handleClick_","cssClasses","control","renderedAttributions_","renderedVisible_","logoElements_","getSourceAttributions_","lookup","visibleAttributions","attributionGetter","mapEvent","updateElement_","innerHTML","classList","logos","insertLogos_","logoElement","logoKey","logoElements","logoValue","HTMLElement","Image","src","handleToggle_","toggle","replaceNode","getCollapsible","setCollapsible","setCollapsed","getCollapsed","_ol_control_Rotate_","callResetNorth_","resetNorth","duration_","autoHide_","autoHide","resetNorth_","msTransform","webkitTransform","_ol_control_Zoom_","zoomInLabel","zoomOutLabel","zoomInTipLabel","zoomOutTipLabel","inElement","outElement","zoomByDelta_","newResolution","_ol_control_","controls","zoomOptions","rotateOptions","attributionOptions","_ol_pointer_EventSource_","dispatcher","mapping","mapping_","getEvents","getHandlerForEvent","eventsource","_ol_pointer_MouseSource_","mousedown","mousemove","mouseup","mouseover","mouseout","pointerMap","lastTouches","POINTER_ID","POINTER_TYPE","DEDUP_DIST","isEventSimulatedFromTouch_","inEvent","lts","prepareEvent","cloneEvent","pd","cancel","down","move","up","cleanupMouse","enterOver","leaveOut","mousesource","_ol_pointer_MsSource_","MSPointerDown","msPointerDown","MSPointerMove","msPointerMove","MSPointerUp","msPointerUp","MSPointerOut","msPointerOut","MSPointerOver","msPointerOver","MSPointerCancel","msPointerCancel","MSGotPointerCapture","msGotPointerCapture","MSLostPointerCapture","msLostPointerCapture","POINTER_TYPES","prepareEvent_","cleanup","makeEvent","mssource","_ol_pointer_NativeSource_","pointerdown","pointerDown","pointermove","pointerup","pointerUp","pointerout","pointerOut","pointerover","pointerOver","pointercancel","pointerCancel","gotpointercapture","gotPointerCapture","lostpointercapture","lostPointerCapture","fireNativeEvent","nativesource","_ol_pointer_PointerEvent_","opt_eventDict","eventDict","buttons","getButtons_","pressure","getPressure_","bubbles","cancelable","detail","screenX","screenY","relatedTarget","tiltX","tiltY","hwTimestamp","HAS_BUTTONS","which","ev","MouseEvent","pointerevent","_ol_pointer_TouchSource_","mouseSource","touchstart","touchmove","touchend","touchcancel","firstTouchId_","clickCount_","resetId_","DEDUP_TIMEOUT","CLICK_COUNT_TIMEOUT","isPrimaryTouch_","inTouch","identifier","setPrimaryTouch_","count","cancelResetClickCount_","removePrimaryPointer_","inPointer","resetClickCount_","resetClickCountHandler_","clearTimeout","touchToPointer_","webkitRadiusX","radiusX","webkitRadiusY","radiusY","webkitForce","force","processTouches_","inFunction","pointer","touches","changedTouches","findTouch_","touchList","searchId","vacuumTouches_","out","cancelOut_","dedupSynthMouse_","overDown_","outTarget","over","enter","moveOverOut_","outEvent","upOut_","leave","cleanUpPointer_","lt","touchsource","_ol_pointer_PointerEventHandler_","eventtarget","element_","eventMap_","eventSourceList_","registerSources","registerSource","register_","newEvents","handler","eventSource","addEvents_","unregister_","removeEvents_","eventHandler_","eventName","ol_events","eventCopy","CLONE_PROPS","fireEvent","contains_","container","contained","inType","wrapMouseEvent","pointereventhandler","_ol_MapBrowserEventHandler_","moveTolerance","clickTimeoutId_","dragging_","dragListenerKeys_","moveTolerance_","down_","getViewport","activePointers_","trackedTouches_","pointerEventHandler_","documentPointerEventHandler_","pointerdownListenerKey_","handlePointerDown_","relayedListenerKey_","relayEvent_","emulateClick_","newEvent","mapbrowserpointerevent","mapbrowsereventtype","updateActivePointers_","handlePointerUp_","isMouseActionButton_","handlePointerMove_","isMoving_","mapbrowsereventhandler","mapproperty","LAYERGROUP","SIZE","TARGET","VIEW","_ol_structs_PriorityQueue_","priorityFunction","keyFunction","priorityFunction_","keyFunction_","elements_","priorities_","queuedElements_","dequeue","elements","priorities","siftUp_","elementKey","enqueue","priority","siftDown_","getLeftChildIndex_","getRightChildIndex_","getParentIndex_","heapify_","isKeyQueued","isQueued","startIndex","lIndex","rIndex","smallerChildIndex","parentIndex","reprioritize","priorityqueue","_ol_TileQueue_","tilePriorityFunction","tileChangeCallback","getKey","tileChangeCallback_","tilesLoading_","tilesLoadingKeys_","added","tile","events_eventtype","handleTileChange","getTilesLoading","tilestate","tileKey","loadMoreTiles","maxTotalLoading","maxNewLoads","newLoads","abortedTiles","tilequeue","plugintype","MAP_RENDERER","LAYER_RENDERER","_ol_plugins_","mapRendererPlugins_","layerRendererPlugins_","plugin","plugins","register","ol_plugins","renderer_type","_ol_PluggableMap_","optionsInternal","createOptionsInternal","loadTilesWhileAnimating_","loadTilesWhileAnimating","loadTilesWhileInteracting_","loadTilesWhileInteracting","pixelRatio_","logos_","animationDelayKey_","animationDelay_","renderFrame_","coordinateToPixelTransform_","ol_transform","pixelToCoordinateTransform_","frameIndex_","frameState_","previousExtent_","viewPropertyListenerKey_","viewChangeListenerKey_","layerGroupPropertyListenerKeys_","viewport_","overflow","msTouchAction","touchAction","overlayContainer_","overlayContainerStopEvent_","overlayEvents","mapBrowserEventHandler_","handleMapBrowserEvent","keyboardEventTarget_","keyboardEventTarget","keyHandlerKeys_","handleBrowserEvent","interactions","overlays_","overlays","overlayIdIndex_","mapRendererPlugin","handleResize_","focus_","postRenderFunctions_","tileQueue_","getTilePriority","handleTileChange_","skippedFeatureUids_","handleLayerGroupChanged_","handleViewChanged_","handleSizeChanged_","handleTargetChanged_","interaction","addOverlayInternal_","addControl","getControls","addInteraction","getInteractions","addLayer","getLayerGroup","addOverlay","overlay","getOverlays","forEachFeatureAtPixel","hitTolerance","layerFilter","getFeaturesAtPixel","forEachLayerAtPixel","opt_layerFilter","opt_this2","thisArg2","hasFeatureAtPixel","hasFeatureAtCoordinate","getEventCoordinate","viewportPosition","getBoundingClientRect","eventPosition","top","getTarget","getTargetElement","pixelToCoordinateTransform","getOverlayById","coordinateToPixelTransform","getOverlayContainer","tileSourceKey","tileCenter","tileResolution","wantedTiles","focus","mapbrowserevent","interactionsArray","handlePostRender","tileQueue","hints","viewHints","postRenderFunctions","targetElement","updateSize","removeLayerRenderers","handleViewPropertyChanged_","layerGroup","isRendered","renderSync","removeControl","removeInteraction","removeLayer","removeOverlay","time","previousFrameState","hasArea","pixelResolution","skippedFeatureUids","usedTiles","renderFrame","mapevent","mapeventtype","setLayerGroup","setSize","setView","skipFeature","featureUid","computedStyle","parseFloat","unskipFeature","DEFAULT_RENDERER_TYPES","LOGO_URL","rendererTypes","layer_group","ol_view","mapRendererPlugins","getMapRendererPlugins","outer","rendererType","candidate","pluggablemap","_ol_Kinetic_","decay","minVelocity","delay","decay_","minVelocity_","delay_","initialVelocity_","lastIndex","firstIndex","ol_kinetic","_ol_interaction_DoubleClickZoom_","delta_","doubleclickzoom","_ol_interaction_DragRotate_","events_condition","altShiftKeysOnly","lastAngle_","dragrotate","_ol_render_Box_","startPixel_","endPixel_","disposable","startPixel","endPixel","setPixels","createOrUpdateGeometry","render_box","_ol_interaction_DragBox_","box_","minArea_","boxEndCondition_","boxEndCondition","defaultBoxEndCondition","EventType_","BOXDRAG","onBoxEnd","BOXEND","BOXSTART","dragbox","_ol_interaction_DragZoom_","out_","mapExtent","boxPixelExtent","createOrUpdateFromCoordinates","factor","scaleFromCenter","dragzoom","keycode","UP","DOWN","_ol_interaction_KeyboardPan_","defaultCondition_","pixelDelta_","pixelDelta","keyCode","mapUnitsDelta","ol_coordinate","keyboardpan","_ol_interaction_KeyboardZoom_","charCodeAt","keyboardzoom","_ol_interaction_MouseWheelZoom_","timeout_","timeout","useAnchor_","useAnchor","constrainResolution_","lastAnchor_","startTime_","timeoutId_","mode_","trackpadEventGap_","trackpadTimeoutId_","trackpadDeltaPerZoom_","trackpadZoomBuffer_","wheelEvent","deltaMode","WheelEvent","DOM_DELTA_PIXEL","DOM_DELTA_LINE","wheelDeltaY","Mode_","TRACKPAD","decrementInteractingHint_","rebound","timeLeft","handleWheelZoom_","MOUSEWHEELZOOM_MAXDELTA","setMouseAnchor","mousewheelzoom","_ol_interaction_PinchRotate_","rotating_","rotationDelta_","threshold_","threshold","rotationDelta","touch0","touch1","pinchrotate","_ol_interaction_PinchZoom_","lastDistance_","lastScaleDelta_","scaleDelta","pinchzoom","_ol_interaction_","altShiftDragRotate","doubleClickZoom","zoomDelta","zoomDuration","dragPan","dragpan","pinchRotate","pinchZoom","keyboard","mouseWheelZoom","shiftDragZoom","ol_interaction","_ol_ImageBase_","getPixelRatio","imagebase","_ol_ImageCanvas_","opt_loader","error_","getError","handleLoad_","err","imagecanvas","_ol_render_Event_","opt_vectorContext","opt_context","opt_glContext","vectorContext","glContext","render_event","_ol_render_VectorContext_","drawCustom","drawGeometry","drawCircle","circleGeometry","drawFeature","drawGeometryCollection","geometryCollectionGeometry","drawLineString","lineStringGeometry","drawMultiLineString","multiLineStringGeometry","drawMultiPoint","multiPointGeometry","drawMultiPolygon","multiPolygonGeometry","drawPoint","pointGeometry","drawPolygon","polygonGeometry","drawText","setFillStrokeStyle","setImageStyle","imageStyle","opt_declutterGroup","setTextStyle","textStyle","vectorcontext","_ol_render_canvas_Immediate_","viewRotation","context_","transform_","viewRotation_","contextFillState_","contextStrokeState_","contextTextState_","fillState_","strokeState_","imageAnchorX_","imageAnchorY_","imageHeight_","imageOpacity_","imageOriginX_","imageOriginY_","imageRotateWithView_","imageRotation_","imageScale_","imageSnapToPixel_","imageWidth_","textOffsetX_","textOffsetY_","textRotateWithView_","textRotation_","textScale_","textFillState_","textStrokeState_","textState_","pixelCoordinates_","tmpLocalTransform_","drawImages_","pixelCoordinates","flat_transform","localTransform","drawText_","setContextFillState_","setContextStrokeState_","setContextTextState_","strokeText","fillText","moveToLineTo_","close","moveTo","drawRings_","getGeometriesArray","flatMidpoint","getFlatMidpoint","geometryExtent","flatMidpoints","getFlatMidpoints","flatInteriorPoint","getEndss","flatInteriorPoints","getFlatInteriorPoints","fillState","contextFillState","strokeState","contextStrokeState","textState","contextTextState","textAlign","render_canvas","textBaseline","fillStyleColor","strokeStyleColor","strokeStyleLineCap","strokeStyleLineDash","strokeStyleLineDashOffset","strokeStyleLineJoin","strokeStyleWidth","strokeStyleMiterLimit","imageAnchor","imageImage","imageOrigin","textFillStyle","textFillStyleColor","textStrokeStyle","textStrokeStyleColor","textStrokeStyleLineCap","textStrokeStyleLineDash","textStrokeStyleLineDashOffset","textStrokeStyleLineJoin","textStrokeStyleWidth","textStrokeStyleMiterLimit","textFont","getFont","textOffsetX","getOffsetX","textOffsetY","getOffsetY","textRotateWithView","textRotation","textScale","textText","textTextAlign","getTextAlign","textTextBaseline","getTextBaseline","immediate","_ol_renderer_Layer_","observable","layer_","createLoadedTileFinder","tiles","forEachLoadedTile","getLayer","handleImageChange_","renderIfReadyAndVisible","loadImage","imageState","source_state","scheduleExpireCache","tileSource","postRenderFunction","expireCache","updateLogos","updateUsedTiles","manageTilePyramid","currentZ","opt_tileCallback","getTile","useTile","renderer_layer","_ol_renderer_canvas_Layer_","renderedResolution","clip","topLeft","topRight","bottomRight","bottomLeft","save","dispatchComposeEvent_","opt_transform","composeEvent","forEachLayerAtCoordinate","postCompose","render_eventtype","preCompose","dispatchRenderEvent","composeFrame","prepareFrame","canvas_layer","_ol_renderer_canvas_IntermediateCanvas_","coordinateToCanvasPixelTransform","hitCanvasContext_","clipped","imageTransform","getImageTransform","dw","dh","restore","clearRect","imageData","getImageData","intermediatecanvas","_ol_renderer_canvas_ImageLayer_","imageLayer","imageTransform_","skippedFeatures_","vectorRenderer_","vectorrendertype","mapRenderer","candidates","getLayerRendererPlugins","setVectorRenderer","viewCenter","viewResolution","imageSource","renderedExtent","ENABLE_RASTER_REPROJECTION","vectorRenderer","imageFrameState","skippedFeatures","replayGroupChanged","imageExtent","imageResolution","imagePixelRatio","imagelayer","_ol_style_IconImageCache_","cacheSize_","maxCacheSize_","crossOrigin","ol_color","expire","iconImage","maxCacheSize","iconimagecache","_ol_style_","iconImageCache","ol_style","_ol_renderer_Map_","layerRenderers_","layerRendererListeners_","calculateMatrices2D","removeLayerRendererByKey_","expireIconCache_","translatedCoordinate","layerRenderer","getLayerRenderer","layerKey","layerRendererPlugins","handleLayerRendererChange_","getLayerRendererByKey","getLayerRenderers","removeUnusedLayerRenderers_","scheduleExpireIconCache","scheduleRemoveUnusedLayerRenderers","sortByZIndex","state1","state2","renderer_map","_ol_renderer_canvas_Map_","stableSort","numLayers","canvas_map","_ol_renderer_canvas_TileLayer_","tileLayer","oversampling_","renderedExtent_","renderedRevision","renderedTiles","tmpExtent","tmpTileRange_","zDirection","isDrawableTile_","tileState","sourceRevision","getTileGridForProjection","oversampling","tilePixelRatio","getTilePixelRatio","tilesToDrawByZ","findLoadedTiles","tmpTileRange","newTiles","getInterimTile","inTransition","getAlpha","childTileRange","covered","animatingOrInteracting","tilePixelSize","getTilePixelSize","currentScale","currentTilePixelSize","tileExtent","tileGutter","tilesToDraw","zs","tileCoordKey","getGutter","getTileCoord","drawTileImage","gutter","transition","getOpaque","alphaChanged","endTransition","tilelayer","_ol_render_ReplayGroup_","getReplay","replayType","replaygroup","replaytype","DEFAULT","_ol_geom_flat_textpath_","measure","startM","maxAngle","previousAngle","reverse","numChars","segmentM","segmentLength","chunk","chunkLength","char","charLength","charM","segmentPos","interpolate","unshift","textpath","canvas_instruction","BEGIN_GEOMETRY","BEGIN_PATH","CLOSE_PATH","CUSTOM","DRAW_CHARS","DRAW_IMAGE","END_GEOMETRY","FILL","MOVE_TO_LINE_TO","SET_FILL_STYLE","SET_STROKE_STYLE","STROKE","_ol_render_replay_","ORDER","TEXT_ALIGN","render_replay","_ol_render_canvas_Replay_","maxExtent","declutterTree","tmpExtent_","maxLineWidth","fillOrigin_","beginGeometryInstruction1_","beginGeometryInstruction2_","bufferedMaxExtent_","instructions","coordinateCache_","renderedTransform_","hitDetectionInstructions","replayTextBackground_","p1","p2","p3","p4","fillInstruction","strokeInstruction","setStrokeStyle_","replayImage_","declutterGroup","fillStroke","box","boxW","boxH","boxX","boxY","declutterArgs","applyPixelRatio","dashArray","dash","appendFlatCoordinates","closed","skipFirst","myEnd","getBufferedMaxExtent","lastRel","nextRel","lastCoord","nextCoord","skipped","drawCustomCoordinates_","replayEnds","replayEnd","beginGeometry","replayEndss","replayBegin","myEnds","endGeometry","instruction","renderDeclutter_","groupCount","declutterData","replay_","skippedFeaturesHash","featureCallback","opt_hitExtent","dd","prevX","prevY","roundX","roundY","skipFeatures","pendingFill","pendingStroke","lastFillInstruction","lastStrokeInstruction","coordinateCache","batchSize","backgroundFill","backgroundStroke","baseline","fillKey","strokeKey","textKey","pathLength","flat_length","textLength","textStates","cc","chars","replay","replayHitDetection","opt_featureCallback","reverseHitDetectionInstructions","reverseSubArray","applyFill","fillExtent","applyStroke","updateFillStyle","currentFillStyle","updateStrokeStyle","currentStrokeStyle","currentLineCap","currentLineDash","currentLineDashOffset","currentLineJoin","currentLineWidth","currentMiterLimit","endGeometryInstruction","finish","canvas_replay","_ol_render_canvas_ImageReplay_","declutterGroup_","hitDetectionImage_","anchorX_","anchorY_","height_","originX_","originY_","drawCoordinates_","myBegin","hitDetectionImage","imagereplay","_ol_render_canvas_LineStringReplay_","drawFlatCoordinates_","moveToLineToInstruction","lastStroke","linestringreplay","_ol_render_canvas_PolygonReplay_","drawFlatCoordinatess_","numEnds","beginPathInstruction","closePathInstruction","setFillStrokeStyles_","circleInstruction","polygonreplay","_ol_geom_flat_straightchunk_","m12","m23","x12","y12","x23","y23","chunkStart","chunkEnd","chunkM","acos","straightchunk","textplacement","LINE","_ol_render_canvas_TextReplay_","labels_","fillStates","strokeStates","textKey_","fillKey_","strokeKey_","widths_","measureTextWidths","lines","widths","currentWidth","numLines","geometryType","placement","flatEnd","flatOffset","oo","range","drawChars_","interiorPoints","drawTextImage_","align","lineHeight","renderWidth","leftRight","getOverflow","getMaxAngle","getPlacement","getBackgroundFill","getBackgroundStroke","getPadding","textreplay","_ol_render_canvas_ReplayGroup_","opt_renderBuffer","declutterTree_","tolerance_","maxExtent_","resolution_","replaysByZIndex_","hitDetectionContext_","hitDetectionTransform_","circleArrayCache_","0","fillCircleArrayRowToMiddle_","getCircleArray_","arraySize","error","replayDeclutter","declutterReplays","zz","replayData","addDeclutter","group","flatClipCoords","getClipCoords","hasReplays","replays","replayKey","hitExtent","contextSize","declutteredFeatures","zIndexKey","Constructor","BATCH_CONSTRUCTORS_","getReplays","opt_replayTypes","opt_declutterReplays","replayTypes","Circle","Default","LineString","Polygon","Text","canvas_replaygroup","_ol_renderer_vector_","feature1","feature2","getTolerance","SIMPLIFY_TOLERANCE","replayGroup","circleReplay","textReplay","loading","renderFeature_","renderGeometry_","geometryRenderer","GEOMETRY_RENDERERS_","lineStringReplay","polygonReplay","imageReplay","Point","renderPointGeometry_","renderLineStringGeometry_","renderPolygonGeometry_","MultiPoint","renderMultiPointGeometry_","MultiLineString","renderMultiLineStringGeometry_","MultiPolygon","renderMultiPolygonGeometry_","GeometryCollection","renderGeometryCollectionGeometry_","renderCircleGeometry_","vector","_ol_renderer_canvas_VectorLayer_","vectorLayer","rbush_default","dirty_","renderedRevision_","renderedResolution_","renderedRenderOrder_","replayGroup_","handleFontsChanged_","vectorSource","clipExtent","replayContext","drawOffsetX","drawOffsetY","transparentLayer","hasRenderListeners","drawWidth","drawHeight","drawSize","world","mainContextAlpha","handleStyleImageChange_","animating","interacting","frameStateExtent","vectorLayerRevision","vectorLayerRenderBuffer","vectorLayerRenderOrder","defaultOrder","renderFeature","dirty","getSquaredTolerance","vectorlayer","vectortilerendertype","HYBRID","_ol_renderer_canvas_VectorTileLayer_","renderedLayerRevision_","IMAGE_REPLAYS","hybrid","VECTOR_REPLAYS","layerRevision","createReplayGroup_","revision","replayState","getReplayState","renderedRenderOrder","sourceTileGrid","getTileGrid","wrappedTileCoord","zIndexKeys","tt","tileKeys","sourceTile","sourceTileCoord","sourceTileExtent","sharedExtent","bufferedExtent","tileProjection","reproject","setProjection","setReplayGroup","vectorImageTile","renderTileImage_","getReplayGroup","getReplayTransform_","renderResolution","clips","worldOffset","currentClip","renderedTileRevision","pixelScale","vectortilelayer","_ol_webgl_Shader_","source_","isAnimated","webgl_shader","_ol_webgl_Fragment_","webgl","FRAGMENT_SHADER","fragment","_ol_webgl_Vertex_","VERTEX_SHADER","vertex","_ol_render_webgl_circlereplay_defaultshader_","DEBUG_WEBGL","defaultshader","defaultshader_locations","program","u_projectionMatrix","getUniformLocation","u_offsetScaleMatrix","u_offsetRotateMatrix","u_lineWidth","u_pixelRatio","u_opacity","u_fillColor","u_strokeColor","u_size","a_position","getAttribLocation","a_instruction","a_radius","_ol_vec_Mat4_","mat4","_ol_render_webgl_Replay_","projectionMatrix_","offsetRotateMatrix_","offsetScaleMatrix_","tmpMat4_","indices","indicesBuffer","startIndices","startIndicesFeature","verticesBuffer","getDeleteResourcesFunction","setUpProgram","shutDownProgram","locations","drawReplay","hitDetection","drawHitDetectionReplayOneByOne","drawHitDetectionReplay","oneByOne","drawHitDetectionReplayAll","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","tmpStencil","tmpStencilFunc","tmpStencilMaskVal","tmpStencilRef","tmpStencilMask","tmpStencilOpFail","tmpStencilOpPass","tmpStencilOpZFail","getGL","isEnabled","STENCIL_TEST","STENCIL_FUNC","STENCIL_VALUE_MASK","STENCIL_REF","STENCIL_WRITEMASK","STENCIL_FAIL","STENCIL_PASS_DEPTH_PASS","STENCIL_PASS_DEPTH_FAIL","enable","STENCIL_BUFFER_BIT","stencilMask","stencilFunc","ALWAYS","stencilOp","KEEP","REPLACE","NOTEQUAL","bindBuffer","ELEMENT_ARRAY_BUFFER","projectionMatrix","offsetScaleMatrix","offsetRotateMatrix","uniformMatrix4fv","fromTransform","uniform1f","drawElements","elementType","hasOESElementIndexUint","UNSIGNED_INT","UNSIGNED_SHORT","numItems","offsetInBytes","TRIANGLES","webgl_replay","_ol_render_webgl_","EPSILON","render_webgl","_ol_webgl_Buffer_","opt_arr","opt_usage","arr_","usage_","Usage_","STATIC_DRAW","getUsage","STREAM_DRAW","DYNAMIC_DRAW","webgl_buffer","_ol_render_webgl_CircleReplay_","defaultLocations_","styles_","styleIndices_","fillColor","strokeColor","numVertices","numIndices","lastState","deleteBuffer","fragmentShader","vertexShader","getProgram","useProgram","enableVertexAttribArray","vertexAttribPointer","FLOAT","uniform2fv","disableVertexAttribArray","nextStyle","setFillStyle_","drawReplaySkipping_","groupStart","featureIndex","featureStart","uniform4fv","circlereplay","_ol_render_webgl_texturereplay_defaultshader_","texturereplay_defaultshader","texturereplay_defaultshader_locations","u_image","a_texCoord","a_offsets","a_opacity","a_rotateWithView","contexteventtype","LOST","RESTORED","_ol_webgl_Context_","gl_","bufferCache_","shaderCache_","programCache_","currentProgram_","hitDetectionFramebuffer_","hitDetectionTexture_","hitDetectionRenderbuffer_","includes","getExtension","handleWebGLContextLost","handleWebGLContextRestored","buf","bufferKey","bufferCacheEntry","arrayBuffer","createBuffer","Float32Array","Uint32Array","Uint16Array","bufferData","isContextLost","deleteProgram","deleteShader","deleteFramebuffer","deleteRenderbuffer","deleteTexture","getCanvas","getHitDetectionFramebuffer","initHitDetectionFramebuffer_","getShader","shaderObject","shaderKey","shader","createShader","shaderSource","compileShader","fragmentShaderObject","vertexShaderObject","programKey","createProgram","attachShader","linkProgram","framebuffer","createFramebuffer","bindFramebuffer","FRAMEBUFFER","texture","createEmptyTexture","renderbuffer","createRenderbuffer","bindRenderbuffer","RENDERBUFFER","renderbufferStorage","DEPTH_COMPONENT16","framebufferTexture2D","COLOR_ATTACHMENT0","TEXTURE_2D","framebufferRenderbuffer","DEPTH_ATTACHMENT","bindTexture","createTexture_","opt_wrapS","opt_wrapT","createTexture","texParameteri","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","TEXTURE_WRAP_T","texImage2D","RGBA","UNSIGNED_BYTE","webgl_context","_ol_render_webgl_TextureReplay_","groupIndices","hitDetectionGroupIndices","imageHeight","imageWidth","defaultLocations","textures","getTextures","drawCoordinates","createTextures","images","texturePerImage","CLAMP_TO_EDGE","getHitDetectionTextures","drawReplaySkipping","groupEnd","hitDetectionTextures","opt_all","texturereplay","_ol_render_webgl_ImageReplay_","images_","hitDetectionImages_","textures_","hitDetectionTextures_","currentImage","webgl_imagereplay","_ol_geom_flat_topology_","topology","_ol_render_webgl_linestringreplay_defaultshader_","linestringreplay_defaultshader","linestringreplay_defaultshader_locations","u_miterLimit","u_color","a_lastPos","a_nextPos","a_direction","_ol_render_webgl_LineStringReplay_","startCoords","sign","p0","lineStringIsClosed","lastSign","addVertices_","Instruction_","BEGIN_LINE_CAP","BEGIN_LINE","END_LINE","END_LINE_CAP","triangleIsCounterClockwise","BEVEL_FIRST","BEVEL_SECOND","MITER_BOTTOM","MITER_TOP","product","isValid_","firstP","lastP","indexCount","drawPolygonCoordinates","holeFlatCoordinates","setPolygonStyle","opt_index","getCurrentIndex","tmpDepthFunc","DEPTH_FUNC","tmpDepthMask","DEPTH_WRITEMASK","DEPTH_TEST","depthMask","depthFunc","ROUND","webgl_linestringreplay","_ol_render_webgl_polygonreplay_defaultshader_","polygonreplay_defaultshader","polygonreplay_defaultshader_locations","_ol_structs_LinkedList_","opt_circular","first_","last_","head_","circular_","length_","insertItem","next","removeItem","firstItem","lastItem","nextItem","getNextItem","prevItem","getPrevItem","getCurrItem","setFirstItem","linkedlist","_ol_render_webgl_PolygonReplay_","outerRing","rtree","structs_rbush","processFlatCoordinates_","maxCoords","getMaxCoords_","holeLists","holeList","classifyPoints_","currList","currItem","getIntersections_","bridgeHole_","triangulate_","clockwise","segments","createPoint_","insertItem_","seg","ccw","s0","pointsReclassified","reflex","removeItem_","hole","holeMaxX","listMaxX","bestPoint","p5","minDist","intersectingSegments","currSeg","calculateIntersection_","dist","pointsInTriangle","getPointsInTriangle_","currPoint","currTheta","p0Bridge","p1Bridge","simple","isSimple_","clipEars_","resolveSelfIntersections_","splitPolygon_","isClockwise_","s3","processedEars","variableCriterion","diagonalIsInside_","opt_touch","resolvedIntersections","breakCond","intersections","newPolygon","newRtree","opt_rtree","opt_reflex","segmentsInExtent","denom","ub","p1IsLeftOf","p1IsRightOf","p3IsLeftOf","p3IsRightOf","p1InCone","p3InCone","currIndex","currLineIndex","holeFlatCoords","holes","lineDeleter","nullStrokeStyle","style_stroke","webgl_polygonreplay","_ol_style_Atlas_","space","space_","emptyBlocks_","renderCallback","block","split_","newBlock1","newBlock2","updateBlocks_","args","style_atlas","_ol_style_AtlasManager_","currentSize_","initialSize","INITIAL_ATLAS_SIZE","maxSize_","maxSize","MAX_ATLAS_SIZE","atlases_","currentHitSize_","hitAtlases_","getInfo","getInfo_","hitInfo","mergeInfos_","atlases","opt_renderHitCallback","add_","renderHitCallback","isHitAtlas","atlas","atlasmanager","_ol_render_webgl_TextReplay_","measureCanvas_","textAlign_","textBaseline_","offsetX_","offsetY_","currAtlas_","currX","currY","charArr","charInfo","glyphAtlas","textSize","getTextSize_","self","textHeight","str","sum","curr","addCharToAtlas_","reduce","mCtx","ctx","getAtlas_","params","hash","calculateHash_","webgl_textreplay","_ol_render_webgl_ReplayGroup_","replayHitDetection_","HIT_DETECTION_SIZE_","Uint8Array","readPixels","webgl_replaygroup","_ol_render_webgl_Immediate_","center_","imageStyle_","fillStyle_","strokeStyle_","textStyle_","webgl_immediate","_ol_renderer_webgl_defaultmapshader_","defaultmapshader","defaultmapshader_locations","u_texCoordMatrix","u_texture","_ol_renderer_webgl_Layer_","arrayBuffer_","framebufferDimension","texCoordMatrix","uniform1i","getTexCoordMatrix","getProjectionMatrix","getTexture","drawArrays","TRIANGLE_STRIP","webgl_layer","_ol_renderer_webgl_ImageLayer_","hitTransformationMatrix_","imageElement","updateProjectionMatrix_","canvasWidth","canvasHeight","canvasExtentWidth","canvasExtentHeight","getHitTransformationMatrix_","pixelOnFrameBuffer","mapSize","mapCoordTransform","projectionMatrixInv","webgl_imagelayer","_ol_renderer_webgl_Map_","clipTileCanvasWidth_","clipTileCanvasHeight_","clipTileContext_","antialias","depth","preserveDrawingBuffer","stencil","textureCache_","lrucache","tileTextureQueue_","loadNextTileTexture_","bindTileTexture","textureCacheFrameMarkerCount_","initializeGL_","magFilter","minFilter","textureCacheEntry","clipTileCanvas","clipTileContext","expireCache_","WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK","getTileTextureQueue","renderers","activeTexture","TEXTURE0","blendFuncSeparate","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","ONE","CULL_FACE","SCISSOR_TEST","isTileTextureLoaded","layerStatesToDraw","clearColor","BLEND","viewport","hasFeature","webgl_map","_ol_renderer_webgl_tilelayershader_","tilelayershader","tilelayershader_locations","u_tileOffset","_ol_renderer_webgl_TileLayer_","fragmentShader_","vertexShader_","locations_","renderArrayBuffer_","renderedTileRange_","renderedFramebufferExtent_","loaded","framebufferExtent","tilePixelResolution","tileRangeSize","maxDimension","framebufferExtentDimension","allTilesLoaded","tileTextureQueue","pixelOnMapScaled","pixelOnFrameBufferScaled","webgl_tilelayer","_ol_renderer_webgl_VectorLayer_","layerState_","scissor","webgl_vectorlayer","registerMultiple","_ol_Map_","defaults","_ol_Feature_","opt_geometryOrProperties","_object_js__WEBPACK_IMPORTED_MODULE_4__","id_","geometryName_","geometryChangeKey_","handleGeometryChanged_","_geom_geometry_js__WEBPACK_IMPORTED_MODULE_5__","_index_js__WEBPACK_IMPORTED_MODULE_3__","setGeometryName","getGeometryName","handleGeometryChange_","_events_eventtype_js__WEBPACK_IMPORTED_MODULE_2__","createStyleFunction","setId","_style_style_js__WEBPACK_IMPORTED_MODULE_6__","_ol_loadingstrategy_","_ol_geom_flat_length_","perimeter","_ol_geom_flat_segments_","ret","_ol_geom_flat_interiorpoint_","flatCenters","flatCentersOffset","rr","pointX","maxSegmentLength","_array_js__WEBPACK_IMPORTED_MODULE_0__","escape","ol_Base_Utils_BaseUtils","ol_map","mapElement","mapListeners","openFlag","overlaypositioning","BOTTOM_CENTER","CENTER_LEFT","CENTER_CENTER","CENTER_RIGHT","TOP_CENTER","_ol_Overlay_","insertFirst","autoPan","autoPanAnimation","autoPanMargin","rendered","bottom_","left_","right_","top_","mapPostrenderListenerKey","Property","ELEMENT","handleElementChanged","MAP","handleMapChanged","OFFSET","handleOffsetChanged","POSITION","handlePositionChanged","POSITIONING","handlePositioningChanged","setElement","setOffset","setPositioning","positioning","setPosition","getOffset","getPosition","getPositioning","removeChildren","updatePixelPosition","panIntoView","mapRect","getRect","overlayRect","outerWidth","outerHeight","offsetLeft","offsetRight","offsetTop","offsetBottom","centerPx","newCenterPx","pageXOffset","pageYOffset","updateRenderedPosition","bottom","getOptions","defaultImage","ol_AnimationMarker_AnimationMarker","super","timeInterval","show","coord","hide","isOpened","Overlay","AnimationMarker","ol_FeatureHighLight_Utils","originalStyle","style_style","highlightlayer","source_vector","highlightlayerforspecific","highlighfeature","animationMarker","highlightOtherFeature","startup","console","warn","_highlightShow","messages","_highlightClose","highlightSpecificFeature","_highlightPointFeature","_highlightOtherFeature","clearhighlightFeature","_highlightOtherFeaturetWithAnimate","copyFeature","ol_feature","labelPoint","highlightStyle","curTime","_highlightPointWithAnimate","_highlighFeature","_feature","_ol_layer_Image_","layer_image","ol_FeatureLayer_Utils","getVectorLayerInfo","layerinfo","oid","getVectorLayerTitle","layerdata","icon","childlayer","childLayer","getLayerByFeature","layersCollection","_getLayerByFeature","getVisibleLayerByFeature","filterOtions","_filterLayer","_isFeatureInVectorSource","layerPropertity","isIndex","isFeatureInLayer","_layers","_result","getFeaturesByLayerFilter","getFeatureByExtent","_options","_features","topmost","getLayerByLayerID","_layer","geTopMostLayer","ol_MapSelection_Utils_MapSelectionUtils","selectRegionElement","selectRegionClass","onmousedown","onmousemove","onmouseup","startDrawRectangle","drawCpmpeleteCallback","_disableMapDrag","posx","posy","_dynamicDrawRegion","closeDrawRectangle","_enableMapDrag","mainContanier","isOpen","_renderDynamicDiv","div","ol_MapCoordinate_Utils_MapzCoordinateUtils","getExtendByElement","div_top","div_left","div_right","div_bottom","map_top","map_left","topleft","bottomright","topright","bottomleft","geom_polygon","IdentifyBaseComponent","[object Object]","LayerIconImage","LayerGroupIconImage","ol_Identify_TypeSelect_IdentifyLayerTypeSelect","optionEnum","ALLLAYER","TOPMOST","optionTextEnum","_layerTypeSelect","_layerTypeSelectControl","_layerTypeOptionContaniner","valueFieldName","_curSelected","_selectLiElement","maxHeight","layergroup","initComponent","selectContainer","curSelectContent","_createCurrentOption","selectContentContainer","selectContent","_createSelect","option_topmost","_createOption","options_visible","options_all","selectOption","optionElement","copyElement","getAttribute","innerText","citeElement","oldOptionElement","addOption","iconName","option","addTreeNodeOption","treeNodes","_addTreeNodeOption","separateline","_createSeparateline","treeContainer","treeNode","treeNodeElement","childULElement","showorhideOptionPanel","hideOptionPanel","showOptionPanel","_getOffsetTopByBody","_getOffsetLeftByBody","offsetParent","lable","onclick","selectElement","onmouseleave","isTreeNode","aElement","iconElement","childElementCount","childElement","bBefore","bAfter","textContanier","getLayerTypeSelectValue","ol_Identify_FeatureLayerTree_IdentifyFeatureLayerTree","dataNode","_DataTreeNode","_selectTreeNode","noop","_TreeNodeOnClick","_TreeNodeOnHover","_TreeGroupOnClick","_TreeGroupOnHover","feateaTree","_renderTreeNodes","bindEvent","selectTreeNodeByData","treeNodeData","groupIndex","layerIndex","layerNode","_selectFeatureTreeNode","ul","layerGroupNode","li","ul_ChildNode","_renderTreeNode_","layerData","_treeGroupClickHandle","featureNode","lyrTitle","layerName","lyrId","htmlFor","_FeatureTreeNodeOnClick","_layer_","ontouchstart","ontouchmove","targetliElement","tmpElement","toLocaleUpperCase","selectedNode","selectTreeNode","flCollection","featureAndLayer","layerGroupTitle","hasResult","findIndex","layerGroupSource","featureData","layerSource","dataTreeNode","layersData","ol_Identify_FeatureAttrTable_IdentifyFeatureAttrTable","propertity","tableContainer","tr","th_title","th_value","defaultImagePath","ol_Identify_Tool_IdentifyTool","toolContaniner","toolClassName","handle","toolContanier","backgroundImage","boxSelectImagePath","treeClearImagePath","treeHiddenImagePath","tableHiddenImagePath","featureFitImagePath","ol_Identify_Toolbar_IdentifyToolbar","tools","toolbarContanier","toolbarClassName","defaultOptions","imageUrl","imageFocus","defaultImageEmun","boxSelect","clearTree","hideTree","hideTable","fitFeature","_addToolToToolbar","tool","_tool","registerExtraTool","_extend","resetTool","ol_Identify_TitlePanel_IdentifyTitlePanel","titleText","titleContainer","titleContent","ol_Identify_identify","closeClassName","openClassName","_isTouchDevice","infoWindow","highlight","_mapDrawHelper","_toolbarContanier","_layerFeatureTree","_featureSelected","_featureAttrTable","featureSelectedTree","featureSelectedTreeContainer","featureAttributeTable","featureAttributeContainer","featureTreeHiddenTool","featureAttrTableHiddenTool","showIdenditfy","_initEntryBtnElement","_initResultInfoWindow","showOrCloseIdentify","_enableTouchScroll","_renderInfoWindowBase","_destroyMapListener","_hideSpecificContainer","_cancleSelectFeatures","_showSpecificContainer","_startSelectFeatures","showIdentify","closeIdentify","cursor","_mapSingleClickHandle","_destroySpecificContainer","layerHelper","targetLayer","t_features","renderInfoWindow","featureTreeContainer","_renderContainer","featureTreeClassName","featureTree","createTreeNodeData","_featureTreeNodeClickHandle","attrTableContainer","featureAttrTableClassName","attrTable","_Contanier","mainContainer","optionsContainer","_addLayerInfoOnTypeSelect","_regiserToolonToolbar","layerInfo","boxSelectTool","_boxSelectHandler","treeHiddenTool","_containerHiddenHandle","tableHiddenTool","featureFitTool","_fitFeatureHandle","treeClearTool","_treeClearHandle","_targetLayer","destroyComponent","elm","scrollStartPos","scrollTop","pageY","createEvent","Identify","hmr","locals","swap","defaultCompare","quickselectStep","sd","newLeft","newRight","factory","location","baseUrl","protocol","host","currentDir","pathname","fullMatch","origUrl","newUrl","unquotedOrigUrl","trim","$1","_ol_Tile_","interimTile","transition_","transitionStarts_","node_modules_ol","refreshInterimChain","ol_tile","_ol_ImageTile_","tileLoadFunction","crossOrigin_","src_","imageListenerKeys_","tileLoadFunction_","unlistenImage_","getBlankImage","handleImageError_","handleImageLoad_","naturalWidth","naturalHeight","fillRect","imagetile","_ol_TileCache_","pruneExceptNewestZ","fromKey","tilecache","_ol_reproj_","targetProj","ol_proj","targetMetersPerUnit","sourceMetersPerUnit","sourceExtent","compensationFactor","isFinite","centroidX","centroidY","dX","dY","targetExtent","triangulation","opt_renderEdges","sourceDataExtent","canvasWidthInUnits","canvasHeightInUnits","stitchContext","stitchScale","xPos","yPos","srcWidth","srcHeight","targetTopLeft","getTriangles","triangle","u0","v0","u1","u2","sourceNumericalShiftX","sourceNumericalShiftY","augmentedMatrix","affineCoefs","enlargeClipPoint_","reproj","_ol_reproj_Triangulation_","maxSourceExtent","errorThreshold","sourceProj_","targetProj_","transformInvCache","transformInv","transformInv_","maxSourceExtent_","errorThresholdSquared_","triangles_","wrapsXInSource_","canWrapXInSource_","sourceWorldWidth_","targetWorldWidth_","destinationTopLeft","destinationTopRight","destinationBottomRight","destinationBottomLeft","sourceTopLeft","sourceTopRight","sourceBottomRight","sourceBottomLeft","addQuad_","RASTER_REPROJECTION_MAX_SUBDIVISION","leftBound","newTriangle","addTriangle_","aSrc","bSrc","cSrc","dSrc","maxSubdivision","sourceQuadExtent","boundingExtent","sourceCoverageX","sourceWorldWidth","wrapsX","needsSubdivision","targetQuadExtent","RASTER_REPROJECTION_MAX_TRIANGLE_WIDTH","centerSrc","bc","bcSrc","da","daSrc","ab","abSrc","cd","cdSrc","calculateSourceExtent","reproj_triangulation","_ol_reproj_Tile_","targetTileGrid","getTileFunction","opt_errorThreshold","renderEdges_","gutter_","sourceTileGrid_","targetTileGrid_","wrappedTileCoord_","sourceTiles_","sourcesListenerKeys_","sourceZ_","maxTargetExtent","limitedTargetExtent","sourceProjExtent","calculateSourceResolution","errorThresholdInPixels","DEFAULT_RASTER_REPROJECTION_ERROR_THRESHOLD","triangulation_","sourceRange","srcX","srcY","unlistenSources_","reproject_","leftToLoad","sourceListenKey","reproj_tile","_ol_TileUrlFunction_","zRegEx","xRegEx","yRegEx","dashYRegEx","templates","tileUrlFunctions","createFromTemplate","createFromTileUrlFunctions","urls","match","startCharCode","stopCharCode","stop","tileurlfunction","_ol_source_Tile_","opaque_","opaque","tilePixelRatio_","tileCache","tmpSize","tileOptions","getTileCacheForProjection","setKey","ol_tilegrid","getForProjection","thisProj","getTileCoordForTileUrlFunction","withinExtentAndZ","source_tile","tileeventtype","TILELOADSTART","TILELOADEND","TILELOADERROR","_ol_source_UrlTile_","tileUrlFunction","fixedTileUrlFunction","nullTileUrlFunction","setUrls","setUrl","setTileUrlFunction","tileLoadingKeys_","getTileLoadFunction","getTileUrlFunction","getUrls","setTileLoadFunction","opt_key","expandUrl","createFromTemplates","urltile","_ol_source_TileImage_","defaultTileLoadFunction","tileClass","tileCacheForProjection","tileGridForProjection","reprojectionErrorThreshold_","reprojectionErrorThreshold","renderReprojectionEdges_","usedTileCache","getGutterInternal","projKey","createTile_","urlTileCoord","tileUrl","newTile","getTileInternal","setRenderReprojectionEdges","setTileGridForProjection","imageTile","tileimage","_ol_source_XYZ_","createXYZ","xyz","_ol_source_OSM_","ATTRIBUTION","osm","mapBase","bounds","baseMap","mapDivID","js_mapCreator","ID","layer_tile","initMap","htmlID","startMap","alert","_ol_format_Feature_","defaultDataProjection","defaultFeatureProjection","getReadOptions","adaptOptions","readFeature","readGeometry","writeFeature","writeFeatures","writeGeometry","transformWithOptions","write","transformed","geom_geometry","decimals","format_feature","_ol_format_JSONFeature_","getObject_","readFeatureFromObject","readFeaturesFromObject","readGeometryFromObject","readProjectionFromObject","writeFeatureObject","writeFeaturesObject","writeGeometryObject","jsonfeature","_ol_geom_GeometryCollection_","opt_geometries","geometries_","listenGeometriesChange_","cloneGeometries_","clonedGeometries","unlistenGeometriesChange_","geometryCollection","setGeometries","simplifiedGeometries","simplified","simplifiedGeometryCollection","setGeometriesArray","geometrycollection","_ol_geom_flat_interpolate_","pointY","cumulativeLengths","binarySearch","extrapolate","lo","hi","m0","lineStringCoordinateAtM","flat_interpolate","_ol_geom_LineString_","flatMidpoint_","flatMidpointRevision_","appendCoordinate","forEachSegment","getCoordinateAtM","opt_extrapolate","getCoordinateAt","simplifiedLineString","linestring","_ol_geom_MultiLineString_","appendLineString","multiLineString","opt_interpolate","lineStringsCoordinateAtM","getLineString","getLineStrings","lineStrings","midpoints","midpoint","simplifiedMultiLineString","setLineStrings","multilinestring","_ol_geom_MultiPoint_","appendPoint","multiPoint","getPoint","geom_point","multipoint","_ol_geom_flat_center_","flat_center","_ol_geom_MultiPolygon_","endss_","flatInteriorPointsRevision_","flatInteriorPoints_","appendPolygon","multiPolygon","newEndss","getssMaxSquaredDelta","getssClosestPoint","linearRingssContainsXY","linearRingss","orientLinearRingss","getInteriorPoints","linearRingssAreOriented","quantizess","simplifiedMultiPolygon","getPolygon","prevEnds","getPolygons","polygons","lastEnds","setPolygons","multipolygon","_ol_format_GeoJSON_","geometryName","extractGeometryName_","extractGeometryName","readGeometry_","geometryReader","GEOMETRY_READERS_","readGeometryCollectionGeometry_","readPointGeometry_","readLineStringGeometry_","readMultiLineStringGeometry_","readMultiPointGeometry_","readMultiPolygonGeometry_","readPolygonGeometry_","writeGeometry_","geometryWriter","GEOMETRY_WRITERS_","writeEmptyGeometryCollectionGeometry_","writeGeometryCollectionGeometry_","writeLineStringGeometry_","writeMultiLineStringGeometry_","writeMultiPointGeometry_","writeMultiPolygonGeometry_","rightHanded","writePointGeometry_","writePolygonGeometry_","geoJSONFeature","geometry_name","geoJSONFeatures","crs","objects","geojson","Symbol","RWeight","GWeight","BWeight","lineWeight","toStyle","toRGBAString","ColorPicker","symbol","random","symbolCreator","getSymbolByGeoType","geoType","_getPointSymbol","_getPolylineSymbol","_getPolygonSymbol","getBlue","getGreen","getRandom","layerCreator","Polyline","getLayerGourp","basicfacility","_getLayerByName","roadline","trafficsign","layerGroup1","layergroup2","Name","_getVectorLayerByUrl","LayerUrl","GeomtryType","GeometrySymbol","js_layerCreator","mapCtrl","identify","ol_Identify"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 130);\n","var _ol_ = {};\n\n\n/**\n * Constants defined with the define tag cannot be changed in application\n * code, but can be set at compile time.\n * Some reduce the size of the build in advanced compile mode.\n */\n\n\n/**\n * @define {boolean} Assume touch.  Default is `false`.\n */\n_ol_.ASSUME_TOUCH = false;\n\n\n/**\n * TODO: rename this to something having to do with tile grids\n * see https://github.com/openlayers/openlayers/issues/2076\n * @define {number} Default maximum zoom for default tile grids.\n */\n_ol_.DEFAULT_MAX_ZOOM = 42;\n\n\n/**\n * @define {number} Default min zoom level for the map view.  Default is `0`.\n */\n_ol_.DEFAULT_MIN_ZOOM = 0;\n\n\n/**\n * @define {number} Default maximum allowed threshold  (in pixels) for\n *     reprojection triangulation. Default is `0.5`.\n */\n_ol_.DEFAULT_RASTER_REPROJECTION_ERROR_THRESHOLD = 0.5;\n\n\n/**\n * @define {number} Default tile size.\n */\n_ol_.DEFAULT_TILE_SIZE = 256;\n\n\n/**\n * @define {string} Default WMS version.\n */\n_ol_.DEFAULT_WMS_VERSION = '1.3.0';\n\n\n/**\n * @define {boolean} Enable the Canvas renderer.  Default is `true`. Setting\n *     this to false at compile time in advanced mode removes all code\n *     supporting the Canvas renderer from the build.\n */\n_ol_.ENABLE_CANVAS = true;\n\n\n/**\n * @define {boolean} Enable integration with the Proj4js library.  Default is\n *     `true`.\n */\n_ol_.ENABLE_PROJ4JS = true;\n\n\n/**\n * @define {boolean} Enable automatic reprojection of raster sources. Default is\n *     `true`.\n */\n_ol_.ENABLE_RASTER_REPROJECTION = true;\n\n\n/**\n * @define {boolean} Enable the WebGL renderer.  Default is `true`. Setting\n *     this to false at compile time in advanced mode removes all code\n *     supporting the WebGL renderer from the build.\n */\n_ol_.ENABLE_WEBGL = true;\n\n\n/**\n * @define {boolean} Include debuggable shader sources.  Default is `true`.\n *     This should be set to `false` for production builds (if `ol.ENABLE_WEBGL`\n *     is `true`).\n */\n_ol_.DEBUG_WEBGL = true;\n\n\n/**\n * @define {number} The size in pixels of the first atlas image. Default is\n * `256`.\n */\n_ol_.INITIAL_ATLAS_SIZE = 256;\n\n\n/**\n * @define {number} The maximum size in pixels of atlas images. Default is\n * `-1`, meaning it is not used (and `ol.WEBGL_MAX_TEXTURE_SIZE` is\n * used instead).\n */\n_ol_.MAX_ATLAS_SIZE = -1;\n\n\n/**\n * @define {number} Maximum mouse wheel delta.\n */\n_ol_.MOUSEWHEELZOOM_MAXDELTA = 1;\n\n\n/**\n * @define {number} Maximum width and/or height extent ratio that determines\n * when the overview map should be zoomed out.\n */\n_ol_.OVERVIEWMAP_MAX_RATIO = 0.75;\n\n\n/**\n * @define {number} Minimum width and/or height extent ratio that determines\n * when the overview map should be zoomed in.\n */\n_ol_.OVERVIEWMAP_MIN_RATIO = 0.1;\n\n\n/**\n * @define {number} Maximum number of source tiles for raster reprojection of\n *     a single tile.\n *     If too many source tiles are determined to be loaded to create a single\n *     reprojected tile the browser can become unresponsive or even crash.\n *     This can happen if the developer defines projections improperly and/or\n *     with unlimited extents.\n *     If too many tiles are required, no tiles are loaded and\n *     `ol.TileState.ERROR` state is set. Default is `100`.\n */\n_ol_.RASTER_REPROJECTION_MAX_SOURCE_TILES = 100;\n\n\n/**\n * @define {number} Maximum number of subdivision steps during raster\n *     reprojection triangulation. Prevents high memory usage and large\n *     number of proj4 calls (for certain transformations and areas).\n *     At most `2*(2^this)` triangles are created for each triangulated\n *     extent (tile/image). Default is `10`.\n */\n_ol_.RASTER_REPROJECTION_MAX_SUBDIVISION = 10;\n\n\n/**\n * @define {number} Maximum allowed size of triangle relative to world width.\n *     When transforming corners of world extent between certain projections,\n *     the resulting triangulation seems to have zero error and no subdivision\n *     is performed.\n *     If the triangle width is more than this (relative to world width; 0-1),\n *     subdivison is forced (up to `ol.RASTER_REPROJECTION_MAX_SUBDIVISION`).\n *     Default is `0.25`.\n */\n_ol_.RASTER_REPROJECTION_MAX_TRIANGLE_WIDTH = 0.25;\n\n\n/**\n * @define {number} Tolerance for geometry simplification in device pixels.\n */\n_ol_.SIMPLIFY_TOLERANCE = 0.5;\n\n\n/**\n * @define {number} Texture cache high water mark.\n */\n_ol_.WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK = 1024;\n\n\n/**\n * @define {string} OpenLayers version.\n */\n_ol_.VERSION = 'v4.6.5';\n\n\n/**\n * The maximum supported WebGL texture size in pixels. If WebGL is not\n * supported, the value is set to `undefined`.\n * @const\n * @type {number|undefined}\n */\n_ol_.WEBGL_MAX_TEXTURE_SIZE; // value is set in `ol.has`\n\n\n/**\n * List of supported WebGL extensions.\n * @const\n * @type {Array.<string>}\n */\n_ol_.WEBGL_EXTENSIONS; // value is set in `ol.has`\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * Usage:\n *\n *     function ParentClass(a, b) { }\n *     ParentClass.prototype.foo = function(a) { }\n *\n *     function ChildClass(a, b, c) {\n *       // Call parent constructor\n *       ParentClass.call(this, a, b);\n *     }\n *     ol.inherits(ChildClass, ParentClass);\n *\n *     var child = new ChildClass('a', 'b', 'see');\n *     child.foo(); // This works.\n *\n * @param {!Function} childCtor Child constructor.\n * @param {!Function} parentCtor Parent constructor.\n * @function\n * @api\n */\n_ol_.inherits = function(childCtor, parentCtor) {\n  childCtor.prototype = Object.create(parentCtor.prototype);\n  childCtor.prototype.constructor = childCtor;\n};\n\n\n/**\n * A reusable function, used e.g. as a default for callbacks.\n *\n * @return {undefined} Nothing.\n */\n_ol_.nullFunction = function() {};\n\n\n/**\n * Gets a unique ID for an object. This mutates the object so that further calls\n * with the same object as a parameter returns the same value. Unique IDs are generated\n * as a strictly increasing sequence. Adapted from goog.getUid.\n *\n * @param {Object} obj The object to get the unique ID for.\n * @return {number} The unique ID for the object.\n */\n_ol_.getUid = function(obj) {\n  return obj.ol_uid ||\n      (obj.ol_uid = ++_ol_.uidCounter_);\n};\n\n\n/**\n * Counter for getUid.\n * @type {number}\n * @private\n */\n_ol_.uidCounter_ = 0;\nexport default _ol_;\n","import _ol_asserts_ from './asserts.js';\nimport _ol_extent_Corner_ from './extent/corner.js';\nimport _ol_extent_Relationship_ from './extent/relationship.js';\nvar _ol_extent_ = {};\n\n\n/**\n * Build an extent that includes all given coordinates.\n *\n * @param {Array.<ol.Coordinate>} coordinates Coordinates.\n * @return {ol.Extent} Bounding extent.\n * @api\n */\n_ol_extent_.boundingExtent = function(coordinates) {\n  var extent = _ol_extent_.createEmpty();\n  for (var i = 0, ii = coordinates.length; i < ii; ++i) {\n    _ol_extent_.extendCoordinate(extent, coordinates[i]);\n  }\n  return extent;\n};\n\n\n/**\n * @param {Array.<number>} xs Xs.\n * @param {Array.<number>} ys Ys.\n * @param {ol.Extent=} opt_extent Destination extent.\n * @private\n * @return {ol.Extent} Extent.\n */\n_ol_extent_.boundingExtentXYs_ = function(xs, ys, opt_extent) {\n  var minX = Math.min.apply(null, xs);\n  var minY = Math.min.apply(null, ys);\n  var maxX = Math.max.apply(null, xs);\n  var maxY = Math.max.apply(null, ys);\n  return _ol_extent_.createOrUpdate(minX, minY, maxX, maxY, opt_extent);\n};\n\n\n/**\n * Return extent increased by the provided value.\n * @param {ol.Extent} extent Extent.\n * @param {number} value The amount by which the extent should be buffered.\n * @param {ol.Extent=} opt_extent Extent.\n * @return {ol.Extent} Extent.\n * @api\n */\n_ol_extent_.buffer = function(extent, value, opt_extent) {\n  if (opt_extent) {\n    opt_extent[0] = extent[0] - value;\n    opt_extent[1] = extent[1] - value;\n    opt_extent[2] = extent[2] + value;\n    opt_extent[3] = extent[3] + value;\n    return opt_extent;\n  } else {\n    return [\n      extent[0] - value,\n      extent[1] - value,\n      extent[2] + value,\n      extent[3] + value\n    ];\n  }\n};\n\n\n/**\n * Creates a clone of an extent.\n *\n * @param {ol.Extent} extent Extent to clone.\n * @param {ol.Extent=} opt_extent Extent.\n * @return {ol.Extent} The clone.\n */\n_ol_extent_.clone = function(extent, opt_extent) {\n  if (opt_extent) {\n    opt_extent[0] = extent[0];\n    opt_extent[1] = extent[1];\n    opt_extent[2] = extent[2];\n    opt_extent[3] = extent[3];\n    return opt_extent;\n  } else {\n    return extent.slice();\n  }\n};\n\n\n/**\n * @param {ol.Extent} extent Extent.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {number} Closest squared distance.\n */\n_ol_extent_.closestSquaredDistanceXY = function(extent, x, y) {\n  var dx, dy;\n  if (x < extent[0]) {\n    dx = extent[0] - x;\n  } else if (extent[2] < x) {\n    dx = x - extent[2];\n  } else {\n    dx = 0;\n  }\n  if (y < extent[1]) {\n    dy = extent[1] - y;\n  } else if (extent[3] < y) {\n    dy = y - extent[3];\n  } else {\n    dy = 0;\n  }\n  return dx * dx + dy * dy;\n};\n\n\n/**\n * Check if the passed coordinate is contained or on the edge of the extent.\n *\n * @param {ol.Extent} extent Extent.\n * @param {ol.Coordinate} coordinate Coordinate.\n * @return {boolean} The coordinate is contained in the extent.\n * @api\n */\n_ol_extent_.containsCoordinate = function(extent, coordinate) {\n  return _ol_extent_.containsXY(extent, coordinate[0], coordinate[1]);\n};\n\n\n/**\n * Check if one extent contains another.\n *\n * An extent is deemed contained if it lies completely within the other extent,\n * including if they share one or more edges.\n *\n * @param {ol.Extent} extent1 Extent 1.\n * @param {ol.Extent} extent2 Extent 2.\n * @return {boolean} The second extent is contained by or on the edge of the\n *     first.\n * @api\n */\n_ol_extent_.containsExtent = function(extent1, extent2) {\n  return extent1[0] <= extent2[0] && extent2[2] <= extent1[2] &&\n      extent1[1] <= extent2[1] && extent2[3] <= extent1[3];\n};\n\n\n/**\n * Check if the passed coordinate is contained or on the edge of the extent.\n *\n * @param {ol.Extent} extent Extent.\n * @param {number} x X coordinate.\n * @param {number} y Y coordinate.\n * @return {boolean} The x, y values are contained in the extent.\n * @api\n */\n_ol_extent_.containsXY = function(extent, x, y) {\n  return extent[0] <= x && x <= extent[2] && extent[1] <= y && y <= extent[3];\n};\n\n\n/**\n * Get the relationship between a coordinate and extent.\n * @param {ol.Extent} extent The extent.\n * @param {ol.Coordinate} coordinate The coordinate.\n * @return {number} The relationship (bitwise compare with\n *     ol.extent.Relationship).\n */\n_ol_extent_.coordinateRelationship = function(extent, coordinate) {\n  var minX = extent[0];\n  var minY = extent[1];\n  var maxX = extent[2];\n  var maxY = extent[3];\n  var x = coordinate[0];\n  var y = coordinate[1];\n  var relationship = _ol_extent_Relationship_.UNKNOWN;\n  if (x < minX) {\n    relationship = relationship | _ol_extent_Relationship_.LEFT;\n  } else if (x > maxX) {\n    relationship = relationship | _ol_extent_Relationship_.RIGHT;\n  }\n  if (y < minY) {\n    relationship = relationship | _ol_extent_Relationship_.BELOW;\n  } else if (y > maxY) {\n    relationship = relationship | _ol_extent_Relationship_.ABOVE;\n  }\n  if (relationship === _ol_extent_Relationship_.UNKNOWN) {\n    relationship = _ol_extent_Relationship_.INTERSECTING;\n  }\n  return relationship;\n};\n\n\n/**\n * Create an empty extent.\n * @return {ol.Extent} Empty extent.\n * @api\n */\n_ol_extent_.createEmpty = function() {\n  return [Infinity, Infinity, -Infinity, -Infinity];\n};\n\n\n/**\n * Create a new extent or update the provided extent.\n * @param {number} minX Minimum X.\n * @param {number} minY Minimum Y.\n * @param {number} maxX Maximum X.\n * @param {number} maxY Maximum Y.\n * @param {ol.Extent=} opt_extent Destination extent.\n * @return {ol.Extent} Extent.\n */\n_ol_extent_.createOrUpdate = function(minX, minY, maxX, maxY, opt_extent) {\n  if (opt_extent) {\n    opt_extent[0] = minX;\n    opt_extent[1] = minY;\n    opt_extent[2] = maxX;\n    opt_extent[3] = maxY;\n    return opt_extent;\n  } else {\n    return [minX, minY, maxX, maxY];\n  }\n};\n\n\n/**\n * Create a new empty extent or make the provided one empty.\n * @param {ol.Extent=} opt_extent Extent.\n * @return {ol.Extent} Extent.\n */\n_ol_extent_.createOrUpdateEmpty = function(opt_extent) {\n  return _ol_extent_.createOrUpdate(\n      Infinity, Infinity, -Infinity, -Infinity, opt_extent);\n};\n\n\n/**\n * @param {ol.Coordinate} coordinate Coordinate.\n * @param {ol.Extent=} opt_extent Extent.\n * @return {ol.Extent} Extent.\n */\n_ol_extent_.createOrUpdateFromCoordinate = function(coordinate, opt_extent) {\n  var x = coordinate[0];\n  var y = coordinate[1];\n  return _ol_extent_.createOrUpdate(x, y, x, y, opt_extent);\n};\n\n\n/**\n * @param {Array.<ol.Coordinate>} coordinates Coordinates.\n * @param {ol.Extent=} opt_extent Extent.\n * @return {ol.Extent} Extent.\n */\n_ol_extent_.createOrUpdateFromCoordinates = function(coordinates, opt_extent) {\n  var extent = _ol_extent_.createOrUpdateEmpty(opt_extent);\n  return _ol_extent_.extendCoordinates(extent, coordinates);\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {ol.Extent=} opt_extent Extent.\n * @return {ol.Extent} Extent.\n */\n_ol_extent_.createOrUpdateFromFlatCoordinates = function(flatCoordinates, offset, end, stride, opt_extent) {\n  var extent = _ol_extent_.createOrUpdateEmpty(opt_extent);\n  return _ol_extent_.extendFlatCoordinates(\n      extent, flatCoordinates, offset, end, stride);\n};\n\n\n/**\n * @param {Array.<Array.<ol.Coordinate>>} rings Rings.\n * @param {ol.Extent=} opt_extent Extent.\n * @return {ol.Extent} Extent.\n */\n_ol_extent_.createOrUpdateFromRings = function(rings, opt_extent) {\n  var extent = _ol_extent_.createOrUpdateEmpty(opt_extent);\n  return _ol_extent_.extendRings(extent, rings);\n};\n\n\n/**\n * Determine if two extents are equivalent.\n * @param {ol.Extent} extent1 Extent 1.\n * @param {ol.Extent} extent2 Extent 2.\n * @return {boolean} The two extents are equivalent.\n * @api\n */\n_ol_extent_.equals = function(extent1, extent2) {\n  return extent1[0] == extent2[0] && extent1[2] == extent2[2] &&\n      extent1[1] == extent2[1] && extent1[3] == extent2[3];\n};\n\n\n/**\n * Modify an extent to include another extent.\n * @param {ol.Extent} extent1 The extent to be modified.\n * @param {ol.Extent} extent2 The extent that will be included in the first.\n * @return {ol.Extent} A reference to the first (extended) extent.\n * @api\n */\n_ol_extent_.extend = function(extent1, extent2) {\n  if (extent2[0] < extent1[0]) {\n    extent1[0] = extent2[0];\n  }\n  if (extent2[2] > extent1[2]) {\n    extent1[2] = extent2[2];\n  }\n  if (extent2[1] < extent1[1]) {\n    extent1[1] = extent2[1];\n  }\n  if (extent2[3] > extent1[3]) {\n    extent1[3] = extent2[3];\n  }\n  return extent1;\n};\n\n\n/**\n * @param {ol.Extent} extent Extent.\n * @param {ol.Coordinate} coordinate Coordinate.\n */\n_ol_extent_.extendCoordinate = function(extent, coordinate) {\n  if (coordinate[0] < extent[0]) {\n    extent[0] = coordinate[0];\n  }\n  if (coordinate[0] > extent[2]) {\n    extent[2] = coordinate[0];\n  }\n  if (coordinate[1] < extent[1]) {\n    extent[1] = coordinate[1];\n  }\n  if (coordinate[1] > extent[3]) {\n    extent[3] = coordinate[1];\n  }\n};\n\n\n/**\n * @param {ol.Extent} extent Extent.\n * @param {Array.<ol.Coordinate>} coordinates Coordinates.\n * @return {ol.Extent} Extent.\n */\n_ol_extent_.extendCoordinates = function(extent, coordinates) {\n  var i, ii;\n  for (i = 0, ii = coordinates.length; i < ii; ++i) {\n    _ol_extent_.extendCoordinate(extent, coordinates[i]);\n  }\n  return extent;\n};\n\n\n/**\n * @param {ol.Extent} extent Extent.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {ol.Extent} Extent.\n */\n_ol_extent_.extendFlatCoordinates = function(extent, flatCoordinates, offset, end, stride) {\n  for (; offset < end; offset += stride) {\n    _ol_extent_.extendXY(\n        extent, flatCoordinates[offset], flatCoordinates[offset + 1]);\n  }\n  return extent;\n};\n\n\n/**\n * @param {ol.Extent} extent Extent.\n * @param {Array.<Array.<ol.Coordinate>>} rings Rings.\n * @return {ol.Extent} Extent.\n */\n_ol_extent_.extendRings = function(extent, rings) {\n  var i, ii;\n  for (i = 0, ii = rings.length; i < ii; ++i) {\n    _ol_extent_.extendCoordinates(extent, rings[i]);\n  }\n  return extent;\n};\n\n\n/**\n * @param {ol.Extent} extent Extent.\n * @param {number} x X.\n * @param {number} y Y.\n */\n_ol_extent_.extendXY = function(extent, x, y) {\n  extent[0] = Math.min(extent[0], x);\n  extent[1] = Math.min(extent[1], y);\n  extent[2] = Math.max(extent[2], x);\n  extent[3] = Math.max(extent[3], y);\n};\n\n\n/**\n * This function calls `callback` for each corner of the extent. If the\n * callback returns a truthy value the function returns that value\n * immediately. Otherwise the function returns `false`.\n * @param {ol.Extent} extent Extent.\n * @param {function(this:T, ol.Coordinate): S} callback Callback.\n * @param {T=} opt_this Value to use as `this` when executing `callback`.\n * @return {S|boolean} Value.\n * @template S, T\n */\n_ol_extent_.forEachCorner = function(extent, callback, opt_this) {\n  var val;\n  val = callback.call(opt_this, _ol_extent_.getBottomLeft(extent));\n  if (val) {\n    return val;\n  }\n  val = callback.call(opt_this, _ol_extent_.getBottomRight(extent));\n  if (val) {\n    return val;\n  }\n  val = callback.call(opt_this, _ol_extent_.getTopRight(extent));\n  if (val) {\n    return val;\n  }\n  val = callback.call(opt_this, _ol_extent_.getTopLeft(extent));\n  if (val) {\n    return val;\n  }\n  return false;\n};\n\n\n/**\n * Get the size of an extent.\n * @param {ol.Extent} extent Extent.\n * @return {number} Area.\n * @api\n */\n_ol_extent_.getArea = function(extent) {\n  var area = 0;\n  if (!_ol_extent_.isEmpty(extent)) {\n    area = _ol_extent_.getWidth(extent) * _ol_extent_.getHeight(extent);\n  }\n  return area;\n};\n\n\n/**\n * Get the bottom left coordinate of an extent.\n * @param {ol.Extent} extent Extent.\n * @return {ol.Coordinate} Bottom left coordinate.\n * @api\n */\n_ol_extent_.getBottomLeft = function(extent) {\n  return [extent[0], extent[1]];\n};\n\n\n/**\n * Get the bottom right coordinate of an extent.\n * @param {ol.Extent} extent Extent.\n * @return {ol.Coordinate} Bottom right coordinate.\n * @api\n */\n_ol_extent_.getBottomRight = function(extent) {\n  return [extent[2], extent[1]];\n};\n\n\n/**\n * Get the center coordinate of an extent.\n * @param {ol.Extent} extent Extent.\n * @return {ol.Coordinate} Center.\n * @api\n */\n_ol_extent_.getCenter = function(extent) {\n  return [(extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2];\n};\n\n\n/**\n * Get a corner coordinate of an extent.\n * @param {ol.Extent} extent Extent.\n * @param {ol.extent.Corner} corner Corner.\n * @return {ol.Coordinate} Corner coordinate.\n */\n_ol_extent_.getCorner = function(extent, corner) {\n  var coordinate;\n  if (corner === _ol_extent_Corner_.BOTTOM_LEFT) {\n    coordinate = _ol_extent_.getBottomLeft(extent);\n  } else if (corner === _ol_extent_Corner_.BOTTOM_RIGHT) {\n    coordinate = _ol_extent_.getBottomRight(extent);\n  } else if (corner === _ol_extent_Corner_.TOP_LEFT) {\n    coordinate = _ol_extent_.getTopLeft(extent);\n  } else if (corner === _ol_extent_Corner_.TOP_RIGHT) {\n    coordinate = _ol_extent_.getTopRight(extent);\n  } else {\n    _ol_asserts_.assert(false, 13); // Invalid corner\n  }\n  return /** @type {!ol.Coordinate} */ (coordinate);\n};\n\n\n/**\n * @param {ol.Extent} extent1 Extent 1.\n * @param {ol.Extent} extent2 Extent 2.\n * @return {number} Enlarged area.\n */\n_ol_extent_.getEnlargedArea = function(extent1, extent2) {\n  var minX = Math.min(extent1[0], extent2[0]);\n  var minY = Math.min(extent1[1], extent2[1]);\n  var maxX = Math.max(extent1[2], extent2[2]);\n  var maxY = Math.max(extent1[3], extent2[3]);\n  return (maxX - minX) * (maxY - minY);\n};\n\n\n/**\n * @param {ol.Coordinate} center Center.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @param {ol.Size} size Size.\n * @param {ol.Extent=} opt_extent Destination extent.\n * @return {ol.Extent} Extent.\n */\n_ol_extent_.getForViewAndSize = function(center, resolution, rotation, size, opt_extent) {\n  var dx = resolution * size[0] / 2;\n  var dy = resolution * size[1] / 2;\n  var cosRotation = Math.cos(rotation);\n  var sinRotation = Math.sin(rotation);\n  var xCos = dx * cosRotation;\n  var xSin = dx * sinRotation;\n  var yCos = dy * cosRotation;\n  var ySin = dy * sinRotation;\n  var x = center[0];\n  var y = center[1];\n  var x0 = x - xCos + ySin;\n  var x1 = x - xCos - ySin;\n  var x2 = x + xCos - ySin;\n  var x3 = x + xCos + ySin;\n  var y0 = y - xSin - yCos;\n  var y1 = y - xSin + yCos;\n  var y2 = y + xSin + yCos;\n  var y3 = y + xSin - yCos;\n  return _ol_extent_.createOrUpdate(\n      Math.min(x0, x1, x2, x3), Math.min(y0, y1, y2, y3),\n      Math.max(x0, x1, x2, x3), Math.max(y0, y1, y2, y3),\n      opt_extent);\n};\n\n\n/**\n * Get the height of an extent.\n * @param {ol.Extent} extent Extent.\n * @return {number} Height.\n * @api\n */\n_ol_extent_.getHeight = function(extent) {\n  return extent[3] - extent[1];\n};\n\n\n/**\n * @param {ol.Extent} extent1 Extent 1.\n * @param {ol.Extent} extent2 Extent 2.\n * @return {number} Intersection area.\n */\n_ol_extent_.getIntersectionArea = function(extent1, extent2) {\n  var intersection = _ol_extent_.getIntersection(extent1, extent2);\n  return _ol_extent_.getArea(intersection);\n};\n\n\n/**\n * Get the intersection of two extents.\n * @param {ol.Extent} extent1 Extent 1.\n * @param {ol.Extent} extent2 Extent 2.\n * @param {ol.Extent=} opt_extent Optional extent to populate with intersection.\n * @return {ol.Extent} Intersecting extent.\n * @api\n */\n_ol_extent_.getIntersection = function(extent1, extent2, opt_extent) {\n  var intersection = opt_extent ? opt_extent : _ol_extent_.createEmpty();\n  if (_ol_extent_.intersects(extent1, extent2)) {\n    if (extent1[0] > extent2[0]) {\n      intersection[0] = extent1[0];\n    } else {\n      intersection[0] = extent2[0];\n    }\n    if (extent1[1] > extent2[1]) {\n      intersection[1] = extent1[1];\n    } else {\n      intersection[1] = extent2[1];\n    }\n    if (extent1[2] < extent2[2]) {\n      intersection[2] = extent1[2];\n    } else {\n      intersection[2] = extent2[2];\n    }\n    if (extent1[3] < extent2[3]) {\n      intersection[3] = extent1[3];\n    } else {\n      intersection[3] = extent2[3];\n    }\n  }\n  return intersection;\n};\n\n\n/**\n * @param {ol.Extent} extent Extent.\n * @return {number} Margin.\n */\n_ol_extent_.getMargin = function(extent) {\n  return _ol_extent_.getWidth(extent) + _ol_extent_.getHeight(extent);\n};\n\n\n/**\n * Get the size (width, height) of an extent.\n * @param {ol.Extent} extent The extent.\n * @return {ol.Size} The extent size.\n * @api\n */\n_ol_extent_.getSize = function(extent) {\n  return [extent[2] - extent[0], extent[3] - extent[1]];\n};\n\n\n/**\n * Get the top left coordinate of an extent.\n * @param {ol.Extent} extent Extent.\n * @return {ol.Coordinate} Top left coordinate.\n * @api\n */\n_ol_extent_.getTopLeft = function(extent) {\n  return [extent[0], extent[3]];\n};\n\n\n/**\n * Get the top right coordinate of an extent.\n * @param {ol.Extent} extent Extent.\n * @return {ol.Coordinate} Top right coordinate.\n * @api\n */\n_ol_extent_.getTopRight = function(extent) {\n  return [extent[2], extent[3]];\n};\n\n\n/**\n * Get the width of an extent.\n * @param {ol.Extent} extent Extent.\n * @return {number} Width.\n * @api\n */\n_ol_extent_.getWidth = function(extent) {\n  return extent[2] - extent[0];\n};\n\n\n/**\n * Determine if one extent intersects another.\n * @param {ol.Extent} extent1 Extent 1.\n * @param {ol.Extent} extent2 Extent.\n * @return {boolean} The two extents intersect.\n * @api\n */\n_ol_extent_.intersects = function(extent1, extent2) {\n  return extent1[0] <= extent2[2] &&\n      extent1[2] >= extent2[0] &&\n      extent1[1] <= extent2[3] &&\n      extent1[3] >= extent2[1];\n};\n\n\n/**\n * Determine if an extent is empty.\n * @param {ol.Extent} extent Extent.\n * @return {boolean} Is empty.\n * @api\n */\n_ol_extent_.isEmpty = function(extent) {\n  return extent[2] < extent[0] || extent[3] < extent[1];\n};\n\n\n/**\n * @param {ol.Extent} extent Extent.\n * @param {ol.Extent=} opt_extent Extent.\n * @return {ol.Extent} Extent.\n */\n_ol_extent_.returnOrUpdate = function(extent, opt_extent) {\n  if (opt_extent) {\n    opt_extent[0] = extent[0];\n    opt_extent[1] = extent[1];\n    opt_extent[2] = extent[2];\n    opt_extent[3] = extent[3];\n    return opt_extent;\n  } else {\n    return extent;\n  }\n};\n\n\n/**\n * @param {ol.Extent} extent Extent.\n * @param {number} value Value.\n */\n_ol_extent_.scaleFromCenter = function(extent, value) {\n  var deltaX = ((extent[2] - extent[0]) / 2) * (value - 1);\n  var deltaY = ((extent[3] - extent[1]) / 2) * (value - 1);\n  extent[0] -= deltaX;\n  extent[2] += deltaX;\n  extent[1] -= deltaY;\n  extent[3] += deltaY;\n};\n\n\n/**\n * Determine if the segment between two coordinates intersects (crosses,\n * touches, or is contained by) the provided extent.\n * @param {ol.Extent} extent The extent.\n * @param {ol.Coordinate} start Segment start coordinate.\n * @param {ol.Coordinate} end Segment end coordinate.\n * @return {boolean} The segment intersects the extent.\n */\n_ol_extent_.intersectsSegment = function(extent, start, end) {\n  var intersects = false;\n  var startRel = _ol_extent_.coordinateRelationship(extent, start);\n  var endRel = _ol_extent_.coordinateRelationship(extent, end);\n  if (startRel === _ol_extent_Relationship_.INTERSECTING ||\n      endRel === _ol_extent_Relationship_.INTERSECTING) {\n    intersects = true;\n  } else {\n    var minX = extent[0];\n    var minY = extent[1];\n    var maxX = extent[2];\n    var maxY = extent[3];\n    var startX = start[0];\n    var startY = start[1];\n    var endX = end[0];\n    var endY = end[1];\n    var slope = (endY - startY) / (endX - startX);\n    var x, y;\n    if (!!(endRel & _ol_extent_Relationship_.ABOVE) &&\n        !(startRel & _ol_extent_Relationship_.ABOVE)) {\n      // potentially intersects top\n      x = endX - ((endY - maxY) / slope);\n      intersects = x >= minX && x <= maxX;\n    }\n    if (!intersects && !!(endRel & _ol_extent_Relationship_.RIGHT) &&\n        !(startRel & _ol_extent_Relationship_.RIGHT)) {\n      // potentially intersects right\n      y = endY - ((endX - maxX) * slope);\n      intersects = y >= minY && y <= maxY;\n    }\n    if (!intersects && !!(endRel & _ol_extent_Relationship_.BELOW) &&\n        !(startRel & _ol_extent_Relationship_.BELOW)) {\n      // potentially intersects bottom\n      x = endX - ((endY - minY) / slope);\n      intersects = x >= minX && x <= maxX;\n    }\n    if (!intersects && !!(endRel & _ol_extent_Relationship_.LEFT) &&\n        !(startRel & _ol_extent_Relationship_.LEFT)) {\n      // potentially intersects left\n      y = endY - ((endX - minX) * slope);\n      intersects = y >= minY && y <= maxY;\n    }\n\n  }\n  return intersects;\n};\n\n\n/**\n * Apply a transform function to the extent.\n * @param {ol.Extent} extent Extent.\n * @param {ol.TransformFunction} transformFn Transform function.  Called with\n * [minX, minY, maxX, maxY] extent coordinates.\n * @param {ol.Extent=} opt_extent Destination extent.\n * @return {ol.Extent} Extent.\n * @api\n */\n_ol_extent_.applyTransform = function(extent, transformFn, opt_extent) {\n  var coordinates = [\n    extent[0], extent[1],\n    extent[0], extent[3],\n    extent[2], extent[1],\n    extent[2], extent[3]\n  ];\n  transformFn(coordinates, coordinates, 2);\n  var xs = [coordinates[0], coordinates[2], coordinates[4], coordinates[6]];\n  var ys = [coordinates[1], coordinates[3], coordinates[5], coordinates[7]];\n  return _ol_extent_.boundingExtentXYs_(xs, ys, opt_extent);\n};\nexport default _ol_extent_;\n","import _ol_obj_ from './obj.js';\nvar _ol_events_ = {};\n\n\n/**\n * @param {ol.EventsKey} listenerObj Listener object.\n * @return {ol.EventsListenerFunctionType} Bound listener.\n */\n_ol_events_.bindListener_ = function(listenerObj) {\n  var boundListener = function(evt) {\n    var listener = listenerObj.listener;\n    var bindTo = listenerObj.bindTo || listenerObj.target;\n    if (listenerObj.callOnce) {\n      _ol_events_.unlistenByKey(listenerObj);\n    }\n    return listener.call(bindTo, evt);\n  };\n  listenerObj.boundListener = boundListener;\n  return boundListener;\n};\n\n\n/**\n * Finds the matching {@link ol.EventsKey} in the given listener\n * array.\n *\n * @param {!Array<!ol.EventsKey>} listeners Array of listeners.\n * @param {!Function} listener The listener function.\n * @param {Object=} opt_this The `this` value inside the listener.\n * @param {boolean=} opt_setDeleteIndex Set the deleteIndex on the matching\n *     listener, for {@link ol.events.unlistenByKey}.\n * @return {ol.EventsKey|undefined} The matching listener object.\n * @private\n */\n_ol_events_.findListener_ = function(listeners, listener, opt_this,\n    opt_setDeleteIndex) {\n  var listenerObj;\n  for (var i = 0, ii = listeners.length; i < ii; ++i) {\n    listenerObj = listeners[i];\n    if (listenerObj.listener === listener &&\n        listenerObj.bindTo === opt_this) {\n      if (opt_setDeleteIndex) {\n        listenerObj.deleteIndex = i;\n      }\n      return listenerObj;\n    }\n  }\n  return undefined;\n};\n\n\n/**\n * @param {ol.EventTargetLike} target Target.\n * @param {string} type Type.\n * @return {Array.<ol.EventsKey>|undefined} Listeners.\n */\n_ol_events_.getListeners = function(target, type) {\n  var listenerMap = target.ol_lm;\n  return listenerMap ? listenerMap[type] : undefined;\n};\n\n\n/**\n * Get the lookup of listeners.  If one does not exist on the target, it is\n * created.\n * @param {ol.EventTargetLike} target Target.\n * @return {!Object.<string, Array.<ol.EventsKey>>} Map of\n *     listeners by event type.\n * @private\n */\n_ol_events_.getListenerMap_ = function(target) {\n  var listenerMap = target.ol_lm;\n  if (!listenerMap) {\n    listenerMap = target.ol_lm = {};\n  }\n  return listenerMap;\n};\n\n\n/**\n * Clean up all listener objects of the given type.  All properties on the\n * listener objects will be removed, and if no listeners remain in the listener\n * map, it will be removed from the target.\n * @param {ol.EventTargetLike} target Target.\n * @param {string} type Type.\n * @private\n */\n_ol_events_.removeListeners_ = function(target, type) {\n  var listeners = _ol_events_.getListeners(target, type);\n  if (listeners) {\n    for (var i = 0, ii = listeners.length; i < ii; ++i) {\n      target.removeEventListener(type, listeners[i].boundListener);\n      _ol_obj_.clear(listeners[i]);\n    }\n    listeners.length = 0;\n    var listenerMap = target.ol_lm;\n    if (listenerMap) {\n      delete listenerMap[type];\n      if (Object.keys(listenerMap).length === 0) {\n        delete target.ol_lm;\n      }\n    }\n  }\n};\n\n\n/**\n * Registers an event listener on an event target. Inspired by\n * {@link https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html}\n *\n * This function efficiently binds a `listener` to a `this` object, and returns\n * a key for use with {@link ol.events.unlistenByKey}.\n *\n * @param {ol.EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {ol.EventsListenerFunctionType} listener Listener.\n * @param {Object=} opt_this Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n * @param {boolean=} opt_once If true, add the listener as one-off listener.\n * @return {ol.EventsKey} Unique key for the listener.\n */\n_ol_events_.listen = function(target, type, listener, opt_this, opt_once) {\n  var listenerMap = _ol_events_.getListenerMap_(target);\n  var listeners = listenerMap[type];\n  if (!listeners) {\n    listeners = listenerMap[type] = [];\n  }\n  var listenerObj = _ol_events_.findListener_(listeners, listener, opt_this,\n      false);\n  if (listenerObj) {\n    if (!opt_once) {\n      // Turn one-off listener into a permanent one.\n      listenerObj.callOnce = false;\n    }\n  } else {\n    listenerObj = /** @type {ol.EventsKey} */ ({\n      bindTo: opt_this,\n      callOnce: !!opt_once,\n      listener: listener,\n      target: target,\n      type: type\n    });\n    target.addEventListener(type, _ol_events_.bindListener_(listenerObj));\n    listeners.push(listenerObj);\n  }\n\n  return listenerObj;\n};\n\n\n/**\n * Registers a one-off event listener on an event target. Inspired by\n * {@link https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html}\n *\n * This function efficiently binds a `listener` as self-unregistering listener\n * to a `this` object, and returns a key for use with\n * {@link ol.events.unlistenByKey} in case the listener needs to be unregistered\n * before it is called.\n *\n * When {@link ol.events.listen} is called with the same arguments after this\n * function, the self-unregistering listener will be turned into a permanent\n * listener.\n *\n * @param {ol.EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {ol.EventsListenerFunctionType} listener Listener.\n * @param {Object=} opt_this Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n * @return {ol.EventsKey} Key for unlistenByKey.\n */\n_ol_events_.listenOnce = function(target, type, listener, opt_this) {\n  return _ol_events_.listen(target, type, listener, opt_this, true);\n};\n\n\n/**\n * Unregisters an event listener on an event target. Inspired by\n * {@link https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html}\n *\n * To return a listener, this function needs to be called with the exact same\n * arguments that were used for a previous {@link ol.events.listen} call.\n *\n * @param {ol.EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {ol.EventsListenerFunctionType} listener Listener.\n * @param {Object=} opt_this Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n */\n_ol_events_.unlisten = function(target, type, listener, opt_this) {\n  var listeners = _ol_events_.getListeners(target, type);\n  if (listeners) {\n    var listenerObj = _ol_events_.findListener_(listeners, listener, opt_this,\n        true);\n    if (listenerObj) {\n      _ol_events_.unlistenByKey(listenerObj);\n    }\n  }\n};\n\n\n/**\n * Unregisters event listeners on an event target. Inspired by\n * {@link https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html}\n *\n * The argument passed to this function is the key returned from\n * {@link ol.events.listen} or {@link ol.events.listenOnce}.\n *\n * @param {ol.EventsKey} key The key.\n */\n_ol_events_.unlistenByKey = function(key) {\n  if (key && key.target) {\n    key.target.removeEventListener(key.type, key.boundListener);\n    var listeners = _ol_events_.getListeners(key.target, key.type);\n    if (listeners) {\n      var i = 'deleteIndex' in key ? key.deleteIndex : listeners.indexOf(key);\n      if (i !== -1) {\n        listeners.splice(i, 1);\n      }\n      if (listeners.length === 0) {\n        _ol_events_.removeListeners_(key.target, key.type);\n      }\n    }\n    _ol_obj_.clear(key);\n  }\n};\n\n\n/**\n * Unregisters all event listeners on an event target. Inspired by\n * {@link https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html}\n *\n * @param {ol.EventTargetLike} target Target.\n */\n_ol_events_.unlistenAll = function(target) {\n  var listenerMap = _ol_events_.getListenerMap_(target);\n  for (var type in listenerMap) {\n    _ol_events_.removeListeners_(target, type);\n  }\n};\nexport default _ol_events_;\n","import _ol_asserts_ from './asserts.js';\nvar _ol_transform_ = {};\n\n\n/**\n * Collection of affine 2d transformation functions. The functions work on an\n * array of 6 elements. The element order is compatible with the [SVGMatrix\n * interface](https://developer.mozilla.org/en-US/docs/Web/API/SVGMatrix) and is\n * a subset (elements a to f) of a 3x3 martrix:\n * ```\n * [ a c e ]\n * [ b d f ]\n * [ 0 0 1 ]\n * ```\n */\n\n\n/**\n * @private\n * @type {ol.Transform}\n */\n_ol_transform_.tmp_ = new Array(6);\n\n\n/**\n * Create an identity transform.\n * @return {!ol.Transform} Identity transform.\n */\n_ol_transform_.create = function() {\n  return [1, 0, 0, 1, 0, 0];\n};\n\n\n/**\n * Resets the given transform to an identity transform.\n * @param {!ol.Transform} transform Transform.\n * @return {!ol.Transform} Transform.\n */\n_ol_transform_.reset = function(transform) {\n  return _ol_transform_.set(transform, 1, 0, 0, 1, 0, 0);\n};\n\n\n/**\n * Multiply the underlying matrices of two transforms and return the result in\n * the first transform.\n * @param {!ol.Transform} transform1 Transform parameters of matrix 1.\n * @param {!ol.Transform} transform2 Transform parameters of matrix 2.\n * @return {!ol.Transform} transform1 multiplied with transform2.\n */\n_ol_transform_.multiply = function(transform1, transform2) {\n  var a1 = transform1[0];\n  var b1 = transform1[1];\n  var c1 = transform1[2];\n  var d1 = transform1[3];\n  var e1 = transform1[4];\n  var f1 = transform1[5];\n  var a2 = transform2[0];\n  var b2 = transform2[1];\n  var c2 = transform2[2];\n  var d2 = transform2[3];\n  var e2 = transform2[4];\n  var f2 = transform2[5];\n\n  transform1[0] = a1 * a2 + c1 * b2;\n  transform1[1] = b1 * a2 + d1 * b2;\n  transform1[2] = a1 * c2 + c1 * d2;\n  transform1[3] = b1 * c2 + d1 * d2;\n  transform1[4] = a1 * e2 + c1 * f2 + e1;\n  transform1[5] = b1 * e2 + d1 * f2 + f1;\n\n  return transform1;\n};\n\n/**\n * Set the transform components a-f on a given transform.\n * @param {!ol.Transform} transform Transform.\n * @param {number} a The a component of the transform.\n * @param {number} b The b component of the transform.\n * @param {number} c The c component of the transform.\n * @param {number} d The d component of the transform.\n * @param {number} e The e component of the transform.\n * @param {number} f The f component of the transform.\n * @return {!ol.Transform} Matrix with transform applied.\n */\n_ol_transform_.set = function(transform, a, b, c, d, e, f) {\n  transform[0] = a;\n  transform[1] = b;\n  transform[2] = c;\n  transform[3] = d;\n  transform[4] = e;\n  transform[5] = f;\n  return transform;\n};\n\n\n/**\n * Set transform on one matrix from another matrix.\n * @param {!ol.Transform} transform1 Matrix to set transform to.\n * @param {!ol.Transform} transform2 Matrix to set transform from.\n * @return {!ol.Transform} transform1 with transform from transform2 applied.\n */\n_ol_transform_.setFromArray = function(transform1, transform2) {\n  transform1[0] = transform2[0];\n  transform1[1] = transform2[1];\n  transform1[2] = transform2[2];\n  transform1[3] = transform2[3];\n  transform1[4] = transform2[4];\n  transform1[5] = transform2[5];\n  return transform1;\n};\n\n\n/**\n * Transforms the given coordinate with the given transform returning the\n * resulting, transformed coordinate. The coordinate will be modified in-place.\n *\n * @param {ol.Transform} transform The transformation.\n * @param {ol.Coordinate|ol.Pixel} coordinate The coordinate to transform.\n * @return {ol.Coordinate|ol.Pixel} return coordinate so that operations can be\n *     chained together.\n */\n_ol_transform_.apply = function(transform, coordinate) {\n  var x = coordinate[0], y = coordinate[1];\n  coordinate[0] = transform[0] * x + transform[2] * y + transform[4];\n  coordinate[1] = transform[1] * x + transform[3] * y + transform[5];\n  return coordinate;\n};\n\n\n/**\n * Applies rotation to the given transform.\n * @param {!ol.Transform} transform Transform.\n * @param {number} angle Angle in radians.\n * @return {!ol.Transform} The rotated transform.\n */\n_ol_transform_.rotate = function(transform, angle) {\n  var cos = Math.cos(angle);\n  var sin = Math.sin(angle);\n  return _ol_transform_.multiply(transform,\n      _ol_transform_.set(_ol_transform_.tmp_, cos, sin, -sin, cos, 0, 0));\n};\n\n\n/**\n * Applies scale to a given transform.\n * @param {!ol.Transform} transform Transform.\n * @param {number} x Scale factor x.\n * @param {number} y Scale factor y.\n * @return {!ol.Transform} The scaled transform.\n */\n_ol_transform_.scale = function(transform, x, y) {\n  return _ol_transform_.multiply(transform,\n      _ol_transform_.set(_ol_transform_.tmp_, x, 0, 0, y, 0, 0));\n};\n\n\n/**\n * Applies translation to the given transform.\n * @param {!ol.Transform} transform Transform.\n * @param {number} dx Translation x.\n * @param {number} dy Translation y.\n * @return {!ol.Transform} The translated transform.\n */\n_ol_transform_.translate = function(transform, dx, dy) {\n  return _ol_transform_.multiply(transform,\n      _ol_transform_.set(_ol_transform_.tmp_, 1, 0, 0, 1, dx, dy));\n};\n\n\n/**\n * Creates a composite transform given an initial translation, scale, rotation, and\n * final translation (in that order only, not commutative).\n * @param {!ol.Transform} transform The transform (will be modified in place).\n * @param {number} dx1 Initial translation x.\n * @param {number} dy1 Initial translation y.\n * @param {number} sx Scale factor x.\n * @param {number} sy Scale factor y.\n * @param {number} angle Rotation (in counter-clockwise radians).\n * @param {number} dx2 Final translation x.\n * @param {number} dy2 Final translation y.\n * @return {!ol.Transform} The composite transform.\n */\n_ol_transform_.compose = function(transform, dx1, dy1, sx, sy, angle, dx2, dy2) {\n  var sin = Math.sin(angle);\n  var cos = Math.cos(angle);\n  transform[0] = sx * cos;\n  transform[1] = sy * sin;\n  transform[2] = -sx * sin;\n  transform[3] = sy * cos;\n  transform[4] = dx2 * sx * cos - dy2 * sx * sin + dx1;\n  transform[5] = dx2 * sy * sin + dy2 * sy * cos + dy1;\n  return transform;\n};\n\n\n/**\n * Invert the given transform.\n * @param {!ol.Transform} transform Transform.\n * @return {!ol.Transform} Inverse of the transform.\n */\n_ol_transform_.invert = function(transform) {\n  var det = _ol_transform_.determinant(transform);\n  _ol_asserts_.assert(det !== 0, 32); // Transformation matrix cannot be inverted\n\n  var a = transform[0];\n  var b = transform[1];\n  var c = transform[2];\n  var d = transform[3];\n  var e = transform[4];\n  var f = transform[5];\n\n  transform[0] = d / det;\n  transform[1] = -b / det;\n  transform[2] = -c / det;\n  transform[3] = a / det;\n  transform[4] = (c * f - d * e) / det;\n  transform[5] = -(a * f - b * e) / det;\n\n  return transform;\n};\n\n\n/**\n * Returns the determinant of the given matrix.\n * @param {!ol.Transform} mat Matrix.\n * @return {number} Determinant.\n */\n_ol_transform_.determinant = function(mat) {\n  return mat[0] * mat[3] - mat[1] * mat[2];\n};\nexport default _ol_transform_;\n","var _ol_webgl_ = {};\n\n/**\n * Constants taken from goog.webgl\n */\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_webgl_.ONE = 1;\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_webgl_.SRC_ALPHA = 0x0302;\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_webgl_.COLOR_ATTACHMENT0 = 0x8CE0;\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_webgl_.COLOR_BUFFER_BIT = 0x00004000;\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_webgl_.TRIANGLES = 0x0004;\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_webgl_.TRIANGLE_STRIP = 0x0005;\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_webgl_.ONE_MINUS_SRC_ALPHA = 0x0303;\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_webgl_.ARRAY_BUFFER = 0x8892;\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_webgl_.ELEMENT_ARRAY_BUFFER = 0x8893;\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_webgl_.STREAM_DRAW = 0x88E0;\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_webgl_.STATIC_DRAW = 0x88E4;\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_webgl_.DYNAMIC_DRAW = 0x88E8;\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_webgl_.CULL_FACE = 0x0B44;\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_webgl_.BLEND = 0x0BE2;\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_webgl_.STENCIL_TEST = 0x0B90;\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_webgl_.DEPTH_TEST = 0x0B71;\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_webgl_.SCISSOR_TEST = 0x0C11;\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_webgl_.UNSIGNED_BYTE = 0x1401;\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_webgl_.UNSIGNED_SHORT = 0x1403;\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_webgl_.UNSIGNED_INT = 0x1405;\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_webgl_.FLOAT = 0x1406;\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_webgl_.RGBA = 0x1908;\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_webgl_.FRAGMENT_SHADER = 0x8B30;\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_webgl_.VERTEX_SHADER = 0x8B31;\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_webgl_.LINK_STATUS = 0x8B82;\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_webgl_.LINEAR = 0x2601;\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_webgl_.TEXTURE_MAG_FILTER = 0x2800;\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_webgl_.TEXTURE_MIN_FILTER = 0x2801;\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_webgl_.TEXTURE_WRAP_S = 0x2802;\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_webgl_.TEXTURE_WRAP_T = 0x2803;\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_webgl_.TEXTURE_2D = 0x0DE1;\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_webgl_.TEXTURE0 = 0x84C0;\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_webgl_.CLAMP_TO_EDGE = 0x812F;\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_webgl_.COMPILE_STATUS = 0x8B81;\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_webgl_.FRAMEBUFFER = 0x8D40;\n\n\n/** end of goog.webgl constants\n */\n\n\n/**\n * @const\n * @private\n * @type {Array.<string>}\n */\n_ol_webgl_.CONTEXT_IDS_ = [\n  'experimental-webgl',\n  'webgl',\n  'webkit-3d',\n  'moz-webgl'\n];\n\n\n/**\n * @param {HTMLCanvasElement} canvas Canvas.\n * @param {Object=} opt_attributes Attributes.\n * @return {WebGLRenderingContext} WebGL rendering context.\n */\n_ol_webgl_.getContext = function(canvas, opt_attributes) {\n  var context, i, ii = _ol_webgl_.CONTEXT_IDS_.length;\n  for (i = 0; i < ii; ++i) {\n    try {\n      context = canvas.getContext(_ol_webgl_.CONTEXT_IDS_[i], opt_attributes);\n      if (context) {\n        return /** @type {!WebGLRenderingContext} */ (context);\n      }\n    } catch (e) {\n      // pass\n    }\n  }\n  return null;\n};\nexport default _ol_webgl_;\n","/**\n * The geometry type. One of `'Point'`, `'LineString'`, `'LinearRing'`,\n * `'Polygon'`, `'MultiPoint'`, `'MultiLineString'`, `'MultiPolygon'`,\n * `'GeometryCollection'`, `'Circle'`.\n * @enum {string}\n */\nvar _ol_geom_GeometryType_ = {\n  POINT: 'Point',\n  LINE_STRING: 'LineString',\n  LINEAR_RING: 'LinearRing',\n  POLYGON: 'Polygon',\n  MULTI_POINT: 'MultiPoint',\n  MULTI_LINE_STRING: 'MultiLineString',\n  MULTI_POLYGON: 'MultiPolygon',\n  GEOMETRY_COLLECTION: 'GeometryCollection',\n  CIRCLE: 'Circle'\n};\n\nexport default _ol_geom_GeometryType_;\n","import _ol_css_ from '../css.js';\nimport _ol_dom_ from '../dom.js';\nimport _ol_obj_ from '../obj.js';\nimport _ol_structs_LRUCache_ from '../structs/lrucache.js';\nimport _ol_transform_ from '../transform.js';\nvar _ol_render_canvas_ = {};\n\n\n/**\n * @const\n * @type {string}\n */\n_ol_render_canvas_.defaultFont = '10px sans-serif';\n\n\n/**\n * @const\n * @type {ol.Color}\n */\n_ol_render_canvas_.defaultFillStyle = [0, 0, 0, 1];\n\n\n/**\n * @const\n * @type {string}\n */\n_ol_render_canvas_.defaultLineCap = 'round';\n\n\n/**\n * @const\n * @type {Array.<number>}\n */\n_ol_render_canvas_.defaultLineDash = [];\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_render_canvas_.defaultLineDashOffset = 0;\n\n\n/**\n * @const\n * @type {string}\n */\n_ol_render_canvas_.defaultLineJoin = 'round';\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_render_canvas_.defaultMiterLimit = 10;\n\n\n/**\n * @const\n * @type {ol.Color}\n */\n_ol_render_canvas_.defaultStrokeStyle = [0, 0, 0, 1];\n\n\n/**\n * @const\n * @type {string}\n */\n_ol_render_canvas_.defaultTextAlign = 'center';\n\n\n/**\n * @const\n * @type {string}\n */\n_ol_render_canvas_.defaultTextBaseline = 'middle';\n\n\n/**\n * @const\n * @type {Array.<number>}\n */\n_ol_render_canvas_.defaultPadding = [0, 0, 0, 0];\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_render_canvas_.defaultLineWidth = 1;\n\n\n/**\n * @type {ol.structs.LRUCache.<HTMLCanvasElement>}\n */\n_ol_render_canvas_.labelCache = new _ol_structs_LRUCache_();\n\n\n/**\n * @type {!Object.<string, number>}\n */\n_ol_render_canvas_.checkedFonts_ = {};\n\n\n/**\n * @type {CanvasRenderingContext2D}\n */\n_ol_render_canvas_.measureContext_ = null;\n\n\n/**\n * @type {!Object.<string, number>}\n */\n_ol_render_canvas_.textHeights_ = {};\n\n\n/**\n * Clears the label cache when a font becomes available.\n * @param {string} fontSpec CSS font spec.\n */\n_ol_render_canvas_.checkFont = (function() {\n  var retries = 60;\n  var checked = _ol_render_canvas_.checkedFonts_;\n  var labelCache = _ol_render_canvas_.labelCache;\n  var font = '32px monospace';\n  var text = 'wmytzilWMYTZIL@#/&?$%10';\n  var interval, referenceWidth;\n\n  function isAvailable(fontFamily) {\n    var context = _ol_render_canvas_.getMeasureContext();\n    context.font = font;\n    referenceWidth = context.measureText(text).width;\n    var available = true;\n    if (fontFamily != 'monospace') {\n      context.font = '32px ' + fontFamily + ',monospace';\n      var width = context.measureText(text).width;\n      // If width and referenceWidth are the same, then the 'monospace'\n      // fallback was used instead of the font we wanted, so the font is not\n      // available.\n      available = width != referenceWidth;\n    }\n    return available;\n  }\n\n  function check() {\n    var done = true;\n    for (var font in checked) {\n      if (checked[font] < retries) {\n        if (isAvailable(font)) {\n          checked[font] = retries;\n          _ol_obj_.clear(_ol_render_canvas_.textHeights_);\n          // Make sure that loaded fonts are picked up by Safari\n          _ol_render_canvas_.measureContext_ = null;\n          labelCache.clear();\n        } else {\n          ++checked[font];\n          done = false;\n        }\n      }\n    }\n    if (done) {\n      window.clearInterval(interval);\n      interval = undefined;\n    }\n  }\n\n  return function(fontSpec) {\n    var fontFamilies = _ol_css_.getFontFamilies(fontSpec);\n    if (!fontFamilies) {\n      return;\n    }\n    for (var i = 0, ii = fontFamilies.length; i < ii; ++i) {\n      var fontFamily = fontFamilies[i];\n      if (!(fontFamily in checked)) {\n        checked[fontFamily] = retries;\n        if (!isAvailable(fontFamily)) {\n          checked[fontFamily] = 0;\n          if (interval === undefined) {\n            interval = window.setInterval(check, 32);\n          }\n        }\n      }\n    }\n  };\n})();\n\n\n/**\n * @return {CanvasRenderingContext2D} Measure context.\n */\n_ol_render_canvas_.getMeasureContext = function() {\n  var context = _ol_render_canvas_.measureContext_;\n  if (!context) {\n    context = _ol_render_canvas_.measureContext_ = _ol_dom_.createCanvasContext2D(1, 1);\n  }\n  return context;\n};\n\n\n/**\n * @param {string} font Font to use for measuring.\n * @return {ol.Size} Measurement.\n */\n_ol_render_canvas_.measureTextHeight = (function() {\n  var span;\n  var heights = _ol_render_canvas_.textHeights_;\n  return function(font) {\n    var height = heights[font];\n    if (height == undefined) {\n      if (!span) {\n        span = document.createElement('span');\n        span.textContent = 'M';\n        span.style.margin = span.style.padding = '0 !important';\n        span.style.position = 'absolute !important';\n        span.style.left = '-99999px !important';\n      }\n      span.style.font = font;\n      document.body.appendChild(span);\n      height = heights[font] = span.offsetHeight;\n      document.body.removeChild(span);\n    }\n    return height;\n  };\n})();\n\n\n/**\n * @param {string} font Font.\n * @param {string} text Text.\n * @return {number} Width.\n */\n_ol_render_canvas_.measureTextWidth = function(font, text) {\n  var measureContext = _ol_render_canvas_.getMeasureContext();\n  if (font != measureContext.font) {\n    measureContext.font = font;\n  }\n  return measureContext.measureText(text).width;\n};\n\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {number} rotation Rotation.\n * @param {number} offsetX X offset.\n * @param {number} offsetY Y offset.\n */\n_ol_render_canvas_.rotateAtOffset = function(context, rotation, offsetX, offsetY) {\n  if (rotation !== 0) {\n    context.translate(offsetX, offsetY);\n    context.rotate(rotation);\n    context.translate(-offsetX, -offsetY);\n  }\n};\n\n\n_ol_render_canvas_.resetTransform_ = _ol_transform_.create();\n\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {ol.Transform|null} transform Transform.\n * @param {number} opacity Opacity.\n * @param {HTMLImageElement|HTMLCanvasElement|HTMLVideoElement} image Image.\n * @param {number} originX Origin X.\n * @param {number} originY Origin Y.\n * @param {number} w Width.\n * @param {number} h Height.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {number} scale Scale.\n */\n_ol_render_canvas_.drawImage = function(context,\n    transform, opacity, image, originX, originY, w, h, x, y, scale) {\n  var alpha;\n  if (opacity != 1) {\n    alpha = context.globalAlpha;\n    context.globalAlpha = alpha * opacity;\n  }\n  if (transform) {\n    context.setTransform.apply(context, transform);\n  }\n\n  context.drawImage(image, originX, originY, w, h, x, y, w * scale, h * scale);\n\n  if (alpha) {\n    context.globalAlpha = alpha;\n  }\n  if (transform) {\n    context.setTransform.apply(context, _ol_render_canvas_.resetTransform_);\n  }\n};\nexport default _ol_render_canvas_;\n","/**\n * @enum {string}\n * @const\n */\nvar _ol_events_EventType_ = {\n  /**\n   * Generic change event. Triggered when the revision counter is increased.\n   * @event ol.events.Event#change\n   * @api\n   */\n  CHANGE: 'change',\n\n  CLEAR: 'clear',\n  CLICK: 'click',\n  DBLCLICK: 'dblclick',\n  DRAGENTER: 'dragenter',\n  DRAGOVER: 'dragover',\n  DROP: 'drop',\n  ERROR: 'error',\n  KEYDOWN: 'keydown',\n  KEYPRESS: 'keypress',\n  LOAD: 'load',\n  MOUSEDOWN: 'mousedown',\n  MOUSEMOVE: 'mousemove',\n  MOUSEOUT: 'mouseout',\n  MOUSEUP: 'mouseup',\n  MOUSEWHEEL: 'mousewheel',\n  MSPOINTERDOWN: 'MSPointerDown',\n  RESIZE: 'resize',\n  TOUCHSTART: 'touchstart',\n  TOUCHMOVE: 'touchmove',\n  TOUCHEND: 'touchend',\n  WHEEL: 'wheel'\n};\n\nexport default _ol_events_EventType_;\n","import _ol_asserts_ from './asserts.js';\nvar _ol_math_ = {};\n\n\n/**\n * Takes a number and clamps it to within the provided bounds.\n * @param {number} value The input number.\n * @param {number} min The minimum value to return.\n * @param {number} max The maximum value to return.\n * @return {number} The input number if it is within bounds, or the nearest\n *     number within the bounds.\n */\n_ol_math_.clamp = function(value, min, max) {\n  return Math.min(Math.max(value, min), max);\n};\n\n\n/**\n * Return the hyperbolic cosine of a given number. The method will use the\n * native `Math.cosh` function if it is available, otherwise the hyperbolic\n * cosine will be calculated via the reference implementation of the Mozilla\n * developer network.\n *\n * @param {number} x X.\n * @return {number} Hyperbolic cosine of x.\n */\n_ol_math_.cosh = (function() {\n  // Wrapped in a iife, to save the overhead of checking for the native\n  // implementation on every invocation.\n  var cosh;\n  if ('cosh' in Math) {\n    // The environment supports the native Math.cosh function, use it…\n    cosh = Math.cosh;\n  } else {\n    // … else, use the reference implementation of MDN:\n    cosh = function(x) {\n      var y = Math.exp(x);\n      return (y + 1 / y) / 2;\n    };\n  }\n  return cosh;\n}());\n\n\n/**\n * @param {number} x X.\n * @return {number} The smallest power of two greater than or equal to x.\n */\n_ol_math_.roundUpToPowerOfTwo = function(x) {\n  _ol_asserts_.assert(0 < x, 29); // `x` must be greater than `0`\n  return Math.pow(2, Math.ceil(Math.log(x) / Math.LN2));\n};\n\n\n/**\n * Returns the square of the closest distance between the point (x, y) and the\n * line segment (x1, y1) to (x2, y2).\n * @param {number} x X.\n * @param {number} y Y.\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\n_ol_math_.squaredSegmentDistance = function(x, y, x1, y1, x2, y2) {\n  var dx = x2 - x1;\n  var dy = y2 - y1;\n  if (dx !== 0 || dy !== 0) {\n    var t = ((x - x1) * dx + (y - y1) * dy) / (dx * dx + dy * dy);\n    if (t > 1) {\n      x1 = x2;\n      y1 = y2;\n    } else if (t > 0) {\n      x1 += dx * t;\n      y1 += dy * t;\n    }\n  }\n  return _ol_math_.squaredDistance(x, y, x1, y1);\n};\n\n\n/**\n * Returns the square of the distance between the points (x1, y1) and (x2, y2).\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\n_ol_math_.squaredDistance = function(x1, y1, x2, y2) {\n  var dx = x2 - x1;\n  var dy = y2 - y1;\n  return dx * dx + dy * dy;\n};\n\n\n/**\n * Solves system of linear equations using Gaussian elimination method.\n *\n * @param {Array.<Array.<number>>} mat Augmented matrix (n x n + 1 column)\n *                                     in row-major order.\n * @return {Array.<number>} The resulting vector.\n */\n_ol_math_.solveLinearSystem = function(mat) {\n  var n = mat.length;\n\n  for (var i = 0; i < n; i++) {\n    // Find max in the i-th column (ignoring i - 1 first rows)\n    var maxRow = i;\n    var maxEl = Math.abs(mat[i][i]);\n    for (var r = i + 1; r < n; r++) {\n      var absValue = Math.abs(mat[r][i]);\n      if (absValue > maxEl) {\n        maxEl = absValue;\n        maxRow = r;\n      }\n    }\n\n    if (maxEl === 0) {\n      return null; // matrix is singular\n    }\n\n    // Swap max row with i-th (current) row\n    var tmp = mat[maxRow];\n    mat[maxRow] = mat[i];\n    mat[i] = tmp;\n\n    // Subtract the i-th row to make all the remaining rows 0 in the i-th column\n    for (var j = i + 1; j < n; j++) {\n      var coef = -mat[j][i] / mat[i][i];\n      for (var k = i; k < n + 1; k++) {\n        if (i == k) {\n          mat[j][k] = 0;\n        } else {\n          mat[j][k] += coef * mat[i][k];\n        }\n      }\n    }\n  }\n\n  // Solve Ax=b for upper triangular matrix A (mat)\n  var x = new Array(n);\n  for (var l = n - 1; l >= 0; l--) {\n    x[l] = mat[l][n] / mat[l][l];\n    for (var m = l - 1; m >= 0; m--) {\n      mat[m][n] -= mat[m][l] * x[l];\n    }\n  }\n  return x;\n};\n\n\n/**\n * Converts radians to to degrees.\n *\n * @param {number} angleInRadians Angle in radians.\n * @return {number} Angle in degrees.\n */\n_ol_math_.toDegrees = function(angleInRadians) {\n  return angleInRadians * 180 / Math.PI;\n};\n\n\n/**\n * Converts degrees to radians.\n *\n * @param {number} angleInDegrees Angle in degrees.\n * @return {number} Angle in radians.\n */\n_ol_math_.toRadians = function(angleInDegrees) {\n  return angleInDegrees * Math.PI / 180;\n};\n\n/**\n * Returns the modulo of a / b, depending on the sign of b.\n *\n * @param {number} a Dividend.\n * @param {number} b Divisor.\n * @return {number} Modulo.\n */\n_ol_math_.modulo = function(a, b) {\n  var r = a % b;\n  return r * b < 0 ? r + b : r;\n};\n\n/**\n * Calculates the linearly interpolated value of x between a and b.\n *\n * @param {number} a Number\n * @param {number} b Number\n * @param {number} x Value to be interpolated.\n * @return {number} Interpolated value.\n */\n_ol_math_.lerp = function(a, b, x) {\n  return a + x * (b - a);\n};\nexport default _ol_math_;\n","var _ol_obj_ = {};\n\n\n/**\n * Polyfill for Object.assign().  Assigns enumerable and own properties from\n * one or more source objects to a target object.\n *\n * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n * @param {!Object} target The target object.\n * @param {...Object} var_sources The source object(s).\n * @return {!Object} The modified target object.\n */\n_ol_obj_.assign = (typeof Object.assign === 'function') ? Object.assign : function(target, var_sources) {\n  if (target === undefined || target === null) {\n    throw new TypeError('Cannot convert undefined or null to object');\n  }\n\n  var output = Object(target);\n  for (var i = 1, ii = arguments.length; i < ii; ++i) {\n    var source = arguments[i];\n    if (source !== undefined && source !== null) {\n      for (var key in source) {\n        if (source.hasOwnProperty(key)) {\n          output[key] = source[key];\n        }\n      }\n    }\n  }\n  return output;\n};\n\n\n/**\n * Removes all properties from an object.\n * @param {Object} object The object to clear.\n */\n_ol_obj_.clear = function(object) {\n  for (var property in object) {\n    delete object[property];\n  }\n};\n\n\n/**\n * Get an array of property values from an object.\n * @param {Object<K,V>} object The object from which to get the values.\n * @return {!Array<V>} The property values.\n * @template K,V\n */\n_ol_obj_.getValues = function(object) {\n  var values = [];\n  for (var property in object) {\n    values.push(object[property]);\n  }\n  return values;\n};\n\n\n/**\n * Determine if an object has any properties.\n * @param {Object} object The object to check.\n * @return {boolean} The object is empty.\n */\n_ol_obj_.isEmpty = function(object) {\n  var property;\n  for (property in object) {\n    return false;\n  }\n  return !property;\n};\nexport default _ol_obj_;\n","var _ol_array_ = {};\n\n\n/**\n * Performs a binary search on the provided sorted list and returns the index of the item if found. If it can't be found it'll return -1.\n * https://github.com/darkskyapp/binary-search\n *\n * @param {Array.<*>} haystack Items to search through.\n * @param {*} needle The item to look for.\n * @param {Function=} opt_comparator Comparator function.\n * @return {number} The index of the item if found, -1 if not.\n */\n_ol_array_.binarySearch = function(haystack, needle, opt_comparator) {\n  var mid, cmp;\n  var comparator = opt_comparator || _ol_array_.numberSafeCompareFunction;\n  var low = 0;\n  var high = haystack.length;\n  var found = false;\n\n  while (low < high) {\n    /* Note that \"(low + high) >>> 1\" may overflow, and results in a typecast\n     * to double (which gives the wrong results). */\n    mid = low + (high - low >> 1);\n    cmp = +comparator(haystack[mid], needle);\n\n    if (cmp < 0.0) { /* Too low. */\n      low  = mid + 1;\n\n    } else { /* Key found or too high */\n      high = mid;\n      found = !cmp;\n    }\n  }\n\n  /* Key not found. */\n  return found ? low : ~low;\n};\n\n\n/**\n * Compare function for array sort that is safe for numbers.\n * @param {*} a The first object to be compared.\n * @param {*} b The second object to be compared.\n * @return {number} A negative number, zero, or a positive number as the first\n *     argument is less than, equal to, or greater than the second.\n */\n_ol_array_.numberSafeCompareFunction = function(a, b) {\n  return a > b ? 1 : a < b ? -1 : 0;\n};\n\n\n/**\n * Whether the array contains the given object.\n * @param {Array.<*>} arr The array to test for the presence of the element.\n * @param {*} obj The object for which to test.\n * @return {boolean} The object is in the array.\n */\n_ol_array_.includes = function(arr, obj) {\n  return arr.indexOf(obj) >= 0;\n};\n\n\n/**\n * @param {Array.<number>} arr Array.\n * @param {number} target Target.\n * @param {number} direction 0 means return the nearest, > 0\n *    means return the largest nearest, < 0 means return the\n *    smallest nearest.\n * @return {number} Index.\n */\n_ol_array_.linearFindNearest = function(arr, target, direction) {\n  var n = arr.length;\n  if (arr[0] <= target) {\n    return 0;\n  } else if (target <= arr[n - 1]) {\n    return n - 1;\n  } else {\n    var i;\n    if (direction > 0) {\n      for (i = 1; i < n; ++i) {\n        if (arr[i] < target) {\n          return i - 1;\n        }\n      }\n    } else if (direction < 0) {\n      for (i = 1; i < n; ++i) {\n        if (arr[i] <= target) {\n          return i;\n        }\n      }\n    } else {\n      for (i = 1; i < n; ++i) {\n        if (arr[i] == target) {\n          return i;\n        } else if (arr[i] < target) {\n          if (arr[i - 1] - target < target - arr[i]) {\n            return i - 1;\n          } else {\n            return i;\n          }\n        }\n      }\n    }\n    return n - 1;\n  }\n};\n\n\n/**\n * @param {Array.<*>} arr Array.\n * @param {number} begin Begin index.\n * @param {number} end End index.\n */\n_ol_array_.reverseSubArray = function(arr, begin, end) {\n  while (begin < end) {\n    var tmp = arr[begin];\n    arr[begin] = arr[end];\n    arr[end] = tmp;\n    ++begin;\n    --end;\n  }\n};\n\n\n/**\n * @param {Array.<VALUE>} arr The array to modify.\n * @param {Array.<VALUE>|VALUE} data The elements or arrays of elements\n *     to add to arr.\n * @template VALUE\n */\n_ol_array_.extend = function(arr, data) {\n  var i;\n  var extension = Array.isArray(data) ? data : [data];\n  var length = extension.length;\n  for (i = 0; i < length; i++) {\n    arr[arr.length] = extension[i];\n  }\n};\n\n\n/**\n * @param {Array.<VALUE>} arr The array to modify.\n * @param {VALUE} obj The element to remove.\n * @template VALUE\n * @return {boolean} If the element was removed.\n */\n_ol_array_.remove = function(arr, obj) {\n  var i = arr.indexOf(obj);\n  var found = i > -1;\n  if (found) {\n    arr.splice(i, 1);\n  }\n  return found;\n};\n\n\n/**\n * @param {Array.<VALUE>} arr The array to search in.\n * @param {function(VALUE, number, ?) : boolean} func The function to compare.\n * @template VALUE\n * @return {VALUE} The element found.\n */\n_ol_array_.find = function(arr, func) {\n  var length = arr.length >>> 0;\n  var value;\n\n  for (var i = 0; i < length; i++) {\n    value = arr[i];\n    if (func(value, i, arr)) {\n      return value;\n    }\n  }\n  return null;\n};\n\n\n/**\n * @param {Array|Uint8ClampedArray} arr1 The first array to compare.\n * @param {Array|Uint8ClampedArray} arr2 The second array to compare.\n * @return {boolean} Whether the two arrays are equal.\n */\n_ol_array_.equals = function(arr1, arr2) {\n  var len1 = arr1.length;\n  if (len1 !== arr2.length) {\n    return false;\n  }\n  for (var i = 0; i < len1; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false;\n    }\n  }\n  return true;\n};\n\n\n/**\n * @param {Array.<*>} arr The array to sort (modifies original).\n * @param {Function} compareFnc Comparison function.\n */\n_ol_array_.stableSort = function(arr, compareFnc) {\n  var length = arr.length;\n  var tmp = Array(arr.length);\n  var i;\n  for (i = 0; i < length; i++) {\n    tmp[i] = {index: i, value: arr[i]};\n  }\n  tmp.sort(function(a, b) {\n    return compareFnc(a.value, b.value) || a.index - b.index;\n  });\n  for (i = 0; i < arr.length; i++) {\n    arr[i] = tmp[i].value;\n  }\n};\n\n\n/**\n * @param {Array.<*>} arr The array to search in.\n * @param {Function} func Comparison function.\n * @return {number} Return index.\n */\n_ol_array_.findIndex = function(arr, func) {\n  var index;\n  var found = !arr.every(function(el, idx) {\n    index = idx;\n    return !func(el, idx, arr);\n  });\n  return found ? index : -1;\n};\n\n\n/**\n * @param {Array.<*>} arr The array to test.\n * @param {Function=} opt_func Comparison function.\n * @param {boolean=} opt_strict Strictly sorted (default false).\n * @return {boolean} Return index.\n */\n_ol_array_.isSorted = function(arr, opt_func, opt_strict) {\n  var compare = opt_func || _ol_array_.numberSafeCompareFunction;\n  return arr.every(function(currentVal, index) {\n    if (index === 0) {\n      return true;\n    }\n    var res = compare(arr[index - 1], currentVal);\n    return !(res > 0 || opt_strict && res === 0);\n  });\n};\nexport default _ol_array_;\n","/**\n * @enum {number}\n */\nvar _ol_TileState_ = {\n  IDLE: 0,\n  LOADING: 1,\n  LOADED: 2,\n  ERROR: 3,\n  EMPTY: 4,\n  ABORT: 5\n};\n\nexport default _ol_TileState_;\n","import _ol_AssertionError_ from './assertionerror.js';\nvar _ol_asserts_ = {};\n\n\n/**\n * @param {*} assertion Assertion we expected to be truthy.\n * @param {number} errorCode Error code.\n */\n_ol_asserts_.assert = function(assertion, errorCode) {\n  if (!assertion) {\n    throw new _ol_AssertionError_(errorCode);\n  }\n};\nexport default _ol_asserts_;\n","import _ol_ from './index.js';\nimport _ol_ObjectEventType_ from './objecteventtype.js';\nimport _ol_Observable_ from './observable.js';\nimport _ol_events_Event_ from './events/event.js';\nimport _ol_obj_ from './obj.js';\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Most non-trivial classes inherit from this.\n *\n * This extends {@link ol.Observable} with observable properties, where each\n * property is observable as well as the object as a whole.\n *\n * Classes that inherit from this have pre-defined properties, to which you can\n * add your owns. The pre-defined properties are listed in this documentation as\n * 'Observable Properties', and have their own accessors; for example,\n * {@link ol.Map} has a `target` property, accessed with `getTarget()`  and\n * changed with `setTarget()`. Not all properties are however settable. There\n * are also general-purpose accessors `get()` and `set()`. For example,\n * `get('target')` is equivalent to `getTarget()`.\n *\n * The `set` accessors trigger a change event, and you can monitor this by\n * registering a listener. For example, {@link ol.View} has a `center`\n * property, so `view.on('change:center', function(evt) {...});` would call the\n * function whenever the value of the center property changes. Within the\n * function, `evt.target` would be the view, so `evt.target.getCenter()` would\n * return the new center.\n *\n * You can add your own observable properties with\n * `object.set('prop', 'value')`, and retrieve that with `object.get('prop')`.\n * You can listen for changes on that property value with\n * `object.on('change:prop', listener)`. You can get a list of all\n * properties with {@link ol.Object#getProperties object.getProperties()}.\n *\n * Note that the observable properties are separate from standard JS properties.\n * You can, for example, give your map object a title with\n * `map.title='New title'` and with `map.set('title', 'Another title')`. The\n * first will be a `hasOwnProperty`; the second will appear in\n * `getProperties()`. Only the second is observable.\n *\n * Properties can be deleted by using the unset method. E.g.\n * object.unset('foo').\n *\n * @constructor\n * @extends {ol.Observable}\n * @param {Object.<string, *>=} opt_values An object with key-value pairs.\n * @fires ol.Object.Event\n * @api\n */\nvar _ol_Object_ = function(opt_values) {\n  _ol_Observable_.call(this);\n\n  // Call ol.getUid to ensure that the order of objects' ids is the same as\n  // the order in which they were created.  This also helps to ensure that\n  // object properties are always added in the same order, which helps many\n  // JavaScript engines generate faster code.\n  _ol_.getUid(this);\n\n  /**\n   * @private\n   * @type {!Object.<string, *>}\n   */\n  this.values_ = {};\n\n  if (opt_values !== undefined) {\n    this.setProperties(opt_values);\n  }\n};\n\n_ol_.inherits(_ol_Object_, _ol_Observable_);\n\n\n/**\n * @private\n * @type {Object.<string, string>}\n */\n_ol_Object_.changeEventTypeCache_ = {};\n\n\n/**\n * @param {string} key Key name.\n * @return {string} Change name.\n */\n_ol_Object_.getChangeEventType = function(key) {\n  return _ol_Object_.changeEventTypeCache_.hasOwnProperty(key) ?\n    _ol_Object_.changeEventTypeCache_[key] :\n    (_ol_Object_.changeEventTypeCache_[key] = 'change:' + key);\n};\n\n\n/**\n * Gets a value.\n * @param {string} key Key name.\n * @return {*} Value.\n * @api\n */\n_ol_Object_.prototype.get = function(key) {\n  var value;\n  if (this.values_.hasOwnProperty(key)) {\n    value = this.values_[key];\n  }\n  return value;\n};\n\n\n/**\n * Get a list of object property names.\n * @return {Array.<string>} List of property names.\n * @api\n */\n_ol_Object_.prototype.getKeys = function() {\n  return Object.keys(this.values_);\n};\n\n\n/**\n * Get an object of all property names and values.\n * @return {Object.<string, *>} Object.\n * @api\n */\n_ol_Object_.prototype.getProperties = function() {\n  return _ol_obj_.assign({}, this.values_);\n};\n\n\n/**\n * @param {string} key Key name.\n * @param {*} oldValue Old value.\n */\n_ol_Object_.prototype.notify = function(key, oldValue) {\n  var eventType;\n  eventType = _ol_Object_.getChangeEventType(key);\n  this.dispatchEvent(new _ol_Object_.Event(eventType, key, oldValue));\n  eventType = _ol_ObjectEventType_.PROPERTYCHANGE;\n  this.dispatchEvent(new _ol_Object_.Event(eventType, key, oldValue));\n};\n\n\n/**\n * Sets a value.\n * @param {string} key Key name.\n * @param {*} value Value.\n * @param {boolean=} opt_silent Update without triggering an event.\n * @api\n */\n_ol_Object_.prototype.set = function(key, value, opt_silent) {\n  if (opt_silent) {\n    this.values_[key] = value;\n  } else {\n    var oldValue = this.values_[key];\n    this.values_[key] = value;\n    if (oldValue !== value) {\n      this.notify(key, oldValue);\n    }\n  }\n};\n\n\n/**\n * Sets a collection of key-value pairs.  Note that this changes any existing\n * properties and adds new ones (it does not remove any existing properties).\n * @param {Object.<string, *>} values Values.\n * @param {boolean=} opt_silent Update without triggering an event.\n * @api\n */\n_ol_Object_.prototype.setProperties = function(values, opt_silent) {\n  var key;\n  for (key in values) {\n    this.set(key, values[key], opt_silent);\n  }\n};\n\n\n/**\n * Unsets a property.\n * @param {string} key Key name.\n * @param {boolean=} opt_silent Unset without triggering an event.\n * @api\n */\n_ol_Object_.prototype.unset = function(key, opt_silent) {\n  if (key in this.values_) {\n    var oldValue = this.values_[key];\n    delete this.values_[key];\n    if (!opt_silent) {\n      this.notify(key, oldValue);\n    }\n  }\n};\n\n\n/**\n * @classdesc\n * Events emitted by {@link ol.Object} instances are instances of this type.\n *\n * @param {string} type The event type.\n * @param {string} key The property name.\n * @param {*} oldValue The old value for `key`.\n * @extends {ol.events.Event}\n * @implements {oli.Object.Event}\n * @constructor\n */\n_ol_Object_.Event = function(type, key, oldValue) {\n  _ol_events_Event_.call(this, type);\n\n  /**\n   * The name of the property whose value is changing.\n   * @type {string}\n   * @api\n   */\n  this.key = key;\n\n  /**\n   * The old value. To get the new value use `e.target.get(e.key)` where\n   * `e` is the event object.\n   * @type {*}\n   * @api\n   */\n  this.oldValue = oldValue;\n\n};\n_ol_.inherits(_ol_Object_.Event, _ol_events_Event_);\nexport default _ol_Object_;\n","var _ol_dom_ = {};\n\n\n/**\n * Create an html canvas element and returns its 2d context.\n * @param {number=} opt_width Canvas width.\n * @param {number=} opt_height Canvas height.\n * @return {CanvasRenderingContext2D} The context.\n */\n_ol_dom_.createCanvasContext2D = function(opt_width, opt_height) {\n  var canvas = document.createElement('CANVAS');\n  if (opt_width) {\n    canvas.width = opt_width;\n  }\n  if (opt_height) {\n    canvas.height = opt_height;\n  }\n  return canvas.getContext('2d');\n};\n\n\n/**\n * Get the current computed width for the given element including margin,\n * padding and border.\n * Equivalent to jQuery's `$(el).outerWidth(true)`.\n * @param {!Element} element Element.\n * @return {number} The width.\n */\n_ol_dom_.outerWidth = function(element) {\n  var width = element.offsetWidth;\n  var style = getComputedStyle(element);\n  width += parseInt(style.marginLeft, 10) + parseInt(style.marginRight, 10);\n\n  return width;\n};\n\n\n/**\n * Get the current computed height for the given element including margin,\n * padding and border.\n * Equivalent to jQuery's `$(el).outerHeight(true)`.\n * @param {!Element} element Element.\n * @return {number} The height.\n */\n_ol_dom_.outerHeight = function(element) {\n  var height = element.offsetHeight;\n  var style = getComputedStyle(element);\n  height += parseInt(style.marginTop, 10) + parseInt(style.marginBottom, 10);\n\n  return height;\n};\n\n/**\n * @param {Node} newNode Node to replace old node\n * @param {Node} oldNode The node to be replaced\n */\n_ol_dom_.replaceNode = function(newNode, oldNode) {\n  var parent = oldNode.parentNode;\n  if (parent) {\n    parent.replaceChild(newNode, oldNode);\n  }\n};\n\n/**\n * @param {Node} node The node to remove.\n * @returns {Node} The node that was removed or null.\n */\n_ol_dom_.removeNode = function(node) {\n  return node && node.parentNode ? node.parentNode.removeChild(node) : null;\n};\n\n/**\n * @param {Node} node The node to remove the children from.\n */\n_ol_dom_.removeChildren = function(node) {\n  while (node.lastChild) {\n    node.removeChild(node.lastChild);\n  }\n};\nexport default _ol_dom_;\n","/**\n * @enum {number}\n */\nvar _ol_ViewHint_ = {\n  ANIMATING: 0,\n  INTERACTING: 1\n};\n\nexport default _ol_ViewHint_;\n","var _ol_functions_ = {};\n\n/**\n * Always returns true.\n * @returns {boolean} true.\n */\n_ol_functions_.TRUE = function() {\n  return true;\n};\n\n/**\n * Always returns false.\n * @returns {boolean} false.\n */\n_ol_functions_.FALSE = function() {\n  return false;\n};\nexport default _ol_functions_;\n","import _ol_events_EventType_ from './events/eventtype.js';\n\n/**\n * Constants for event names.\n * @enum {string}\n */\nvar _ol_MapBrowserEventType_ = {\n\n  /**\n   * A true single click with no dragging and no double click. Note that this\n   * event is delayed by 250 ms to ensure that it is not a double click.\n   * @event ol.MapBrowserEvent#singleclick\n   * @api\n   */\n  SINGLECLICK: 'singleclick',\n\n  /**\n   * A click with no dragging. A double click will fire two of this.\n   * @event ol.MapBrowserEvent#click\n   * @api\n   */\n  CLICK: _ol_events_EventType_.CLICK,\n\n  /**\n   * A true double click, with no dragging.\n   * @event ol.MapBrowserEvent#dblclick\n   * @api\n   */\n  DBLCLICK: _ol_events_EventType_.DBLCLICK,\n\n  /**\n   * Triggered when a pointer is dragged.\n   * @event ol.MapBrowserEvent#pointerdrag\n   * @api\n   */\n  POINTERDRAG: 'pointerdrag',\n\n  /**\n   * Triggered when a pointer is moved. Note that on touch devices this is\n   * triggered when the map is panned, so is not the same as mousemove.\n   * @event ol.MapBrowserEvent#pointermove\n   * @api\n   */\n  POINTERMOVE: 'pointermove',\n\n  POINTERDOWN: 'pointerdown',\n  POINTERUP: 'pointerup',\n  POINTEROVER: 'pointerover',\n  POINTEROUT: 'pointerout',\n  POINTERENTER: 'pointerenter',\n  POINTERLEAVE: 'pointerleave',\n  POINTERCANCEL: 'pointercancel'\n};\n\nexport default _ol_MapBrowserEventType_;\n","import _ol_ from './index.js';\nimport _ol_webgl_ from './webgl.js';\nvar _ol_has_ = {};\n\nvar ua = typeof navigator !== 'undefined' ?\n  navigator.userAgent.toLowerCase() : '';\n\n/**\n * User agent string says we are dealing with Firefox as browser.\n * @type {boolean}\n */\n_ol_has_.FIREFOX = ua.indexOf('firefox') !== -1;\n\n/**\n * User agent string says we are dealing with Safari as browser.\n * @type {boolean}\n */\n_ol_has_.SAFARI = ua.indexOf('safari') !== -1 && ua.indexOf('chrom') == -1;\n\n/**\n * User agent string says we are dealing with a WebKit engine.\n * @type {boolean}\n */\n_ol_has_.WEBKIT = ua.indexOf('webkit') !== -1 && ua.indexOf('edge') == -1;\n\n/**\n * User agent string says we are dealing with a Mac as platform.\n * @type {boolean}\n */\n_ol_has_.MAC = ua.indexOf('macintosh') !== -1;\n\n\n/**\n * The ratio between physical pixels and device-independent pixels\n * (dips) on the device (`window.devicePixelRatio`).\n * @const\n * @type {number}\n * @api\n */\n_ol_has_.DEVICE_PIXEL_RATIO = window.devicePixelRatio || 1;\n\n\n/**\n * True if the browser's Canvas implementation implements {get,set}LineDash.\n * @type {boolean}\n */\n_ol_has_.CANVAS_LINE_DASH = false;\n\n\n/**\n * True if both the library and browser support Canvas.  Always `false`\n * if `ol.ENABLE_CANVAS` is set to `false` at compile time.\n * @const\n * @type {boolean}\n * @api\n */\n_ol_has_.CANVAS = _ol_.ENABLE_CANVAS && (\n  /**\n   * @return {boolean} Canvas supported.\n   */\n  function() {\n    if (!('HTMLCanvasElement' in window)) {\n      return false;\n    }\n    try {\n      var context = document.createElement('CANVAS').getContext('2d');\n      if (!context) {\n        return false;\n      } else {\n        if (context.setLineDash !== undefined) {\n          _ol_has_.CANVAS_LINE_DASH = true;\n        }\n        return true;\n      }\n    } catch (e) {\n      return false;\n    }\n  })();\n\n\n/**\n * Indicates if DeviceOrientation is supported in the user's browser.\n * @const\n * @type {boolean}\n * @api\n */\n_ol_has_.DEVICE_ORIENTATION = 'DeviceOrientationEvent' in window;\n\n\n/**\n * Is HTML5 geolocation supported in the current browser?\n * @const\n * @type {boolean}\n * @api\n */\n_ol_has_.GEOLOCATION = 'geolocation' in navigator;\n\n\n/**\n * True if browser supports touch events.\n * @const\n * @type {boolean}\n * @api\n */\n_ol_has_.TOUCH = _ol_.ASSUME_TOUCH || 'ontouchstart' in window;\n\n\n/**\n * True if browser supports pointer events.\n * @const\n * @type {boolean}\n */\n_ol_has_.POINTER = 'PointerEvent' in window;\n\n\n/**\n * True if browser supports ms pointer events (IE 10).\n * @const\n * @type {boolean}\n */\n_ol_has_.MSPOINTER = !!(navigator.msPointerEnabled);\n\n\n/**\n * True if both OpenLayers and browser support WebGL.  Always `false`\n * if `ol.ENABLE_WEBGL` is set to `false` at compile time.\n * @const\n * @type {boolean}\n * @api\n */\n_ol_has_.WEBGL;\n\n\n(function() {\n  if (_ol_.ENABLE_WEBGL) {\n    var hasWebGL = false;\n    var textureSize;\n    var /** @type {Array.<string>} */ extensions = [];\n\n    if ('WebGLRenderingContext' in window) {\n      try {\n        var canvas = /** @type {HTMLCanvasElement} */\n            (document.createElement('CANVAS'));\n        var gl = _ol_webgl_.getContext(canvas, {\n          failIfMajorPerformanceCaveat: true\n        });\n        if (gl) {\n          hasWebGL = true;\n          textureSize = /** @type {number} */\n            (gl.getParameter(gl.MAX_TEXTURE_SIZE));\n          extensions = gl.getSupportedExtensions();\n        }\n      } catch (e) {\n        // pass\n      }\n    }\n    _ol_has_.WEBGL = hasWebGL;\n    _ol_.WEBGL_EXTENSIONS = extensions;\n    _ol_.WEBGL_MAX_TEXTURE_SIZE = textureSize;\n  }\n})();\nexport default _ol_has_;\n","/**\n * The coordinate layout for geometries, indicating whether a 3rd or 4th z ('Z')\n * or measure ('M') coordinate is available. Supported values are `'XY'`,\n * `'XYZ'`, `'XYM'`, `'XYZM'`.\n * @enum {string}\n */\nvar _ol_geom_GeometryLayout_ = {\n  XY: 'XY',\n  XYZ: 'XYZ',\n  XYM: 'XYM',\n  XYZM: 'XYZM'\n};\n\nexport default _ol_geom_GeometryLayout_;\n","/**\n * @enum {string}\n */\nvar _ol_interaction_Property_ = {\n  ACTIVE: 'active'\n};\n\nexport default _ol_interaction_Property_;\n","// FIXME factor out key precondition (shift et. al)\n\nimport _ol_ from '../index.js';\nimport _ol_Object_ from '../object.js';\nimport _ol_easing_ from '../easing.js';\nimport _ol_interaction_Property_ from '../interaction/property.js';\nimport _ol_math_ from '../math.js';\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * User actions that change the state of the map. Some are similar to controls,\n * but are not associated with a DOM element.\n * For example, {@link ol.interaction.KeyboardZoom} is functionally the same as\n * {@link ol.control.Zoom}, but triggered by a keyboard event not a button\n * element event.\n * Although interactions do not have a DOM element, some of them do render\n * vectors and so are visible on the screen.\n *\n * @constructor\n * @param {olx.interaction.InteractionOptions} options Options.\n * @extends {ol.Object}\n * @api\n */\nvar _ol_interaction_Interaction_ = function(options) {\n\n  _ol_Object_.call(this);\n\n  /**\n   * @private\n   * @type {ol.PluggableMap}\n   */\n  this.map_ = null;\n\n  this.setActive(true);\n\n  /**\n   * @type {function(ol.MapBrowserEvent):boolean}\n   */\n  this.handleEvent = options.handleEvent;\n\n};\n\n_ol_.inherits(_ol_interaction_Interaction_, _ol_Object_);\n\n\n/**\n * Return whether the interaction is currently active.\n * @return {boolean} `true` if the interaction is active, `false` otherwise.\n * @observable\n * @api\n */\n_ol_interaction_Interaction_.prototype.getActive = function() {\n  return (\n    /** @type {boolean} */ this.get(_ol_interaction_Property_.ACTIVE)\n  );\n};\n\n\n/**\n * Get the map associated with this interaction.\n * @return {ol.PluggableMap} Map.\n * @api\n */\n_ol_interaction_Interaction_.prototype.getMap = function() {\n  return this.map_;\n};\n\n\n/**\n * Activate or deactivate the interaction.\n * @param {boolean} active Active.\n * @observable\n * @api\n */\n_ol_interaction_Interaction_.prototype.setActive = function(active) {\n  this.set(_ol_interaction_Property_.ACTIVE, active);\n};\n\n\n/**\n * Remove the interaction from its current map and attach it to the new map.\n * Subclasses may set up event handlers to get notified about changes to\n * the map here.\n * @param {ol.PluggableMap} map Map.\n */\n_ol_interaction_Interaction_.prototype.setMap = function(map) {\n  this.map_ = map;\n};\n\n\n/**\n * @param {ol.View} view View.\n * @param {ol.Coordinate} delta Delta.\n * @param {number=} opt_duration Duration.\n */\n_ol_interaction_Interaction_.pan = function(view, delta, opt_duration) {\n  var currentCenter = view.getCenter();\n  if (currentCenter) {\n    var center = view.constrainCenter(\n        [currentCenter[0] + delta[0], currentCenter[1] + delta[1]]);\n    if (opt_duration) {\n      view.animate({\n        duration: opt_duration,\n        easing: _ol_easing_.linear,\n        center: center\n      });\n    } else {\n      view.setCenter(center);\n    }\n  }\n};\n\n\n/**\n * @param {ol.View} view View.\n * @param {number|undefined} rotation Rotation.\n * @param {ol.Coordinate=} opt_anchor Anchor coordinate.\n * @param {number=} opt_duration Duration.\n */\n_ol_interaction_Interaction_.rotate = function(view, rotation, opt_anchor, opt_duration) {\n  rotation = view.constrainRotation(rotation, 0);\n  _ol_interaction_Interaction_.rotateWithoutConstraints(\n      view, rotation, opt_anchor, opt_duration);\n};\n\n\n/**\n * @param {ol.View} view View.\n * @param {number|undefined} rotation Rotation.\n * @param {ol.Coordinate=} opt_anchor Anchor coordinate.\n * @param {number=} opt_duration Duration.\n */\n_ol_interaction_Interaction_.rotateWithoutConstraints = function(view, rotation, opt_anchor, opt_duration) {\n  if (rotation !== undefined) {\n    var currentRotation = view.getRotation();\n    var currentCenter = view.getCenter();\n    if (currentRotation !== undefined && currentCenter && opt_duration > 0) {\n      view.animate({\n        rotation: rotation,\n        anchor: opt_anchor,\n        duration: opt_duration,\n        easing: _ol_easing_.easeOut\n      });\n    } else {\n      view.rotate(rotation, opt_anchor);\n    }\n  }\n};\n\n\n/**\n * @param {ol.View} view View.\n * @param {number|undefined} resolution Resolution to go to.\n * @param {ol.Coordinate=} opt_anchor Anchor coordinate.\n * @param {number=} opt_duration Duration.\n * @param {number=} opt_direction Zooming direction; > 0 indicates\n *     zooming out, in which case the constraints system will select\n *     the largest nearest resolution; < 0 indicates zooming in, in\n *     which case the constraints system will select the smallest\n *     nearest resolution; == 0 indicates that the zooming direction\n *     is unknown/not relevant, in which case the constraints system\n *     will select the nearest resolution. If not defined 0 is\n *     assumed.\n */\n_ol_interaction_Interaction_.zoom = function(view, resolution, opt_anchor, opt_duration, opt_direction) {\n  resolution = view.constrainResolution(resolution, 0, opt_direction);\n  _ol_interaction_Interaction_.zoomWithoutConstraints(\n      view, resolution, opt_anchor, opt_duration);\n};\n\n\n/**\n * @param {ol.View} view View.\n * @param {number} delta Delta from previous zoom level.\n * @param {ol.Coordinate=} opt_anchor Anchor coordinate.\n * @param {number=} opt_duration Duration.\n */\n_ol_interaction_Interaction_.zoomByDelta = function(view, delta, opt_anchor, opt_duration) {\n  var currentResolution = view.getResolution();\n  var resolution = view.constrainResolution(currentResolution, delta, 0);\n\n  if (resolution !== undefined) {\n    var resolutions = view.getResolutions();\n    resolution = _ol_math_.clamp(\n        resolution,\n        view.getMinResolution() || resolutions[resolutions.length - 1],\n        view.getMaxResolution() || resolutions[0]);\n  }\n\n  // If we have a constraint on center, we need to change the anchor so that the\n  // new center is within the extent. We first calculate the new center, apply\n  // the constraint to it, and then calculate back the anchor\n  if (opt_anchor && resolution !== undefined && resolution !== currentResolution) {\n    var currentCenter = view.getCenter();\n    var center = view.calculateCenterZoom(resolution, opt_anchor);\n    center = view.constrainCenter(center);\n\n    opt_anchor = [\n      (resolution * currentCenter[0] - currentResolution * center[0]) /\n          (resolution - currentResolution),\n      (resolution * currentCenter[1] - currentResolution * center[1]) /\n          (resolution - currentResolution)\n    ];\n  }\n\n  _ol_interaction_Interaction_.zoomWithoutConstraints(\n      view, resolution, opt_anchor, opt_duration);\n};\n\n\n/**\n * @param {ol.View} view View.\n * @param {number|undefined} resolution Resolution to go to.\n * @param {ol.Coordinate=} opt_anchor Anchor coordinate.\n * @param {number=} opt_duration Duration.\n */\n_ol_interaction_Interaction_.zoomWithoutConstraints = function(view, resolution, opt_anchor, opt_duration) {\n  if (resolution) {\n    var currentResolution = view.getResolution();\n    var currentCenter = view.getCenter();\n    if (currentResolution !== undefined && currentCenter &&\n        resolution !== currentResolution && opt_duration) {\n      view.animate({\n        resolution: resolution,\n        anchor: opt_anchor,\n        duration: opt_duration,\n        easing: _ol_easing_.easeOut\n      });\n    } else {\n      if (opt_anchor) {\n        var center = view.calculateCenterZoom(resolution, opt_anchor);\n        view.setCenter(center);\n      }\n      view.setResolution(resolution);\n    }\n  }\n};\nexport default _ol_interaction_Interaction_;\n","/**\n * @license\n * Latitude/longitude spherical geodesy formulae taken from\n * http://www.movable-type.co.uk/scripts/latlong.html\n * Licensed under CC-BY-3.0.\n */\n\nimport _ol_math_ from './math.js';\nimport _ol_geom_GeometryType_ from './geom/geometrytype.js';\n\n/**\n * @classdesc\n * Class to create objects that can be used with {@link\n * ol.geom.Polygon.circular}.\n *\n * For example to create a sphere whose radius is equal to the semi-major\n * axis of the WGS84 ellipsoid:\n *\n * ```js\n * var wgs84Sphere= new ol.Sphere(6378137);\n * ```\n *\n * @constructor\n * @param {number} radius Radius.\n * @api\n */\nvar _ol_Sphere_ = function(radius) {\n\n  /**\n   * @type {number}\n   */\n  this.radius = radius;\n\n};\n\n\n/**\n * Returns the geodesic area for a list of coordinates.\n *\n * [Reference](https://trs-new.jpl.nasa.gov/handle/2014/40409)\n * Robert. G. Chamberlain and William H. Duquette, \"Some Algorithms for\n * Polygons on a Sphere\", JPL Publication 07-03, Jet Propulsion\n * Laboratory, Pasadena, CA, June 2007\n *\n * @param {Array.<ol.Coordinate>} coordinates List of coordinates of a linear\n * ring. If the ring is oriented clockwise, the area will be positive,\n * otherwise it will be negative.\n * @return {number} Area.\n * @api\n */\n_ol_Sphere_.prototype.geodesicArea = function(coordinates) {\n  return _ol_Sphere_.getArea_(coordinates, this.radius);\n};\n\n\n/**\n * Returns the distance from c1 to c2 using the haversine formula.\n *\n * @param {ol.Coordinate} c1 Coordinate 1.\n * @param {ol.Coordinate} c2 Coordinate 2.\n * @return {number} Haversine distance.\n * @api\n */\n_ol_Sphere_.prototype.haversineDistance = function(c1, c2) {\n  return _ol_Sphere_.getDistance_(c1, c2, this.radius);\n};\n\n\n/**\n * Returns the coordinate at the given distance and bearing from `c1`.\n *\n * @param {ol.Coordinate} c1 The origin point (`[lon, lat]` in degrees).\n * @param {number} distance The great-circle distance between the origin\n *     point and the target point.\n * @param {number} bearing The bearing (in radians).\n * @return {ol.Coordinate} The target point.\n */\n_ol_Sphere_.prototype.offset = function(c1, distance, bearing) {\n  var lat1 = _ol_math_.toRadians(c1[1]);\n  var lon1 = _ol_math_.toRadians(c1[0]);\n  var dByR = distance / this.radius;\n  var lat = Math.asin(\n      Math.sin(lat1) * Math.cos(dByR) +\n      Math.cos(lat1) * Math.sin(dByR) * Math.cos(bearing));\n  var lon = lon1 + Math.atan2(\n      Math.sin(bearing) * Math.sin(dByR) * Math.cos(lat1),\n      Math.cos(dByR) - Math.sin(lat1) * Math.sin(lat));\n  return [_ol_math_.toDegrees(lon), _ol_math_.toDegrees(lat)];\n};\n\n\n/**\n * The mean Earth radius (1/3 * (2a + b)) for the WGS84 ellipsoid.\n * https://en.wikipedia.org/wiki/Earth_radius#Mean_radius\n * @type {number}\n */\n_ol_Sphere_.DEFAULT_RADIUS = 6371008.8;\n\n\n/**\n * Get the spherical length of a geometry.  This length is the sum of the\n * great circle distances between coordinates.  For polygons, the length is\n * the sum of all rings.  For points, the length is zero.  For multi-part\n * geometries, the length is the sum of the length of each part.\n * @param {ol.geom.Geometry} geometry A geometry.\n * @param {olx.SphereMetricOptions=} opt_options Options for the length\n *     calculation.  By default, geometries are assumed to be in 'EPSG:3857'.\n *     You can change this by providing a `projection` option.\n * @return {number} The spherical length (in meters).\n * @api\n */\n_ol_Sphere_.getLength = function(geometry, opt_options) {\n  var options = opt_options || {};\n  var radius = options.radius || _ol_Sphere_.DEFAULT_RADIUS;\n  var projection = options.projection || 'EPSG:3857';\n  geometry = geometry.clone().transform(projection, 'EPSG:4326');\n  var type = geometry.getType();\n  var length = 0;\n  var coordinates, coords, i, ii, j, jj;\n  switch (type) {\n    case _ol_geom_GeometryType_.POINT:\n    case _ol_geom_GeometryType_.MULTI_POINT: {\n      break;\n    }\n    case _ol_geom_GeometryType_.LINE_STRING:\n    case _ol_geom_GeometryType_.LINEAR_RING: {\n      coordinates = /** @type {ol.geom.SimpleGeometry} */ (geometry).getCoordinates();\n      length = _ol_Sphere_.getLength_(coordinates, radius);\n      break;\n    }\n    case _ol_geom_GeometryType_.MULTI_LINE_STRING:\n    case _ol_geom_GeometryType_.POLYGON: {\n      coordinates = /** @type {ol.geom.SimpleGeometry} */ (geometry).getCoordinates();\n      for (i = 0, ii = coordinates.length; i < ii; ++i) {\n        length += _ol_Sphere_.getLength_(coordinates[i], radius);\n      }\n      break;\n    }\n    case _ol_geom_GeometryType_.MULTI_POLYGON: {\n      coordinates = /** @type {ol.geom.SimpleGeometry} */ (geometry).getCoordinates();\n      for (i = 0, ii = coordinates.length; i < ii; ++i) {\n        coords = coordinates[i];\n        for (j = 0, jj = coords.length; j < jj; ++j) {\n          length += _ol_Sphere_.getLength_(coords[j], radius);\n        }\n      }\n      break;\n    }\n    case _ol_geom_GeometryType_.GEOMETRY_COLLECTION: {\n      var geometries = /** @type {ol.geom.GeometryCollection} */ (geometry).getGeometries();\n      for (i = 0, ii = geometries.length; i < ii; ++i) {\n        length += _ol_Sphere_.getLength(geometries[i], opt_options);\n      }\n      break;\n    }\n    default: {\n      throw new Error('Unsupported geometry type: ' + type);\n    }\n  }\n  return length;\n};\n\n\n/**\n * Get the cumulative great circle length of linestring coordinates (geographic).\n * @param {Array} coordinates Linestring coordinates.\n * @param {number} radius The sphere radius to use.\n * @return {number} The length (in meters).\n */\n_ol_Sphere_.getLength_ = function(coordinates, radius) {\n  var length = 0;\n  for (var i = 0, ii = coordinates.length; i < ii - 1; ++i) {\n    length += _ol_Sphere_.getDistance_(coordinates[i], coordinates[i + 1], radius);\n  }\n  return length;\n};\n\n\n/**\n * Get the great circle distance between two geographic coordinates.\n * @param {Array} c1 Starting coordinate.\n * @param {Array} c2 Ending coordinate.\n * @param {number} radius The sphere radius to use.\n * @return {number} The great circle distance between the points (in meters).\n */\n_ol_Sphere_.getDistance_ = function(c1, c2, radius) {\n  var lat1 = _ol_math_.toRadians(c1[1]);\n  var lat2 = _ol_math_.toRadians(c2[1]);\n  var deltaLatBy2 = (lat2 - lat1) / 2;\n  var deltaLonBy2 = _ol_math_.toRadians(c2[0] - c1[0]) / 2;\n  var a = Math.sin(deltaLatBy2) * Math.sin(deltaLatBy2) +\n      Math.sin(deltaLonBy2) * Math.sin(deltaLonBy2) *\n      Math.cos(lat1) * Math.cos(lat2);\n  return 2 * radius * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n};\n\n\n/**\n * Get the spherical area of a geometry.  This is the area (in meters) assuming\n * that polygon edges are segments of great circles on a sphere.\n * @param {ol.geom.Geometry} geometry A geometry.\n * @param {olx.SphereMetricOptions=} opt_options Options for the area\n *     calculation.  By default, geometries are assumed to be in 'EPSG:3857'.\n *     You can change this by providing a `projection` option.\n * @return {number} The spherical area (in square meters).\n * @api\n */\n_ol_Sphere_.getArea = function(geometry, opt_options) {\n  var options = opt_options || {};\n  var radius = options.radius || _ol_Sphere_.DEFAULT_RADIUS;\n  var projection = options.projection || 'EPSG:3857';\n  geometry = geometry.clone().transform(projection, 'EPSG:4326');\n  var type = geometry.getType();\n  var area = 0;\n  var coordinates, coords, i, ii, j, jj;\n  switch (type) {\n    case _ol_geom_GeometryType_.POINT:\n    case _ol_geom_GeometryType_.MULTI_POINT:\n    case _ol_geom_GeometryType_.LINE_STRING:\n    case _ol_geom_GeometryType_.MULTI_LINE_STRING:\n    case _ol_geom_GeometryType_.LINEAR_RING: {\n      break;\n    }\n    case _ol_geom_GeometryType_.POLYGON: {\n      coordinates = /** @type {ol.geom.Polygon} */ (geometry).getCoordinates();\n      area = Math.abs(_ol_Sphere_.getArea_(coordinates[0], radius));\n      for (i = 1, ii = coordinates.length; i < ii; ++i) {\n        area -= Math.abs(_ol_Sphere_.getArea_(coordinates[i], radius));\n      }\n      break;\n    }\n    case _ol_geom_GeometryType_.MULTI_POLYGON: {\n      coordinates = /** @type {ol.geom.SimpleGeometry} */ (geometry).getCoordinates();\n      for (i = 0, ii = coordinates.length; i < ii; ++i) {\n        coords = coordinates[i];\n        area += Math.abs(_ol_Sphere_.getArea_(coords[0], radius));\n        for (j = 1, jj = coords.length; j < jj; ++j) {\n          area -= Math.abs(_ol_Sphere_.getArea_(coords[j], radius));\n        }\n      }\n      break;\n    }\n    case _ol_geom_GeometryType_.GEOMETRY_COLLECTION: {\n      var geometries = /** @type {ol.geom.GeometryCollection} */ (geometry).getGeometries();\n      for (i = 0, ii = geometries.length; i < ii; ++i) {\n        area += _ol_Sphere_.getArea(geometries[i], opt_options);\n      }\n      break;\n    }\n    default: {\n      throw new Error('Unsupported geometry type: ' + type);\n    }\n  }\n  return area;\n};\n\n\n/**\n * Returns the spherical area for a list of coordinates.\n *\n * [Reference](https://trs-new.jpl.nasa.gov/handle/2014/40409)\n * Robert. G. Chamberlain and William H. Duquette, \"Some Algorithms for\n * Polygons on a Sphere\", JPL Publication 07-03, Jet Propulsion\n * Laboratory, Pasadena, CA, June 2007\n *\n * @param {Array.<ol.Coordinate>} coordinates List of coordinates of a linear\n * ring. If the ring is oriented clockwise, the area will be positive,\n * otherwise it will be negative.\n * @param {number} radius The sphere radius.\n * @return {number} Area (in square meters).\n */\n_ol_Sphere_.getArea_ = function(coordinates, radius) {\n  var area = 0, len = coordinates.length;\n  var x1 = coordinates[len - 1][0];\n  var y1 = coordinates[len - 1][1];\n  for (var i = 0; i < len; i++) {\n    var x2 = coordinates[i][0], y2 = coordinates[i][1];\n    area += _ol_math_.toRadians(x2 - x1) *\n        (2 + Math.sin(_ol_math_.toRadians(y1)) +\n        Math.sin(_ol_math_.toRadians(y2)));\n    x1 = x2;\n    y1 = y2;\n  }\n  return area * radius * radius / 2.0;\n};\nexport default _ol_Sphere_;\n","import _ol_ from '../index.js';\nimport _ol_math_ from '../math.js';\nimport _ol_proj_Projection_ from '../proj/projection.js';\nimport _ol_proj_Units_ from '../proj/units.js';\nvar _ol_proj_EPSG3857_ = {};\n\n\n/**\n * @classdesc\n * Projection object for web/spherical Mercator (EPSG:3857).\n *\n * @constructor\n * @extends {ol.proj.Projection}\n * @param {string} code Code.\n * @private\n */\n_ol_proj_EPSG3857_.Projection_ = function(code) {\n  _ol_proj_Projection_.call(this, {\n    code: code,\n    units: _ol_proj_Units_.METERS,\n    extent: _ol_proj_EPSG3857_.EXTENT,\n    global: true,\n    worldExtent: _ol_proj_EPSG3857_.WORLD_EXTENT,\n    getPointResolution: function(resolution, point) {\n      return resolution / _ol_math_.cosh(point[1] / _ol_proj_EPSG3857_.RADIUS);\n    }\n  });\n};\n_ol_.inherits(_ol_proj_EPSG3857_.Projection_, _ol_proj_Projection_);\n\n\n/**\n * Radius of WGS84 sphere\n *\n * @const\n * @type {number}\n */\n_ol_proj_EPSG3857_.RADIUS = 6378137;\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_proj_EPSG3857_.HALF_SIZE = Math.PI * _ol_proj_EPSG3857_.RADIUS;\n\n\n/**\n * @const\n * @type {ol.Extent}\n */\n_ol_proj_EPSG3857_.EXTENT = [\n  -_ol_proj_EPSG3857_.HALF_SIZE, -_ol_proj_EPSG3857_.HALF_SIZE,\n  _ol_proj_EPSG3857_.HALF_SIZE, _ol_proj_EPSG3857_.HALF_SIZE\n];\n\n\n/**\n * @const\n * @type {ol.Extent}\n */\n_ol_proj_EPSG3857_.WORLD_EXTENT = [-180, -85, 180, 85];\n\n\n/**\n * Projections equal to EPSG:3857.\n *\n * @const\n * @type {Array.<ol.proj.Projection>}\n */\n_ol_proj_EPSG3857_.PROJECTIONS = [\n  new _ol_proj_EPSG3857_.Projection_('EPSG:3857'),\n  new _ol_proj_EPSG3857_.Projection_('EPSG:102100'),\n  new _ol_proj_EPSG3857_.Projection_('EPSG:102113'),\n  new _ol_proj_EPSG3857_.Projection_('EPSG:900913'),\n  new _ol_proj_EPSG3857_.Projection_('urn:ogc:def:crs:EPSG:6.18:3:3857'),\n  new _ol_proj_EPSG3857_.Projection_('urn:ogc:def:crs:EPSG::3857'),\n  new _ol_proj_EPSG3857_.Projection_('http://www.opengis.net/gml/srs/epsg.xml#3857')\n];\n\n\n/**\n * Transformation from EPSG:4326 to EPSG:3857.\n *\n * @param {Array.<number>} input Input array of coordinate values.\n * @param {Array.<number>=} opt_output Output array of coordinate values.\n * @param {number=} opt_dimension Dimension (default is `2`).\n * @return {Array.<number>} Output array of coordinate values.\n */\n_ol_proj_EPSG3857_.fromEPSG4326 = function(input, opt_output, opt_dimension) {\n  var length = input.length,\n      dimension = opt_dimension > 1 ? opt_dimension : 2,\n      output = opt_output;\n  if (output === undefined) {\n    if (dimension > 2) {\n      // preserve values beyond second dimension\n      output = input.slice();\n    } else {\n      output = new Array(length);\n    }\n  }\n  var halfSize = _ol_proj_EPSG3857_.HALF_SIZE;\n  for (var i = 0; i < length; i += dimension) {\n    output[i] = halfSize * input[i] / 180;\n    var y = _ol_proj_EPSG3857_.RADIUS *\n        Math.log(Math.tan(Math.PI * (input[i + 1] + 90) / 360));\n    if (y > halfSize) {\n      y = halfSize;\n    } else if (y < -halfSize) {\n      y = -halfSize;\n    }\n    output[i + 1] = y;\n  }\n  return output;\n};\n\n\n/**\n * Transformation from EPSG:3857 to EPSG:4326.\n *\n * @param {Array.<number>} input Input array of coordinate values.\n * @param {Array.<number>=} opt_output Output array of coordinate values.\n * @param {number=} opt_dimension Dimension (default is `2`).\n * @return {Array.<number>} Output array of coordinate values.\n */\n_ol_proj_EPSG3857_.toEPSG4326 = function(input, opt_output, opt_dimension) {\n  var length = input.length,\n      dimension = opt_dimension > 1 ? opt_dimension : 2,\n      output = opt_output;\n  if (output === undefined) {\n    if (dimension > 2) {\n      // preserve values beyond second dimension\n      output = input.slice();\n    } else {\n      output = new Array(length);\n    }\n  }\n  for (var i = 0; i < length; i += dimension) {\n    output[i] = 180 * input[i] / _ol_proj_EPSG3857_.HALF_SIZE;\n    output[i + 1] = 360 * Math.atan(\n        Math.exp(input[i + 1] / _ol_proj_EPSG3857_.RADIUS)) / Math.PI - 90;\n  }\n  return output;\n};\nexport default _ol_proj_EPSG3857_;\n","import _ol_ from '../index.js';\nimport _ol_proj_Projection_ from '../proj/projection.js';\nimport _ol_proj_Units_ from '../proj/units.js';\nvar _ol_proj_EPSG4326_ = {};\n\n\n/**\n * @classdesc\n * Projection object for WGS84 geographic coordinates (EPSG:4326).\n *\n * Note that OpenLayers does not strictly comply with the EPSG definition.\n * The EPSG registry defines 4326 as a CRS for Latitude,Longitude (y,x).\n * OpenLayers treats EPSG:4326 as a pseudo-projection, with x,y coordinates.\n *\n * @constructor\n * @extends {ol.proj.Projection}\n * @param {string} code Code.\n * @param {string=} opt_axisOrientation Axis orientation.\n * @private\n */\n_ol_proj_EPSG4326_.Projection_ = function(code, opt_axisOrientation) {\n  _ol_proj_Projection_.call(this, {\n    code: code,\n    units: _ol_proj_Units_.DEGREES,\n    extent: _ol_proj_EPSG4326_.EXTENT,\n    axisOrientation: opt_axisOrientation,\n    global: true,\n    metersPerUnit: _ol_proj_EPSG4326_.METERS_PER_UNIT,\n    worldExtent: _ol_proj_EPSG4326_.EXTENT\n  });\n};\n_ol_.inherits(_ol_proj_EPSG4326_.Projection_, _ol_proj_Projection_);\n\n\n/**\n * Radius of WGS84 sphere\n *\n * @const\n * @type {number}\n */\n_ol_proj_EPSG4326_.RADIUS = 6378137;\n\n\n/**\n * Extent of the EPSG:4326 projection which is the whole world.\n *\n * @const\n * @type {ol.Extent}\n */\n_ol_proj_EPSG4326_.EXTENT = [-180, -90, 180, 90];\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_proj_EPSG4326_.METERS_PER_UNIT = Math.PI * _ol_proj_EPSG4326_.RADIUS / 180;\n\n\n/**\n * Projections equal to EPSG:4326.\n *\n * @const\n * @type {Array.<ol.proj.Projection>}\n */\n_ol_proj_EPSG4326_.PROJECTIONS = [\n  new _ol_proj_EPSG4326_.Projection_('CRS:84'),\n  new _ol_proj_EPSG4326_.Projection_('EPSG:4326', 'neu'),\n  new _ol_proj_EPSG4326_.Projection_('urn:ogc:def:crs:EPSG::4326', 'neu'),\n  new _ol_proj_EPSG4326_.Projection_('urn:ogc:def:crs:EPSG:6.6:4326', 'neu'),\n  new _ol_proj_EPSG4326_.Projection_('urn:ogc:def:crs:OGC:1.3:CRS84'),\n  new _ol_proj_EPSG4326_.Projection_('urn:ogc:def:crs:OGC:2:84'),\n  new _ol_proj_EPSG4326_.Projection_('http://www.opengis.net/gml/srs/epsg.xml#4326', 'neu'),\n  new _ol_proj_EPSG4326_.Projection_('urn:x-ogc:def:crs:EPSG:4326', 'neu')\n];\nexport default _ol_proj_EPSG4326_;\n","var _ol_proj_projections_ = {};\n\n\n/**\n * @private\n * @type {Object.<string, ol.proj.Projection>}\n */\n_ol_proj_projections_.cache_ = {};\n\n\n/**\n * Clear the projections cache.\n */\n_ol_proj_projections_.clear = function() {\n  _ol_proj_projections_.cache_ = {};\n};\n\n\n/**\n * Get a cached projection by code.\n * @param {string} code The code for the projection.\n * @return {ol.proj.Projection} The projection (if cached).\n */\n_ol_proj_projections_.get = function(code) {\n  var projections = _ol_proj_projections_.cache_;\n  return projections[code] || null;\n};\n\n\n/**\n * Add a projection to the cache.\n * @param {string} code The projection code.\n * @param {ol.proj.Projection} projection The projection to cache.\n */\n_ol_proj_projections_.add = function(code, projection) {\n  var projections = _ol_proj_projections_.cache_;\n  projections[code] = projection;\n};\nexport default _ol_proj_projections_;\n","import _ol_obj_ from '../obj.js';\nvar _ol_proj_transforms_ = {};\n\n\n/**\n * @private\n * @type {Object.<string, Object.<string, ol.TransformFunction>>}\n */\n_ol_proj_transforms_.cache_ = {};\n\n\n/**\n * Clear the transform cache.\n */\n_ol_proj_transforms_.clear = function() {\n  _ol_proj_transforms_.cache_ = {};\n};\n\n\n/**\n * Registers a conversion function to convert coordinates from the source\n * projection to the destination projection.\n *\n * @param {ol.proj.Projection} source Source.\n * @param {ol.proj.Projection} destination Destination.\n * @param {ol.TransformFunction} transformFn Transform.\n */\n_ol_proj_transforms_.add = function(source, destination, transformFn) {\n  var sourceCode = source.getCode();\n  var destinationCode = destination.getCode();\n  var transforms = _ol_proj_transforms_.cache_;\n  if (!(sourceCode in transforms)) {\n    transforms[sourceCode] = {};\n  }\n  transforms[sourceCode][destinationCode] = transformFn;\n};\n\n\n/**\n * Unregisters the conversion function to convert coordinates from the source\n * projection to the destination projection.  This method is used to clean up\n * cached transforms during testing.\n *\n * @param {ol.proj.Projection} source Source projection.\n * @param {ol.proj.Projection} destination Destination projection.\n * @return {ol.TransformFunction} transformFn The unregistered transform.\n */\n_ol_proj_transforms_.remove = function(source, destination) {\n  var sourceCode = source.getCode();\n  var destinationCode = destination.getCode();\n  var transforms = _ol_proj_transforms_.cache_;\n  var transform = transforms[sourceCode][destinationCode];\n  delete transforms[sourceCode][destinationCode];\n  if (_ol_obj_.isEmpty(transforms[sourceCode])) {\n    delete transforms[sourceCode];\n  }\n  return transform;\n};\n\n\n/**\n * Get a transform given a source code and a destination code.\n * @param {string} sourceCode The code for the source projection.\n * @param {string} destinationCode The code for the destination projection.\n * @return {ol.TransformFunction|undefined} The transform function (if found).\n */\n_ol_proj_transforms_.get = function(sourceCode, destinationCode) {\n  var transform;\n  var transforms = _ol_proj_transforms_.cache_;\n  if (sourceCode in transforms && destinationCode in transforms[sourceCode]) {\n    transform = transforms[sourceCode][destinationCode];\n  }\n  return transform;\n};\nexport default _ol_proj_transforms_;\n","import _ol_ from './index.js';\nimport _ol_Sphere_ from './sphere.js';\nimport _ol_extent_ from './extent.js';\nimport _ol_math_ from './math.js';\nimport _ol_proj_EPSG3857_ from './proj/epsg3857.js';\nimport _ol_proj_EPSG4326_ from './proj/epsg4326.js';\nimport _ol_proj_Projection_ from './proj/projection.js';\nimport _ol_proj_Units_ from './proj/units.js';\nimport _ol_proj_proj4_ from './proj/proj4.js';\nimport _ol_proj_projections_ from './proj/projections.js';\nimport _ol_proj_transforms_ from './proj/transforms.js';\nvar _ol_proj_ = {};\n\n\n/**\n * Meters per unit lookup table.\n * @const\n * @type {Object.<ol.proj.Units, number>}\n * @api\n */\n_ol_proj_.METERS_PER_UNIT = _ol_proj_Units_.METERS_PER_UNIT;\n\n\n/**\n * A place to store the mean radius of the Earth.\n * @private\n * @type {ol.Sphere}\n */\n_ol_proj_.SPHERE_ = new _ol_Sphere_(_ol_Sphere_.DEFAULT_RADIUS);\n\n\nif (_ol_.ENABLE_PROJ4JS) {\n  /**\n   * Register proj4. If not explicitly registered, it will be assumed that\n   * proj4js will be loaded in the global namespace. For example in a\n   * browserify ES6 environment you could use:\n   *\n   *     import ol from 'openlayers';\n   *     import proj4 from 'proj4';\n   *     ol.proj.setProj4(proj4);\n   *\n   * @param {Proj4} proj4 Proj4.\n   * @api\n   */\n  _ol_proj_.setProj4 = function(proj4) {\n    _ol_proj_proj4_.set(proj4);\n  };\n}\n\n\n/**\n * Get the resolution of the point in degrees or distance units.\n * For projections with degrees as the unit this will simply return the\n * provided resolution. For other projections the point resolution is\n * by default estimated by transforming the 'point' pixel to EPSG:4326,\n * measuring its width and height on the normal sphere,\n * and taking the average of the width and height.\n * A custom function can be provided for a specific projection, either\n * by setting the `getPointResolution` option in the\n * {@link ol.proj.Projection} constructor or by using\n * {@link ol.proj.Projection#setGetPointResolution} to change an existing\n * projection object.\n * @param {ol.ProjectionLike} projection The projection.\n * @param {number} resolution Nominal resolution in projection units.\n * @param {ol.Coordinate} point Point to find adjusted resolution at.\n * @param {ol.proj.Units=} opt_units Units to get the point resolution in.\n * Default is the projection's units.\n * @return {number} Point resolution.\n * @api\n */\n_ol_proj_.getPointResolution = function(projection, resolution, point, opt_units) {\n  projection = _ol_proj_.get(projection);\n  var pointResolution;\n  var getter = projection.getPointResolutionFunc();\n  if (getter) {\n    pointResolution = getter(resolution, point);\n  } else {\n    var units = projection.getUnits();\n    if (units == _ol_proj_Units_.DEGREES && !opt_units || opt_units == _ol_proj_Units_.DEGREES) {\n      pointResolution = resolution;\n    } else {\n      // Estimate point resolution by transforming the center pixel to EPSG:4326,\n      // measuring its width and height on the normal sphere, and taking the\n      // average of the width and height.\n      var toEPSG4326 = _ol_proj_.getTransformFromProjections(projection, _ol_proj_.get('EPSG:4326'));\n      var vertices = [\n        point[0] - resolution / 2, point[1],\n        point[0] + resolution / 2, point[1],\n        point[0], point[1] - resolution / 2,\n        point[0], point[1] + resolution / 2\n      ];\n      vertices = toEPSG4326(vertices, vertices, 2);\n      var width = _ol_proj_.SPHERE_.haversineDistance(\n          vertices.slice(0, 2), vertices.slice(2, 4));\n      var height = _ol_proj_.SPHERE_.haversineDistance(\n          vertices.slice(4, 6), vertices.slice(6, 8));\n      pointResolution = (width + height) / 2;\n      var metersPerUnit = opt_units ?\n        _ol_proj_Units_.METERS_PER_UNIT[opt_units] :\n        projection.getMetersPerUnit();\n      if (metersPerUnit !== undefined) {\n        pointResolution /= metersPerUnit;\n      }\n    }\n  }\n  return pointResolution;\n};\n\n\n/**\n * Registers transformation functions that don't alter coordinates. Those allow\n * to transform between projections with equal meaning.\n *\n * @param {Array.<ol.proj.Projection>} projections Projections.\n * @api\n */\n_ol_proj_.addEquivalentProjections = function(projections) {\n  _ol_proj_.addProjections(projections);\n  projections.forEach(function(source) {\n    projections.forEach(function(destination) {\n      if (source !== destination) {\n        _ol_proj_transforms_.add(source, destination, _ol_proj_.cloneTransform);\n      }\n    });\n  });\n};\n\n\n/**\n * Registers transformation functions to convert coordinates in any projection\n * in projection1 to any projection in projection2.\n *\n * @param {Array.<ol.proj.Projection>} projections1 Projections with equal\n *     meaning.\n * @param {Array.<ol.proj.Projection>} projections2 Projections with equal\n *     meaning.\n * @param {ol.TransformFunction} forwardTransform Transformation from any\n *   projection in projection1 to any projection in projection2.\n * @param {ol.TransformFunction} inverseTransform Transform from any projection\n *   in projection2 to any projection in projection1..\n */\n_ol_proj_.addEquivalentTransforms = function(projections1, projections2, forwardTransform, inverseTransform) {\n  projections1.forEach(function(projection1) {\n    projections2.forEach(function(projection2) {\n      _ol_proj_transforms_.add(projection1, projection2, forwardTransform);\n      _ol_proj_transforms_.add(projection2, projection1, inverseTransform);\n    });\n  });\n};\n\n\n/**\n * Add a Projection object to the list of supported projections that can be\n * looked up by their code.\n *\n * @param {ol.proj.Projection} projection Projection instance.\n * @api\n */\n_ol_proj_.addProjection = function(projection) {\n  _ol_proj_projections_.add(projection.getCode(), projection);\n  _ol_proj_transforms_.add(projection, projection, _ol_proj_.cloneTransform);\n};\n\n\n/**\n * @param {Array.<ol.proj.Projection>} projections Projections.\n */\n_ol_proj_.addProjections = function(projections) {\n  projections.forEach(_ol_proj_.addProjection);\n};\n\n\n/**\n * Clear all cached projections and transforms.\n */\n_ol_proj_.clearAllProjections = function() {\n  _ol_proj_projections_.clear();\n  _ol_proj_transforms_.clear();\n};\n\n\n/**\n * @param {ol.proj.Projection|string|undefined} projection Projection.\n * @param {string} defaultCode Default code.\n * @return {ol.proj.Projection} Projection.\n */\n_ol_proj_.createProjection = function(projection, defaultCode) {\n  if (!projection) {\n    return _ol_proj_.get(defaultCode);\n  } else if (typeof projection === 'string') {\n    return _ol_proj_.get(projection);\n  } else {\n    return /** @type {ol.proj.Projection} */ (projection);\n  }\n};\n\n\n/**\n * Registers coordinate transform functions to convert coordinates between the\n * source projection and the destination projection.\n * The forward and inverse functions convert coordinate pairs; this function\n * converts these into the functions used internally which also handle\n * extents and coordinate arrays.\n *\n * @param {ol.ProjectionLike} source Source projection.\n * @param {ol.ProjectionLike} destination Destination projection.\n * @param {function(ol.Coordinate): ol.Coordinate} forward The forward transform\n *     function (that is, from the source projection to the destination\n *     projection) that takes a {@link ol.Coordinate} as argument and returns\n *     the transformed {@link ol.Coordinate}.\n * @param {function(ol.Coordinate): ol.Coordinate} inverse The inverse transform\n *     function (that is, from the destination projection to the source\n *     projection) that takes a {@link ol.Coordinate} as argument and returns\n *     the transformed {@link ol.Coordinate}.\n * @api\n */\n_ol_proj_.addCoordinateTransforms = function(source, destination, forward, inverse) {\n  var sourceProj = _ol_proj_.get(source);\n  var destProj = _ol_proj_.get(destination);\n  _ol_proj_transforms_.add(sourceProj, destProj,\n      _ol_proj_.createTransformFromCoordinateTransform(forward));\n  _ol_proj_transforms_.add(destProj, sourceProj,\n      _ol_proj_.createTransformFromCoordinateTransform(inverse));\n};\n\n\n/**\n * Creates a {@link ol.TransformFunction} from a simple 2D coordinate transform\n * function.\n * @param {function(ol.Coordinate): ol.Coordinate} transform Coordinate\n *     transform.\n * @return {ol.TransformFunction} Transform function.\n */\n_ol_proj_.createTransformFromCoordinateTransform = function(transform) {\n  return (\n    /**\n     * @param {Array.<number>} input Input.\n     * @param {Array.<number>=} opt_output Output.\n     * @param {number=} opt_dimension Dimension.\n     * @return {Array.<number>} Output.\n     */\n    function(input, opt_output, opt_dimension) {\n      var length = input.length;\n      var dimension = opt_dimension !== undefined ? opt_dimension : 2;\n      var output = opt_output !== undefined ? opt_output : new Array(length);\n      var point, i, j;\n      for (i = 0; i < length; i += dimension) {\n        point = transform([input[i], input[i + 1]]);\n        output[i] = point[0];\n        output[i + 1] = point[1];\n        for (j = dimension - 1; j >= 2; --j) {\n          output[i + j] = input[i + j];\n        }\n      }\n      return output;\n    });\n};\n\n\n/**\n * Transforms a coordinate from longitude/latitude to a different projection.\n * @param {ol.Coordinate} coordinate Coordinate as longitude and latitude, i.e.\n *     an array with longitude as 1st and latitude as 2nd element.\n * @param {ol.ProjectionLike=} opt_projection Target projection. The\n *     default is Web Mercator, i.e. 'EPSG:3857'.\n * @return {ol.Coordinate} Coordinate projected to the target projection.\n * @api\n */\n_ol_proj_.fromLonLat = function(coordinate, opt_projection) {\n  return _ol_proj_.transform(coordinate, 'EPSG:4326',\n      opt_projection !== undefined ? opt_projection : 'EPSG:3857');\n};\n\n\n/**\n * Transforms a coordinate to longitude/latitude.\n * @param {ol.Coordinate} coordinate Projected coordinate.\n * @param {ol.ProjectionLike=} opt_projection Projection of the coordinate.\n *     The default is Web Mercator, i.e. 'EPSG:3857'.\n * @return {ol.Coordinate} Coordinate as longitude and latitude, i.e. an array\n *     with longitude as 1st and latitude as 2nd element.\n * @api\n */\n_ol_proj_.toLonLat = function(coordinate, opt_projection) {\n  var lonLat = _ol_proj_.transform(coordinate,\n      opt_projection !== undefined ? opt_projection : 'EPSG:3857', 'EPSG:4326');\n  var lon = lonLat[0];\n  if (lon < -180 || lon > 180) {\n    lonLat[0] = _ol_math_.modulo(lon + 180, 360) - 180;\n  }\n  return lonLat;\n};\n\n\n/**\n * Fetches a Projection object for the code specified.\n *\n * @param {ol.ProjectionLike} projectionLike Either a code string which is\n *     a combination of authority and identifier such as \"EPSG:4326\", or an\n *     existing projection object, or undefined.\n * @return {ol.proj.Projection} Projection object, or null if not in list.\n * @api\n */\n_ol_proj_.get = function(projectionLike) {\n  var projection = null;\n  if (projectionLike instanceof _ol_proj_Projection_) {\n    projection = projectionLike;\n  } else if (typeof projectionLike === 'string') {\n    var code = projectionLike;\n    projection = _ol_proj_projections_.get(code);\n    if (_ol_.ENABLE_PROJ4JS && !projection) {\n      var proj4js = _ol_proj_proj4_.get();\n      if (typeof proj4js == 'function' &&\n          proj4js.defs(code) !== undefined) {\n        projection = new _ol_proj_Projection_({code: code});\n        _ol_proj_.addProjection(projection);\n      }\n    }\n  }\n  return projection;\n};\n\n\n/**\n * Checks if two projections are the same, that is every coordinate in one\n * projection does represent the same geographic point as the same coordinate in\n * the other projection.\n *\n * @param {ol.proj.Projection} projection1 Projection 1.\n * @param {ol.proj.Projection} projection2 Projection 2.\n * @return {boolean} Equivalent.\n * @api\n */\n_ol_proj_.equivalent = function(projection1, projection2) {\n  if (projection1 === projection2) {\n    return true;\n  }\n  var equalUnits = projection1.getUnits() === projection2.getUnits();\n  if (projection1.getCode() === projection2.getCode()) {\n    return equalUnits;\n  } else {\n    var transformFn = _ol_proj_.getTransformFromProjections(\n        projection1, projection2);\n    return transformFn === _ol_proj_.cloneTransform && equalUnits;\n  }\n};\n\n\n/**\n * Given the projection-like objects, searches for a transformation\n * function to convert a coordinates array from the source projection to the\n * destination projection.\n *\n * @param {ol.ProjectionLike} source Source.\n * @param {ol.ProjectionLike} destination Destination.\n * @return {ol.TransformFunction} Transform function.\n * @api\n */\n_ol_proj_.getTransform = function(source, destination) {\n  var sourceProjection = _ol_proj_.get(source);\n  var destinationProjection = _ol_proj_.get(destination);\n  return _ol_proj_.getTransformFromProjections(\n      sourceProjection, destinationProjection);\n};\n\n\n/**\n * Searches in the list of transform functions for the function for converting\n * coordinates from the source projection to the destination projection.\n *\n * @param {ol.proj.Projection} sourceProjection Source Projection object.\n * @param {ol.proj.Projection} destinationProjection Destination Projection\n *     object.\n * @return {ol.TransformFunction} Transform function.\n */\n_ol_proj_.getTransformFromProjections = function(sourceProjection, destinationProjection) {\n  var sourceCode = sourceProjection.getCode();\n  var destinationCode = destinationProjection.getCode();\n  var transform = _ol_proj_transforms_.get(sourceCode, destinationCode);\n  if (_ol_.ENABLE_PROJ4JS && !transform) {\n    var proj4js = _ol_proj_proj4_.get();\n    if (typeof proj4js == 'function') {\n      var sourceDef = proj4js.defs(sourceCode);\n      var destinationDef = proj4js.defs(destinationCode);\n\n      if (sourceDef !== undefined && destinationDef !== undefined) {\n        if (sourceDef === destinationDef) {\n          _ol_proj_.addEquivalentProjections([destinationProjection, sourceProjection]);\n        } else {\n          var proj4Transform = proj4js(destinationCode, sourceCode);\n          _ol_proj_.addCoordinateTransforms(destinationProjection, sourceProjection,\n              proj4Transform.forward, proj4Transform.inverse);\n        }\n        transform = _ol_proj_transforms_.get(sourceCode, destinationCode);\n      }\n    }\n  }\n  if (!transform) {\n    transform = _ol_proj_.identityTransform;\n  }\n  return transform;\n};\n\n\n/**\n * @param {Array.<number>} input Input coordinate array.\n * @param {Array.<number>=} opt_output Output array of coordinate values.\n * @param {number=} opt_dimension Dimension.\n * @return {Array.<number>} Input coordinate array (same array as input).\n */\n_ol_proj_.identityTransform = function(input, opt_output, opt_dimension) {\n  if (opt_output !== undefined && input !== opt_output) {\n    for (var i = 0, ii = input.length; i < ii; ++i) {\n      opt_output[i] = input[i];\n    }\n    input = opt_output;\n  }\n  return input;\n};\n\n\n/**\n * @param {Array.<number>} input Input coordinate array.\n * @param {Array.<number>=} opt_output Output array of coordinate values.\n * @param {number=} opt_dimension Dimension.\n * @return {Array.<number>} Output coordinate array (new array, same coordinate\n *     values).\n */\n_ol_proj_.cloneTransform = function(input, opt_output, opt_dimension) {\n  var output;\n  if (opt_output !== undefined) {\n    for (var i = 0, ii = input.length; i < ii; ++i) {\n      opt_output[i] = input[i];\n    }\n    output = opt_output;\n  } else {\n    output = input.slice();\n  }\n  return output;\n};\n\n\n/**\n * Transforms a coordinate from source projection to destination projection.\n * This returns a new coordinate (and does not modify the original).\n *\n * See {@link ol.proj.transformExtent} for extent transformation.\n * See the transform method of {@link ol.geom.Geometry} and its subclasses for\n * geometry transforms.\n *\n * @param {ol.Coordinate} coordinate Coordinate.\n * @param {ol.ProjectionLike} source Source projection-like.\n * @param {ol.ProjectionLike} destination Destination projection-like.\n * @return {ol.Coordinate} Coordinate.\n * @api\n */\n_ol_proj_.transform = function(coordinate, source, destination) {\n  var transformFn = _ol_proj_.getTransform(source, destination);\n  return transformFn(coordinate, undefined, coordinate.length);\n};\n\n\n/**\n * Transforms an extent from source projection to destination projection.  This\n * returns a new extent (and does not modify the original).\n *\n * @param {ol.Extent} extent The extent to transform.\n * @param {ol.ProjectionLike} source Source projection-like.\n * @param {ol.ProjectionLike} destination Destination projection-like.\n * @return {ol.Extent} The transformed extent.\n * @api\n */\n_ol_proj_.transformExtent = function(extent, source, destination) {\n  var transformFn = _ol_proj_.getTransform(source, destination);\n  return _ol_extent_.applyTransform(extent, transformFn);\n};\n\n\n/**\n * Transforms the given point to the destination projection.\n *\n * @param {ol.Coordinate} point Point.\n * @param {ol.proj.Projection} sourceProjection Source projection.\n * @param {ol.proj.Projection} destinationProjection Destination projection.\n * @return {ol.Coordinate} Point.\n */\n_ol_proj_.transformWithProjections = function(point, sourceProjection, destinationProjection) {\n  var transformFn = _ol_proj_.getTransformFromProjections(\n      sourceProjection, destinationProjection);\n  return transformFn(point);\n};\n\n/**\n * Add transforms to and from EPSG:4326 and EPSG:3857.  This function is called\n * by when this module is executed and should only need to be called again after\n * `ol.proj.clearAllProjections()` is called (e.g. in tests).\n */\n_ol_proj_.addCommon = function() {\n  // Add transformations that don't alter coordinates to convert within set of\n  // projections with equal meaning.\n  _ol_proj_.addEquivalentProjections(_ol_proj_EPSG3857_.PROJECTIONS);\n  _ol_proj_.addEquivalentProjections(_ol_proj_EPSG4326_.PROJECTIONS);\n  // Add transformations to convert EPSG:4326 like coordinates to EPSG:3857 like\n  // coordinates and back.\n  _ol_proj_.addEquivalentTransforms(\n      _ol_proj_EPSG4326_.PROJECTIONS,\n      _ol_proj_EPSG3857_.PROJECTIONS,\n      _ol_proj_EPSG3857_.fromEPSG4326,\n      _ol_proj_EPSG3857_.toEPSG4326);\n};\n\n_ol_proj_.addCommon();\nexport default _ol_proj_;\n","/**\n * @classdesc\n * Stripped down implementation of the W3C DOM Level 2 Event interface.\n * @see {@link https://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-interface}\n *\n * This implementation only provides `type` and `target` properties, and\n * `stopPropagation` and `preventDefault` methods. It is meant as base class\n * for higher level events defined in the library, and works with\n * {@link ol.events.EventTarget}.\n *\n * @constructor\n * @implements {oli.events.Event}\n * @param {string} type Type.\n */\nvar _ol_events_Event_ = function(type) {\n\n  /**\n   * @type {boolean}\n   */\n  this.propagationStopped;\n\n  /**\n   * The event type.\n   * @type {string}\n   * @api\n   */\n  this.type = type;\n\n  /**\n   * The event target.\n   * @type {Object}\n   * @api\n   */\n  this.target = null;\n\n};\n\n\n/**\n * Stop event propagation.\n * @function\n * @override\n * @api\n */\n_ol_events_Event_.prototype.preventDefault =\n\n  /**\n   * Stop event propagation.\n   * @function\n   * @override\n   * @api\n   */\n  _ol_events_Event_.prototype.stopPropagation = function() {\n    this.propagationStopped = true;\n  };\n\n\n/**\n * @param {Event|ol.events.Event} evt Event\n */\n_ol_events_Event_.stopPropagation = function(evt) {\n  evt.stopPropagation();\n};\n\n\n/**\n * @param {Event|ol.events.Event} evt Event\n */\n_ol_events_Event_.preventDefault = function(evt) {\n  evt.preventDefault();\n};\nexport default _ol_events_Event_;\n","var _ol_geom_flat_transform_ = {};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {ol.Transform} transform Transform.\n * @param {Array.<number>=} opt_dest Destination.\n * @return {Array.<number>} Transformed coordinates.\n */\n_ol_geom_flat_transform_.transform2D = function(flatCoordinates, offset, end, stride, transform, opt_dest) {\n  var dest = opt_dest ? opt_dest : [];\n  var i = 0;\n  var j;\n  for (j = offset; j < end; j += stride) {\n    var x = flatCoordinates[j];\n    var y = flatCoordinates[j + 1];\n    dest[i++] = transform[0] * x + transform[2] * y + transform[4];\n    dest[i++] = transform[1] * x + transform[3] * y + transform[5];\n  }\n  if (opt_dest && dest.length != i) {\n    dest.length = i;\n  }\n  return dest;\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} angle Angle.\n * @param {Array.<number>} anchor Rotation anchor point.\n * @param {Array.<number>=} opt_dest Destination.\n * @return {Array.<number>} Transformed coordinates.\n */\n_ol_geom_flat_transform_.rotate = function(flatCoordinates, offset, end, stride, angle, anchor, opt_dest) {\n  var dest = opt_dest ? opt_dest : [];\n  var cos = Math.cos(angle);\n  var sin = Math.sin(angle);\n  var anchorX = anchor[0];\n  var anchorY = anchor[1];\n  var i = 0;\n  for (var j = offset; j < end; j += stride) {\n    var deltaX = flatCoordinates[j] - anchorX;\n    var deltaY = flatCoordinates[j + 1] - anchorY;\n    dest[i++] = anchorX + deltaX * cos - deltaY * sin;\n    dest[i++] = anchorY + deltaX * sin + deltaY * cos;\n    for (var k = j + 2; k < j + stride; ++k) {\n      dest[i++] = flatCoordinates[k];\n    }\n  }\n  if (opt_dest && dest.length != i) {\n    dest.length = i;\n  }\n  return dest;\n};\n\n\n/**\n * Scale the coordinates.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} sx Scale factor in the x-direction.\n * @param {number} sy Scale factor in the y-direction.\n * @param {Array.<number>} anchor Scale anchor point.\n * @param {Array.<number>=} opt_dest Destination.\n * @return {Array.<number>} Transformed coordinates.\n */\n_ol_geom_flat_transform_.scale = function(flatCoordinates, offset, end, stride, sx, sy, anchor, opt_dest) {\n  var dest = opt_dest ? opt_dest : [];\n  var anchorX = anchor[0];\n  var anchorY = anchor[1];\n  var i = 0;\n  for (var j = offset; j < end; j += stride) {\n    var deltaX = flatCoordinates[j] - anchorX;\n    var deltaY = flatCoordinates[j + 1] - anchorY;\n    dest[i++] = anchorX + sx * deltaX;\n    dest[i++] = anchorY + sy * deltaY;\n    for (var k = j + 2; k < j + stride; ++k) {\n      dest[i++] = flatCoordinates[k];\n    }\n  }\n  if (opt_dest && dest.length != i) {\n    dest.length = i;\n  }\n  return dest;\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} deltaX Delta X.\n * @param {number} deltaY Delta Y.\n * @param {Array.<number>=} opt_dest Destination.\n * @return {Array.<number>} Transformed coordinates.\n */\n_ol_geom_flat_transform_.translate = function(flatCoordinates, offset, end, stride, deltaX, deltaY, opt_dest) {\n  var dest = opt_dest ? opt_dest : [];\n  var i = 0;\n  var j, k;\n  for (j = offset; j < end; j += stride) {\n    dest[i++] = flatCoordinates[j] + deltaX;\n    dest[i++] = flatCoordinates[j + 1] + deltaY;\n    for (k = j + 2; k < j + stride; ++k) {\n      dest[i++] = flatCoordinates[k];\n    }\n  }\n  if (opt_dest && dest.length != i) {\n    dest.length = i;\n  }\n  return dest;\n};\nexport default _ol_geom_flat_transform_;\n","/**\n * A layer type used when creating layer renderers.\n * @enum {string}\n */\nvar _ol_LayerType_ = {\n  IMAGE: 'IMAGE',\n  TILE: 'TILE',\n  VECTOR_TILE: 'VECTOR_TILE',\n  VECTOR: 'VECTOR'\n};\n\nexport default _ol_LayerType_;\n","/**\n * @enum {string}\n */\nvar _ol_layer_Property_ = {\n  OPACITY: 'opacity',\n  VISIBLE: 'visible',\n  EXTENT: 'extent',\n  Z_INDEX: 'zIndex',\n  MAX_RESOLUTION: 'maxResolution',\n  MIN_RESOLUTION: 'minResolution',\n  SOURCE: 'source'\n};\n\nexport default _ol_layer_Property_;\n","import _ol_events_ from '../events.js';\nimport _ol_events_EventType_ from '../events/eventtype.js';\nimport _ol_ from '../index.js';\nimport _ol_Object_ from '../object.js';\nimport _ol_layer_Base_ from '../layer/base.js';\nimport _ol_layer_Property_ from '../layer/property.js';\nimport _ol_obj_ from '../obj.js';\nimport _ol_render_EventType_ from '../render/eventtype.js';\nimport _ol_source_State_ from '../source/state.js';\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * A visual representation of raster or vector map data.\n * Layers group together those properties that pertain to how the data is to be\n * displayed, irrespective of the source of that data.\n *\n * Layers are usually added to a map with {@link ol.Map#addLayer}. Components\n * like {@link ol.interaction.Select} use unmanaged layers internally. These\n * unmanaged layers are associated with the map using\n * {@link ol.layer.Layer#setMap} instead.\n *\n * A generic `change` event is fired when the state of the source changes.\n *\n * @constructor\n * @abstract\n * @extends {ol.layer.Base}\n * @fires ol.render.Event\n * @param {olx.layer.LayerOptions} options Layer options.\n * @api\n */\nvar _ol_layer_Layer_ = function(options) {\n\n  var baseOptions = _ol_obj_.assign({}, options);\n  delete baseOptions.source;\n\n  _ol_layer_Base_.call(this, /** @type {olx.layer.BaseOptions} */ (baseOptions));\n\n  /**\n   * @private\n   * @type {?ol.EventsKey}\n   */\n  this.mapPrecomposeKey_ = null;\n\n  /**\n   * @private\n   * @type {?ol.EventsKey}\n   */\n  this.mapRenderKey_ = null;\n\n  /**\n   * @private\n   * @type {?ol.EventsKey}\n   */\n  this.sourceChangeKey_ = null;\n\n  if (options.map) {\n    this.setMap(options.map);\n  }\n\n  _ol_events_.listen(this,\n      _ol_Object_.getChangeEventType(_ol_layer_Property_.SOURCE),\n      this.handleSourcePropertyChange_, this);\n\n  var source = options.source ? options.source : null;\n  this.setSource(source);\n};\n\n_ol_.inherits(_ol_layer_Layer_, _ol_layer_Base_);\n\n\n/**\n * Return `true` if the layer is visible, and if the passed resolution is\n * between the layer's minResolution and maxResolution. The comparison is\n * inclusive for `minResolution` and exclusive for `maxResolution`.\n * @param {ol.LayerState} layerState Layer state.\n * @param {number} resolution Resolution.\n * @return {boolean} The layer is visible at the given resolution.\n */\n_ol_layer_Layer_.visibleAtResolution = function(layerState, resolution) {\n  return layerState.visible && resolution >= layerState.minResolution &&\n      resolution < layerState.maxResolution;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_layer_Layer_.prototype.getLayersArray = function(opt_array) {\n  var array = opt_array ? opt_array : [];\n  array.push(this);\n  return array;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_layer_Layer_.prototype.getLayerStatesArray = function(opt_states) {\n  var states = opt_states ? opt_states : [];\n  states.push(this.getLayerState());\n  return states;\n};\n\n\n/**\n * Get the layer source.\n * @return {ol.source.Source} The layer source (or `null` if not yet set).\n * @observable\n * @api\n */\n_ol_layer_Layer_.prototype.getSource = function() {\n  var source = this.get(_ol_layer_Property_.SOURCE);\n  return /** @type {ol.source.Source} */ (source) || null;\n};\n\n\n/**\n  * @inheritDoc\n  */\n_ol_layer_Layer_.prototype.getSourceState = function() {\n  var source = this.getSource();\n  return !source ? _ol_source_State_.UNDEFINED : source.getState();\n};\n\n\n/**\n * @private\n */\n_ol_layer_Layer_.prototype.handleSourceChange_ = function() {\n  this.changed();\n};\n\n\n/**\n * @private\n */\n_ol_layer_Layer_.prototype.handleSourcePropertyChange_ = function() {\n  if (this.sourceChangeKey_) {\n    _ol_events_.unlistenByKey(this.sourceChangeKey_);\n    this.sourceChangeKey_ = null;\n  }\n  var source = this.getSource();\n  if (source) {\n    this.sourceChangeKey_ = _ol_events_.listen(source,\n        _ol_events_EventType_.CHANGE, this.handleSourceChange_, this);\n  }\n  this.changed();\n};\n\n\n/**\n * Sets the layer to be rendered on top of other layers on a map. The map will\n * not manage this layer in its layers collection, and the callback in\n * {@link ol.Map#forEachLayerAtPixel} will receive `null` as layer. This\n * is useful for temporary layers. To remove an unmanaged layer from the map,\n * use `#setMap(null)`.\n *\n * To add the layer to a map and have it managed by the map, use\n * {@link ol.Map#addLayer} instead.\n * @param {ol.PluggableMap} map Map.\n * @api\n */\n_ol_layer_Layer_.prototype.setMap = function(map) {\n  if (this.mapPrecomposeKey_) {\n    _ol_events_.unlistenByKey(this.mapPrecomposeKey_);\n    this.mapPrecomposeKey_ = null;\n  }\n  if (!map) {\n    this.changed();\n  }\n  if (this.mapRenderKey_) {\n    _ol_events_.unlistenByKey(this.mapRenderKey_);\n    this.mapRenderKey_ = null;\n  }\n  if (map) {\n    this.mapPrecomposeKey_ = _ol_events_.listen(\n        map, _ol_render_EventType_.PRECOMPOSE, function(evt) {\n          var layerState = this.getLayerState();\n          layerState.managed = false;\n          layerState.zIndex = Infinity;\n          evt.frameState.layerStatesArray.push(layerState);\n          evt.frameState.layerStates[_ol_.getUid(this)] = layerState;\n        }, this);\n    this.mapRenderKey_ = _ol_events_.listen(\n        this, _ol_events_EventType_.CHANGE, map.render, map);\n    this.changed();\n  }\n};\n\n\n/**\n * Set the layer source.\n * @param {ol.source.Source} source The layer source.\n * @observable\n * @api\n */\n_ol_layer_Layer_.prototype.setSource = function(source) {\n  this.set(_ol_layer_Property_.SOURCE, source);\n};\nexport default _ol_layer_Layer_;\n","var _ol_css_ = {};\n\n\n/**\n * The CSS class for hidden feature.\n *\n * @const\n * @type {string}\n */\n_ol_css_.CLASS_HIDDEN = 'ol-hidden';\n\n\n/**\n * The CSS class that we'll give the DOM elements to have them selectable.\n *\n * @const\n * @type {string}\n */\n_ol_css_.CLASS_SELECTABLE = 'ol-selectable';\n\n/**\n * The CSS class that we'll give the DOM elements to have them unselectable.\n *\n * @const\n * @type {string}\n */\n_ol_css_.CLASS_UNSELECTABLE = 'ol-unselectable';\n\n\n/**\n * The CSS class for unsupported feature.\n *\n * @const\n * @type {string}\n */\n_ol_css_.CLASS_UNSUPPORTED = 'ol-unsupported';\n\n\n/**\n * The CSS class for controls.\n *\n * @const\n * @type {string}\n */\n_ol_css_.CLASS_CONTROL = 'ol-control';\n\n\n/**\n * Get the list of font families from a font spec.  Note that this doesn't work\n * for font families that have commas in them.\n * @param {string} The CSS font property.\n * @return {Object.<string>} The font families (or null if the input spec is invalid).\n */\n_ol_css_.getFontFamilies = (function() {\n  var style;\n  var cache = {};\n  return function(font) {\n    if (!style) {\n      style = document.createElement('div').style;\n    }\n    if (!(font in cache)) {\n      style.font = font;\n      var family = style.fontFamily;\n      style.font = '';\n      if (!family) {\n        return null;\n      }\n      cache[font] = family.split(/,\\s?/);\n    }\n    return cache[font];\n  };\n})();\nexport default _ol_css_;\n","import _ol_MapBrowserEventType_ from '../mapbrowsereventtype.js';\nimport _ol_asserts_ from '../asserts.js';\nimport _ol_functions_ from '../functions.js';\nimport _ol_has_ from '../has.js';\nvar _ol_events_condition_ = {};\n\n\n/**\n * Return `true` if only the alt-key is pressed, `false` otherwise (e.g. when\n * additionally the shift-key is pressed).\n *\n * @param {ol.MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the alt key is pressed.\n * @api\n */\n_ol_events_condition_.altKeyOnly = function(mapBrowserEvent) {\n  var originalEvent = mapBrowserEvent.originalEvent;\n  return (\n    originalEvent.altKey &&\n      !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n      !originalEvent.shiftKey);\n};\n\n\n/**\n * Return `true` if only the alt-key and shift-key is pressed, `false` otherwise\n * (e.g. when additionally the platform-modifier-key is pressed).\n *\n * @param {ol.MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the alt and shift keys are pressed.\n * @api\n */\n_ol_events_condition_.altShiftKeysOnly = function(mapBrowserEvent) {\n  var originalEvent = mapBrowserEvent.originalEvent;\n  return (\n    originalEvent.altKey &&\n      !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n      originalEvent.shiftKey);\n};\n\n\n/**\n * Return always true.\n *\n * @param {ol.MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} True.\n * @function\n * @api\n */\n_ol_events_condition_.always = _ol_functions_.TRUE;\n\n\n/**\n * Return `true` if the event is a `click` event, `false` otherwise.\n *\n * @param {ol.MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event is a map `click` event.\n * @api\n */\n_ol_events_condition_.click = function(mapBrowserEvent) {\n  return mapBrowserEvent.type == _ol_MapBrowserEventType_.CLICK;\n};\n\n\n/**\n * Return `true` if the event has an \"action\"-producing mouse button.\n *\n * By definition, this includes left-click on windows/linux, and left-click\n * without the ctrl key on Macs.\n *\n * @param {ol.MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} The result.\n */\n_ol_events_condition_.mouseActionButton = function(mapBrowserEvent) {\n  var originalEvent = mapBrowserEvent.originalEvent;\n  return originalEvent.button == 0 &&\n      !(_ol_has_.WEBKIT && _ol_has_.MAC && originalEvent.ctrlKey);\n};\n\n\n/**\n * Return always false.\n *\n * @param {ol.MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} False.\n * @function\n * @api\n */\n_ol_events_condition_.never = _ol_functions_.FALSE;\n\n\n/**\n * Return `true` if the browser event is a `pointermove` event, `false`\n * otherwise.\n *\n * @param {ol.MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} True if the browser event is a `pointermove` event.\n * @api\n */\n_ol_events_condition_.pointerMove = function(mapBrowserEvent) {\n  return mapBrowserEvent.type == 'pointermove';\n};\n\n\n/**\n * Return `true` if the event is a map `singleclick` event, `false` otherwise.\n *\n * @param {ol.MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event is a map `singleclick` event.\n * @api\n */\n_ol_events_condition_.singleClick = function(mapBrowserEvent) {\n  return mapBrowserEvent.type == _ol_MapBrowserEventType_.SINGLECLICK;\n};\n\n\n/**\n * Return `true` if the event is a map `dblclick` event, `false` otherwise.\n *\n * @param {ol.MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event is a map `dblclick` event.\n * @api\n */\n_ol_events_condition_.doubleClick = function(mapBrowserEvent) {\n  return mapBrowserEvent.type == _ol_MapBrowserEventType_.DBLCLICK;\n};\n\n\n/**\n * Return `true` if no modifier key (alt-, shift- or platform-modifier-key) is\n * pressed.\n *\n * @param {ol.MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} True only if there no modifier keys are pressed.\n * @api\n */\n_ol_events_condition_.noModifierKeys = function(mapBrowserEvent) {\n  var originalEvent = mapBrowserEvent.originalEvent;\n  return (\n    !originalEvent.altKey &&\n      !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n      !originalEvent.shiftKey);\n};\n\n\n/**\n * Return `true` if only the platform-modifier-key (the meta-key on Mac,\n * ctrl-key otherwise) is pressed, `false` otherwise (e.g. when additionally\n * the shift-key is pressed).\n *\n * @param {ol.MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the platform modifier key is pressed.\n * @api\n */\n_ol_events_condition_.platformModifierKeyOnly = function(mapBrowserEvent) {\n  var originalEvent = mapBrowserEvent.originalEvent;\n  return !originalEvent.altKey &&\n    (_ol_has_.MAC ? originalEvent.metaKey : originalEvent.ctrlKey) &&\n    !originalEvent.shiftKey;\n};\n\n\n/**\n * Return `true` if only the shift-key is pressed, `false` otherwise (e.g. when\n * additionally the alt-key is pressed).\n *\n * @param {ol.MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the shift key is pressed.\n * @api\n */\n_ol_events_condition_.shiftKeyOnly = function(mapBrowserEvent) {\n  var originalEvent = mapBrowserEvent.originalEvent;\n  return (\n    !originalEvent.altKey &&\n      !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n      originalEvent.shiftKey);\n};\n\n\n/**\n * Return `true` if the target element is not editable, i.e. not a `<input>`-,\n * `<select>`- or `<textarea>`-element, `false` otherwise.\n *\n * @param {ol.MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} True only if the target element is not editable.\n * @api\n */\n_ol_events_condition_.targetNotEditable = function(mapBrowserEvent) {\n  var target = mapBrowserEvent.originalEvent.target;\n  var tagName = target.tagName;\n  return (\n    tagName !== 'INPUT' &&\n      tagName !== 'SELECT' &&\n      tagName !== 'TEXTAREA');\n};\n\n\n/**\n * Return `true` if the event originates from a mouse device.\n *\n * @param {ol.MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event originates from a mouse device.\n * @api\n */\n_ol_events_condition_.mouseOnly = function(mapBrowserEvent) {\n  _ol_asserts_.assert(mapBrowserEvent.pointerEvent, 56); // mapBrowserEvent must originate from a pointer event\n  // see http://www.w3.org/TR/pointerevents/#widl-PointerEvent-pointerType\n  return /** @type {ol.MapBrowserEvent} */ (mapBrowserEvent).pointerEvent.pointerType == 'mouse';\n};\n\n\n/**\n * Return `true` if the event originates from a primary pointer in\n * contact with the surface or if the left mouse button is pressed.\n * @see http://www.w3.org/TR/pointerevents/#button-states\n *\n * @param {ol.MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event originates from a primary pointer.\n * @api\n */\n_ol_events_condition_.primaryAction = function(mapBrowserEvent) {\n  var pointerEvent = mapBrowserEvent.pointerEvent;\n  return pointerEvent.isPrimary && pointerEvent.button === 0;\n};\nexport default _ol_events_condition_;\n","/**\n * An implementation of Google Maps' MVCArray.\n * @see https://developers.google.com/maps/documentation/javascript/reference\n */\n\nimport _ol_ from './index.js';\nimport _ol_AssertionError_ from './assertionerror.js';\nimport _ol_CollectionEventType_ from './collectioneventtype.js';\nimport _ol_Object_ from './object.js';\nimport _ol_events_Event_ from './events/event.js';\n\n/**\n * @classdesc\n * An expanded version of standard JS Array, adding convenience methods for\n * manipulation. Add and remove changes to the Collection trigger a Collection\n * event. Note that this does not cover changes to the objects _within_ the\n * Collection; they trigger events on the appropriate object, not on the\n * Collection as a whole.\n *\n * @constructor\n * @extends {ol.Object}\n * @fires ol.Collection.Event\n * @param {Array.<T>=} opt_array Array.\n * @param {olx.CollectionOptions=} opt_options Collection options.\n * @template T\n * @api\n */\nvar _ol_Collection_ = function(opt_array, opt_options) {\n\n  _ol_Object_.call(this);\n\n  var options = opt_options || {};\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.unique_ = !!options.unique;\n\n  /**\n   * @private\n   * @type {!Array.<T>}\n   */\n  this.array_ = opt_array ? opt_array : [];\n\n  if (this.unique_) {\n    for (var i = 0, ii = this.array_.length; i < ii; ++i) {\n      this.assertUnique_(this.array_[i], i);\n    }\n  }\n\n  this.updateLength_();\n\n};\n\n_ol_.inherits(_ol_Collection_, _ol_Object_);\n\n\n/**\n * Remove all elements from the collection.\n * @api\n */\n_ol_Collection_.prototype.clear = function() {\n  while (this.getLength() > 0) {\n    this.pop();\n  }\n};\n\n\n/**\n * Add elements to the collection.  This pushes each item in the provided array\n * to the end of the collection.\n * @param {!Array.<T>} arr Array.\n * @return {ol.Collection.<T>} This collection.\n * @api\n */\n_ol_Collection_.prototype.extend = function(arr) {\n  var i, ii;\n  for (i = 0, ii = arr.length; i < ii; ++i) {\n    this.push(arr[i]);\n  }\n  return this;\n};\n\n\n/**\n * Iterate over each element, calling the provided callback.\n * @param {function(this: S, T, number, Array.<T>): *} f The function to call\n *     for every element. This function takes 3 arguments (the element, the\n *     index and the array). The return value is ignored.\n * @param {S=} opt_this The object to use as `this` in `f`.\n * @template S\n * @api\n */\n_ol_Collection_.prototype.forEach = function(f, opt_this) {\n  var fn = (opt_this) ? f.bind(opt_this) : f;\n  var array = this.array_;\n  for (var i = 0, ii = array.length; i < ii; ++i) {\n    fn(array[i], i, array);\n  }\n};\n\n\n/**\n * Get a reference to the underlying Array object. Warning: if the array\n * is mutated, no events will be dispatched by the collection, and the\n * collection's \"length\" property won't be in sync with the actual length\n * of the array.\n * @return {!Array.<T>} Array.\n * @api\n */\n_ol_Collection_.prototype.getArray = function() {\n  return this.array_;\n};\n\n\n/**\n * Get the element at the provided index.\n * @param {number} index Index.\n * @return {T} Element.\n * @api\n */\n_ol_Collection_.prototype.item = function(index) {\n  return this.array_[index];\n};\n\n\n/**\n * Get the length of this collection.\n * @return {number} The length of the array.\n * @observable\n * @api\n */\n_ol_Collection_.prototype.getLength = function() {\n  return (\n    /** @type {number} */ this.get(_ol_Collection_.Property_.LENGTH)\n  );\n};\n\n\n/**\n * Insert an element at the provided index.\n * @param {number} index Index.\n * @param {T} elem Element.\n * @api\n */\n_ol_Collection_.prototype.insertAt = function(index, elem) {\n  if (this.unique_) {\n    this.assertUnique_(elem);\n  }\n  this.array_.splice(index, 0, elem);\n  this.updateLength_();\n  this.dispatchEvent(\n      new _ol_Collection_.Event(_ol_CollectionEventType_.ADD, elem));\n};\n\n\n/**\n * Remove the last element of the collection and return it.\n * Return `undefined` if the collection is empty.\n * @return {T|undefined} Element.\n * @api\n */\n_ol_Collection_.prototype.pop = function() {\n  return this.removeAt(this.getLength() - 1);\n};\n\n\n/**\n * Insert the provided element at the end of the collection.\n * @param {T} elem Element.\n * @return {number} New length of the collection.\n * @api\n */\n_ol_Collection_.prototype.push = function(elem) {\n  if (this.unique_) {\n    this.assertUnique_(elem);\n  }\n  var n = this.getLength();\n  this.insertAt(n, elem);\n  return this.getLength();\n};\n\n\n/**\n * Remove the first occurrence of an element from the collection.\n * @param {T} elem Element.\n * @return {T|undefined} The removed element or undefined if none found.\n * @api\n */\n_ol_Collection_.prototype.remove = function(elem) {\n  var arr = this.array_;\n  var i, ii;\n  for (i = 0, ii = arr.length; i < ii; ++i) {\n    if (arr[i] === elem) {\n      return this.removeAt(i);\n    }\n  }\n  return undefined;\n};\n\n\n/**\n * Remove the element at the provided index and return it.\n * Return `undefined` if the collection does not contain this index.\n * @param {number} index Index.\n * @return {T|undefined} Value.\n * @api\n */\n_ol_Collection_.prototype.removeAt = function(index) {\n  var prev = this.array_[index];\n  this.array_.splice(index, 1);\n  this.updateLength_();\n  this.dispatchEvent(\n      new _ol_Collection_.Event(_ol_CollectionEventType_.REMOVE, prev));\n  return prev;\n};\n\n\n/**\n * Set the element at the provided index.\n * @param {number} index Index.\n * @param {T} elem Element.\n * @api\n */\n_ol_Collection_.prototype.setAt = function(index, elem) {\n  var n = this.getLength();\n  if (index < n) {\n    if (this.unique_) {\n      this.assertUnique_(elem, index);\n    }\n    var prev = this.array_[index];\n    this.array_[index] = elem;\n    this.dispatchEvent(\n        new _ol_Collection_.Event(_ol_CollectionEventType_.REMOVE, prev));\n    this.dispatchEvent(\n        new _ol_Collection_.Event(_ol_CollectionEventType_.ADD, elem));\n  } else {\n    var j;\n    for (j = n; j < index; ++j) {\n      this.insertAt(j, undefined);\n    }\n    this.insertAt(index, elem);\n  }\n};\n\n\n/**\n * @private\n */\n_ol_Collection_.prototype.updateLength_ = function() {\n  this.set(_ol_Collection_.Property_.LENGTH, this.array_.length);\n};\n\n\n/**\n * @private\n * @param {T} elem Element.\n * @param {number=} opt_except Optional index to ignore.\n */\n_ol_Collection_.prototype.assertUnique_ = function(elem, opt_except) {\n  for (var i = 0, ii = this.array_.length; i < ii; ++i) {\n    if (this.array_[i] === elem && i !== opt_except) {\n      throw new _ol_AssertionError_(58);\n    }\n  }\n};\n\n\n/**\n * @enum {string}\n * @private\n */\n_ol_Collection_.Property_ = {\n  LENGTH: 'length'\n};\n\n\n/**\n * @classdesc\n * Events emitted by {@link ol.Collection} instances are instances of this\n * type.\n *\n * @constructor\n * @extends {ol.events.Event}\n * @implements {oli.Collection.Event}\n * @param {ol.CollectionEventType} type Type.\n * @param {*=} opt_element Element.\n */\n_ol_Collection_.Event = function(type, opt_element) {\n\n  _ol_events_Event_.call(this, type);\n\n  /**\n   * The element that is added to or removed from the collection.\n   * @type {*}\n   * @api\n   */\n  this.element = opt_element;\n\n};\n_ol_.inherits(_ol_Collection_.Event, _ol_events_Event_);\nexport default _ol_Collection_;\n","/**\n * @enum {number}\n */\nvar _ol_ImageState_ = {\n  IDLE: 0,\n  LOADING: 1,\n  LOADED: 2,\n  ERROR: 3\n};\n\nexport default _ol_ImageState_;\n","/**\n * Relationship to an extent.\n * @enum {number}\n */\nvar _ol_extent_Relationship_ = {\n  UNKNOWN: 0,\n  INTERSECTING: 1,\n  ABOVE: 2,\n  RIGHT: 4,\n  BELOW: 8,\n  LEFT: 16\n};\n\nexport default _ol_extent_Relationship_;\n","/**\n * Projection units: `'degrees'`, `'ft'`, `'m'`, `'pixels'`, `'tile-pixels'` or\n * `'us-ft'`.\n * @enum {string}\n */\nvar _ol_proj_Units_ = {\n  DEGREES: 'degrees',\n  FEET: 'ft',\n  METERS: 'm',\n  PIXELS: 'pixels',\n  TILE_PIXELS: 'tile-pixels',\n  USFEET: 'us-ft'\n};\n\n\n/**\n * Meters per unit lookup table.\n * @const\n * @type {Object.<ol.proj.Units, number>}\n * @api\n */\n_ol_proj_Units_.METERS_PER_UNIT = {};\n// use the radius of the Normal sphere\n_ol_proj_Units_.METERS_PER_UNIT[_ol_proj_Units_.DEGREES] =\n    2 * Math.PI * 6370997 / 360;\n_ol_proj_Units_.METERS_PER_UNIT[_ol_proj_Units_.FEET] = 0.3048;\n_ol_proj_Units_.METERS_PER_UNIT[_ol_proj_Units_.METERS] = 1;\n_ol_proj_Units_.METERS_PER_UNIT[_ol_proj_Units_.USFEET] = 1200 / 3937;\nexport default _ol_proj_Units_;\n","var _ol_easing_ = {};\n\n\n/**\n * Start slow and speed up.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\n_ol_easing_.easeIn = function(t) {\n  return Math.pow(t, 3);\n};\n\n\n/**\n * Start fast and slow down.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\n_ol_easing_.easeOut = function(t) {\n  return 1 - _ol_easing_.easeIn(1 - t);\n};\n\n\n/**\n * Start slow, speed up, and then slow down again.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\n_ol_easing_.inAndOut = function(t) {\n  return 3 * t * t - 2 * t * t * t;\n};\n\n\n/**\n * Maintain a constant speed over time.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\n_ol_easing_.linear = function(t) {\n  return t;\n};\n\n\n/**\n * Start slow, speed up, and at the very end slow down again.  This has the\n * same general behavior as {@link ol.easing.inAndOut}, but the final slowdown\n * is delayed.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\n_ol_easing_.upAndDown = function(t) {\n  if (t < 0.5) {\n    return _ol_easing_.inAndOut(2 * t);\n  } else {\n    return 1 - _ol_easing_.inAndOut(2 * (t - 0.5));\n  }\n};\nexport default _ol_easing_;\n","import _ol_ from '../index.js';\nimport _ol_functions_ from '../functions.js';\nimport _ol_extent_ from '../extent.js';\nimport _ol_geom_Geometry_ from '../geom/geometry.js';\nimport _ol_geom_GeometryLayout_ from '../geom/geometrylayout.js';\nimport _ol_geom_flat_transform_ from '../geom/flat/transform.js';\nimport _ol_obj_ from '../obj.js';\n\n/**\n * @classdesc\n * Abstract base class; only used for creating subclasses; do not instantiate\n * in apps, as cannot be rendered.\n *\n * @constructor\n * @abstract\n * @extends {ol.geom.Geometry}\n * @api\n */\nvar _ol_geom_SimpleGeometry_ = function() {\n\n  _ol_geom_Geometry_.call(this);\n\n  /**\n   * @protected\n   * @type {ol.geom.GeometryLayout}\n   */\n  this.layout = _ol_geom_GeometryLayout_.XY;\n\n  /**\n   * @protected\n   * @type {number}\n   */\n  this.stride = 2;\n\n  /**\n   * @protected\n   * @type {Array.<number>}\n   */\n  this.flatCoordinates = null;\n\n};\n\n_ol_.inherits(_ol_geom_SimpleGeometry_, _ol_geom_Geometry_);\n\n\n/**\n * @param {number} stride Stride.\n * @private\n * @return {ol.geom.GeometryLayout} layout Layout.\n */\n_ol_geom_SimpleGeometry_.getLayoutForStride_ = function(stride) {\n  var layout;\n  if (stride == 2) {\n    layout = _ol_geom_GeometryLayout_.XY;\n  } else if (stride == 3) {\n    layout = _ol_geom_GeometryLayout_.XYZ;\n  } else if (stride == 4) {\n    layout = _ol_geom_GeometryLayout_.XYZM;\n  }\n  return /** @type {ol.geom.GeometryLayout} */ (layout);\n};\n\n\n/**\n * @param {ol.geom.GeometryLayout} layout Layout.\n * @return {number} Stride.\n */\n_ol_geom_SimpleGeometry_.getStrideForLayout = function(layout) {\n  var stride;\n  if (layout == _ol_geom_GeometryLayout_.XY) {\n    stride = 2;\n  } else if (layout == _ol_geom_GeometryLayout_.XYZ || layout == _ol_geom_GeometryLayout_.XYM) {\n    stride = 3;\n  } else if (layout == _ol_geom_GeometryLayout_.XYZM) {\n    stride = 4;\n  }\n  return /** @type {number} */ (stride);\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_geom_SimpleGeometry_.prototype.containsXY = _ol_functions_.FALSE;\n\n\n/**\n * @inheritDoc\n */\n_ol_geom_SimpleGeometry_.prototype.computeExtent = function(extent) {\n  return _ol_extent_.createOrUpdateFromFlatCoordinates(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride,\n      extent);\n};\n\n\n/**\n * @abstract\n * @return {Array} Coordinates.\n */\n_ol_geom_SimpleGeometry_.prototype.getCoordinates = function() {};\n\n\n/**\n * Return the first coordinate of the geometry.\n * @return {ol.Coordinate} First coordinate.\n * @api\n */\n_ol_geom_SimpleGeometry_.prototype.getFirstCoordinate = function() {\n  return this.flatCoordinates.slice(0, this.stride);\n};\n\n\n/**\n * @return {Array.<number>} Flat coordinates.\n */\n_ol_geom_SimpleGeometry_.prototype.getFlatCoordinates = function() {\n  return this.flatCoordinates;\n};\n\n\n/**\n * Return the last coordinate of the geometry.\n * @return {ol.Coordinate} Last point.\n * @api\n */\n_ol_geom_SimpleGeometry_.prototype.getLastCoordinate = function() {\n  return this.flatCoordinates.slice(this.flatCoordinates.length - this.stride);\n};\n\n\n/**\n * Return the {@link ol.geom.GeometryLayout layout} of the geometry.\n * @return {ol.geom.GeometryLayout} Layout.\n * @api\n */\n_ol_geom_SimpleGeometry_.prototype.getLayout = function() {\n  return this.layout;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_geom_SimpleGeometry_.prototype.getSimplifiedGeometry = function(squaredTolerance) {\n  if (this.simplifiedGeometryRevision != this.getRevision()) {\n    _ol_obj_.clear(this.simplifiedGeometryCache);\n    this.simplifiedGeometryMaxMinSquaredTolerance = 0;\n    this.simplifiedGeometryRevision = this.getRevision();\n  }\n  // If squaredTolerance is negative or if we know that simplification will not\n  // have any effect then just return this.\n  if (squaredTolerance < 0 ||\n      (this.simplifiedGeometryMaxMinSquaredTolerance !== 0 &&\n       squaredTolerance <= this.simplifiedGeometryMaxMinSquaredTolerance)) {\n    return this;\n  }\n  var key = squaredTolerance.toString();\n  if (this.simplifiedGeometryCache.hasOwnProperty(key)) {\n    return this.simplifiedGeometryCache[key];\n  } else {\n    var simplifiedGeometry =\n        this.getSimplifiedGeometryInternal(squaredTolerance);\n    var simplifiedFlatCoordinates = simplifiedGeometry.getFlatCoordinates();\n    if (simplifiedFlatCoordinates.length < this.flatCoordinates.length) {\n      this.simplifiedGeometryCache[key] = simplifiedGeometry;\n      return simplifiedGeometry;\n    } else {\n      // Simplification did not actually remove any coordinates.  We now know\n      // that any calls to getSimplifiedGeometry with a squaredTolerance less\n      // than or equal to the current squaredTolerance will also not have any\n      // effect.  This allows us to short circuit simplification (saving CPU\n      // cycles) and prevents the cache of simplified geometries from filling\n      // up with useless identical copies of this geometry (saving memory).\n      this.simplifiedGeometryMaxMinSquaredTolerance = squaredTolerance;\n      return this;\n    }\n  }\n};\n\n\n/**\n * @param {number} squaredTolerance Squared tolerance.\n * @return {ol.geom.SimpleGeometry} Simplified geometry.\n * @protected\n */\n_ol_geom_SimpleGeometry_.prototype.getSimplifiedGeometryInternal = function(squaredTolerance) {\n  return this;\n};\n\n\n/**\n * @return {number} Stride.\n */\n_ol_geom_SimpleGeometry_.prototype.getStride = function() {\n  return this.stride;\n};\n\n\n/**\n * @param {ol.geom.GeometryLayout} layout Layout.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @protected\n */\n_ol_geom_SimpleGeometry_.prototype.setFlatCoordinatesInternal = function(layout, flatCoordinates) {\n  this.stride = _ol_geom_SimpleGeometry_.getStrideForLayout(layout);\n  this.layout = layout;\n  this.flatCoordinates = flatCoordinates;\n};\n\n\n/**\n * @abstract\n * @param {Array} coordinates Coordinates.\n * @param {ol.geom.GeometryLayout=} opt_layout Layout.\n */\n_ol_geom_SimpleGeometry_.prototype.setCoordinates = function(coordinates, opt_layout) {};\n\n\n/**\n * @param {ol.geom.GeometryLayout|undefined} layout Layout.\n * @param {Array} coordinates Coordinates.\n * @param {number} nesting Nesting.\n * @protected\n */\n_ol_geom_SimpleGeometry_.prototype.setLayout = function(layout, coordinates, nesting) {\n  /** @type {number} */\n  var stride;\n  if (layout) {\n    stride = _ol_geom_SimpleGeometry_.getStrideForLayout(layout);\n  } else {\n    var i;\n    for (i = 0; i < nesting; ++i) {\n      if (coordinates.length === 0) {\n        this.layout = _ol_geom_GeometryLayout_.XY;\n        this.stride = 2;\n        return;\n      } else {\n        coordinates = /** @type {Array} */ (coordinates[0]);\n      }\n    }\n    stride = coordinates.length;\n    layout = _ol_geom_SimpleGeometry_.getLayoutForStride_(stride);\n  }\n  this.layout = layout;\n  this.stride = stride;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\n_ol_geom_SimpleGeometry_.prototype.applyTransform = function(transformFn) {\n  if (this.flatCoordinates) {\n    transformFn(this.flatCoordinates, this.flatCoordinates, this.stride);\n    this.changed();\n  }\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\n_ol_geom_SimpleGeometry_.prototype.rotate = function(angle, anchor) {\n  var flatCoordinates = this.getFlatCoordinates();\n  if (flatCoordinates) {\n    var stride = this.getStride();\n    _ol_geom_flat_transform_.rotate(\n        flatCoordinates, 0, flatCoordinates.length,\n        stride, angle, anchor, flatCoordinates);\n    this.changed();\n  }\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\n_ol_geom_SimpleGeometry_.prototype.scale = function(sx, opt_sy, opt_anchor) {\n  var sy = opt_sy;\n  if (sy === undefined) {\n    sy = sx;\n  }\n  var anchor = opt_anchor;\n  if (!anchor) {\n    anchor = _ol_extent_.getCenter(this.getExtent());\n  }\n  var flatCoordinates = this.getFlatCoordinates();\n  if (flatCoordinates) {\n    var stride = this.getStride();\n    _ol_geom_flat_transform_.scale(\n        flatCoordinates, 0, flatCoordinates.length,\n        stride, sx, sy, anchor, flatCoordinates);\n    this.changed();\n  }\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\n_ol_geom_SimpleGeometry_.prototype.translate = function(deltaX, deltaY) {\n  var flatCoordinates = this.getFlatCoordinates();\n  if (flatCoordinates) {\n    var stride = this.getStride();\n    _ol_geom_flat_transform_.translate(\n        flatCoordinates, 0, flatCoordinates.length, stride,\n        deltaX, deltaY, flatCoordinates);\n    this.changed();\n  }\n};\n\n\n/**\n * @param {ol.geom.SimpleGeometry} simpleGeometry Simple geometry.\n * @param {ol.Transform} transform Transform.\n * @param {Array.<number>=} opt_dest Destination.\n * @return {Array.<number>} Transformed flat coordinates.\n */\n_ol_geom_SimpleGeometry_.transform2D = function(simpleGeometry, transform, opt_dest) {\n  var flatCoordinates = simpleGeometry.getFlatCoordinates();\n  if (!flatCoordinates) {\n    return null;\n  } else {\n    var stride = simpleGeometry.getStride();\n    return _ol_geom_flat_transform_.transform2D(\n        flatCoordinates, 0, flatCoordinates.length, stride,\n        transform, opt_dest);\n  }\n};\nexport default _ol_geom_SimpleGeometry_;\n","import _ol_ from '../index.js';\nimport _ol_Disposable_ from '../disposable.js';\nimport _ol_events_ from '../events.js';\nimport _ol_events_Event_ from '../events/event.js';\n\n/**\n * @classdesc\n * A simplified implementation of the W3C DOM Level 2 EventTarget interface.\n * @see {@link https://www.w3.org/TR/2000/REC-DOM-Level-2-Events-20001113/events.html#Events-EventTarget}\n *\n * There are two important simplifications compared to the specification:\n *\n * 1. The handling of `useCapture` in `addEventListener` and\n *    `removeEventListener`. There is no real capture model.\n * 2. The handling of `stopPropagation` and `preventDefault` on `dispatchEvent`.\n *    There is no event target hierarchy. When a listener calls\n *    `stopPropagation` or `preventDefault` on an event object, it means that no\n *    more listeners after this one will be called. Same as when the listener\n *    returns false.\n *\n * @constructor\n * @extends {ol.Disposable}\n */\nvar _ol_events_EventTarget_ = function() {\n\n  _ol_Disposable_.call(this);\n\n  /**\n   * @private\n   * @type {!Object.<string, number>}\n   */\n  this.pendingRemovals_ = {};\n\n  /**\n   * @private\n   * @type {!Object.<string, number>}\n   */\n  this.dispatching_ = {};\n\n  /**\n   * @private\n   * @type {!Object.<string, Array.<ol.EventsListenerFunctionType>>}\n   */\n  this.listeners_ = {};\n\n};\n\n_ol_.inherits(_ol_events_EventTarget_, _ol_Disposable_);\n\n\n/**\n * @param {string} type Type.\n * @param {ol.EventsListenerFunctionType} listener Listener.\n */\n_ol_events_EventTarget_.prototype.addEventListener = function(type, listener) {\n  var listeners = this.listeners_[type];\n  if (!listeners) {\n    listeners = this.listeners_[type] = [];\n  }\n  if (listeners.indexOf(listener) === -1) {\n    listeners.push(listener);\n  }\n};\n\n\n/**\n * @param {{type: string,\n *     target: (EventTarget|ol.events.EventTarget|undefined)}|ol.events.Event|\n *     string} event Event or event type.\n * @return {boolean|undefined} `false` if anyone called preventDefault on the\n *     event object or if any of the listeners returned false.\n */\n_ol_events_EventTarget_.prototype.dispatchEvent = function(event) {\n  var evt = typeof event === 'string' ? new _ol_events_Event_(event) : event;\n  var type = evt.type;\n  evt.target = this;\n  var listeners = this.listeners_[type];\n  var propagate;\n  if (listeners) {\n    if (!(type in this.dispatching_)) {\n      this.dispatching_[type] = 0;\n      this.pendingRemovals_[type] = 0;\n    }\n    ++this.dispatching_[type];\n    for (var i = 0, ii = listeners.length; i < ii; ++i) {\n      if (listeners[i].call(this, evt) === false || evt.propagationStopped) {\n        propagate = false;\n        break;\n      }\n    }\n    --this.dispatching_[type];\n    if (this.dispatching_[type] === 0) {\n      var pendingRemovals = this.pendingRemovals_[type];\n      delete this.pendingRemovals_[type];\n      while (pendingRemovals--) {\n        this.removeEventListener(type, _ol_.nullFunction);\n      }\n      delete this.dispatching_[type];\n    }\n    return propagate;\n  }\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_events_EventTarget_.prototype.disposeInternal = function() {\n  _ol_events_.unlistenAll(this);\n};\n\n\n/**\n * Get the listeners for a specified event type. Listeners are returned in the\n * order that they will be called in.\n *\n * @param {string} type Type.\n * @return {Array.<ol.EventsListenerFunctionType>} Listeners.\n */\n_ol_events_EventTarget_.prototype.getListeners = function(type) {\n  return this.listeners_[type];\n};\n\n\n/**\n * @param {string=} opt_type Type. If not provided,\n *     `true` will be returned if this EventTarget has any listeners.\n * @return {boolean} Has listeners.\n */\n_ol_events_EventTarget_.prototype.hasListener = function(opt_type) {\n  return opt_type ?\n    opt_type in this.listeners_ :\n    Object.keys(this.listeners_).length > 0;\n};\n\n\n/**\n * @param {string} type Type.\n * @param {ol.EventsListenerFunctionType} listener Listener.\n */\n_ol_events_EventTarget_.prototype.removeEventListener = function(type, listener) {\n  var listeners = this.listeners_[type];\n  if (listeners) {\n    var index = listeners.indexOf(listener);\n    if (type in this.pendingRemovals_) {\n      // make listener a no-op, and remove later in #dispatchEvent()\n      listeners[index] = _ol_.nullFunction;\n      ++this.pendingRemovals_[type];\n    } else {\n      listeners.splice(index, 1);\n      if (listeners.length === 0) {\n        delete this.listeners_[type];\n      }\n    }\n  }\n};\nexport default _ol_events_EventTarget_;\n","import _ol_ from '../index.js';\nimport _ol_functions_ from '../functions.js';\nimport _ol_MapBrowserEventType_ from '../mapbrowsereventtype.js';\nimport _ol_MapBrowserPointerEvent_ from '../mapbrowserpointerevent.js';\nimport _ol_interaction_Interaction_ from '../interaction/interaction.js';\nimport _ol_obj_ from '../obj.js';\n\n/**\n * @classdesc\n * Base class that calls user-defined functions on `down`, `move` and `up`\n * events. This class also manages \"drag sequences\".\n *\n * When the `handleDownEvent` user function returns `true` a drag sequence is\n * started. During a drag sequence the `handleDragEvent` user function is\n * called on `move` events. The drag sequence ends when the `handleUpEvent`\n * user function is called and returns `false`.\n *\n * @constructor\n * @param {olx.interaction.PointerOptions=} opt_options Options.\n * @extends {ol.interaction.Interaction}\n * @api\n */\nvar _ol_interaction_Pointer_ = function(opt_options) {\n\n  var options = opt_options ? opt_options : {};\n\n  var handleEvent = options.handleEvent ?\n    options.handleEvent : _ol_interaction_Pointer_.handleEvent;\n\n  _ol_interaction_Interaction_.call(this, {\n    handleEvent: handleEvent\n  });\n\n  /**\n   * @type {function(ol.MapBrowserPointerEvent):boolean}\n   * @private\n   */\n  this.handleDownEvent_ = options.handleDownEvent ?\n    options.handleDownEvent : _ol_interaction_Pointer_.handleDownEvent;\n\n  /**\n   * @type {function(ol.MapBrowserPointerEvent)}\n   * @private\n   */\n  this.handleDragEvent_ = options.handleDragEvent ?\n    options.handleDragEvent : _ol_interaction_Pointer_.handleDragEvent;\n\n  /**\n   * @type {function(ol.MapBrowserPointerEvent)}\n   * @private\n   */\n  this.handleMoveEvent_ = options.handleMoveEvent ?\n    options.handleMoveEvent : _ol_interaction_Pointer_.handleMoveEvent;\n\n  /**\n   * @type {function(ol.MapBrowserPointerEvent):boolean}\n   * @private\n   */\n  this.handleUpEvent_ = options.handleUpEvent ?\n    options.handleUpEvent : _ol_interaction_Pointer_.handleUpEvent;\n\n  /**\n   * @type {boolean}\n   * @protected\n   */\n  this.handlingDownUpSequence = false;\n\n  /**\n   * @type {Object.<string, ol.pointer.PointerEvent>}\n   * @private\n   */\n  this.trackedPointers_ = {};\n\n  /**\n   * @type {Array.<ol.pointer.PointerEvent>}\n   * @protected\n   */\n  this.targetPointers = [];\n\n};\n\n_ol_.inherits(_ol_interaction_Pointer_, _ol_interaction_Interaction_);\n\n\n/**\n * @param {Array.<ol.pointer.PointerEvent>} pointerEvents List of events.\n * @return {ol.Pixel} Centroid pixel.\n */\n_ol_interaction_Pointer_.centroid = function(pointerEvents) {\n  var length = pointerEvents.length;\n  var clientX = 0;\n  var clientY = 0;\n  for (var i = 0; i < length; i++) {\n    clientX += pointerEvents[i].clientX;\n    clientY += pointerEvents[i].clientY;\n  }\n  return [clientX / length, clientY / length];\n};\n\n\n/**\n * @param {ol.MapBrowserPointerEvent} mapBrowserEvent Event.\n * @return {boolean} Whether the event is a pointerdown, pointerdrag\n *     or pointerup event.\n * @private\n */\n_ol_interaction_Pointer_.prototype.isPointerDraggingEvent_ = function(mapBrowserEvent) {\n  var type = mapBrowserEvent.type;\n  return type === _ol_MapBrowserEventType_.POINTERDOWN ||\n    type === _ol_MapBrowserEventType_.POINTERDRAG ||\n    type === _ol_MapBrowserEventType_.POINTERUP;\n};\n\n\n/**\n * @param {ol.MapBrowserPointerEvent} mapBrowserEvent Event.\n * @private\n */\n_ol_interaction_Pointer_.prototype.updateTrackedPointers_ = function(mapBrowserEvent) {\n  if (this.isPointerDraggingEvent_(mapBrowserEvent)) {\n    var event = mapBrowserEvent.pointerEvent;\n\n    var id = event.pointerId.toString();\n    if (mapBrowserEvent.type == _ol_MapBrowserEventType_.POINTERUP) {\n      delete this.trackedPointers_[id];\n    } else if (mapBrowserEvent.type ==\n        _ol_MapBrowserEventType_.POINTERDOWN) {\n      this.trackedPointers_[id] = event;\n    } else if (id in this.trackedPointers_) {\n      // update only when there was a pointerdown event for this pointer\n      this.trackedPointers_[id] = event;\n    }\n    this.targetPointers = _ol_obj_.getValues(this.trackedPointers_);\n  }\n};\n\n\n/**\n * @param {ol.MapBrowserPointerEvent} mapBrowserEvent Event.\n * @this {ol.interaction.Pointer}\n */\n_ol_interaction_Pointer_.handleDragEvent = _ol_.nullFunction;\n\n\n/**\n * @param {ol.MapBrowserPointerEvent} mapBrowserEvent Event.\n * @return {boolean} Capture dragging.\n * @this {ol.interaction.Pointer}\n */\n_ol_interaction_Pointer_.handleUpEvent = _ol_functions_.FALSE;\n\n\n/**\n * @param {ol.MapBrowserPointerEvent} mapBrowserEvent Event.\n * @return {boolean} Capture dragging.\n * @this {ol.interaction.Pointer}\n */\n_ol_interaction_Pointer_.handleDownEvent = _ol_functions_.FALSE;\n\n\n/**\n * @param {ol.MapBrowserPointerEvent} mapBrowserEvent Event.\n * @this {ol.interaction.Pointer}\n */\n_ol_interaction_Pointer_.handleMoveEvent = _ol_.nullFunction;\n\n\n/**\n * Handles the {@link ol.MapBrowserEvent map browser event} and may call into\n * other functions, if event sequences like e.g. 'drag' or 'down-up' etc. are\n * detected.\n * @param {ol.MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} `false` to stop event propagation.\n * @this {ol.interaction.Pointer}\n * @api\n */\n_ol_interaction_Pointer_.handleEvent = function(mapBrowserEvent) {\n  if (!(mapBrowserEvent instanceof _ol_MapBrowserPointerEvent_)) {\n    return true;\n  }\n\n  var stopEvent = false;\n  this.updateTrackedPointers_(mapBrowserEvent);\n  if (this.handlingDownUpSequence) {\n    if (mapBrowserEvent.type == _ol_MapBrowserEventType_.POINTERDRAG) {\n      this.handleDragEvent_(mapBrowserEvent);\n    } else if (mapBrowserEvent.type == _ol_MapBrowserEventType_.POINTERUP) {\n      var handledUp = this.handleUpEvent_(mapBrowserEvent);\n      this.handlingDownUpSequence = handledUp && this.targetPointers.length > 0;\n    }\n  } else {\n    if (mapBrowserEvent.type == _ol_MapBrowserEventType_.POINTERDOWN) {\n      var handled = this.handleDownEvent_(mapBrowserEvent);\n      this.handlingDownUpSequence = handled;\n      stopEvent = this.shouldStopEvent(handled);\n    } else if (mapBrowserEvent.type == _ol_MapBrowserEventType_.POINTERMOVE) {\n      this.handleMoveEvent_(mapBrowserEvent);\n    }\n  }\n  return !stopEvent;\n};\n\n\n/**\n * This method is used to determine if \"down\" events should be propagated to\n * other interactions or should be stopped.\n *\n * The method receives the return code of the \"handleDownEvent\" function.\n *\n * By default this function is the \"identity\" function. It's overidden in\n * child classes.\n *\n * @param {boolean} handled Was the event handled by the interaction?\n * @return {boolean} Should the event be stopped?\n * @protected\n */\n_ol_interaction_Pointer_.prototype.shouldStopEvent = function(handled) {\n  return handled;\n};\nexport default _ol_interaction_Pointer_;\n","/**\n * @enum {string}\n */\nvar _ol_CollectionEventType_ = {\n  /**\n   * Triggered when an item is added to the collection.\n   * @event ol.Collection.Event#add\n   * @api\n   */\n  ADD: 'add',\n  /**\n   * Triggered when an item is removed from the collection.\n   * @event ol.Collection.Event#remove\n   * @api\n   */\n  REMOVE: 'remove'\n};\n\nexport default _ol_CollectionEventType_;\n","import _ol_asserts_ from './asserts.js';\nimport _ol_math_ from './math.js';\nvar _ol_color_ = {};\n\n\n/**\n * This RegExp matches # followed by 3, 4, 6, or 8 hex digits.\n * @const\n * @type {RegExp}\n * @private\n */\n_ol_color_.HEX_COLOR_RE_ = /^#(?:[0-9a-f]{3,4}){1,2}$/i;\n\n\n/**\n * Regular expression for matching potential named color style strings.\n * @const\n * @type {RegExp}\n * @private\n */\n_ol_color_.NAMED_COLOR_RE_ = /^([a-z]*)$/i;\n\n\n/**\n * Return the color as an array. This function maintains a cache of calculated\n * arrays which means the result should not be modified.\n * @param {ol.Color|string} color Color.\n * @return {ol.Color} Color.\n * @api\n */\n_ol_color_.asArray = function(color) {\n  if (Array.isArray(color)) {\n    return color;\n  } else {\n    return _ol_color_.fromString(/** @type {string} */ (color));\n  }\n};\n\n\n/**\n * Return the color as an rgba string.\n * @param {ol.Color|string} color Color.\n * @return {string} Rgba string.\n * @api\n */\n_ol_color_.asString = function(color) {\n  if (typeof color === 'string') {\n    return color;\n  } else {\n    return _ol_color_.toString(color);\n  }\n};\n\n/**\n * Return named color as an rgba string.\n * @param {string} color Named color.\n * @return {string} Rgb string.\n */\n_ol_color_.fromNamed = function(color) {\n  var el = document.createElement('div');\n  el.style.color = color;\n  document.body.appendChild(el);\n  var rgb = getComputedStyle(el).color;\n  document.body.removeChild(el);\n  return rgb;\n};\n\n\n/**\n * @param {string} s String.\n * @return {ol.Color} Color.\n */\n_ol_color_.fromString = (\n  function() {\n\n    // We maintain a small cache of parsed strings.  To provide cheap LRU-like\n    // semantics, whenever the cache grows too large we simply delete an\n    // arbitrary 25% of the entries.\n\n    /**\n     * @const\n     * @type {number}\n     */\n    var MAX_CACHE_SIZE = 1024;\n\n    /**\n     * @type {Object.<string, ol.Color>}\n     */\n    var cache = {};\n\n    /**\n     * @type {number}\n     */\n    var cacheSize = 0;\n\n    return (\n      /**\n       * @param {string} s String.\n       * @return {ol.Color} Color.\n       */\n      function(s) {\n        var color;\n        if (cache.hasOwnProperty(s)) {\n          color = cache[s];\n        } else {\n          if (cacheSize >= MAX_CACHE_SIZE) {\n            var i = 0;\n            var key;\n            for (key in cache) {\n              if ((i++ & 3) === 0) {\n                delete cache[key];\n                --cacheSize;\n              }\n            }\n          }\n          color = _ol_color_.fromStringInternal_(s);\n          cache[s] = color;\n          ++cacheSize;\n        }\n        return color;\n      }\n    );\n\n  })();\n\n\n/**\n * @param {string} s String.\n * @private\n * @return {ol.Color} Color.\n */\n_ol_color_.fromStringInternal_ = function(s) {\n  var r, g, b, a, color, parts;\n\n  if (_ol_color_.NAMED_COLOR_RE_.exec(s)) {\n    s = _ol_color_.fromNamed(s);\n  }\n\n  if (_ol_color_.HEX_COLOR_RE_.exec(s)) { // hex\n    var n = s.length - 1; // number of hex digits\n    var d; // number of digits per channel\n    if (n <= 4) {\n      d = 1;\n    } else {\n      d = 2;\n    }\n    var hasAlpha = n === 4 || n === 8;\n    r = parseInt(s.substr(1 + 0 * d, d), 16);\n    g = parseInt(s.substr(1 + 1 * d, d), 16);\n    b = parseInt(s.substr(1 + 2 * d, d), 16);\n    if (hasAlpha) {\n      a = parseInt(s.substr(1 + 3 * d, d), 16);\n    } else {\n      a = 255;\n    }\n    if (d == 1) {\n      r = (r << 4) + r;\n      g = (g << 4) + g;\n      b = (b << 4) + b;\n      if (hasAlpha) {\n        a = (a << 4) + a;\n      }\n    }\n    color = [r, g, b, a / 255];\n  } else if (s.indexOf('rgba(') == 0) { // rgba()\n    parts = s.slice(5, -1).split(',').map(Number);\n    color = _ol_color_.normalize(parts);\n  } else if (s.indexOf('rgb(') == 0) { // rgb()\n    parts = s.slice(4, -1).split(',').map(Number);\n    parts.push(1);\n    color = _ol_color_.normalize(parts);\n  } else {\n    _ol_asserts_.assert(false, 14); // Invalid color\n  }\n  return /** @type {ol.Color} */ (color);\n};\n\n\n/**\n * @param {ol.Color} color Color.\n * @param {ol.Color=} opt_color Color.\n * @return {ol.Color} Clamped color.\n */\n_ol_color_.normalize = function(color, opt_color) {\n  var result = opt_color || [];\n  result[0] = _ol_math_.clamp((color[0] + 0.5) | 0, 0, 255);\n  result[1] = _ol_math_.clamp((color[1] + 0.5) | 0, 0, 255);\n  result[2] = _ol_math_.clamp((color[2] + 0.5) | 0, 0, 255);\n  result[3] = _ol_math_.clamp(color[3], 0, 1);\n  return result;\n};\n\n\n/**\n * @param {ol.Color} color Color.\n * @return {string} String.\n */\n_ol_color_.toString = function(color) {\n  var r = color[0];\n  if (r != (r | 0)) {\n    r = (r + 0.5) | 0;\n  }\n  var g = color[1];\n  if (g != (g | 0)) {\n    g = (g + 0.5) | 0;\n  }\n  var b = color[2];\n  if (b != (b | 0)) {\n    b = (b + 0.5) | 0;\n  }\n  var a = color[3] === undefined ? 1 : color[3];\n  return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\n};\nexport default _ol_color_;\n","/**\n * @enum {string}\n */\nvar _ol_render_EventType_ = {\n  /**\n   * @event ol.render.Event#postcompose\n   * @api\n   */\n  POSTCOMPOSE: 'postcompose',\n  /**\n   * @event ol.render.Event#precompose\n   * @api\n   */\n  PRECOMPOSE: 'precompose',\n  /**\n   * @event ol.render.Event#render\n   * @api\n   */\n  RENDER: 'render'\n};\n\nexport default _ol_render_EventType_;\n","import _ol_color_ from './color.js';\nvar _ol_colorlike_ = {};\n\n\n/**\n * @param {ol.Color|ol.ColorLike} color Color.\n * @return {ol.ColorLike} The color as an ol.ColorLike\n * @api\n */\n_ol_colorlike_.asColorLike = function(color) {\n  if (_ol_colorlike_.isColorLike(color)) {\n    return /** @type {string|CanvasPattern|CanvasGradient} */ (color);\n  } else {\n    return _ol_color_.asString(/** @type {ol.Color} */ (color));\n  }\n};\n\n\n/**\n * @param {?} color The value that is potentially an ol.ColorLike\n * @return {boolean} Whether the color is an ol.ColorLike\n */\n_ol_colorlike_.isColorLike = function(color) {\n  return (\n    typeof color === 'string' ||\n    color instanceof CanvasPattern ||\n    color instanceof CanvasGradient\n  );\n};\nexport default _ol_colorlike_;\n","/**\n * State of the source, one of 'undefined', 'loading', 'ready' or 'error'.\n * @enum {string}\n */\nvar _ol_source_State_ = {\n  UNDEFINED: 'undefined',\n  LOADING: 'loading',\n  READY: 'ready',\n  ERROR: 'error'\n};\n\nexport default _ol_source_State_;\n\n","import _ol_ from '../index.js';\n\n/**\n * @classdesc\n * Set stroke style for vector features.\n * Note that the defaults given are the Canvas defaults, which will be used if\n * option is not defined. The `get` functions return whatever was entered in\n * the options; they will not return the default.\n *\n * @constructor\n * @param {olx.style.StrokeOptions=} opt_options Options.\n * @api\n */\nvar _ol_style_Stroke_ = function(opt_options) {\n\n  var options = opt_options || {};\n\n  /**\n   * @private\n   * @type {ol.Color|ol.ColorLike}\n   */\n  this.color_ = options.color !== undefined ? options.color : null;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.lineCap_ = options.lineCap;\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.lineDash_ = options.lineDash !== undefined ? options.lineDash : null;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.lineDashOffset_ = options.lineDashOffset;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.lineJoin_ = options.lineJoin;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.miterLimit_ = options.miterLimit;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.width_ = options.width;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.checksum_ = undefined;\n};\n\n\n/**\n * Clones the style.\n * @return {ol.style.Stroke} The cloned style.\n * @api\n */\n_ol_style_Stroke_.prototype.clone = function() {\n  var color = this.getColor();\n  return new _ol_style_Stroke_({\n    color: (color && color.slice) ? color.slice() : color || undefined,\n    lineCap: this.getLineCap(),\n    lineDash: this.getLineDash() ? this.getLineDash().slice() : undefined,\n    lineDashOffset: this.getLineDashOffset(),\n    lineJoin: this.getLineJoin(),\n    miterLimit: this.getMiterLimit(),\n    width: this.getWidth()\n  });\n};\n\n\n/**\n * Get the stroke color.\n * @return {ol.Color|ol.ColorLike} Color.\n * @api\n */\n_ol_style_Stroke_.prototype.getColor = function() {\n  return this.color_;\n};\n\n\n/**\n * Get the line cap type for the stroke.\n * @return {string|undefined} Line cap.\n * @api\n */\n_ol_style_Stroke_.prototype.getLineCap = function() {\n  return this.lineCap_;\n};\n\n\n/**\n * Get the line dash style for the stroke.\n * @return {Array.<number>} Line dash.\n * @api\n */\n_ol_style_Stroke_.prototype.getLineDash = function() {\n  return this.lineDash_;\n};\n\n\n/**\n * Get the line dash offset for the stroke.\n * @return {number|undefined} Line dash offset.\n * @api\n */\n_ol_style_Stroke_.prototype.getLineDashOffset = function() {\n  return this.lineDashOffset_;\n};\n\n\n/**\n * Get the line join type for the stroke.\n * @return {string|undefined} Line join.\n * @api\n */\n_ol_style_Stroke_.prototype.getLineJoin = function() {\n  return this.lineJoin_;\n};\n\n\n/**\n * Get the miter limit for the stroke.\n * @return {number|undefined} Miter limit.\n * @api\n */\n_ol_style_Stroke_.prototype.getMiterLimit = function() {\n  return this.miterLimit_;\n};\n\n\n/**\n * Get the stroke width.\n * @return {number|undefined} Width.\n * @api\n */\n_ol_style_Stroke_.prototype.getWidth = function() {\n  return this.width_;\n};\n\n\n/**\n * Set the color.\n *\n * @param {ol.Color|ol.ColorLike} color Color.\n * @api\n */\n_ol_style_Stroke_.prototype.setColor = function(color) {\n  this.color_ = color;\n  this.checksum_ = undefined;\n};\n\n\n/**\n * Set the line cap.\n *\n * @param {string|undefined} lineCap Line cap.\n * @api\n */\n_ol_style_Stroke_.prototype.setLineCap = function(lineCap) {\n  this.lineCap_ = lineCap;\n  this.checksum_ = undefined;\n};\n\n\n/**\n * Set the line dash.\n *\n * Please note that Internet Explorer 10 and lower [do not support][mdn] the\n * `setLineDash` method on the `CanvasRenderingContext2D` and therefore this\n * property will have no visual effect in these browsers.\n *\n * [mdn]: https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setLineDash#Browser_compatibility\n *\n * @param {Array.<number>} lineDash Line dash.\n * @api\n */\n_ol_style_Stroke_.prototype.setLineDash = function(lineDash) {\n  this.lineDash_ = lineDash;\n  this.checksum_ = undefined;\n};\n\n\n/**\n * Set the line dash offset.\n *\n * @param {number|undefined} lineDashOffset Line dash offset.\n * @api\n */\n_ol_style_Stroke_.prototype.setLineDashOffset = function(lineDashOffset) {\n  this.lineDashOffset_ = lineDashOffset;\n  this.checksum_ = undefined;\n};\n\n\n/**\n * Set the line join.\n *\n * @param {string|undefined} lineJoin Line join.\n * @api\n */\n_ol_style_Stroke_.prototype.setLineJoin = function(lineJoin) {\n  this.lineJoin_ = lineJoin;\n  this.checksum_ = undefined;\n};\n\n\n/**\n * Set the miter limit.\n *\n * @param {number|undefined} miterLimit Miter limit.\n * @api\n */\n_ol_style_Stroke_.prototype.setMiterLimit = function(miterLimit) {\n  this.miterLimit_ = miterLimit;\n  this.checksum_ = undefined;\n};\n\n\n/**\n * Set the width.\n *\n * @param {number|undefined} width Width.\n * @api\n */\n_ol_style_Stroke_.prototype.setWidth = function(width) {\n  this.width_ = width;\n  this.checksum_ = undefined;\n};\n\n\n/**\n * @return {string} The checksum.\n */\n_ol_style_Stroke_.prototype.getChecksum = function() {\n  if (this.checksum_ === undefined) {\n    this.checksum_ = 's';\n    if (this.color_) {\n      if (typeof this.color_ === 'string') {\n        this.checksum_ += this.color_;\n      } else {\n        this.checksum_ += _ol_.getUid(this.color_).toString();\n      }\n    } else {\n      this.checksum_ += '-';\n    }\n    this.checksum_ += ',' +\n        (this.lineCap_ !== undefined ?\n          this.lineCap_.toString() : '-') + ',' +\n        (this.lineDash_ ?\n          this.lineDash_.toString() : '-') + ',' +\n        (this.lineDashOffset_ !== undefined ?\n          this.lineDashOffset_ : '-') + ',' +\n        (this.lineJoin_ !== undefined ?\n          this.lineJoin_ : '-') + ',' +\n        (this.miterLimit_ !== undefined ?\n          this.miterLimit_.toString() : '-') + ',' +\n        (this.width_ !== undefined ?\n          this.width_.toString() : '-');\n  }\n\n  return this.checksum_;\n};\nexport default _ol_style_Stroke_;\n","import _ol_ from '../index.js';\nimport _ol_Collection_ from '../collection.js';\nimport _ol_CollectionEventType_ from '../collectioneventtype.js';\nimport _ol_Object_ from '../object.js';\nimport _ol_ObjectEventType_ from '../objecteventtype.js';\nimport _ol_asserts_ from '../asserts.js';\nimport _ol_events_ from '../events.js';\nimport _ol_events_EventType_ from '../events/eventtype.js';\nimport _ol_extent_ from '../extent.js';\nimport _ol_layer_Base_ from '../layer/base.js';\nimport _ol_obj_ from '../obj.js';\nimport _ol_source_State_ from '../source/state.js';\n\n/**\n * @classdesc\n * A {@link ol.Collection} of layers that are handled together.\n *\n * A generic `change` event is triggered when the group/Collection changes.\n *\n * @constructor\n * @extends {ol.layer.Base}\n * @param {olx.layer.GroupOptions=} opt_options Layer options.\n * @api\n */\nvar _ol_layer_Group_ = function(opt_options) {\n\n  var options = opt_options || {};\n  var baseOptions = /** @type {olx.layer.GroupOptions} */\n      (_ol_obj_.assign({}, options));\n  delete baseOptions.layers;\n\n  var layers = options.layers;\n\n  _ol_layer_Base_.call(this, baseOptions);\n\n  /**\n   * @private\n   * @type {Array.<ol.EventsKey>}\n   */\n  this.layersListenerKeys_ = [];\n\n  /**\n   * @private\n   * @type {Object.<string, Array.<ol.EventsKey>>}\n   */\n  this.listenerKeys_ = {};\n\n  _ol_events_.listen(this,\n      _ol_Object_.getChangeEventType(_ol_layer_Group_.Property_.LAYERS),\n      this.handleLayersChanged_, this);\n\n  if (layers) {\n    if (Array.isArray(layers)) {\n      layers = new _ol_Collection_(layers.slice(), {unique: true});\n    } else {\n      _ol_asserts_.assert(layers instanceof _ol_Collection_,\n          43); // Expected `layers` to be an array or an `ol.Collection`\n      layers = layers;\n    }\n  } else {\n    layers = new _ol_Collection_(undefined, {unique: true});\n  }\n\n  this.setLayers(layers);\n\n};\n\n_ol_.inherits(_ol_layer_Group_, _ol_layer_Base_);\n\n\n/**\n * @private\n */\n_ol_layer_Group_.prototype.handleLayerChange_ = function() {\n  this.changed();\n};\n\n\n/**\n * @param {ol.events.Event} event Event.\n * @private\n */\n_ol_layer_Group_.prototype.handleLayersChanged_ = function(event) {\n  this.layersListenerKeys_.forEach(_ol_events_.unlistenByKey);\n  this.layersListenerKeys_.length = 0;\n\n  var layers = this.getLayers();\n  this.layersListenerKeys_.push(\n      _ol_events_.listen(layers, _ol_CollectionEventType_.ADD,\n          this.handleLayersAdd_, this),\n      _ol_events_.listen(layers, _ol_CollectionEventType_.REMOVE,\n          this.handleLayersRemove_, this));\n\n  for (var id in this.listenerKeys_) {\n    this.listenerKeys_[id].forEach(_ol_events_.unlistenByKey);\n  }\n  _ol_obj_.clear(this.listenerKeys_);\n\n  var layersArray = layers.getArray();\n  var i, ii, layer;\n  for (i = 0, ii = layersArray.length; i < ii; i++) {\n    layer = layersArray[i];\n    this.listenerKeys_[_ol_.getUid(layer).toString()] = [\n      _ol_events_.listen(layer, _ol_ObjectEventType_.PROPERTYCHANGE,\n          this.handleLayerChange_, this),\n      _ol_events_.listen(layer, _ol_events_EventType_.CHANGE,\n          this.handleLayerChange_, this)\n    ];\n  }\n\n  this.changed();\n};\n\n\n/**\n * @param {ol.Collection.Event} collectionEvent Collection event.\n * @private\n */\n_ol_layer_Group_.prototype.handleLayersAdd_ = function(collectionEvent) {\n  var layer = /** @type {ol.layer.Base} */ (collectionEvent.element);\n  var key = _ol_.getUid(layer).toString();\n  this.listenerKeys_[key] = [\n    _ol_events_.listen(layer, _ol_ObjectEventType_.PROPERTYCHANGE,\n        this.handleLayerChange_, this),\n    _ol_events_.listen(layer, _ol_events_EventType_.CHANGE,\n        this.handleLayerChange_, this)\n  ];\n  this.changed();\n};\n\n\n/**\n * @param {ol.Collection.Event} collectionEvent Collection event.\n * @private\n */\n_ol_layer_Group_.prototype.handleLayersRemove_ = function(collectionEvent) {\n  var layer = /** @type {ol.layer.Base} */ (collectionEvent.element);\n  var key = _ol_.getUid(layer).toString();\n  this.listenerKeys_[key].forEach(_ol_events_.unlistenByKey);\n  delete this.listenerKeys_[key];\n  this.changed();\n};\n\n\n/**\n * Returns the {@link ol.Collection collection} of {@link ol.layer.Layer layers}\n * in this group.\n * @return {!ol.Collection.<ol.layer.Base>} Collection of\n *   {@link ol.layer.Base layers} that are part of this group.\n * @observable\n * @api\n */\n_ol_layer_Group_.prototype.getLayers = function() {\n  return (\n    /** @type {!ol.Collection.<ol.layer.Base>} */ this.get(\n        _ol_layer_Group_.Property_.LAYERS)\n  );\n};\n\n\n/**\n * Set the {@link ol.Collection collection} of {@link ol.layer.Layer layers}\n * in this group.\n * @param {!ol.Collection.<ol.layer.Base>} layers Collection of\n *   {@link ol.layer.Base layers} that are part of this group.\n * @observable\n * @api\n */\n_ol_layer_Group_.prototype.setLayers = function(layers) {\n  this.set(_ol_layer_Group_.Property_.LAYERS, layers);\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_layer_Group_.prototype.getLayersArray = function(opt_array) {\n  var array = opt_array !== undefined ? opt_array : [];\n  this.getLayers().forEach(function(layer) {\n    layer.getLayersArray(array);\n  });\n  return array;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_layer_Group_.prototype.getLayerStatesArray = function(opt_states) {\n  var states = opt_states !== undefined ? opt_states : [];\n\n  var pos = states.length;\n\n  this.getLayers().forEach(function(layer) {\n    layer.getLayerStatesArray(states);\n  });\n\n  var ownLayerState = this.getLayerState();\n  var i, ii, layerState;\n  for (i = pos, ii = states.length; i < ii; i++) {\n    layerState = states[i];\n    layerState.opacity *= ownLayerState.opacity;\n    layerState.visible = layerState.visible && ownLayerState.visible;\n    layerState.maxResolution = Math.min(\n        layerState.maxResolution, ownLayerState.maxResolution);\n    layerState.minResolution = Math.max(\n        layerState.minResolution, ownLayerState.minResolution);\n    if (ownLayerState.extent !== undefined) {\n      if (layerState.extent !== undefined) {\n        layerState.extent = _ol_extent_.getIntersection(\n            layerState.extent, ownLayerState.extent);\n      } else {\n        layerState.extent = ownLayerState.extent;\n      }\n    }\n  }\n\n  return states;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_layer_Group_.prototype.getSourceState = function() {\n  return _ol_source_State_.READY;\n};\n\n/**\n * @enum {string}\n * @private\n */\n_ol_layer_Group_.Property_ = {\n  LAYERS: 'layers'\n};\nexport default _ol_layer_Group_;\n","var _ol_size_ = {};\n\n\n/**\n * Returns a buffered size.\n * @param {ol.Size} size Size.\n * @param {number} buffer Buffer.\n * @param {ol.Size=} opt_size Optional reusable size array.\n * @return {ol.Size} The buffered size.\n */\n_ol_size_.buffer = function(size, buffer, opt_size) {\n  if (opt_size === undefined) {\n    opt_size = [0, 0];\n  }\n  opt_size[0] = size[0] + 2 * buffer;\n  opt_size[1] = size[1] + 2 * buffer;\n  return opt_size;\n};\n\n\n/**\n * Determines if a size has a positive area.\n * @param {ol.Size} size The size to test.\n * @return {boolean} The size has a positive area.\n */\n_ol_size_.hasArea = function(size) {\n  return size[0] > 0 && size[1] > 0;\n};\n\n\n/**\n * Returns a size scaled by a ratio. The result will be an array of integers.\n * @param {ol.Size} size Size.\n * @param {number} ratio Ratio.\n * @param {ol.Size=} opt_size Optional reusable size array.\n * @return {ol.Size} The scaled size.\n */\n_ol_size_.scale = function(size, ratio, opt_size) {\n  if (opt_size === undefined) {\n    opt_size = [0, 0];\n  }\n  opt_size[0] = (size[0] * ratio + 0.5) | 0;\n  opt_size[1] = (size[1] * ratio + 0.5) | 0;\n  return opt_size;\n};\n\n\n/**\n * Returns an `ol.Size` array for the passed in number (meaning: square) or\n * `ol.Size` array.\n * (meaning: non-square),\n * @param {number|ol.Size} size Width and height.\n * @param {ol.Size=} opt_size Optional reusable size array.\n * @return {ol.Size} Size.\n * @api\n */\n_ol_size_.toSize = function(size, opt_size) {\n  if (Array.isArray(size)) {\n    return size;\n  } else {\n    if (opt_size === undefined) {\n      opt_size = [size, size];\n    } else {\n      opt_size[0] = opt_size[1] = /** @type {number} */ (size);\n    }\n    return opt_size;\n  }\n};\nexport default _ol_size_;\n","import _ol_extent_ from '../../extent.js';\nvar _ol_geom_flat_contains_ = {};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {ol.Extent} extent Extent.\n * @return {boolean} Contains extent.\n */\n_ol_geom_flat_contains_.linearRingContainsExtent = function(flatCoordinates, offset, end, stride, extent) {\n  var outside = _ol_extent_.forEachCorner(extent,\n      /**\n       * @param {ol.Coordinate} coordinate Coordinate.\n       * @return {boolean} Contains (x, y).\n       */\n      function(coordinate) {\n        return !_ol_geom_flat_contains_.linearRingContainsXY(flatCoordinates,\n            offset, end, stride, coordinate[0], coordinate[1]);\n      });\n  return !outside;\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {boolean} Contains (x, y).\n */\n_ol_geom_flat_contains_.linearRingContainsXY = function(flatCoordinates, offset, end, stride, x, y) {\n  // http://geomalgorithms.com/a03-_inclusion.html\n  // Copyright 2000 softSurfer, 2012 Dan Sunday\n  // This code may be freely used and modified for any purpose\n  // providing that this copyright notice is included with it.\n  // SoftSurfer makes no warranty for this code, and cannot be held\n  // liable for any real or imagined damage resulting from its use.\n  // Users of this code must verify correctness for their application.\n  var wn = 0;\n  var x1 = flatCoordinates[end - stride];\n  var y1 = flatCoordinates[end - stride + 1];\n  for (; offset < end; offset += stride) {\n    var x2 = flatCoordinates[offset];\n    var y2 = flatCoordinates[offset + 1];\n    if (y1 <= y) {\n      if (y2 > y && ((x2 - x1) * (y - y1)) - ((x - x1) * (y2 - y1)) > 0) {\n        wn++;\n      }\n    } else if (y2 <= y && ((x2 - x1) * (y - y1)) - ((x - x1) * (y2 - y1)) < 0) {\n      wn--;\n    }\n    x1 = x2;\n    y1 = y2;\n  }\n  return wn !== 0;\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {boolean} Contains (x, y).\n */\n_ol_geom_flat_contains_.linearRingsContainsXY = function(flatCoordinates, offset, ends, stride, x, y) {\n  if (ends.length === 0) {\n    return false;\n  }\n  if (!_ol_geom_flat_contains_.linearRingContainsXY(\n      flatCoordinates, offset, ends[0], stride, x, y)) {\n    return false;\n  }\n  var i, ii;\n  for (i = 1, ii = ends.length; i < ii; ++i) {\n    if (_ol_geom_flat_contains_.linearRingContainsXY(\n        flatCoordinates, ends[i - 1], ends[i], stride, x, y)) {\n      return false;\n    }\n  }\n  return true;\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<Array.<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {boolean} Contains (x, y).\n */\n_ol_geom_flat_contains_.linearRingssContainsXY = function(flatCoordinates, offset, endss, stride, x, y) {\n  if (endss.length === 0) {\n    return false;\n  }\n  var i, ii;\n  for (i = 0, ii = endss.length; i < ii; ++i) {\n    var ends = endss[i];\n    if (_ol_geom_flat_contains_.linearRingsContainsXY(\n        flatCoordinates, offset, ends, stride, x, y)) {\n      return true;\n    }\n    offset = ends[ends.length - 1];\n  }\n  return false;\n};\nexport default _ol_geom_flat_contains_;\n","var _ol_geom_flat_inflate_ = {};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {Array.<ol.Coordinate>=} opt_coordinates Coordinates.\n * @return {Array.<ol.Coordinate>} Coordinates.\n */\n_ol_geom_flat_inflate_.coordinates = function(flatCoordinates, offset, end, stride, opt_coordinates) {\n  var coordinates = opt_coordinates !== undefined ? opt_coordinates : [];\n  var i = 0;\n  var j;\n  for (j = offset; j < end; j += stride) {\n    coordinates[i++] = flatCoordinates.slice(j, j + stride);\n  }\n  coordinates.length = i;\n  return coordinates;\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {Array.<Array.<ol.Coordinate>>=} opt_coordinatess Coordinatess.\n * @return {Array.<Array.<ol.Coordinate>>} Coordinatess.\n */\n_ol_geom_flat_inflate_.coordinatess = function(flatCoordinates, offset, ends, stride, opt_coordinatess) {\n  var coordinatess = opt_coordinatess !== undefined ? opt_coordinatess : [];\n  var i = 0;\n  var j, jj;\n  for (j = 0, jj = ends.length; j < jj; ++j) {\n    var end = ends[j];\n    coordinatess[i++] = _ol_geom_flat_inflate_.coordinates(\n        flatCoordinates, offset, end, stride, coordinatess[i]);\n    offset = end;\n  }\n  coordinatess.length = i;\n  return coordinatess;\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<Array.<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {Array.<Array.<Array.<ol.Coordinate>>>=} opt_coordinatesss\n *     Coordinatesss.\n * @return {Array.<Array.<Array.<ol.Coordinate>>>} Coordinatesss.\n */\n_ol_geom_flat_inflate_.coordinatesss = function(flatCoordinates, offset, endss, stride, opt_coordinatesss) {\n  var coordinatesss = opt_coordinatesss !== undefined ? opt_coordinatesss : [];\n  var i = 0;\n  var j, jj;\n  for (j = 0, jj = endss.length; j < jj; ++j) {\n    var ends = endss[j];\n    coordinatesss[i++] = _ol_geom_flat_inflate_.coordinatess(\n        flatCoordinates, offset, ends, stride, coordinatesss[i]);\n    offset = ends[ends.length - 1];\n  }\n  coordinatesss.length = i;\n  return coordinatesss;\n};\nexport default _ol_geom_flat_inflate_;\n","var _ol_string_ = {};\n\n/**\n * @param {number} number Number to be formatted\n * @param {number} width The desired width\n * @param {number=} opt_precision Precision of the output string (i.e. number of decimal places)\n * @returns {string} Formatted string\n*/\n_ol_string_.padNumber = function(number, width, opt_precision) {\n  var numberString = opt_precision !== undefined ? number.toFixed(opt_precision) : '' + number;\n  var decimal = numberString.indexOf('.');\n  decimal = decimal === -1 ? numberString.length : decimal;\n  return decimal > width ? numberString : new Array(1 + width - decimal).join('0') + numberString;\n};\n\n/**\n * Adapted from https://github.com/omichelsen/compare-versions/blob/master/index.js\n * @param {string|number} v1 First version\n * @param {string|number} v2 Second version\n * @returns {number} Value\n */\n_ol_string_.compareVersions = function(v1, v2) {\n  var s1 = ('' + v1).split('.');\n  var s2 = ('' + v2).split('.');\n\n  for (var i = 0; i < Math.max(s1.length, s2.length); i++) {\n    var n1 = parseInt(s1[i] || '0', 10);\n    var n2 = parseInt(s2[i] || '0', 10);\n\n    if (n1 > n2) {\n      return 1;\n    }\n    if (n2 > n1) {\n      return -1;\n    }\n  }\n\n  return 0;\n};\nexport default _ol_string_;\n","import _ol_math_ from './math.js';\nimport _ol_string_ from './string.js';\nvar _ol_coordinate_ = {};\n\n\n/**\n * Add `delta` to `coordinate`. `coordinate` is modified in place and returned\n * by the function.\n *\n * Example:\n *\n *     var coord = [7.85, 47.983333];\n *     ol.coordinate.add(coord, [-2, 4]);\n *     // coord is now [5.85, 51.983333]\n *\n * @param {ol.Coordinate} coordinate Coordinate.\n * @param {ol.Coordinate} delta Delta.\n * @return {ol.Coordinate} The input coordinate adjusted by the given delta.\n * @api\n */\n_ol_coordinate_.add = function(coordinate, delta) {\n  coordinate[0] += delta[0];\n  coordinate[1] += delta[1];\n  return coordinate;\n};\n\n\n/**\n * Calculates the point closest to the passed coordinate on the passed circle.\n *\n * @param {ol.Coordinate} coordinate The coordinate.\n * @param {ol.geom.Circle} circle The circle.\n * @return {ol.Coordinate} Closest point on the circumference\n */\n_ol_coordinate_.closestOnCircle = function(coordinate, circle) {\n  var r = circle.getRadius();\n  var center = circle.getCenter();\n  var x0 = center[0];\n  var y0 = center[1];\n  var x1 = coordinate[0];\n  var y1 = coordinate[1];\n\n  var dx = x1 - x0;\n  var dy = y1 - y0;\n  if (dx === 0 && dy === 0) {\n    dx = 1;\n  }\n  var d = Math.sqrt(dx * dx + dy * dy);\n\n  var x, y;\n\n  x = x0 + r * dx / d;\n  y = y0 + r * dy / d;\n\n  return [x, y];\n};\n\n\n/**\n * Calculates the point closest to the passed coordinate on the passed segment.\n * This is the foot of the perpendicular of the coordinate to the segment when\n * the foot is on the segment, or the closest segment coordinate when the foot\n * is outside the segment.\n *\n * @param {ol.Coordinate} coordinate The coordinate.\n * @param {Array.<ol.Coordinate>} segment The two coordinates of the segment.\n * @return {ol.Coordinate} The foot of the perpendicular of the coordinate to\n *     the segment.\n */\n_ol_coordinate_.closestOnSegment = function(coordinate, segment) {\n  var x0 = coordinate[0];\n  var y0 = coordinate[1];\n  var start = segment[0];\n  var end = segment[1];\n  var x1 = start[0];\n  var y1 = start[1];\n  var x2 = end[0];\n  var y2 = end[1];\n  var dx = x2 - x1;\n  var dy = y2 - y1;\n  var along = (dx === 0 && dy === 0) ? 0 :\n    ((dx * (x0 - x1)) + (dy * (y0 - y1))) / ((dx * dx + dy * dy) || 0);\n  var x, y;\n  if (along <= 0) {\n    x = x1;\n    y = y1;\n  } else if (along >= 1) {\n    x = x2;\n    y = y2;\n  } else {\n    x = x1 + along * dx;\n    y = y1 + along * dy;\n  }\n  return [x, y];\n};\n\n\n/**\n * Returns a {@link ol.CoordinateFormatType} function that can be used to format\n * a {ol.Coordinate} to a string.\n *\n * Example without specifying the fractional digits:\n *\n *     var coord = [7.85, 47.983333];\n *     var stringifyFunc = ol.coordinate.createStringXY();\n *     var out = stringifyFunc(coord);\n *     // out is now '8, 48'\n *\n * Example with explicitly specifying 2 fractional digits:\n *\n *     var coord = [7.85, 47.983333];\n *     var stringifyFunc = ol.coordinate.createStringXY(2);\n *     var out = stringifyFunc(coord);\n *     // out is now '7.85, 47.98'\n *\n * @param {number=} opt_fractionDigits The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {ol.CoordinateFormatType} Coordinate format.\n * @api\n */\n_ol_coordinate_.createStringXY = function(opt_fractionDigits) {\n  return (\n    /**\n     * @param {ol.Coordinate|undefined} coordinate Coordinate.\n     * @return {string} String XY.\n     */\n    function(coordinate) {\n      return _ol_coordinate_.toStringXY(coordinate, opt_fractionDigits);\n    }\n  );\n};\n\n\n/**\n * @param {string} hemispheres Hemispheres.\n * @param {number} degrees Degrees.\n * @param {number=} opt_fractionDigits The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} String.\n */\n_ol_coordinate_.degreesToStringHDMS = function(hemispheres, degrees, opt_fractionDigits) {\n  var normalizedDegrees = _ol_math_.modulo(degrees + 180, 360) - 180;\n  var x = Math.abs(3600 * normalizedDegrees);\n  var dflPrecision = opt_fractionDigits || 0;\n  var precision = Math.pow(10, dflPrecision);\n\n  var deg = Math.floor(x / 3600);\n  var min = Math.floor((x - deg * 3600) / 60);\n  var sec = x - (deg * 3600) - (min * 60);\n  sec = Math.ceil(sec * precision) / precision;\n\n  if (sec >= 60) {\n    sec = 0;\n    min += 1;\n  }\n\n  if (min >= 60) {\n    min = 0;\n    deg += 1;\n  }\n\n  return deg + '\\u00b0 ' + _ol_string_.padNumber(min, 2) + '\\u2032 ' +\n    _ol_string_.padNumber(sec, 2, dflPrecision) + '\\u2033' +\n    (normalizedDegrees == 0 ? '' : ' ' + hemispheres.charAt(normalizedDegrees < 0 ? 1 : 0));\n};\n\n\n/**\n * Transforms the given {@link ol.Coordinate} to a string using the given string\n * template. The strings `{x}` and `{y}` in the template will be replaced with\n * the first and second coordinate values respectively.\n *\n * Example without specifying the fractional digits:\n *\n *     var coord = [7.85, 47.983333];\n *     var template = 'Coordinate is ({x}|{y}).';\n *     var out = ol.coordinate.format(coord, template);\n *     // out is now 'Coordinate is (8|48).'\n *\n * Example explicitly specifying the fractional digits:\n *\n *     var coord = [7.85, 47.983333];\n *     var template = 'Coordinate is ({x}|{y}).';\n *     var out = ol.coordinate.format(coord, template, 2);\n *     // out is now 'Coordinate is (7.85|47.98).'\n *\n * @param {ol.Coordinate|undefined} coordinate Coordinate.\n * @param {string} template A template string with `{x}` and `{y}` placeholders\n *     that will be replaced by first and second coordinate values.\n * @param {number=} opt_fractionDigits The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} Formatted coordinate.\n * @api\n */\n_ol_coordinate_.format = function(coordinate, template, opt_fractionDigits) {\n  if (coordinate) {\n    return template\n        .replace('{x}', coordinate[0].toFixed(opt_fractionDigits))\n        .replace('{y}', coordinate[1].toFixed(opt_fractionDigits));\n  } else {\n    return '';\n  }\n};\n\n\n/**\n * @param {ol.Coordinate} coordinate1 First coordinate.\n * @param {ol.Coordinate} coordinate2 Second coordinate.\n * @return {boolean} Whether the passed coordinates are equal.\n */\n_ol_coordinate_.equals = function(coordinate1, coordinate2) {\n  var equals = true;\n  for (var i = coordinate1.length - 1; i >= 0; --i) {\n    if (coordinate1[i] != coordinate2[i]) {\n      equals = false;\n      break;\n    }\n  }\n  return equals;\n};\n\n\n/**\n * Rotate `coordinate` by `angle`. `coordinate` is modified in place and\n * returned by the function.\n *\n * Example:\n *\n *     var coord = [7.85, 47.983333];\n *     var rotateRadians = Math.PI / 2; // 90 degrees\n *     ol.coordinate.rotate(coord, rotateRadians);\n *     // coord is now [-47.983333, 7.85]\n *\n * @param {ol.Coordinate} coordinate Coordinate.\n * @param {number} angle Angle in radian.\n * @return {ol.Coordinate} Coordinate.\n * @api\n */\n_ol_coordinate_.rotate = function(coordinate, angle) {\n  var cosAngle = Math.cos(angle);\n  var sinAngle = Math.sin(angle);\n  var x = coordinate[0] * cosAngle - coordinate[1] * sinAngle;\n  var y = coordinate[1] * cosAngle + coordinate[0] * sinAngle;\n  coordinate[0] = x;\n  coordinate[1] = y;\n  return coordinate;\n};\n\n\n/**\n * Scale `coordinate` by `scale`. `coordinate` is modified in place and returned\n * by the function.\n *\n * Example:\n *\n *     var coord = [7.85, 47.983333];\n *     var scale = 1.2;\n *     ol.coordinate.scale(coord, scale);\n *     // coord is now [9.42, 57.5799996]\n *\n * @param {ol.Coordinate} coordinate Coordinate.\n * @param {number} scale Scale factor.\n * @return {ol.Coordinate} Coordinate.\n */\n_ol_coordinate_.scale = function(coordinate, scale) {\n  coordinate[0] *= scale;\n  coordinate[1] *= scale;\n  return coordinate;\n};\n\n\n/**\n * Subtract `delta` to `coordinate`. `coordinate` is modified in place and\n * returned by the function.\n *\n * @param {ol.Coordinate} coordinate Coordinate.\n * @param {ol.Coordinate} delta Delta.\n * @return {ol.Coordinate} Coordinate.\n */\n_ol_coordinate_.sub = function(coordinate, delta) {\n  coordinate[0] -= delta[0];\n  coordinate[1] -= delta[1];\n  return coordinate;\n};\n\n\n/**\n * @param {ol.Coordinate} coord1 First coordinate.\n * @param {ol.Coordinate} coord2 Second coordinate.\n * @return {number} Squared distance between coord1 and coord2.\n */\n_ol_coordinate_.squaredDistance = function(coord1, coord2) {\n  var dx = coord1[0] - coord2[0];\n  var dy = coord1[1] - coord2[1];\n  return dx * dx + dy * dy;\n};\n\n\n/**\n * @param {ol.Coordinate} coord1 First coordinate.\n * @param {ol.Coordinate} coord2 Second coordinate.\n * @return {number} Distance between coord1 and coord2.\n */\n_ol_coordinate_.distance = function(coord1, coord2) {\n  return Math.sqrt(_ol_coordinate_.squaredDistance(coord1, coord2));\n};\n\n\n/**\n * Calculate the squared distance from a coordinate to a line segment.\n *\n * @param {ol.Coordinate} coordinate Coordinate of the point.\n * @param {Array.<ol.Coordinate>} segment Line segment (2 coordinates).\n * @return {number} Squared distance from the point to the line segment.\n */\n_ol_coordinate_.squaredDistanceToSegment = function(coordinate, segment) {\n  return _ol_coordinate_.squaredDistance(coordinate,\n      _ol_coordinate_.closestOnSegment(coordinate, segment));\n};\n\n\n/**\n * Format a geographic coordinate with the hemisphere, degrees, minutes, and\n * seconds.\n *\n * Example without specifying fractional digits:\n *\n *     var coord = [7.85, 47.983333];\n *     var out = ol.coordinate.toStringHDMS(coord);\n *     // out is now '47° 58′ 60″ N 7° 50′ 60″ E'\n *\n * Example explicitly specifying 1 fractional digit:\n *\n *     var coord = [7.85, 47.983333];\n *     var out = ol.coordinate.toStringHDMS(coord, 1);\n *     // out is now '47° 58′ 60.0″ N 7° 50′ 60.0″ E'\n *\n * @param {ol.Coordinate|undefined} coordinate Coordinate.\n * @param {number=} opt_fractionDigits The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} Hemisphere, degrees, minutes and seconds.\n * @api\n */\n_ol_coordinate_.toStringHDMS = function(coordinate, opt_fractionDigits) {\n  if (coordinate) {\n    return _ol_coordinate_.degreesToStringHDMS('NS', coordinate[1], opt_fractionDigits) + ' ' +\n        _ol_coordinate_.degreesToStringHDMS('EW', coordinate[0], opt_fractionDigits);\n  } else {\n    return '';\n  }\n};\n\n\n/**\n * Format a coordinate as a comma delimited string.\n *\n * Example without specifying fractional digits:\n *\n *     var coord = [7.85, 47.983333];\n *     var out = ol.coordinate.toStringXY(coord);\n *     // out is now '8, 48'\n *\n * Example explicitly specifying 1 fractional digit:\n *\n *     var coord = [7.85, 47.983333];\n *     var out = ol.coordinate.toStringXY(coord, 1);\n *     // out is now '7.8, 48.0'\n *\n * @param {ol.Coordinate|undefined} coordinate Coordinate.\n * @param {number=} opt_fractionDigits The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} XY.\n * @api\n */\n_ol_coordinate_.toStringXY = function(coordinate, opt_fractionDigits) {\n  return _ol_coordinate_.format(coordinate, '{x}, {y}', opt_fractionDigits);\n};\nexport default _ol_coordinate_;\n","var _ol_geom_flat_reverse_ = {};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n */\n_ol_geom_flat_reverse_.coordinates = function(flatCoordinates, offset, end, stride) {\n  while (offset < end - stride) {\n    var i;\n    for (i = 0; i < stride; ++i) {\n      var tmp = flatCoordinates[offset + i];\n      flatCoordinates[offset + i] = flatCoordinates[end - stride + i];\n      flatCoordinates[end - stride + i] = tmp;\n    }\n    offset += stride;\n    end -= stride;\n  }\n};\nexport default _ol_geom_flat_reverse_;\n","import _ol_geom_flat_reverse_ from '../flat/reverse.js';\nvar _ol_geom_flat_orient_ = {};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {boolean} Is clockwise.\n */\n_ol_geom_flat_orient_.linearRingIsClockwise = function(flatCoordinates, offset, end, stride) {\n  // http://tinyurl.com/clockwise-method\n  // https://github.com/OSGeo/gdal/blob/trunk/gdal/ogr/ogrlinearring.cpp\n  var edge = 0;\n  var x1 = flatCoordinates[end - stride];\n  var y1 = flatCoordinates[end - stride + 1];\n  for (; offset < end; offset += stride) {\n    var x2 = flatCoordinates[offset];\n    var y2 = flatCoordinates[offset + 1];\n    edge += (x2 - x1) * (y2 + y1);\n    x1 = x2;\n    y1 = y2;\n  }\n  return edge > 0;\n};\n\n\n/**\n * Determines if linear rings are oriented.  By default, left-hand orientation\n * is tested (first ring must be clockwise, remaining rings counter-clockwise).\n * To test for right-hand orientation, use the `opt_right` argument.\n *\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<number>} ends Array of end indexes.\n * @param {number} stride Stride.\n * @param {boolean=} opt_right Test for right-hand orientation\n *     (counter-clockwise exterior ring and clockwise interior rings).\n * @return {boolean} Rings are correctly oriented.\n */\n_ol_geom_flat_orient_.linearRingsAreOriented = function(flatCoordinates, offset, ends, stride, opt_right) {\n  var right = opt_right !== undefined ? opt_right : false;\n  var i, ii;\n  for (i = 0, ii = ends.length; i < ii; ++i) {\n    var end = ends[i];\n    var isClockwise = _ol_geom_flat_orient_.linearRingIsClockwise(\n        flatCoordinates, offset, end, stride);\n    if (i === 0) {\n      if ((right && isClockwise) || (!right && !isClockwise)) {\n        return false;\n      }\n    } else {\n      if ((right && !isClockwise) || (!right && isClockwise)) {\n        return false;\n      }\n    }\n    offset = end;\n  }\n  return true;\n};\n\n\n/**\n * Determines if linear rings are oriented.  By default, left-hand orientation\n * is tested (first ring must be clockwise, remaining rings counter-clockwise).\n * To test for right-hand orientation, use the `opt_right` argument.\n *\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<Array.<number>>} endss Array of array of end indexes.\n * @param {number} stride Stride.\n * @param {boolean=} opt_right Test for right-hand orientation\n *     (counter-clockwise exterior ring and clockwise interior rings).\n * @return {boolean} Rings are correctly oriented.\n */\n_ol_geom_flat_orient_.linearRingssAreOriented = function(flatCoordinates, offset, endss, stride, opt_right) {\n  var i, ii;\n  for (i = 0, ii = endss.length; i < ii; ++i) {\n    if (!_ol_geom_flat_orient_.linearRingsAreOriented(\n        flatCoordinates, offset, endss[i], stride, opt_right)) {\n      return false;\n    }\n  }\n  return true;\n};\n\n\n/**\n * Orient coordinates in a flat array of linear rings.  By default, rings\n * are oriented following the left-hand rule (clockwise for exterior and\n * counter-clockwise for interior rings).  To orient according to the\n * right-hand rule, use the `opt_right` argument.\n *\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {boolean=} opt_right Follow the right-hand rule for orientation.\n * @return {number} End.\n */\n_ol_geom_flat_orient_.orientLinearRings = function(flatCoordinates, offset, ends, stride, opt_right) {\n  var right = opt_right !== undefined ? opt_right : false;\n  var i, ii;\n  for (i = 0, ii = ends.length; i < ii; ++i) {\n    var end = ends[i];\n    var isClockwise = _ol_geom_flat_orient_.linearRingIsClockwise(\n        flatCoordinates, offset, end, stride);\n    var reverse = i === 0 ?\n      (right && isClockwise) || (!right && !isClockwise) :\n      (right && !isClockwise) || (!right && isClockwise);\n    if (reverse) {\n      _ol_geom_flat_reverse_.coordinates(flatCoordinates, offset, end, stride);\n    }\n    offset = end;\n  }\n  return offset;\n};\n\n\n/**\n * Orient coordinates in a flat array of linear rings.  By default, rings\n * are oriented following the left-hand rule (clockwise for exterior and\n * counter-clockwise for interior rings).  To orient according to the\n * right-hand rule, use the `opt_right` argument.\n *\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<Array.<number>>} endss Array of array of end indexes.\n * @param {number} stride Stride.\n * @param {boolean=} opt_right Follow the right-hand rule for orientation.\n * @return {number} End.\n */\n_ol_geom_flat_orient_.orientLinearRingss = function(flatCoordinates, offset, endss, stride, opt_right) {\n  var i, ii;\n  for (i = 0, ii = endss.length; i < ii; ++i) {\n    offset = _ol_geom_flat_orient_.orientLinearRings(\n        flatCoordinates, offset, endss[i], stride, opt_right);\n  }\n  return offset;\n};\nexport default _ol_geom_flat_orient_;\n","/**\n * A representation of a contiguous block of tiles.  A tile range is specified\n * by its min/max tile coordinates and is inclusive of coordinates.\n *\n * @constructor\n * @param {number} minX Minimum X.\n * @param {number} maxX Maximum X.\n * @param {number} minY Minimum Y.\n * @param {number} maxY Maximum Y.\n * @struct\n */\nvar _ol_TileRange_ = function(minX, maxX, minY, maxY) {\n\n  /**\n   * @type {number}\n   */\n  this.minX = minX;\n\n  /**\n   * @type {number}\n   */\n  this.maxX = maxX;\n\n  /**\n   * @type {number}\n   */\n  this.minY = minY;\n\n  /**\n   * @type {number}\n   */\n  this.maxY = maxY;\n\n};\n\n\n/**\n * @param {number} minX Minimum X.\n * @param {number} maxX Maximum X.\n * @param {number} minY Minimum Y.\n * @param {number} maxY Maximum Y.\n * @param {ol.TileRange|undefined} tileRange TileRange.\n * @return {ol.TileRange} Tile range.\n */\n_ol_TileRange_.createOrUpdate = function(minX, maxX, minY, maxY, tileRange) {\n  if (tileRange !== undefined) {\n    tileRange.minX = minX;\n    tileRange.maxX = maxX;\n    tileRange.minY = minY;\n    tileRange.maxY = maxY;\n    return tileRange;\n  } else {\n    return new _ol_TileRange_(minX, maxX, minY, maxY);\n  }\n};\n\n\n/**\n * @param {ol.TileCoord} tileCoord Tile coordinate.\n * @return {boolean} Contains tile coordinate.\n */\n_ol_TileRange_.prototype.contains = function(tileCoord) {\n  return this.containsXY(tileCoord[1], tileCoord[2]);\n};\n\n\n/**\n * @param {ol.TileRange} tileRange Tile range.\n * @return {boolean} Contains.\n */\n_ol_TileRange_.prototype.containsTileRange = function(tileRange) {\n  return this.minX <= tileRange.minX && tileRange.maxX <= this.maxX &&\n      this.minY <= tileRange.minY && tileRange.maxY <= this.maxY;\n};\n\n\n/**\n * @param {number} x Tile coordinate x.\n * @param {number} y Tile coordinate y.\n * @return {boolean} Contains coordinate.\n */\n_ol_TileRange_.prototype.containsXY = function(x, y) {\n  return this.minX <= x && x <= this.maxX && this.minY <= y && y <= this.maxY;\n};\n\n\n/**\n * @param {ol.TileRange} tileRange Tile range.\n * @return {boolean} Equals.\n */\n_ol_TileRange_.prototype.equals = function(tileRange) {\n  return this.minX == tileRange.minX && this.minY == tileRange.minY &&\n      this.maxX == tileRange.maxX && this.maxY == tileRange.maxY;\n};\n\n\n/**\n * @param {ol.TileRange} tileRange Tile range.\n */\n_ol_TileRange_.prototype.extend = function(tileRange) {\n  if (tileRange.minX < this.minX) {\n    this.minX = tileRange.minX;\n  }\n  if (tileRange.maxX > this.maxX) {\n    this.maxX = tileRange.maxX;\n  }\n  if (tileRange.minY < this.minY) {\n    this.minY = tileRange.minY;\n  }\n  if (tileRange.maxY > this.maxY) {\n    this.maxY = tileRange.maxY;\n  }\n};\n\n\n/**\n * @return {number} Height.\n */\n_ol_TileRange_.prototype.getHeight = function() {\n  return this.maxY - this.minY + 1;\n};\n\n\n/**\n * @return {ol.Size} Size.\n */\n_ol_TileRange_.prototype.getSize = function() {\n  return [this.getWidth(), this.getHeight()];\n};\n\n\n/**\n * @return {number} Width.\n */\n_ol_TileRange_.prototype.getWidth = function() {\n  return this.maxX - this.minX + 1;\n};\n\n\n/**\n * @param {ol.TileRange} tileRange Tile range.\n * @return {boolean} Intersects.\n */\n_ol_TileRange_.prototype.intersects = function(tileRange) {\n  return this.minX <= tileRange.maxX &&\n      this.maxX >= tileRange.minX &&\n      this.minY <= tileRange.maxY &&\n      this.maxY >= tileRange.minY;\n};\nexport default _ol_TileRange_;\n","import _ol_ from '../index.js';\nimport _ol_MapEventType_ from '../mapeventtype.js';\nimport _ol_Object_ from '../object.js';\nimport _ol_dom_ from '../dom.js';\nimport _ol_events_ from '../events.js';\n\n/**\n * @classdesc\n * A control is a visible widget with a DOM element in a fixed position on the\n * screen. They can involve user input (buttons), or be informational only;\n * the position is determined using CSS. By default these are placed in the\n * container with CSS class name `ol-overlaycontainer-stopevent`, but can use\n * any outside DOM element.\n *\n * This is the base class for controls. You can use it for simple custom\n * controls by creating the element with listeners, creating an instance:\n * ```js\n * var myControl = new ol.control.Control({element: myElement});\n * ```\n * and then adding this to the map.\n *\n * The main advantage of having this as a control rather than a simple separate\n * DOM element is that preventing propagation is handled for you. Controls\n * will also be `ol.Object`s in a `ol.Collection`, so you can use their\n * methods.\n *\n * You can also extend this base for your own control class. See\n * examples/custom-controls for an example of how to do this.\n *\n * @constructor\n * @extends {ol.Object}\n * @implements {oli.control.Control}\n * @param {olx.control.ControlOptions} options Control options.\n * @api\n */\nvar _ol_control_Control_ = function(options) {\n\n  _ol_Object_.call(this);\n\n  /**\n   * @protected\n   * @type {Element}\n   */\n  this.element = options.element ? options.element : null;\n\n  /**\n   * @private\n   * @type {Element}\n   */\n  this.target_ = null;\n\n  /**\n   * @private\n   * @type {ol.PluggableMap}\n   */\n  this.map_ = null;\n\n  /**\n   * @protected\n   * @type {!Array.<ol.EventsKey>}\n   */\n  this.listenerKeys = [];\n\n  /**\n   * @type {function(ol.MapEvent)}\n   */\n  this.render = options.render ? options.render : _ol_.nullFunction;\n\n  if (options.target) {\n    this.setTarget(options.target);\n  }\n\n};\n\n_ol_.inherits(_ol_control_Control_, _ol_Object_);\n\n\n/**\n * @inheritDoc\n */\n_ol_control_Control_.prototype.disposeInternal = function() {\n  _ol_dom_.removeNode(this.element);\n  _ol_Object_.prototype.disposeInternal.call(this);\n};\n\n\n/**\n * Get the map associated with this control.\n * @return {ol.PluggableMap} Map.\n * @api\n */\n_ol_control_Control_.prototype.getMap = function() {\n  return this.map_;\n};\n\n\n/**\n * Remove the control from its current map and attach it to the new map.\n * Subclasses may set up event handlers to get notified about changes to\n * the map here.\n * @param {ol.PluggableMap} map Map.\n * @override\n * @api\n */\n_ol_control_Control_.prototype.setMap = function(map) {\n  if (this.map_) {\n    _ol_dom_.removeNode(this.element);\n  }\n  for (var i = 0, ii = this.listenerKeys.length; i < ii; ++i) {\n    _ol_events_.unlistenByKey(this.listenerKeys[i]);\n  }\n  this.listenerKeys.length = 0;\n  this.map_ = map;\n  if (this.map_) {\n    var target = this.target_ ?\n      this.target_ : map.getOverlayContainerStopEvent();\n    target.appendChild(this.element);\n    if (this.render !== _ol_.nullFunction) {\n      this.listenerKeys.push(_ol_events_.listen(map,\n          _ol_MapEventType_.POSTRENDER, this.render, this));\n    }\n    map.render();\n  }\n};\n\n\n/**\n * This function is used to set a target element for the control. It has no\n * effect if it is called after the control has been added to the map (i.e.\n * after `setMap` is called on the control). If no `target` is set in the\n * options passed to the control constructor and if `setTarget` is not called\n * then the control is added to the map's overlay container.\n * @param {Element|string} target Target.\n * @api\n */\n_ol_control_Control_.prototype.setTarget = function(target) {\n  this.target_ = typeof target === 'string' ?\n    document.getElementById(target) :\n    target;\n};\nexport default _ol_control_Control_;\n","import _ol_math_ from '../../math.js';\nvar _ol_geom_flat_closest_ = {};\n\n\n/**\n * Returns the point on the 2D line segment flatCoordinates[offset1] to\n * flatCoordinates[offset2] that is closest to the point (x, y).  Extra\n * dimensions are linearly interpolated.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset1 Offset 1.\n * @param {number} offset2 Offset 2.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array.<number>} closestPoint Closest point.\n */\n_ol_geom_flat_closest_.point = function(flatCoordinates, offset1, offset2, stride, x, y, closestPoint) {\n  var x1 = flatCoordinates[offset1];\n  var y1 = flatCoordinates[offset1 + 1];\n  var dx = flatCoordinates[offset2] - x1;\n  var dy = flatCoordinates[offset2 + 1] - y1;\n  var i, offset;\n  if (dx === 0 && dy === 0) {\n    offset = offset1;\n  } else {\n    var t = ((x - x1) * dx + (y - y1) * dy) / (dx * dx + dy * dy);\n    if (t > 1) {\n      offset = offset2;\n    } else if (t > 0) {\n      for (i = 0; i < stride; ++i) {\n        closestPoint[i] = _ol_math_.lerp(flatCoordinates[offset1 + i],\n            flatCoordinates[offset2 + i], t);\n      }\n      closestPoint.length = stride;\n      return;\n    } else {\n      offset = offset1;\n    }\n  }\n  for (i = 0; i < stride; ++i) {\n    closestPoint[i] = flatCoordinates[offset + i];\n  }\n  closestPoint.length = stride;\n};\n\n\n/**\n * Return the squared of the largest distance between any pair of consecutive\n * coordinates.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} maxSquaredDelta Max squared delta.\n * @return {number} Max squared delta.\n */\n_ol_geom_flat_closest_.getMaxSquaredDelta = function(flatCoordinates, offset, end, stride, maxSquaredDelta) {\n  var x1 = flatCoordinates[offset];\n  var y1 = flatCoordinates[offset + 1];\n  for (offset += stride; offset < end; offset += stride) {\n    var x2 = flatCoordinates[offset];\n    var y2 = flatCoordinates[offset + 1];\n    var squaredDelta = _ol_math_.squaredDistance(x1, y1, x2, y2);\n    if (squaredDelta > maxSquaredDelta) {\n      maxSquaredDelta = squaredDelta;\n    }\n    x1 = x2;\n    y1 = y2;\n  }\n  return maxSquaredDelta;\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} maxSquaredDelta Max squared delta.\n * @return {number} Max squared delta.\n */\n_ol_geom_flat_closest_.getsMaxSquaredDelta = function(flatCoordinates, offset, ends, stride, maxSquaredDelta) {\n  var i, ii;\n  for (i = 0, ii = ends.length; i < ii; ++i) {\n    var end = ends[i];\n    maxSquaredDelta = _ol_geom_flat_closest_.getMaxSquaredDelta(\n        flatCoordinates, offset, end, stride, maxSquaredDelta);\n    offset = end;\n  }\n  return maxSquaredDelta;\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<Array.<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} maxSquaredDelta Max squared delta.\n * @return {number} Max squared delta.\n */\n_ol_geom_flat_closest_.getssMaxSquaredDelta = function(flatCoordinates, offset, endss, stride, maxSquaredDelta) {\n  var i, ii;\n  for (i = 0, ii = endss.length; i < ii; ++i) {\n    var ends = endss[i];\n    maxSquaredDelta = _ol_geom_flat_closest_.getsMaxSquaredDelta(\n        flatCoordinates, offset, ends, stride, maxSquaredDelta);\n    offset = ends[ends.length - 1];\n  }\n  return maxSquaredDelta;\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} maxDelta Max delta.\n * @param {boolean} isRing Is ring.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array.<number>} closestPoint Closest point.\n * @param {number} minSquaredDistance Minimum squared distance.\n * @param {Array.<number>=} opt_tmpPoint Temporary point object.\n * @return {number} Minimum squared distance.\n */\n_ol_geom_flat_closest_.getClosestPoint = function(flatCoordinates, offset, end,\n    stride, maxDelta, isRing, x, y, closestPoint, minSquaredDistance,\n    opt_tmpPoint) {\n  if (offset == end) {\n    return minSquaredDistance;\n  }\n  var i, squaredDistance;\n  if (maxDelta === 0) {\n    // All points are identical, so just test the first point.\n    squaredDistance = _ol_math_.squaredDistance(\n        x, y, flatCoordinates[offset], flatCoordinates[offset + 1]);\n    if (squaredDistance < minSquaredDistance) {\n      for (i = 0; i < stride; ++i) {\n        closestPoint[i] = flatCoordinates[offset + i];\n      }\n      closestPoint.length = stride;\n      return squaredDistance;\n    } else {\n      return minSquaredDistance;\n    }\n  }\n  var tmpPoint = opt_tmpPoint ? opt_tmpPoint : [NaN, NaN];\n  var index = offset + stride;\n  while (index < end) {\n    _ol_geom_flat_closest_.point(\n        flatCoordinates, index - stride, index, stride, x, y, tmpPoint);\n    squaredDistance = _ol_math_.squaredDistance(x, y, tmpPoint[0], tmpPoint[1]);\n    if (squaredDistance < minSquaredDistance) {\n      minSquaredDistance = squaredDistance;\n      for (i = 0; i < stride; ++i) {\n        closestPoint[i] = tmpPoint[i];\n      }\n      closestPoint.length = stride;\n      index += stride;\n    } else {\n      // Skip ahead multiple points, because we know that all the skipped\n      // points cannot be any closer than the closest point we have found so\n      // far.  We know this because we know how close the current point is, how\n      // close the closest point we have found so far is, and the maximum\n      // distance between consecutive points.  For example, if we're currently\n      // at distance 10, the best we've found so far is 3, and that the maximum\n      // distance between consecutive points is 2, then we'll need to skip at\n      // least (10 - 3) / 2 == 3 (rounded down) points to have any chance of\n      // finding a closer point.  We use Math.max(..., 1) to ensure that we\n      // always advance at least one point, to avoid an infinite loop.\n      index += stride * Math.max(\n          ((Math.sqrt(squaredDistance) -\n            Math.sqrt(minSquaredDistance)) / maxDelta) | 0, 1);\n    }\n  }\n  if (isRing) {\n    // Check the closing segment.\n    _ol_geom_flat_closest_.point(\n        flatCoordinates, end - stride, offset, stride, x, y, tmpPoint);\n    squaredDistance = _ol_math_.squaredDistance(x, y, tmpPoint[0], tmpPoint[1]);\n    if (squaredDistance < minSquaredDistance) {\n      minSquaredDistance = squaredDistance;\n      for (i = 0; i < stride; ++i) {\n        closestPoint[i] = tmpPoint[i];\n      }\n      closestPoint.length = stride;\n    }\n  }\n  return minSquaredDistance;\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} maxDelta Max delta.\n * @param {boolean} isRing Is ring.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array.<number>} closestPoint Closest point.\n * @param {number} minSquaredDistance Minimum squared distance.\n * @param {Array.<number>=} opt_tmpPoint Temporary point object.\n * @return {number} Minimum squared distance.\n */\n_ol_geom_flat_closest_.getsClosestPoint = function(flatCoordinates, offset, ends,\n    stride, maxDelta, isRing, x, y, closestPoint, minSquaredDistance,\n    opt_tmpPoint) {\n  var tmpPoint = opt_tmpPoint ? opt_tmpPoint : [NaN, NaN];\n  var i, ii;\n  for (i = 0, ii = ends.length; i < ii; ++i) {\n    var end = ends[i];\n    minSquaredDistance = _ol_geom_flat_closest_.getClosestPoint(\n        flatCoordinates, offset, end, stride,\n        maxDelta, isRing, x, y, closestPoint, minSquaredDistance, tmpPoint);\n    offset = end;\n  }\n  return minSquaredDistance;\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<Array.<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} maxDelta Max delta.\n * @param {boolean} isRing Is ring.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array.<number>} closestPoint Closest point.\n * @param {number} minSquaredDistance Minimum squared distance.\n * @param {Array.<number>=} opt_tmpPoint Temporary point object.\n * @return {number} Minimum squared distance.\n */\n_ol_geom_flat_closest_.getssClosestPoint = function(flatCoordinates, offset,\n    endss, stride, maxDelta, isRing, x, y, closestPoint, minSquaredDistance,\n    opt_tmpPoint) {\n  var tmpPoint = opt_tmpPoint ? opt_tmpPoint : [NaN, NaN];\n  var i, ii;\n  for (i = 0, ii = endss.length; i < ii; ++i) {\n    var ends = endss[i];\n    minSquaredDistance = _ol_geom_flat_closest_.getsClosestPoint(\n        flatCoordinates, offset, ends, stride,\n        maxDelta, isRing, x, y, closestPoint, minSquaredDistance, tmpPoint);\n    offset = ends[ends.length - 1];\n  }\n  return minSquaredDistance;\n};\nexport default _ol_geom_flat_closest_;\n","import _ol_ from '../index.js';\nimport _ol_color_ from '../color.js';\n\n/**\n * @classdesc\n * Set fill style for vector features.\n *\n * @constructor\n * @param {olx.style.FillOptions=} opt_options Options.\n * @api\n */\nvar _ol_style_Fill_ = function(opt_options) {\n\n  var options = opt_options || {};\n\n  /**\n   * @private\n   * @type {ol.Color|ol.ColorLike}\n   */\n  this.color_ = options.color !== undefined ? options.color : null;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.checksum_ = undefined;\n};\n\n\n/**\n * Clones the style. The color is not cloned if it is an {@link ol.ColorLike}.\n * @return {ol.style.Fill} The cloned style.\n * @api\n */\n_ol_style_Fill_.prototype.clone = function() {\n  var color = this.getColor();\n  return new _ol_style_Fill_({\n    color: (color && color.slice) ? color.slice() : color || undefined\n  });\n};\n\n\n/**\n * Get the fill color.\n * @return {ol.Color|ol.ColorLike} Color.\n * @api\n */\n_ol_style_Fill_.prototype.getColor = function() {\n  return this.color_;\n};\n\n\n/**\n * Set the color.\n *\n * @param {ol.Color|ol.ColorLike} color Color.\n * @api\n */\n_ol_style_Fill_.prototype.setColor = function(color) {\n  this.color_ = color;\n  this.checksum_ = undefined;\n};\n\n\n/**\n * @return {string} The checksum.\n */\n_ol_style_Fill_.prototype.getChecksum = function() {\n  if (this.checksum_ === undefined) {\n    if (\n      this.color_ instanceof CanvasPattern ||\n        this.color_ instanceof CanvasGradient\n    ) {\n      this.checksum_ = _ol_.getUid(this.color_).toString();\n    } else {\n      this.checksum_ = 'f' + (this.color_ ?\n        _ol_color_.asString(this.color_) : '-');\n    }\n  }\n\n  return this.checksum_;\n};\nexport default _ol_style_Fill_;\n","var _ol_geom_flat_deflate_ = {};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {ol.Coordinate} coordinate Coordinate.\n * @param {number} stride Stride.\n * @return {number} offset Offset.\n */\n_ol_geom_flat_deflate_.coordinate = function(flatCoordinates, offset, coordinate, stride) {\n  var i, ii;\n  for (i = 0, ii = coordinate.length; i < ii; ++i) {\n    flatCoordinates[offset++] = coordinate[i];\n  }\n  return offset;\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<ol.Coordinate>} coordinates Coordinates.\n * @param {number} stride Stride.\n * @return {number} offset Offset.\n */\n_ol_geom_flat_deflate_.coordinates = function(flatCoordinates, offset, coordinates, stride) {\n  var i, ii;\n  for (i = 0, ii = coordinates.length; i < ii; ++i) {\n    var coordinate = coordinates[i];\n    var j;\n    for (j = 0; j < stride; ++j) {\n      flatCoordinates[offset++] = coordinate[j];\n    }\n  }\n  return offset;\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<Array.<ol.Coordinate>>} coordinatess Coordinatess.\n * @param {number} stride Stride.\n * @param {Array.<number>=} opt_ends Ends.\n * @return {Array.<number>} Ends.\n */\n_ol_geom_flat_deflate_.coordinatess = function(flatCoordinates, offset, coordinatess, stride, opt_ends) {\n  var ends = opt_ends ? opt_ends : [];\n  var i = 0;\n  var j, jj;\n  for (j = 0, jj = coordinatess.length; j < jj; ++j) {\n    var end = _ol_geom_flat_deflate_.coordinates(\n        flatCoordinates, offset, coordinatess[j], stride);\n    ends[i++] = end;\n    offset = end;\n  }\n  ends.length = i;\n  return ends;\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<Array.<Array.<ol.Coordinate>>>} coordinatesss Coordinatesss.\n * @param {number} stride Stride.\n * @param {Array.<Array.<number>>=} opt_endss Endss.\n * @return {Array.<Array.<number>>} Endss.\n */\n_ol_geom_flat_deflate_.coordinatesss = function(flatCoordinates, offset, coordinatesss, stride, opt_endss) {\n  var endss = opt_endss ? opt_endss : [];\n  var i = 0;\n  var j, jj;\n  for (j = 0, jj = coordinatesss.length; j < jj; ++j) {\n    var ends = _ol_geom_flat_deflate_.coordinatess(\n        flatCoordinates, offset, coordinatesss[j], stride, endss[i]);\n    endss[i++] = ends;\n    offset = ends[ends.length - 1];\n  }\n  endss.length = i;\n  return endss;\n};\nexport default _ol_geom_flat_deflate_;\n","import _ol_ from './index.js';\n\n/**\n * Objects that need to clean up after themselves.\n * @constructor\n */\nvar _ol_Disposable_ = function() {};\n\n/**\n * The object has already been disposed.\n * @type {boolean}\n * @private\n */\n_ol_Disposable_.prototype.disposed_ = false;\n\n/**\n * Clean up.\n */\n_ol_Disposable_.prototype.dispose = function() {\n  if (!this.disposed_) {\n    this.disposed_ = true;\n    this.disposeInternal();\n  }\n};\n\n/**\n * Extension point for disposable objects.\n * @protected\n */\n_ol_Disposable_.prototype.disposeInternal = _ol_.nullFunction;\nexport default _ol_Disposable_;\n","import _ol_ from './index.js';\nimport _ol_events_ from './events.js';\nimport _ol_events_EventTarget_ from './events/eventtarget.js';\nimport _ol_events_EventType_ from './events/eventtype.js';\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * An event target providing convenient methods for listener registration\n * and unregistration. A generic `change` event is always available through\n * {@link ol.Observable#changed}.\n *\n * @constructor\n * @extends {ol.events.EventTarget}\n * @fires ol.events.Event\n * @struct\n * @api\n */\nvar _ol_Observable_ = function() {\n\n  _ol_events_EventTarget_.call(this);\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.revision_ = 0;\n\n};\n\n_ol_.inherits(_ol_Observable_, _ol_events_EventTarget_);\n\n\n/**\n * Removes an event listener using the key returned by `on()` or `once()`.\n * @param {ol.EventsKey|Array.<ol.EventsKey>} key The key returned by `on()`\n *     or `once()` (or an array of keys).\n * @api\n */\n_ol_Observable_.unByKey = function(key) {\n  if (Array.isArray(key)) {\n    for (var i = 0, ii = key.length; i < ii; ++i) {\n      _ol_events_.unlistenByKey(key[i]);\n    }\n  } else {\n    _ol_events_.unlistenByKey(/** @type {ol.EventsKey} */ (key));\n  }\n};\n\n\n/**\n * Increases the revision counter and dispatches a 'change' event.\n * @api\n */\n_ol_Observable_.prototype.changed = function() {\n  ++this.revision_;\n  this.dispatchEvent(_ol_events_EventType_.CHANGE);\n};\n\n\n/**\n * Dispatches an event and calls all listeners listening for events\n * of this type. The event parameter can either be a string or an\n * Object with a `type` property.\n *\n * @param {{type: string,\n *     target: (EventTarget|ol.events.EventTarget|undefined)}|ol.events.Event|\n *     string} event Event object.\n * @function\n * @api\n */\n_ol_Observable_.prototype.dispatchEvent;\n\n\n/**\n * Get the version number for this object.  Each time the object is modified,\n * its version number will be incremented.\n * @return {number} Revision.\n * @api\n */\n_ol_Observable_.prototype.getRevision = function() {\n  return this.revision_;\n};\n\n\n/**\n * Listen for a certain type of event.\n * @param {string|Array.<string>} type The event type or array of event types.\n * @param {function(?): ?} listener The listener function.\n * @param {Object=} opt_this The object to use as `this` in `listener`.\n * @return {ol.EventsKey|Array.<ol.EventsKey>} Unique key for the listener. If\n *     called with an array of event types as the first argument, the return\n *     will be an array of keys.\n * @api\n */\n_ol_Observable_.prototype.on = function(type, listener, opt_this) {\n  if (Array.isArray(type)) {\n    var len = type.length;\n    var keys = new Array(len);\n    for (var i = 0; i < len; ++i) {\n      keys[i] = _ol_events_.listen(this, type[i], listener, opt_this);\n    }\n    return keys;\n  } else {\n    return _ol_events_.listen(\n        this, /** @type {string} */ (type), listener, opt_this);\n  }\n};\n\n\n/**\n * Listen once for a certain type of event.\n * @param {string|Array.<string>} type The event type or array of event types.\n * @param {function(?): ?} listener The listener function.\n * @param {Object=} opt_this The object to use as `this` in `listener`.\n * @return {ol.EventsKey|Array.<ol.EventsKey>} Unique key for the listener. If\n *     called with an array of event types as the first argument, the return\n *     will be an array of keys.\n * @api\n */\n_ol_Observable_.prototype.once = function(type, listener, opt_this) {\n  if (Array.isArray(type)) {\n    var len = type.length;\n    var keys = new Array(len);\n    for (var i = 0; i < len; ++i) {\n      keys[i] = _ol_events_.listenOnce(this, type[i], listener, opt_this);\n    }\n    return keys;\n  } else {\n    return _ol_events_.listenOnce(\n        this, /** @type {string} */ (type), listener, opt_this);\n  }\n};\n\n\n/**\n * Unlisten for a certain type of event.\n * @param {string|Array.<string>} type The event type or array of event types.\n * @param {function(?): ?} listener The listener function.\n * @param {Object=} opt_this The object which was used as `this` by the\n * `listener`.\n * @api\n */\n_ol_Observable_.prototype.un = function(type, listener, opt_this) {\n  if (Array.isArray(type)) {\n    for (var i = 0, ii = type.length; i < ii; ++i) {\n      _ol_events_.unlisten(this, type[i], listener, opt_this);\n    }\n    return;\n  } else {\n    _ol_events_.unlisten(this, /** @type {string} */ (type), listener, opt_this);\n  }\n};\nexport default _ol_Observable_;\n","/**\n * @enum {string}\n */\nvar _ol_ObjectEventType_ = {\n  /**\n   * Triggered when a property is changed.\n   * @event ol.Object.Event#propertychange\n   * @api\n   */\n  PROPERTYCHANGE: 'propertychange'\n};\n\nexport default _ol_ObjectEventType_;\n","import _ol_asserts_ from '../asserts.js';\nimport _ol_geom_GeometryType_ from '../geom/geometrytype.js';\nimport _ol_style_Circle_ from '../style/circle.js';\nimport _ol_style_Fill_ from '../style/fill.js';\nimport _ol_style_Stroke_ from '../style/stroke.js';\n\n/**\n * @classdesc\n * Container for vector feature rendering styles. Any changes made to the style\n * or its children through `set*()` methods will not take effect until the\n * feature or layer that uses the style is re-rendered.\n *\n * @constructor\n * @struct\n * @param {olx.style.StyleOptions=} opt_options Style options.\n * @api\n */\nvar _ol_style_Style_ = function(opt_options) {\n\n  var options = opt_options || {};\n\n  /**\n   * @private\n   * @type {string|ol.geom.Geometry|ol.StyleGeometryFunction}\n   */\n  this.geometry_ = null;\n\n  /**\n   * @private\n   * @type {!ol.StyleGeometryFunction}\n   */\n  this.geometryFunction_ = _ol_style_Style_.defaultGeometryFunction;\n\n  if (options.geometry !== undefined) {\n    this.setGeometry(options.geometry);\n  }\n\n  /**\n   * @private\n   * @type {ol.style.Fill}\n   */\n  this.fill_ = options.fill !== undefined ? options.fill : null;\n\n  /**\n   * @private\n   * @type {ol.style.Image}\n   */\n  this.image_ = options.image !== undefined ? options.image : null;\n\n  /**\n   * @private\n   * @type {ol.StyleRenderFunction|null}\n   */\n  this.renderer_ = options.renderer !== undefined ? options.renderer : null;\n\n  /**\n   * @private\n   * @type {ol.style.Stroke}\n   */\n  this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n\n  /**\n   * @private\n   * @type {ol.style.Text}\n   */\n  this.text_ = options.text !== undefined ? options.text : null;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.zIndex_ = options.zIndex;\n\n};\n\n\n/**\n * Clones the style.\n * @return {ol.style.Style} The cloned style.\n * @api\n */\n_ol_style_Style_.prototype.clone = function() {\n  var geometry = this.getGeometry();\n  if (geometry && geometry.clone) {\n    geometry = geometry.clone();\n  }\n  return new _ol_style_Style_({\n    geometry: geometry,\n    fill: this.getFill() ? this.getFill().clone() : undefined,\n    image: this.getImage() ? this.getImage().clone() : undefined,\n    stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n    text: this.getText() ? this.getText().clone() : undefined,\n    zIndex: this.getZIndex()\n  });\n};\n\n\n/**\n * Get the custom renderer function that was configured with\n * {@link #setRenderer} or the `renderer` constructor option.\n * @return {ol.StyleRenderFunction|null} Custom renderer function.\n * @api\n */\n_ol_style_Style_.prototype.getRenderer = function() {\n  return this.renderer_;\n};\n\n\n/**\n * Sets a custom renderer function for this style. When set, `fill`, `stroke`\n * and `image` options of the style will be ignored.\n * @param {ol.StyleRenderFunction|null} renderer Custom renderer function.\n * @api\n */\n_ol_style_Style_.prototype.setRenderer = function(renderer) {\n  this.renderer_ = renderer;\n};\n\n\n/**\n * Get the geometry to be rendered.\n * @return {string|ol.geom.Geometry|ol.StyleGeometryFunction}\n * Feature property or geometry or function that returns the geometry that will\n * be rendered with this style.\n * @api\n */\n_ol_style_Style_.prototype.getGeometry = function() {\n  return this.geometry_;\n};\n\n\n/**\n * Get the function used to generate a geometry for rendering.\n * @return {!ol.StyleGeometryFunction} Function that is called with a feature\n * and returns the geometry to render instead of the feature's geometry.\n * @api\n */\n_ol_style_Style_.prototype.getGeometryFunction = function() {\n  return this.geometryFunction_;\n};\n\n\n/**\n * Get the fill style.\n * @return {ol.style.Fill} Fill style.\n * @api\n */\n_ol_style_Style_.prototype.getFill = function() {\n  return this.fill_;\n};\n\n\n/**\n * Set the fill style.\n * @param {ol.style.Fill} fill Fill style.\n * @api\n */\n_ol_style_Style_.prototype.setFill = function(fill) {\n  this.fill_ = fill;\n};\n\n\n/**\n * Get the image style.\n * @return {ol.style.Image} Image style.\n * @api\n */\n_ol_style_Style_.prototype.getImage = function() {\n  return this.image_;\n};\n\n\n/**\n * Set the image style.\n * @param {ol.style.Image} image Image style.\n * @api\n */\n_ol_style_Style_.prototype.setImage = function(image) {\n  this.image_ = image;\n};\n\n\n/**\n * Get the stroke style.\n * @return {ol.style.Stroke} Stroke style.\n * @api\n */\n_ol_style_Style_.prototype.getStroke = function() {\n  return this.stroke_;\n};\n\n\n/**\n * Set the stroke style.\n * @param {ol.style.Stroke} stroke Stroke style.\n * @api\n */\n_ol_style_Style_.prototype.setStroke = function(stroke) {\n  this.stroke_ = stroke;\n};\n\n\n/**\n * Get the text style.\n * @return {ol.style.Text} Text style.\n * @api\n */\n_ol_style_Style_.prototype.getText = function() {\n  return this.text_;\n};\n\n\n/**\n * Set the text style.\n * @param {ol.style.Text} text Text style.\n * @api\n */\n_ol_style_Style_.prototype.setText = function(text) {\n  this.text_ = text;\n};\n\n\n/**\n * Get the z-index for the style.\n * @return {number|undefined} ZIndex.\n * @api\n */\n_ol_style_Style_.prototype.getZIndex = function() {\n  return this.zIndex_;\n};\n\n\n/**\n * Set a geometry that is rendered instead of the feature's geometry.\n *\n * @param {string|ol.geom.Geometry|ol.StyleGeometryFunction} geometry\n *     Feature property or geometry or function returning a geometry to render\n *     for this style.\n * @api\n */\n_ol_style_Style_.prototype.setGeometry = function(geometry) {\n  if (typeof geometry === 'function') {\n    this.geometryFunction_ = geometry;\n  } else if (typeof geometry === 'string') {\n    this.geometryFunction_ = function(feature) {\n      return /** @type {ol.geom.Geometry} */ (feature.get(geometry));\n    };\n  } else if (!geometry) {\n    this.geometryFunction_ = _ol_style_Style_.defaultGeometryFunction;\n  } else if (geometry !== undefined) {\n    this.geometryFunction_ = function() {\n      return /** @type {ol.geom.Geometry} */ (geometry);\n    };\n  }\n  this.geometry_ = geometry;\n};\n\n\n/**\n * Set the z-index.\n *\n * @param {number|undefined} zIndex ZIndex.\n * @api\n */\n_ol_style_Style_.prototype.setZIndex = function(zIndex) {\n  this.zIndex_ = zIndex;\n};\n\n\n/**\n * Convert the provided object into a style function.  Functions passed through\n * unchanged.  Arrays of ol.style.Style or single style objects wrapped in a\n * new style function.\n * @param {ol.StyleFunction|Array.<ol.style.Style>|ol.style.Style} obj\n *     A style function, a single style, or an array of styles.\n * @return {ol.StyleFunction} A style function.\n */\n_ol_style_Style_.createFunction = function(obj) {\n  var styleFunction;\n\n  if (typeof obj === 'function') {\n    styleFunction = obj;\n  } else {\n    /**\n     * @type {Array.<ol.style.Style>}\n     */\n    var styles;\n    if (Array.isArray(obj)) {\n      styles = obj;\n    } else {\n      _ol_asserts_.assert(obj instanceof _ol_style_Style_,\n          41); // Expected an `ol.style.Style` or an array of `ol.style.Style`\n      styles = [obj];\n    }\n    styleFunction = function() {\n      return styles;\n    };\n  }\n  return styleFunction;\n};\n\n\n/**\n * @type {Array.<ol.style.Style>}\n * @private\n */\n_ol_style_Style_.default_ = null;\n\n\n/**\n * @param {ol.Feature|ol.render.Feature} feature Feature.\n * @param {number} resolution Resolution.\n * @return {Array.<ol.style.Style>} Style.\n */\n_ol_style_Style_.defaultFunction = function(feature, resolution) {\n  // We don't use an immediately-invoked function\n  // and a closure so we don't get an error at script evaluation time in\n  // browsers that do not support Canvas. (ol.style.Circle does\n  // canvas.getContext('2d') at construction time, which will cause an.error\n  // in such browsers.)\n  if (!_ol_style_Style_.default_) {\n    var fill = new _ol_style_Fill_({\n      color: 'rgba(255,255,255,0.4)'\n    });\n    var stroke = new _ol_style_Stroke_({\n      color: '#3399CC',\n      width: 1.25\n    });\n    _ol_style_Style_.default_ = [\n      new _ol_style_Style_({\n        image: new _ol_style_Circle_({\n          fill: fill,\n          stroke: stroke,\n          radius: 5\n        }),\n        fill: fill,\n        stroke: stroke\n      })\n    ];\n  }\n  return _ol_style_Style_.default_;\n};\n\n\n/**\n * Default styles for editing features.\n * @return {Object.<ol.geom.GeometryType, Array.<ol.style.Style>>} Styles\n */\n_ol_style_Style_.createDefaultEditing = function() {\n  /** @type {Object.<ol.geom.GeometryType, Array.<ol.style.Style>>} */\n  var styles = {};\n  var white = [255, 255, 255, 1];\n  var blue = [0, 153, 255, 1];\n  var width = 3;\n  styles[_ol_geom_GeometryType_.POLYGON] = [\n    new _ol_style_Style_({\n      fill: new _ol_style_Fill_({\n        color: [255, 255, 255, 0.5]\n      })\n    })\n  ];\n  styles[_ol_geom_GeometryType_.MULTI_POLYGON] =\n      styles[_ol_geom_GeometryType_.POLYGON];\n\n  styles[_ol_geom_GeometryType_.LINE_STRING] = [\n    new _ol_style_Style_({\n      stroke: new _ol_style_Stroke_({\n        color: white,\n        width: width + 2\n      })\n    }),\n    new _ol_style_Style_({\n      stroke: new _ol_style_Stroke_({\n        color: blue,\n        width: width\n      })\n    })\n  ];\n  styles[_ol_geom_GeometryType_.MULTI_LINE_STRING] =\n      styles[_ol_geom_GeometryType_.LINE_STRING];\n\n  styles[_ol_geom_GeometryType_.CIRCLE] =\n      styles[_ol_geom_GeometryType_.POLYGON].concat(\n          styles[_ol_geom_GeometryType_.LINE_STRING]\n      );\n\n\n  styles[_ol_geom_GeometryType_.POINT] = [\n    new _ol_style_Style_({\n      image: new _ol_style_Circle_({\n        radius: width * 2,\n        fill: new _ol_style_Fill_({\n          color: blue\n        }),\n        stroke: new _ol_style_Stroke_({\n          color: white,\n          width: width / 2\n        })\n      }),\n      zIndex: Infinity\n    })\n  ];\n  styles[_ol_geom_GeometryType_.MULTI_POINT] =\n      styles[_ol_geom_GeometryType_.POINT];\n\n  styles[_ol_geom_GeometryType_.GEOMETRY_COLLECTION] =\n      styles[_ol_geom_GeometryType_.POLYGON].concat(\n          styles[_ol_geom_GeometryType_.LINE_STRING],\n          styles[_ol_geom_GeometryType_.POINT]\n      );\n\n  return styles;\n};\n\n\n/**\n * Function that is called with a feature and returns its default geometry.\n * @param {ol.Feature|ol.render.Feature} feature Feature to get the geometry\n *     for.\n * @return {ol.geom.Geometry|ol.render.Feature|undefined} Geometry to render.\n */\n_ol_style_Style_.defaultGeometryFunction = function(feature) {\n  return feature.getGeometry();\n};\nexport default _ol_style_Style_;\n","import _ol_ from '../index.js';\nimport _ol_proj_Units_ from '../proj/units.js';\nimport _ol_proj_proj4_ from '../proj/proj4.js';\n\n/**\n * @classdesc\n * Projection definition class. One of these is created for each projection\n * supported in the application and stored in the {@link ol.proj} namespace.\n * You can use these in applications, but this is not required, as API params\n * and options use {@link ol.ProjectionLike} which means the simple string\n * code will suffice.\n *\n * You can use {@link ol.proj.get} to retrieve the object for a particular\n * projection.\n *\n * The library includes definitions for `EPSG:4326` and `EPSG:3857`, together\n * with the following aliases:\n * * `EPSG:4326`: CRS:84, urn:ogc:def:crs:EPSG:6.6:4326,\n *     urn:ogc:def:crs:OGC:1.3:CRS84, urn:ogc:def:crs:OGC:2:84,\n *     http://www.opengis.net/gml/srs/epsg.xml#4326,\n *     urn:x-ogc:def:crs:EPSG:4326\n * * `EPSG:3857`: EPSG:102100, EPSG:102113, EPSG:900913,\n *     urn:ogc:def:crs:EPSG:6.18:3:3857,\n *     http://www.opengis.net/gml/srs/epsg.xml#3857\n *\n * If you use proj4js, aliases can be added using `proj4.defs()`; see\n * [documentation](https://github.com/proj4js/proj4js). To set an alternative\n * namespace for proj4, use {@link ol.proj.setProj4}.\n *\n * @constructor\n * @param {olx.ProjectionOptions} options Projection options.\n * @struct\n * @api\n */\nvar _ol_proj_Projection_ = function(options) {\n  /**\n   * @private\n   * @type {string}\n   */\n  this.code_ = options.code;\n\n  /**\n   * Units of projected coordinates. When set to `ol.proj.Units.TILE_PIXELS`, a\n   * `this.extent_` and `this.worldExtent_` must be configured properly for each\n   * tile.\n   * @private\n   * @type {ol.proj.Units}\n   */\n  this.units_ = /** @type {ol.proj.Units} */ (options.units);\n\n  /**\n   * Validity extent of the projection in projected coordinates. For projections\n   * with `ol.proj.Units.TILE_PIXELS` units, this is the extent of the tile in\n   * tile pixel space.\n   * @private\n   * @type {ol.Extent}\n   */\n  this.extent_ = options.extent !== undefined ? options.extent : null;\n\n  /**\n   * Extent of the world in EPSG:4326. For projections with\n   * `ol.proj.Units.TILE_PIXELS` units, this is the extent of the tile in\n   * projected coordinate space.\n   * @private\n   * @type {ol.Extent}\n   */\n  this.worldExtent_ = options.worldExtent !== undefined ?\n    options.worldExtent : null;\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this.axisOrientation_ = options.axisOrientation !== undefined ?\n    options.axisOrientation : 'enu';\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.global_ = options.global !== undefined ? options.global : false;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.canWrapX_ = !!(this.global_ && this.extent_);\n\n  /**\n   * @private\n   * @type {function(number, ol.Coordinate):number|undefined}\n   */\n  this.getPointResolutionFunc_ = options.getPointResolution;\n\n  /**\n   * @private\n   * @type {ol.tilegrid.TileGrid}\n   */\n  this.defaultTileGrid_ = null;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.metersPerUnit_ = options.metersPerUnit;\n\n  var code = options.code;\n  if (_ol_.ENABLE_PROJ4JS) {\n    var proj4js = _ol_proj_proj4_.get();\n    if (typeof proj4js == 'function') {\n      var def = proj4js.defs(code);\n      if (def !== undefined) {\n        if (def.axis !== undefined && options.axisOrientation === undefined) {\n          this.axisOrientation_ = def.axis;\n        }\n        if (options.metersPerUnit === undefined) {\n          this.metersPerUnit_ = def.to_meter;\n        }\n        if (options.units === undefined) {\n          this.units_ = def.units;\n        }\n      }\n    }\n  }\n};\n\n\n/**\n * @return {boolean} The projection is suitable for wrapping the x-axis\n */\n_ol_proj_Projection_.prototype.canWrapX = function() {\n  return this.canWrapX_;\n};\n\n\n/**\n * Get the code for this projection, e.g. 'EPSG:4326'.\n * @return {string} Code.\n * @api\n */\n_ol_proj_Projection_.prototype.getCode = function() {\n  return this.code_;\n};\n\n\n/**\n * Get the validity extent for this projection.\n * @return {ol.Extent} Extent.\n * @api\n */\n_ol_proj_Projection_.prototype.getExtent = function() {\n  return this.extent_;\n};\n\n\n/**\n * Get the units of this projection.\n * @return {ol.proj.Units} Units.\n * @api\n */\n_ol_proj_Projection_.prototype.getUnits = function() {\n  return this.units_;\n};\n\n\n/**\n * Get the amount of meters per unit of this projection.  If the projection is\n * not configured with `metersPerUnit` or a units identifier, the return is\n * `undefined`.\n * @return {number|undefined} Meters.\n * @api\n */\n_ol_proj_Projection_.prototype.getMetersPerUnit = function() {\n  return this.metersPerUnit_ || _ol_proj_Units_.METERS_PER_UNIT[this.units_];\n};\n\n\n/**\n * Get the world extent for this projection.\n * @return {ol.Extent} Extent.\n * @api\n */\n_ol_proj_Projection_.prototype.getWorldExtent = function() {\n  return this.worldExtent_;\n};\n\n\n/**\n * Get the axis orientation of this projection.\n * Example values are:\n * enu - the default easting, northing, elevation.\n * neu - northing, easting, up - useful for \"lat/long\" geographic coordinates,\n *     or south orientated transverse mercator.\n * wnu - westing, northing, up - some planetary coordinate systems have\n *     \"west positive\" coordinate systems\n * @return {string} Axis orientation.\n * @api\n */\n_ol_proj_Projection_.prototype.getAxisOrientation = function() {\n  return this.axisOrientation_;\n};\n\n\n/**\n * Is this projection a global projection which spans the whole world?\n * @return {boolean} Whether the projection is global.\n * @api\n */\n_ol_proj_Projection_.prototype.isGlobal = function() {\n  return this.global_;\n};\n\n\n/**\n* Set if the projection is a global projection which spans the whole world\n* @param {boolean} global Whether the projection is global.\n* @api\n*/\n_ol_proj_Projection_.prototype.setGlobal = function(global) {\n  this.global_ = global;\n  this.canWrapX_ = !!(global && this.extent_);\n};\n\n\n/**\n * @return {ol.tilegrid.TileGrid} The default tile grid.\n */\n_ol_proj_Projection_.prototype.getDefaultTileGrid = function() {\n  return this.defaultTileGrid_;\n};\n\n\n/**\n * @param {ol.tilegrid.TileGrid} tileGrid The default tile grid.\n */\n_ol_proj_Projection_.prototype.setDefaultTileGrid = function(tileGrid) {\n  this.defaultTileGrid_ = tileGrid;\n};\n\n\n/**\n * Set the validity extent for this projection.\n * @param {ol.Extent} extent Extent.\n * @api\n */\n_ol_proj_Projection_.prototype.setExtent = function(extent) {\n  this.extent_ = extent;\n  this.canWrapX_ = !!(this.global_ && extent);\n};\n\n\n/**\n * Set the world extent for this projection.\n * @param {ol.Extent} worldExtent World extent\n *     [minlon, minlat, maxlon, maxlat].\n * @api\n */\n_ol_proj_Projection_.prototype.setWorldExtent = function(worldExtent) {\n  this.worldExtent_ = worldExtent;\n};\n\n\n/**\n * Set the getPointResolution function (see {@link ol.proj#getPointResolution}\n * for this projection.\n * @param {function(number, ol.Coordinate):number} func Function\n * @api\n */\n_ol_proj_Projection_.prototype.setGetPointResolution = function(func) {\n  this.getPointResolutionFunc_ = func;\n};\n\n\n/**\n * Get the custom point resolution function for this projection (if set).\n * @return {function(number, ol.Coordinate):number|undefined} The custom point\n * resolution function (if set).\n */\n_ol_proj_Projection_.prototype.getPointResolutionFunc = function() {\n  return this.getPointResolutionFunc_;\n};\nexport default _ol_proj_Projection_;\n","import _ol_math_ from './math.js';\nvar _ol_RotationConstraint_ = {};\n\n\n/**\n * @param {number|undefined} rotation Rotation.\n * @param {number} delta Delta.\n * @return {number|undefined} Rotation.\n */\n_ol_RotationConstraint_.disable = function(rotation, delta) {\n  if (rotation !== undefined) {\n    return 0;\n  } else {\n    return undefined;\n  }\n};\n\n\n/**\n * @param {number|undefined} rotation Rotation.\n * @param {number} delta Delta.\n * @return {number|undefined} Rotation.\n */\n_ol_RotationConstraint_.none = function(rotation, delta) {\n  if (rotation !== undefined) {\n    return rotation + delta;\n  } else {\n    return undefined;\n  }\n};\n\n\n/**\n * @param {number} n N.\n * @return {ol.RotationConstraintType} Rotation constraint.\n */\n_ol_RotationConstraint_.createSnapToN = function(n) {\n  var theta = 2 * Math.PI / n;\n  return (\n    /**\n     * @param {number|undefined} rotation Rotation.\n     * @param {number} delta Delta.\n     * @return {number|undefined} Rotation.\n     */\n    function(rotation, delta) {\n      if (rotation !== undefined) {\n        rotation = Math.floor((rotation + delta) / theta + 0.5) * theta;\n        return rotation;\n      } else {\n        return undefined;\n      }\n    });\n};\n\n\n/**\n * @param {number=} opt_tolerance Tolerance.\n * @return {ol.RotationConstraintType} Rotation constraint.\n */\n_ol_RotationConstraint_.createSnapToZero = function(opt_tolerance) {\n  var tolerance = opt_tolerance || _ol_math_.toRadians(5);\n  return (\n    /**\n     * @param {number|undefined} rotation Rotation.\n     * @param {number} delta Delta.\n     * @return {number|undefined} Rotation.\n     */\n    function(rotation, delta) {\n      if (rotation !== undefined) {\n        if (Math.abs(rotation + delta) <= tolerance) {\n          return 0;\n        } else {\n          return rotation + delta;\n        }\n      } else {\n        return undefined;\n      }\n    });\n};\nexport default _ol_RotationConstraint_;\n","import _ol_ from './index.js';\nimport _ol_MapBrowserEvent_ from './mapbrowserevent.js';\n\n/**\n * @constructor\n * @extends {ol.MapBrowserEvent}\n * @param {string} type Event type.\n * @param {ol.PluggableMap} map Map.\n * @param {ol.pointer.PointerEvent} pointerEvent Pointer event.\n * @param {boolean=} opt_dragging Is the map currently being dragged?\n * @param {?olx.FrameState=} opt_frameState Frame state.\n */\nvar _ol_MapBrowserPointerEvent_ = function(type, map, pointerEvent, opt_dragging,\n    opt_frameState) {\n\n  _ol_MapBrowserEvent_.call(this, type, map, pointerEvent.originalEvent, opt_dragging,\n      opt_frameState);\n\n  /**\n   * @const\n   * @type {ol.pointer.PointerEvent}\n   */\n  this.pointerEvent = pointerEvent;\n\n};\n\n_ol_.inherits(_ol_MapBrowserPointerEvent_, _ol_MapBrowserEvent_);\nexport default _ol_MapBrowserPointerEvent_;\n","import _ol_ from '../index.js';\nimport _ol_extent_ from '../extent.js';\nimport _ol_geom_GeometryLayout_ from '../geom/geometrylayout.js';\nimport _ol_geom_GeometryType_ from '../geom/geometrytype.js';\nimport _ol_geom_SimpleGeometry_ from '../geom/simplegeometry.js';\nimport _ol_geom_flat_area_ from '../geom/flat/area.js';\nimport _ol_geom_flat_closest_ from '../geom/flat/closest.js';\nimport _ol_geom_flat_deflate_ from '../geom/flat/deflate.js';\nimport _ol_geom_flat_inflate_ from '../geom/flat/inflate.js';\nimport _ol_geom_flat_simplify_ from '../geom/flat/simplify.js';\n\n/**\n * @classdesc\n * Linear ring geometry. Only used as part of polygon; cannot be rendered\n * on its own.\n *\n * @constructor\n * @extends {ol.geom.SimpleGeometry}\n * @param {Array.<ol.Coordinate>} coordinates Coordinates.\n * @param {ol.geom.GeometryLayout=} opt_layout Layout.\n * @api\n */\nvar _ol_geom_LinearRing_ = function(coordinates, opt_layout) {\n\n  _ol_geom_SimpleGeometry_.call(this);\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.maxDelta_ = -1;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.maxDeltaRevision_ = -1;\n\n  this.setCoordinates(coordinates, opt_layout);\n\n};\n\n_ol_.inherits(_ol_geom_LinearRing_, _ol_geom_SimpleGeometry_);\n\n\n/**\n * Make a complete copy of the geometry.\n * @return {!ol.geom.LinearRing} Clone.\n * @override\n * @api\n */\n_ol_geom_LinearRing_.prototype.clone = function() {\n  var linearRing = new _ol_geom_LinearRing_(null);\n  linearRing.setFlatCoordinates(this.layout, this.flatCoordinates.slice());\n  return linearRing;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_geom_LinearRing_.prototype.closestPointXY = function(x, y, closestPoint, minSquaredDistance) {\n  if (minSquaredDistance <\n      _ol_extent_.closestSquaredDistanceXY(this.getExtent(), x, y)) {\n    return minSquaredDistance;\n  }\n  if (this.maxDeltaRevision_ != this.getRevision()) {\n    this.maxDelta_ = Math.sqrt(_ol_geom_flat_closest_.getMaxSquaredDelta(\n        this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, 0));\n    this.maxDeltaRevision_ = this.getRevision();\n  }\n  return _ol_geom_flat_closest_.getClosestPoint(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride,\n      this.maxDelta_, true, x, y, closestPoint, minSquaredDistance);\n};\n\n\n/**\n * Return the area of the linear ring on projected plane.\n * @return {number} Area (on projected plane).\n * @api\n */\n_ol_geom_LinearRing_.prototype.getArea = function() {\n  return _ol_geom_flat_area_.linearRing(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n};\n\n\n/**\n * Return the coordinates of the linear ring.\n * @return {Array.<ol.Coordinate>} Coordinates.\n * @override\n * @api\n */\n_ol_geom_LinearRing_.prototype.getCoordinates = function() {\n  return _ol_geom_flat_inflate_.coordinates(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_geom_LinearRing_.prototype.getSimplifiedGeometryInternal = function(squaredTolerance) {\n  var simplifiedFlatCoordinates = [];\n  simplifiedFlatCoordinates.length = _ol_geom_flat_simplify_.douglasPeucker(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride,\n      squaredTolerance, simplifiedFlatCoordinates, 0);\n  var simplifiedLinearRing = new _ol_geom_LinearRing_(null);\n  simplifiedLinearRing.setFlatCoordinates(\n      _ol_geom_GeometryLayout_.XY, simplifiedFlatCoordinates);\n  return simplifiedLinearRing;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\n_ol_geom_LinearRing_.prototype.getType = function() {\n  return _ol_geom_GeometryType_.LINEAR_RING;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_geom_LinearRing_.prototype.intersectsExtent = function(extent) {};\n\n\n/**\n * Set the coordinates of the linear ring.\n * @param {Array.<ol.Coordinate>} coordinates Coordinates.\n * @param {ol.geom.GeometryLayout=} opt_layout Layout.\n * @override\n * @api\n */\n_ol_geom_LinearRing_.prototype.setCoordinates = function(coordinates, opt_layout) {\n  if (!coordinates) {\n    this.setFlatCoordinates(_ol_geom_GeometryLayout_.XY, null);\n  } else {\n    this.setLayout(opt_layout, coordinates, 1);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    this.flatCoordinates.length = _ol_geom_flat_deflate_.coordinates(\n        this.flatCoordinates, 0, coordinates, this.stride);\n    this.changed();\n  }\n};\n\n\n/**\n * @param {ol.geom.GeometryLayout} layout Layout.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n */\n_ol_geom_LinearRing_.prototype.setFlatCoordinates = function(layout, flatCoordinates) {\n  this.setFlatCoordinatesInternal(layout, flatCoordinates);\n  this.changed();\n};\nexport default _ol_geom_LinearRing_;\n","import _ol_ from '../index.js';\nimport _ol_array_ from '../array.js';\nimport _ol_extent_ from '../extent.js';\nimport _ol_geom_GeometryLayout_ from '../geom/geometrylayout.js';\nimport _ol_geom_GeometryType_ from '../geom/geometrytype.js';\nimport _ol_geom_LinearRing_ from '../geom/linearring.js';\nimport _ol_geom_Point_ from '../geom/point.js';\nimport _ol_geom_SimpleGeometry_ from '../geom/simplegeometry.js';\nimport _ol_geom_flat_area_ from '../geom/flat/area.js';\nimport _ol_geom_flat_closest_ from '../geom/flat/closest.js';\nimport _ol_geom_flat_contains_ from '../geom/flat/contains.js';\nimport _ol_geom_flat_deflate_ from '../geom/flat/deflate.js';\nimport _ol_geom_flat_inflate_ from '../geom/flat/inflate.js';\nimport _ol_geom_flat_interiorpoint_ from '../geom/flat/interiorpoint.js';\nimport _ol_geom_flat_intersectsextent_ from '../geom/flat/intersectsextent.js';\nimport _ol_geom_flat_orient_ from '../geom/flat/orient.js';\nimport _ol_geom_flat_simplify_ from '../geom/flat/simplify.js';\nimport _ol_math_ from '../math.js';\n\n/**\n * @classdesc\n * Polygon geometry.\n *\n * @constructor\n * @extends {ol.geom.SimpleGeometry}\n * @param {Array.<Array.<ol.Coordinate>>} coordinates Array of linear\n *     rings that define the polygon. The first linear ring of the array\n *     defines the outer-boundary or surface of the polygon. Each subsequent\n *     linear ring defines a hole in the surface of the polygon. A linear ring\n *     is an array of vertices' coordinates where the first coordinate and the\n *     last are equivalent.\n * @param {ol.geom.GeometryLayout=} opt_layout Layout.\n * @api\n */\nvar _ol_geom_Polygon_ = function(coordinates, opt_layout) {\n\n  _ol_geom_SimpleGeometry_.call(this);\n\n  /**\n   * @type {Array.<number>}\n   * @private\n   */\n  this.ends_ = [];\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.flatInteriorPointRevision_ = -1;\n\n  /**\n   * @private\n   * @type {ol.Coordinate}\n   */\n  this.flatInteriorPoint_ = null;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.maxDelta_ = -1;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.maxDeltaRevision_ = -1;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.orientedRevision_ = -1;\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.orientedFlatCoordinates_ = null;\n\n  this.setCoordinates(coordinates, opt_layout);\n\n};\n\n_ol_.inherits(_ol_geom_Polygon_, _ol_geom_SimpleGeometry_);\n\n\n/**\n * Append the passed linear ring to this polygon.\n * @param {ol.geom.LinearRing} linearRing Linear ring.\n * @api\n */\n_ol_geom_Polygon_.prototype.appendLinearRing = function(linearRing) {\n  if (!this.flatCoordinates) {\n    this.flatCoordinates = linearRing.getFlatCoordinates().slice();\n  } else {\n    _ol_array_.extend(this.flatCoordinates, linearRing.getFlatCoordinates());\n  }\n  this.ends_.push(this.flatCoordinates.length);\n  this.changed();\n};\n\n\n/**\n * Make a complete copy of the geometry.\n * @return {!ol.geom.Polygon} Clone.\n * @override\n * @api\n */\n_ol_geom_Polygon_.prototype.clone = function() {\n  var polygon = new _ol_geom_Polygon_(null);\n  polygon.setFlatCoordinates(\n      this.layout, this.flatCoordinates.slice(), this.ends_.slice());\n  return polygon;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_geom_Polygon_.prototype.closestPointXY = function(x, y, closestPoint, minSquaredDistance) {\n  if (minSquaredDistance <\n      _ol_extent_.closestSquaredDistanceXY(this.getExtent(), x, y)) {\n    return minSquaredDistance;\n  }\n  if (this.maxDeltaRevision_ != this.getRevision()) {\n    this.maxDelta_ = Math.sqrt(_ol_geom_flat_closest_.getsMaxSquaredDelta(\n        this.flatCoordinates, 0, this.ends_, this.stride, 0));\n    this.maxDeltaRevision_ = this.getRevision();\n  }\n  return _ol_geom_flat_closest_.getsClosestPoint(\n      this.flatCoordinates, 0, this.ends_, this.stride,\n      this.maxDelta_, true, x, y, closestPoint, minSquaredDistance);\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_geom_Polygon_.prototype.containsXY = function(x, y) {\n  return _ol_geom_flat_contains_.linearRingsContainsXY(\n      this.getOrientedFlatCoordinates(), 0, this.ends_, this.stride, x, y);\n};\n\n\n/**\n * Return the area of the polygon on projected plane.\n * @return {number} Area (on projected plane).\n * @api\n */\n_ol_geom_Polygon_.prototype.getArea = function() {\n  return _ol_geom_flat_area_.linearRings(\n      this.getOrientedFlatCoordinates(), 0, this.ends_, this.stride);\n};\n\n\n/**\n * Get the coordinate array for this geometry.  This array has the structure\n * of a GeoJSON coordinate array for polygons.\n *\n * @param {boolean=} opt_right Orient coordinates according to the right-hand\n *     rule (counter-clockwise for exterior and clockwise for interior rings).\n *     If `false`, coordinates will be oriented according to the left-hand rule\n *     (clockwise for exterior and counter-clockwise for interior rings).\n *     By default, coordinate orientation will depend on how the geometry was\n *     constructed.\n * @return {Array.<Array.<ol.Coordinate>>} Coordinates.\n * @override\n * @api\n */\n_ol_geom_Polygon_.prototype.getCoordinates = function(opt_right) {\n  var flatCoordinates;\n  if (opt_right !== undefined) {\n    flatCoordinates = this.getOrientedFlatCoordinates().slice();\n    _ol_geom_flat_orient_.orientLinearRings(\n        flatCoordinates, 0, this.ends_, this.stride, opt_right);\n  } else {\n    flatCoordinates = this.flatCoordinates;\n  }\n\n  return _ol_geom_flat_inflate_.coordinatess(\n      flatCoordinates, 0, this.ends_, this.stride);\n};\n\n\n/**\n * @return {Array.<number>} Ends.\n */\n_ol_geom_Polygon_.prototype.getEnds = function() {\n  return this.ends_;\n};\n\n\n/**\n * @return {Array.<number>} Interior point.\n */\n_ol_geom_Polygon_.prototype.getFlatInteriorPoint = function() {\n  if (this.flatInteriorPointRevision_ != this.getRevision()) {\n    var flatCenter = _ol_extent_.getCenter(this.getExtent());\n    this.flatInteriorPoint_ = _ol_geom_flat_interiorpoint_.linearRings(\n        this.getOrientedFlatCoordinates(), 0, this.ends_, this.stride,\n        flatCenter, 0);\n    this.flatInteriorPointRevision_ = this.getRevision();\n  }\n  return this.flatInteriorPoint_;\n};\n\n\n/**\n * Return an interior point of the polygon.\n * @return {ol.geom.Point} Interior point as XYM coordinate, where M is the\n * length of the horizontal intersection that the point belongs to.\n * @api\n */\n_ol_geom_Polygon_.prototype.getInteriorPoint = function() {\n  return new _ol_geom_Point_(this.getFlatInteriorPoint(), _ol_geom_GeometryLayout_.XYM);\n};\n\n\n/**\n * Return the number of rings of the polygon,  this includes the exterior\n * ring and any interior rings.\n *\n * @return {number} Number of rings.\n * @api\n */\n_ol_geom_Polygon_.prototype.getLinearRingCount = function() {\n  return this.ends_.length;\n};\n\n\n/**\n * Return the Nth linear ring of the polygon geometry. Return `null` if the\n * given index is out of range.\n * The exterior linear ring is available at index `0` and the interior rings\n * at index `1` and beyond.\n *\n * @param {number} index Index.\n * @return {ol.geom.LinearRing} Linear ring.\n * @api\n */\n_ol_geom_Polygon_.prototype.getLinearRing = function(index) {\n  if (index < 0 || this.ends_.length <= index) {\n    return null;\n  }\n  var linearRing = new _ol_geom_LinearRing_(null);\n  linearRing.setFlatCoordinates(this.layout, this.flatCoordinates.slice(\n      index === 0 ? 0 : this.ends_[index - 1], this.ends_[index]));\n  return linearRing;\n};\n\n\n/**\n * Return the linear rings of the polygon.\n * @return {Array.<ol.geom.LinearRing>} Linear rings.\n * @api\n */\n_ol_geom_Polygon_.prototype.getLinearRings = function() {\n  var layout = this.layout;\n  var flatCoordinates = this.flatCoordinates;\n  var ends = this.ends_;\n  var linearRings = [];\n  var offset = 0;\n  var i, ii;\n  for (i = 0, ii = ends.length; i < ii; ++i) {\n    var end = ends[i];\n    var linearRing = new _ol_geom_LinearRing_(null);\n    linearRing.setFlatCoordinates(layout, flatCoordinates.slice(offset, end));\n    linearRings.push(linearRing);\n    offset = end;\n  }\n  return linearRings;\n};\n\n\n/**\n * @return {Array.<number>} Oriented flat coordinates.\n */\n_ol_geom_Polygon_.prototype.getOrientedFlatCoordinates = function() {\n  if (this.orientedRevision_ != this.getRevision()) {\n    var flatCoordinates = this.flatCoordinates;\n    if (_ol_geom_flat_orient_.linearRingsAreOriented(\n        flatCoordinates, 0, this.ends_, this.stride)) {\n      this.orientedFlatCoordinates_ = flatCoordinates;\n    } else {\n      this.orientedFlatCoordinates_ = flatCoordinates.slice();\n      this.orientedFlatCoordinates_.length =\n          _ol_geom_flat_orient_.orientLinearRings(\n              this.orientedFlatCoordinates_, 0, this.ends_, this.stride);\n    }\n    this.orientedRevision_ = this.getRevision();\n  }\n  return this.orientedFlatCoordinates_;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_geom_Polygon_.prototype.getSimplifiedGeometryInternal = function(squaredTolerance) {\n  var simplifiedFlatCoordinates = [];\n  var simplifiedEnds = [];\n  simplifiedFlatCoordinates.length = _ol_geom_flat_simplify_.quantizes(\n      this.flatCoordinates, 0, this.ends_, this.stride,\n      Math.sqrt(squaredTolerance),\n      simplifiedFlatCoordinates, 0, simplifiedEnds);\n  var simplifiedPolygon = new _ol_geom_Polygon_(null);\n  simplifiedPolygon.setFlatCoordinates(\n      _ol_geom_GeometryLayout_.XY, simplifiedFlatCoordinates, simplifiedEnds);\n  return simplifiedPolygon;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\n_ol_geom_Polygon_.prototype.getType = function() {\n  return _ol_geom_GeometryType_.POLYGON;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\n_ol_geom_Polygon_.prototype.intersectsExtent = function(extent) {\n  return _ol_geom_flat_intersectsextent_.linearRings(\n      this.getOrientedFlatCoordinates(), 0, this.ends_, this.stride, extent);\n};\n\n\n/**\n * Set the coordinates of the polygon.\n * @param {Array.<Array.<ol.Coordinate>>} coordinates Coordinates.\n * @param {ol.geom.GeometryLayout=} opt_layout Layout.\n * @override\n * @api\n */\n_ol_geom_Polygon_.prototype.setCoordinates = function(coordinates, opt_layout) {\n  if (!coordinates) {\n    this.setFlatCoordinates(_ol_geom_GeometryLayout_.XY, null, this.ends_);\n  } else {\n    this.setLayout(opt_layout, coordinates, 2);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    var ends = _ol_geom_flat_deflate_.coordinatess(\n        this.flatCoordinates, 0, coordinates, this.stride, this.ends_);\n    this.flatCoordinates.length = ends.length === 0 ? 0 : ends[ends.length - 1];\n    this.changed();\n  }\n};\n\n\n/**\n * @param {ol.geom.GeometryLayout} layout Layout.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {Array.<number>} ends Ends.\n */\n_ol_geom_Polygon_.prototype.setFlatCoordinates = function(layout, flatCoordinates, ends) {\n  this.setFlatCoordinatesInternal(layout, flatCoordinates);\n  this.ends_ = ends;\n  this.changed();\n};\n\n\n/**\n * Create an approximation of a circle on the surface of a sphere.\n * @param {ol.Sphere} sphere The sphere.\n * @param {ol.Coordinate} center Center (`[lon, lat]` in degrees).\n * @param {number} radius The great-circle distance from the center to\n *     the polygon vertices.\n * @param {number=} opt_n Optional number of vertices for the resulting\n *     polygon. Default is `32`.\n * @return {ol.geom.Polygon} The \"circular\" polygon.\n * @api\n */\n_ol_geom_Polygon_.circular = function(sphere, center, radius, opt_n) {\n  var n = opt_n ? opt_n : 32;\n  /** @type {Array.<number>} */\n  var flatCoordinates = [];\n  var i;\n  for (i = 0; i < n; ++i) {\n    _ol_array_.extend(\n        flatCoordinates, sphere.offset(center, radius, 2 * Math.PI * i / n));\n  }\n  flatCoordinates.push(flatCoordinates[0], flatCoordinates[1]);\n  var polygon = new _ol_geom_Polygon_(null);\n  polygon.setFlatCoordinates(\n      _ol_geom_GeometryLayout_.XY, flatCoordinates, [flatCoordinates.length]);\n  return polygon;\n};\n\n\n/**\n * Create a polygon from an extent. The layout used is `XY`.\n * @param {ol.Extent} extent The extent.\n * @return {ol.geom.Polygon} The polygon.\n * @api\n */\n_ol_geom_Polygon_.fromExtent = function(extent) {\n  var minX = extent[0];\n  var minY = extent[1];\n  var maxX = extent[2];\n  var maxY = extent[3];\n  var flatCoordinates =\n      [minX, minY, minX, maxY, maxX, maxY, maxX, minY, minX, minY];\n  var polygon = new _ol_geom_Polygon_(null);\n  polygon.setFlatCoordinates(\n      _ol_geom_GeometryLayout_.XY, flatCoordinates, [flatCoordinates.length]);\n  return polygon;\n};\n\n\n/**\n * Create a regular polygon from a circle.\n * @param {ol.geom.Circle} circle Circle geometry.\n * @param {number=} opt_sides Number of sides of the polygon. Default is 32.\n * @param {number=} opt_angle Start angle for the first vertex of the polygon in\n *     radians. Default is 0.\n * @return {ol.geom.Polygon} Polygon geometry.\n * @api\n */\n_ol_geom_Polygon_.fromCircle = function(circle, opt_sides, opt_angle) {\n  var sides = opt_sides ? opt_sides : 32;\n  var stride = circle.getStride();\n  var layout = circle.getLayout();\n  var polygon = new _ol_geom_Polygon_(null, layout);\n  var arrayLength = stride * (sides + 1);\n  var flatCoordinates = new Array(arrayLength);\n  for (var i = 0; i < arrayLength; i++) {\n    flatCoordinates[i] = 0;\n  }\n  var ends = [flatCoordinates.length];\n  polygon.setFlatCoordinates(layout, flatCoordinates, ends);\n  _ol_geom_Polygon_.makeRegular(\n      polygon, circle.getCenter(), circle.getRadius(), opt_angle);\n  return polygon;\n};\n\n\n/**\n * Modify the coordinates of a polygon to make it a regular polygon.\n * @param {ol.geom.Polygon} polygon Polygon geometry.\n * @param {ol.Coordinate} center Center of the regular polygon.\n * @param {number} radius Radius of the regular polygon.\n * @param {number=} opt_angle Start angle for the first vertex of the polygon in\n *     radians. Default is 0.\n */\n_ol_geom_Polygon_.makeRegular = function(polygon, center, radius, opt_angle) {\n  var flatCoordinates = polygon.getFlatCoordinates();\n  var layout = polygon.getLayout();\n  var stride = polygon.getStride();\n  var ends = polygon.getEnds();\n  var sides = flatCoordinates.length / stride - 1;\n  var startAngle = opt_angle ? opt_angle : 0;\n  var angle, offset;\n  for (var i = 0; i <= sides; ++i) {\n    offset = i * stride;\n    angle = startAngle + (_ol_math_.modulo(i, sides) * 2 * Math.PI / sides);\n    flatCoordinates[offset] = center[0] + (radius * Math.cos(angle));\n    flatCoordinates[offset + 1] = center[1] + (radius * Math.sin(angle));\n  }\n  polygon.setFlatCoordinates(layout, flatCoordinates, ends);\n};\nexport default _ol_geom_Polygon_;\n","var _ol_tilecoord_ = {};\n\n\n/**\n * @param {number} z Z.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {ol.TileCoord=} opt_tileCoord Tile coordinate.\n * @return {ol.TileCoord} Tile coordinate.\n */\n_ol_tilecoord_.createOrUpdate = function(z, x, y, opt_tileCoord) {\n  if (opt_tileCoord !== undefined) {\n    opt_tileCoord[0] = z;\n    opt_tileCoord[1] = x;\n    opt_tileCoord[2] = y;\n    return opt_tileCoord;\n  } else {\n    return [z, x, y];\n  }\n};\n\n\n/**\n * @param {number} z Z.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {string} Key.\n */\n_ol_tilecoord_.getKeyZXY = function(z, x, y) {\n  return z + '/' + x + '/' + y;\n};\n\n\n/**\n * Get the key for a tile coord.\n * @param {ol.TileCoord} tileCoord The tile coord.\n * @return {string} Key.\n */\n_ol_tilecoord_.getKey = function(tileCoord) {\n  return _ol_tilecoord_.getKeyZXY(tileCoord[0], tileCoord[1], tileCoord[2]);\n};\n\n\n/**\n * Get a tile coord given a key.\n * @param {string} key The tile coord key.\n * @return {ol.TileCoord} The tile coord.\n */\n_ol_tilecoord_.fromKey = function(key) {\n  return key.split('/').map(Number);\n};\n\n\n/**\n * @param {ol.TileCoord} tileCoord Tile coord.\n * @return {number} Hash.\n */\n_ol_tilecoord_.hash = function(tileCoord) {\n  return (tileCoord[1] << tileCoord[0]) + tileCoord[2];\n};\n\n\n/**\n * @param {ol.TileCoord} tileCoord Tile coord.\n * @return {string} Quad key.\n */\n_ol_tilecoord_.quadKey = function(tileCoord) {\n  var z = tileCoord[0];\n  var digits = new Array(z);\n  var mask = 1 << (z - 1);\n  var i, charCode;\n  for (i = 0; i < z; ++i) {\n    // 48 is charCode for 0 - '0'.charCodeAt(0)\n    charCode = 48;\n    if (tileCoord[1] & mask) {\n      charCode += 1;\n    }\n    if (tileCoord[2] & mask) {\n      charCode += 2;\n    }\n    digits[i] = String.fromCharCode(charCode);\n    mask >>= 1;\n  }\n  return digits.join('');\n};\n\n\n/**\n * @param {ol.TileCoord} tileCoord Tile coordinate.\n * @param {!ol.tilegrid.TileGrid} tileGrid Tile grid.\n * @return {boolean} Tile coordinate is within extent and zoom level range.\n */\n_ol_tilecoord_.withinExtentAndZ = function(tileCoord, tileGrid) {\n  var z = tileCoord[0];\n  var x = tileCoord[1];\n  var y = tileCoord[2];\n\n  if (tileGrid.getMinZoom() > z || z > tileGrid.getMaxZoom()) {\n    return false;\n  }\n  var extent = tileGrid.getExtent();\n  var tileRange;\n  if (!extent) {\n    tileRange = tileGrid.getFullTileRange(z);\n  } else {\n    tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z);\n  }\n  if (!tileRange) {\n    return true;\n  } else {\n    return tileRange.containsXY(x, y);\n  }\n};\nexport default _ol_tilecoord_;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","// Based on simplify-js https://github.com/mourner/simplify-js\n// Copyright (c) 2012, Vladimir Agafonkin\n// All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are met:\n//\n//    1. Redistributions of source code must retain the above copyright notice,\n//       this list of conditions and the following disclaimer.\n//\n//    2. Redistributions in binary form must reproduce the above copyright\n//       notice, this list of conditions and the following disclaimer in the\n//       documentation and/or other materials provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n// AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n// ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\n// LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n// SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n// INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n// CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n// ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n// POSSIBILITY OF SUCH DAMAGE.\n\nimport _ol_math_ from '../../math.js';\nvar _ol_geom_flat_simplify_ = {};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {boolean} highQuality Highest quality.\n * @param {Array.<number>=} opt_simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @return {Array.<number>} Simplified line string.\n */\n_ol_geom_flat_simplify_.lineString = function(flatCoordinates, offset, end,\n    stride, squaredTolerance, highQuality, opt_simplifiedFlatCoordinates) {\n  var simplifiedFlatCoordinates = opt_simplifiedFlatCoordinates !== undefined ?\n    opt_simplifiedFlatCoordinates : [];\n  if (!highQuality) {\n    end = _ol_geom_flat_simplify_.radialDistance(flatCoordinates, offset, end,\n        stride, squaredTolerance,\n        simplifiedFlatCoordinates, 0);\n    flatCoordinates = simplifiedFlatCoordinates;\n    offset = 0;\n    stride = 2;\n  }\n  simplifiedFlatCoordinates.length = _ol_geom_flat_simplify_.douglasPeucker(\n      flatCoordinates, offset, end, stride, squaredTolerance,\n      simplifiedFlatCoordinates, 0);\n  return simplifiedFlatCoordinates;\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array.<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @return {number} Simplified offset.\n */\n_ol_geom_flat_simplify_.douglasPeucker = function(flatCoordinates, offset, end,\n    stride, squaredTolerance, simplifiedFlatCoordinates, simplifiedOffset) {\n  var n = (end - offset) / stride;\n  if (n < 3) {\n    for (; offset < end; offset += stride) {\n      simplifiedFlatCoordinates[simplifiedOffset++] =\n          flatCoordinates[offset];\n      simplifiedFlatCoordinates[simplifiedOffset++] =\n          flatCoordinates[offset + 1];\n    }\n    return simplifiedOffset;\n  }\n  /** @type {Array.<number>} */\n  var markers = new Array(n);\n  markers[0] = 1;\n  markers[n - 1] = 1;\n  /** @type {Array.<number>} */\n  var stack = [offset, end - stride];\n  var index = 0;\n  var i;\n  while (stack.length > 0) {\n    var last = stack.pop();\n    var first = stack.pop();\n    var maxSquaredDistance = 0;\n    var x1 = flatCoordinates[first];\n    var y1 = flatCoordinates[first + 1];\n    var x2 = flatCoordinates[last];\n    var y2 = flatCoordinates[last + 1];\n    for (i = first + stride; i < last; i += stride) {\n      var x = flatCoordinates[i];\n      var y = flatCoordinates[i + 1];\n      var squaredDistance = _ol_math_.squaredSegmentDistance(\n          x, y, x1, y1, x2, y2);\n      if (squaredDistance > maxSquaredDistance) {\n        index = i;\n        maxSquaredDistance = squaredDistance;\n      }\n    }\n    if (maxSquaredDistance > squaredTolerance) {\n      markers[(index - offset) / stride] = 1;\n      if (first + stride < index) {\n        stack.push(first, index);\n      }\n      if (index + stride < last) {\n        stack.push(index, last);\n      }\n    }\n  }\n  for (i = 0; i < n; ++i) {\n    if (markers[i]) {\n      simplifiedFlatCoordinates[simplifiedOffset++] =\n          flatCoordinates[offset + i * stride];\n      simplifiedFlatCoordinates[simplifiedOffset++] =\n          flatCoordinates[offset + i * stride + 1];\n    }\n  }\n  return simplifiedOffset;\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array.<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array.<number>} simplifiedEnds Simplified ends.\n * @return {number} Simplified offset.\n */\n_ol_geom_flat_simplify_.douglasPeuckers = function(flatCoordinates, offset,\n    ends, stride, squaredTolerance, simplifiedFlatCoordinates,\n    simplifiedOffset, simplifiedEnds) {\n  var i, ii;\n  for (i = 0, ii = ends.length; i < ii; ++i) {\n    var end = ends[i];\n    simplifiedOffset = _ol_geom_flat_simplify_.douglasPeucker(\n        flatCoordinates, offset, end, stride, squaredTolerance,\n        simplifiedFlatCoordinates, simplifiedOffset);\n    simplifiedEnds.push(simplifiedOffset);\n    offset = end;\n  }\n  return simplifiedOffset;\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<Array.<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array.<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array.<Array.<number>>} simplifiedEndss Simplified endss.\n * @return {number} Simplified offset.\n */\n_ol_geom_flat_simplify_.douglasPeuckerss = function(\n    flatCoordinates, offset, endss, stride, squaredTolerance,\n    simplifiedFlatCoordinates, simplifiedOffset, simplifiedEndss) {\n  var i, ii;\n  for (i = 0, ii = endss.length; i < ii; ++i) {\n    var ends = endss[i];\n    var simplifiedEnds = [];\n    simplifiedOffset = _ol_geom_flat_simplify_.douglasPeuckers(\n        flatCoordinates, offset, ends, stride, squaredTolerance,\n        simplifiedFlatCoordinates, simplifiedOffset, simplifiedEnds);\n    simplifiedEndss.push(simplifiedEnds);\n    offset = ends[ends.length - 1];\n  }\n  return simplifiedOffset;\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array.<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @return {number} Simplified offset.\n */\n_ol_geom_flat_simplify_.radialDistance = function(flatCoordinates, offset, end,\n    stride, squaredTolerance, simplifiedFlatCoordinates, simplifiedOffset) {\n  if (end <= offset + stride) {\n    // zero or one point, no simplification possible, so copy and return\n    for (; offset < end; offset += stride) {\n      simplifiedFlatCoordinates[simplifiedOffset++] = flatCoordinates[offset];\n      simplifiedFlatCoordinates[simplifiedOffset++] =\n          flatCoordinates[offset + 1];\n    }\n    return simplifiedOffset;\n  }\n  var x1 = flatCoordinates[offset];\n  var y1 = flatCoordinates[offset + 1];\n  // copy first point\n  simplifiedFlatCoordinates[simplifiedOffset++] = x1;\n  simplifiedFlatCoordinates[simplifiedOffset++] = y1;\n  var x2 = x1;\n  var y2 = y1;\n  for (offset += stride; offset < end; offset += stride) {\n    x2 = flatCoordinates[offset];\n    y2 = flatCoordinates[offset + 1];\n    if (_ol_math_.squaredDistance(x1, y1, x2, y2) > squaredTolerance) {\n      // copy point at offset\n      simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n      simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n      x1 = x2;\n      y1 = y2;\n    }\n  }\n  if (x2 != x1 || y2 != y1) {\n    // copy last point\n    simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n    simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n  }\n  return simplifiedOffset;\n};\n\n\n/**\n * @param {number} value Value.\n * @param {number} tolerance Tolerance.\n * @return {number} Rounded value.\n */\n_ol_geom_flat_simplify_.snap = function(value, tolerance) {\n  return tolerance * Math.round(value / tolerance);\n};\n\n\n/**\n * Simplifies a line string using an algorithm designed by Tim Schaub.\n * Coordinates are snapped to the nearest value in a virtual grid and\n * consecutive duplicate coordinates are discarded.  This effectively preserves\n * topology as the simplification of any subsection of a line string is\n * independent of the rest of the line string.  This means that, for examples,\n * the common edge between two polygons will be simplified to the same line\n * string independently in both polygons.  This implementation uses a single\n * pass over the coordinates and eliminates intermediate collinear points.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} tolerance Tolerance.\n * @param {Array.<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @return {number} Simplified offset.\n */\n_ol_geom_flat_simplify_.quantize = function(flatCoordinates, offset, end, stride,\n    tolerance, simplifiedFlatCoordinates, simplifiedOffset) {\n  // do nothing if the line is empty\n  if (offset == end) {\n    return simplifiedOffset;\n  }\n  // snap the first coordinate (P1)\n  var x1 = _ol_geom_flat_simplify_.snap(flatCoordinates[offset], tolerance);\n  var y1 = _ol_geom_flat_simplify_.snap(flatCoordinates[offset + 1], tolerance);\n  offset += stride;\n  // add the first coordinate to the output\n  simplifiedFlatCoordinates[simplifiedOffset++] = x1;\n  simplifiedFlatCoordinates[simplifiedOffset++] = y1;\n  // find the next coordinate that does not snap to the same value as the first\n  // coordinate (P2)\n  var x2, y2;\n  do {\n    x2 = _ol_geom_flat_simplify_.snap(flatCoordinates[offset], tolerance);\n    y2 = _ol_geom_flat_simplify_.snap(flatCoordinates[offset + 1], tolerance);\n    offset += stride;\n    if (offset == end) {\n      // all coordinates snap to the same value, the line collapses to a point\n      // push the last snapped value anyway to ensure that the output contains\n      // at least two points\n      // FIXME should we really return at least two points anyway?\n      simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n      simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n      return simplifiedOffset;\n    }\n  } while (x2 == x1 && y2 == y1);\n  while (offset < end) {\n    var x3, y3;\n    // snap the next coordinate (P3)\n    x3 = _ol_geom_flat_simplify_.snap(flatCoordinates[offset], tolerance);\n    y3 = _ol_geom_flat_simplify_.snap(flatCoordinates[offset + 1], tolerance);\n    offset += stride;\n    // skip P3 if it is equal to P2\n    if (x3 == x2 && y3 == y2) {\n      continue;\n    }\n    // calculate the delta between P1 and P2\n    var dx1 = x2 - x1;\n    var dy1 = y2 - y1;\n    // calculate the delta between P3 and P1\n    var dx2 = x3 - x1;\n    var dy2 = y3 - y1;\n    // if P1, P2, and P3 are colinear and P3 is further from P1 than P2 is from\n    // P1 in the same direction then P2 is on the straight line between P1 and\n    // P3\n    if ((dx1 * dy2 == dy1 * dx2) &&\n        ((dx1 < 0 && dx2 < dx1) || dx1 == dx2 || (dx1 > 0 && dx2 > dx1)) &&\n        ((dy1 < 0 && dy2 < dy1) || dy1 == dy2 || (dy1 > 0 && dy2 > dy1))) {\n      // discard P2 and set P2 = P3\n      x2 = x3;\n      y2 = y3;\n      continue;\n    }\n    // either P1, P2, and P3 are not colinear, or they are colinear but P3 is\n    // between P3 and P1 or on the opposite half of the line to P2.  add P2,\n    // and continue with P1 = P2 and P2 = P3\n    simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n    simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n    x1 = x2;\n    y1 = y2;\n    x2 = x3;\n    y2 = y3;\n  }\n  // add the last point (P2)\n  simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n  simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n  return simplifiedOffset;\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} tolerance Tolerance.\n * @param {Array.<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array.<number>} simplifiedEnds Simplified ends.\n * @return {number} Simplified offset.\n */\n_ol_geom_flat_simplify_.quantizes = function(\n    flatCoordinates, offset, ends, stride,\n    tolerance,\n    simplifiedFlatCoordinates, simplifiedOffset, simplifiedEnds) {\n  var i, ii;\n  for (i = 0, ii = ends.length; i < ii; ++i) {\n    var end = ends[i];\n    simplifiedOffset = _ol_geom_flat_simplify_.quantize(\n        flatCoordinates, offset, end, stride,\n        tolerance,\n        simplifiedFlatCoordinates, simplifiedOffset);\n    simplifiedEnds.push(simplifiedOffset);\n    offset = end;\n  }\n  return simplifiedOffset;\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<Array.<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} tolerance Tolerance.\n * @param {Array.<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array.<Array.<number>>} simplifiedEndss Simplified endss.\n * @return {number} Simplified offset.\n */\n_ol_geom_flat_simplify_.quantizess = function(\n    flatCoordinates, offset, endss, stride,\n    tolerance,\n    simplifiedFlatCoordinates, simplifiedOffset, simplifiedEndss) {\n  var i, ii;\n  for (i = 0, ii = endss.length; i < ii; ++i) {\n    var ends = endss[i];\n    var simplifiedEnds = [];\n    simplifiedOffset = _ol_geom_flat_simplify_.quantizes(\n        flatCoordinates, offset, ends, stride,\n        tolerance,\n        simplifiedFlatCoordinates, simplifiedOffset, simplifiedEnds);\n    simplifiedEndss.push(simplifiedEnds);\n    offset = ends[ends.length - 1];\n  }\n  return simplifiedOffset;\n};\nexport default _ol_geom_flat_simplify_;\n","import _ol_ from './index.js';\nimport _ol_events_Event_ from './events/event.js';\n\n/**\n * @classdesc\n * Events emitted as map events are instances of this type.\n * See {@link ol.Map} for which events trigger a map event.\n *\n * @constructor\n * @extends {ol.events.Event}\n * @implements {oli.MapEvent}\n * @param {string} type Event type.\n * @param {ol.PluggableMap} map Map.\n * @param {?olx.FrameState=} opt_frameState Frame state.\n */\nvar _ol_MapEvent_ = function(type, map, opt_frameState) {\n\n  _ol_events_Event_.call(this, type);\n\n  /**\n   * The map where the event occurred.\n   * @type {ol.PluggableMap}\n   * @api\n   */\n  this.map = map;\n\n  /**\n   * The frame state at the time of the event.\n   * @type {?olx.FrameState}\n   * @api\n   */\n  this.frameState = opt_frameState !== undefined ? opt_frameState : null;\n\n};\n\n_ol_.inherits(_ol_MapEvent_, _ol_events_Event_);\nexport default _ol_MapEvent_;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target) {\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertInto + \" \" + options.insertAt.before);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","import _ol_ from '../index.js';\nimport _ol_Object_ from '../object.js';\nimport _ol_extent_ from '../extent.js';\nimport _ol_functions_ from '../functions.js';\nimport _ol_geom_flat_transform_ from '../geom/flat/transform.js';\nimport _ol_proj_ from '../proj.js';\nimport _ol_proj_Units_ from '../proj/units.js';\nimport _ol_transform_ from '../transform.js';\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for vector geometries.\n *\n * To get notified of changes to the geometry, register a listener for the\n * generic `change` event on your geometry instance.\n *\n * @constructor\n * @abstract\n * @extends {ol.Object}\n * @api\n */\nvar _ol_geom_Geometry_ = function() {\n\n  _ol_Object_.call(this);\n\n  /**\n   * @private\n   * @type {ol.Extent}\n   */\n  this.extent_ = _ol_extent_.createEmpty();\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.extentRevision_ = -1;\n\n  /**\n   * @protected\n   * @type {Object.<string, ol.geom.Geometry>}\n   */\n  this.simplifiedGeometryCache = {};\n\n  /**\n   * @protected\n   * @type {number}\n   */\n  this.simplifiedGeometryMaxMinSquaredTolerance = 0;\n\n  /**\n   * @protected\n   * @type {number}\n   */\n  this.simplifiedGeometryRevision = 0;\n\n  /**\n   * @private\n   * @type {ol.Transform}\n   */\n  this.tmpTransform_ = _ol_transform_.create();\n\n};\n\n_ol_.inherits(_ol_geom_Geometry_, _ol_Object_);\n\n\n/**\n * Make a complete copy of the geometry.\n * @abstract\n * @return {!ol.geom.Geometry} Clone.\n */\n_ol_geom_Geometry_.prototype.clone = function() {};\n\n\n/**\n * @abstract\n * @param {number} x X.\n * @param {number} y Y.\n * @param {ol.Coordinate} closestPoint Closest point.\n * @param {number} minSquaredDistance Minimum squared distance.\n * @return {number} Minimum squared distance.\n */\n_ol_geom_Geometry_.prototype.closestPointXY = function(x, y, closestPoint, minSquaredDistance) {};\n\n\n/**\n * Return the closest point of the geometry to the passed point as\n * {@link ol.Coordinate coordinate}.\n * @param {ol.Coordinate} point Point.\n * @param {ol.Coordinate=} opt_closestPoint Closest point.\n * @return {ol.Coordinate} Closest point.\n * @api\n */\n_ol_geom_Geometry_.prototype.getClosestPoint = function(point, opt_closestPoint) {\n  var closestPoint = opt_closestPoint ? opt_closestPoint : [NaN, NaN];\n  this.closestPointXY(point[0], point[1], closestPoint, Infinity);\n  return closestPoint;\n};\n\n\n/**\n * Returns true if this geometry includes the specified coordinate. If the\n * coordinate is on the boundary of the geometry, returns false.\n * @param {ol.Coordinate} coordinate Coordinate.\n * @return {boolean} Contains coordinate.\n * @api\n */\n_ol_geom_Geometry_.prototype.intersectsCoordinate = function(coordinate) {\n  return this.containsXY(coordinate[0], coordinate[1]);\n};\n\n\n/**\n * @abstract\n * @param {ol.Extent} extent Extent.\n * @protected\n * @return {ol.Extent} extent Extent.\n */\n_ol_geom_Geometry_.prototype.computeExtent = function(extent) {};\n\n\n/**\n * @param {number} x X.\n * @param {number} y Y.\n * @return {boolean} Contains (x, y).\n */\n_ol_geom_Geometry_.prototype.containsXY = _ol_functions_.FALSE;\n\n\n/**\n * Get the extent of the geometry.\n * @param {ol.Extent=} opt_extent Extent.\n * @return {ol.Extent} extent Extent.\n * @api\n */\n_ol_geom_Geometry_.prototype.getExtent = function(opt_extent) {\n  if (this.extentRevision_ != this.getRevision()) {\n    this.extent_ = this.computeExtent(this.extent_);\n    this.extentRevision_ = this.getRevision();\n  }\n  return _ol_extent_.returnOrUpdate(this.extent_, opt_extent);\n};\n\n\n/**\n * Rotate the geometry around a given coordinate. This modifies the geometry\n * coordinates in place.\n * @abstract\n * @param {number} angle Rotation angle in radians.\n * @param {ol.Coordinate} anchor The rotation center.\n * @api\n */\n_ol_geom_Geometry_.prototype.rotate = function(angle, anchor) {};\n\n\n/**\n * Scale the geometry (with an optional origin).  This modifies the geometry\n * coordinates in place.\n * @abstract\n * @param {number} sx The scaling factor in the x-direction.\n * @param {number=} opt_sy The scaling factor in the y-direction (defaults to\n *     sx).\n * @param {ol.Coordinate=} opt_anchor The scale origin (defaults to the center\n *     of the geometry extent).\n * @api\n */\n_ol_geom_Geometry_.prototype.scale = function(sx, opt_sy, opt_anchor) {};\n\n\n/**\n * Create a simplified version of this geometry.  For linestrings, this uses\n * the the {@link\n * https://en.wikipedia.org/wiki/Ramer-Douglas-Peucker_algorithm\n * Douglas Peucker} algorithm.  For polygons, a quantization-based\n * simplification is used to preserve topology.\n * @function\n * @param {number} tolerance The tolerance distance for simplification.\n * @return {ol.geom.Geometry} A new, simplified version of the original\n *     geometry.\n * @api\n */\n_ol_geom_Geometry_.prototype.simplify = function(tolerance) {\n  return this.getSimplifiedGeometry(tolerance * tolerance);\n};\n\n\n/**\n * Create a simplified version of this geometry using the Douglas Peucker\n * algorithm.\n * @see https://en.wikipedia.org/wiki/Ramer-Douglas-Peucker_algorithm\n * @abstract\n * @param {number} squaredTolerance Squared tolerance.\n * @return {ol.geom.Geometry} Simplified geometry.\n */\n_ol_geom_Geometry_.prototype.getSimplifiedGeometry = function(squaredTolerance) {};\n\n\n/**\n * Get the type of this geometry.\n * @abstract\n * @return {ol.geom.GeometryType} Geometry type.\n */\n_ol_geom_Geometry_.prototype.getType = function() {};\n\n\n/**\n * Apply a transform function to each coordinate of the geometry.\n * The geometry is modified in place.\n * If you do not want the geometry modified in place, first `clone()` it and\n * then use this function on the clone.\n * @abstract\n * @param {ol.TransformFunction} transformFn Transform.\n */\n_ol_geom_Geometry_.prototype.applyTransform = function(transformFn) {};\n\n\n/**\n * Test if the geometry and the passed extent intersect.\n * @abstract\n * @param {ol.Extent} extent Extent.\n * @return {boolean} `true` if the geometry and the extent intersect.\n */\n_ol_geom_Geometry_.prototype.intersectsExtent = function(extent) {};\n\n\n/**\n * Translate the geometry.  This modifies the geometry coordinates in place.  If\n * instead you want a new geometry, first `clone()` this geometry.\n * @abstract\n * @param {number} deltaX Delta X.\n * @param {number} deltaY Delta Y.\n */\n_ol_geom_Geometry_.prototype.translate = function(deltaX, deltaY) {};\n\n\n/**\n * Transform each coordinate of the geometry from one coordinate reference\n * system to another. The geometry is modified in place.\n * For example, a line will be transformed to a line and a circle to a circle.\n * If you do not want the geometry modified in place, first `clone()` it and\n * then use this function on the clone.\n *\n * @param {ol.ProjectionLike} source The current projection.  Can be a\n *     string identifier or a {@link ol.proj.Projection} object.\n * @param {ol.ProjectionLike} destination The desired projection.  Can be a\n *     string identifier or a {@link ol.proj.Projection} object.\n * @return {ol.geom.Geometry} This geometry.  Note that original geometry is\n *     modified in place.\n * @api\n */\n_ol_geom_Geometry_.prototype.transform = function(source, destination) {\n  var tmpTransform = this.tmpTransform_;\n  source = _ol_proj_.get(source);\n  var transformFn = source.getUnits() == _ol_proj_Units_.TILE_PIXELS ?\n    function(inCoordinates, outCoordinates, stride) {\n      var pixelExtent = source.getExtent();\n      var projectedExtent = source.getWorldExtent();\n      var scale = _ol_extent_.getHeight(projectedExtent) / _ol_extent_.getHeight(pixelExtent);\n      _ol_transform_.compose(tmpTransform,\n          projectedExtent[0], projectedExtent[3],\n          scale, -scale, 0,\n          0, 0);\n      _ol_geom_flat_transform_.transform2D(inCoordinates, 0, inCoordinates.length, stride,\n          tmpTransform, outCoordinates);\n      return _ol_proj_.getTransform(source, destination)(inCoordinates, outCoordinates, stride);\n    } :\n    _ol_proj_.getTransform(source, destination);\n  this.applyTransform(transformFn);\n  return this;\n};\nexport default _ol_geom_Geometry_;\n","/**\n * @enum {string}\n */\nvar _ol_MapEventType_ = {\n\n  /**\n   * Triggered after a map frame is rendered.\n   * @event ol.MapEvent#postrender\n   * @api\n   */\n  POSTRENDER: 'postrender',\n\n  /**\n   * Triggered when the map starts moving.\n   * @event ol.MapEvent#movestart\n   * @api\n   */\n  MOVESTART: 'movestart',\n\n  /**\n   * Triggered after the map is moved.\n   * @event ol.MapEvent#moveend\n   * @api\n   */\n  MOVEEND: 'moveend'\n\n};\n\nexport default _ol_MapEventType_;\n","import _ol_array_ from './array.js';\nvar _ol_xml_ = {};\n\n\n/**\n * This document should be used when creating nodes for XML serializations. This\n * document is also used by {@link ol.xml.createElementNS} and\n * {@link ol.xml.setAttributeNS}\n * @const\n * @type {Document}\n */\n_ol_xml_.DOCUMENT = document.implementation.createDocument('', '', null);\n\n\n/**\n * @param {string} namespaceURI Namespace URI.\n * @param {string} qualifiedName Qualified name.\n * @return {Node} Node.\n */\n_ol_xml_.createElementNS = function(namespaceURI, qualifiedName) {\n  return _ol_xml_.DOCUMENT.createElementNS(namespaceURI, qualifiedName);\n};\n\n\n/**\n * Recursively grab all text content of child nodes into a single string.\n * @param {Node} node Node.\n * @param {boolean} normalizeWhitespace Normalize whitespace: remove all line\n * breaks.\n * @return {string} All text content.\n * @api\n */\n_ol_xml_.getAllTextContent = function(node, normalizeWhitespace) {\n  return _ol_xml_.getAllTextContent_(node, normalizeWhitespace, []).join('');\n};\n\n\n/**\n * Recursively grab all text content of child nodes into a single string.\n * @param {Node} node Node.\n * @param {boolean} normalizeWhitespace Normalize whitespace: remove all line\n * breaks.\n * @param {Array.<string>} accumulator Accumulator.\n * @private\n * @return {Array.<string>} Accumulator.\n */\n_ol_xml_.getAllTextContent_ = function(node, normalizeWhitespace, accumulator) {\n  if (node.nodeType == Node.CDATA_SECTION_NODE ||\n      node.nodeType == Node.TEXT_NODE) {\n    if (normalizeWhitespace) {\n      accumulator.push(String(node.nodeValue).replace(/(\\r\\n|\\r|\\n)/g, ''));\n    } else {\n      accumulator.push(node.nodeValue);\n    }\n  } else {\n    var n;\n    for (n = node.firstChild; n; n = n.nextSibling) {\n      _ol_xml_.getAllTextContent_(n, normalizeWhitespace, accumulator);\n    }\n  }\n  return accumulator;\n};\n\n\n/**\n * @param {?} value Value.\n * @return {boolean} Is document.\n */\n_ol_xml_.isDocument = function(value) {\n  return value instanceof Document;\n};\n\n\n/**\n * @param {?} value Value.\n * @return {boolean} Is node.\n */\n_ol_xml_.isNode = function(value) {\n  return value instanceof Node;\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {?string} namespaceURI Namespace URI.\n * @param {string} name Attribute name.\n * @return {string} Value\n */\n_ol_xml_.getAttributeNS = function(node, namespaceURI, name) {\n  return node.getAttributeNS(namespaceURI, name) || '';\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {?string} namespaceURI Namespace URI.\n * @param {string} name Attribute name.\n * @param {string|number} value Value.\n */\n_ol_xml_.setAttributeNS = function(node, namespaceURI, name, value) {\n  node.setAttributeNS(namespaceURI, name, value);\n};\n\n\n/**\n * Parse an XML string to an XML Document.\n * @param {string} xml XML.\n * @return {Document} Document.\n * @api\n */\n_ol_xml_.parse = function(xml) {\n  return new DOMParser().parseFromString(xml, 'application/xml');\n};\n\n\n/**\n * Make an array extender function for extending the array at the top of the\n * object stack.\n * @param {function(this: T, Node, Array.<*>): (Array.<*>|undefined)}\n *     valueReader Value reader.\n * @param {T=} opt_this The object to use as `this` in `valueReader`.\n * @return {ol.XmlParser} Parser.\n * @template T\n */\n_ol_xml_.makeArrayExtender = function(valueReader, opt_this) {\n  return (\n    /**\n     * @param {Node} node Node.\n     * @param {Array.<*>} objectStack Object stack.\n     */\n    function(node, objectStack) {\n      var value = valueReader.call(opt_this, node, objectStack);\n      if (value !== undefined) {\n        var array = /** @type {Array.<*>} */\n              (objectStack[objectStack.length - 1]);\n        _ol_array_.extend(array, value);\n      }\n    }\n  );\n};\n\n\n/**\n * Make an array pusher function for pushing to the array at the top of the\n * object stack.\n * @param {function(this: T, Node, Array.<*>): *} valueReader Value reader.\n * @param {T=} opt_this The object to use as `this` in `valueReader`.\n * @return {ol.XmlParser} Parser.\n * @template T\n */\n_ol_xml_.makeArrayPusher = function(valueReader, opt_this) {\n  return (\n    /**\n     * @param {Node} node Node.\n     * @param {Array.<*>} objectStack Object stack.\n     */\n    function(node, objectStack) {\n      var value = valueReader.call(opt_this !== undefined ? opt_this : this,\n          node, objectStack);\n      if (value !== undefined) {\n        var array = objectStack[objectStack.length - 1];\n        array.push(value);\n      }\n    });\n};\n\n\n/**\n * Make an object stack replacer function for replacing the object at the\n * top of the stack.\n * @param {function(this: T, Node, Array.<*>): *} valueReader Value reader.\n * @param {T=} opt_this The object to use as `this` in `valueReader`.\n * @return {ol.XmlParser} Parser.\n * @template T\n */\n_ol_xml_.makeReplacer = function(valueReader, opt_this) {\n  return (\n    /**\n     * @param {Node} node Node.\n     * @param {Array.<*>} objectStack Object stack.\n     */\n    function(node, objectStack) {\n      var value = valueReader.call(opt_this !== undefined ? opt_this : this,\n          node, objectStack);\n      if (value !== undefined) {\n        objectStack[objectStack.length - 1] = value;\n      }\n    });\n};\n\n\n/**\n * Make an object property pusher function for adding a property to the\n * object at the top of the stack.\n * @param {function(this: T, Node, Array.<*>): *} valueReader Value reader.\n * @param {string=} opt_property Property.\n * @param {T=} opt_this The object to use as `this` in `valueReader`.\n * @return {ol.XmlParser} Parser.\n * @template T\n */\n_ol_xml_.makeObjectPropertyPusher = function(valueReader, opt_property, opt_this) {\n  return (\n    /**\n     * @param {Node} node Node.\n     * @param {Array.<*>} objectStack Object stack.\n     */\n    function(node, objectStack) {\n      var value = valueReader.call(opt_this !== undefined ? opt_this : this,\n          node, objectStack);\n      if (value !== undefined) {\n        var object = /** @type {Object} */\n              (objectStack[objectStack.length - 1]);\n        var property = opt_property !== undefined ?\n          opt_property : node.localName;\n        var array;\n        if (property in object) {\n          array = object[property];\n        } else {\n          array = object[property] = [];\n        }\n        array.push(value);\n      }\n    });\n};\n\n\n/**\n * Make an object property setter function.\n * @param {function(this: T, Node, Array.<*>): *} valueReader Value reader.\n * @param {string=} opt_property Property.\n * @param {T=} opt_this The object to use as `this` in `valueReader`.\n * @return {ol.XmlParser} Parser.\n * @template T\n */\n_ol_xml_.makeObjectPropertySetter = function(valueReader, opt_property, opt_this) {\n  return (\n    /**\n     * @param {Node} node Node.\n     * @param {Array.<*>} objectStack Object stack.\n     */\n    function(node, objectStack) {\n      var value = valueReader.call(opt_this !== undefined ? opt_this : this,\n          node, objectStack);\n      if (value !== undefined) {\n        var object = /** @type {Object} */\n              (objectStack[objectStack.length - 1]);\n        var property = opt_property !== undefined ?\n          opt_property : node.localName;\n        object[property] = value;\n      }\n    });\n};\n\n\n/**\n * Create a serializer that appends nodes written by its `nodeWriter` to its\n * designated parent. The parent is the `node` of the\n * {@link ol.XmlNodeStackItem} at the top of the `objectStack`.\n * @param {function(this: T, Node, V, Array.<*>)}\n *     nodeWriter Node writer.\n * @param {T=} opt_this The object to use as `this` in `nodeWriter`.\n * @return {ol.XmlSerializer} Serializer.\n * @template T, V\n */\n_ol_xml_.makeChildAppender = function(nodeWriter, opt_this) {\n  return function(node, value, objectStack) {\n    nodeWriter.call(opt_this !== undefined ? opt_this : this,\n        node, value, objectStack);\n    var parent = objectStack[objectStack.length - 1];\n    var parentNode = parent.node;\n    parentNode.appendChild(node);\n  };\n};\n\n\n/**\n * Create a serializer that calls the provided `nodeWriter` from\n * {@link ol.xml.serialize}. This can be used by the parent writer to have the\n * 'nodeWriter' called with an array of values when the `nodeWriter` was\n * designed to serialize a single item. An example would be a LineString\n * geometry writer, which could be reused for writing MultiLineString\n * geometries.\n * @param {function(this: T, Node, V, Array.<*>)}\n *     nodeWriter Node writer.\n * @param {T=} opt_this The object to use as `this` in `nodeWriter`.\n * @return {ol.XmlSerializer} Serializer.\n * @template T, V\n */\n_ol_xml_.makeArraySerializer = function(nodeWriter, opt_this) {\n  var serializersNS, nodeFactory;\n  return function(node, value, objectStack) {\n    if (serializersNS === undefined) {\n      serializersNS = {};\n      var serializers = {};\n      serializers[node.localName] = nodeWriter;\n      serializersNS[node.namespaceURI] = serializers;\n      nodeFactory = _ol_xml_.makeSimpleNodeFactory(node.localName);\n    }\n    _ol_xml_.serialize(serializersNS, nodeFactory, value, objectStack);\n  };\n};\n\n\n/**\n * Create a node factory which can use the `opt_keys` passed to\n * {@link ol.xml.serialize} or {@link ol.xml.pushSerializeAndPop} as node names,\n * or a fixed node name. The namespace of the created nodes can either be fixed,\n * or the parent namespace will be used.\n * @param {string=} opt_nodeName Fixed node name which will be used for all\n *     created nodes. If not provided, the 3rd argument to the resulting node\n *     factory needs to be provided and will be the nodeName.\n * @param {string=} opt_namespaceURI Fixed namespace URI which will be used for\n *     all created nodes. If not provided, the namespace of the parent node will\n *     be used.\n * @return {function(*, Array.<*>, string=): (Node|undefined)} Node factory.\n */\n_ol_xml_.makeSimpleNodeFactory = function(opt_nodeName, opt_namespaceURI) {\n  var fixedNodeName = opt_nodeName;\n  return (\n    /**\n     * @param {*} value Value.\n     * @param {Array.<*>} objectStack Object stack.\n     * @param {string=} opt_nodeName Node name.\n     * @return {Node} Node.\n     */\n    function(value, objectStack, opt_nodeName) {\n      var context = objectStack[objectStack.length - 1];\n      var node = context.node;\n      var nodeName = fixedNodeName;\n      if (nodeName === undefined) {\n        nodeName = opt_nodeName;\n      }\n      var namespaceURI = opt_namespaceURI;\n      if (opt_namespaceURI === undefined) {\n        namespaceURI = node.namespaceURI;\n      }\n      return _ol_xml_.createElementNS(namespaceURI, /** @type {string} */ (nodeName));\n    }\n  );\n};\n\n\n/**\n * A node factory that creates a node using the parent's `namespaceURI` and the\n * `nodeName` passed by {@link ol.xml.serialize} or\n * {@link ol.xml.pushSerializeAndPop} to the node factory.\n * @const\n * @type {function(*, Array.<*>, string=): (Node|undefined)}\n */\n_ol_xml_.OBJECT_PROPERTY_NODE_FACTORY = _ol_xml_.makeSimpleNodeFactory();\n\n\n/**\n * Create an array of `values` to be used with {@link ol.xml.serialize} or\n * {@link ol.xml.pushSerializeAndPop}, where `orderedKeys` has to be provided as\n * `opt_key` argument.\n * @param {Object.<string, V>} object Key-value pairs for the sequence. Keys can\n *     be a subset of the `orderedKeys`.\n * @param {Array.<string>} orderedKeys Keys in the order of the sequence.\n * @return {Array.<V>} Values in the order of the sequence. The resulting array\n *     has the same length as the `orderedKeys` array. Values that are not\n *     present in `object` will be `undefined` in the resulting array.\n * @template V\n */\n_ol_xml_.makeSequence = function(object, orderedKeys) {\n  var length = orderedKeys.length;\n  var sequence = new Array(length);\n  for (var i = 0; i < length; ++i) {\n    sequence[i] = object[orderedKeys[i]];\n  }\n  return sequence;\n};\n\n\n/**\n * Create a namespaced structure, using the same values for each namespace.\n * This can be used as a starting point for versioned parsers, when only a few\n * values are version specific.\n * @param {Array.<string>} namespaceURIs Namespace URIs.\n * @param {T} structure Structure.\n * @param {Object.<string, T>=} opt_structureNS Namespaced structure to add to.\n * @return {Object.<string, T>} Namespaced structure.\n * @template T\n */\n_ol_xml_.makeStructureNS = function(namespaceURIs, structure, opt_structureNS) {\n  /**\n   * @type {Object.<string, *>}\n   */\n  var structureNS = opt_structureNS !== undefined ? opt_structureNS : {};\n  var i, ii;\n  for (i = 0, ii = namespaceURIs.length; i < ii; ++i) {\n    structureNS[namespaceURIs[i]] = structure;\n  }\n  return structureNS;\n};\n\n\n/**\n * Parse a node using the parsers and object stack.\n * @param {Object.<string, Object.<string, ol.XmlParser>>} parsersNS\n *     Parsers by namespace.\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @param {*=} opt_this The object to use as `this`.\n */\n_ol_xml_.parseNode = function(parsersNS, node, objectStack, opt_this) {\n  var n;\n  for (n = node.firstElementChild; n; n = n.nextElementSibling) {\n    var parsers = parsersNS[n.namespaceURI];\n    if (parsers !== undefined) {\n      var parser = parsers[n.localName];\n      if (parser !== undefined) {\n        parser.call(opt_this, n, objectStack);\n      }\n    }\n  }\n};\n\n\n/**\n * Push an object on top of the stack, parse and return the popped object.\n * @param {T} object Object.\n * @param {Object.<string, Object.<string, ol.XmlParser>>} parsersNS\n *     Parsers by namespace.\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @param {*=} opt_this The object to use as `this`.\n * @return {T} Object.\n * @template T\n */\n_ol_xml_.pushParseAndPop = function(\n    object, parsersNS, node, objectStack, opt_this) {\n  objectStack.push(object);\n  _ol_xml_.parseNode(parsersNS, node, objectStack, opt_this);\n  return objectStack.pop();\n};\n\n\n/**\n * Walk through an array of `values` and call a serializer for each value.\n * @param {Object.<string, Object.<string, ol.XmlSerializer>>} serializersNS\n *     Namespaced serializers.\n * @param {function(this: T, *, Array.<*>, (string|undefined)): (Node|undefined)} nodeFactory\n *     Node factory. The `nodeFactory` creates the node whose namespace and name\n *     will be used to choose a node writer from `serializersNS`. This\n *     separation allows us to decide what kind of node to create, depending on\n *     the value we want to serialize. An example for this would be different\n *     geometry writers based on the geometry type.\n * @param {Array.<*>} values Values to serialize. An example would be an array\n *     of {@link ol.Feature} instances.\n * @param {Array.<*>} objectStack Node stack.\n * @param {Array.<string>=} opt_keys Keys of the `values`. Will be passed to the\n *     `nodeFactory`. This is used for serializing object literals where the\n *     node name relates to the property key. The array length of `opt_keys` has\n *     to match the length of `values`. For serializing a sequence, `opt_keys`\n *     determines the order of the sequence.\n * @param {T=} opt_this The object to use as `this` for the node factory and\n *     serializers.\n * @template T\n */\n_ol_xml_.serialize = function(\n    serializersNS, nodeFactory, values, objectStack, opt_keys, opt_this) {\n  var length = (opt_keys !== undefined ? opt_keys : values).length;\n  var value, node;\n  for (var i = 0; i < length; ++i) {\n    value = values[i];\n    if (value !== undefined) {\n      node = nodeFactory.call(opt_this, value, objectStack,\n          opt_keys !== undefined ? opt_keys[i] : undefined);\n      if (node !== undefined) {\n        serializersNS[node.namespaceURI][node.localName]\n            .call(opt_this, node, value, objectStack);\n      }\n    }\n  }\n};\n\n\n/**\n * @param {O} object Object.\n * @param {Object.<string, Object.<string, ol.XmlSerializer>>} serializersNS\n *     Namespaced serializers.\n * @param {function(this: T, *, Array.<*>, (string|undefined)): (Node|undefined)} nodeFactory\n *     Node factory. The `nodeFactory` creates the node whose namespace and name\n *     will be used to choose a node writer from `serializersNS`. This\n *     separation allows us to decide what kind of node to create, depending on\n *     the value we want to serialize. An example for this would be different\n *     geometry writers based on the geometry type.\n * @param {Array.<*>} values Values to serialize. An example would be an array\n *     of {@link ol.Feature} instances.\n * @param {Array.<*>} objectStack Node stack.\n * @param {Array.<string>=} opt_keys Keys of the `values`. Will be passed to the\n *     `nodeFactory`. This is used for serializing object literals where the\n *     node name relates to the property key. The array length of `opt_keys` has\n *     to match the length of `values`. For serializing a sequence, `opt_keys`\n *     determines the order of the sequence.\n * @param {T=} opt_this The object to use as `this` for the node factory and\n *     serializers.\n * @return {O|undefined} Object.\n * @template O, T\n */\n_ol_xml_.pushSerializeAndPop = function(object,\n    serializersNS, nodeFactory, values, objectStack, opt_keys, opt_this) {\n  objectStack.push(object);\n  _ol_xml_.serialize(\n      serializersNS, nodeFactory, values, objectStack, opt_keys, opt_this);\n  return objectStack.pop();\n};\nexport default _ol_xml_;\n","import _ol_ from './index.js';\nimport _ol_format_FormatType_ from './format/formattype.js';\nimport _ol_xml_ from './xml.js';\nvar _ol_featureloader_ = {};\n\n\n/**\n * @param {string|ol.FeatureUrlFunction} url Feature URL service.\n * @param {ol.format.Feature} format Feature format.\n * @param {function(this:ol.VectorTile, Array.<ol.Feature>, ol.proj.Projection, ol.Extent)|function(this:ol.source.Vector, Array.<ol.Feature>)} success\n *     Function called with the loaded features and optionally with the data\n *     projection. Called with the vector tile or source as `this`.\n * @param {function(this:ol.VectorTile)|function(this:ol.source.Vector)} failure\n *     Function called when loading failed. Called with the vector tile or\n *     source as `this`.\n * @return {ol.FeatureLoader} The feature loader.\n */\n_ol_featureloader_.loadFeaturesXhr = function(url, format, success, failure) {\n  return (\n    /**\n     * @param {ol.Extent} extent Extent.\n     * @param {number} resolution Resolution.\n     * @param {ol.proj.Projection} projection Projection.\n     * @this {ol.source.Vector|ol.VectorTile}\n     */\n    function(extent, resolution, projection) {\n      var xhr = new XMLHttpRequest();\n      xhr.open('GET',\n          typeof url === 'function' ? url(extent, resolution, projection) : url,\n          true);\n      if (format.getType() == _ol_format_FormatType_.ARRAY_BUFFER) {\n        xhr.responseType = 'arraybuffer';\n      }\n      /**\n       * @param {Event} event Event.\n       * @private\n       */\n      xhr.onload = function(event) {\n        // status will be 0 for file:// urls\n        if (!xhr.status || xhr.status >= 200 && xhr.status < 300) {\n          var type = format.getType();\n          /** @type {Document|Node|Object|string|undefined} */\n          var source;\n          if (type == _ol_format_FormatType_.JSON ||\n                type == _ol_format_FormatType_.TEXT) {\n            source = xhr.responseText;\n          } else if (type == _ol_format_FormatType_.XML) {\n            source = xhr.responseXML;\n            if (!source) {\n              source = _ol_xml_.parse(xhr.responseText);\n            }\n          } else if (type == _ol_format_FormatType_.ARRAY_BUFFER) {\n            source = /** @type {ArrayBuffer} */ (xhr.response);\n          }\n          if (source) {\n            success.call(this, format.readFeatures(source,\n                {featureProjection: projection}),\n            format.readProjection(source), format.getLastExtent());\n          } else {\n            failure.call(this);\n          }\n        } else {\n          failure.call(this);\n        }\n      }.bind(this);\n      /**\n       * @private\n       */\n      xhr.onerror = function() {\n        failure.call(this);\n      }.bind(this);\n      xhr.send();\n    }\n  );\n};\n\n\n/**\n * Create an XHR feature loader for a `url` and `format`. The feature loader\n * loads features (with XHR), parses the features, and adds them to the\n * vector source.\n * @param {string|ol.FeatureUrlFunction} url Feature URL service.\n * @param {ol.format.Feature} format Feature format.\n * @return {ol.FeatureLoader} The feature loader.\n * @api\n */\n_ol_featureloader_.xhr = function(url, format) {\n  return _ol_featureloader_.loadFeaturesXhr(url, format,\n      /**\n       * @param {Array.<ol.Feature>} features The loaded features.\n       * @param {ol.proj.Projection} dataProjection Data projection.\n       * @this {ol.source.Vector}\n       */\n      function(features, dataProjection) {\n        this.addFeatures(features);\n      }, /* FIXME handle error */ _ol_.nullFunction);\n};\nexport default _ol_featureloader_;\n","/**\n * @enum {string}\n */\nvar _ol_source_VectorEventType_ = {\n  /**\n   * Triggered when a feature is added to the source.\n   * @event ol.source.Vector.Event#addfeature\n   * @api\n   */\n  ADDFEATURE: 'addfeature',\n\n  /**\n   * Triggered when a feature is updated.\n   * @event ol.source.Vector.Event#changefeature\n   * @api\n   */\n  CHANGEFEATURE: 'changefeature',\n\n  /**\n   * Triggered when the clear method is called on the source.\n   * @event ol.source.Vector.Event#clear\n   * @api\n   */\n  CLEAR: 'clear',\n\n  /**\n   * Triggered when a feature is removed from the source.\n   * See {@link ol.source.Vector#clear source.clear()} for exceptions.\n   * @event ol.source.Vector.Event#removefeature\n   * @api\n   */\n  REMOVEFEATURE: 'removefeature'\n};\n\nexport default _ol_source_VectorEventType_;\n","// FIXME bulk feature upload - suppress events\n// FIXME make change-detection more refined (notably, geometry hint)\n\nimport _ol_ from '../index.js';\nimport _ol_Collection_ from '../collection.js';\nimport _ol_CollectionEventType_ from '../collectioneventtype.js';\nimport _ol_ObjectEventType_ from '../objecteventtype.js';\nimport _ol_array_ from '../array.js';\nimport _ol_asserts_ from '../asserts.js';\nimport _ol_events_ from '../events.js';\nimport _ol_events_Event_ from '../events/event.js';\nimport _ol_events_EventType_ from '../events/eventtype.js';\nimport _ol_extent_ from '../extent.js';\nimport _ol_featureloader_ from '../featureloader.js';\nimport _ol_functions_ from '../functions.js';\nimport _ol_loadingstrategy_ from '../loadingstrategy.js';\nimport _ol_obj_ from '../obj.js';\nimport _ol_source_Source_ from '../source/source.js';\nimport _ol_source_State_ from '../source/state.js';\nimport _ol_source_VectorEventType_ from '../source/vectoreventtype.js';\nimport _ol_structs_RBush_ from '../structs/rbush.js';\n\n/**\n * @classdesc\n * Provides a source of features for vector layers. Vector features provided\n * by this source are suitable for editing. See {@link ol.source.VectorTile} for\n * vector data that is optimized for rendering.\n *\n * @constructor\n * @extends {ol.source.Source}\n * @fires ol.source.Vector.Event\n * @param {olx.source.VectorOptions=} opt_options Vector source options.\n * @api\n */\nvar _ol_source_Vector_ = function(opt_options) {\n\n  var options = opt_options || {};\n\n  _ol_source_Source_.call(this, {\n    attributions: options.attributions,\n    logo: options.logo,\n    projection: undefined,\n    state: _ol_source_State_.READY,\n    wrapX: options.wrapX !== undefined ? options.wrapX : true\n  });\n\n  /**\n   * @private\n   * @type {ol.FeatureLoader}\n   */\n  this.loader_ = _ol_.nullFunction;\n\n  /**\n   * @private\n   * @type {ol.format.Feature|undefined}\n   */\n  this.format_ = options.format;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.overlaps_ = options.overlaps == undefined ? true : options.overlaps;\n\n  /**\n   * @private\n   * @type {string|ol.FeatureUrlFunction|undefined}\n   */\n  this.url_ = options.url;\n\n  if (options.loader !== undefined) {\n    this.loader_ = options.loader;\n  } else if (this.url_ !== undefined) {\n    _ol_asserts_.assert(this.format_, 7); // `format` must be set when `url` is set\n    // create a XHR feature loader for \"url\" and \"format\"\n    this.loader_ = _ol_featureloader_.xhr(this.url_, /** @type {ol.format.Feature} */ (this.format_));\n  }\n\n  /**\n   * @private\n   * @type {ol.LoadingStrategy}\n   */\n  this.strategy_ = options.strategy !== undefined ? options.strategy :\n    _ol_loadingstrategy_.all;\n\n  var useSpatialIndex =\n      options.useSpatialIndex !== undefined ? options.useSpatialIndex : true;\n\n  /**\n   * @private\n   * @type {ol.structs.RBush.<ol.Feature>}\n   */\n  this.featuresRtree_ = useSpatialIndex ? new _ol_structs_RBush_() : null;\n\n  /**\n   * @private\n   * @type {ol.structs.RBush.<{extent: ol.Extent}>}\n   */\n  this.loadedExtentsRtree_ = new _ol_structs_RBush_();\n\n  /**\n   * @private\n   * @type {Object.<string, ol.Feature>}\n   */\n  this.nullGeometryFeatures_ = {};\n\n  /**\n   * A lookup of features by id (the return from feature.getId()).\n   * @private\n   * @type {Object.<string, ol.Feature>}\n   */\n  this.idIndex_ = {};\n\n  /**\n   * A lookup of features without id (keyed by ol.getUid(feature)).\n   * @private\n   * @type {Object.<string, ol.Feature>}\n   */\n  this.undefIdIndex_ = {};\n\n  /**\n   * @private\n   * @type {Object.<string, Array.<ol.EventsKey>>}\n   */\n  this.featureChangeKeys_ = {};\n\n  /**\n   * @private\n   * @type {ol.Collection.<ol.Feature>}\n   */\n  this.featuresCollection_ = null;\n\n  var collection, features;\n  if (options.features instanceof _ol_Collection_) {\n    collection = options.features;\n    features = collection.getArray();\n  } else if (Array.isArray(options.features)) {\n    features = options.features;\n  }\n  if (!useSpatialIndex && collection === undefined) {\n    collection = new _ol_Collection_(features);\n  }\n  if (features !== undefined) {\n    this.addFeaturesInternal(features);\n  }\n  if (collection !== undefined) {\n    this.bindFeaturesCollection_(collection);\n  }\n\n};\n\n_ol_.inherits(_ol_source_Vector_, _ol_source_Source_);\n\n\n/**\n * Add a single feature to the source.  If you want to add a batch of features\n * at once, call {@link ol.source.Vector#addFeatures source.addFeatures()}\n * instead. A feature will not be added to the source if feature with\n * the same id is already there. The reason for this behavior is to avoid\n * feature duplication when using bbox or tile loading strategies.\n * @param {ol.Feature} feature Feature to add.\n * @api\n */\n_ol_source_Vector_.prototype.addFeature = function(feature) {\n  this.addFeatureInternal(feature);\n  this.changed();\n};\n\n\n/**\n * Add a feature without firing a `change` event.\n * @param {ol.Feature} feature Feature.\n * @protected\n */\n_ol_source_Vector_.prototype.addFeatureInternal = function(feature) {\n  var featureKey = _ol_.getUid(feature).toString();\n\n  if (!this.addToIndex_(featureKey, feature)) {\n    return;\n  }\n\n  this.setupChangeEvents_(featureKey, feature);\n\n  var geometry = feature.getGeometry();\n  if (geometry) {\n    var extent = geometry.getExtent();\n    if (this.featuresRtree_) {\n      this.featuresRtree_.insert(extent, feature);\n    }\n  } else {\n    this.nullGeometryFeatures_[featureKey] = feature;\n  }\n\n  this.dispatchEvent(\n      new _ol_source_Vector_.Event(_ol_source_VectorEventType_.ADDFEATURE, feature));\n};\n\n\n/**\n * @param {string} featureKey Unique identifier for the feature.\n * @param {ol.Feature} feature The feature.\n * @private\n */\n_ol_source_Vector_.prototype.setupChangeEvents_ = function(featureKey, feature) {\n  this.featureChangeKeys_[featureKey] = [\n    _ol_events_.listen(feature, _ol_events_EventType_.CHANGE,\n        this.handleFeatureChange_, this),\n    _ol_events_.listen(feature, _ol_ObjectEventType_.PROPERTYCHANGE,\n        this.handleFeatureChange_, this)\n  ];\n};\n\n\n/**\n * @param {string} featureKey Unique identifier for the feature.\n * @param {ol.Feature} feature The feature.\n * @return {boolean} The feature is \"valid\", in the sense that it is also a\n *     candidate for insertion into the Rtree.\n * @private\n */\n_ol_source_Vector_.prototype.addToIndex_ = function(featureKey, feature) {\n  var valid = true;\n  var id = feature.getId();\n  if (id !== undefined) {\n    if (!(id.toString() in this.idIndex_)) {\n      this.idIndex_[id.toString()] = feature;\n    } else {\n      valid = false;\n    }\n  } else {\n    _ol_asserts_.assert(!(featureKey in this.undefIdIndex_),\n        30); // The passed `feature` was already added to the source\n    this.undefIdIndex_[featureKey] = feature;\n  }\n  return valid;\n};\n\n\n/**\n * Add a batch of features to the source.\n * @param {Array.<ol.Feature>} features Features to add.\n * @api\n */\n_ol_source_Vector_.prototype.addFeatures = function(features) {\n  this.addFeaturesInternal(features);\n  this.changed();\n};\n\n\n/**\n * Add features without firing a `change` event.\n * @param {Array.<ol.Feature>} features Features.\n * @protected\n */\n_ol_source_Vector_.prototype.addFeaturesInternal = function(features) {\n  var featureKey, i, length, feature;\n\n  var extents = [];\n  var newFeatures = [];\n  var geometryFeatures = [];\n\n  for (i = 0, length = features.length; i < length; i++) {\n    feature = features[i];\n    featureKey = _ol_.getUid(feature).toString();\n    if (this.addToIndex_(featureKey, feature)) {\n      newFeatures.push(feature);\n    }\n  }\n\n  for (i = 0, length = newFeatures.length; i < length; i++) {\n    feature = newFeatures[i];\n    featureKey = _ol_.getUid(feature).toString();\n    this.setupChangeEvents_(featureKey, feature);\n\n    var geometry = feature.getGeometry();\n    if (geometry) {\n      var extent = geometry.getExtent();\n      extents.push(extent);\n      geometryFeatures.push(feature);\n    } else {\n      this.nullGeometryFeatures_[featureKey] = feature;\n    }\n  }\n  if (this.featuresRtree_) {\n    this.featuresRtree_.load(extents, geometryFeatures);\n  }\n\n  for (i = 0, length = newFeatures.length; i < length; i++) {\n    this.dispatchEvent(new _ol_source_Vector_.Event(\n        _ol_source_VectorEventType_.ADDFEATURE, newFeatures[i]));\n  }\n};\n\n\n/**\n * @param {!ol.Collection.<ol.Feature>} collection Collection.\n * @private\n */\n_ol_source_Vector_.prototype.bindFeaturesCollection_ = function(collection) {\n  var modifyingCollection = false;\n  _ol_events_.listen(this, _ol_source_VectorEventType_.ADDFEATURE,\n      function(evt) {\n        if (!modifyingCollection) {\n          modifyingCollection = true;\n          collection.push(evt.feature);\n          modifyingCollection = false;\n        }\n      });\n  _ol_events_.listen(this, _ol_source_VectorEventType_.REMOVEFEATURE,\n      function(evt) {\n        if (!modifyingCollection) {\n          modifyingCollection = true;\n          collection.remove(evt.feature);\n          modifyingCollection = false;\n        }\n      });\n  _ol_events_.listen(collection, _ol_CollectionEventType_.ADD,\n      function(evt) {\n        if (!modifyingCollection) {\n          modifyingCollection = true;\n          this.addFeature(/** @type {ol.Feature} */ (evt.element));\n          modifyingCollection = false;\n        }\n      }, this);\n  _ol_events_.listen(collection, _ol_CollectionEventType_.REMOVE,\n      function(evt) {\n        if (!modifyingCollection) {\n          modifyingCollection = true;\n          this.removeFeature(/** @type {ol.Feature} */ (evt.element));\n          modifyingCollection = false;\n        }\n      }, this);\n  this.featuresCollection_ = collection;\n};\n\n\n/**\n * Remove all features from the source.\n * @param {boolean=} opt_fast Skip dispatching of {@link removefeature} events.\n * @api\n */\n_ol_source_Vector_.prototype.clear = function(opt_fast) {\n  if (opt_fast) {\n    for (var featureId in this.featureChangeKeys_) {\n      var keys = this.featureChangeKeys_[featureId];\n      keys.forEach(_ol_events_.unlistenByKey);\n    }\n    if (!this.featuresCollection_) {\n      this.featureChangeKeys_ = {};\n      this.idIndex_ = {};\n      this.undefIdIndex_ = {};\n    }\n  } else {\n    if (this.featuresRtree_) {\n      this.featuresRtree_.forEach(this.removeFeatureInternal, this);\n      for (var id in this.nullGeometryFeatures_) {\n        this.removeFeatureInternal(this.nullGeometryFeatures_[id]);\n      }\n    }\n  }\n  if (this.featuresCollection_) {\n    this.featuresCollection_.clear();\n  }\n\n  if (this.featuresRtree_) {\n    this.featuresRtree_.clear();\n  }\n  this.loadedExtentsRtree_.clear();\n  this.nullGeometryFeatures_ = {};\n\n  var clearEvent = new _ol_source_Vector_.Event(_ol_source_VectorEventType_.CLEAR);\n  this.dispatchEvent(clearEvent);\n  this.changed();\n};\n\n\n/**\n * Iterate through all features on the source, calling the provided callback\n * with each one.  If the callback returns any \"truthy\" value, iteration will\n * stop and the function will return the same value.\n *\n * @param {function(this: T, ol.Feature): S} callback Called with each feature\n *     on the source.  Return a truthy value to stop iteration.\n * @param {T=} opt_this The object to use as `this` in the callback.\n * @return {S|undefined} The return value from the last call to the callback.\n * @template T,S\n * @api\n */\n_ol_source_Vector_.prototype.forEachFeature = function(callback, opt_this) {\n  if (this.featuresRtree_) {\n    return this.featuresRtree_.forEach(callback, opt_this);\n  } else if (this.featuresCollection_) {\n    return this.featuresCollection_.forEach(callback, opt_this);\n  }\n};\n\n\n/**\n * Iterate through all features whose geometries contain the provided\n * coordinate, calling the callback with each feature.  If the callback returns\n * a \"truthy\" value, iteration will stop and the function will return the same\n * value.\n *\n * @param {ol.Coordinate} coordinate Coordinate.\n * @param {function(this: T, ol.Feature): S} callback Called with each feature\n *     whose goemetry contains the provided coordinate.\n * @param {T=} opt_this The object to use as `this` in the callback.\n * @return {S|undefined} The return value from the last call to the callback.\n * @template T,S\n */\n_ol_source_Vector_.prototype.forEachFeatureAtCoordinateDirect = function(coordinate, callback, opt_this) {\n  var extent = [coordinate[0], coordinate[1], coordinate[0], coordinate[1]];\n  return this.forEachFeatureInExtent(extent, function(feature) {\n    var geometry = feature.getGeometry();\n    if (geometry.intersectsCoordinate(coordinate)) {\n      return callback.call(opt_this, feature);\n    } else {\n      return undefined;\n    }\n  });\n};\n\n\n/**\n * Iterate through all features whose bounding box intersects the provided\n * extent (note that the feature's geometry may not intersect the extent),\n * calling the callback with each feature.  If the callback returns a \"truthy\"\n * value, iteration will stop and the function will return the same value.\n *\n * If you are interested in features whose geometry intersects an extent, call\n * the {@link ol.source.Vector#forEachFeatureIntersectingExtent\n * source.forEachFeatureIntersectingExtent()} method instead.\n *\n * When `useSpatialIndex` is set to false, this method will loop through all\n * features, equivalent to {@link ol.source.Vector#forEachFeature}.\n *\n * @param {ol.Extent} extent Extent.\n * @param {function(this: T, ol.Feature): S} callback Called with each feature\n *     whose bounding box intersects the provided extent.\n * @param {T=} opt_this The object to use as `this` in the callback.\n * @return {S|undefined} The return value from the last call to the callback.\n * @template T,S\n * @api\n */\n_ol_source_Vector_.prototype.forEachFeatureInExtent = function(extent, callback, opt_this) {\n  if (this.featuresRtree_) {\n    return this.featuresRtree_.forEachInExtent(extent, callback, opt_this);\n  } else if (this.featuresCollection_) {\n    return this.featuresCollection_.forEach(callback, opt_this);\n  }\n};\n\n\n/**\n * Iterate through all features whose geometry intersects the provided extent,\n * calling the callback with each feature.  If the callback returns a \"truthy\"\n * value, iteration will stop and the function will return the same value.\n *\n * If you only want to test for bounding box intersection, call the\n * {@link ol.source.Vector#forEachFeatureInExtent\n * source.forEachFeatureInExtent()} method instead.\n *\n * @param {ol.Extent} extent Extent.\n * @param {function(this: T, ol.Feature): S} callback Called with each feature\n *     whose geometry intersects the provided extent.\n * @param {T=} opt_this The object to use as `this` in the callback.\n * @return {S|undefined} The return value from the last call to the callback.\n * @template T,S\n * @api\n */\n_ol_source_Vector_.prototype.forEachFeatureIntersectingExtent = function(extent, callback, opt_this) {\n  return this.forEachFeatureInExtent(extent,\n      /**\n       * @param {ol.Feature} feature Feature.\n       * @return {S|undefined} The return value from the last call to the callback.\n       * @template S\n       */\n      function(feature) {\n        var geometry = feature.getGeometry();\n        if (geometry.intersectsExtent(extent)) {\n          var result = callback.call(opt_this, feature);\n          if (result) {\n            return result;\n          }\n        }\n      });\n};\n\n\n/**\n * Get the features collection associated with this source. Will be `null`\n * unless the source was configured with `useSpatialIndex` set to `false`, or\n * with an {@link ol.Collection} as `features`.\n * @return {ol.Collection.<ol.Feature>} The collection of features.\n * @api\n */\n_ol_source_Vector_.prototype.getFeaturesCollection = function() {\n  return this.featuresCollection_;\n};\n\n\n/**\n * Get all features on the source in random order.\n * @return {Array.<ol.Feature>} Features.\n * @api\n */\n_ol_source_Vector_.prototype.getFeatures = function() {\n  var features;\n  if (this.featuresCollection_) {\n    features = this.featuresCollection_.getArray();\n  } else if (this.featuresRtree_) {\n    features = this.featuresRtree_.getAll();\n    if (!_ol_obj_.isEmpty(this.nullGeometryFeatures_)) {\n      _ol_array_.extend(\n          features, _ol_obj_.getValues(this.nullGeometryFeatures_));\n    }\n  }\n  return /** @type {Array.<ol.Feature>} */ (features);\n};\n\n\n/**\n * Get all features whose geometry intersects the provided coordinate.\n * @param {ol.Coordinate} coordinate Coordinate.\n * @return {Array.<ol.Feature>} Features.\n * @api\n */\n_ol_source_Vector_.prototype.getFeaturesAtCoordinate = function(coordinate) {\n  var features = [];\n  this.forEachFeatureAtCoordinateDirect(coordinate, function(feature) {\n    features.push(feature);\n  });\n  return features;\n};\n\n\n/**\n * Get all features in the provided extent.  Note that this returns an array of\n * all features intersecting the given extent in random order (so it may include\n * features whose geometries do not intersect the extent).\n *\n * This method is not available when the source is configured with\n * `useSpatialIndex` set to `false`.\n * @param {ol.Extent} extent Extent.\n * @return {Array.<ol.Feature>} Features.\n * @api\n */\n_ol_source_Vector_.prototype.getFeaturesInExtent = function(extent) {\n  return this.featuresRtree_.getInExtent(extent);\n};\n\n\n/**\n * Get the closest feature to the provided coordinate.\n *\n * This method is not available when the source is configured with\n * `useSpatialIndex` set to `false`.\n * @param {ol.Coordinate} coordinate Coordinate.\n * @param {function(ol.Feature):boolean=} opt_filter Feature filter function.\n *     The filter function will receive one argument, the {@link ol.Feature feature}\n *     and it should return a boolean value. By default, no filtering is made.\n * @return {ol.Feature} Closest feature.\n * @api\n */\n_ol_source_Vector_.prototype.getClosestFeatureToCoordinate = function(coordinate, opt_filter) {\n  // Find the closest feature using branch and bound.  We start searching an\n  // infinite extent, and find the distance from the first feature found.  This\n  // becomes the closest feature.  We then compute a smaller extent which any\n  // closer feature must intersect.  We continue searching with this smaller\n  // extent, trying to find a closer feature.  Every time we find a closer\n  // feature, we update the extent being searched so that any even closer\n  // feature must intersect it.  We continue until we run out of features.\n  var x = coordinate[0];\n  var y = coordinate[1];\n  var closestFeature = null;\n  var closestPoint = [NaN, NaN];\n  var minSquaredDistance = Infinity;\n  var extent = [-Infinity, -Infinity, Infinity, Infinity];\n  var filter = opt_filter ? opt_filter : _ol_functions_.TRUE;\n  this.featuresRtree_.forEachInExtent(extent,\n      /**\n       * @param {ol.Feature} feature Feature.\n       */\n      function(feature) {\n        if (filter(feature)) {\n          var geometry = feature.getGeometry();\n          var previousMinSquaredDistance = minSquaredDistance;\n          minSquaredDistance = geometry.closestPointXY(\n              x, y, closestPoint, minSquaredDistance);\n          if (minSquaredDistance < previousMinSquaredDistance) {\n            closestFeature = feature;\n            // This is sneaky.  Reduce the extent that it is currently being\n            // searched while the R-Tree traversal using this same extent object\n            // is still in progress.  This is safe because the new extent is\n            // strictly contained by the old extent.\n            var minDistance = Math.sqrt(minSquaredDistance);\n            extent[0] = x - minDistance;\n            extent[1] = y - minDistance;\n            extent[2] = x + minDistance;\n            extent[3] = y + minDistance;\n          }\n        }\n      });\n  return closestFeature;\n};\n\n\n/**\n * Get the extent of the features currently in the source.\n *\n * This method is not available when the source is configured with\n * `useSpatialIndex` set to `false`.\n * @param {ol.Extent=} opt_extent Destination extent. If provided, no new extent\n *     will be created. Instead, that extent's coordinates will be overwritten.\n * @return {ol.Extent} Extent.\n * @api\n */\n_ol_source_Vector_.prototype.getExtent = function(opt_extent) {\n  return this.featuresRtree_.getExtent(opt_extent);\n};\n\n\n/**\n * Get a feature by its identifier (the value returned by feature.getId()).\n * Note that the index treats string and numeric identifiers as the same.  So\n * `source.getFeatureById(2)` will return a feature with id `'2'` or `2`.\n *\n * @param {string|number} id Feature identifier.\n * @return {ol.Feature} The feature (or `null` if not found).\n * @api\n */\n_ol_source_Vector_.prototype.getFeatureById = function(id) {\n  var feature = this.idIndex_[id.toString()];\n  return feature !== undefined ? feature : null;\n};\n\n\n/**\n * Get the format associated with this source.\n *\n * @return {ol.format.Feature|undefined} The feature format.\n * @api\n */\n_ol_source_Vector_.prototype.getFormat = function() {\n  return this.format_;\n};\n\n\n/**\n * @return {boolean} The source can have overlapping geometries.\n */\n_ol_source_Vector_.prototype.getOverlaps = function() {\n  return this.overlaps_;\n};\n\n\n/**\n * @override\n */\n_ol_source_Vector_.prototype.getResolutions = function() {};\n\n\n/**\n * Get the url associated with this source.\n *\n * @return {string|ol.FeatureUrlFunction|undefined} The url.\n * @api\n */\n_ol_source_Vector_.prototype.getUrl = function() {\n  return this.url_;\n};\n\n\n/**\n * @param {ol.events.Event} event Event.\n * @private\n */\n_ol_source_Vector_.prototype.handleFeatureChange_ = function(event) {\n  var feature = /** @type {ol.Feature} */ (event.target);\n  var featureKey = _ol_.getUid(feature).toString();\n  var geometry = feature.getGeometry();\n  if (!geometry) {\n    if (!(featureKey in this.nullGeometryFeatures_)) {\n      if (this.featuresRtree_) {\n        this.featuresRtree_.remove(feature);\n      }\n      this.nullGeometryFeatures_[featureKey] = feature;\n    }\n  } else {\n    var extent = geometry.getExtent();\n    if (featureKey in this.nullGeometryFeatures_) {\n      delete this.nullGeometryFeatures_[featureKey];\n      if (this.featuresRtree_) {\n        this.featuresRtree_.insert(extent, feature);\n      }\n    } else {\n      if (this.featuresRtree_) {\n        this.featuresRtree_.update(extent, feature);\n      }\n    }\n  }\n  var id = feature.getId();\n  if (id !== undefined) {\n    var sid = id.toString();\n    if (featureKey in this.undefIdIndex_) {\n      delete this.undefIdIndex_[featureKey];\n      this.idIndex_[sid] = feature;\n    } else {\n      if (this.idIndex_[sid] !== feature) {\n        this.removeFromIdIndex_(feature);\n        this.idIndex_[sid] = feature;\n      }\n    }\n  } else {\n    if (!(featureKey in this.undefIdIndex_)) {\n      this.removeFromIdIndex_(feature);\n      this.undefIdIndex_[featureKey] = feature;\n    }\n  }\n  this.changed();\n  this.dispatchEvent(new _ol_source_Vector_.Event(\n      _ol_source_VectorEventType_.CHANGEFEATURE, feature));\n};\n\n\n/**\n * @return {boolean} Is empty.\n */\n_ol_source_Vector_.prototype.isEmpty = function() {\n  return this.featuresRtree_.isEmpty() &&\n      _ol_obj_.isEmpty(this.nullGeometryFeatures_);\n};\n\n\n/**\n * @param {ol.Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @param {ol.proj.Projection} projection Projection.\n */\n_ol_source_Vector_.prototype.loadFeatures = function(\n    extent, resolution, projection) {\n  var loadedExtentsRtree = this.loadedExtentsRtree_;\n  var extentsToLoad = this.strategy_(extent, resolution);\n  var i, ii;\n  for (i = 0, ii = extentsToLoad.length; i < ii; ++i) {\n    var extentToLoad = extentsToLoad[i];\n    var alreadyLoaded = loadedExtentsRtree.forEachInExtent(extentToLoad,\n        /**\n         * @param {{extent: ol.Extent}} object Object.\n         * @return {boolean} Contains.\n         */\n        function(object) {\n          return _ol_extent_.containsExtent(object.extent, extentToLoad);\n        });\n    if (!alreadyLoaded) {\n      this.loader_.call(this, extentToLoad, resolution, projection);\n      loadedExtentsRtree.insert(extentToLoad, {extent: extentToLoad.slice()});\n    }\n  }\n};\n\n\n/**\n * Remove an extent from the list of loaded extents.\n * @param {ol.Extent} extent Extent.\n * @api\n */\n_ol_source_Vector_.prototype.removeLoadedExtent = function(extent) {\n  var loadedExtentsRtree = this.loadedExtentsRtree_;\n  var obj;\n  loadedExtentsRtree.forEachInExtent(extent, function(object) {\n    if (_ol_extent_.equals(object.extent, extent)) {\n      obj = object;\n      return true;\n    }\n  });\n  if (obj) {\n    loadedExtentsRtree.remove(obj);\n  }\n};\n\n\n/**\n * Remove a single feature from the source.  If you want to remove all features\n * at once, use the {@link ol.source.Vector#clear source.clear()} method\n * instead.\n * @param {ol.Feature} feature Feature to remove.\n * @api\n */\n_ol_source_Vector_.prototype.removeFeature = function(feature) {\n  var featureKey = _ol_.getUid(feature).toString();\n  if (featureKey in this.nullGeometryFeatures_) {\n    delete this.nullGeometryFeatures_[featureKey];\n  } else {\n    if (this.featuresRtree_) {\n      this.featuresRtree_.remove(feature);\n    }\n  }\n  this.removeFeatureInternal(feature);\n  this.changed();\n};\n\n\n/**\n * Remove feature without firing a `change` event.\n * @param {ol.Feature} feature Feature.\n * @protected\n */\n_ol_source_Vector_.prototype.removeFeatureInternal = function(feature) {\n  var featureKey = _ol_.getUid(feature).toString();\n  this.featureChangeKeys_[featureKey].forEach(_ol_events_.unlistenByKey);\n  delete this.featureChangeKeys_[featureKey];\n  var id = feature.getId();\n  if (id !== undefined) {\n    delete this.idIndex_[id.toString()];\n  } else {\n    delete this.undefIdIndex_[featureKey];\n  }\n  this.dispatchEvent(new _ol_source_Vector_.Event(\n      _ol_source_VectorEventType_.REMOVEFEATURE, feature));\n};\n\n\n/**\n * Remove a feature from the id index.  Called internally when the feature id\n * may have changed.\n * @param {ol.Feature} feature The feature.\n * @return {boolean} Removed the feature from the index.\n * @private\n */\n_ol_source_Vector_.prototype.removeFromIdIndex_ = function(feature) {\n  var removed = false;\n  for (var id in this.idIndex_) {\n    if (this.idIndex_[id] === feature) {\n      delete this.idIndex_[id];\n      removed = true;\n      break;\n    }\n  }\n  return removed;\n};\n\n\n/**\n * Set the new loader of the source. The next loadFeatures call will use the\n * new loader.\n * @param {ol.FeatureLoader} loader The loader to set.\n * @api\n */\n_ol_source_Vector_.prototype.setLoader = function(loader) {\n  this.loader_ = loader;\n};\n\n\n/**\n * @classdesc\n * Events emitted by {@link ol.source.Vector} instances are instances of this\n * type.\n *\n * @constructor\n * @extends {ol.events.Event}\n * @implements {oli.source.Vector.Event}\n * @param {string} type Type.\n * @param {ol.Feature=} opt_feature Feature.\n */\n_ol_source_Vector_.Event = function(type, opt_feature) {\n\n  _ol_events_Event_.call(this, type);\n\n  /**\n   * The feature being added or removed.\n   * @type {ol.Feature|undefined}\n   * @api\n   */\n  this.feature = opt_feature;\n\n};\n_ol_.inherits(_ol_source_Vector_.Event, _ol_events_Event_);\nexport default _ol_source_Vector_;\n","import _ol_ from '../index.js';\nimport _ol_LayerType_ from '../layertype.js';\nimport _ol_layer_Layer_ from '../layer/layer.js';\nimport _ol_layer_VectorRenderType_ from '../layer/vectorrendertype.js';\nimport _ol_obj_ from '../obj.js';\nimport _ol_style_Style_ from '../style/style.js';\n\n/**\n * @classdesc\n * Vector data that is rendered client-side.\n * Note that any property set in the options is set as a {@link ol.Object}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @constructor\n * @extends {ol.layer.Layer}\n * @fires ol.render.Event\n * @param {olx.layer.VectorOptions=} opt_options Options.\n * @api\n */\nvar _ol_layer_Vector_ = function(opt_options) {\n  var options = opt_options ?\n    opt_options : /** @type {olx.layer.VectorOptions} */ ({});\n\n  var baseOptions = _ol_obj_.assign({}, options);\n\n  delete baseOptions.style;\n  delete baseOptions.renderBuffer;\n  delete baseOptions.updateWhileAnimating;\n  delete baseOptions.updateWhileInteracting;\n  _ol_layer_Layer_.call(this, /** @type {olx.layer.LayerOptions} */ (baseOptions));\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.declutter_ = options.declutter !== undefined ? options.declutter : false;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.renderBuffer_ = options.renderBuffer !== undefined ?\n    options.renderBuffer : 100;\n\n  /**\n   * User provided style.\n   * @type {ol.style.Style|Array.<ol.style.Style>|ol.StyleFunction}\n   * @private\n   */\n  this.style_ = null;\n\n  /**\n   * Style function for use within the library.\n   * @type {ol.StyleFunction|undefined}\n   * @private\n   */\n  this.styleFunction_ = undefined;\n\n  this.setStyle(options.style);\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.updateWhileAnimating_ = options.updateWhileAnimating !== undefined ?\n    options.updateWhileAnimating : false;\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.updateWhileInteracting_ = options.updateWhileInteracting !== undefined ?\n    options.updateWhileInteracting : false;\n\n  /**\n   * @private\n   * @type {ol.layer.VectorTileRenderType|string}\n   */\n  this.renderMode_ = options.renderMode || _ol_layer_VectorRenderType_.VECTOR;\n\n  /**\n   * The layer type.\n   * @protected\n   * @type {ol.LayerType}\n   */\n  this.type = _ol_LayerType_.VECTOR;\n\n};\n\n_ol_.inherits(_ol_layer_Vector_, _ol_layer_Layer_);\n\n\n/**\n * @return {boolean} Declutter.\n */\n_ol_layer_Vector_.prototype.getDeclutter = function() {\n  return this.declutter_;\n};\n\n\n/**\n * @param {boolean} declutter Declutter.\n */\n_ol_layer_Vector_.prototype.setDeclutter = function(declutter) {\n  this.declutter_ = declutter;\n};\n\n\n/**\n * @return {number|undefined} Render buffer.\n */\n_ol_layer_Vector_.prototype.getRenderBuffer = function() {\n  return this.renderBuffer_;\n};\n\n\n/**\n * @return {function(ol.Feature, ol.Feature): number|null|undefined} Render\n *     order.\n */\n_ol_layer_Vector_.prototype.getRenderOrder = function() {\n  return (\n  /** @type {ol.RenderOrderFunction|null|undefined} */ this.get(_ol_layer_Vector_.Property_.RENDER_ORDER)\n  );\n};\n\n\n/**\n * Return the associated {@link ol.source.Vector vectorsource} of the layer.\n * @function\n * @return {ol.source.Vector} Source.\n * @api\n */\n_ol_layer_Vector_.prototype.getSource;\n\n\n/**\n * Get the style for features.  This returns whatever was passed to the `style`\n * option at construction or to the `setStyle` method.\n * @return {ol.style.Style|Array.<ol.style.Style>|ol.StyleFunction}\n *     Layer style.\n * @api\n */\n_ol_layer_Vector_.prototype.getStyle = function() {\n  return this.style_;\n};\n\n\n/**\n * Get the style function.\n * @return {ol.StyleFunction|undefined} Layer style function.\n * @api\n */\n_ol_layer_Vector_.prototype.getStyleFunction = function() {\n  return this.styleFunction_;\n};\n\n\n/**\n * @return {boolean} Whether the rendered layer should be updated while\n *     animating.\n */\n_ol_layer_Vector_.prototype.getUpdateWhileAnimating = function() {\n  return this.updateWhileAnimating_;\n};\n\n\n/**\n * @return {boolean} Whether the rendered layer should be updated while\n *     interacting.\n */\n_ol_layer_Vector_.prototype.getUpdateWhileInteracting = function() {\n  return this.updateWhileInteracting_;\n};\n\n\n/**\n * @param {ol.RenderOrderFunction|null|undefined} renderOrder\n *     Render order.\n */\n_ol_layer_Vector_.prototype.setRenderOrder = function(renderOrder) {\n  this.set(_ol_layer_Vector_.Property_.RENDER_ORDER, renderOrder);\n};\n\n\n/**\n * Set the style for features.  This can be a single style object, an array\n * of styles, or a function that takes a feature and resolution and returns\n * an array of styles. If it is `undefined` the default style is used. If\n * it is `null` the layer has no style (a `null` style), so only features\n * that have their own styles will be rendered in the layer. See\n * {@link ol.style} for information on the default style.\n * @param {ol.style.Style|Array.<ol.style.Style>|ol.StyleFunction|null|undefined}\n *     style Layer style.\n * @api\n */\n_ol_layer_Vector_.prototype.setStyle = function(style) {\n  this.style_ = style !== undefined ? style : _ol_style_Style_.defaultFunction;\n  this.styleFunction_ = style === null ?\n    undefined : _ol_style_Style_.createFunction(this.style_);\n  this.changed();\n};\n\n\n/**\n * @return {ol.layer.VectorRenderType|string} The render mode.\n */\n_ol_layer_Vector_.prototype.getRenderMode = function() {\n  return this.renderMode_;\n};\n\n\n/**\n * @enum {string}\n * @private\n */\n_ol_layer_Vector_.Property_ = {\n  RENDER_ORDER: 'renderOrder'\n};\nexport default _ol_layer_Vector_;\n","var _ol_geom_flat_area_ = {};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {number} Area.\n */\n_ol_geom_flat_area_.linearRing = function(flatCoordinates, offset, end, stride) {\n  var twiceArea = 0;\n  var x1 = flatCoordinates[end - stride];\n  var y1 = flatCoordinates[end - stride + 1];\n  for (; offset < end; offset += stride) {\n    var x2 = flatCoordinates[offset];\n    var y2 = flatCoordinates[offset + 1];\n    twiceArea += y1 * x2 - x1 * y2;\n    x1 = x2;\n    y1 = y2;\n  }\n  return twiceArea / 2;\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<number>} ends Ends.\n * @param {number} stride Stride.\n * @return {number} Area.\n */\n_ol_geom_flat_area_.linearRings = function(flatCoordinates, offset, ends, stride) {\n  var area = 0;\n  var i, ii;\n  for (i = 0, ii = ends.length; i < ii; ++i) {\n    var end = ends[i];\n    area += _ol_geom_flat_area_.linearRing(flatCoordinates, offset, end, stride);\n    offset = end;\n  }\n  return area;\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<Array.<number>>} endss Endss.\n * @param {number} stride Stride.\n * @return {number} Area.\n */\n_ol_geom_flat_area_.linearRingss = function(flatCoordinates, offset, endss, stride) {\n  var area = 0;\n  var i, ii;\n  for (i = 0, ii = endss.length; i < ii; ++i) {\n    var ends = endss[i];\n    area +=\n        _ol_geom_flat_area_.linearRings(flatCoordinates, offset, ends, stride);\n    offset = ends[ends.length - 1];\n  }\n  return area;\n};\nexport default _ol_geom_flat_area_;\n","/**\n * @classdesc\n * A base class used for creating subclasses and not instantiated in\n * apps. Base class for {@link ol.style.Icon}, {@link ol.style.Circle} and\n * {@link ol.style.RegularShape}.\n *\n * @constructor\n * @abstract\n * @param {ol.StyleImageOptions} options Options.\n * @api\n */\nvar _ol_style_Image_ = function(options) {\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.opacity_ = options.opacity;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.rotateWithView_ = options.rotateWithView;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.rotation_ = options.rotation;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.scale_ = options.scale;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.snapToPixel_ = options.snapToPixel;\n\n};\n\n\n/**\n * Get the symbolizer opacity.\n * @return {number} Opacity.\n * @api\n */\n_ol_style_Image_.prototype.getOpacity = function() {\n  return this.opacity_;\n};\n\n\n/**\n * Determine whether the symbolizer rotates with the map.\n * @return {boolean} Rotate with map.\n * @api\n */\n_ol_style_Image_.prototype.getRotateWithView = function() {\n  return this.rotateWithView_;\n};\n\n\n/**\n * Get the symoblizer rotation.\n * @return {number} Rotation.\n * @api\n */\n_ol_style_Image_.prototype.getRotation = function() {\n  return this.rotation_;\n};\n\n\n/**\n * Get the symbolizer scale.\n * @return {number} Scale.\n * @api\n */\n_ol_style_Image_.prototype.getScale = function() {\n  return this.scale_;\n};\n\n\n/**\n * Determine whether the symbolizer should be snapped to a pixel.\n * @return {boolean} The symbolizer should snap to a pixel.\n * @api\n */\n_ol_style_Image_.prototype.getSnapToPixel = function() {\n  return this.snapToPixel_;\n};\n\n\n/**\n * Get the anchor point in pixels. The anchor determines the center point for the\n * symbolizer.\n * @abstract\n * @return {Array.<number>} Anchor.\n */\n_ol_style_Image_.prototype.getAnchor = function() {};\n\n\n/**\n * Get the image element for the symbolizer.\n * @abstract\n * @param {number} pixelRatio Pixel ratio.\n * @return {HTMLCanvasElement|HTMLVideoElement|Image} Image element.\n */\n_ol_style_Image_.prototype.getImage = function(pixelRatio) {};\n\n\n/**\n * @abstract\n * @param {number} pixelRatio Pixel ratio.\n * @return {HTMLCanvasElement|HTMLVideoElement|Image} Image element.\n */\n_ol_style_Image_.prototype.getHitDetectionImage = function(pixelRatio) {};\n\n\n/**\n * @abstract\n * @return {ol.ImageState} Image state.\n */\n_ol_style_Image_.prototype.getImageState = function() {};\n\n\n/**\n * @abstract\n * @return {ol.Size} Image size.\n */\n_ol_style_Image_.prototype.getImageSize = function() {};\n\n\n/**\n * @abstract\n * @return {ol.Size} Size of the hit-detection image.\n */\n_ol_style_Image_.prototype.getHitDetectionImageSize = function() {};\n\n\n/**\n * Get the origin of the symbolizer.\n * @abstract\n * @return {Array.<number>} Origin.\n */\n_ol_style_Image_.prototype.getOrigin = function() {};\n\n\n/**\n * Get the size of the symbolizer (in pixels).\n * @abstract\n * @return {ol.Size} Size.\n */\n_ol_style_Image_.prototype.getSize = function() {};\n\n\n/**\n * Set the opacity.\n *\n * @param {number} opacity Opacity.\n * @api\n */\n_ol_style_Image_.prototype.setOpacity = function(opacity) {\n  this.opacity_ = opacity;\n};\n\n\n/**\n * Set whether to rotate the style with the view.\n *\n * @param {boolean} rotateWithView Rotate with map.\n */\n_ol_style_Image_.prototype.setRotateWithView = function(rotateWithView) {\n  this.rotateWithView_ = rotateWithView;\n};\n\n\n/**\n * Set the rotation.\n *\n * @param {number} rotation Rotation.\n * @api\n */\n_ol_style_Image_.prototype.setRotation = function(rotation) {\n  this.rotation_ = rotation;\n};\n\n\n/**\n * Set the scale.\n *\n * @param {number} scale Scale.\n * @api\n */\n_ol_style_Image_.prototype.setScale = function(scale) {\n  this.scale_ = scale;\n};\n\n\n/**\n * Set whether to snap the image to the closest pixel.\n *\n * @param {boolean} snapToPixel Snap to pixel?\n */\n_ol_style_Image_.prototype.setSnapToPixel = function(snapToPixel) {\n  this.snapToPixel_ = snapToPixel;\n};\n\n\n/**\n * @abstract\n * @param {function(this: T, ol.events.Event)} listener Listener function.\n * @param {T} thisArg Value to use as `this` when executing `listener`.\n * @return {ol.EventsKey|undefined} Listener key.\n * @template T\n */\n_ol_style_Image_.prototype.listenImageChange = function(listener, thisArg) {};\n\n\n/**\n * Load not yet loaded URI.\n * @abstract\n */\n_ol_style_Image_.prototype.load = function() {};\n\n\n/**\n * @abstract\n * @param {function(this: T, ol.events.Event)} listener Listener function.\n * @param {T} thisArg Value to use as `this` when executing `listener`.\n * @template T\n */\n_ol_style_Image_.prototype.unlistenImageChange = function(listener, thisArg) {};\nexport default _ol_style_Image_;\n","import _ol_ from '../index.js';\nimport _ol_colorlike_ from '../colorlike.js';\nimport _ol_dom_ from '../dom.js';\nimport _ol_has_ from '../has.js';\nimport _ol_ImageState_ from '../imagestate.js';\nimport _ol_render_canvas_ from '../render/canvas.js';\nimport _ol_style_Image_ from '../style/image.js';\n\n/**\n * @classdesc\n * Set regular shape style for vector features. The resulting shape will be\n * a regular polygon when `radius` is provided, or a star when `radius1` and\n * `radius2` are provided.\n *\n * @constructor\n * @param {olx.style.RegularShapeOptions} options Options.\n * @extends {ol.style.Image}\n * @api\n */\nvar _ol_style_RegularShape_ = function(options) {\n  /**\n   * @private\n   * @type {Array.<string>}\n   */\n  this.checksums_ = null;\n\n  /**\n   * @private\n   * @type {HTMLCanvasElement}\n   */\n  this.canvas_ = null;\n\n  /**\n   * @private\n   * @type {HTMLCanvasElement}\n   */\n  this.hitDetectionCanvas_ = null;\n\n  /**\n   * @private\n   * @type {ol.style.Fill}\n   */\n  this.fill_ = options.fill !== undefined ? options.fill : null;\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.origin_ = [0, 0];\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.points_ = options.points;\n\n  /**\n   * @protected\n   * @type {number}\n   */\n  this.radius_ = /** @type {number} */ (options.radius !== undefined ?\n    options.radius : options.radius1);\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.radius2_ = options.radius2;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.angle_ = options.angle !== undefined ? options.angle : 0;\n\n  /**\n   * @private\n   * @type {ol.style.Stroke}\n   */\n  this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.anchor_ = null;\n\n  /**\n   * @private\n   * @type {ol.Size}\n   */\n  this.size_ = null;\n\n  /**\n   * @private\n   * @type {ol.Size}\n   */\n  this.imageSize_ = null;\n\n  /**\n   * @private\n   * @type {ol.Size}\n   */\n  this.hitDetectionImageSize_ = null;\n\n  /**\n   * @protected\n   * @type {ol.style.AtlasManager|undefined}\n   */\n  this.atlasManager_ = options.atlasManager;\n\n  this.render_(this.atlasManager_);\n\n  /**\n   * @type {boolean}\n   */\n  var snapToPixel = options.snapToPixel !== undefined ?\n    options.snapToPixel : true;\n\n  /**\n   * @type {boolean}\n   */\n  var rotateWithView = options.rotateWithView !== undefined ?\n    options.rotateWithView : false;\n\n  _ol_style_Image_.call(this, {\n    opacity: 1,\n    rotateWithView: rotateWithView,\n    rotation: options.rotation !== undefined ? options.rotation : 0,\n    scale: 1,\n    snapToPixel: snapToPixel\n  });\n};\n\n_ol_.inherits(_ol_style_RegularShape_, _ol_style_Image_);\n\n\n/**\n * Clones the style. If an atlasmanager was provided to the original style it will be used in the cloned style, too.\n * @return {ol.style.RegularShape} The cloned style.\n * @api\n */\n_ol_style_RegularShape_.prototype.clone = function() {\n  var style = new _ol_style_RegularShape_({\n    fill: this.getFill() ? this.getFill().clone() : undefined,\n    points: this.getPoints(),\n    radius: this.getRadius(),\n    radius2: this.getRadius2(),\n    angle: this.getAngle(),\n    snapToPixel: this.getSnapToPixel(),\n    stroke: this.getStroke() ?  this.getStroke().clone() : undefined,\n    rotation: this.getRotation(),\n    rotateWithView: this.getRotateWithView(),\n    atlasManager: this.atlasManager_\n  });\n  style.setOpacity(this.getOpacity());\n  style.setScale(this.getScale());\n  return style;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\n_ol_style_RegularShape_.prototype.getAnchor = function() {\n  return this.anchor_;\n};\n\n\n/**\n * Get the angle used in generating the shape.\n * @return {number} Shape's rotation in radians.\n * @api\n */\n_ol_style_RegularShape_.prototype.getAngle = function() {\n  return this.angle_;\n};\n\n\n/**\n * Get the fill style for the shape.\n * @return {ol.style.Fill} Fill style.\n * @api\n */\n_ol_style_RegularShape_.prototype.getFill = function() {\n  return this.fill_;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_style_RegularShape_.prototype.getHitDetectionImage = function(pixelRatio) {\n  return this.hitDetectionCanvas_;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\n_ol_style_RegularShape_.prototype.getImage = function(pixelRatio) {\n  return this.canvas_;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_style_RegularShape_.prototype.getImageSize = function() {\n  return this.imageSize_;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_style_RegularShape_.prototype.getHitDetectionImageSize = function() {\n  return this.hitDetectionImageSize_;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_style_RegularShape_.prototype.getImageState = function() {\n  return _ol_ImageState_.LOADED;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\n_ol_style_RegularShape_.prototype.getOrigin = function() {\n  return this.origin_;\n};\n\n\n/**\n * Get the number of points for generating the shape.\n * @return {number} Number of points for stars and regular polygons.\n * @api\n */\n_ol_style_RegularShape_.prototype.getPoints = function() {\n  return this.points_;\n};\n\n\n/**\n * Get the (primary) radius for the shape.\n * @return {number} Radius.\n * @api\n */\n_ol_style_RegularShape_.prototype.getRadius = function() {\n  return this.radius_;\n};\n\n\n/**\n * Get the secondary radius for the shape.\n * @return {number|undefined} Radius2.\n * @api\n */\n_ol_style_RegularShape_.prototype.getRadius2 = function() {\n  return this.radius2_;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\n_ol_style_RegularShape_.prototype.getSize = function() {\n  return this.size_;\n};\n\n\n/**\n * Get the stroke style for the shape.\n * @return {ol.style.Stroke} Stroke style.\n * @api\n */\n_ol_style_RegularShape_.prototype.getStroke = function() {\n  return this.stroke_;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_style_RegularShape_.prototype.listenImageChange = function(listener, thisArg) {};\n\n\n/**\n * @inheritDoc\n */\n_ol_style_RegularShape_.prototype.load = function() {};\n\n\n/**\n * @inheritDoc\n */\n_ol_style_RegularShape_.prototype.unlistenImageChange = function(listener, thisArg) {};\n\n\n/**\n * @protected\n * @param {ol.style.AtlasManager|undefined} atlasManager An atlas manager.\n */\n_ol_style_RegularShape_.prototype.render_ = function(atlasManager) {\n  var imageSize;\n  var lineCap = '';\n  var lineJoin = '';\n  var miterLimit = 0;\n  var lineDash = null;\n  var lineDashOffset = 0;\n  var strokeStyle;\n  var strokeWidth = 0;\n\n  if (this.stroke_) {\n    strokeStyle = this.stroke_.getColor();\n    if (strokeStyle === null) {\n      strokeStyle = _ol_render_canvas_.defaultStrokeStyle;\n    }\n    strokeStyle = _ol_colorlike_.asColorLike(strokeStyle);\n    strokeWidth = this.stroke_.getWidth();\n    if (strokeWidth === undefined) {\n      strokeWidth = _ol_render_canvas_.defaultLineWidth;\n    }\n    lineDash = this.stroke_.getLineDash();\n    lineDashOffset = this.stroke_.getLineDashOffset();\n    if (!_ol_has_.CANVAS_LINE_DASH) {\n      lineDash = null;\n      lineDashOffset = 0;\n    }\n    lineJoin = this.stroke_.getLineJoin();\n    if (lineJoin === undefined) {\n      lineJoin = _ol_render_canvas_.defaultLineJoin;\n    }\n    lineCap = this.stroke_.getLineCap();\n    if (lineCap === undefined) {\n      lineCap = _ol_render_canvas_.defaultLineCap;\n    }\n    miterLimit = this.stroke_.getMiterLimit();\n    if (miterLimit === undefined) {\n      miterLimit = _ol_render_canvas_.defaultMiterLimit;\n    }\n  }\n\n  var size = 2 * (this.radius_ + strokeWidth) + 1;\n\n  /** @type {ol.RegularShapeRenderOptions} */\n  var renderOptions = {\n    strokeStyle: strokeStyle,\n    strokeWidth: strokeWidth,\n    size: size,\n    lineCap: lineCap,\n    lineDash: lineDash,\n    lineDashOffset: lineDashOffset,\n    lineJoin: lineJoin,\n    miterLimit: miterLimit\n  };\n\n  if (atlasManager === undefined) {\n    // no atlas manager is used, create a new canvas\n    var context = _ol_dom_.createCanvasContext2D(size, size);\n    this.canvas_ = context.canvas;\n\n    // canvas.width and height are rounded to the closest integer\n    size = this.canvas_.width;\n    imageSize = size;\n\n    this.draw_(renderOptions, context, 0, 0);\n\n    this.createHitDetectionCanvas_(renderOptions);\n  } else {\n    // an atlas manager is used, add the symbol to an atlas\n    size = Math.round(size);\n\n    var hasCustomHitDetectionImage = !this.fill_;\n    var renderHitDetectionCallback;\n    if (hasCustomHitDetectionImage) {\n      // render the hit-detection image into a separate atlas image\n      renderHitDetectionCallback =\n          this.drawHitDetectionCanvas_.bind(this, renderOptions);\n    }\n\n    var id = this.getChecksum();\n    var info = atlasManager.add(\n        id, size, size, this.draw_.bind(this, renderOptions),\n        renderHitDetectionCallback);\n\n    this.canvas_ = info.image;\n    this.origin_ = [info.offsetX, info.offsetY];\n    imageSize = info.image.width;\n\n    if (hasCustomHitDetectionImage) {\n      this.hitDetectionCanvas_ = info.hitImage;\n      this.hitDetectionImageSize_ =\n          [info.hitImage.width, info.hitImage.height];\n    } else {\n      this.hitDetectionCanvas_ = this.canvas_;\n      this.hitDetectionImageSize_ = [imageSize, imageSize];\n    }\n  }\n\n  this.anchor_ = [size / 2, size / 2];\n  this.size_ = [size, size];\n  this.imageSize_ = [imageSize, imageSize];\n};\n\n\n/**\n * @private\n * @param {ol.RegularShapeRenderOptions} renderOptions Render options.\n * @param {CanvasRenderingContext2D} context The rendering context.\n * @param {number} x The origin for the symbol (x).\n * @param {number} y The origin for the symbol (y).\n */\n_ol_style_RegularShape_.prototype.draw_ = function(renderOptions, context, x, y) {\n  var i, angle0, radiusC;\n  // reset transform\n  context.setTransform(1, 0, 0, 1, 0, 0);\n\n  // then move to (x, y)\n  context.translate(x, y);\n\n  context.beginPath();\n\n  var points = this.points_;\n  if (points === Infinity) {\n    context.arc(\n        renderOptions.size / 2, renderOptions.size / 2,\n        this.radius_, 0, 2 * Math.PI, true);\n  } else {\n    var radius2 = (this.radius2_ !== undefined) ? this.radius2_\n      : this.radius_;\n    if (radius2 !== this.radius_) {\n      points = 2 * points;\n    }\n    for (i = 0; i <= points; i++) {\n      angle0 = i * 2 * Math.PI / points - Math.PI / 2 + this.angle_;\n      radiusC = i % 2 === 0 ? this.radius_ : radius2;\n      context.lineTo(renderOptions.size / 2 + radiusC * Math.cos(angle0),\n          renderOptions.size / 2 + radiusC * Math.sin(angle0));\n    }\n  }\n\n\n  if (this.fill_) {\n    var color = this.fill_.getColor();\n    if (color === null) {\n      color = _ol_render_canvas_.defaultFillStyle;\n    }\n    context.fillStyle = _ol_colorlike_.asColorLike(color);\n    context.fill();\n  }\n  if (this.stroke_) {\n    context.strokeStyle = renderOptions.strokeStyle;\n    context.lineWidth = renderOptions.strokeWidth;\n    if (renderOptions.lineDash) {\n      context.setLineDash(renderOptions.lineDash);\n      context.lineDashOffset = renderOptions.lineDashOffset;\n    }\n    context.lineCap = renderOptions.lineCap;\n    context.lineJoin = renderOptions.lineJoin;\n    context.miterLimit = renderOptions.miterLimit;\n    context.stroke();\n  }\n  context.closePath();\n};\n\n\n/**\n * @private\n * @param {ol.RegularShapeRenderOptions} renderOptions Render options.\n */\n_ol_style_RegularShape_.prototype.createHitDetectionCanvas_ = function(renderOptions) {\n  this.hitDetectionImageSize_ = [renderOptions.size, renderOptions.size];\n  if (this.fill_) {\n    this.hitDetectionCanvas_ = this.canvas_;\n    return;\n  }\n\n  // if no fill style is set, create an extra hit-detection image with a\n  // default fill style\n  var context = _ol_dom_.createCanvasContext2D(renderOptions.size, renderOptions.size);\n  this.hitDetectionCanvas_ = context.canvas;\n\n  this.drawHitDetectionCanvas_(renderOptions, context, 0, 0);\n};\n\n\n/**\n * @private\n * @param {ol.RegularShapeRenderOptions} renderOptions Render options.\n * @param {CanvasRenderingContext2D} context The context.\n * @param {number} x The origin for the symbol (x).\n * @param {number} y The origin for the symbol (y).\n */\n_ol_style_RegularShape_.prototype.drawHitDetectionCanvas_ = function(renderOptions, context, x, y) {\n  // reset transform\n  context.setTransform(1, 0, 0, 1, 0, 0);\n\n  // then move to (x, y)\n  context.translate(x, y);\n\n  context.beginPath();\n\n  var points = this.points_;\n  if (points === Infinity) {\n    context.arc(\n        renderOptions.size / 2, renderOptions.size / 2,\n        this.radius_, 0, 2 * Math.PI, true);\n  } else {\n    var radius2 = (this.radius2_ !== undefined) ? this.radius2_\n      : this.radius_;\n    if (radius2 !== this.radius_) {\n      points = 2 * points;\n    }\n    var i, radiusC, angle0;\n    for (i = 0; i <= points; i++) {\n      angle0 = i * 2 * Math.PI / points - Math.PI / 2 + this.angle_;\n      radiusC = i % 2 === 0 ? this.radius_ : radius2;\n      context.lineTo(renderOptions.size / 2 + radiusC * Math.cos(angle0),\n          renderOptions.size / 2 + radiusC * Math.sin(angle0));\n    }\n  }\n\n  context.fillStyle = _ol_render_canvas_.defaultFillStyle;\n  context.fill();\n  if (this.stroke_) {\n    context.strokeStyle = renderOptions.strokeStyle;\n    context.lineWidth = renderOptions.strokeWidth;\n    if (renderOptions.lineDash) {\n      context.setLineDash(renderOptions.lineDash);\n      context.lineDashOffset = renderOptions.lineDashOffset;\n    }\n    context.stroke();\n  }\n  context.closePath();\n};\n\n\n/**\n * @return {string} The checksum.\n */\n_ol_style_RegularShape_.prototype.getChecksum = function() {\n  var strokeChecksum = this.stroke_ ?\n    this.stroke_.getChecksum() : '-';\n  var fillChecksum = this.fill_ ?\n    this.fill_.getChecksum() : '-';\n\n  var recalculate = !this.checksums_ ||\n      (strokeChecksum != this.checksums_[1] ||\n      fillChecksum != this.checksums_[2] ||\n      this.radius_ != this.checksums_[3] ||\n      this.radius2_ != this.checksums_[4] ||\n      this.angle_ != this.checksums_[5] ||\n      this.points_ != this.checksums_[6]);\n\n  if (recalculate) {\n    var checksum = 'r' + strokeChecksum + fillChecksum +\n        (this.radius_ !== undefined ? this.radius_.toString() : '-') +\n        (this.radius2_ !== undefined ? this.radius2_.toString() : '-') +\n        (this.angle_ !== undefined ? this.angle_.toString() : '-') +\n        (this.points_ !== undefined ? this.points_.toString() : '-');\n    this.checksums_ = [checksum, strokeChecksum, fillChecksum,\n      this.radius_, this.radius2_, this.angle_, this.points_];\n  }\n\n  return this.checksums_[0];\n};\nexport default _ol_style_RegularShape_;\n","import _ol_ from '../index.js';\nimport _ol_style_RegularShape_ from '../style/regularshape.js';\n\n/**\n * @classdesc\n * Set circle style for vector features.\n *\n * @constructor\n * @param {olx.style.CircleOptions=} opt_options Options.\n * @extends {ol.style.RegularShape}\n * @api\n */\nvar _ol_style_Circle_ = function(opt_options) {\n\n  var options = opt_options || {};\n\n  _ol_style_RegularShape_.call(this, {\n    points: Infinity,\n    fill: options.fill,\n    radius: options.radius,\n    snapToPixel: options.snapToPixel,\n    stroke: options.stroke,\n    atlasManager: options.atlasManager\n  });\n\n};\n\n_ol_.inherits(_ol_style_Circle_, _ol_style_RegularShape_);\n\n\n/**\n * Clones the style.  If an atlasmanager was provided to the original style it will be used in the cloned style, too.\n * @return {ol.style.Circle} The cloned style.\n * @override\n * @api\n */\n_ol_style_Circle_.prototype.clone = function() {\n  var style = new _ol_style_Circle_({\n    fill: this.getFill() ? this.getFill().clone() : undefined,\n    stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n    radius: this.getRadius(),\n    snapToPixel: this.getSnapToPixel(),\n    atlasManager: this.atlasManager_\n  });\n  style.setOpacity(this.getOpacity());\n  style.setScale(this.getScale());\n  return style;\n};\n\n\n/**\n * Set the circle radius.\n *\n * @param {number} radius Circle radius.\n * @api\n */\n_ol_style_Circle_.prototype.setRadius = function(radius) {\n  this.radius_ = radius;\n  this.render_(this.atlasManager_);\n};\nexport default _ol_style_Circle_;\n","import _ol_ from '../index.js';\nimport _ol_ext_rbush_ from 'rbush';\nimport _ol_extent_ from '../extent.js';\nimport _ol_obj_ from '../obj.js';\n\n/**\n * Wrapper around the RBush by Vladimir Agafonkin.\n *\n * @constructor\n * @param {number=} opt_maxEntries Max entries.\n * @see https://github.com/mourner/rbush\n * @struct\n * @template T\n */\nvar _ol_structs_RBush_ = function(opt_maxEntries) {\n\n  /**\n   * @private\n   */\n  this.rbush_ = _ol_ext_rbush_(opt_maxEntries);\n\n  /**\n   * A mapping between the objects added to this rbush wrapper\n   * and the objects that are actually added to the internal rbush.\n   * @private\n   * @type {Object.<number, ol.RBushEntry>}\n   */\n  this.items_ = {};\n\n};\n\n\n/**\n * Insert a value into the RBush.\n * @param {ol.Extent} extent Extent.\n * @param {T} value Value.\n */\n_ol_structs_RBush_.prototype.insert = function(extent, value) {\n  /** @type {ol.RBushEntry} */\n  var item = {\n    minX: extent[0],\n    minY: extent[1],\n    maxX: extent[2],\n    maxY: extent[3],\n    value: value\n  };\n\n  this.rbush_.insert(item);\n  this.items_[_ol_.getUid(value)] = item;\n};\n\n\n/**\n * Bulk-insert values into the RBush.\n * @param {Array.<ol.Extent>} extents Extents.\n * @param {Array.<T>} values Values.\n */\n_ol_structs_RBush_.prototype.load = function(extents, values) {\n  var items = new Array(values.length);\n  for (var i = 0, l = values.length; i < l; i++) {\n    var extent = extents[i];\n    var value = values[i];\n\n    /** @type {ol.RBushEntry} */\n    var item = {\n      minX: extent[0],\n      minY: extent[1],\n      maxX: extent[2],\n      maxY: extent[3],\n      value: value\n    };\n    items[i] = item;\n    this.items_[_ol_.getUid(value)] = item;\n  }\n  this.rbush_.load(items);\n};\n\n\n/**\n * Remove a value from the RBush.\n * @param {T} value Value.\n * @return {boolean} Removed.\n */\n_ol_structs_RBush_.prototype.remove = function(value) {\n  var uid = _ol_.getUid(value);\n\n  // get the object in which the value was wrapped when adding to the\n  // internal rbush. then use that object to do the removal.\n  var item = this.items_[uid];\n  delete this.items_[uid];\n  return this.rbush_.remove(item) !== null;\n};\n\n\n/**\n * Update the extent of a value in the RBush.\n * @param {ol.Extent} extent Extent.\n * @param {T} value Value.\n */\n_ol_structs_RBush_.prototype.update = function(extent, value) {\n  var item = this.items_[_ol_.getUid(value)];\n  var bbox = [item.minX, item.minY, item.maxX, item.maxY];\n  if (!_ol_extent_.equals(bbox, extent)) {\n    this.remove(value);\n    this.insert(extent, value);\n  }\n};\n\n\n/**\n * Return all values in the RBush.\n * @return {Array.<T>} All.\n */\n_ol_structs_RBush_.prototype.getAll = function() {\n  var items = this.rbush_.all();\n  return items.map(function(item) {\n    return item.value;\n  });\n};\n\n\n/**\n * Return all values in the given extent.\n * @param {ol.Extent} extent Extent.\n * @return {Array.<T>} All in extent.\n */\n_ol_structs_RBush_.prototype.getInExtent = function(extent) {\n  /** @type {ol.RBushEntry} */\n  var bbox = {\n    minX: extent[0],\n    minY: extent[1],\n    maxX: extent[2],\n    maxY: extent[3]\n  };\n  var items = this.rbush_.search(bbox);\n  return items.map(function(item) {\n    return item.value;\n  });\n};\n\n\n/**\n * Calls a callback function with each value in the tree.\n * If the callback returns a truthy value, this value is returned without\n * checking the rest of the tree.\n * @param {function(this: S, T): *} callback Callback.\n * @param {S=} opt_this The object to use as `this` in `callback`.\n * @return {*} Callback return value.\n * @template S\n */\n_ol_structs_RBush_.prototype.forEach = function(callback, opt_this) {\n  return this.forEach_(this.getAll(), callback, opt_this);\n};\n\n\n/**\n * Calls a callback function with each value in the provided extent.\n * @param {ol.Extent} extent Extent.\n * @param {function(this: S, T): *} callback Callback.\n * @param {S=} opt_this The object to use as `this` in `callback`.\n * @return {*} Callback return value.\n * @template S\n */\n_ol_structs_RBush_.prototype.forEachInExtent = function(extent, callback, opt_this) {\n  return this.forEach_(this.getInExtent(extent), callback, opt_this);\n};\n\n\n/**\n * @param {Array.<T>} values Values.\n * @param {function(this: S, T): *} callback Callback.\n * @param {S=} opt_this The object to use as `this` in `callback`.\n * @private\n * @return {*} Callback return value.\n * @template S\n */\n_ol_structs_RBush_.prototype.forEach_ = function(values, callback, opt_this) {\n  var result;\n  for (var i = 0, l = values.length; i < l; i++) {\n    result = callback.call(opt_this, values[i]);\n    if (result) {\n      return result;\n    }\n  }\n  return result;\n};\n\n\n/**\n * @return {boolean} Is empty.\n */\n_ol_structs_RBush_.prototype.isEmpty = function() {\n  return _ol_obj_.isEmpty(this.items_);\n};\n\n\n/**\n * Remove all values from the RBush.\n */\n_ol_structs_RBush_.prototype.clear = function() {\n  this.rbush_.clear();\n  this.items_ = {};\n};\n\n\n/**\n * @param {ol.Extent=} opt_extent Extent.\n * @return {ol.Extent} Extent.\n */\n_ol_structs_RBush_.prototype.getExtent = function(opt_extent) {\n  // FIXME add getExtent() to rbush\n  var data = this.rbush_.data;\n  return _ol_extent_.createOrUpdate(data.minX, data.minY, data.maxX, data.maxY, opt_extent);\n};\n\n\n/**\n * @param {ol.structs.RBush} rbush R-Tree.\n */\n_ol_structs_RBush_.prototype.concat = function(rbush) {\n  this.rbush_.load(rbush.rbush_.all());\n  for (var i in rbush.items_) {\n    this.items_[i | 0] = rbush.items_[i | 0];\n  }\n};\nexport default _ol_structs_RBush_;\n","/**\n * Extent corner.\n * @enum {string}\n */\nvar _ol_extent_Corner_ = {\n  BOTTOM_LEFT: 'bottom-left',\n  BOTTOM_RIGHT: 'bottom-right',\n  TOP_LEFT: 'top-left',\n  TOP_RIGHT: 'top-right'\n};\n\nexport default _ol_extent_Corner_;\n","/**\n * @enum {string}\n */\nvar _ol_format_FormatType_ = {\n  ARRAY_BUFFER: 'arraybuffer',\n  JSON: 'json',\n  TEXT: 'text',\n  XML: 'xml'\n};\n\nexport default _ol_format_FormatType_;\n","'use strict';\n\nmodule.exports = rbush;\n\nvar quickselect = require('quickselect');\n\nfunction rbush(maxEntries, format) {\n    if (!(this instanceof rbush)) return new rbush(maxEntries, format);\n\n    // max entries in a node is 9 by default; min node fill is 40% for best performance\n    this._maxEntries = Math.max(4, maxEntries || 9);\n    this._minEntries = Math.max(2, Math.ceil(this._maxEntries * 0.4));\n\n    if (format) {\n        this._initFormat(format);\n    }\n\n    this.clear();\n}\n\nrbush.prototype = {\n\n    all: function () {\n        return this._all(this.data, []);\n    },\n\n    search: function (bbox) {\n\n        var node = this.data,\n            result = [],\n            toBBox = this.toBBox;\n\n        if (!intersects(bbox, node)) return result;\n\n        var nodesToSearch = [],\n            i, len, child, childBBox;\n\n        while (node) {\n            for (i = 0, len = node.children.length; i < len; i++) {\n\n                child = node.children[i];\n                childBBox = node.leaf ? toBBox(child) : child;\n\n                if (intersects(bbox, childBBox)) {\n                    if (node.leaf) result.push(child);\n                    else if (contains(bbox, childBBox)) this._all(child, result);\n                    else nodesToSearch.push(child);\n                }\n            }\n            node = nodesToSearch.pop();\n        }\n\n        return result;\n    },\n\n    collides: function (bbox) {\n\n        var node = this.data,\n            toBBox = this.toBBox;\n\n        if (!intersects(bbox, node)) return false;\n\n        var nodesToSearch = [],\n            i, len, child, childBBox;\n\n        while (node) {\n            for (i = 0, len = node.children.length; i < len; i++) {\n\n                child = node.children[i];\n                childBBox = node.leaf ? toBBox(child) : child;\n\n                if (intersects(bbox, childBBox)) {\n                    if (node.leaf || contains(bbox, childBBox)) return true;\n                    nodesToSearch.push(child);\n                }\n            }\n            node = nodesToSearch.pop();\n        }\n\n        return false;\n    },\n\n    load: function (data) {\n        if (!(data && data.length)) return this;\n\n        if (data.length < this._minEntries) {\n            for (var i = 0, len = data.length; i < len; i++) {\n                this.insert(data[i]);\n            }\n            return this;\n        }\n\n        // recursively build the tree with the given data from stratch using OMT algorithm\n        var node = this._build(data.slice(), 0, data.length - 1, 0);\n\n        if (!this.data.children.length) {\n            // save as is if tree is empty\n            this.data = node;\n\n        } else if (this.data.height === node.height) {\n            // split root if trees have the same height\n            this._splitRoot(this.data, node);\n\n        } else {\n            if (this.data.height < node.height) {\n                // swap trees if inserted one is bigger\n                var tmpNode = this.data;\n                this.data = node;\n                node = tmpNode;\n            }\n\n            // insert the small tree into the large tree at appropriate level\n            this._insert(node, this.data.height - node.height - 1, true);\n        }\n\n        return this;\n    },\n\n    insert: function (item) {\n        if (item) this._insert(item, this.data.height - 1);\n        return this;\n    },\n\n    clear: function () {\n        this.data = createNode([]);\n        return this;\n    },\n\n    remove: function (item, equalsFn) {\n        if (!item) return this;\n\n        var node = this.data,\n            bbox = this.toBBox(item),\n            path = [],\n            indexes = [],\n            i, parent, index, goingUp;\n\n        // depth-first iterative tree traversal\n        while (node || path.length) {\n\n            if (!node) { // go up\n                node = path.pop();\n                parent = path[path.length - 1];\n                i = indexes.pop();\n                goingUp = true;\n            }\n\n            if (node.leaf) { // check current node\n                index = findItem(item, node.children, equalsFn);\n\n                if (index !== -1) {\n                    // item found, remove the item and condense tree upwards\n                    node.children.splice(index, 1);\n                    path.push(node);\n                    this._condense(path);\n                    return this;\n                }\n            }\n\n            if (!goingUp && !node.leaf && contains(node, bbox)) { // go down\n                path.push(node);\n                indexes.push(i);\n                i = 0;\n                parent = node;\n                node = node.children[0];\n\n            } else if (parent) { // go right\n                i++;\n                node = parent.children[i];\n                goingUp = false;\n\n            } else node = null; // nothing found\n        }\n\n        return this;\n    },\n\n    toBBox: function (item) { return item; },\n\n    compareMinX: compareNodeMinX,\n    compareMinY: compareNodeMinY,\n\n    toJSON: function () { return this.data; },\n\n    fromJSON: function (data) {\n        this.data = data;\n        return this;\n    },\n\n    _all: function (node, result) {\n        var nodesToSearch = [];\n        while (node) {\n            if (node.leaf) result.push.apply(result, node.children);\n            else nodesToSearch.push.apply(nodesToSearch, node.children);\n\n            node = nodesToSearch.pop();\n        }\n        return result;\n    },\n\n    _build: function (items, left, right, height) {\n\n        var N = right - left + 1,\n            M = this._maxEntries,\n            node;\n\n        if (N <= M) {\n            // reached leaf level; return leaf\n            node = createNode(items.slice(left, right + 1));\n            calcBBox(node, this.toBBox);\n            return node;\n        }\n\n        if (!height) {\n            // target height of the bulk-loaded tree\n            height = Math.ceil(Math.log(N) / Math.log(M));\n\n            // target number of root entries to maximize storage utilization\n            M = Math.ceil(N / Math.pow(M, height - 1));\n        }\n\n        node = createNode([]);\n        node.leaf = false;\n        node.height = height;\n\n        // split the items into M mostly square tiles\n\n        var N2 = Math.ceil(N / M),\n            N1 = N2 * Math.ceil(Math.sqrt(M)),\n            i, j, right2, right3;\n\n        multiSelect(items, left, right, N1, this.compareMinX);\n\n        for (i = left; i <= right; i += N1) {\n\n            right2 = Math.min(i + N1 - 1, right);\n\n            multiSelect(items, i, right2, N2, this.compareMinY);\n\n            for (j = i; j <= right2; j += N2) {\n\n                right3 = Math.min(j + N2 - 1, right2);\n\n                // pack each entry recursively\n                node.children.push(this._build(items, j, right3, height - 1));\n            }\n        }\n\n        calcBBox(node, this.toBBox);\n\n        return node;\n    },\n\n    _chooseSubtree: function (bbox, node, level, path) {\n\n        var i, len, child, targetNode, area, enlargement, minArea, minEnlargement;\n\n        while (true) {\n            path.push(node);\n\n            if (node.leaf || path.length - 1 === level) break;\n\n            minArea = minEnlargement = Infinity;\n\n            for (i = 0, len = node.children.length; i < len; i++) {\n                child = node.children[i];\n                area = bboxArea(child);\n                enlargement = enlargedArea(bbox, child) - area;\n\n                // choose entry with the least area enlargement\n                if (enlargement < minEnlargement) {\n                    minEnlargement = enlargement;\n                    minArea = area < minArea ? area : minArea;\n                    targetNode = child;\n\n                } else if (enlargement === minEnlargement) {\n                    // otherwise choose one with the smallest area\n                    if (area < minArea) {\n                        minArea = area;\n                        targetNode = child;\n                    }\n                }\n            }\n\n            node = targetNode || node.children[0];\n        }\n\n        return node;\n    },\n\n    _insert: function (item, level, isNode) {\n\n        var toBBox = this.toBBox,\n            bbox = isNode ? item : toBBox(item),\n            insertPath = [];\n\n        // find the best node for accommodating the item, saving all nodes along the path too\n        var node = this._chooseSubtree(bbox, this.data, level, insertPath);\n\n        // put the item into the node\n        node.children.push(item);\n        extend(node, bbox);\n\n        // split on node overflow; propagate upwards if necessary\n        while (level >= 0) {\n            if (insertPath[level].children.length > this._maxEntries) {\n                this._split(insertPath, level);\n                level--;\n            } else break;\n        }\n\n        // adjust bboxes along the insertion path\n        this._adjustParentBBoxes(bbox, insertPath, level);\n    },\n\n    // split overflowed node into two\n    _split: function (insertPath, level) {\n\n        var node = insertPath[level],\n            M = node.children.length,\n            m = this._minEntries;\n\n        this._chooseSplitAxis(node, m, M);\n\n        var splitIndex = this._chooseSplitIndex(node, m, M);\n\n        var newNode = createNode(node.children.splice(splitIndex, node.children.length - splitIndex));\n        newNode.height = node.height;\n        newNode.leaf = node.leaf;\n\n        calcBBox(node, this.toBBox);\n        calcBBox(newNode, this.toBBox);\n\n        if (level) insertPath[level - 1].children.push(newNode);\n        else this._splitRoot(node, newNode);\n    },\n\n    _splitRoot: function (node, newNode) {\n        // split root node\n        this.data = createNode([node, newNode]);\n        this.data.height = node.height + 1;\n        this.data.leaf = false;\n        calcBBox(this.data, this.toBBox);\n    },\n\n    _chooseSplitIndex: function (node, m, M) {\n\n        var i, bbox1, bbox2, overlap, area, minOverlap, minArea, index;\n\n        minOverlap = minArea = Infinity;\n\n        for (i = m; i <= M - m; i++) {\n            bbox1 = distBBox(node, 0, i, this.toBBox);\n            bbox2 = distBBox(node, i, M, this.toBBox);\n\n            overlap = intersectionArea(bbox1, bbox2);\n            area = bboxArea(bbox1) + bboxArea(bbox2);\n\n            // choose distribution with minimum overlap\n            if (overlap < minOverlap) {\n                minOverlap = overlap;\n                index = i;\n\n                minArea = area < minArea ? area : minArea;\n\n            } else if (overlap === minOverlap) {\n                // otherwise choose distribution with minimum area\n                if (area < minArea) {\n                    minArea = area;\n                    index = i;\n                }\n            }\n        }\n\n        return index;\n    },\n\n    // sorts node children by the best axis for split\n    _chooseSplitAxis: function (node, m, M) {\n\n        var compareMinX = node.leaf ? this.compareMinX : compareNodeMinX,\n            compareMinY = node.leaf ? this.compareMinY : compareNodeMinY,\n            xMargin = this._allDistMargin(node, m, M, compareMinX),\n            yMargin = this._allDistMargin(node, m, M, compareMinY);\n\n        // if total distributions margin value is minimal for x, sort by minX,\n        // otherwise it's already sorted by minY\n        if (xMargin < yMargin) node.children.sort(compareMinX);\n    },\n\n    // total margin of all possible split distributions where each node is at least m full\n    _allDistMargin: function (node, m, M, compare) {\n\n        node.children.sort(compare);\n\n        var toBBox = this.toBBox,\n            leftBBox = distBBox(node, 0, m, toBBox),\n            rightBBox = distBBox(node, M - m, M, toBBox),\n            margin = bboxMargin(leftBBox) + bboxMargin(rightBBox),\n            i, child;\n\n        for (i = m; i < M - m; i++) {\n            child = node.children[i];\n            extend(leftBBox, node.leaf ? toBBox(child) : child);\n            margin += bboxMargin(leftBBox);\n        }\n\n        for (i = M - m - 1; i >= m; i--) {\n            child = node.children[i];\n            extend(rightBBox, node.leaf ? toBBox(child) : child);\n            margin += bboxMargin(rightBBox);\n        }\n\n        return margin;\n    },\n\n    _adjustParentBBoxes: function (bbox, path, level) {\n        // adjust bboxes along the given tree path\n        for (var i = level; i >= 0; i--) {\n            extend(path[i], bbox);\n        }\n    },\n\n    _condense: function (path) {\n        // go through the path, removing empty nodes and updating bboxes\n        for (var i = path.length - 1, siblings; i >= 0; i--) {\n            if (path[i].children.length === 0) {\n                if (i > 0) {\n                    siblings = path[i - 1].children;\n                    siblings.splice(siblings.indexOf(path[i]), 1);\n\n                } else this.clear();\n\n            } else calcBBox(path[i], this.toBBox);\n        }\n    },\n\n    _initFormat: function (format) {\n        // data format (minX, minY, maxX, maxY accessors)\n\n        // uses eval-type function compilation instead of just accepting a toBBox function\n        // because the algorithms are very sensitive to sorting functions performance,\n        // so they should be dead simple and without inner calls\n\n        var compareArr = ['return a', ' - b', ';'];\n\n        this.compareMinX = new Function('a', 'b', compareArr.join(format[0]));\n        this.compareMinY = new Function('a', 'b', compareArr.join(format[1]));\n\n        this.toBBox = new Function('a',\n            'return {minX: a' + format[0] +\n            ', minY: a' + format[1] +\n            ', maxX: a' + format[2] +\n            ', maxY: a' + format[3] + '};');\n    }\n};\n\nfunction findItem(item, items, equalsFn) {\n    if (!equalsFn) return items.indexOf(item);\n\n    for (var i = 0; i < items.length; i++) {\n        if (equalsFn(item, items[i])) return i;\n    }\n    return -1;\n}\n\n// calculate node's bbox from bboxes of its children\nfunction calcBBox(node, toBBox) {\n    distBBox(node, 0, node.children.length, toBBox, node);\n}\n\n// min bounding rectangle of node children from k to p-1\nfunction distBBox(node, k, p, toBBox, destNode) {\n    if (!destNode) destNode = createNode(null);\n    destNode.minX = Infinity;\n    destNode.minY = Infinity;\n    destNode.maxX = -Infinity;\n    destNode.maxY = -Infinity;\n\n    for (var i = k, child; i < p; i++) {\n        child = node.children[i];\n        extend(destNode, node.leaf ? toBBox(child) : child);\n    }\n\n    return destNode;\n}\n\nfunction extend(a, b) {\n    a.minX = Math.min(a.minX, b.minX);\n    a.minY = Math.min(a.minY, b.minY);\n    a.maxX = Math.max(a.maxX, b.maxX);\n    a.maxY = Math.max(a.maxY, b.maxY);\n    return a;\n}\n\nfunction compareNodeMinX(a, b) { return a.minX - b.minX; }\nfunction compareNodeMinY(a, b) { return a.minY - b.minY; }\n\nfunction bboxArea(a)   { return (a.maxX - a.minX) * (a.maxY - a.minY); }\nfunction bboxMargin(a) { return (a.maxX - a.minX) + (a.maxY - a.minY); }\n\nfunction enlargedArea(a, b) {\n    return (Math.max(b.maxX, a.maxX) - Math.min(b.minX, a.minX)) *\n           (Math.max(b.maxY, a.maxY) - Math.min(b.minY, a.minY));\n}\n\nfunction intersectionArea(a, b) {\n    var minX = Math.max(a.minX, b.minX),\n        minY = Math.max(a.minY, b.minY),\n        maxX = Math.min(a.maxX, b.maxX),\n        maxY = Math.min(a.maxY, b.maxY);\n\n    return Math.max(0, maxX - minX) *\n           Math.max(0, maxY - minY);\n}\n\nfunction contains(a, b) {\n    return a.minX <= b.minX &&\n           a.minY <= b.minY &&\n           b.maxX <= a.maxX &&\n           b.maxY <= a.maxY;\n}\n\nfunction intersects(a, b) {\n    return b.minX <= a.maxX &&\n           b.minY <= a.maxY &&\n           b.maxX >= a.minX &&\n           b.maxY >= a.minY;\n}\n\nfunction createNode(children) {\n    return {\n        children: children,\n        height: 1,\n        leaf: true,\n        minX: Infinity,\n        minY: Infinity,\n        maxX: -Infinity,\n        maxY: -Infinity\n    };\n}\n\n// sort an array so that items come in groups of n unsorted items, with groups sorted between each other;\n// combines selection algorithm with binary divide & conquer approach\n\nfunction multiSelect(arr, left, right, n, compare) {\n    var stack = [left, right],\n        mid;\n\n    while (stack.length) {\n        right = stack.pop();\n        left = stack.pop();\n\n        if (right - left <= n) continue;\n\n        mid = left + Math.ceil((right - left) / n / 2) * n;\n        quickselect(arr, mid, left, right, compare);\n\n        stack.push(left, mid, mid, right);\n    }\n}\n","import _ol_ from '../index.js';\nimport _ol_ViewHint_ from '../viewhint.js';\nimport _ol_coordinate_ from '../coordinate.js';\nimport _ol_easing_ from '../easing.js';\nimport _ol_events_condition_ from '../events/condition.js';\nimport _ol_functions_ from '../functions.js';\nimport _ol_interaction_Pointer_ from '../interaction/pointer.js';\n\n/**\n * @classdesc\n * Allows the user to pan the map by dragging the map.\n *\n * @constructor\n * @extends {ol.interaction.Pointer}\n * @param {olx.interaction.DragPanOptions=} opt_options Options.\n * @api\n */\nvar _ol_interaction_DragPan_ = function(opt_options) {\n\n  _ol_interaction_Pointer_.call(this, {\n    handleDownEvent: _ol_interaction_DragPan_.handleDownEvent_,\n    handleDragEvent: _ol_interaction_DragPan_.handleDragEvent_,\n    handleUpEvent: _ol_interaction_DragPan_.handleUpEvent_\n  });\n\n  var options = opt_options ? opt_options : {};\n\n  /**\n   * @private\n   * @type {ol.Kinetic|undefined}\n   */\n  this.kinetic_ = options.kinetic;\n\n  /**\n   * @type {ol.Pixel}\n   */\n  this.lastCentroid = null;\n\n  /**\n   * @type {number}\n   */\n  this.lastPointersCount_;\n\n  /**\n   * @private\n   * @type {ol.EventsConditionType}\n   */\n  this.condition_ = options.condition ?\n    options.condition : _ol_events_condition_.noModifierKeys;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.noKinetic_ = false;\n\n};\n\n_ol_.inherits(_ol_interaction_DragPan_, _ol_interaction_Pointer_);\n\n\n/**\n * @param {ol.MapBrowserPointerEvent} mapBrowserEvent Event.\n * @this {ol.interaction.DragPan}\n * @private\n */\n_ol_interaction_DragPan_.handleDragEvent_ = function(mapBrowserEvent) {\n  var targetPointers = this.targetPointers;\n  var centroid =\n      _ol_interaction_Pointer_.centroid(targetPointers);\n  if (targetPointers.length == this.lastPointersCount_) {\n    if (this.kinetic_) {\n      this.kinetic_.update(centroid[0], centroid[1]);\n    }\n    if (this.lastCentroid) {\n      var deltaX = this.lastCentroid[0] - centroid[0];\n      var deltaY = centroid[1] - this.lastCentroid[1];\n      var map = mapBrowserEvent.map;\n      var view = map.getView();\n      var viewState = view.getState();\n      var center = [deltaX, deltaY];\n      _ol_coordinate_.scale(center, viewState.resolution);\n      _ol_coordinate_.rotate(center, viewState.rotation);\n      _ol_coordinate_.add(center, viewState.center);\n      center = view.constrainCenter(center);\n      view.setCenter(center);\n    }\n  } else if (this.kinetic_) {\n    // reset so we don't overestimate the kinetic energy after\n    // after one finger down, tiny drag, second finger down\n    this.kinetic_.begin();\n  }\n  this.lastCentroid = centroid;\n  this.lastPointersCount_ = targetPointers.length;\n};\n\n\n/**\n * @param {ol.MapBrowserPointerEvent} mapBrowserEvent Event.\n * @return {boolean} Stop drag sequence?\n * @this {ol.interaction.DragPan}\n * @private\n */\n_ol_interaction_DragPan_.handleUpEvent_ = function(mapBrowserEvent) {\n  var map = mapBrowserEvent.map;\n  var view = map.getView();\n  if (this.targetPointers.length === 0) {\n    if (!this.noKinetic_ && this.kinetic_ && this.kinetic_.end()) {\n      var distance = this.kinetic_.getDistance();\n      var angle = this.kinetic_.getAngle();\n      var center = /** @type {!ol.Coordinate} */ (view.getCenter());\n      var centerpx = map.getPixelFromCoordinate(center);\n      var dest = map.getCoordinateFromPixel([\n        centerpx[0] - distance * Math.cos(angle),\n        centerpx[1] - distance * Math.sin(angle)\n      ]);\n      view.animate({\n        center: view.constrainCenter(dest),\n        duration: 500,\n        easing: _ol_easing_.easeOut\n      });\n    }\n    view.setHint(_ol_ViewHint_.INTERACTING, -1);\n    return false;\n  } else {\n    if (this.kinetic_) {\n      // reset so we don't overestimate the kinetic energy after\n      // after one finger up, tiny drag, second finger up\n      this.kinetic_.begin();\n    }\n    this.lastCentroid = null;\n    return true;\n  }\n};\n\n\n/**\n * @param {ol.MapBrowserPointerEvent} mapBrowserEvent Event.\n * @return {boolean} Start drag sequence?\n * @this {ol.interaction.DragPan}\n * @private\n */\n_ol_interaction_DragPan_.handleDownEvent_ = function(mapBrowserEvent) {\n  if (this.targetPointers.length > 0 && this.condition_(mapBrowserEvent)) {\n    var map = mapBrowserEvent.map;\n    var view = map.getView();\n    this.lastCentroid = null;\n    if (!this.handlingDownUpSequence) {\n      view.setHint(_ol_ViewHint_.INTERACTING, 1);\n    }\n    // stop any current animation\n    if (view.getAnimating()) {\n      view.setCenter(mapBrowserEvent.frameState.viewState.center);\n    }\n    if (this.kinetic_) {\n      this.kinetic_.begin();\n    }\n    // No kinetic as soon as more than one pointer on the screen is\n    // detected. This is to prevent nasty pans after pinch.\n    this.noKinetic_ = this.targetPointers.length > 1;\n    return true;\n  } else {\n    return false;\n  }\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_interaction_DragPan_.prototype.shouldStopEvent = _ol_functions_.FALSE;\nexport default _ol_interaction_DragPan_;\n","import _ol_ from '../index.js';\nimport _ol_asserts_ from '../asserts.js';\nimport _ol_TileRange_ from '../tilerange.js';\nimport _ol_array_ from '../array.js';\nimport _ol_extent_ from '../extent.js';\nimport _ol_math_ from '../math.js';\nimport _ol_size_ from '../size.js';\nimport _ol_tilecoord_ from '../tilecoord.js';\n\n/**\n * @classdesc\n * Base class for setting the grid pattern for sources accessing tiled-image\n * servers.\n *\n * @constructor\n * @param {olx.tilegrid.TileGridOptions} options Tile grid options.\n * @struct\n * @api\n */\nvar _ol_tilegrid_TileGrid_ = function(options) {\n\n  /**\n   * @protected\n   * @type {number}\n   */\n  this.minZoom = options.minZoom !== undefined ? options.minZoom : 0;\n\n  /**\n   * @private\n   * @type {!Array.<number>}\n   */\n  this.resolutions_ = options.resolutions;\n  _ol_asserts_.assert(_ol_array_.isSorted(this.resolutions_, function(a, b) {\n    return b - a;\n  }, true), 17); // `resolutions` must be sorted in descending order\n\n\n  // check if we've got a consistent zoom factor and origin\n  var zoomFactor;\n  if (!options.origins) {\n    for (var i = 0, ii = this.resolutions_.length - 1; i < ii; ++i) {\n      if (!zoomFactor) {\n        zoomFactor = this.resolutions_[i] / this.resolutions_[i + 1];\n      } else {\n        if (this.resolutions_[i] / this.resolutions_[i + 1] !== zoomFactor) {\n          zoomFactor = undefined;\n          break;\n        }\n      }\n    }\n  }\n\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.zoomFactor_ = zoomFactor;\n\n\n  /**\n   * @protected\n   * @type {number}\n   */\n  this.maxZoom = this.resolutions_.length - 1;\n\n  /**\n   * @private\n   * @type {ol.Coordinate}\n   */\n  this.origin_ = options.origin !== undefined ? options.origin : null;\n\n  /**\n   * @private\n   * @type {Array.<ol.Coordinate>}\n   */\n  this.origins_ = null;\n  if (options.origins !== undefined) {\n    this.origins_ = options.origins;\n    _ol_asserts_.assert(this.origins_.length == this.resolutions_.length,\n        20); // Number of `origins` and `resolutions` must be equal\n  }\n\n  var extent = options.extent;\n\n  if (extent !== undefined &&\n      !this.origin_ && !this.origins_) {\n    this.origin_ = _ol_extent_.getTopLeft(extent);\n  }\n\n  _ol_asserts_.assert(\n      (!this.origin_ && this.origins_) || (this.origin_ && !this.origins_),\n      18); // Either `origin` or `origins` must be configured, never both\n\n  /**\n   * @private\n   * @type {Array.<number|ol.Size>}\n   */\n  this.tileSizes_ = null;\n  if (options.tileSizes !== undefined) {\n    this.tileSizes_ = options.tileSizes;\n    _ol_asserts_.assert(this.tileSizes_.length == this.resolutions_.length,\n        19); // Number of `tileSizes` and `resolutions` must be equal\n  }\n\n  /**\n   * @private\n   * @type {number|ol.Size}\n   */\n  this.tileSize_ = options.tileSize !== undefined ?\n    options.tileSize :\n    !this.tileSizes_ ? _ol_.DEFAULT_TILE_SIZE : null;\n  _ol_asserts_.assert(\n      (!this.tileSize_ && this.tileSizes_) ||\n      (this.tileSize_ && !this.tileSizes_),\n      22); // Either `tileSize` or `tileSizes` must be configured, never both\n\n  /**\n   * @private\n   * @type {ol.Extent}\n   */\n  this.extent_ = extent !== undefined ? extent : null;\n\n\n  /**\n   * @private\n   * @type {Array.<ol.TileRange>}\n   */\n  this.fullTileRanges_ = null;\n\n  /**\n   * @private\n   * @type {ol.Size}\n   */\n  this.tmpSize_ = [0, 0];\n\n  if (options.sizes !== undefined) {\n    this.fullTileRanges_ = options.sizes.map(function(size, z) {\n      var tileRange = new _ol_TileRange_(\n          Math.min(0, size[0]), Math.max(size[0] - 1, -1),\n          Math.min(0, size[1]), Math.max(size[1] - 1, -1));\n      return tileRange;\n    }, this);\n  } else if (extent) {\n    this.calculateTileRanges_(extent);\n  }\n\n};\n\n\n/**\n * @private\n * @type {ol.TileCoord}\n */\n_ol_tilegrid_TileGrid_.tmpTileCoord_ = [0, 0, 0];\n\n\n/**\n * Call a function with each tile coordinate for a given extent and zoom level.\n *\n * @param {ol.Extent} extent Extent.\n * @param {number} zoom Integer zoom level.\n * @param {function(ol.TileCoord)} callback Function called with each tile coordinate.\n * @api\n */\n_ol_tilegrid_TileGrid_.prototype.forEachTileCoord = function(extent, zoom, callback) {\n  var tileRange = this.getTileRangeForExtentAndZ(extent, zoom);\n  for (var i = tileRange.minX, ii = tileRange.maxX; i <= ii; ++i) {\n    for (var j = tileRange.minY, jj = tileRange.maxY; j <= jj; ++j) {\n      callback([zoom, i, j]);\n    }\n  }\n};\n\n\n/**\n * @param {ol.TileCoord} tileCoord Tile coordinate.\n * @param {function(this: T, number, ol.TileRange): boolean} callback Callback.\n * @param {T=} opt_this The object to use as `this` in `callback`.\n * @param {ol.TileRange=} opt_tileRange Temporary ol.TileRange object.\n * @param {ol.Extent=} opt_extent Temporary ol.Extent object.\n * @return {boolean} Callback succeeded.\n * @template T\n */\n_ol_tilegrid_TileGrid_.prototype.forEachTileCoordParentTileRange = function(tileCoord, callback, opt_this, opt_tileRange, opt_extent) {\n  var tileRange, x, y;\n  var tileCoordExtent = null;\n  var z = tileCoord[0] - 1;\n  if (this.zoomFactor_ === 2) {\n    x = tileCoord[1];\n    y = tileCoord[2];\n  } else {\n    tileCoordExtent = this.getTileCoordExtent(tileCoord, opt_extent);\n  }\n  while (z >= this.minZoom) {\n    if (this.zoomFactor_ === 2) {\n      x = Math.floor(x / 2);\n      y = Math.floor(y / 2);\n      tileRange = _ol_TileRange_.createOrUpdate(x, x, y, y, opt_tileRange);\n    } else {\n      tileRange = this.getTileRangeForExtentAndZ(tileCoordExtent, z, opt_tileRange);\n    }\n    if (callback.call(opt_this, z, tileRange)) {\n      return true;\n    }\n    --z;\n  }\n  return false;\n};\n\n\n/**\n * Get the extent for this tile grid, if it was configured.\n * @return {ol.Extent} Extent.\n */\n_ol_tilegrid_TileGrid_.prototype.getExtent = function() {\n  return this.extent_;\n};\n\n\n/**\n * Get the maximum zoom level for the grid.\n * @return {number} Max zoom.\n * @api\n */\n_ol_tilegrid_TileGrid_.prototype.getMaxZoom = function() {\n  return this.maxZoom;\n};\n\n\n/**\n * Get the minimum zoom level for the grid.\n * @return {number} Min zoom.\n * @api\n */\n_ol_tilegrid_TileGrid_.prototype.getMinZoom = function() {\n  return this.minZoom;\n};\n\n\n/**\n * Get the origin for the grid at the given zoom level.\n * @param {number} z Integer zoom level.\n * @return {ol.Coordinate} Origin.\n * @api\n */\n_ol_tilegrid_TileGrid_.prototype.getOrigin = function(z) {\n  if (this.origin_) {\n    return this.origin_;\n  } else {\n    return this.origins_[z];\n  }\n};\n\n\n/**\n * Get the resolution for the given zoom level.\n * @param {number} z Integer zoom level.\n * @return {number} Resolution.\n * @api\n */\n_ol_tilegrid_TileGrid_.prototype.getResolution = function(z) {\n  return this.resolutions_[z];\n};\n\n\n/**\n * Get the list of resolutions for the tile grid.\n * @return {Array.<number>} Resolutions.\n * @api\n */\n_ol_tilegrid_TileGrid_.prototype.getResolutions = function() {\n  return this.resolutions_;\n};\n\n\n/**\n * @param {ol.TileCoord} tileCoord Tile coordinate.\n * @param {ol.TileRange=} opt_tileRange Temporary ol.TileRange object.\n * @param {ol.Extent=} opt_extent Temporary ol.Extent object.\n * @return {ol.TileRange} Tile range.\n */\n_ol_tilegrid_TileGrid_.prototype.getTileCoordChildTileRange = function(tileCoord, opt_tileRange, opt_extent) {\n  if (tileCoord[0] < this.maxZoom) {\n    if (this.zoomFactor_ === 2) {\n      var minX = tileCoord[1] * 2;\n      var minY = tileCoord[2] * 2;\n      return _ol_TileRange_.createOrUpdate(minX, minX + 1, minY, minY + 1, opt_tileRange);\n    }\n    var tileCoordExtent = this.getTileCoordExtent(tileCoord, opt_extent);\n    return this.getTileRangeForExtentAndZ(\n        tileCoordExtent, tileCoord[0] + 1, opt_tileRange);\n  }\n  return null;\n};\n\n\n/**\n * Get the extent for a tile range.\n * @param {number} z Integer zoom level.\n * @param {ol.TileRange} tileRange Tile range.\n * @param {ol.Extent=} opt_extent Temporary ol.Extent object.\n * @return {ol.Extent} Extent.\n */\n_ol_tilegrid_TileGrid_.prototype.getTileRangeExtent = function(z, tileRange, opt_extent) {\n  var origin = this.getOrigin(z);\n  var resolution = this.getResolution(z);\n  var tileSize = _ol_size_.toSize(this.getTileSize(z), this.tmpSize_);\n  var minX = origin[0] + tileRange.minX * tileSize[0] * resolution;\n  var maxX = origin[0] + (tileRange.maxX + 1) * tileSize[0] * resolution;\n  var minY = origin[1] + tileRange.minY * tileSize[1] * resolution;\n  var maxY = origin[1] + (tileRange.maxY + 1) * tileSize[1] * resolution;\n  return _ol_extent_.createOrUpdate(minX, minY, maxX, maxY, opt_extent);\n};\n\n\n/**\n * Get a tile range for the given extent and integer zoom level.\n * @param {ol.Extent} extent Extent.\n * @param {number} z Integer zoom level.\n * @param {ol.TileRange=} opt_tileRange Temporary tile range object.\n * @return {ol.TileRange} Tile range.\n */\n_ol_tilegrid_TileGrid_.prototype.getTileRangeForExtentAndZ = function(extent, z, opt_tileRange) {\n  var tileCoord = _ol_tilegrid_TileGrid_.tmpTileCoord_;\n  this.getTileCoordForXYAndZ_(extent[0], extent[1], z, false, tileCoord);\n  var minX = tileCoord[1];\n  var minY = tileCoord[2];\n  this.getTileCoordForXYAndZ_(extent[2], extent[3], z, true, tileCoord);\n  return _ol_TileRange_.createOrUpdate(\n      minX, tileCoord[1], minY, tileCoord[2], opt_tileRange);\n};\n\n\n/**\n * @param {ol.TileCoord} tileCoord Tile coordinate.\n * @return {ol.Coordinate} Tile center.\n */\n_ol_tilegrid_TileGrid_.prototype.getTileCoordCenter = function(tileCoord) {\n  var origin = this.getOrigin(tileCoord[0]);\n  var resolution = this.getResolution(tileCoord[0]);\n  var tileSize = _ol_size_.toSize(this.getTileSize(tileCoord[0]), this.tmpSize_);\n  return [\n    origin[0] + (tileCoord[1] + 0.5) * tileSize[0] * resolution,\n    origin[1] + (tileCoord[2] + 0.5) * tileSize[1] * resolution\n  ];\n};\n\n\n/**\n * Get the extent of a tile coordinate.\n *\n * @param {ol.TileCoord} tileCoord Tile coordinate.\n * @param {ol.Extent=} opt_extent Temporary extent object.\n * @return {ol.Extent} Extent.\n * @api\n */\n_ol_tilegrid_TileGrid_.prototype.getTileCoordExtent = function(tileCoord, opt_extent) {\n  var origin = this.getOrigin(tileCoord[0]);\n  var resolution = this.getResolution(tileCoord[0]);\n  var tileSize = _ol_size_.toSize(this.getTileSize(tileCoord[0]), this.tmpSize_);\n  var minX = origin[0] + tileCoord[1] * tileSize[0] * resolution;\n  var minY = origin[1] + tileCoord[2] * tileSize[1] * resolution;\n  var maxX = minX + tileSize[0] * resolution;\n  var maxY = minY + tileSize[1] * resolution;\n  return _ol_extent_.createOrUpdate(minX, minY, maxX, maxY, opt_extent);\n};\n\n\n/**\n * Get the tile coordinate for the given map coordinate and resolution.  This\n * method considers that coordinates that intersect tile boundaries should be\n * assigned the higher tile coordinate.\n *\n * @param {ol.Coordinate} coordinate Coordinate.\n * @param {number} resolution Resolution.\n * @param {ol.TileCoord=} opt_tileCoord Destination ol.TileCoord object.\n * @return {ol.TileCoord} Tile coordinate.\n * @api\n */\n_ol_tilegrid_TileGrid_.prototype.getTileCoordForCoordAndResolution = function(coordinate, resolution, opt_tileCoord) {\n  return this.getTileCoordForXYAndResolution_(\n      coordinate[0], coordinate[1], resolution, false, opt_tileCoord);\n};\n\n\n/**\n * Note that this method should not be called for resolutions that correspond\n * to an integer zoom level.  Instead call the `getTileCoordForXYAndZ_` method.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {number} resolution Resolution (for a non-integer zoom level).\n * @param {boolean} reverseIntersectionPolicy Instead of letting edge\n *     intersections go to the higher tile coordinate, let edge intersections\n *     go to the lower tile coordinate.\n * @param {ol.TileCoord=} opt_tileCoord Temporary ol.TileCoord object.\n * @return {ol.TileCoord} Tile coordinate.\n * @private\n */\n_ol_tilegrid_TileGrid_.prototype.getTileCoordForXYAndResolution_ = function(\n    x, y, resolution, reverseIntersectionPolicy, opt_tileCoord) {\n  var z = this.getZForResolution(resolution);\n  var scale = resolution / this.getResolution(z);\n  var origin = this.getOrigin(z);\n  var tileSize = _ol_size_.toSize(this.getTileSize(z), this.tmpSize_);\n\n  var adjustX = reverseIntersectionPolicy ? 0.5 : 0;\n  var adjustY = reverseIntersectionPolicy ? 0 : 0.5;\n  var xFromOrigin = Math.floor((x - origin[0]) / resolution + adjustX);\n  var yFromOrigin = Math.floor((y - origin[1]) / resolution + adjustY);\n  var tileCoordX = scale * xFromOrigin / tileSize[0];\n  var tileCoordY = scale * yFromOrigin / tileSize[1];\n\n  if (reverseIntersectionPolicy) {\n    tileCoordX = Math.ceil(tileCoordX) - 1;\n    tileCoordY = Math.ceil(tileCoordY) - 1;\n  } else {\n    tileCoordX = Math.floor(tileCoordX);\n    tileCoordY = Math.floor(tileCoordY);\n  }\n\n  return _ol_tilecoord_.createOrUpdate(z, tileCoordX, tileCoordY, opt_tileCoord);\n};\n\n\n/**\n * Although there is repetition between this method and `getTileCoordForXYAndResolution_`,\n * they should have separate implementations.  This method is for integer zoom\n * levels.  The other method should only be called for resolutions corresponding\n * to non-integer zoom levels.\n * @param {number} x Map x coordinate.\n * @param {number} y Map y coordinate.\n * @param {number} z Integer zoom level.\n * @param {boolean} reverseIntersectionPolicy Instead of letting edge\n *     intersections go to the higher tile coordinate, let edge intersections\n *     go to the lower tile coordinate.\n * @param {ol.TileCoord=} opt_tileCoord Temporary ol.TileCoord object.\n * @return {ol.TileCoord} Tile coordinate.\n * @private\n */\n_ol_tilegrid_TileGrid_.prototype.getTileCoordForXYAndZ_ = function(x, y, z, reverseIntersectionPolicy, opt_tileCoord) {\n  var origin = this.getOrigin(z);\n  var resolution = this.getResolution(z);\n  var tileSize = _ol_size_.toSize(this.getTileSize(z), this.tmpSize_);\n\n  var adjustX = reverseIntersectionPolicy ? 0.5 : 0;\n  var adjustY = reverseIntersectionPolicy ? 0 : 0.5;\n  var xFromOrigin = Math.floor((x - origin[0]) / resolution + adjustX);\n  var yFromOrigin = Math.floor((y - origin[1]) / resolution + adjustY);\n  var tileCoordX = xFromOrigin / tileSize[0];\n  var tileCoordY = yFromOrigin / tileSize[1];\n\n  if (reverseIntersectionPolicy) {\n    tileCoordX = Math.ceil(tileCoordX) - 1;\n    tileCoordY = Math.ceil(tileCoordY) - 1;\n  } else {\n    tileCoordX = Math.floor(tileCoordX);\n    tileCoordY = Math.floor(tileCoordY);\n  }\n\n  return _ol_tilecoord_.createOrUpdate(z, tileCoordX, tileCoordY, opt_tileCoord);\n};\n\n\n/**\n * Get a tile coordinate given a map coordinate and zoom level.\n * @param {ol.Coordinate} coordinate Coordinate.\n * @param {number} z Zoom level.\n * @param {ol.TileCoord=} opt_tileCoord Destination ol.TileCoord object.\n * @return {ol.TileCoord} Tile coordinate.\n * @api\n */\n_ol_tilegrid_TileGrid_.prototype.getTileCoordForCoordAndZ = function(coordinate, z, opt_tileCoord) {\n  return this.getTileCoordForXYAndZ_(\n      coordinate[0], coordinate[1], z, false, opt_tileCoord);\n};\n\n\n/**\n * @param {ol.TileCoord} tileCoord Tile coordinate.\n * @return {number} Tile resolution.\n */\n_ol_tilegrid_TileGrid_.prototype.getTileCoordResolution = function(tileCoord) {\n  return this.resolutions_[tileCoord[0]];\n};\n\n\n/**\n * Get the tile size for a zoom level. The type of the return value matches the\n * `tileSize` or `tileSizes` that the tile grid was configured with. To always\n * get an `ol.Size`, run the result through `ol.size.toSize()`.\n * @param {number} z Z.\n * @return {number|ol.Size} Tile size.\n * @api\n */\n_ol_tilegrid_TileGrid_.prototype.getTileSize = function(z) {\n  if (this.tileSize_) {\n    return this.tileSize_;\n  } else {\n    return this.tileSizes_[z];\n  }\n};\n\n\n/**\n * @param {number} z Zoom level.\n * @return {ol.TileRange} Extent tile range for the specified zoom level.\n */\n_ol_tilegrid_TileGrid_.prototype.getFullTileRange = function(z) {\n  if (!this.fullTileRanges_) {\n    return null;\n  } else {\n    return this.fullTileRanges_[z];\n  }\n};\n\n\n/**\n * @param {number} resolution Resolution.\n * @param {number=} opt_direction If 0, the nearest resolution will be used.\n *     If 1, the nearest lower resolution will be used. If -1, the nearest\n *     higher resolution will be used. Default is 0.\n * @return {number} Z.\n * @api\n */\n_ol_tilegrid_TileGrid_.prototype.getZForResolution = function(\n    resolution, opt_direction) {\n  var z = _ol_array_.linearFindNearest(this.resolutions_, resolution,\n      opt_direction || 0);\n  return _ol_math_.clamp(z, this.minZoom, this.maxZoom);\n};\n\n\n/**\n * @param {!ol.Extent} extent Extent for this tile grid.\n * @private\n */\n_ol_tilegrid_TileGrid_.prototype.calculateTileRanges_ = function(extent) {\n  var length = this.resolutions_.length;\n  var fullTileRanges = new Array(length);\n  for (var z = this.minZoom; z < length; ++z) {\n    fullTileRanges[z] = this.getTileRangeForExtentAndZ(extent, z);\n  }\n  this.fullTileRanges_ = fullTileRanges;\n};\nexport default _ol_tilegrid_TileGrid_;\n","import _ol_ from './index.js';\nimport _ol_size_ from './size.js';\nimport _ol_extent_ from './extent.js';\nimport _ol_extent_Corner_ from './extent/corner.js';\nimport _ol_obj_ from './obj.js';\nimport _ol_proj_ from './proj.js';\nimport _ol_proj_Units_ from './proj/units.js';\nimport _ol_tilegrid_TileGrid_ from './tilegrid/tilegrid.js';\nvar _ol_tilegrid_ = {};\n\n\n/**\n * @param {ol.proj.Projection} projection Projection.\n * @return {!ol.tilegrid.TileGrid} Default tile grid for the passed projection.\n */\n_ol_tilegrid_.getForProjection = function(projection) {\n  var tileGrid = projection.getDefaultTileGrid();\n  if (!tileGrid) {\n    tileGrid = _ol_tilegrid_.createForProjection(projection);\n    projection.setDefaultTileGrid(tileGrid);\n  }\n  return tileGrid;\n};\n\n\n/**\n * @param {ol.tilegrid.TileGrid} tileGrid Tile grid.\n * @param {ol.TileCoord} tileCoord Tile coordinate.\n * @param {ol.proj.Projection} projection Projection.\n * @return {ol.TileCoord} Tile coordinate.\n */\n_ol_tilegrid_.wrapX = function(tileGrid, tileCoord, projection) {\n  var z = tileCoord[0];\n  var center = tileGrid.getTileCoordCenter(tileCoord);\n  var projectionExtent = _ol_tilegrid_.extentFromProjection(projection);\n  if (!_ol_extent_.containsCoordinate(projectionExtent, center)) {\n    var worldWidth = _ol_extent_.getWidth(projectionExtent);\n    var worldsAway = Math.ceil((projectionExtent[0] - center[0]) / worldWidth);\n    center[0] += worldWidth * worldsAway;\n    return tileGrid.getTileCoordForCoordAndZ(center, z);\n  } else {\n    return tileCoord;\n  }\n};\n\n\n/**\n * @param {ol.Extent} extent Extent.\n * @param {number=} opt_maxZoom Maximum zoom level (default is\n *     ol.DEFAULT_MAX_ZOOM).\n * @param {number|ol.Size=} opt_tileSize Tile size (default uses\n *     ol.DEFAULT_TILE_SIZE).\n * @param {ol.extent.Corner=} opt_corner Extent corner (default is\n *     ol.extent.Corner.TOP_LEFT).\n * @return {!ol.tilegrid.TileGrid} TileGrid instance.\n */\n_ol_tilegrid_.createForExtent = function(extent, opt_maxZoom, opt_tileSize, opt_corner) {\n  var corner = opt_corner !== undefined ?\n    opt_corner : _ol_extent_Corner_.TOP_LEFT;\n\n  var resolutions = _ol_tilegrid_.resolutionsFromExtent(\n      extent, opt_maxZoom, opt_tileSize);\n\n  return new _ol_tilegrid_TileGrid_({\n    extent: extent,\n    origin: _ol_extent_.getCorner(extent, corner),\n    resolutions: resolutions,\n    tileSize: opt_tileSize\n  });\n};\n\n\n/**\n * Creates a tile grid with a standard XYZ tiling scheme.\n * @param {olx.tilegrid.XYZOptions=} opt_options Tile grid options.\n * @return {!ol.tilegrid.TileGrid} Tile grid instance.\n * @api\n */\n_ol_tilegrid_.createXYZ = function(opt_options) {\n  var options = /** @type {olx.tilegrid.TileGridOptions} */ ({});\n  _ol_obj_.assign(options, opt_options !== undefined ?\n    opt_options : /** @type {olx.tilegrid.XYZOptions} */ ({}));\n  if (options.extent === undefined) {\n    options.extent = _ol_proj_.get('EPSG:3857').getExtent();\n  }\n  options.resolutions = _ol_tilegrid_.resolutionsFromExtent(\n      options.extent, options.maxZoom, options.tileSize);\n  delete options.maxZoom;\n\n  return new _ol_tilegrid_TileGrid_(options);\n};\n\n\n/**\n * Create a resolutions array from an extent.  A zoom factor of 2 is assumed.\n * @param {ol.Extent} extent Extent.\n * @param {number=} opt_maxZoom Maximum zoom level (default is\n *     ol.DEFAULT_MAX_ZOOM).\n * @param {number|ol.Size=} opt_tileSize Tile size (default uses\n *     ol.DEFAULT_TILE_SIZE).\n * @return {!Array.<number>} Resolutions array.\n */\n_ol_tilegrid_.resolutionsFromExtent = function(extent, opt_maxZoom, opt_tileSize) {\n  var maxZoom = opt_maxZoom !== undefined ?\n    opt_maxZoom : _ol_.DEFAULT_MAX_ZOOM;\n\n  var height = _ol_extent_.getHeight(extent);\n  var width = _ol_extent_.getWidth(extent);\n\n  var tileSize = _ol_size_.toSize(opt_tileSize !== undefined ?\n    opt_tileSize : _ol_.DEFAULT_TILE_SIZE);\n  var maxResolution = Math.max(\n      width / tileSize[0], height / tileSize[1]);\n\n  var length = maxZoom + 1;\n  var resolutions = new Array(length);\n  for (var z = 0; z < length; ++z) {\n    resolutions[z] = maxResolution / Math.pow(2, z);\n  }\n  return resolutions;\n};\n\n\n/**\n * @param {ol.ProjectionLike} projection Projection.\n * @param {number=} opt_maxZoom Maximum zoom level (default is\n *     ol.DEFAULT_MAX_ZOOM).\n * @param {number|ol.Size=} opt_tileSize Tile size (default uses\n *     ol.DEFAULT_TILE_SIZE).\n * @param {ol.extent.Corner=} opt_corner Extent corner (default is\n *     ol.extent.Corner.BOTTOM_LEFT).\n * @return {!ol.tilegrid.TileGrid} TileGrid instance.\n */\n_ol_tilegrid_.createForProjection = function(projection, opt_maxZoom, opt_tileSize, opt_corner) {\n  var extent = _ol_tilegrid_.extentFromProjection(projection);\n  return _ol_tilegrid_.createForExtent(\n      extent, opt_maxZoom, opt_tileSize, opt_corner);\n};\n\n\n/**\n * Generate a tile grid extent from a projection.  If the projection has an\n * extent, it is used.  If not, a global extent is assumed.\n * @param {ol.ProjectionLike} projection Projection.\n * @return {ol.Extent} Extent.\n */\n_ol_tilegrid_.extentFromProjection = function(projection) {\n  projection = _ol_proj_.get(projection);\n  var extent = projection.getExtent();\n  if (!extent) {\n    var half = 180 * _ol_proj_.METERS_PER_UNIT[_ol_proj_Units_.DEGREES] /\n        projection.getMetersPerUnit();\n    extent = _ol_extent_.createOrUpdate(-half, -half, half, half);\n  }\n  return extent;\n};\nexport default _ol_tilegrid_;\n","import _ol_ from '../index.js';\nimport _ol_Object_ from '../object.js';\nimport _ol_layer_Property_ from '../layer/property.js';\nimport _ol_math_ from '../math.js';\nimport _ol_obj_ from '../obj.js';\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Note that with `ol.layer.Base` and all its subclasses, any property set in\n * the options is set as a {@link ol.Object} property on the layer object, so\n * is observable, and has get/set accessors.\n *\n * @constructor\n * @abstract\n * @extends {ol.Object}\n * @param {olx.layer.BaseOptions} options Layer options.\n * @api\n */\nvar _ol_layer_Base_ = function(options) {\n\n  _ol_Object_.call(this);\n\n  /**\n   * @type {Object.<string, *>}\n   */\n  var properties = _ol_obj_.assign({}, options);\n  properties[_ol_layer_Property_.OPACITY] =\n      options.opacity !== undefined ? options.opacity : 1;\n  properties[_ol_layer_Property_.VISIBLE] =\n      options.visible !== undefined ? options.visible : true;\n  properties[_ol_layer_Property_.Z_INDEX] =\n      options.zIndex !== undefined ? options.zIndex : 0;\n  properties[_ol_layer_Property_.MAX_RESOLUTION] =\n      options.maxResolution !== undefined ? options.maxResolution : Infinity;\n  properties[_ol_layer_Property_.MIN_RESOLUTION] =\n      options.minResolution !== undefined ? options.minResolution : 0;\n\n  this.setProperties(properties);\n\n  /**\n   * @type {ol.LayerState}\n   * @private\n   */\n  this.state_ = /** @type {ol.LayerState} */ ({\n    layer: /** @type {ol.layer.Layer} */ (this),\n    managed: true\n  });\n\n  /**\n   * The layer type.\n   * @type {ol.LayerType}\n   * @protected;\n   */\n  this.type;\n\n};\n\n_ol_.inherits(_ol_layer_Base_, _ol_Object_);\n\n\n/**\n * Get the layer type (used when creating a layer renderer).\n * @return {ol.LayerType} The layer type.\n */\n_ol_layer_Base_.prototype.getType = function() {\n  return this.type;\n};\n\n\n/**\n * @return {ol.LayerState} Layer state.\n */\n_ol_layer_Base_.prototype.getLayerState = function() {\n  this.state_.opacity = _ol_math_.clamp(this.getOpacity(), 0, 1);\n  this.state_.sourceState = this.getSourceState();\n  this.state_.visible = this.getVisible();\n  this.state_.extent = this.getExtent();\n  this.state_.zIndex = this.getZIndex();\n  this.state_.maxResolution = this.getMaxResolution();\n  this.state_.minResolution = Math.max(this.getMinResolution(), 0);\n\n  return this.state_;\n};\n\n\n/**\n * @abstract\n * @param {Array.<ol.layer.Layer>=} opt_array Array of layers (to be\n *     modified in place).\n * @return {Array.<ol.layer.Layer>} Array of layers.\n */\n_ol_layer_Base_.prototype.getLayersArray = function(opt_array) {};\n\n\n/**\n * @abstract\n * @param {Array.<ol.LayerState>=} opt_states Optional list of layer\n *     states (to be modified in place).\n * @return {Array.<ol.LayerState>} List of layer states.\n */\n_ol_layer_Base_.prototype.getLayerStatesArray = function(opt_states) {};\n\n\n/**\n * Return the {@link ol.Extent extent} of the layer or `undefined` if it\n * will be visible regardless of extent.\n * @return {ol.Extent|undefined} The layer extent.\n * @observable\n * @api\n */\n_ol_layer_Base_.prototype.getExtent = function() {\n  return (\n  /** @type {ol.Extent|undefined} */ this.get(_ol_layer_Property_.EXTENT)\n  );\n};\n\n\n/**\n * Return the maximum resolution of the layer.\n * @return {number} The maximum resolution of the layer.\n * @observable\n * @api\n */\n_ol_layer_Base_.prototype.getMaxResolution = function() {\n  return (\n  /** @type {number} */ this.get(_ol_layer_Property_.MAX_RESOLUTION)\n  );\n};\n\n\n/**\n * Return the minimum resolution of the layer.\n * @return {number} The minimum resolution of the layer.\n * @observable\n * @api\n */\n_ol_layer_Base_.prototype.getMinResolution = function() {\n  return (\n  /** @type {number} */ this.get(_ol_layer_Property_.MIN_RESOLUTION)\n  );\n};\n\n\n/**\n * Return the opacity of the layer (between 0 and 1).\n * @return {number} The opacity of the layer.\n * @observable\n * @api\n */\n_ol_layer_Base_.prototype.getOpacity = function() {\n  return (\n  /** @type {number} */ this.get(_ol_layer_Property_.OPACITY)\n  );\n};\n\n\n/**\n * @abstract\n * @return {ol.source.State} Source state.\n */\n_ol_layer_Base_.prototype.getSourceState = function() {};\n\n\n/**\n * Return the visibility of the layer (`true` or `false`).\n * @return {boolean} The visibility of the layer.\n * @observable\n * @api\n */\n_ol_layer_Base_.prototype.getVisible = function() {\n  return (\n  /** @type {boolean} */ this.get(_ol_layer_Property_.VISIBLE)\n  );\n};\n\n\n/**\n * Return the Z-index of the layer, which is used to order layers before\n * rendering. The default Z-index is 0.\n * @return {number} The Z-index of the layer.\n * @observable\n * @api\n */\n_ol_layer_Base_.prototype.getZIndex = function() {\n  return (\n  /** @type {number} */ this.get(_ol_layer_Property_.Z_INDEX)\n  );\n};\n\n\n/**\n * Set the extent at which the layer is visible.  If `undefined`, the layer\n * will be visible at all extents.\n * @param {ol.Extent|undefined} extent The extent of the layer.\n * @observable\n * @api\n */\n_ol_layer_Base_.prototype.setExtent = function(extent) {\n  this.set(_ol_layer_Property_.EXTENT, extent);\n};\n\n\n/**\n * Set the maximum resolution at which the layer is visible.\n * @param {number} maxResolution The maximum resolution of the layer.\n * @observable\n * @api\n */\n_ol_layer_Base_.prototype.setMaxResolution = function(maxResolution) {\n  this.set(_ol_layer_Property_.MAX_RESOLUTION, maxResolution);\n};\n\n\n/**\n * Set the minimum resolution at which the layer is visible.\n * @param {number} minResolution The minimum resolution of the layer.\n * @observable\n * @api\n */\n_ol_layer_Base_.prototype.setMinResolution = function(minResolution) {\n  this.set(_ol_layer_Property_.MIN_RESOLUTION, minResolution);\n};\n\n\n/**\n * Set the opacity of the layer, allowed values range from 0 to 1.\n * @param {number} opacity The opacity of the layer.\n * @observable\n * @api\n */\n_ol_layer_Base_.prototype.setOpacity = function(opacity) {\n  this.set(_ol_layer_Property_.OPACITY, opacity);\n};\n\n\n/**\n * Set the visibility of the layer (`true` or `false`).\n * @param {boolean} visible The visibility of the layer.\n * @observable\n * @api\n */\n_ol_layer_Base_.prototype.setVisible = function(visible) {\n  this.set(_ol_layer_Property_.VISIBLE, visible);\n};\n\n\n/**\n * Set Z-index of the layer, which is used to order layers before rendering.\n * The default Z-index is 0.\n * @param {number} zindex The z-index of the layer.\n * @observable\n * @api\n */\n_ol_layer_Base_.prototype.setZIndex = function(zindex) {\n  this.set(_ol_layer_Property_.Z_INDEX, zindex);\n};\nexport default _ol_layer_Base_;\n","var _ol_proj_proj4_ = {};\n\n\n/**\n * @private\n * @type {Proj4}\n */\n_ol_proj_proj4_.cache_ = null;\n\n\n/**\n * Store the proj4 function.\n * @param {Proj4} proj4 The proj4 function.\n */\n_ol_proj_proj4_.set = function(proj4) {\n  _ol_proj_proj4_.cache_ = proj4;\n};\n\n\n/**\n * Get proj4.\n * @return {Proj4} The proj4 function set above or available globally.\n */\n_ol_proj_proj4_.get = function() {\n  return _ol_proj_proj4_.cache_ || window['proj4'];\n};\nexport default _ol_proj_proj4_;\n","import _ol_ from '../index.js';\nimport _ol_extent_ from '../extent.js';\nimport _ol_geom_GeometryLayout_ from '../geom/geometrylayout.js';\nimport _ol_geom_GeometryType_ from '../geom/geometrytype.js';\nimport _ol_geom_SimpleGeometry_ from '../geom/simplegeometry.js';\nimport _ol_geom_flat_deflate_ from '../geom/flat/deflate.js';\nimport _ol_math_ from '../math.js';\n\n/**\n * @classdesc\n * Point geometry.\n *\n * @constructor\n * @extends {ol.geom.SimpleGeometry}\n * @param {ol.Coordinate} coordinates Coordinates.\n * @param {ol.geom.GeometryLayout=} opt_layout Layout.\n * @api\n */\nvar _ol_geom_Point_ = function(coordinates, opt_layout) {\n  _ol_geom_SimpleGeometry_.call(this);\n  this.setCoordinates(coordinates, opt_layout);\n};\n\n_ol_.inherits(_ol_geom_Point_, _ol_geom_SimpleGeometry_);\n\n\n/**\n * Make a complete copy of the geometry.\n * @return {!ol.geom.Point} Clone.\n * @override\n * @api\n */\n_ol_geom_Point_.prototype.clone = function() {\n  var point = new _ol_geom_Point_(null);\n  point.setFlatCoordinates(this.layout, this.flatCoordinates.slice());\n  return point;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_geom_Point_.prototype.closestPointXY = function(x, y, closestPoint, minSquaredDistance) {\n  var flatCoordinates = this.flatCoordinates;\n  var squaredDistance = _ol_math_.squaredDistance(\n      x, y, flatCoordinates[0], flatCoordinates[1]);\n  if (squaredDistance < minSquaredDistance) {\n    var stride = this.stride;\n    var i;\n    for (i = 0; i < stride; ++i) {\n      closestPoint[i] = flatCoordinates[i];\n    }\n    closestPoint.length = stride;\n    return squaredDistance;\n  } else {\n    return minSquaredDistance;\n  }\n};\n\n\n/**\n * Return the coordinate of the point.\n * @return {ol.Coordinate} Coordinates.\n * @override\n * @api\n */\n_ol_geom_Point_.prototype.getCoordinates = function() {\n  return !this.flatCoordinates ? [] : this.flatCoordinates.slice();\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_geom_Point_.prototype.computeExtent = function(extent) {\n  return _ol_extent_.createOrUpdateFromCoordinate(this.flatCoordinates, extent);\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\n_ol_geom_Point_.prototype.getType = function() {\n  return _ol_geom_GeometryType_.POINT;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\n_ol_geom_Point_.prototype.intersectsExtent = function(extent) {\n  return _ol_extent_.containsXY(extent,\n      this.flatCoordinates[0], this.flatCoordinates[1]);\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\n_ol_geom_Point_.prototype.setCoordinates = function(coordinates, opt_layout) {\n  if (!coordinates) {\n    this.setFlatCoordinates(_ol_geom_GeometryLayout_.XY, null);\n  } else {\n    this.setLayout(opt_layout, coordinates, 0);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    this.flatCoordinates.length = _ol_geom_flat_deflate_.coordinate(\n        this.flatCoordinates, 0, coordinates, this.stride);\n    this.changed();\n  }\n};\n\n\n/**\n * @param {ol.geom.GeometryLayout} layout Layout.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n */\n_ol_geom_Point_.prototype.setFlatCoordinates = function(layout, flatCoordinates) {\n  this.setFlatCoordinatesInternal(layout, flatCoordinates);\n  this.changed();\n};\nexport default _ol_geom_Point_;\n","import _ol_ from '../index.js';\nimport _ol_asserts_ from '../asserts.js';\nimport _ol_events_EventTarget_ from '../events/eventtarget.js';\nimport _ol_events_EventType_ from '../events/eventtype.js';\n\n/**\n * Implements a Least-Recently-Used cache where the keys do not conflict with\n * Object's properties (e.g. 'hasOwnProperty' is not allowed as a key). Expiring\n * items from the cache is the responsibility of the user.\n * @constructor\n * @extends {ol.events.EventTarget}\n * @fires ol.events.Event\n * @struct\n * @template T\n * @param {number=} opt_highWaterMark High water mark.\n */\nvar _ol_structs_LRUCache_ = function(opt_highWaterMark) {\n\n  _ol_events_EventTarget_.call(this);\n\n  /**\n   * @type {number}\n   */\n  this.highWaterMark = opt_highWaterMark !== undefined ? opt_highWaterMark : 2048;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.count_ = 0;\n\n  /**\n   * @private\n   * @type {!Object.<string, ol.LRUCacheEntry>}\n   */\n  this.entries_ = {};\n\n  /**\n   * @private\n   * @type {?ol.LRUCacheEntry}\n   */\n  this.oldest_ = null;\n\n  /**\n   * @private\n   * @type {?ol.LRUCacheEntry}\n   */\n  this.newest_ = null;\n\n};\n\n_ol_.inherits(_ol_structs_LRUCache_, _ol_events_EventTarget_);\n\n\n/**\n * @return {boolean} Can expire cache.\n */\n_ol_structs_LRUCache_.prototype.canExpireCache = function() {\n  return this.getCount() > this.highWaterMark;\n};\n\n\n/**\n * FIXME empty description for jsdoc\n */\n_ol_structs_LRUCache_.prototype.clear = function() {\n  this.count_ = 0;\n  this.entries_ = {};\n  this.oldest_ = null;\n  this.newest_ = null;\n  this.dispatchEvent(_ol_events_EventType_.CLEAR);\n};\n\n\n/**\n * @param {string} key Key.\n * @return {boolean} Contains key.\n */\n_ol_structs_LRUCache_.prototype.containsKey = function(key) {\n  return this.entries_.hasOwnProperty(key);\n};\n\n\n/**\n * @param {function(this: S, T, string, ol.structs.LRUCache): ?} f The function\n *     to call for every entry from the oldest to the newer. This function takes\n *     3 arguments (the entry value, the entry key and the LRUCache object).\n *     The return value is ignored.\n * @param {S=} opt_this The object to use as `this` in `f`.\n * @template S\n */\n_ol_structs_LRUCache_.prototype.forEach = function(f, opt_this) {\n  var entry = this.oldest_;\n  while (entry) {\n    f.call(opt_this, entry.value_, entry.key_, this);\n    entry = entry.newer;\n  }\n};\n\n\n/**\n * @param {string} key Key.\n * @return {T} Value.\n */\n_ol_structs_LRUCache_.prototype.get = function(key) {\n  var entry = this.entries_[key];\n  _ol_asserts_.assert(entry !== undefined,\n      15); // Tried to get a value for a key that does not exist in the cache\n  if (entry === this.newest_) {\n    return entry.value_;\n  } else if (entry === this.oldest_) {\n    this.oldest_ = /** @type {ol.LRUCacheEntry} */ (this.oldest_.newer);\n    this.oldest_.older = null;\n  } else {\n    entry.newer.older = entry.older;\n    entry.older.newer = entry.newer;\n  }\n  entry.newer = null;\n  entry.older = this.newest_;\n  this.newest_.newer = entry;\n  this.newest_ = entry;\n  return entry.value_;\n};\n\n\n/**\n * Remove an entry from the cache.\n * @param {string} key The entry key.\n * @return {T} The removed entry.\n */\n_ol_structs_LRUCache_.prototype.remove = function(key) {\n  var entry = this.entries_[key];\n  _ol_asserts_.assert(entry !== undefined, 15); // Tried to get a value for a key that does not exist in the cache\n  if (entry === this.newest_) {\n    this.newest_ = /** @type {ol.LRUCacheEntry} */ (entry.older);\n    if (this.newest_) {\n      this.newest_.newer = null;\n    }\n  } else if (entry === this.oldest_) {\n    this.oldest_ = /** @type {ol.LRUCacheEntry} */ (entry.newer);\n    if (this.oldest_) {\n      this.oldest_.older = null;\n    }\n  } else {\n    entry.newer.older = entry.older;\n    entry.older.newer = entry.newer;\n  }\n  delete this.entries_[key];\n  --this.count_;\n  return entry.value_;\n};\n\n\n/**\n * @return {number} Count.\n */\n_ol_structs_LRUCache_.prototype.getCount = function() {\n  return this.count_;\n};\n\n\n/**\n * @return {Array.<string>} Keys.\n */\n_ol_structs_LRUCache_.prototype.getKeys = function() {\n  var keys = new Array(this.count_);\n  var i = 0;\n  var entry;\n  for (entry = this.newest_; entry; entry = entry.older) {\n    keys[i++] = entry.key_;\n  }\n  return keys;\n};\n\n\n/**\n * @return {Array.<T>} Values.\n */\n_ol_structs_LRUCache_.prototype.getValues = function() {\n  var values = new Array(this.count_);\n  var i = 0;\n  var entry;\n  for (entry = this.newest_; entry; entry = entry.older) {\n    values[i++] = entry.value_;\n  }\n  return values;\n};\n\n\n/**\n * @return {T} Last value.\n */\n_ol_structs_LRUCache_.prototype.peekLast = function() {\n  return this.oldest_.value_;\n};\n\n\n/**\n * @return {string} Last key.\n */\n_ol_structs_LRUCache_.prototype.peekLastKey = function() {\n  return this.oldest_.key_;\n};\n\n\n/**\n * Get the key of the newest item in the cache.  Throws if the cache is empty.\n * @return {string} The newest key.\n */\n_ol_structs_LRUCache_.prototype.peekFirstKey = function() {\n  return this.newest_.key_;\n};\n\n\n/**\n * @return {T} value Value.\n */\n_ol_structs_LRUCache_.prototype.pop = function() {\n  var entry = this.oldest_;\n  delete this.entries_[entry.key_];\n  if (entry.newer) {\n    entry.newer.older = null;\n  }\n  this.oldest_ = /** @type {ol.LRUCacheEntry} */ (entry.newer);\n  if (!this.oldest_) {\n    this.newest_ = null;\n  }\n  --this.count_;\n  return entry.value_;\n};\n\n\n/**\n * @param {string} key Key.\n * @param {T} value Value.\n */\n_ol_structs_LRUCache_.prototype.replace = function(key, value) {\n  this.get(key);  // update `newest_`\n  this.entries_[key].value_ = value;\n};\n\n\n/**\n * @param {string} key Key.\n * @param {T} value Value.\n */\n_ol_structs_LRUCache_.prototype.set = function(key, value) {\n  _ol_asserts_.assert(!(key in this.entries_),\n      16); // Tried to set a value for a key that is used already\n  var entry = /** @type {ol.LRUCacheEntry} */ ({\n    key_: key,\n    newer: null,\n    older: this.newest_,\n    value_: value\n  });\n  if (!this.newest_) {\n    this.oldest_ = entry;\n  } else {\n    this.newest_.newer = entry;\n  }\n  this.newest_ = entry;\n  this.entries_[key] = entry;\n  ++this.count_;\n};\n\n\n/**\n * Prune the cache.\n */\n_ol_structs_LRUCache_.prototype.prune = function() {\n  while (this.canExpireCache()) {\n    this.pop();\n  }\n};\nexport default _ol_structs_LRUCache_;\n","import _ol_extent_ from '../../extent.js';\nimport _ol_geom_flat_contains_ from '../flat/contains.js';\nimport _ol_geom_flat_segments_ from '../flat/segments.js';\nvar _ol_geom_flat_intersectsextent_ = {};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {ol.Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\n_ol_geom_flat_intersectsextent_.lineString = function(flatCoordinates, offset, end, stride, extent) {\n  var coordinatesExtent = _ol_extent_.extendFlatCoordinates(\n      _ol_extent_.createEmpty(), flatCoordinates, offset, end, stride);\n  if (!_ol_extent_.intersects(extent, coordinatesExtent)) {\n    return false;\n  }\n  if (_ol_extent_.containsExtent(extent, coordinatesExtent)) {\n    return true;\n  }\n  if (coordinatesExtent[0] >= extent[0] &&\n      coordinatesExtent[2] <= extent[2]) {\n    return true;\n  }\n  if (coordinatesExtent[1] >= extent[1] &&\n      coordinatesExtent[3] <= extent[3]) {\n    return true;\n  }\n  return _ol_geom_flat_segments_.forEach(flatCoordinates, offset, end, stride,\n      /**\n       * @param {ol.Coordinate} point1 Start point.\n       * @param {ol.Coordinate} point2 End point.\n       * @return {boolean} `true` if the segment and the extent intersect,\n       *     `false` otherwise.\n       */\n      function(point1, point2) {\n        return _ol_extent_.intersectsSegment(extent, point1, point2);\n      });\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {ol.Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\n_ol_geom_flat_intersectsextent_.lineStrings = function(flatCoordinates, offset, ends, stride, extent) {\n  var i, ii;\n  for (i = 0, ii = ends.length; i < ii; ++i) {\n    if (_ol_geom_flat_intersectsextent_.lineString(\n        flatCoordinates, offset, ends[i], stride, extent)) {\n      return true;\n    }\n    offset = ends[i];\n  }\n  return false;\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {ol.Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\n_ol_geom_flat_intersectsextent_.linearRing = function(flatCoordinates, offset, end, stride, extent) {\n  if (_ol_geom_flat_intersectsextent_.lineString(\n      flatCoordinates, offset, end, stride, extent)) {\n    return true;\n  }\n  if (_ol_geom_flat_contains_.linearRingContainsXY(\n      flatCoordinates, offset, end, stride, extent[0], extent[1])) {\n    return true;\n  }\n  if (_ol_geom_flat_contains_.linearRingContainsXY(\n      flatCoordinates, offset, end, stride, extent[0], extent[3])) {\n    return true;\n  }\n  if (_ol_geom_flat_contains_.linearRingContainsXY(\n      flatCoordinates, offset, end, stride, extent[2], extent[1])) {\n    return true;\n  }\n  if (_ol_geom_flat_contains_.linearRingContainsXY(\n      flatCoordinates, offset, end, stride, extent[2], extent[3])) {\n    return true;\n  }\n  return false;\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {ol.Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\n_ol_geom_flat_intersectsextent_.linearRings = function(flatCoordinates, offset, ends, stride, extent) {\n  if (!_ol_geom_flat_intersectsextent_.linearRing(\n      flatCoordinates, offset, ends[0], stride, extent)) {\n    return false;\n  }\n  if (ends.length === 1) {\n    return true;\n  }\n  var i, ii;\n  for (i = 1, ii = ends.length; i < ii; ++i) {\n    if (_ol_geom_flat_contains_.linearRingContainsExtent(\n        flatCoordinates, ends[i - 1], ends[i], stride, extent)) {\n      return false;\n    }\n  }\n  return true;\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<Array.<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {ol.Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\n_ol_geom_flat_intersectsextent_.linearRingss = function(flatCoordinates, offset, endss, stride, extent) {\n  var i, ii;\n  for (i = 0, ii = endss.length; i < ii; ++i) {\n    var ends = endss[i];\n    if (_ol_geom_flat_intersectsextent_.linearRings(\n        flatCoordinates, offset, ends, stride, extent)) {\n      return true;\n    }\n    offset = ends[ends.length - 1];\n  }\n  return false;\n};\nexport default _ol_geom_flat_intersectsextent_;\n","import _ol_ from './index.js';\nimport _ol_MapEvent_ from './mapevent.js';\n\n/**\n * @classdesc\n * Events emitted as map browser events are instances of this type.\n * See {@link ol.Map} for which events trigger a map browser event.\n *\n * @constructor\n * @extends {ol.MapEvent}\n * @implements {oli.MapBrowserEvent}\n * @param {string} type Event type.\n * @param {ol.PluggableMap} map Map.\n * @param {Event} browserEvent Browser event.\n * @param {boolean=} opt_dragging Is the map currently being dragged?\n * @param {?olx.FrameState=} opt_frameState Frame state.\n */\nvar _ol_MapBrowserEvent_ = function(type, map, browserEvent, opt_dragging,\n    opt_frameState) {\n\n  _ol_MapEvent_.call(this, type, map, opt_frameState);\n\n  /**\n   * The original browser event.\n   * @const\n   * @type {Event}\n   * @api\n   */\n  this.originalEvent = browserEvent;\n\n  /**\n   * The map pixel relative to the viewport corresponding to the original browser event.\n   * @type {ol.Pixel}\n   * @api\n   */\n  this.pixel = map.getEventPixel(browserEvent);\n\n  /**\n   * The coordinate in view projection corresponding to the original browser event.\n   * @type {ol.Coordinate}\n   * @api\n   */\n  this.coordinate = map.getCoordinateFromPixel(this.pixel);\n\n  /**\n   * Indicates if the map is currently being dragged. Only set for\n   * `POINTERDRAG` and `POINTERMOVE` events. Default is `false`.\n   *\n   * @type {boolean}\n   * @api\n   */\n  this.dragging = opt_dragging !== undefined ? opt_dragging : false;\n\n};\n\n_ol_.inherits(_ol_MapBrowserEvent_, _ol_MapEvent_);\n\n\n/**\n * Prevents the default browser action.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/event.preventDefault\n * @override\n * @api\n */\n_ol_MapBrowserEvent_.prototype.preventDefault = function() {\n  _ol_MapEvent_.prototype.preventDefault.call(this);\n  this.originalEvent.preventDefault();\n};\n\n\n/**\n * Prevents further propagation of the current event.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/event.stopPropagation\n * @override\n * @api\n */\n_ol_MapBrowserEvent_.prototype.stopPropagation = function() {\n  _ol_MapEvent_.prototype.stopPropagation.call(this);\n  this.originalEvent.stopPropagation();\n};\nexport default _ol_MapBrowserEvent_;\n","import _ol_TileRange_ from './tilerange.js';\nimport _ol_math_ from './math.js';\nimport _ol_tilegrid_ from './tilegrid.js';\n\n/**\n * @classdesc\n * An attribution for a layer source.\n *\n * Example:\n *\n *     source: new ol.source.OSM({\n *       attributions: [\n *         new ol.Attribution({\n *           html: 'All maps &copy; ' +\n *               '<a href=\"https://www.opencyclemap.org/\">OpenCycleMap</a>'\n *         }),\n *         ol.source.OSM.ATTRIBUTION\n *       ],\n *     ..\n *\n * @constructor\n * @deprecated This class is deprecated and will removed in the next major release.\n * @param {olx.AttributionOptions} options Attribution options.\n * @struct\n * @api\n */\nvar _ol_Attribution_ = function(options) {\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this.html_ = options.html;\n\n  /**\n   * @private\n   * @type {Object.<string, Array.<ol.TileRange>>}\n   */\n  this.tileRanges_ = options.tileRanges ? options.tileRanges : null;\n\n};\n\n\n/**\n * Get the attribution markup.\n * @return {string} The attribution HTML.\n * @api\n */\n_ol_Attribution_.prototype.getHTML = function() {\n  return this.html_;\n};\n\n\n/**\n * @param {Object.<string, ol.TileRange>} tileRanges Tile ranges.\n * @param {!ol.tilegrid.TileGrid} tileGrid Tile grid.\n * @param {!ol.proj.Projection} projection Projection.\n * @return {boolean} Intersects any tile range.\n */\n_ol_Attribution_.prototype.intersectsAnyTileRange = function(tileRanges, tileGrid, projection) {\n  if (!this.tileRanges_) {\n    return true;\n  }\n  var i, ii, tileRange, zKey;\n  for (zKey in tileRanges) {\n    if (!(zKey in this.tileRanges_)) {\n      continue;\n    }\n    tileRange = tileRanges[zKey];\n    var testTileRange;\n    for (i = 0, ii = this.tileRanges_[zKey].length; i < ii; ++i) {\n      testTileRange = this.tileRanges_[zKey][i];\n      if (testTileRange.intersects(tileRange)) {\n        return true;\n      }\n      var extentTileRange = tileGrid.getTileRangeForExtentAndZ(\n          _ol_tilegrid_.extentFromProjection(projection), parseInt(zKey, 10));\n      var width = extentTileRange.getWidth();\n      if (tileRange.minX < extentTileRange.minX ||\n          tileRange.maxX > extentTileRange.maxX) {\n        if (testTileRange.intersects(new _ol_TileRange_(\n            _ol_math_.modulo(tileRange.minX, width),\n            _ol_math_.modulo(tileRange.maxX, width),\n            tileRange.minY, tileRange.maxY))) {\n          return true;\n        }\n        if (tileRange.getWidth() > width &&\n            testTileRange.intersects(extentTileRange)) {\n          return true;\n        }\n      }\n    }\n  }\n  return false;\n};\nexport default _ol_Attribution_;\n","import _ol_ from '../index.js';\nimport _ol_Attribution_ from '../attribution.js';\nimport _ol_Object_ from '../object.js';\nimport _ol_proj_ from '../proj.js';\nimport _ol_source_State_ from '../source/state.js';\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for {@link ol.layer.Layer} sources.\n *\n * A generic `change` event is triggered when the state of the source changes.\n *\n * @constructor\n * @abstract\n * @extends {ol.Object}\n * @param {ol.SourceSourceOptions} options Source options.\n * @api\n */\nvar _ol_source_Source_ = function(options) {\n\n  _ol_Object_.call(this);\n\n  /**\n   * @private\n   * @type {ol.proj.Projection}\n   */\n  this.projection_ = _ol_proj_.get(options.projection);\n\n  /**\n   * @private\n   * @type {Array.<ol.Attribution>}\n   */\n  this.attributions_ = null;\n\n  /**\n   * @private\n   * @type {?ol.Attribution2}\n   */\n  this.attributions2_ = this.adaptAttributions_(options.attributions);\n\n  /**\n   * @private\n   * @type {string|olx.LogoOptions|undefined}\n   */\n  this.logo_ = options.logo;\n\n  /**\n   * @private\n   * @type {ol.source.State}\n   */\n  this.state_ = options.state !== undefined ?\n    options.state : _ol_source_State_.READY;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.wrapX_ = options.wrapX !== undefined ? options.wrapX : false;\n\n};\n\n_ol_.inherits(_ol_source_Source_, _ol_Object_);\n\n/**\n * Turns the attributions option into an attributions function.\n * @suppress {deprecated}\n * @param {ol.AttributionLike|undefined} attributionLike The attribution option.\n * @return {?ol.Attribution2} An attribution function (or null).\n */\n_ol_source_Source_.prototype.adaptAttributions_ = function(attributionLike) {\n  if (!attributionLike) {\n    return null;\n  }\n  if (attributionLike instanceof _ol_Attribution_) {\n\n    // TODO: remove attributions_ in next major release\n    this.attributions_ = [attributionLike];\n\n    return function(frameState) {\n      return [attributionLike.getHTML()];\n    };\n  }\n  if (Array.isArray(attributionLike)) {\n    if (attributionLike[0] instanceof _ol_Attribution_) {\n\n      // TODO: remove attributions_ in next major release\n      this.attributions_ = attributionLike;\n\n      var attributions = attributionLike.map(function(attribution) {\n        return attribution.getHTML();\n      });\n      return function(frameState) {\n        return attributions;\n      };\n    }\n\n    // TODO: remove attributions_ in next major release\n    this.attributions_ = attributionLike.map(function(attribution) {\n      return new _ol_Attribution_({html: attribution});\n    });\n\n    return function(frameState) {\n      return attributionLike;\n    };\n  }\n\n  if (typeof attributionLike === 'function') {\n    return attributionLike;\n  }\n\n  // TODO: remove attributions_ in next major release\n  this.attributions_ = [\n    new _ol_Attribution_({html: attributionLike})\n  ];\n\n  return function(frameState) {\n    return [attributionLike];\n  };\n};\n\n/**\n * @param {ol.Coordinate} coordinate Coordinate.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @param {number} hitTolerance Hit tolerance in pixels.\n * @param {Object.<string, boolean>} skippedFeatureUids Skipped feature uids.\n * @param {function((ol.Feature|ol.render.Feature)): T} callback Feature\n *     callback.\n * @return {T|undefined} Callback result.\n * @template T\n */\n_ol_source_Source_.prototype.forEachFeatureAtCoordinate = _ol_.nullFunction;\n\n\n/**\n * Get the attributions of the source.\n * @return {Array.<ol.Attribution>} Attributions.\n * @api\n */\n_ol_source_Source_.prototype.getAttributions = function() {\n  return this.attributions_;\n};\n\n\n/**\n * Get the attribution function for the source.\n * @return {?ol.Attribution2} Attribution function.\n */\n_ol_source_Source_.prototype.getAttributions2 = function() {\n  return this.attributions2_;\n};\n\n\n/**\n * Get the logo of the source.\n * @return {string|olx.LogoOptions|undefined} Logo.\n * @api\n */\n_ol_source_Source_.prototype.getLogo = function() {\n  return this.logo_;\n};\n\n\n/**\n * Get the projection of the source.\n * @return {ol.proj.Projection} Projection.\n * @api\n */\n_ol_source_Source_.prototype.getProjection = function() {\n  return this.projection_;\n};\n\n\n/**\n * @abstract\n * @return {Array.<number>|undefined} Resolutions.\n */\n_ol_source_Source_.prototype.getResolutions = function() {};\n\n\n/**\n * Get the state of the source, see {@link ol.source.State} for possible states.\n * @return {ol.source.State} State.\n * @api\n */\n_ol_source_Source_.prototype.getState = function() {\n  return this.state_;\n};\n\n\n/**\n * @return {boolean|undefined} Wrap X.\n */\n_ol_source_Source_.prototype.getWrapX = function() {\n  return this.wrapX_;\n};\n\n\n/**\n * Refreshes the source and finally dispatches a 'change' event.\n * @api\n */\n_ol_source_Source_.prototype.refresh = function() {\n  this.changed();\n};\n\n\n/**\n * Set the attributions of the source.\n * @param {ol.AttributionLike|undefined} attributions Attributions.\n *     Can be passed as `string`, `Array<string>`, `{@link ol.Attribution2}`,\n *     or `undefined`.\n * @api\n */\n_ol_source_Source_.prototype.setAttributions = function(attributions) {\n  this.attributions2_ = this.adaptAttributions_(attributions);\n  this.changed();\n};\n\n\n/**\n * Set the logo of the source.\n * @param {string|olx.LogoOptions|undefined} logo Logo.\n */\n_ol_source_Source_.prototype.setLogo = function(logo) {\n  this.logo_ = logo;\n};\n\n\n/**\n * Set the state of the source.\n * @param {ol.source.State} state State.\n * @protected\n */\n_ol_source_Source_.prototype.setState = function(state) {\n  this.state_ = state;\n  this.changed();\n};\nexport default _ol_source_Source_;\n","/**\n * @enum {string}\n * Render mode for vector layers:\n *  * `'image'`: Vector layers are rendered as images. Great performance, but\n *    point symbols and texts are always rotated with the view and pixels are\n *    scaled during zoom animations.\n *  * `'vector'`: Vector layers are rendered as vectors. Most accurate rendering\n *    even during animations, but slower performance.\n * @api\n */\nvar _ol_layer_VectorRenderType_ = {\n  IMAGE: 'image',\n  VECTOR: 'vector'\n};\n\nexport default _ol_layer_VectorRenderType_;\n","import _ol_ from './index.js';\n\n/**\n * Error object thrown when an assertion failed. This is an ECMA-262 Error,\n * extended with a `code` property.\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error}\n * @constructor\n * @extends {Error}\n * @implements {oli.AssertionError}\n * @param {number} code Error code.\n */\nvar _ol_AssertionError_ = function(code) {\n\n  var path = _ol_.VERSION ? _ol_.VERSION.split('-')[0] : 'latest';\n\n  /**\n   * @type {string}\n   */\n  this.message = 'Assertion failed. See https://openlayers.org/en/' + path +\n      '/doc/errors/#' + code + ' for details.';\n\n  /**\n   * Error code. The meaning of the code can be found on\n   * {@link https://openlayers.org/en/latest/doc/errors/} (replace `latest` with\n   * the version found in the OpenLayers script's header comment if a version\n   * other than the latest is used).\n   * @type {number}\n   * @api\n   */\n  this.code = code;\n\n  this.name = 'AssertionError';\n\n};\n\n_ol_.inherits(_ol_AssertionError_, Error);\nexport default _ol_AssertionError_;\n","module.exports = function escape(url) {\n    if (typeof url !== 'string') {\n        return url\n    }\n    // If url is already wrapped in quotes, remove them\n    if (/^['\"].*['\"]$/.test(url)) {\n        url = url.slice(1, -1);\n    }\n    // Should url be wrapped?\n    // See https://drafts.csswg.org/css-values-3/#urls\n    if (/[\"'() \\t\\n]/.test(url)) {\n        return '\"' + url.replace(/\"/g, '\\\\\"').replace(/\\n/g, '\\\\n') + '\"'\n    }\n\n    return url\n}\n","/**\n * @enum {string}\n */\nvar _ol_layer_TileProperty_ = {\n  PRELOAD: 'preload',\n  USE_INTERIM_TILES_ON_ERROR: 'useInterimTilesOnError'\n};\n\nexport default _ol_layer_TileProperty_;\n","import _ol_ from '../index.js';\nimport _ol_LayerType_ from '../layertype.js';\nimport _ol_layer_Layer_ from '../layer/layer.js';\nimport _ol_layer_TileProperty_ from '../layer/tileproperty.js';\nimport _ol_obj_ from '../obj.js';\n\n/**\n * @classdesc\n * For layer sources that provide pre-rendered, tiled images in grids that are\n * organized by zoom levels for specific resolutions.\n * Note that any property set in the options is set as a {@link ol.Object}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @constructor\n * @extends {ol.layer.Layer}\n * @fires ol.render.Event\n * @param {olx.layer.TileOptions=} opt_options Tile layer options.\n * @api\n */\nvar _ol_layer_Tile_ = function(opt_options) {\n  var options = opt_options ? opt_options : {};\n\n  var baseOptions = _ol_obj_.assign({}, options);\n\n  delete baseOptions.preload;\n  delete baseOptions.useInterimTilesOnError;\n  _ol_layer_Layer_.call(this,  /** @type {olx.layer.LayerOptions} */ (baseOptions));\n\n  this.setPreload(options.preload !== undefined ? options.preload : 0);\n  this.setUseInterimTilesOnError(options.useInterimTilesOnError !== undefined ?\n    options.useInterimTilesOnError : true);\n\n  /**\n   * The layer type.\n   * @protected\n   * @type {ol.LayerType}\n   */\n  this.type = _ol_LayerType_.TILE;\n\n};\n\n_ol_.inherits(_ol_layer_Tile_, _ol_layer_Layer_);\n\n\n/**\n * Return the level as number to which we will preload tiles up to.\n * @return {number} The level to preload tiles up to.\n * @observable\n * @api\n */\n_ol_layer_Tile_.prototype.getPreload = function() {\n  return (\n  /** @type {number} */ this.get(_ol_layer_TileProperty_.PRELOAD)\n  );\n};\n\n\n/**\n * Return the associated {@link ol.source.Tile tilesource} of the layer.\n * @function\n * @return {ol.source.Tile} Source.\n * @api\n */\n_ol_layer_Tile_.prototype.getSource;\n\n\n/**\n * Set the level as number to which we will preload tiles up to.\n * @param {number} preload The level to preload tiles up to.\n * @observable\n * @api\n */\n_ol_layer_Tile_.prototype.setPreload = function(preload) {\n  this.set(_ol_layer_TileProperty_.PRELOAD, preload);\n};\n\n\n/**\n * Whether we use interim tiles on error.\n * @return {boolean} Use interim tiles on error.\n * @observable\n * @api\n */\n_ol_layer_Tile_.prototype.getUseInterimTilesOnError = function() {\n  return (\n  /** @type {boolean} */ this.get(_ol_layer_TileProperty_.USE_INTERIM_TILES_ON_ERROR)\n  );\n};\n\n\n/**\n * Set whether we use interim tiles on error.\n * @param {boolean} useInterimTilesOnError Use interim tiles on error.\n * @observable\n * @api\n */\n_ol_layer_Tile_.prototype.setUseInterimTilesOnError = function(useInterimTilesOnError) {\n  this.set(\n      _ol_layer_TileProperty_.USE_INTERIM_TILES_ON_ERROR, useInterimTilesOnError);\n};\nexport default _ol_layer_Tile_;\n","import _ol_math_ from './math.js';\nvar _ol_CenterConstraint_ = {};\n\n\n/**\n * @param {ol.Extent} extent Extent.\n * @return {ol.CenterConstraintType} The constraint.\n */\n_ol_CenterConstraint_.createExtent = function(extent) {\n  return (\n    /**\n     * @param {ol.Coordinate|undefined} center Center.\n     * @return {ol.Coordinate|undefined} Center.\n     */\n    function(center) {\n      if (center) {\n        return [\n          _ol_math_.clamp(center[0], extent[0], extent[2]),\n          _ol_math_.clamp(center[1], extent[1], extent[3])\n        ];\n      } else {\n        return undefined;\n      }\n    }\n  );\n};\n\n\n/**\n * @param {ol.Coordinate|undefined} center Center.\n * @return {ol.Coordinate|undefined} Center.\n */\n_ol_CenterConstraint_.none = function(center) {\n  return center;\n};\nexport default _ol_CenterConstraint_;\n","import _ol_array_ from './array.js';\nimport _ol_math_ from './math.js';\nvar _ol_ResolutionConstraint_ = {};\n\n\n/**\n * @param {Array.<number>} resolutions Resolutions.\n * @return {ol.ResolutionConstraintType} Zoom function.\n */\n_ol_ResolutionConstraint_.createSnapToResolutions = function(resolutions) {\n  return (\n    /**\n     * @param {number|undefined} resolution Resolution.\n     * @param {number} delta Delta.\n     * @param {number} direction Direction.\n     * @return {number|undefined} Resolution.\n     */\n    function(resolution, delta, direction) {\n      if (resolution !== undefined) {\n        var z =\n              _ol_array_.linearFindNearest(resolutions, resolution, direction);\n        z = _ol_math_.clamp(z + delta, 0, resolutions.length - 1);\n        var index = Math.floor(z);\n        if (z != index && index < resolutions.length - 1) {\n          var power = resolutions[index] / resolutions[index + 1];\n          return resolutions[index] / Math.pow(power, z - index);\n        } else {\n          return resolutions[index];\n        }\n      } else {\n        return undefined;\n      }\n    }\n  );\n};\n\n\n/**\n * @param {number} power Power.\n * @param {number} maxResolution Maximum resolution.\n * @param {number=} opt_maxLevel Maximum level.\n * @return {ol.ResolutionConstraintType} Zoom function.\n */\n_ol_ResolutionConstraint_.createSnapToPower = function(power, maxResolution, opt_maxLevel) {\n  return (\n    /**\n     * @param {number|undefined} resolution Resolution.\n     * @param {number} delta Delta.\n     * @param {number} direction Direction.\n     * @return {number|undefined} Resolution.\n     */\n    function(resolution, delta, direction) {\n      if (resolution !== undefined) {\n        var offset = -direction / 2 + 0.5;\n        var oldLevel = Math.floor(\n            Math.log(maxResolution / resolution) / Math.log(power) + offset);\n        var newLevel = Math.max(oldLevel + delta, 0);\n        if (opt_maxLevel !== undefined) {\n          newLevel = Math.min(newLevel, opt_maxLevel);\n        }\n        return maxResolution / Math.pow(power, newLevel);\n      } else {\n        return undefined;\n      }\n    });\n};\nexport default _ol_ResolutionConstraint_;\n","/**\n * @enum {string}\n */\nvar _ol_ViewProperty_ = {\n  CENTER: 'center',\n  RESOLUTION: 'resolution',\n  ROTATION: 'rotation'\n};\n\nexport default _ol_ViewProperty_;\n","import _ol_ from './index.js';\nimport _ol_CenterConstraint_ from './centerconstraint.js';\nimport _ol_Object_ from './object.js';\nimport _ol_ResolutionConstraint_ from './resolutionconstraint.js';\nimport _ol_RotationConstraint_ from './rotationconstraint.js';\nimport _ol_ViewHint_ from './viewhint.js';\nimport _ol_ViewProperty_ from './viewproperty.js';\nimport _ol_array_ from './array.js';\nimport _ol_asserts_ from './asserts.js';\nimport _ol_coordinate_ from './coordinate.js';\nimport _ol_easing_ from './easing.js';\nimport _ol_extent_ from './extent.js';\nimport _ol_geom_GeometryType_ from './geom/geometrytype.js';\nimport _ol_geom_Polygon_ from './geom/polygon.js';\nimport _ol_geom_SimpleGeometry_ from './geom/simplegeometry.js';\nimport _ol_math_ from './math.js';\nimport _ol_obj_ from './obj.js';\nimport _ol_proj_ from './proj.js';\nimport _ol_proj_Units_ from './proj/units.js';\n\n/**\n * @classdesc\n * An ol.View object represents a simple 2D view of the map.\n *\n * This is the object to act upon to change the center, resolution,\n * and rotation of the map.\n *\n * ### The view states\n *\n * An `ol.View` is determined by three states: `center`, `resolution`,\n * and `rotation`. Each state has a corresponding getter and setter, e.g.\n * `getCenter` and `setCenter` for the `center` state.\n *\n * An `ol.View` has a `projection`. The projection determines the\n * coordinate system of the center, and its units determine the units of the\n * resolution (projection units per pixel). The default projection is\n * Spherical Mercator (EPSG:3857).\n *\n * ### The constraints\n *\n * `setCenter`, `setResolution` and `setRotation` can be used to change the\n * states of the view. Any value can be passed to the setters. And the value\n * that is passed to a setter will effectively be the value set in the view,\n * and returned by the corresponding getter.\n *\n * But an `ol.View` object also has a *resolution constraint*, a\n * *rotation constraint* and a *center constraint*.\n *\n * As said above, no constraints are applied when the setters are used to set\n * new states for the view. Applying constraints is done explicitly through\n * the use of the `constrain*` functions (`constrainResolution` and\n * `constrainRotation` and `constrainCenter`).\n *\n * The main users of the constraints are the interactions and the\n * controls. For example, double-clicking on the map changes the view to\n * the \"next\" resolution. And releasing the fingers after pinch-zooming\n * snaps to the closest resolution (with an animation).\n *\n * The *resolution constraint* snaps to specific resolutions. It is\n * determined by the following options: `resolutions`, `maxResolution`,\n * `maxZoom`, and `zoomFactor`. If `resolutions` is set, the other three\n * options are ignored. See documentation for each option for more\n * information.\n *\n * The *rotation constraint* snaps to specific angles. It is determined\n * by the following options: `enableRotation` and `constrainRotation`.\n * By default the rotation value is snapped to zero when approaching the\n * horizontal.\n *\n * The *center constraint* is determined by the `extent` option. By\n * default the center is not constrained at all.\n *\n * @constructor\n * @extends {ol.Object}\n * @param {olx.ViewOptions=} opt_options View options.\n * @api\n */\nvar _ol_View_ = function(opt_options) {\n  _ol_Object_.call(this);\n\n  var options = _ol_obj_.assign({}, opt_options);\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.hints_ = [0, 0];\n\n  /**\n   * @private\n   * @type {Array.<Array.<ol.ViewAnimation>>}\n   */\n  this.animations_ = [];\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.updateAnimationKey_;\n\n  this.updateAnimations_ = this.updateAnimations_.bind(this);\n\n  /**\n   * @private\n   * @const\n   * @type {ol.proj.Projection}\n   */\n  this.projection_ = _ol_proj_.createProjection(options.projection, 'EPSG:3857');\n\n  this.applyOptions_(options);\n};\n\n_ol_.inherits(_ol_View_, _ol_Object_);\n\n\n/**\n * Set up the view with the given options.\n * @param {olx.ViewOptions} options View options.\n */\n_ol_View_.prototype.applyOptions_ = function(options) {\n\n  /**\n   * @type {Object.<string, *>}\n   */\n  var properties = {};\n  properties[_ol_ViewProperty_.CENTER] = options.center !== undefined ?\n    options.center : null;\n\n  var resolutionConstraintInfo = _ol_View_.createResolutionConstraint_(\n      options);\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.maxResolution_ = resolutionConstraintInfo.maxResolution;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.minResolution_ = resolutionConstraintInfo.minResolution;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.zoomFactor_ = resolutionConstraintInfo.zoomFactor;\n\n  /**\n   * @private\n   * @type {Array.<number>|undefined}\n   */\n  this.resolutions_ = options.resolutions;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.minZoom_ = resolutionConstraintInfo.minZoom;\n\n  var centerConstraint = _ol_View_.createCenterConstraint_(options);\n  var resolutionConstraint = resolutionConstraintInfo.constraint;\n  var rotationConstraint = _ol_View_.createRotationConstraint_(options);\n\n  /**\n   * @private\n   * @type {ol.Constraints}\n   */\n  this.constraints_ = {\n    center: centerConstraint,\n    resolution: resolutionConstraint,\n    rotation: rotationConstraint\n  };\n\n  if (options.resolution !== undefined) {\n    properties[_ol_ViewProperty_.RESOLUTION] = options.resolution;\n  } else if (options.zoom !== undefined) {\n    properties[_ol_ViewProperty_.RESOLUTION] = this.constrainResolution(\n        this.maxResolution_, options.zoom - this.minZoom_);\n\n    if (this.resolutions_) { // in case map zoom is out of min/max zoom range\n      properties[_ol_ViewProperty_.RESOLUTION] = _ol_math_.clamp(\n          Number(this.getResolution() || properties[_ol_ViewProperty_.RESOLUTION]),\n          this.minResolution_, this.maxResolution_);\n    }\n  }\n  properties[_ol_ViewProperty_.ROTATION] =\n      options.rotation !== undefined ? options.rotation : 0;\n  this.setProperties(properties);\n\n  /**\n   * @private\n   * @type {olx.ViewOptions}\n   */\n  this.options_ = options;\n\n};\n\n/**\n * Get an updated version of the view options used to construct the view.  The\n * current resolution (or zoom), center, and rotation are applied to any stored\n * options.  The provided options can be uesd to apply new min/max zoom or\n * resolution limits.\n * @param {olx.ViewOptions} newOptions New options to be applied.\n * @return {olx.ViewOptions} New options updated with the current view state.\n */\n_ol_View_.prototype.getUpdatedOptions_ = function(newOptions) {\n  var options = _ol_obj_.assign({}, this.options_);\n\n  // preserve resolution (or zoom)\n  if (options.resolution !== undefined) {\n    options.resolution = this.getResolution();\n  } else {\n    options.zoom = this.getZoom();\n  }\n\n  // preserve center\n  options.center = this.getCenter();\n\n  // preserve rotation\n  options.rotation = this.getRotation();\n\n  return _ol_obj_.assign({}, options, newOptions);\n};\n\n\n/**\n * Animate the view.  The view's center, zoom (or resolution), and rotation\n * can be animated for smooth transitions between view states.  For example,\n * to animate the view to a new zoom level:\n *\n *     view.animate({zoom: view.getZoom() + 1});\n *\n * By default, the animation lasts one second and uses in-and-out easing.  You\n * can customize this behavior by including `duration` (in milliseconds) and\n * `easing` options (see {@link ol.easing}).\n *\n * To chain together multiple animations, call the method with multiple\n * animation objects.  For example, to first zoom and then pan:\n *\n *     view.animate({zoom: 10}, {center: [0, 0]});\n *\n * If you provide a function as the last argument to the animate method, it\n * will get called at the end of an animation series.  The callback will be\n * called with `true` if the animation series completed on its own or `false`\n * if it was cancelled.\n *\n * Animations are cancelled by user interactions (e.g. dragging the map) or by\n * calling `view.setCenter()`, `view.setResolution()`, or `view.setRotation()`\n * (or another method that calls one of these).\n *\n * @param {...(olx.AnimationOptions|function(boolean))} var_args Animation\n *     options.  Multiple animations can be run in series by passing multiple\n *     options objects.  To run multiple animations in parallel, call the method\n *     multiple times.  An optional callback can be provided as a final\n *     argument.  The callback will be called with a boolean indicating whether\n *     the animation completed without being cancelled.\n * @api\n */\n_ol_View_.prototype.animate = function(var_args) {\n  var animationCount = arguments.length;\n  var callback;\n  if (animationCount > 1 && typeof arguments[animationCount - 1] === 'function') {\n    callback = arguments[animationCount - 1];\n    --animationCount;\n  }\n  if (!this.isDef()) {\n    // if view properties are not yet set, shortcut to the final state\n    var state = arguments[animationCount - 1];\n    if (state.center) {\n      this.setCenter(state.center);\n    }\n    if (state.zoom !== undefined) {\n      this.setZoom(state.zoom);\n    }\n    if (state.rotation !== undefined) {\n      this.setRotation(state.rotation);\n    }\n    if (callback) {\n      callback(true);\n    }\n    return;\n  }\n  var start = Date.now();\n  var center = this.getCenter().slice();\n  var resolution = this.getResolution();\n  var rotation = this.getRotation();\n  var series = [];\n  for (var i = 0; i < animationCount; ++i) {\n    var options = /** @type {olx.AnimationOptions} */ (arguments[i]);\n\n    var animation = /** @type {ol.ViewAnimation} */ ({\n      start: start,\n      complete: false,\n      anchor: options.anchor,\n      duration: options.duration !== undefined ? options.duration : 1000,\n      easing: options.easing || _ol_easing_.inAndOut\n    });\n\n    if (options.center) {\n      animation.sourceCenter = center;\n      animation.targetCenter = options.center;\n      center = animation.targetCenter;\n    }\n\n    if (options.zoom !== undefined) {\n      animation.sourceResolution = resolution;\n      animation.targetResolution = this.constrainResolution(\n          this.maxResolution_, options.zoom - this.minZoom_, 0);\n      resolution = animation.targetResolution;\n    } else if (options.resolution) {\n      animation.sourceResolution = resolution;\n      animation.targetResolution = options.resolution;\n      resolution = animation.targetResolution;\n    }\n\n    if (options.rotation !== undefined) {\n      animation.sourceRotation = rotation;\n      var delta = _ol_math_.modulo(options.rotation - rotation + Math.PI, 2 * Math.PI) - Math.PI;\n      animation.targetRotation = rotation + delta;\n      rotation = animation.targetRotation;\n    }\n\n    animation.callback = callback;\n\n    // check if animation is a no-op\n    if (_ol_View_.isNoopAnimation(animation)) {\n      animation.complete = true;\n      // we still push it onto the series for callback handling\n    } else {\n      start += animation.duration;\n    }\n    series.push(animation);\n  }\n  this.animations_.push(series);\n  this.setHint(_ol_ViewHint_.ANIMATING, 1);\n  this.updateAnimations_();\n};\n\n\n/**\n * Determine if the view is being animated.\n * @return {boolean} The view is being animated.\n * @api\n */\n_ol_View_.prototype.getAnimating = function() {\n  return this.hints_[_ol_ViewHint_.ANIMATING] > 0;\n};\n\n\n/**\n * Determine if the user is interacting with the view, such as panning or zooming.\n * @return {boolean} The view is being interacted with.\n * @api\n */\n_ol_View_.prototype.getInteracting = function() {\n  return this.hints_[_ol_ViewHint_.INTERACTING] > 0;\n};\n\n\n/**\n * Cancel any ongoing animations.\n * @api\n */\n_ol_View_.prototype.cancelAnimations = function() {\n  this.setHint(_ol_ViewHint_.ANIMATING, -this.hints_[_ol_ViewHint_.ANIMATING]);\n  for (var i = 0, ii = this.animations_.length; i < ii; ++i) {\n    var series = this.animations_[i];\n    if (series[0].callback) {\n      series[0].callback(false);\n    }\n  }\n  this.animations_.length = 0;\n};\n\n/**\n * Update all animations.\n */\n_ol_View_.prototype.updateAnimations_ = function() {\n  if (this.updateAnimationKey_ !== undefined) {\n    cancelAnimationFrame(this.updateAnimationKey_);\n    this.updateAnimationKey_ = undefined;\n  }\n  if (!this.getAnimating()) {\n    return;\n  }\n  var now = Date.now();\n  var more = false;\n  for (var i = this.animations_.length - 1; i >= 0; --i) {\n    var series = this.animations_[i];\n    var seriesComplete = true;\n    for (var j = 0, jj = series.length; j < jj; ++j) {\n      var animation = series[j];\n      if (animation.complete) {\n        continue;\n      }\n      var elapsed = now - animation.start;\n      var fraction = animation.duration > 0 ? elapsed / animation.duration : 1;\n      if (fraction >= 1) {\n        animation.complete = true;\n        fraction = 1;\n      } else {\n        seriesComplete = false;\n      }\n      var progress = animation.easing(fraction);\n      if (animation.sourceCenter) {\n        var x0 = animation.sourceCenter[0];\n        var y0 = animation.sourceCenter[1];\n        var x1 = animation.targetCenter[0];\n        var y1 = animation.targetCenter[1];\n        var x = x0 + progress * (x1 - x0);\n        var y = y0 + progress * (y1 - y0);\n        this.set(_ol_ViewProperty_.CENTER, [x, y]);\n      }\n      if (animation.sourceResolution && animation.targetResolution) {\n        var resolution = progress === 1 ?\n          animation.targetResolution :\n          animation.sourceResolution + progress * (animation.targetResolution - animation.sourceResolution);\n        if (animation.anchor) {\n          this.set(_ol_ViewProperty_.CENTER,\n              this.calculateCenterZoom(resolution, animation.anchor));\n        }\n        this.set(_ol_ViewProperty_.RESOLUTION, resolution);\n      }\n      if (animation.sourceRotation !== undefined && animation.targetRotation !== undefined) {\n        var rotation = progress === 1 ?\n          _ol_math_.modulo(animation.targetRotation + Math.PI, 2 * Math.PI) - Math.PI :\n          animation.sourceRotation + progress * (animation.targetRotation - animation.sourceRotation);\n        if (animation.anchor) {\n          this.set(_ol_ViewProperty_.CENTER,\n              this.calculateCenterRotate(rotation, animation.anchor));\n        }\n        this.set(_ol_ViewProperty_.ROTATION, rotation);\n      }\n      more = true;\n      if (!animation.complete) {\n        break;\n      }\n    }\n    if (seriesComplete) {\n      this.animations_[i] = null;\n      this.setHint(_ol_ViewHint_.ANIMATING, -1);\n      var callback = series[0].callback;\n      if (callback) {\n        callback(true);\n      }\n    }\n  }\n  // prune completed series\n  this.animations_ = this.animations_.filter(Boolean);\n  if (more && this.updateAnimationKey_ === undefined) {\n    this.updateAnimationKey_ = requestAnimationFrame(this.updateAnimations_);\n  }\n};\n\n/**\n * @param {number} rotation Target rotation.\n * @param {ol.Coordinate} anchor Rotation anchor.\n * @return {ol.Coordinate|undefined} Center for rotation and anchor.\n */\n_ol_View_.prototype.calculateCenterRotate = function(rotation, anchor) {\n  var center;\n  var currentCenter = this.getCenter();\n  if (currentCenter !== undefined) {\n    center = [currentCenter[0] - anchor[0], currentCenter[1] - anchor[1]];\n    _ol_coordinate_.rotate(center, rotation - this.getRotation());\n    _ol_coordinate_.add(center, anchor);\n  }\n  return center;\n};\n\n\n/**\n * @param {number} resolution Target resolution.\n * @param {ol.Coordinate} anchor Zoom anchor.\n * @return {ol.Coordinate|undefined} Center for resolution and anchor.\n */\n_ol_View_.prototype.calculateCenterZoom = function(resolution, anchor) {\n  var center;\n  var currentCenter = this.getCenter();\n  var currentResolution = this.getResolution();\n  if (currentCenter !== undefined && currentResolution !== undefined) {\n    var x = anchor[0] -\n        resolution * (anchor[0] - currentCenter[0]) / currentResolution;\n    var y = anchor[1] -\n        resolution * (anchor[1] - currentCenter[1]) / currentResolution;\n    center = [x, y];\n  }\n  return center;\n};\n\n\n/**\n * @private\n * @return {ol.Size} Viewport size or `[100, 100]` when no viewport is found.\n */\n_ol_View_.prototype.getSizeFromViewport_ = function() {\n  var size = [100, 100];\n  var selector = '.ol-viewport[data-view=\"' + _ol_.getUid(this) + '\"]';\n  var element = document.querySelector(selector);\n  if (element) {\n    var metrics = getComputedStyle(element);\n    size[0] = parseInt(metrics.width, 10);\n    size[1] = parseInt(metrics.height, 10);\n  }\n  return size;\n};\n\n\n/**\n * Get the constrained center of this view.\n * @param {ol.Coordinate|undefined} center Center.\n * @return {ol.Coordinate|undefined} Constrained center.\n * @api\n */\n_ol_View_.prototype.constrainCenter = function(center) {\n  return this.constraints_.center(center);\n};\n\n\n/**\n * Get the constrained resolution of this view.\n * @param {number|undefined} resolution Resolution.\n * @param {number=} opt_delta Delta. Default is `0`.\n * @param {number=} opt_direction Direction. Default is `0`.\n * @return {number|undefined} Constrained resolution.\n * @api\n */\n_ol_View_.prototype.constrainResolution = function(\n    resolution, opt_delta, opt_direction) {\n  var delta = opt_delta || 0;\n  var direction = opt_direction || 0;\n  return this.constraints_.resolution(resolution, delta, direction);\n};\n\n\n/**\n * Get the constrained rotation of this view.\n * @param {number|undefined} rotation Rotation.\n * @param {number=} opt_delta Delta. Default is `0`.\n * @return {number|undefined} Constrained rotation.\n * @api\n */\n_ol_View_.prototype.constrainRotation = function(rotation, opt_delta) {\n  var delta = opt_delta || 0;\n  return this.constraints_.rotation(rotation, delta);\n};\n\n\n/**\n * Get the view center.\n * @return {ol.Coordinate|undefined} The center of the view.\n * @observable\n * @api\n */\n_ol_View_.prototype.getCenter = function() {\n  return (\n    /** @type {ol.Coordinate|undefined} */ this.get(_ol_ViewProperty_.CENTER)\n  );\n};\n\n\n/**\n * @return {ol.Constraints} Constraints.\n */\n_ol_View_.prototype.getConstraints = function() {\n  return this.constraints_;\n};\n\n\n/**\n * @param {Array.<number>=} opt_hints Destination array.\n * @return {Array.<number>} Hint.\n */\n_ol_View_.prototype.getHints = function(opt_hints) {\n  if (opt_hints !== undefined) {\n    opt_hints[0] = this.hints_[0];\n    opt_hints[1] = this.hints_[1];\n    return opt_hints;\n  } else {\n    return this.hints_.slice();\n  }\n};\n\n\n/**\n * Calculate the extent for the current view state and the passed size.\n * The size is the pixel dimensions of the box into which the calculated extent\n * should fit. In most cases you want to get the extent of the entire map,\n * that is `map.getSize()`.\n * @param {ol.Size=} opt_size Box pixel size. If not provided, the size of the\n * first map that uses this view will be used.\n * @return {ol.Extent} Extent.\n * @api\n */\n_ol_View_.prototype.calculateExtent = function(opt_size) {\n  var size = opt_size || this.getSizeFromViewport_();\n  var center = /** @type {!ol.Coordinate} */ (this.getCenter());\n  _ol_asserts_.assert(center, 1); // The view center is not defined\n  var resolution = /** @type {!number} */ (this.getResolution());\n  _ol_asserts_.assert(resolution !== undefined, 2); // The view resolution is not defined\n  var rotation = /** @type {!number} */ (this.getRotation());\n  _ol_asserts_.assert(rotation !== undefined, 3); // The view rotation is not defined\n\n  return _ol_extent_.getForViewAndSize(center, resolution, rotation, size);\n};\n\n\n/**\n * Get the maximum resolution of the view.\n * @return {number} The maximum resolution of the view.\n * @api\n */\n_ol_View_.prototype.getMaxResolution = function() {\n  return this.maxResolution_;\n};\n\n\n/**\n * Get the minimum resolution of the view.\n * @return {number} The minimum resolution of the view.\n * @api\n */\n_ol_View_.prototype.getMinResolution = function() {\n  return this.minResolution_;\n};\n\n\n/**\n * Get the maximum zoom level for the view.\n * @return {number} The maximum zoom level.\n * @api\n */\n_ol_View_.prototype.getMaxZoom = function() {\n  return /** @type {number} */ (this.getZoomForResolution(this.minResolution_));\n};\n\n\n/**\n * Set a new maximum zoom level for the view.\n * @param {number} zoom The maximum zoom level.\n * @api\n */\n_ol_View_.prototype.setMaxZoom = function(zoom) {\n  this.applyOptions_(this.getUpdatedOptions_({maxZoom: zoom}));\n};\n\n\n/**\n * Get the minimum zoom level for the view.\n * @return {number} The minimum zoom level.\n * @api\n */\n_ol_View_.prototype.getMinZoom = function() {\n  return /** @type {number} */ (this.getZoomForResolution(this.maxResolution_));\n};\n\n\n/**\n * Set a new minimum zoom level for the view.\n * @param {number} zoom The minimum zoom level.\n * @api\n */\n_ol_View_.prototype.setMinZoom = function(zoom) {\n  this.applyOptions_(this.getUpdatedOptions_({minZoom: zoom}));\n};\n\n\n/**\n * Get the view projection.\n * @return {ol.proj.Projection} The projection of the view.\n * @api\n */\n_ol_View_.prototype.getProjection = function() {\n  return this.projection_;\n};\n\n\n/**\n * Get the view resolution.\n * @return {number|undefined} The resolution of the view.\n * @observable\n * @api\n */\n_ol_View_.prototype.getResolution = function() {\n  return (\n    /** @type {number|undefined} */ this.get(_ol_ViewProperty_.RESOLUTION)\n  );\n};\n\n\n/**\n * Get the resolutions for the view. This returns the array of resolutions\n * passed to the constructor of the {ol.View}, or undefined if none were given.\n * @return {Array.<number>|undefined} The resolutions of the view.\n * @api\n */\n_ol_View_.prototype.getResolutions = function() {\n  return this.resolutions_;\n};\n\n\n/**\n * Get the resolution for a provided extent (in map units) and size (in pixels).\n * @param {ol.Extent} extent Extent.\n * @param {ol.Size=} opt_size Box pixel size.\n * @return {number} The resolution at which the provided extent will render at\n *     the given size.\n * @api\n */\n_ol_View_.prototype.getResolutionForExtent = function(extent, opt_size) {\n  var size = opt_size || this.getSizeFromViewport_();\n  var xResolution = _ol_extent_.getWidth(extent) / size[0];\n  var yResolution = _ol_extent_.getHeight(extent) / size[1];\n  return Math.max(xResolution, yResolution);\n};\n\n\n/**\n * Return a function that returns a value between 0 and 1 for a\n * resolution. Exponential scaling is assumed.\n * @param {number=} opt_power Power.\n * @return {function(number): number} Resolution for value function.\n */\n_ol_View_.prototype.getResolutionForValueFunction = function(opt_power) {\n  var power = opt_power || 2;\n  var maxResolution = this.maxResolution_;\n  var minResolution = this.minResolution_;\n  var max = Math.log(maxResolution / minResolution) / Math.log(power);\n  return (\n    /**\n     * @param {number} value Value.\n     * @return {number} Resolution.\n     */\n    function(value) {\n      var resolution = maxResolution / Math.pow(power, value * max);\n      return resolution;\n    });\n};\n\n\n/**\n * Get the view rotation.\n * @return {number} The rotation of the view in radians.\n * @observable\n * @api\n */\n_ol_View_.prototype.getRotation = function() {\n  return (\n    /** @type {number} */ this.get(_ol_ViewProperty_.ROTATION)\n  );\n};\n\n\n/**\n * Return a function that returns a resolution for a value between\n * 0 and 1. Exponential scaling is assumed.\n * @param {number=} opt_power Power.\n * @return {function(number): number} Value for resolution function.\n */\n_ol_View_.prototype.getValueForResolutionFunction = function(opt_power) {\n  var power = opt_power || 2;\n  var maxResolution = this.maxResolution_;\n  var minResolution = this.minResolution_;\n  var max = Math.log(maxResolution / minResolution) / Math.log(power);\n  return (\n    /**\n     * @param {number} resolution Resolution.\n     * @return {number} Value.\n     */\n    function(resolution) {\n      var value =\n            (Math.log(maxResolution / resolution) / Math.log(power)) / max;\n      return value;\n    });\n};\n\n\n/**\n * @return {olx.ViewState} View state.\n */\n_ol_View_.prototype.getState = function() {\n  var center = /** @type {ol.Coordinate} */ (this.getCenter());\n  var projection = this.getProjection();\n  var resolution = /** @type {number} */ (this.getResolution());\n  var rotation = this.getRotation();\n  return /** @type {olx.ViewState} */ ({\n    center: center.slice(),\n    projection: projection !== undefined ? projection : null,\n    resolution: resolution,\n    rotation: rotation,\n    zoom: this.getZoom()\n  });\n};\n\n\n/**\n * Get the current zoom level.  If you configured your view with a resolutions\n * array (this is rare), this method may return non-integer zoom levels (so\n * the zoom level is not safe to use as an index into a resolutions array).\n * @return {number|undefined} Zoom.\n * @api\n */\n_ol_View_.prototype.getZoom = function() {\n  var zoom;\n  var resolution = this.getResolution();\n  if (resolution !== undefined) {\n    zoom = this.getZoomForResolution(resolution);\n  }\n  return zoom;\n};\n\n\n/**\n * Get the zoom level for a resolution.\n * @param {number} resolution The resolution.\n * @return {number|undefined} The zoom level for the provided resolution.\n * @api\n */\n_ol_View_.prototype.getZoomForResolution = function(resolution) {\n  var offset = this.minZoom_ || 0;\n  var max, zoomFactor;\n  if (this.resolutions_) {\n    var nearest = _ol_array_.linearFindNearest(this.resolutions_, resolution, 1);\n    offset = nearest;\n    max = this.resolutions_[nearest];\n    if (nearest == this.resolutions_.length - 1) {\n      zoomFactor = 2;\n    } else {\n      zoomFactor = max / this.resolutions_[nearest + 1];\n    }\n  } else {\n    max = this.maxResolution_;\n    zoomFactor = this.zoomFactor_;\n  }\n  return offset + Math.log(max / resolution) / Math.log(zoomFactor);\n};\n\n\n/**\n * Get the resolution for a zoom level.\n * @param {number} zoom Zoom level.\n * @return {number} The view resolution for the provided zoom level.\n * @api\n */\n_ol_View_.prototype.getResolutionForZoom = function(zoom) {\n  return /** @type {number} */ (this.constrainResolution(\n      this.maxResolution_, zoom - this.minZoom_, 0));\n};\n\n\n/**\n * Fit the given geometry or extent based on the given map size and border.\n * The size is pixel dimensions of the box to fit the extent into.\n * In most cases you will want to use the map size, that is `map.getSize()`.\n * Takes care of the map angle.\n * @param {ol.geom.SimpleGeometry|ol.Extent} geometryOrExtent The geometry or\n *     extent to fit the view to.\n * @param {olx.view.FitOptions=} opt_options Options.\n * @api\n */\n_ol_View_.prototype.fit = function(geometryOrExtent, opt_options) {\n  var options = opt_options || {};\n  var size = options.size;\n  if (!size) {\n    size = this.getSizeFromViewport_();\n  }\n  /** @type {ol.geom.SimpleGeometry} */\n  var geometry;\n  if (!(geometryOrExtent instanceof _ol_geom_SimpleGeometry_)) {\n    _ol_asserts_.assert(Array.isArray(geometryOrExtent),\n        24); // Invalid extent or geometry provided as `geometry`\n    _ol_asserts_.assert(!_ol_extent_.isEmpty(geometryOrExtent),\n        25); // Cannot fit empty extent provided as `geometry`\n    geometry = _ol_geom_Polygon_.fromExtent(geometryOrExtent);\n  } else if (geometryOrExtent.getType() === _ol_geom_GeometryType_.CIRCLE) {\n    geometryOrExtent = geometryOrExtent.getExtent();\n    geometry = _ol_geom_Polygon_.fromExtent(geometryOrExtent);\n    geometry.rotate(this.getRotation(), _ol_extent_.getCenter(geometryOrExtent));\n  } else {\n    geometry = geometryOrExtent;\n  }\n\n  var padding = options.padding !== undefined ? options.padding : [0, 0, 0, 0];\n  var constrainResolution = options.constrainResolution !== undefined ?\n    options.constrainResolution : true;\n  var nearest = options.nearest !== undefined ? options.nearest : false;\n  var minResolution;\n  if (options.minResolution !== undefined) {\n    minResolution = options.minResolution;\n  } else if (options.maxZoom !== undefined) {\n    minResolution = this.constrainResolution(\n        this.maxResolution_, options.maxZoom - this.minZoom_, 0);\n  } else {\n    minResolution = 0;\n  }\n  var coords = geometry.getFlatCoordinates();\n\n  // calculate rotated extent\n  var rotation = this.getRotation();\n  var cosAngle = Math.cos(-rotation);\n  var sinAngle = Math.sin(-rotation);\n  var minRotX = +Infinity;\n  var minRotY = +Infinity;\n  var maxRotX = -Infinity;\n  var maxRotY = -Infinity;\n  var stride = geometry.getStride();\n  for (var i = 0, ii = coords.length; i < ii; i += stride) {\n    var rotX = coords[i] * cosAngle - coords[i + 1] * sinAngle;\n    var rotY = coords[i] * sinAngle + coords[i + 1] * cosAngle;\n    minRotX = Math.min(minRotX, rotX);\n    minRotY = Math.min(minRotY, rotY);\n    maxRotX = Math.max(maxRotX, rotX);\n    maxRotY = Math.max(maxRotY, rotY);\n  }\n\n  // calculate resolution\n  var resolution = this.getResolutionForExtent(\n      [minRotX, minRotY, maxRotX, maxRotY],\n      [size[0] - padding[1] - padding[3], size[1] - padding[0] - padding[2]]);\n  resolution = isNaN(resolution) ? minResolution :\n    Math.max(resolution, minResolution);\n  if (constrainResolution) {\n    var constrainedResolution = this.constrainResolution(resolution, 0, 0);\n    if (!nearest && constrainedResolution < resolution) {\n      constrainedResolution = this.constrainResolution(\n          constrainedResolution, -1, 0);\n    }\n    resolution = constrainedResolution;\n  }\n\n  // calculate center\n  sinAngle = -sinAngle; // go back to original rotation\n  var centerRotX = (minRotX + maxRotX) / 2;\n  var centerRotY = (minRotY + maxRotY) / 2;\n  centerRotX += (padding[1] - padding[3]) / 2 * resolution;\n  centerRotY += (padding[0] - padding[2]) / 2 * resolution;\n  var centerX = centerRotX * cosAngle - centerRotY * sinAngle;\n  var centerY = centerRotY * cosAngle + centerRotX * sinAngle;\n  var center = [centerX, centerY];\n  var callback = options.callback ? options.callback : _ol_.nullFunction;\n\n  if (options.duration !== undefined) {\n    this.animate({\n      resolution: resolution,\n      center: center,\n      duration: options.duration,\n      easing: options.easing\n    }, callback);\n  } else {\n    this.setResolution(resolution);\n    this.setCenter(center);\n    setTimeout(callback.bind(undefined, true), 0);\n  }\n};\n\n\n/**\n * Center on coordinate and view position.\n * @param {ol.Coordinate} coordinate Coordinate.\n * @param {ol.Size} size Box pixel size.\n * @param {ol.Pixel} position Position on the view to center on.\n * @api\n */\n_ol_View_.prototype.centerOn = function(coordinate, size, position) {\n  // calculate rotated position\n  var rotation = this.getRotation();\n  var cosAngle = Math.cos(-rotation);\n  var sinAngle = Math.sin(-rotation);\n  var rotX = coordinate[0] * cosAngle - coordinate[1] * sinAngle;\n  var rotY = coordinate[1] * cosAngle + coordinate[0] * sinAngle;\n  var resolution = this.getResolution();\n  rotX += (size[0] / 2 - position[0]) * resolution;\n  rotY += (position[1] - size[1] / 2) * resolution;\n\n  // go back to original angle\n  sinAngle = -sinAngle; // go back to original rotation\n  var centerX = rotX * cosAngle - rotY * sinAngle;\n  var centerY = rotY * cosAngle + rotX * sinAngle;\n\n  this.setCenter([centerX, centerY]);\n};\n\n\n/**\n * @return {boolean} Is defined.\n */\n_ol_View_.prototype.isDef = function() {\n  return !!this.getCenter() && this.getResolution() !== undefined;\n};\n\n\n/**\n * Rotate the view around a given coordinate.\n * @param {number} rotation New rotation value for the view.\n * @param {ol.Coordinate=} opt_anchor The rotation center.\n * @api\n */\n_ol_View_.prototype.rotate = function(rotation, opt_anchor) {\n  if (opt_anchor !== undefined) {\n    var center = this.calculateCenterRotate(rotation, opt_anchor);\n    this.setCenter(center);\n  }\n  this.setRotation(rotation);\n};\n\n\n/**\n * Set the center of the current view.\n * @param {ol.Coordinate|undefined} center The center of the view.\n * @observable\n * @api\n */\n_ol_View_.prototype.setCenter = function(center) {\n  this.set(_ol_ViewProperty_.CENTER, center);\n  if (this.getAnimating()) {\n    this.cancelAnimations();\n  }\n};\n\n\n/**\n * @param {ol.ViewHint} hint Hint.\n * @param {number} delta Delta.\n * @return {number} New value.\n */\n_ol_View_.prototype.setHint = function(hint, delta) {\n  this.hints_[hint] += delta;\n  this.changed();\n  return this.hints_[hint];\n};\n\n\n/**\n * Set the resolution for this view.\n * @param {number|undefined} resolution The resolution of the view.\n * @observable\n * @api\n */\n_ol_View_.prototype.setResolution = function(resolution) {\n  this.set(_ol_ViewProperty_.RESOLUTION, resolution);\n  if (this.getAnimating()) {\n    this.cancelAnimations();\n  }\n};\n\n\n/**\n * Set the rotation for this view.\n * @param {number} rotation The rotation of the view in radians.\n * @observable\n * @api\n */\n_ol_View_.prototype.setRotation = function(rotation) {\n  this.set(_ol_ViewProperty_.ROTATION, rotation);\n  if (this.getAnimating()) {\n    this.cancelAnimations();\n  }\n};\n\n\n/**\n * Zoom to a specific zoom level.\n * @param {number} zoom Zoom level.\n * @api\n */\n_ol_View_.prototype.setZoom = function(zoom) {\n  this.setResolution(this.getResolutionForZoom(zoom));\n};\n\n\n/**\n * @param {olx.ViewOptions} options View options.\n * @private\n * @return {ol.CenterConstraintType} The constraint.\n */\n_ol_View_.createCenterConstraint_ = function(options) {\n  if (options.extent !== undefined) {\n    return _ol_CenterConstraint_.createExtent(options.extent);\n  } else {\n    return _ol_CenterConstraint_.none;\n  }\n};\n\n\n/**\n * @private\n * @param {olx.ViewOptions} options View options.\n * @return {{constraint: ol.ResolutionConstraintType, maxResolution: number,\n *     minResolution: number, zoomFactor: number}} The constraint.\n */\n_ol_View_.createResolutionConstraint_ = function(options) {\n  var resolutionConstraint;\n  var maxResolution;\n  var minResolution;\n\n  // TODO: move these to be ol constants\n  // see https://github.com/openlayers/openlayers/issues/2076\n  var defaultMaxZoom = 28;\n  var defaultZoomFactor = 2;\n\n  var minZoom = options.minZoom !== undefined ?\n    options.minZoom : _ol_.DEFAULT_MIN_ZOOM;\n\n  var maxZoom = options.maxZoom !== undefined ?\n    options.maxZoom : defaultMaxZoom;\n\n  var zoomFactor = options.zoomFactor !== undefined ?\n    options.zoomFactor : defaultZoomFactor;\n\n  if (options.resolutions !== undefined) {\n    var resolutions = options.resolutions;\n    maxResolution = resolutions[minZoom];\n    minResolution = resolutions[maxZoom] !== undefined ?\n      resolutions[maxZoom] : resolutions[resolutions.length - 1];\n    resolutionConstraint = _ol_ResolutionConstraint_.createSnapToResolutions(\n        resolutions);\n  } else {\n    // calculate the default min and max resolution\n    var projection = _ol_proj_.createProjection(options.projection, 'EPSG:3857');\n    var extent = projection.getExtent();\n    var size = !extent ?\n      // use an extent that can fit the whole world if need be\n      360 * _ol_proj_.METERS_PER_UNIT[_ol_proj_Units_.DEGREES] /\n            projection.getMetersPerUnit() :\n      Math.max(_ol_extent_.getWidth(extent), _ol_extent_.getHeight(extent));\n\n    var defaultMaxResolution = size / _ol_.DEFAULT_TILE_SIZE / Math.pow(\n        defaultZoomFactor, _ol_.DEFAULT_MIN_ZOOM);\n\n    var defaultMinResolution = defaultMaxResolution / Math.pow(\n        defaultZoomFactor, defaultMaxZoom - _ol_.DEFAULT_MIN_ZOOM);\n\n    // user provided maxResolution takes precedence\n    maxResolution = options.maxResolution;\n    if (maxResolution !== undefined) {\n      minZoom = 0;\n    } else {\n      maxResolution = defaultMaxResolution / Math.pow(zoomFactor, minZoom);\n    }\n\n    // user provided minResolution takes precedence\n    minResolution = options.minResolution;\n    if (minResolution === undefined) {\n      if (options.maxZoom !== undefined) {\n        if (options.maxResolution !== undefined) {\n          minResolution = maxResolution / Math.pow(zoomFactor, maxZoom);\n        } else {\n          minResolution = defaultMaxResolution / Math.pow(zoomFactor, maxZoom);\n        }\n      } else {\n        minResolution = defaultMinResolution;\n      }\n    }\n\n    // given discrete zoom levels, minResolution may be different than provided\n    maxZoom = minZoom + Math.floor(\n        Math.log(maxResolution / minResolution) / Math.log(zoomFactor));\n    minResolution = maxResolution / Math.pow(zoomFactor, maxZoom - minZoom);\n\n    resolutionConstraint = _ol_ResolutionConstraint_.createSnapToPower(\n        zoomFactor, maxResolution, maxZoom - minZoom);\n  }\n  return {constraint: resolutionConstraint, maxResolution: maxResolution,\n    minResolution: minResolution, minZoom: minZoom, zoomFactor: zoomFactor};\n};\n\n\n/**\n * @private\n * @param {olx.ViewOptions} options View options.\n * @return {ol.RotationConstraintType} Rotation constraint.\n */\n_ol_View_.createRotationConstraint_ = function(options) {\n  var enableRotation = options.enableRotation !== undefined ?\n    options.enableRotation : true;\n  if (enableRotation) {\n    var constrainRotation = options.constrainRotation;\n    if (constrainRotation === undefined || constrainRotation === true) {\n      return _ol_RotationConstraint_.createSnapToZero();\n    } else if (constrainRotation === false) {\n      return _ol_RotationConstraint_.none;\n    } else if (typeof constrainRotation === 'number') {\n      return _ol_RotationConstraint_.createSnapToN(constrainRotation);\n    } else {\n      return _ol_RotationConstraint_.none;\n    }\n  } else {\n    return _ol_RotationConstraint_.disable;\n  }\n};\n\n\n/**\n * Determine if an animation involves no view change.\n * @param {ol.ViewAnimation} animation The animation.\n * @return {boolean} The animation involves no view change.\n */\n_ol_View_.isNoopAnimation = function(animation) {\n  if (animation.sourceCenter && animation.targetCenter) {\n    if (!_ol_coordinate_.equals(animation.sourceCenter, animation.targetCenter)) {\n      return false;\n    }\n  }\n  if (animation.sourceResolution !== animation.targetResolution) {\n    return false;\n  }\n  if (animation.sourceRotation !== animation.targetRotation) {\n    return false;\n  }\n  return true;\n};\nexport default _ol_View_;\n","// FIXME handle date line wrap\n\nimport _ol_ from '../index.js';\nimport _ol_array_ from '../array.js';\nimport _ol_control_Control_ from '../control/control.js';\nimport _ol_css_ from '../css.js';\nimport _ol_dom_ from '../dom.js';\nimport _ol_events_ from '../events.js';\nimport _ol_events_EventType_ from '../events/eventtype.js';\nimport _ol_layer_Layer_ from '../layer/layer.js';\nimport _ol_obj_ from '../obj.js';\n\n/**\n * @classdesc\n * Control to show all the attributions associated with the layer sources\n * in the map. This control is one of the default controls included in maps.\n * By default it will show in the bottom right portion of the map, but this can\n * be changed by using a css selector for `.ol-attribution`.\n *\n * @constructor\n * @extends {ol.control.Control}\n * @param {olx.control.AttributionOptions=} opt_options Attribution options.\n * @api\n */\nvar _ol_control_Attribution_ = function(opt_options) {\n\n  var options = opt_options ? opt_options : {};\n\n  /**\n   * @private\n   * @type {Element}\n   */\n  this.ulElement_ = document.createElement('UL');\n\n  /**\n   * @private\n   * @type {Element}\n   */\n  this.logoLi_ = document.createElement('LI');\n\n  this.ulElement_.appendChild(this.logoLi_);\n  this.logoLi_.style.display = 'none';\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.collapsed_ = options.collapsed !== undefined ? options.collapsed : true;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.collapsible_ = options.collapsible !== undefined ?\n    options.collapsible : true;\n\n  if (!this.collapsible_) {\n    this.collapsed_ = false;\n  }\n\n  var className = options.className !== undefined ? options.className : 'ol-attribution';\n\n  var tipLabel = options.tipLabel !== undefined ? options.tipLabel : 'Attributions';\n\n  var collapseLabel = options.collapseLabel !== undefined ? options.collapseLabel : '\\u00BB';\n\n  if (typeof collapseLabel === 'string') {\n    /**\n     * @private\n     * @type {Node}\n     */\n    this.collapseLabel_ = document.createElement('span');\n    this.collapseLabel_.textContent = collapseLabel;\n  } else {\n    this.collapseLabel_ = collapseLabel;\n  }\n\n  var label = options.label !== undefined ? options.label : 'i';\n\n  if (typeof label === 'string') {\n    /**\n     * @private\n     * @type {Node}\n     */\n    this.label_ = document.createElement('span');\n    this.label_.textContent = label;\n  } else {\n    this.label_ = label;\n  }\n\n\n  var activeLabel = (this.collapsible_ && !this.collapsed_) ?\n    this.collapseLabel_ : this.label_;\n  var button = document.createElement('button');\n  button.setAttribute('type', 'button');\n  button.title = tipLabel;\n  button.appendChild(activeLabel);\n\n  _ol_events_.listen(button, _ol_events_EventType_.CLICK, this.handleClick_, this);\n\n  var cssClasses = className + ' ' + _ol_css_.CLASS_UNSELECTABLE + ' ' +\n      _ol_css_.CLASS_CONTROL +\n      (this.collapsed_ && this.collapsible_ ? ' ol-collapsed' : '') +\n      (this.collapsible_ ? '' : ' ol-uncollapsible');\n  var element = document.createElement('div');\n  element.className = cssClasses;\n  element.appendChild(this.ulElement_);\n  element.appendChild(button);\n\n  var render = options.render ? options.render : _ol_control_Attribution_.render;\n\n  _ol_control_Control_.call(this, {\n    element: element,\n    render: render,\n    target: options.target\n  });\n\n  /**\n   * A list of currently rendered resolutions.\n   * @type {Array.<string>}\n   * @private\n   */\n  this.renderedAttributions_ = [];\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.renderedVisible_ = true;\n\n  /**\n   * @private\n   * @type {Object.<string, Element>}\n   */\n  this.logoElements_ = {};\n\n};\n\n_ol_.inherits(_ol_control_Attribution_, _ol_control_Control_);\n\n\n/**\n * Get a list of visible attributions.\n * @param {olx.FrameState} frameState Frame state.\n * @return {Array.<string>} Attributions.\n * @private\n */\n_ol_control_Attribution_.prototype.getSourceAttributions_ = function(frameState) {\n  /**\n   * Used to determine if an attribution already exists.\n   * @type {Object.<string, boolean>}\n   */\n  var lookup = {};\n\n  /**\n   * A list of visible attributions.\n   * @type {Array.<string>}\n   */\n  var visibleAttributions = [];\n\n  var layerStatesArray = frameState.layerStatesArray;\n  var resolution = frameState.viewState.resolution;\n  for (var i = 0, ii = layerStatesArray.length; i < ii; ++i) {\n    var layerState = layerStatesArray[i];\n    if (!_ol_layer_Layer_.visibleAtResolution(layerState, resolution)) {\n      continue;\n    }\n\n    var source = layerState.layer.getSource();\n    if (!source) {\n      continue;\n    }\n\n    var attributionGetter = source.getAttributions2();\n    if (!attributionGetter) {\n      continue;\n    }\n\n    var attributions = attributionGetter(frameState);\n    if (!attributions) {\n      continue;\n    }\n\n    if (Array.isArray(attributions)) {\n      for (var j = 0, jj = attributions.length; j < jj; ++j) {\n        if (!(attributions[j] in lookup)) {\n          visibleAttributions.push(attributions[j]);\n          lookup[attributions[j]] = true;\n        }\n      }\n    } else {\n      if (!(attributions in lookup)) {\n        visibleAttributions.push(attributions);\n        lookup[attributions] = true;\n      }\n    }\n  }\n  return visibleAttributions;\n};\n\n\n/**\n * Update the attribution element.\n * @param {ol.MapEvent} mapEvent Map event.\n * @this {ol.control.Attribution}\n * @api\n */\n_ol_control_Attribution_.render = function(mapEvent) {\n  this.updateElement_(mapEvent.frameState);\n};\n\n\n/**\n * @private\n * @param {?olx.FrameState} frameState Frame state.\n */\n_ol_control_Attribution_.prototype.updateElement_ = function(frameState) {\n  if (!frameState) {\n    if (this.renderedVisible_) {\n      this.element.style.display = 'none';\n      this.renderedVisible_ = false;\n    }\n    return;\n  }\n\n  var attributions = this.getSourceAttributions_(frameState);\n  if (_ol_array_.equals(attributions, this.renderedAttributions_)) {\n    return;\n  }\n\n  // remove everything but the logo\n  while (this.ulElement_.lastChild !== this.logoLi_) {\n    this.ulElement_.removeChild(this.ulElement_.lastChild);\n  }\n\n  // append the attributions\n  for (var i = 0, ii = attributions.length; i < ii; ++i) {\n    var element = document.createElement('LI');\n    element.innerHTML = attributions[i];\n    this.ulElement_.appendChild(element);\n  }\n\n\n  if (attributions.length === 0 && this.renderedAttributions_.length > 0) {\n    this.element.classList.add('ol-logo-only');\n  } else if (this.renderedAttributions_.length === 0 && attributions.length > 0) {\n    this.element.classList.remove('ol-logo-only');\n  }\n\n  var visible = attributions.length > 0 || !_ol_obj_.isEmpty(frameState.logos);\n  if (this.renderedVisible_ != visible) {\n    this.element.style.display = visible ? '' : 'none';\n    this.renderedVisible_ = visible;\n  }\n\n  this.renderedAttributions_ = attributions;\n  this.insertLogos_(frameState);\n};\n\n\n/**\n * @param {?olx.FrameState} frameState Frame state.\n * @private\n */\n_ol_control_Attribution_.prototype.insertLogos_ = function(frameState) {\n\n  var logo;\n  var logos = frameState.logos;\n  var logoElements = this.logoElements_;\n\n  for (logo in logoElements) {\n    if (!(logo in logos)) {\n      _ol_dom_.removeNode(logoElements[logo]);\n      delete logoElements[logo];\n    }\n  }\n\n  var image, logoElement, logoKey;\n  for (logoKey in logos) {\n    var logoValue = logos[logoKey];\n    if (logoValue instanceof HTMLElement) {\n      this.logoLi_.appendChild(logoValue);\n      logoElements[logoKey] = logoValue;\n    }\n    if (!(logoKey in logoElements)) {\n      image = new Image();\n      image.src = logoKey;\n      if (logoValue === '') {\n        logoElement = image;\n      } else {\n        logoElement = document.createElement('a');\n        logoElement.href = logoValue;\n        logoElement.appendChild(image);\n      }\n      this.logoLi_.appendChild(logoElement);\n      logoElements[logoKey] = logoElement;\n    }\n  }\n\n  this.logoLi_.style.display = !_ol_obj_.isEmpty(logos) ? '' : 'none';\n\n};\n\n\n/**\n * @param {Event} event The event to handle\n * @private\n */\n_ol_control_Attribution_.prototype.handleClick_ = function(event) {\n  event.preventDefault();\n  this.handleToggle_();\n};\n\n\n/**\n * @private\n */\n_ol_control_Attribution_.prototype.handleToggle_ = function() {\n  this.element.classList.toggle('ol-collapsed');\n  if (this.collapsed_) {\n    _ol_dom_.replaceNode(this.collapseLabel_, this.label_);\n  } else {\n    _ol_dom_.replaceNode(this.label_, this.collapseLabel_);\n  }\n  this.collapsed_ = !this.collapsed_;\n};\n\n\n/**\n * Return `true` if the attribution is collapsible, `false` otherwise.\n * @return {boolean} True if the widget is collapsible.\n * @api\n */\n_ol_control_Attribution_.prototype.getCollapsible = function() {\n  return this.collapsible_;\n};\n\n\n/**\n * Set whether the attribution should be collapsible.\n * @param {boolean} collapsible True if the widget is collapsible.\n * @api\n */\n_ol_control_Attribution_.prototype.setCollapsible = function(collapsible) {\n  if (this.collapsible_ === collapsible) {\n    return;\n  }\n  this.collapsible_ = collapsible;\n  this.element.classList.toggle('ol-uncollapsible');\n  if (!collapsible && this.collapsed_) {\n    this.handleToggle_();\n  }\n};\n\n\n/**\n * Collapse or expand the attribution according to the passed parameter. Will\n * not do anything if the attribution isn't collapsible or if the current\n * collapsed state is already the one requested.\n * @param {boolean} collapsed True if the widget is collapsed.\n * @api\n */\n_ol_control_Attribution_.prototype.setCollapsed = function(collapsed) {\n  if (!this.collapsible_ || this.collapsed_ === collapsed) {\n    return;\n  }\n  this.handleToggle_();\n};\n\n\n/**\n * Return `true` when the attribution is currently collapsed or `false`\n * otherwise.\n * @return {boolean} True if the widget is collapsed.\n * @api\n */\n_ol_control_Attribution_.prototype.getCollapsed = function() {\n  return this.collapsed_;\n};\nexport default _ol_control_Attribution_;\n","import _ol_events_ from '../events.js';\nimport _ol_events_EventType_ from '../events/eventtype.js';\nimport _ol_ from '../index.js';\nimport _ol_control_Control_ from '../control/control.js';\nimport _ol_css_ from '../css.js';\nimport _ol_easing_ from '../easing.js';\n\n/**\n * @classdesc\n * A button control to reset rotation to 0.\n * To style this control use css selector `.ol-rotate`. A `.ol-hidden` css\n * selector is added to the button when the rotation is 0.\n *\n * @constructor\n * @extends {ol.control.Control}\n * @param {olx.control.RotateOptions=} opt_options Rotate options.\n * @api\n */\nvar _ol_control_Rotate_ = function(opt_options) {\n\n  var options = opt_options ? opt_options : {};\n\n  var className = options.className !== undefined ? options.className : 'ol-rotate';\n\n  var label = options.label !== undefined ? options.label : '\\u21E7';\n\n  /**\n   * @type {Element}\n   * @private\n   */\n  this.label_ = null;\n\n  if (typeof label === 'string') {\n    this.label_ = document.createElement('span');\n    this.label_.className = 'ol-compass';\n    this.label_.textContent = label;\n  } else {\n    this.label_ = label;\n    this.label_.classList.add('ol-compass');\n  }\n\n  var tipLabel = options.tipLabel ? options.tipLabel : 'Reset rotation';\n\n  var button = document.createElement('button');\n  button.className = className + '-reset';\n  button.setAttribute('type', 'button');\n  button.title = tipLabel;\n  button.appendChild(this.label_);\n\n  _ol_events_.listen(button, _ol_events_EventType_.CLICK,\n      _ol_control_Rotate_.prototype.handleClick_, this);\n\n  var cssClasses = className + ' ' + _ol_css_.CLASS_UNSELECTABLE + ' ' +\n      _ol_css_.CLASS_CONTROL;\n  var element = document.createElement('div');\n  element.className = cssClasses;\n  element.appendChild(button);\n\n  var render = options.render ? options.render : _ol_control_Rotate_.render;\n\n  this.callResetNorth_ = options.resetNorth ? options.resetNorth : undefined;\n\n  _ol_control_Control_.call(this, {\n    element: element,\n    render: render,\n    target: options.target\n  });\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.autoHide_ = options.autoHide !== undefined ? options.autoHide : true;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.rotation_ = undefined;\n\n  if (this.autoHide_) {\n    this.element.classList.add(_ol_css_.CLASS_HIDDEN);\n  }\n\n};\n\n_ol_.inherits(_ol_control_Rotate_, _ol_control_Control_);\n\n\n/**\n * @param {Event} event The event to handle\n * @private\n */\n_ol_control_Rotate_.prototype.handleClick_ = function(event) {\n  event.preventDefault();\n  if (this.callResetNorth_ !== undefined) {\n    this.callResetNorth_();\n  } else {\n    this.resetNorth_();\n  }\n};\n\n\n/**\n * @private\n */\n_ol_control_Rotate_.prototype.resetNorth_ = function() {\n  var map = this.getMap();\n  var view = map.getView();\n  if (!view) {\n    // the map does not have a view, so we can't act\n    // upon it\n    return;\n  }\n  if (view.getRotation() !== undefined) {\n    if (this.duration_ > 0) {\n      view.animate({\n        rotation: 0,\n        duration: this.duration_,\n        easing: _ol_easing_.easeOut\n      });\n    } else {\n      view.setRotation(0);\n    }\n  }\n};\n\n\n/**\n * Update the rotate control element.\n * @param {ol.MapEvent} mapEvent Map event.\n * @this {ol.control.Rotate}\n * @api\n */\n_ol_control_Rotate_.render = function(mapEvent) {\n  var frameState = mapEvent.frameState;\n  if (!frameState) {\n    return;\n  }\n  var rotation = frameState.viewState.rotation;\n  if (rotation != this.rotation_) {\n    var transform = 'rotate(' + rotation + 'rad)';\n    if (this.autoHide_) {\n      var contains = this.element.classList.contains(_ol_css_.CLASS_HIDDEN);\n      if (!contains && rotation === 0) {\n        this.element.classList.add(_ol_css_.CLASS_HIDDEN);\n      } else if (contains && rotation !== 0) {\n        this.element.classList.remove(_ol_css_.CLASS_HIDDEN);\n      }\n    }\n    this.label_.style.msTransform = transform;\n    this.label_.style.webkitTransform = transform;\n    this.label_.style.transform = transform;\n  }\n  this.rotation_ = rotation;\n};\nexport default _ol_control_Rotate_;\n","import _ol_ from '../index.js';\nimport _ol_events_ from '../events.js';\nimport _ol_events_EventType_ from '../events/eventtype.js';\nimport _ol_control_Control_ from '../control/control.js';\nimport _ol_css_ from '../css.js';\nimport _ol_easing_ from '../easing.js';\n\n/**\n * @classdesc\n * A control with 2 buttons, one for zoom in and one for zoom out.\n * This control is one of the default controls of a map. To style this control\n * use css selectors `.ol-zoom-in` and `.ol-zoom-out`.\n *\n * @constructor\n * @extends {ol.control.Control}\n * @param {olx.control.ZoomOptions=} opt_options Zoom options.\n * @api\n */\nvar _ol_control_Zoom_ = function(opt_options) {\n\n  var options = opt_options ? opt_options : {};\n\n  var className = options.className !== undefined ? options.className : 'ol-zoom';\n\n  var delta = options.delta !== undefined ? options.delta : 1;\n\n  var zoomInLabel = options.zoomInLabel !== undefined ? options.zoomInLabel : '+';\n  var zoomOutLabel = options.zoomOutLabel !== undefined ? options.zoomOutLabel : '\\u2212';\n\n  var zoomInTipLabel = options.zoomInTipLabel !== undefined ?\n    options.zoomInTipLabel : 'Zoom in';\n  var zoomOutTipLabel = options.zoomOutTipLabel !== undefined ?\n    options.zoomOutTipLabel : 'Zoom out';\n\n  var inElement = document.createElement('button');\n  inElement.className = className + '-in';\n  inElement.setAttribute('type', 'button');\n  inElement.title = zoomInTipLabel;\n  inElement.appendChild(\n      typeof zoomInLabel === 'string' ? document.createTextNode(zoomInLabel) : zoomInLabel\n  );\n\n  _ol_events_.listen(inElement, _ol_events_EventType_.CLICK,\n      _ol_control_Zoom_.prototype.handleClick_.bind(this, delta));\n\n  var outElement = document.createElement('button');\n  outElement.className = className + '-out';\n  outElement.setAttribute('type', 'button');\n  outElement.title = zoomOutTipLabel;\n  outElement.appendChild(\n      typeof zoomOutLabel === 'string' ? document.createTextNode(zoomOutLabel) : zoomOutLabel\n  );\n\n  _ol_events_.listen(outElement, _ol_events_EventType_.CLICK,\n      _ol_control_Zoom_.prototype.handleClick_.bind(this, -delta));\n\n  var cssClasses = className + ' ' + _ol_css_.CLASS_UNSELECTABLE + ' ' +\n      _ol_css_.CLASS_CONTROL;\n  var element = document.createElement('div');\n  element.className = cssClasses;\n  element.appendChild(inElement);\n  element.appendChild(outElement);\n\n  _ol_control_Control_.call(this, {\n    element: element,\n    target: options.target\n  });\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n};\n\n_ol_.inherits(_ol_control_Zoom_, _ol_control_Control_);\n\n\n/**\n * @param {number} delta Zoom delta.\n * @param {Event} event The event to handle\n * @private\n */\n_ol_control_Zoom_.prototype.handleClick_ = function(delta, event) {\n  event.preventDefault();\n  this.zoomByDelta_(delta);\n};\n\n\n/**\n * @param {number} delta Zoom delta.\n * @private\n */\n_ol_control_Zoom_.prototype.zoomByDelta_ = function(delta) {\n  var map = this.getMap();\n  var view = map.getView();\n  if (!view) {\n    // the map does not have a view, so we can't act\n    // upon it\n    return;\n  }\n  var currentResolution = view.getResolution();\n  if (currentResolution) {\n    var newResolution = view.constrainResolution(currentResolution, delta);\n    if (this.duration_ > 0) {\n      if (view.getAnimating()) {\n        view.cancelAnimations();\n      }\n      view.animate({\n        resolution: newResolution,\n        duration: this.duration_,\n        easing: _ol_easing_.easeOut\n      });\n    } else {\n      view.setResolution(newResolution);\n    }\n  }\n};\nexport default _ol_control_Zoom_;\n","import _ol_Collection_ from './collection.js';\nimport _ol_control_Attribution_ from './control/attribution.js';\nimport _ol_control_Rotate_ from './control/rotate.js';\nimport _ol_control_Zoom_ from './control/zoom.js';\nvar _ol_control_ = {};\n\n\n/**\n * Set of controls included in maps by default. Unless configured otherwise,\n * this returns a collection containing an instance of each of the following\n * controls:\n * * {@link ol.control.Zoom}\n * * {@link ol.control.Rotate}\n * * {@link ol.control.Attribution}\n *\n * @param {olx.control.DefaultsOptions=} opt_options Defaults options.\n * @return {ol.Collection.<ol.control.Control>} Controls.\n * @api\n */\n_ol_control_.defaults = function(opt_options) {\n\n  var options = opt_options ? opt_options : {};\n\n  var controls = new _ol_Collection_();\n\n  var zoomControl = options.zoom !== undefined ? options.zoom : true;\n  if (zoomControl) {\n    controls.push(new _ol_control_Zoom_(options.zoomOptions));\n  }\n\n  var rotateControl = options.rotate !== undefined ? options.rotate : true;\n  if (rotateControl) {\n    controls.push(new _ol_control_Rotate_(options.rotateOptions));\n  }\n\n  var attributionControl = options.attribution !== undefined ?\n    options.attribution : true;\n  if (attributionControl) {\n    controls.push(new _ol_control_Attribution_(options.attributionOptions));\n  }\n\n  return controls;\n\n};\nexport default _ol_control_;\n","/**\n * Constants for event names.\n * @enum {string}\n */\nvar _ol_pointer_EventType_ = {\n  POINTERMOVE: 'pointermove',\n  POINTERDOWN: 'pointerdown',\n  POINTERUP: 'pointerup',\n  POINTEROVER: 'pointerover',\n  POINTEROUT: 'pointerout',\n  POINTERENTER: 'pointerenter',\n  POINTERLEAVE: 'pointerleave',\n  POINTERCANCEL: 'pointercancel'\n};\n\nexport default _ol_pointer_EventType_;\n","/**\n * @param {ol.pointer.PointerEventHandler} dispatcher Event handler.\n * @param {!Object.<string, function(Event)>} mapping Event\n *     mapping.\n * @constructor\n */\nvar _ol_pointer_EventSource_ = function(dispatcher, mapping) {\n  /**\n   * @type {ol.pointer.PointerEventHandler}\n   */\n  this.dispatcher = dispatcher;\n\n  /**\n   * @private\n   * @const\n   * @type {!Object.<string, function(Event)>}\n   */\n  this.mapping_ = mapping;\n};\n\n\n/**\n * List of events supported by this source.\n * @return {Array.<string>} Event names\n */\n_ol_pointer_EventSource_.prototype.getEvents = function() {\n  return Object.keys(this.mapping_);\n};\n\n\n/**\n * Returns the handler that should handle a given event type.\n * @param {string} eventType The event type.\n * @return {function(Event)} Handler\n */\n_ol_pointer_EventSource_.prototype.getHandlerForEvent = function(eventType) {\n  return this.mapping_[eventType];\n};\nexport default _ol_pointer_EventSource_;\n","// Based on https://github.com/Polymer/PointerEvents\n\n// Copyright (c) 2013 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n// * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n// * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n// * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nimport _ol_ from '../index.js';\nimport _ol_pointer_EventSource_ from '../pointer/eventsource.js';\n\n/**\n * @param {ol.pointer.PointerEventHandler} dispatcher Event handler.\n * @constructor\n * @extends {ol.pointer.EventSource}\n */\nvar _ol_pointer_MouseSource_ = function(dispatcher) {\n  var mapping = {\n    'mousedown': this.mousedown,\n    'mousemove': this.mousemove,\n    'mouseup': this.mouseup,\n    'mouseover': this.mouseover,\n    'mouseout': this.mouseout\n  };\n  _ol_pointer_EventSource_.call(this, dispatcher, mapping);\n\n  /**\n   * @const\n   * @type {!Object.<string, Event|Object>}\n   */\n  this.pointerMap = dispatcher.pointerMap;\n\n  /**\n   * @const\n   * @type {Array.<ol.Pixel>}\n   */\n  this.lastTouches = [];\n};\n\n_ol_.inherits(_ol_pointer_MouseSource_, _ol_pointer_EventSource_);\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_pointer_MouseSource_.POINTER_ID = 1;\n\n\n/**\n * @const\n * @type {string}\n */\n_ol_pointer_MouseSource_.POINTER_TYPE = 'mouse';\n\n\n/**\n * Radius around touchend that swallows mouse events.\n *\n * @const\n * @type {number}\n */\n_ol_pointer_MouseSource_.DEDUP_DIST = 25;\n\n\n/**\n * Detect if a mouse event was simulated from a touch by\n * checking if previously there was a touch event at the\n * same position.\n *\n * FIXME - Known problem with the native Android browser on\n * Samsung GT-I9100 (Android 4.1.2):\n * In case the page is scrolled, this function does not work\n * correctly when a canvas is used (WebGL or canvas renderer).\n * Mouse listeners on canvas elements (for this browser), create\n * two mouse events: One 'good' and one 'bad' one (on other browsers or\n * when a div is used, there is only one event). For the 'bad' one,\n * clientX/clientY and also pageX/pageY are wrong when the page\n * is scrolled. Because of that, this function can not detect if\n * the events were simulated from a touch event. As result, a\n * pointer event at a wrong position is dispatched, which confuses\n * the map interactions.\n * It is unclear, how one can get the correct position for the event\n * or detect that the positions are invalid.\n *\n * @private\n * @param {Event} inEvent The in event.\n * @return {boolean} True, if the event was generated by a touch.\n */\n_ol_pointer_MouseSource_.prototype.isEventSimulatedFromTouch_ = function(inEvent) {\n  var lts = this.lastTouches;\n  var x = inEvent.clientX, y = inEvent.clientY;\n  for (var i = 0, l = lts.length, t; i < l && (t = lts[i]); i++) {\n    // simulated mouse events will be swallowed near a primary touchend\n    var dx = Math.abs(x - t[0]), dy = Math.abs(y - t[1]);\n    if (dx <= _ol_pointer_MouseSource_.DEDUP_DIST &&\n        dy <= _ol_pointer_MouseSource_.DEDUP_DIST) {\n      return true;\n    }\n  }\n  return false;\n};\n\n\n/**\n * Creates a copy of the original event that will be used\n * for the fake pointer event.\n *\n * @param {Event} inEvent The in event.\n * @param {ol.pointer.PointerEventHandler} dispatcher Event handler.\n * @return {Object} The copied event.\n */\n_ol_pointer_MouseSource_.prepareEvent = function(inEvent, dispatcher) {\n  var e = dispatcher.cloneEvent(inEvent, inEvent);\n\n  // forward mouse preventDefault\n  var pd = e.preventDefault;\n  e.preventDefault = function() {\n    inEvent.preventDefault();\n    pd();\n  };\n\n  e.pointerId = _ol_pointer_MouseSource_.POINTER_ID;\n  e.isPrimary = true;\n  e.pointerType = _ol_pointer_MouseSource_.POINTER_TYPE;\n\n  return e;\n};\n\n\n/**\n * Handler for `mousedown`.\n *\n * @param {Event} inEvent The in event.\n */\n_ol_pointer_MouseSource_.prototype.mousedown = function(inEvent) {\n  if (!this.isEventSimulatedFromTouch_(inEvent)) {\n    // TODO(dfreedman) workaround for some elements not sending mouseup\n    // http://crbug/149091\n    if (_ol_pointer_MouseSource_.POINTER_ID.toString() in this.pointerMap) {\n      this.cancel(inEvent);\n    }\n    var e = _ol_pointer_MouseSource_.prepareEvent(inEvent, this.dispatcher);\n    this.pointerMap[_ol_pointer_MouseSource_.POINTER_ID.toString()] = inEvent;\n    this.dispatcher.down(e, inEvent);\n  }\n};\n\n\n/**\n * Handler for `mousemove`.\n *\n * @param {Event} inEvent The in event.\n */\n_ol_pointer_MouseSource_.prototype.mousemove = function(inEvent) {\n  if (!this.isEventSimulatedFromTouch_(inEvent)) {\n    var e = _ol_pointer_MouseSource_.prepareEvent(inEvent, this.dispatcher);\n    this.dispatcher.move(e, inEvent);\n  }\n};\n\n\n/**\n * Handler for `mouseup`.\n *\n * @param {Event} inEvent The in event.\n */\n_ol_pointer_MouseSource_.prototype.mouseup = function(inEvent) {\n  if (!this.isEventSimulatedFromTouch_(inEvent)) {\n    var p = this.pointerMap[_ol_pointer_MouseSource_.POINTER_ID.toString()];\n\n    if (p && p.button === inEvent.button) {\n      var e = _ol_pointer_MouseSource_.prepareEvent(inEvent, this.dispatcher);\n      this.dispatcher.up(e, inEvent);\n      this.cleanupMouse();\n    }\n  }\n};\n\n\n/**\n * Handler for `mouseover`.\n *\n * @param {Event} inEvent The in event.\n */\n_ol_pointer_MouseSource_.prototype.mouseover = function(inEvent) {\n  if (!this.isEventSimulatedFromTouch_(inEvent)) {\n    var e = _ol_pointer_MouseSource_.prepareEvent(inEvent, this.dispatcher);\n    this.dispatcher.enterOver(e, inEvent);\n  }\n};\n\n\n/**\n * Handler for `mouseout`.\n *\n * @param {Event} inEvent The in event.\n */\n_ol_pointer_MouseSource_.prototype.mouseout = function(inEvent) {\n  if (!this.isEventSimulatedFromTouch_(inEvent)) {\n    var e = _ol_pointer_MouseSource_.prepareEvent(inEvent, this.dispatcher);\n    this.dispatcher.leaveOut(e, inEvent);\n  }\n};\n\n\n/**\n * Dispatches a `pointercancel` event.\n *\n * @param {Event} inEvent The in event.\n */\n_ol_pointer_MouseSource_.prototype.cancel = function(inEvent) {\n  var e = _ol_pointer_MouseSource_.prepareEvent(inEvent, this.dispatcher);\n  this.dispatcher.cancel(e, inEvent);\n  this.cleanupMouse();\n};\n\n\n/**\n * Remove the mouse from the list of active pointers.\n */\n_ol_pointer_MouseSource_.prototype.cleanupMouse = function() {\n  delete this.pointerMap[_ol_pointer_MouseSource_.POINTER_ID.toString()];\n};\nexport default _ol_pointer_MouseSource_;\n","// Based on https://github.com/Polymer/PointerEvents\n\n// Copyright (c) 2013 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n// * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n// * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n// * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nimport _ol_ from '../index.js';\nimport _ol_pointer_EventSource_ from '../pointer/eventsource.js';\n\n/**\n * @param {ol.pointer.PointerEventHandler} dispatcher Event handler.\n * @constructor\n * @extends {ol.pointer.EventSource}\n */\nvar _ol_pointer_MsSource_ = function(dispatcher) {\n  var mapping = {\n    'MSPointerDown': this.msPointerDown,\n    'MSPointerMove': this.msPointerMove,\n    'MSPointerUp': this.msPointerUp,\n    'MSPointerOut': this.msPointerOut,\n    'MSPointerOver': this.msPointerOver,\n    'MSPointerCancel': this.msPointerCancel,\n    'MSGotPointerCapture': this.msGotPointerCapture,\n    'MSLostPointerCapture': this.msLostPointerCapture\n  };\n  _ol_pointer_EventSource_.call(this, dispatcher, mapping);\n\n  /**\n   * @const\n   * @type {!Object.<string, Event|Object>}\n   */\n  this.pointerMap = dispatcher.pointerMap;\n\n  /**\n   * @const\n   * @type {Array.<string>}\n   */\n  this.POINTER_TYPES = [\n    '',\n    'unavailable',\n    'touch',\n    'pen',\n    'mouse'\n  ];\n};\n\n_ol_.inherits(_ol_pointer_MsSource_, _ol_pointer_EventSource_);\n\n\n/**\n * Creates a copy of the original event that will be used\n * for the fake pointer event.\n *\n * @private\n * @param {Event} inEvent The in event.\n * @return {Object} The copied event.\n */\n_ol_pointer_MsSource_.prototype.prepareEvent_ = function(inEvent) {\n  var e = inEvent;\n  if (typeof inEvent.pointerType === 'number') {\n    e = this.dispatcher.cloneEvent(inEvent, inEvent);\n    e.pointerType = this.POINTER_TYPES[inEvent.pointerType];\n  }\n\n  return e;\n};\n\n\n/**\n * Remove this pointer from the list of active pointers.\n * @param {number} pointerId Pointer identifier.\n */\n_ol_pointer_MsSource_.prototype.cleanup = function(pointerId) {\n  delete this.pointerMap[pointerId.toString()];\n};\n\n\n/**\n * Handler for `msPointerDown`.\n *\n * @param {Event} inEvent The in event.\n */\n_ol_pointer_MsSource_.prototype.msPointerDown = function(inEvent) {\n  this.pointerMap[inEvent.pointerId.toString()] = inEvent;\n  var e = this.prepareEvent_(inEvent);\n  this.dispatcher.down(e, inEvent);\n};\n\n\n/**\n * Handler for `msPointerMove`.\n *\n * @param {Event} inEvent The in event.\n */\n_ol_pointer_MsSource_.prototype.msPointerMove = function(inEvent) {\n  var e = this.prepareEvent_(inEvent);\n  this.dispatcher.move(e, inEvent);\n};\n\n\n/**\n * Handler for `msPointerUp`.\n *\n * @param {Event} inEvent The in event.\n */\n_ol_pointer_MsSource_.prototype.msPointerUp = function(inEvent) {\n  var e = this.prepareEvent_(inEvent);\n  this.dispatcher.up(e, inEvent);\n  this.cleanup(inEvent.pointerId);\n};\n\n\n/**\n * Handler for `msPointerOut`.\n *\n * @param {Event} inEvent The in event.\n */\n_ol_pointer_MsSource_.prototype.msPointerOut = function(inEvent) {\n  var e = this.prepareEvent_(inEvent);\n  this.dispatcher.leaveOut(e, inEvent);\n};\n\n\n/**\n * Handler for `msPointerOver`.\n *\n * @param {Event} inEvent The in event.\n */\n_ol_pointer_MsSource_.prototype.msPointerOver = function(inEvent) {\n  var e = this.prepareEvent_(inEvent);\n  this.dispatcher.enterOver(e, inEvent);\n};\n\n\n/**\n * Handler for `msPointerCancel`.\n *\n * @param {Event} inEvent The in event.\n */\n_ol_pointer_MsSource_.prototype.msPointerCancel = function(inEvent) {\n  var e = this.prepareEvent_(inEvent);\n  this.dispatcher.cancel(e, inEvent);\n  this.cleanup(inEvent.pointerId);\n};\n\n\n/**\n * Handler for `msLostPointerCapture`.\n *\n * @param {Event} inEvent The in event.\n */\n_ol_pointer_MsSource_.prototype.msLostPointerCapture = function(inEvent) {\n  var e = this.dispatcher.makeEvent('lostpointercapture',\n      inEvent, inEvent);\n  this.dispatcher.dispatchEvent(e);\n};\n\n\n/**\n * Handler for `msGotPointerCapture`.\n *\n * @param {Event} inEvent The in event.\n */\n_ol_pointer_MsSource_.prototype.msGotPointerCapture = function(inEvent) {\n  var e = this.dispatcher.makeEvent('gotpointercapture',\n      inEvent, inEvent);\n  this.dispatcher.dispatchEvent(e);\n};\nexport default _ol_pointer_MsSource_;\n","// Based on https://github.com/Polymer/PointerEvents\n\n// Copyright (c) 2013 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n// * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n// * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n// * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nimport _ol_ from '../index.js';\nimport _ol_pointer_EventSource_ from '../pointer/eventsource.js';\n\n/**\n * @param {ol.pointer.PointerEventHandler} dispatcher Event handler.\n * @constructor\n * @extends {ol.pointer.EventSource}\n */\nvar _ol_pointer_NativeSource_ = function(dispatcher) {\n  var mapping = {\n    'pointerdown': this.pointerDown,\n    'pointermove': this.pointerMove,\n    'pointerup': this.pointerUp,\n    'pointerout': this.pointerOut,\n    'pointerover': this.pointerOver,\n    'pointercancel': this.pointerCancel,\n    'gotpointercapture': this.gotPointerCapture,\n    'lostpointercapture': this.lostPointerCapture\n  };\n  _ol_pointer_EventSource_.call(this, dispatcher, mapping);\n};\n\n_ol_.inherits(_ol_pointer_NativeSource_, _ol_pointer_EventSource_);\n\n\n/**\n * Handler for `pointerdown`.\n *\n * @param {Event} inEvent The in event.\n */\n_ol_pointer_NativeSource_.prototype.pointerDown = function(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n};\n\n\n/**\n * Handler for `pointermove`.\n *\n * @param {Event} inEvent The in event.\n */\n_ol_pointer_NativeSource_.prototype.pointerMove = function(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n};\n\n\n/**\n * Handler for `pointerup`.\n *\n * @param {Event} inEvent The in event.\n */\n_ol_pointer_NativeSource_.prototype.pointerUp = function(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n};\n\n\n/**\n * Handler for `pointerout`.\n *\n * @param {Event} inEvent The in event.\n */\n_ol_pointer_NativeSource_.prototype.pointerOut = function(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n};\n\n\n/**\n * Handler for `pointerover`.\n *\n * @param {Event} inEvent The in event.\n */\n_ol_pointer_NativeSource_.prototype.pointerOver = function(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n};\n\n\n/**\n * Handler for `pointercancel`.\n *\n * @param {Event} inEvent The in event.\n */\n_ol_pointer_NativeSource_.prototype.pointerCancel = function(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n};\n\n\n/**\n * Handler for `lostpointercapture`.\n *\n * @param {Event} inEvent The in event.\n */\n_ol_pointer_NativeSource_.prototype.lostPointerCapture = function(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n};\n\n\n/**\n * Handler for `gotpointercapture`.\n *\n * @param {Event} inEvent The in event.\n */\n_ol_pointer_NativeSource_.prototype.gotPointerCapture = function(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n};\nexport default _ol_pointer_NativeSource_;\n","// Based on https://github.com/Polymer/PointerEvents\n\n// Copyright (c) 2013 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n// * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n// * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n// * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nimport _ol_ from '../index.js';\nimport _ol_events_Event_ from '../events/event.js';\n\n/**\n * A class for pointer events.\n *\n * This class is used as an abstraction for mouse events,\n * touch events and even native pointer events.\n *\n * @constructor\n * @extends {ol.events.Event}\n * @param {string} type The type of the event to create.\n * @param {Event} originalEvent The event.\n * @param {Object.<string, ?>=} opt_eventDict An optional dictionary of\n *    initial event properties.\n */\nvar _ol_pointer_PointerEvent_ = function(type, originalEvent, opt_eventDict) {\n  _ol_events_Event_.call(this, type);\n\n  /**\n   * @const\n   * @type {Event}\n   */\n  this.originalEvent = originalEvent;\n\n  var eventDict = opt_eventDict ? opt_eventDict : {};\n\n  /**\n   * @type {number}\n   */\n  this.buttons = this.getButtons_(eventDict);\n\n  /**\n   * @type {number}\n   */\n  this.pressure = this.getPressure_(eventDict, this.buttons);\n\n  // MouseEvent related properties\n\n  /**\n   * @type {boolean}\n   */\n  this.bubbles = 'bubbles' in eventDict ? eventDict['bubbles'] : false;\n\n  /**\n   * @type {boolean}\n   */\n  this.cancelable = 'cancelable' in eventDict ? eventDict['cancelable'] : false;\n\n  /**\n   * @type {Object}\n   */\n  this.view = 'view' in eventDict ? eventDict['view'] : null;\n\n  /**\n   * @type {number}\n   */\n  this.detail = 'detail' in eventDict ? eventDict['detail'] : null;\n\n  /**\n   * @type {number}\n   */\n  this.screenX = 'screenX' in eventDict ? eventDict['screenX'] : 0;\n\n  /**\n   * @type {number}\n   */\n  this.screenY = 'screenY' in eventDict ? eventDict['screenY'] : 0;\n\n  /**\n   * @type {number}\n   */\n  this.clientX = 'clientX' in eventDict ? eventDict['clientX'] : 0;\n\n  /**\n   * @type {number}\n   */\n  this.clientY = 'clientY' in eventDict ? eventDict['clientY'] : 0;\n\n  /**\n   * @type {boolean}\n   */\n  this.ctrlKey = 'ctrlKey' in eventDict ? eventDict['ctrlKey'] : false;\n\n  /**\n   * @type {boolean}\n   */\n  this.altKey = 'altKey' in eventDict ? eventDict['altKey'] : false;\n\n  /**\n   * @type {boolean}\n   */\n  this.shiftKey = 'shiftKey' in eventDict ? eventDict['shiftKey'] : false;\n\n  /**\n   * @type {boolean}\n   */\n  this.metaKey = 'metaKey' in eventDict ? eventDict['metaKey'] : false;\n\n  /**\n   * @type {number}\n   */\n  this.button = 'button' in eventDict ? eventDict['button'] : 0;\n\n  /**\n   * @type {Node}\n   */\n  this.relatedTarget = 'relatedTarget' in eventDict ?\n    eventDict['relatedTarget'] : null;\n\n  // PointerEvent related properties\n\n  /**\n   * @const\n   * @type {number}\n   */\n  this.pointerId = 'pointerId' in eventDict ? eventDict['pointerId'] : 0;\n\n  /**\n   * @type {number}\n   */\n  this.width = 'width' in eventDict ? eventDict['width'] : 0;\n\n  /**\n   * @type {number}\n   */\n  this.height = 'height' in eventDict ? eventDict['height'] : 0;\n\n  /**\n   * @type {number}\n   */\n  this.tiltX = 'tiltX' in eventDict ? eventDict['tiltX'] : 0;\n\n  /**\n   * @type {number}\n   */\n  this.tiltY = 'tiltY' in eventDict ? eventDict['tiltY'] : 0;\n\n  /**\n   * @type {string}\n   */\n  this.pointerType = 'pointerType' in eventDict ? eventDict['pointerType'] : '';\n\n  /**\n   * @type {number}\n   */\n  this.hwTimestamp = 'hwTimestamp' in eventDict ? eventDict['hwTimestamp'] : 0;\n\n  /**\n   * @type {boolean}\n   */\n  this.isPrimary = 'isPrimary' in eventDict ? eventDict['isPrimary'] : false;\n\n  // keep the semantics of preventDefault\n  if (originalEvent.preventDefault) {\n    this.preventDefault = function() {\n      originalEvent.preventDefault();\n    };\n  }\n};\n\n_ol_.inherits(_ol_pointer_PointerEvent_, _ol_events_Event_);\n\n\n/**\n * @private\n * @param {Object.<string, ?>} eventDict The event dictionary.\n * @return {number} Button indicator.\n */\n_ol_pointer_PointerEvent_.prototype.getButtons_ = function(eventDict) {\n  // According to the w3c spec,\n  // http://www.w3.org/TR/DOM-Level-3-Events/#events-MouseEvent-button\n  // MouseEvent.button == 0 can mean either no mouse button depressed, or the\n  // left mouse button depressed.\n  //\n  // As of now, the only way to distinguish between the two states of\n  // MouseEvent.button is by using the deprecated MouseEvent.which property, as\n  // this maps mouse buttons to positive integers > 0, and uses 0 to mean that\n  // no mouse button is held.\n  //\n  // MouseEvent.which is derived from MouseEvent.button at MouseEvent creation,\n  // but initMouseEvent does not expose an argument with which to set\n  // MouseEvent.which. Calling initMouseEvent with a buttonArg of 0 will set\n  // MouseEvent.button == 0 and MouseEvent.which == 1, breaking the expectations\n  // of app developers.\n  //\n  // The only way to propagate the correct state of MouseEvent.which and\n  // MouseEvent.button to a new MouseEvent.button == 0 and MouseEvent.which == 0\n  // is to call initMouseEvent with a buttonArg value of -1.\n  //\n  // This is fixed with DOM Level 4's use of buttons\n  var buttons;\n  if (eventDict.buttons || _ol_pointer_PointerEvent_.HAS_BUTTONS) {\n    buttons = eventDict.buttons;\n  } else {\n    switch (eventDict.which) {\n      case 1: buttons = 1; break;\n      case 2: buttons = 4; break;\n      case 3: buttons = 2; break;\n      default: buttons = 0;\n    }\n  }\n  return buttons;\n};\n\n\n/**\n * @private\n * @param {Object.<string, ?>} eventDict The event dictionary.\n * @param {number} buttons Button indicator.\n * @return {number} The pressure.\n */\n_ol_pointer_PointerEvent_.prototype.getPressure_ = function(eventDict, buttons) {\n  // Spec requires that pointers without pressure specified use 0.5 for down\n  // state and 0 for up state.\n  var pressure = 0;\n  if (eventDict.pressure) {\n    pressure = eventDict.pressure;\n  } else {\n    pressure = buttons ? 0.5 : 0;\n  }\n  return pressure;\n};\n\n\n/**\n * Is the `buttons` property supported?\n * @type {boolean}\n */\n_ol_pointer_PointerEvent_.HAS_BUTTONS = false;\n\n\n/**\n * Checks if the `buttons` property is supported.\n */\n(function() {\n  try {\n    var ev = new MouseEvent('click', {buttons: 1});\n    _ol_pointer_PointerEvent_.HAS_BUTTONS = ev.buttons === 1;\n  } catch (e) {\n    // pass\n  }\n})();\nexport default _ol_pointer_PointerEvent_;\n","// Based on https://github.com/Polymer/PointerEvents\n\n// Copyright (c) 2013 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n// * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n// * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n// * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nimport _ol_ from '../index.js';\nimport _ol_array_ from '../array.js';\nimport _ol_pointer_EventSource_ from '../pointer/eventsource.js';\nimport _ol_pointer_MouseSource_ from '../pointer/mousesource.js';\n\n/**\n * @constructor\n * @param {ol.pointer.PointerEventHandler} dispatcher The event handler.\n * @param {ol.pointer.MouseSource} mouseSource Mouse source.\n * @extends {ol.pointer.EventSource}\n */\nvar _ol_pointer_TouchSource_ = function(dispatcher, mouseSource) {\n  var mapping = {\n    'touchstart': this.touchstart,\n    'touchmove': this.touchmove,\n    'touchend': this.touchend,\n    'touchcancel': this.touchcancel\n  };\n  _ol_pointer_EventSource_.call(this, dispatcher, mapping);\n\n  /**\n   * @const\n   * @type {!Object.<string, Event|Object>}\n   */\n  this.pointerMap = dispatcher.pointerMap;\n\n  /**\n   * @const\n   * @type {ol.pointer.MouseSource}\n   */\n  this.mouseSource = mouseSource;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.firstTouchId_ = undefined;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.clickCount_ = 0;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.resetId_ = undefined;\n};\n\n_ol_.inherits(_ol_pointer_TouchSource_, _ol_pointer_EventSource_);\n\n\n/**\n * Mouse event timeout: This should be long enough to\n * ignore compat mouse events made by touch.\n * @const\n * @type {number}\n */\n_ol_pointer_TouchSource_.DEDUP_TIMEOUT = 2500;\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_pointer_TouchSource_.CLICK_COUNT_TIMEOUT = 200;\n\n\n/**\n * @const\n * @type {string}\n */\n_ol_pointer_TouchSource_.POINTER_TYPE = 'touch';\n\n\n/**\n * @private\n * @param {Touch} inTouch The in touch.\n * @return {boolean} True, if this is the primary touch.\n */\n_ol_pointer_TouchSource_.prototype.isPrimaryTouch_ = function(inTouch) {\n  return this.firstTouchId_ === inTouch.identifier;\n};\n\n\n/**\n * Set primary touch if there are no pointers, or the only pointer is the mouse.\n * @param {Touch} inTouch The in touch.\n * @private\n */\n_ol_pointer_TouchSource_.prototype.setPrimaryTouch_ = function(inTouch) {\n  var count = Object.keys(this.pointerMap).length;\n  if (count === 0 || (count === 1 &&\n      _ol_pointer_MouseSource_.POINTER_ID.toString() in this.pointerMap)) {\n    this.firstTouchId_ = inTouch.identifier;\n    this.cancelResetClickCount_();\n  }\n};\n\n\n/**\n * @private\n * @param {Object} inPointer The in pointer object.\n */\n_ol_pointer_TouchSource_.prototype.removePrimaryPointer_ = function(inPointer) {\n  if (inPointer.isPrimary) {\n    this.firstTouchId_ = undefined;\n    this.resetClickCount_();\n  }\n};\n\n\n/**\n * @private\n */\n_ol_pointer_TouchSource_.prototype.resetClickCount_ = function() {\n  this.resetId_ = setTimeout(\n      this.resetClickCountHandler_.bind(this),\n      _ol_pointer_TouchSource_.CLICK_COUNT_TIMEOUT);\n};\n\n\n/**\n * @private\n */\n_ol_pointer_TouchSource_.prototype.resetClickCountHandler_ = function() {\n  this.clickCount_ = 0;\n  this.resetId_ = undefined;\n};\n\n\n/**\n * @private\n */\n_ol_pointer_TouchSource_.prototype.cancelResetClickCount_ = function() {\n  if (this.resetId_ !== undefined) {\n    clearTimeout(this.resetId_);\n  }\n};\n\n\n/**\n * @private\n * @param {Event} browserEvent Browser event\n * @param {Touch} inTouch Touch event\n * @return {Object} A pointer object.\n */\n_ol_pointer_TouchSource_.prototype.touchToPointer_ = function(browserEvent, inTouch) {\n  var e = this.dispatcher.cloneEvent(browserEvent, inTouch);\n  // Spec specifies that pointerId 1 is reserved for Mouse.\n  // Touch identifiers can start at 0.\n  // Add 2 to the touch identifier for compatibility.\n  e.pointerId = inTouch.identifier + 2;\n  // TODO: check if this is necessary?\n  //e.target = findTarget(e);\n  e.bubbles = true;\n  e.cancelable = true;\n  e.detail = this.clickCount_;\n  e.button = 0;\n  e.buttons = 1;\n  e.width = inTouch.webkitRadiusX || inTouch.radiusX || 0;\n  e.height = inTouch.webkitRadiusY || inTouch.radiusY || 0;\n  e.pressure = inTouch.webkitForce || inTouch.force || 0.5;\n  e.isPrimary = this.isPrimaryTouch_(inTouch);\n  e.pointerType = _ol_pointer_TouchSource_.POINTER_TYPE;\n\n  // make sure that the properties that are different for\n  // each `Touch` object are not copied from the BrowserEvent object\n  e.clientX = inTouch.clientX;\n  e.clientY = inTouch.clientY;\n  e.screenX = inTouch.screenX;\n  e.screenY = inTouch.screenY;\n\n  return e;\n};\n\n\n/**\n * @private\n * @param {Event} inEvent Touch event\n * @param {function(Event, Object)} inFunction In function.\n */\n_ol_pointer_TouchSource_.prototype.processTouches_ = function(inEvent, inFunction) {\n  var touches = Array.prototype.slice.call(\n      inEvent.changedTouches);\n  var count = touches.length;\n  function preventDefault() {\n    inEvent.preventDefault();\n  }\n  var i, pointer;\n  for (i = 0; i < count; ++i) {\n    pointer = this.touchToPointer_(inEvent, touches[i]);\n    // forward touch preventDefaults\n    pointer.preventDefault = preventDefault;\n    inFunction.call(this, inEvent, pointer);\n  }\n};\n\n\n/**\n * @private\n * @param {TouchList} touchList The touch list.\n * @param {number} searchId Search identifier.\n * @return {boolean} True, if the `Touch` with the given id is in the list.\n */\n_ol_pointer_TouchSource_.prototype.findTouch_ = function(touchList, searchId) {\n  var l = touchList.length;\n  var touch;\n  for (var i = 0; i < l; i++) {\n    touch = touchList[i];\n    if (touch.identifier === searchId) {\n      return true;\n    }\n  }\n  return false;\n};\n\n\n/**\n * In some instances, a touchstart can happen without a touchend. This\n * leaves the pointermap in a broken state.\n * Therefore, on every touchstart, we remove the touches that did not fire a\n * touchend event.\n * To keep state globally consistent, we fire a pointercancel for\n * this \"abandoned\" touch\n *\n * @private\n * @param {Event} inEvent The in event.\n */\n_ol_pointer_TouchSource_.prototype.vacuumTouches_ = function(inEvent) {\n  var touchList = inEvent.touches;\n  // pointerMap.getCount() should be < touchList.length here,\n  // as the touchstart has not been processed yet.\n  var keys = Object.keys(this.pointerMap);\n  var count = keys.length;\n  if (count >= touchList.length) {\n    var d = [];\n    var i, key, value;\n    for (i = 0; i < count; ++i) {\n      key = keys[i];\n      value = this.pointerMap[key];\n      // Never remove pointerId == 1, which is mouse.\n      // Touch identifiers are 2 smaller than their pointerId, which is the\n      // index in pointermap.\n      if (key != _ol_pointer_MouseSource_.POINTER_ID &&\n          !this.findTouch_(touchList, key - 2)) {\n        d.push(value.out);\n      }\n    }\n    for (i = 0; i < d.length; ++i) {\n      this.cancelOut_(inEvent, d[i]);\n    }\n  }\n};\n\n\n/**\n * Handler for `touchstart`, triggers `pointerover`,\n * `pointerenter` and `pointerdown` events.\n *\n * @param {Event} inEvent The in event.\n */\n_ol_pointer_TouchSource_.prototype.touchstart = function(inEvent) {\n  this.vacuumTouches_(inEvent);\n  this.setPrimaryTouch_(inEvent.changedTouches[0]);\n  this.dedupSynthMouse_(inEvent);\n  this.clickCount_++;\n  this.processTouches_(inEvent, this.overDown_);\n};\n\n\n/**\n * @private\n * @param {Event} browserEvent The event.\n * @param {Object} inPointer The in pointer object.\n */\n_ol_pointer_TouchSource_.prototype.overDown_ = function(browserEvent, inPointer) {\n  this.pointerMap[inPointer.pointerId] = {\n    target: inPointer.target,\n    out: inPointer,\n    outTarget: inPointer.target\n  };\n  this.dispatcher.over(inPointer, browserEvent);\n  this.dispatcher.enter(inPointer, browserEvent);\n  this.dispatcher.down(inPointer, browserEvent);\n};\n\n\n/**\n * Handler for `touchmove`.\n *\n * @param {Event} inEvent The in event.\n */\n_ol_pointer_TouchSource_.prototype.touchmove = function(inEvent) {\n  inEvent.preventDefault();\n  this.processTouches_(inEvent, this.moveOverOut_);\n};\n\n\n/**\n * @private\n * @param {Event} browserEvent The event.\n * @param {Object} inPointer The in pointer.\n */\n_ol_pointer_TouchSource_.prototype.moveOverOut_ = function(browserEvent, inPointer) {\n  var event = inPointer;\n  var pointer = this.pointerMap[event.pointerId];\n  // a finger drifted off the screen, ignore it\n  if (!pointer) {\n    return;\n  }\n  var outEvent = pointer.out;\n  var outTarget = pointer.outTarget;\n  this.dispatcher.move(event, browserEvent);\n  if (outEvent && outTarget !== event.target) {\n    outEvent.relatedTarget = event.target;\n    event.relatedTarget = outTarget;\n    // recover from retargeting by shadow\n    outEvent.target = outTarget;\n    if (event.target) {\n      this.dispatcher.leaveOut(outEvent, browserEvent);\n      this.dispatcher.enterOver(event, browserEvent);\n    } else {\n      // clean up case when finger leaves the screen\n      event.target = outTarget;\n      event.relatedTarget = null;\n      this.cancelOut_(browserEvent, event);\n    }\n  }\n  pointer.out = event;\n  pointer.outTarget = event.target;\n};\n\n\n/**\n * Handler for `touchend`, triggers `pointerup`,\n * `pointerout` and `pointerleave` events.\n *\n * @param {Event} inEvent The event.\n */\n_ol_pointer_TouchSource_.prototype.touchend = function(inEvent) {\n  this.dedupSynthMouse_(inEvent);\n  this.processTouches_(inEvent, this.upOut_);\n};\n\n\n/**\n * @private\n * @param {Event} browserEvent An event.\n * @param {Object} inPointer The inPointer object.\n */\n_ol_pointer_TouchSource_.prototype.upOut_ = function(browserEvent, inPointer) {\n  this.dispatcher.up(inPointer, browserEvent);\n  this.dispatcher.out(inPointer, browserEvent);\n  this.dispatcher.leave(inPointer, browserEvent);\n  this.cleanUpPointer_(inPointer);\n};\n\n\n/**\n * Handler for `touchcancel`, triggers `pointercancel`,\n * `pointerout` and `pointerleave` events.\n *\n * @param {Event} inEvent The in event.\n */\n_ol_pointer_TouchSource_.prototype.touchcancel = function(inEvent) {\n  this.processTouches_(inEvent, this.cancelOut_);\n};\n\n\n/**\n * @private\n * @param {Event} browserEvent The event.\n * @param {Object} inPointer The in pointer.\n */\n_ol_pointer_TouchSource_.prototype.cancelOut_ = function(browserEvent, inPointer) {\n  this.dispatcher.cancel(inPointer, browserEvent);\n  this.dispatcher.out(inPointer, browserEvent);\n  this.dispatcher.leave(inPointer, browserEvent);\n  this.cleanUpPointer_(inPointer);\n};\n\n\n/**\n * @private\n * @param {Object} inPointer The inPointer object.\n */\n_ol_pointer_TouchSource_.prototype.cleanUpPointer_ = function(inPointer) {\n  delete this.pointerMap[inPointer.pointerId];\n  this.removePrimaryPointer_(inPointer);\n};\n\n\n/**\n * Prevent synth mouse events from creating pointer events.\n *\n * @private\n * @param {Event} inEvent The in event.\n */\n_ol_pointer_TouchSource_.prototype.dedupSynthMouse_ = function(inEvent) {\n  var lts = this.mouseSource.lastTouches;\n  var t = inEvent.changedTouches[0];\n  // only the primary finger will synth mouse events\n  if (this.isPrimaryTouch_(t)) {\n    // remember x/y of last touch\n    var lt = [t.clientX, t.clientY];\n    lts.push(lt);\n\n    setTimeout(function() {\n      // remove touch after timeout\n      _ol_array_.remove(lts, lt);\n    }, _ol_pointer_TouchSource_.DEDUP_TIMEOUT);\n  }\n};\nexport default _ol_pointer_TouchSource_;\n","// Based on https://github.com/Polymer/PointerEvents\n\n// Copyright (c) 2013 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n// * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n// * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n// * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nimport _ol_ from '../index.js';\nimport _ol_events_ from '../events.js';\nimport _ol_events_EventTarget_ from '../events/eventtarget.js';\nimport _ol_has_ from '../has.js';\nimport _ol_pointer_EventType_ from '../pointer/eventtype.js';\nimport _ol_pointer_MouseSource_ from '../pointer/mousesource.js';\nimport _ol_pointer_MsSource_ from '../pointer/mssource.js';\nimport _ol_pointer_NativeSource_ from '../pointer/nativesource.js';\nimport _ol_pointer_PointerEvent_ from '../pointer/pointerevent.js';\nimport _ol_pointer_TouchSource_ from '../pointer/touchsource.js';\n\n/**\n * @constructor\n * @extends {ol.events.EventTarget}\n * @param {Element|HTMLDocument} element Viewport element.\n */\nvar _ol_pointer_PointerEventHandler_ = function(element) {\n  _ol_events_EventTarget_.call(this);\n\n  /**\n   * @const\n   * @private\n   * @type {Element|HTMLDocument}\n   */\n  this.element_ = element;\n\n  /**\n   * @const\n   * @type {!Object.<string, Event|Object>}\n   */\n  this.pointerMap = {};\n\n  /**\n   * @type {Object.<string, function(Event)>}\n   * @private\n   */\n  this.eventMap_ = {};\n\n  /**\n   * @type {Array.<ol.pointer.EventSource>}\n   * @private\n   */\n  this.eventSourceList_ = [];\n\n  this.registerSources();\n};\n\n_ol_.inherits(_ol_pointer_PointerEventHandler_, _ol_events_EventTarget_);\n\n\n/**\n * Set up the event sources (mouse, touch and native pointers)\n * that generate pointer events.\n */\n_ol_pointer_PointerEventHandler_.prototype.registerSources = function() {\n  if (_ol_has_.POINTER) {\n    this.registerSource('native', new _ol_pointer_NativeSource_(this));\n  } else if (_ol_has_.MSPOINTER) {\n    this.registerSource('ms', new _ol_pointer_MsSource_(this));\n  } else {\n    var mouseSource = new _ol_pointer_MouseSource_(this);\n    this.registerSource('mouse', mouseSource);\n\n    if (_ol_has_.TOUCH) {\n      this.registerSource('touch',\n          new _ol_pointer_TouchSource_(this, mouseSource));\n    }\n  }\n\n  // register events on the viewport element\n  this.register_();\n};\n\n\n/**\n * Add a new event source that will generate pointer events.\n *\n * @param {string} name A name for the event source\n * @param {ol.pointer.EventSource} source The source event.\n */\n_ol_pointer_PointerEventHandler_.prototype.registerSource = function(name, source) {\n  var s = source;\n  var newEvents = s.getEvents();\n\n  if (newEvents) {\n    newEvents.forEach(function(e) {\n      var handler = s.getHandlerForEvent(e);\n\n      if (handler) {\n        this.eventMap_[e] = handler.bind(s);\n      }\n    }, this);\n    this.eventSourceList_.push(s);\n  }\n};\n\n\n/**\n * Set up the events for all registered event sources.\n * @private\n */\n_ol_pointer_PointerEventHandler_.prototype.register_ = function() {\n  var l = this.eventSourceList_.length;\n  var eventSource;\n  for (var i = 0; i < l; i++) {\n    eventSource = this.eventSourceList_[i];\n    this.addEvents_(eventSource.getEvents());\n  }\n};\n\n\n/**\n * Remove all registered events.\n * @private\n */\n_ol_pointer_PointerEventHandler_.prototype.unregister_ = function() {\n  var l = this.eventSourceList_.length;\n  var eventSource;\n  for (var i = 0; i < l; i++) {\n    eventSource = this.eventSourceList_[i];\n    this.removeEvents_(eventSource.getEvents());\n  }\n};\n\n\n/**\n * Calls the right handler for a new event.\n * @private\n * @param {Event} inEvent Browser event.\n */\n_ol_pointer_PointerEventHandler_.prototype.eventHandler_ = function(inEvent) {\n  var type = inEvent.type;\n  var handler = this.eventMap_[type];\n  if (handler) {\n    handler(inEvent);\n  }\n};\n\n\n/**\n * Setup listeners for the given events.\n * @private\n * @param {Array.<string>} events List of events.\n */\n_ol_pointer_PointerEventHandler_.prototype.addEvents_ = function(events) {\n  events.forEach(function(eventName) {\n    _ol_events_.listen(this.element_, eventName, this.eventHandler_, this);\n  }, this);\n};\n\n\n/**\n * Unregister listeners for the given events.\n * @private\n * @param {Array.<string>} events List of events.\n */\n_ol_pointer_PointerEventHandler_.prototype.removeEvents_ = function(events) {\n  events.forEach(function(e) {\n    _ol_events_.unlisten(this.element_, e, this.eventHandler_, this);\n  }, this);\n};\n\n\n/**\n * Returns a snapshot of inEvent, with writable properties.\n *\n * @param {Event} event Browser event.\n * @param {Event|Touch} inEvent An event that contains\n *    properties to copy.\n * @return {Object} An object containing shallow copies of\n *    `inEvent`'s properties.\n */\n_ol_pointer_PointerEventHandler_.prototype.cloneEvent = function(event, inEvent) {\n  var eventCopy = {}, p;\n  for (var i = 0, ii = _ol_pointer_PointerEventHandler_.CLONE_PROPS.length; i < ii; i++) {\n    p = _ol_pointer_PointerEventHandler_.CLONE_PROPS[i][0];\n    eventCopy[p] = event[p] || inEvent[p] || _ol_pointer_PointerEventHandler_.CLONE_PROPS[i][1];\n  }\n\n  return eventCopy;\n};\n\n\n// EVENTS\n\n\n/**\n * Triggers a 'pointerdown' event.\n * @param {Object} data Pointer event data.\n * @param {Event} event The event.\n */\n_ol_pointer_PointerEventHandler_.prototype.down = function(data, event) {\n  this.fireEvent(_ol_pointer_EventType_.POINTERDOWN, data, event);\n};\n\n\n/**\n * Triggers a 'pointermove' event.\n * @param {Object} data Pointer event data.\n * @param {Event} event The event.\n */\n_ol_pointer_PointerEventHandler_.prototype.move = function(data, event) {\n  this.fireEvent(_ol_pointer_EventType_.POINTERMOVE, data, event);\n};\n\n\n/**\n * Triggers a 'pointerup' event.\n * @param {Object} data Pointer event data.\n * @param {Event} event The event.\n */\n_ol_pointer_PointerEventHandler_.prototype.up = function(data, event) {\n  this.fireEvent(_ol_pointer_EventType_.POINTERUP, data, event);\n};\n\n\n/**\n * Triggers a 'pointerenter' event.\n * @param {Object} data Pointer event data.\n * @param {Event} event The event.\n */\n_ol_pointer_PointerEventHandler_.prototype.enter = function(data, event) {\n  data.bubbles = false;\n  this.fireEvent(_ol_pointer_EventType_.POINTERENTER, data, event);\n};\n\n\n/**\n * Triggers a 'pointerleave' event.\n * @param {Object} data Pointer event data.\n * @param {Event} event The event.\n */\n_ol_pointer_PointerEventHandler_.prototype.leave = function(data, event) {\n  data.bubbles = false;\n  this.fireEvent(_ol_pointer_EventType_.POINTERLEAVE, data, event);\n};\n\n\n/**\n * Triggers a 'pointerover' event.\n * @param {Object} data Pointer event data.\n * @param {Event} event The event.\n */\n_ol_pointer_PointerEventHandler_.prototype.over = function(data, event) {\n  data.bubbles = true;\n  this.fireEvent(_ol_pointer_EventType_.POINTEROVER, data, event);\n};\n\n\n/**\n * Triggers a 'pointerout' event.\n * @param {Object} data Pointer event data.\n * @param {Event} event The event.\n */\n_ol_pointer_PointerEventHandler_.prototype.out = function(data, event) {\n  data.bubbles = true;\n  this.fireEvent(_ol_pointer_EventType_.POINTEROUT, data, event);\n};\n\n\n/**\n * Triggers a 'pointercancel' event.\n * @param {Object} data Pointer event data.\n * @param {Event} event The event.\n */\n_ol_pointer_PointerEventHandler_.prototype.cancel = function(data, event) {\n  this.fireEvent(_ol_pointer_EventType_.POINTERCANCEL, data, event);\n};\n\n\n/**\n * Triggers a combination of 'pointerout' and 'pointerleave' events.\n * @param {Object} data Pointer event data.\n * @param {Event} event The event.\n */\n_ol_pointer_PointerEventHandler_.prototype.leaveOut = function(data, event) {\n  this.out(data, event);\n  if (!this.contains_(data.target, data.relatedTarget)) {\n    this.leave(data, event);\n  }\n};\n\n\n/**\n * Triggers a combination of 'pointerover' and 'pointerevents' events.\n * @param {Object} data Pointer event data.\n * @param {Event} event The event.\n */\n_ol_pointer_PointerEventHandler_.prototype.enterOver = function(data, event) {\n  this.over(data, event);\n  if (!this.contains_(data.target, data.relatedTarget)) {\n    this.enter(data, event);\n  }\n};\n\n\n/**\n * @private\n * @param {Element} container The container element.\n * @param {Element} contained The contained element.\n * @return {boolean} Returns true if the container element\n *   contains the other element.\n */\n_ol_pointer_PointerEventHandler_.prototype.contains_ = function(container, contained) {\n  if (!container || !contained) {\n    return false;\n  }\n  return container.contains(contained);\n};\n\n\n// EVENT CREATION AND TRACKING\n/**\n * Creates a new Event of type `inType`, based on the information in\n * `data`.\n *\n * @param {string} inType A string representing the type of event to create.\n * @param {Object} data Pointer event data.\n * @param {Event} event The event.\n * @return {ol.pointer.PointerEvent} A PointerEvent of type `inType`.\n */\n_ol_pointer_PointerEventHandler_.prototype.makeEvent = function(inType, data, event) {\n  return new _ol_pointer_PointerEvent_(inType, event, data);\n};\n\n\n/**\n * Make and dispatch an event in one call.\n * @param {string} inType A string representing the type of event.\n * @param {Object} data Pointer event data.\n * @param {Event} event The event.\n */\n_ol_pointer_PointerEventHandler_.prototype.fireEvent = function(inType, data, event) {\n  var e = this.makeEvent(inType, data, event);\n  this.dispatchEvent(e);\n};\n\n\n/**\n * Creates a pointer event from a native pointer event\n * and dispatches this event.\n * @param {Event} event A platform event with a target.\n */\n_ol_pointer_PointerEventHandler_.prototype.fireNativeEvent = function(event) {\n  var e = this.makeEvent(event.type, event, event);\n  this.dispatchEvent(e);\n};\n\n\n/**\n * Wrap a native mouse event into a pointer event.\n * This proxy method is required for the legacy IE support.\n * @param {string} eventType The pointer event type.\n * @param {Event} event The event.\n * @return {ol.pointer.PointerEvent} The wrapped event.\n */\n_ol_pointer_PointerEventHandler_.prototype.wrapMouseEvent = function(eventType, event) {\n  var pointerEvent = this.makeEvent(\n      eventType, _ol_pointer_MouseSource_.prepareEvent(event, this), event);\n  return pointerEvent;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_pointer_PointerEventHandler_.prototype.disposeInternal = function() {\n  this.unregister_();\n  _ol_events_EventTarget_.prototype.disposeInternal.call(this);\n};\n\n\n/**\n * Properties to copy when cloning an event, with default values.\n * @type {Array.<Array>}\n */\n_ol_pointer_PointerEventHandler_.CLONE_PROPS = [\n  // MouseEvent\n  ['bubbles', false],\n  ['cancelable', false],\n  ['view', null],\n  ['detail', null],\n  ['screenX', 0],\n  ['screenY', 0],\n  ['clientX', 0],\n  ['clientY', 0],\n  ['ctrlKey', false],\n  ['altKey', false],\n  ['shiftKey', false],\n  ['metaKey', false],\n  ['button', 0],\n  ['relatedTarget', null],\n  // DOM Level 3\n  ['buttons', 0],\n  // PointerEvent\n  ['pointerId', 0],\n  ['width', 0],\n  ['height', 0],\n  ['pressure', 0],\n  ['tiltX', 0],\n  ['tiltY', 0],\n  ['pointerType', ''],\n  ['hwTimestamp', 0],\n  ['isPrimary', false],\n  // event instance\n  ['type', ''],\n  ['target', null],\n  ['currentTarget', null],\n  ['which', 0]\n];\nexport default _ol_pointer_PointerEventHandler_;\n","import _ol_ from './index.js';\nimport _ol_has_ from './has.js';\nimport _ol_MapBrowserEventType_ from './mapbrowsereventtype.js';\nimport _ol_MapBrowserPointerEvent_ from './mapbrowserpointerevent.js';\nimport _ol_events_ from './events.js';\nimport _ol_events_EventTarget_ from './events/eventtarget.js';\nimport _ol_pointer_EventType_ from './pointer/eventtype.js';\nimport _ol_pointer_PointerEventHandler_ from './pointer/pointereventhandler.js';\n\n/**\n * @param {ol.PluggableMap} map The map with the viewport to listen to events on.\n * @param {number|undefined} moveTolerance The minimal distance the pointer must travel to trigger a move.\n * @constructor\n * @extends {ol.events.EventTarget}\n */\nvar _ol_MapBrowserEventHandler_ = function(map, moveTolerance) {\n\n  _ol_events_EventTarget_.call(this);\n\n  /**\n   * This is the element that we will listen to the real events on.\n   * @type {ol.PluggableMap}\n   * @private\n   */\n  this.map_ = map;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.clickTimeoutId_ = 0;\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.dragging_ = false;\n\n  /**\n   * @type {!Array.<ol.EventsKey>}\n   * @private\n   */\n  this.dragListenerKeys_ = [];\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.moveTolerance_ = moveTolerance ?\n    moveTolerance * _ol_has_.DEVICE_PIXEL_RATIO : _ol_has_.DEVICE_PIXEL_RATIO;\n\n  /**\n   * The most recent \"down\" type event (or null if none have occurred).\n   * Set on pointerdown.\n   * @type {ol.pointer.PointerEvent}\n   * @private\n   */\n  this.down_ = null;\n\n  var element = this.map_.getViewport();\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.activePointers_ = 0;\n\n  /**\n   * @type {!Object.<number, boolean>}\n   * @private\n   */\n  this.trackedTouches_ = {};\n\n  /**\n   * Event handler which generates pointer events for\n   * the viewport element.\n   *\n   * @type {ol.pointer.PointerEventHandler}\n   * @private\n   */\n  this.pointerEventHandler_ = new _ol_pointer_PointerEventHandler_(element);\n\n  /**\n   * Event handler which generates pointer events for\n   * the document (used when dragging).\n   *\n   * @type {ol.pointer.PointerEventHandler}\n   * @private\n   */\n  this.documentPointerEventHandler_ = null;\n\n  /**\n   * @type {?ol.EventsKey}\n   * @private\n   */\n  this.pointerdownListenerKey_ = _ol_events_.listen(this.pointerEventHandler_,\n      _ol_pointer_EventType_.POINTERDOWN,\n      this.handlePointerDown_, this);\n\n  /**\n   * @type {?ol.EventsKey}\n   * @private\n   */\n  this.relayedListenerKey_ = _ol_events_.listen(this.pointerEventHandler_,\n      _ol_pointer_EventType_.POINTERMOVE,\n      this.relayEvent_, this);\n\n};\n\n_ol_.inherits(_ol_MapBrowserEventHandler_, _ol_events_EventTarget_);\n\n\n/**\n * @param {ol.pointer.PointerEvent} pointerEvent Pointer event.\n * @private\n */\n_ol_MapBrowserEventHandler_.prototype.emulateClick_ = function(pointerEvent) {\n  var newEvent = new _ol_MapBrowserPointerEvent_(\n      _ol_MapBrowserEventType_.CLICK, this.map_, pointerEvent);\n  this.dispatchEvent(newEvent);\n  if (this.clickTimeoutId_ !== 0) {\n    // double-click\n    clearTimeout(this.clickTimeoutId_);\n    this.clickTimeoutId_ = 0;\n    newEvent = new _ol_MapBrowserPointerEvent_(\n        _ol_MapBrowserEventType_.DBLCLICK, this.map_, pointerEvent);\n    this.dispatchEvent(newEvent);\n  } else {\n    // click\n    this.clickTimeoutId_ = setTimeout(function() {\n      this.clickTimeoutId_ = 0;\n      var newEvent = new _ol_MapBrowserPointerEvent_(\n          _ol_MapBrowserEventType_.SINGLECLICK, this.map_, pointerEvent);\n      this.dispatchEvent(newEvent);\n    }.bind(this), 250);\n  }\n};\n\n\n/**\n * Keeps track on how many pointers are currently active.\n *\n * @param {ol.pointer.PointerEvent} pointerEvent Pointer event.\n * @private\n */\n_ol_MapBrowserEventHandler_.prototype.updateActivePointers_ = function(pointerEvent) {\n  var event = pointerEvent;\n\n  if (event.type == _ol_MapBrowserEventType_.POINTERUP ||\n      event.type == _ol_MapBrowserEventType_.POINTERCANCEL) {\n    delete this.trackedTouches_[event.pointerId];\n  } else if (event.type == _ol_MapBrowserEventType_.POINTERDOWN) {\n    this.trackedTouches_[event.pointerId] = true;\n  }\n  this.activePointers_ = Object.keys(this.trackedTouches_).length;\n};\n\n\n/**\n * @param {ol.pointer.PointerEvent} pointerEvent Pointer event.\n * @private\n */\n_ol_MapBrowserEventHandler_.prototype.handlePointerUp_ = function(pointerEvent) {\n  this.updateActivePointers_(pointerEvent);\n  var newEvent = new _ol_MapBrowserPointerEvent_(\n      _ol_MapBrowserEventType_.POINTERUP, this.map_, pointerEvent);\n  this.dispatchEvent(newEvent);\n\n  // We emulate click events on left mouse button click, touch contact, and pen\n  // contact. isMouseActionButton returns true in these cases (evt.button is set\n  // to 0).\n  // See http://www.w3.org/TR/pointerevents/#button-states\n  // We only fire click, singleclick, and doubleclick if nobody has called\n  // event.stopPropagation() or event.preventDefault().\n  if (!newEvent.propagationStopped && !this.dragging_ && this.isMouseActionButton_(pointerEvent)) {\n    this.emulateClick_(this.down_);\n  }\n\n  if (this.activePointers_ === 0) {\n    this.dragListenerKeys_.forEach(_ol_events_.unlistenByKey);\n    this.dragListenerKeys_.length = 0;\n    this.dragging_ = false;\n    this.down_ = null;\n    this.documentPointerEventHandler_.dispose();\n    this.documentPointerEventHandler_ = null;\n  }\n};\n\n\n/**\n * @param {ol.pointer.PointerEvent} pointerEvent Pointer event.\n * @return {boolean} If the left mouse button was pressed.\n * @private\n */\n_ol_MapBrowserEventHandler_.prototype.isMouseActionButton_ = function(pointerEvent) {\n  return pointerEvent.button === 0;\n};\n\n\n/**\n * @param {ol.pointer.PointerEvent} pointerEvent Pointer event.\n * @private\n */\n_ol_MapBrowserEventHandler_.prototype.handlePointerDown_ = function(pointerEvent) {\n  this.updateActivePointers_(pointerEvent);\n  var newEvent = new _ol_MapBrowserPointerEvent_(\n      _ol_MapBrowserEventType_.POINTERDOWN, this.map_, pointerEvent);\n  this.dispatchEvent(newEvent);\n\n  this.down_ = pointerEvent;\n\n  if (this.dragListenerKeys_.length === 0) {\n    /* Set up a pointer event handler on the `document`,\n     * which is required when the pointer is moved outside\n     * the viewport when dragging.\n     */\n    this.documentPointerEventHandler_ =\n        new _ol_pointer_PointerEventHandler_(document);\n\n    this.dragListenerKeys_.push(\n        _ol_events_.listen(this.documentPointerEventHandler_,\n            _ol_MapBrowserEventType_.POINTERMOVE,\n            this.handlePointerMove_, this),\n        _ol_events_.listen(this.documentPointerEventHandler_,\n            _ol_MapBrowserEventType_.POINTERUP,\n            this.handlePointerUp_, this),\n        /* Note that the listener for `pointercancel is set up on\n       * `pointerEventHandler_` and not `documentPointerEventHandler_` like\n       * the `pointerup` and `pointermove` listeners.\n       *\n       * The reason for this is the following: `TouchSource.vacuumTouches_()`\n       * issues `pointercancel` events, when there was no `touchend` for a\n       * `touchstart`. Now, let's say a first `touchstart` is registered on\n       * `pointerEventHandler_`. The `documentPointerEventHandler_` is set up.\n       * But `documentPointerEventHandler_` doesn't know about the first\n       * `touchstart`. If there is no `touchend` for the `touchstart`, we can\n       * only receive a `touchcancel` from `pointerEventHandler_`, because it is\n       * only registered there.\n       */\n        _ol_events_.listen(this.pointerEventHandler_,\n            _ol_MapBrowserEventType_.POINTERCANCEL,\n            this.handlePointerUp_, this)\n    );\n  }\n};\n\n\n/**\n * @param {ol.pointer.PointerEvent} pointerEvent Pointer event.\n * @private\n */\n_ol_MapBrowserEventHandler_.prototype.handlePointerMove_ = function(pointerEvent) {\n  // Between pointerdown and pointerup, pointermove events are triggered.\n  // To avoid a 'false' touchmove event to be dispatched, we test if the pointer\n  // moved a significant distance.\n  if (this.isMoving_(pointerEvent)) {\n    this.dragging_ = true;\n    var newEvent = new _ol_MapBrowserPointerEvent_(\n        _ol_MapBrowserEventType_.POINTERDRAG, this.map_, pointerEvent,\n        this.dragging_);\n    this.dispatchEvent(newEvent);\n  }\n\n  // Some native android browser triggers mousemove events during small period\n  // of time. See: https://code.google.com/p/android/issues/detail?id=5491 or\n  // https://code.google.com/p/android/issues/detail?id=19827\n  // ex: Galaxy Tab P3110 + Android 4.1.1\n  pointerEvent.preventDefault();\n};\n\n\n/**\n * Wrap and relay a pointer event.  Note that this requires that the type\n * string for the MapBrowserPointerEvent matches the PointerEvent type.\n * @param {ol.pointer.PointerEvent} pointerEvent Pointer event.\n * @private\n */\n_ol_MapBrowserEventHandler_.prototype.relayEvent_ = function(pointerEvent) {\n  var dragging = !!(this.down_ && this.isMoving_(pointerEvent));\n  this.dispatchEvent(new _ol_MapBrowserPointerEvent_(\n      pointerEvent.type, this.map_, pointerEvent, dragging));\n};\n\n\n/**\n * @param {ol.pointer.PointerEvent} pointerEvent Pointer event.\n * @return {boolean} Is moving.\n * @private\n */\n_ol_MapBrowserEventHandler_.prototype.isMoving_ = function(pointerEvent) {\n  return Math.abs(pointerEvent.clientX - this.down_.clientX) > this.moveTolerance_ ||\n      Math.abs(pointerEvent.clientY - this.down_.clientY) > this.moveTolerance_;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_MapBrowserEventHandler_.prototype.disposeInternal = function() {\n  if (this.relayedListenerKey_) {\n    _ol_events_.unlistenByKey(this.relayedListenerKey_);\n    this.relayedListenerKey_ = null;\n  }\n  if (this.pointerdownListenerKey_) {\n    _ol_events_.unlistenByKey(this.pointerdownListenerKey_);\n    this.pointerdownListenerKey_ = null;\n  }\n\n  this.dragListenerKeys_.forEach(_ol_events_.unlistenByKey);\n  this.dragListenerKeys_.length = 0;\n\n  if (this.documentPointerEventHandler_) {\n    this.documentPointerEventHandler_.dispose();\n    this.documentPointerEventHandler_ = null;\n  }\n  if (this.pointerEventHandler_) {\n    this.pointerEventHandler_.dispose();\n    this.pointerEventHandler_ = null;\n  }\n  _ol_events_EventTarget_.prototype.disposeInternal.call(this);\n};\nexport default _ol_MapBrowserEventHandler_;\n","/**\n * @enum {string}\n */\nvar _ol_MapProperty_ = {\n  LAYERGROUP: 'layergroup',\n  SIZE: 'size',\n  TARGET: 'target',\n  VIEW: 'view'\n};\n\nexport default _ol_MapProperty_;\n","import _ol_asserts_ from '../asserts.js';\nimport _ol_obj_ from '../obj.js';\n\n/**\n * Priority queue.\n *\n * The implementation is inspired from the Closure Library's Heap class and\n * Python's heapq module.\n *\n * @see http://closure-library.googlecode.com/svn/docs/closure_goog_structs_heap.js.source.html\n * @see http://hg.python.org/cpython/file/2.7/Lib/heapq.py\n *\n * @constructor\n * @param {function(T): number} priorityFunction Priority function.\n * @param {function(T): string} keyFunction Key function.\n * @struct\n * @template T\n */\nvar _ol_structs_PriorityQueue_ = function(priorityFunction, keyFunction) {\n\n  /**\n   * @type {function(T): number}\n   * @private\n   */\n  this.priorityFunction_ = priorityFunction;\n\n  /**\n   * @type {function(T): string}\n   * @private\n   */\n  this.keyFunction_ = keyFunction;\n\n  /**\n   * @type {Array.<T>}\n   * @private\n   */\n  this.elements_ = [];\n\n  /**\n   * @type {Array.<number>}\n   * @private\n   */\n  this.priorities_ = [];\n\n  /**\n   * @type {Object.<string, boolean>}\n   * @private\n   */\n  this.queuedElements_ = {};\n\n};\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_structs_PriorityQueue_.DROP = Infinity;\n\n\n/**\n * FIXME empty description for jsdoc\n */\n_ol_structs_PriorityQueue_.prototype.clear = function() {\n  this.elements_.length = 0;\n  this.priorities_.length = 0;\n  _ol_obj_.clear(this.queuedElements_);\n};\n\n\n/**\n * Remove and return the highest-priority element. O(log N).\n * @return {T} Element.\n */\n_ol_structs_PriorityQueue_.prototype.dequeue = function() {\n  var elements = this.elements_;\n  var priorities = this.priorities_;\n  var element = elements[0];\n  if (elements.length == 1) {\n    elements.length = 0;\n    priorities.length = 0;\n  } else {\n    elements[0] = elements.pop();\n    priorities[0] = priorities.pop();\n    this.siftUp_(0);\n  }\n  var elementKey = this.keyFunction_(element);\n  delete this.queuedElements_[elementKey];\n  return element;\n};\n\n\n/**\n * Enqueue an element. O(log N).\n * @param {T} element Element.\n * @return {boolean} The element was added to the queue.\n */\n_ol_structs_PriorityQueue_.prototype.enqueue = function(element) {\n  _ol_asserts_.assert(!(this.keyFunction_(element) in this.queuedElements_),\n      31); // Tried to enqueue an `element` that was already added to the queue\n  var priority = this.priorityFunction_(element);\n  if (priority != _ol_structs_PriorityQueue_.DROP) {\n    this.elements_.push(element);\n    this.priorities_.push(priority);\n    this.queuedElements_[this.keyFunction_(element)] = true;\n    this.siftDown_(0, this.elements_.length - 1);\n    return true;\n  }\n  return false;\n};\n\n\n/**\n * @return {number} Count.\n */\n_ol_structs_PriorityQueue_.prototype.getCount = function() {\n  return this.elements_.length;\n};\n\n\n/**\n * Gets the index of the left child of the node at the given index.\n * @param {number} index The index of the node to get the left child for.\n * @return {number} The index of the left child.\n * @private\n */\n_ol_structs_PriorityQueue_.prototype.getLeftChildIndex_ = function(index) {\n  return index * 2 + 1;\n};\n\n\n/**\n * Gets the index of the right child of the node at the given index.\n * @param {number} index The index of the node to get the right child for.\n * @return {number} The index of the right child.\n * @private\n */\n_ol_structs_PriorityQueue_.prototype.getRightChildIndex_ = function(index) {\n  return index * 2 + 2;\n};\n\n\n/**\n * Gets the index of the parent of the node at the given index.\n * @param {number} index The index of the node to get the parent for.\n * @return {number} The index of the parent.\n * @private\n */\n_ol_structs_PriorityQueue_.prototype.getParentIndex_ = function(index) {\n  return (index - 1) >> 1;\n};\n\n\n/**\n * Make this a heap. O(N).\n * @private\n */\n_ol_structs_PriorityQueue_.prototype.heapify_ = function() {\n  var i;\n  for (i = (this.elements_.length >> 1) - 1; i >= 0; i--) {\n    this.siftUp_(i);\n  }\n};\n\n\n/**\n * @return {boolean} Is empty.\n */\n_ol_structs_PriorityQueue_.prototype.isEmpty = function() {\n  return this.elements_.length === 0;\n};\n\n\n/**\n * @param {string} key Key.\n * @return {boolean} Is key queued.\n */\n_ol_structs_PriorityQueue_.prototype.isKeyQueued = function(key) {\n  return key in this.queuedElements_;\n};\n\n\n/**\n * @param {T} element Element.\n * @return {boolean} Is queued.\n */\n_ol_structs_PriorityQueue_.prototype.isQueued = function(element) {\n  return this.isKeyQueued(this.keyFunction_(element));\n};\n\n\n/**\n * @param {number} index The index of the node to move down.\n * @private\n */\n_ol_structs_PriorityQueue_.prototype.siftUp_ = function(index) {\n  var elements = this.elements_;\n  var priorities = this.priorities_;\n  var count = elements.length;\n  var element = elements[index];\n  var priority = priorities[index];\n  var startIndex = index;\n\n  while (index < (count >> 1)) {\n    var lIndex = this.getLeftChildIndex_(index);\n    var rIndex = this.getRightChildIndex_(index);\n\n    var smallerChildIndex = rIndex < count &&\n        priorities[rIndex] < priorities[lIndex] ?\n      rIndex : lIndex;\n\n    elements[index] = elements[smallerChildIndex];\n    priorities[index] = priorities[smallerChildIndex];\n    index = smallerChildIndex;\n  }\n\n  elements[index] = element;\n  priorities[index] = priority;\n  this.siftDown_(startIndex, index);\n};\n\n\n/**\n * @param {number} startIndex The index of the root.\n * @param {number} index The index of the node to move up.\n * @private\n */\n_ol_structs_PriorityQueue_.prototype.siftDown_ = function(startIndex, index) {\n  var elements = this.elements_;\n  var priorities = this.priorities_;\n  var element = elements[index];\n  var priority = priorities[index];\n\n  while (index > startIndex) {\n    var parentIndex = this.getParentIndex_(index);\n    if (priorities[parentIndex] > priority) {\n      elements[index] = elements[parentIndex];\n      priorities[index] = priorities[parentIndex];\n      index = parentIndex;\n    } else {\n      break;\n    }\n  }\n  elements[index] = element;\n  priorities[index] = priority;\n};\n\n\n/**\n * FIXME empty description for jsdoc\n */\n_ol_structs_PriorityQueue_.prototype.reprioritize = function() {\n  var priorityFunction = this.priorityFunction_;\n  var elements = this.elements_;\n  var priorities = this.priorities_;\n  var index = 0;\n  var n = elements.length;\n  var element, i, priority;\n  for (i = 0; i < n; ++i) {\n    element = elements[i];\n    priority = priorityFunction(element);\n    if (priority == _ol_structs_PriorityQueue_.DROP) {\n      delete this.queuedElements_[this.keyFunction_(element)];\n    } else {\n      priorities[index] = priority;\n      elements[index++] = element;\n    }\n  }\n  elements.length = index;\n  priorities.length = index;\n  this.heapify_();\n};\nexport default _ol_structs_PriorityQueue_;\n","import _ol_ from './index.js';\nimport _ol_TileState_ from './tilestate.js';\nimport _ol_events_ from './events.js';\nimport _ol_events_EventType_ from './events/eventtype.js';\nimport _ol_structs_PriorityQueue_ from './structs/priorityqueue.js';\n\n/**\n * @constructor\n * @extends {ol.structs.PriorityQueue.<Array>}\n * @param {ol.TilePriorityFunction} tilePriorityFunction\n *     Tile priority function.\n * @param {function(): ?} tileChangeCallback\n *     Function called on each tile change event.\n * @struct\n */\nvar _ol_TileQueue_ = function(tilePriorityFunction, tileChangeCallback) {\n\n  _ol_structs_PriorityQueue_.call(\n      this,\n      /**\n       * @param {Array} element Element.\n       * @return {number} Priority.\n       */\n      function(element) {\n        return tilePriorityFunction.apply(null, element);\n      },\n      /**\n       * @param {Array} element Element.\n       * @return {string} Key.\n       */\n      function(element) {\n        return /** @type {ol.Tile} */ (element[0]).getKey();\n      });\n\n  /**\n   * @private\n   * @type {function(): ?}\n   */\n  this.tileChangeCallback_ = tileChangeCallback;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.tilesLoading_ = 0;\n\n  /**\n   * @private\n   * @type {!Object.<string,boolean>}\n   */\n  this.tilesLoadingKeys_ = {};\n\n};\n\n_ol_.inherits(_ol_TileQueue_, _ol_structs_PriorityQueue_);\n\n\n/**\n * @inheritDoc\n */\n_ol_TileQueue_.prototype.enqueue = function(element) {\n  var added = _ol_structs_PriorityQueue_.prototype.enqueue.call(this, element);\n  if (added) {\n    var tile = element[0];\n    _ol_events_.listen(tile, _ol_events_EventType_.CHANGE,\n        this.handleTileChange, this);\n  }\n  return added;\n};\n\n\n/**\n * @return {number} Number of tiles loading.\n */\n_ol_TileQueue_.prototype.getTilesLoading = function() {\n  return this.tilesLoading_;\n};\n\n\n/**\n * @param {ol.events.Event} event Event.\n * @protected\n */\n_ol_TileQueue_.prototype.handleTileChange = function(event) {\n  var tile = /** @type {ol.Tile} */ (event.target);\n  var state = tile.getState();\n  if (state === _ol_TileState_.LOADED || state === _ol_TileState_.ERROR ||\n      state === _ol_TileState_.EMPTY || state === _ol_TileState_.ABORT) {\n    _ol_events_.unlisten(tile, _ol_events_EventType_.CHANGE,\n        this.handleTileChange, this);\n    var tileKey = tile.getKey();\n    if (tileKey in this.tilesLoadingKeys_) {\n      delete this.tilesLoadingKeys_[tileKey];\n      --this.tilesLoading_;\n    }\n    this.tileChangeCallback_();\n  }\n};\n\n\n/**\n * @param {number} maxTotalLoading Maximum number tiles to load simultaneously.\n * @param {number} maxNewLoads Maximum number of new tiles to load.\n */\n_ol_TileQueue_.prototype.loadMoreTiles = function(maxTotalLoading, maxNewLoads) {\n  var newLoads = 0;\n  var abortedTiles = false;\n  var state, tile, tileKey;\n  while (this.tilesLoading_ < maxTotalLoading && newLoads < maxNewLoads &&\n         this.getCount() > 0) {\n    tile = /** @type {ol.Tile} */ (this.dequeue()[0]);\n    tileKey = tile.getKey();\n    state = tile.getState();\n    if (state === _ol_TileState_.ABORT) {\n      abortedTiles = true;\n    } else if (state === _ol_TileState_.IDLE && !(tileKey in this.tilesLoadingKeys_)) {\n      this.tilesLoadingKeys_[tileKey] = true;\n      ++this.tilesLoading_;\n      ++newLoads;\n      tile.load();\n    }\n  }\n  if (newLoads === 0 && abortedTiles) {\n    // Do not stop the render loop when all wanted tiles were aborted due to\n    // a small, saturated tile cache.\n    this.tileChangeCallback_();\n  }\n};\nexport default _ol_TileQueue_;\n","/**\n * A plugin type used when registering a plugin.  The supported plugin types are\n * 'MAP_RENDERER', and 'LAYER_RENDERER'.\n * @enum {string}\n */\nvar _ol_PluginType_ = {\n  MAP_RENDERER: 'MAP_RENDERER',\n  LAYER_RENDERER: 'LAYER_RENDERER'\n};\n\nexport default _ol_PluginType_;\n","import _ol_PluginType_ from './plugintype.js';\nvar _ol_plugins_ = {};\n\n/**\n * The registry of map renderer plugins.\n * @type {Array<olx.MapRendererPlugin>}\n * @private\n */\n_ol_plugins_.mapRendererPlugins_ = [];\n\n\n/**\n * Get all registered map renderer plugins.\n * @return {Array<olx.MapRendererPlugin>} The registered map renderer plugins.\n */\n_ol_plugins_.getMapRendererPlugins = function() {\n  return _ol_plugins_.mapRendererPlugins_;\n};\n\n\n/**\n * The registry of layer renderer plugins.\n * @type {Array<olx.LayerRendererPlugin>}\n * @private\n */\n_ol_plugins_.layerRendererPlugins_ = [];\n\n\n/**\n * Get all registered layer renderer plugins.\n * @return {Array<olx.LayerRendererPlugin>} The registered layer renderer plugins.\n */\n_ol_plugins_.getLayerRendererPlugins = function() {\n  return _ol_plugins_.layerRendererPlugins_;\n};\n\n\n/**\n * Register a plugin.\n * @param {ol.PluginType} type The plugin type.\n * @param {*} plugin The plugin.\n */\n_ol_plugins_.register = function(type, plugin) {\n  var plugins;\n  switch (type) {\n    case _ol_PluginType_.MAP_RENDERER: {\n      plugins = _ol_plugins_.mapRendererPlugins_;\n      plugins.push(/** @type {olx.MapRendererPlugin} */ (plugin));\n      break;\n    }\n    case _ol_PluginType_.LAYER_RENDERER: {\n      plugins = _ol_plugins_.layerRendererPlugins_;\n      plugins.push(/** @type {olx.LayerRendererPlugin} */ (plugin));\n      break;\n    }\n    default: {\n      throw new Error('Unsupported plugin type: ' + type);\n    }\n  }\n};\n\n\n/**\n * Register multiple plugins.\n * @param {ol.PluginType} type The plugin type.\n * @param {Array} plugins The plugins.\n */\n_ol_plugins_.registerMultiple = function(type, plugins) {\n  for (var i = 0, ii = plugins.length; i < ii; ++i) {\n    _ol_plugins_.register(type, plugins[i]);\n  }\n};\nexport default _ol_plugins_;\n","/**\n * Available renderers: `'canvas'` or `'webgl'`.\n * @enum {string}\n */\nvar _ol_renderer_Type_ = {\n  CANVAS: 'canvas',\n  WEBGL: 'webgl'\n};\n\nexport default _ol_renderer_Type_;\n","import _ol_ from './index.js';\nimport _ol_Collection_ from './collection.js';\nimport _ol_CollectionEventType_ from './collectioneventtype.js';\nimport _ol_MapBrowserEvent_ from './mapbrowserevent.js';\nimport _ol_MapBrowserEventHandler_ from './mapbrowsereventhandler.js';\nimport _ol_MapBrowserEventType_ from './mapbrowsereventtype.js';\nimport _ol_MapEvent_ from './mapevent.js';\nimport _ol_MapEventType_ from './mapeventtype.js';\nimport _ol_MapProperty_ from './mapproperty.js';\nimport _ol_Object_ from './object.js';\nimport _ol_ObjectEventType_ from './objecteventtype.js';\nimport _ol_TileQueue_ from './tilequeue.js';\nimport _ol_View_ from './view.js';\nimport _ol_ViewHint_ from './viewhint.js';\nimport _ol_asserts_ from './asserts.js';\nimport _ol_dom_ from './dom.js';\nimport _ol_events_ from './events.js';\nimport _ol_events_Event_ from './events/event.js';\nimport _ol_events_EventType_ from './events/eventtype.js';\nimport _ol_extent_ from './extent.js';\nimport _ol_functions_ from './functions.js';\nimport _ol_has_ from './has.js';\nimport _ol_layer_Group_ from './layer/group.js';\nimport _ol_obj_ from './obj.js';\nimport _ol_plugins_ from './plugins.js';\nimport _ol_renderer_Type_ from './renderer/type.js';\nimport _ol_size_ from './size.js';\nimport _ol_structs_PriorityQueue_ from './structs/priorityqueue.js';\nimport _ol_transform_ from './transform.js';\n\n/**\n * @constructor\n * @extends {ol.Object}\n * @param {olx.MapOptions} options Map options.\n * @fires ol.MapBrowserEvent\n * @fires ol.MapEvent\n * @fires ol.render.Event#postcompose\n * @fires ol.render.Event#precompose\n * @api\n */\nvar _ol_PluggableMap_ = function(options) {\n\n  _ol_Object_.call(this);\n\n  var optionsInternal = _ol_PluggableMap_.createOptionsInternal(options);\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.loadTilesWhileAnimating_ =\n      options.loadTilesWhileAnimating !== undefined ?\n        options.loadTilesWhileAnimating : false;\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.loadTilesWhileInteracting_ =\n      options.loadTilesWhileInteracting !== undefined ?\n        options.loadTilesWhileInteracting : false;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.pixelRatio_ = options.pixelRatio !== undefined ?\n    options.pixelRatio : _ol_has_.DEVICE_PIXEL_RATIO;\n\n  /**\n   * @private\n   * @type {Object.<string, string>}\n   */\n  this.logos_ = optionsInternal.logos;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.animationDelayKey_;\n\n  /**\n   * @private\n   */\n  this.animationDelay_ = function() {\n    this.animationDelayKey_ = undefined;\n    this.renderFrame_.call(this, Date.now());\n  }.bind(this);\n\n  /**\n   * @private\n   * @type {ol.Transform}\n   */\n  this.coordinateToPixelTransform_ = _ol_transform_.create();\n\n  /**\n   * @private\n   * @type {ol.Transform}\n   */\n  this.pixelToCoordinateTransform_ = _ol_transform_.create();\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.frameIndex_ = 0;\n\n  /**\n   * @private\n   * @type {?olx.FrameState}\n   */\n  this.frameState_ = null;\n\n  /**\n   * The extent at the previous 'moveend' event.\n   * @private\n   * @type {ol.Extent}\n   */\n  this.previousExtent_ = null;\n\n  /**\n   * @private\n   * @type {?ol.EventsKey}\n   */\n  this.viewPropertyListenerKey_ = null;\n\n  /**\n   * @private\n   * @type {?ol.EventsKey}\n   */\n  this.viewChangeListenerKey_ = null;\n\n  /**\n   * @private\n   * @type {Array.<ol.EventsKey>}\n   */\n  this.layerGroupPropertyListenerKeys_ = null;\n\n  /**\n   * @private\n   * @type {Element}\n   */\n  this.viewport_ = document.createElement('DIV');\n  this.viewport_.className = 'ol-viewport' + (_ol_has_.TOUCH ? ' ol-touch' : '');\n  this.viewport_.style.position = 'relative';\n  this.viewport_.style.overflow = 'hidden';\n  this.viewport_.style.width = '100%';\n  this.viewport_.style.height = '100%';\n  // prevent page zoom on IE >= 10 browsers\n  this.viewport_.style.msTouchAction = 'none';\n  this.viewport_.style.touchAction = 'none';\n\n  /**\n   * @private\n   * @type {!Element}\n   */\n  this.overlayContainer_ = document.createElement('DIV');\n  this.overlayContainer_.className = 'ol-overlaycontainer';\n  this.viewport_.appendChild(this.overlayContainer_);\n\n  /**\n   * @private\n   * @type {!Element}\n   */\n  this.overlayContainerStopEvent_ = document.createElement('DIV');\n  this.overlayContainerStopEvent_.className = 'ol-overlaycontainer-stopevent';\n  var overlayEvents = [\n    _ol_events_EventType_.CLICK,\n    _ol_events_EventType_.DBLCLICK,\n    _ol_events_EventType_.MOUSEDOWN,\n    _ol_events_EventType_.TOUCHSTART,\n    _ol_events_EventType_.MSPOINTERDOWN,\n    _ol_MapBrowserEventType_.POINTERDOWN,\n    _ol_events_EventType_.MOUSEWHEEL,\n    _ol_events_EventType_.WHEEL\n  ];\n  for (var i = 0, ii = overlayEvents.length; i < ii; ++i) {\n    _ol_events_.listen(this.overlayContainerStopEvent_, overlayEvents[i],\n        _ol_events_Event_.stopPropagation);\n  }\n  this.viewport_.appendChild(this.overlayContainerStopEvent_);\n\n  /**\n   * @private\n   * @type {ol.MapBrowserEventHandler}\n   */\n  this.mapBrowserEventHandler_ = new _ol_MapBrowserEventHandler_(this, options.moveTolerance);\n  for (var key in _ol_MapBrowserEventType_) {\n    _ol_events_.listen(this.mapBrowserEventHandler_, _ol_MapBrowserEventType_[key],\n        this.handleMapBrowserEvent, this);\n  }\n\n  /**\n   * @private\n   * @type {Element|Document}\n   */\n  this.keyboardEventTarget_ = optionsInternal.keyboardEventTarget;\n\n  /**\n   * @private\n   * @type {Array.<ol.EventsKey>}\n   */\n  this.keyHandlerKeys_ = null;\n\n  _ol_events_.listen(this.viewport_, _ol_events_EventType_.WHEEL,\n      this.handleBrowserEvent, this);\n  _ol_events_.listen(this.viewport_, _ol_events_EventType_.MOUSEWHEEL,\n      this.handleBrowserEvent, this);\n\n  /**\n   * @type {ol.Collection.<ol.control.Control>}\n   * @protected\n   */\n  this.controls = optionsInternal.controls || new _ol_Collection_();\n\n  /**\n   * @type {ol.Collection.<ol.interaction.Interaction>}\n   * @protected\n   */\n  this.interactions = optionsInternal.interactions || new _ol_Collection_();\n\n  /**\n   * @type {ol.Collection.<ol.Overlay>}\n   * @private\n   */\n  this.overlays_ = optionsInternal.overlays;\n\n  /**\n   * A lookup of overlays by id.\n   * @private\n   * @type {Object.<string, ol.Overlay>}\n   */\n  this.overlayIdIndex_ = {};\n\n  /**\n   * @type {ol.renderer.Map}\n   * @private\n   */\n  this.renderer_ = optionsInternal.mapRendererPlugin['create'](this.viewport_, this);\n\n  /**\n   * @type {function(Event)|undefined}\n   * @private\n   */\n  this.handleResize_;\n\n  /**\n   * @private\n   * @type {ol.Coordinate}\n   */\n  this.focus_ = null;\n\n  /**\n   * @private\n   * @type {Array.<ol.PostRenderFunction>}\n   */\n  this.postRenderFunctions_ = [];\n\n  /**\n   * @private\n   * @type {ol.TileQueue}\n   */\n  this.tileQueue_ = new _ol_TileQueue_(\n      this.getTilePriority.bind(this),\n      this.handleTileChange_.bind(this));\n\n  /**\n   * Uids of features to skip at rendering time.\n   * @type {Object.<string, boolean>}\n   * @private\n   */\n  this.skippedFeatureUids_ = {};\n\n  _ol_events_.listen(\n      this, _ol_Object_.getChangeEventType(_ol_MapProperty_.LAYERGROUP),\n      this.handleLayerGroupChanged_, this);\n  _ol_events_.listen(this, _ol_Object_.getChangeEventType(_ol_MapProperty_.VIEW),\n      this.handleViewChanged_, this);\n  _ol_events_.listen(this, _ol_Object_.getChangeEventType(_ol_MapProperty_.SIZE),\n      this.handleSizeChanged_, this);\n  _ol_events_.listen(this, _ol_Object_.getChangeEventType(_ol_MapProperty_.TARGET),\n      this.handleTargetChanged_, this);\n\n  // setProperties will trigger the rendering of the map if the map\n  // is \"defined\" already.\n  this.setProperties(optionsInternal.values);\n\n  this.controls.forEach(\n      /**\n       * @param {ol.control.Control} control Control.\n       * @this {ol.PluggableMap}\n       */\n      function(control) {\n        control.setMap(this);\n      }, this);\n\n  _ol_events_.listen(this.controls, _ol_CollectionEventType_.ADD,\n      /**\n       * @param {ol.Collection.Event} event Collection event.\n       */\n      function(event) {\n        event.element.setMap(this);\n      }, this);\n\n  _ol_events_.listen(this.controls, _ol_CollectionEventType_.REMOVE,\n      /**\n       * @param {ol.Collection.Event} event Collection event.\n       */\n      function(event) {\n        event.element.setMap(null);\n      }, this);\n\n  this.interactions.forEach(\n      /**\n       * @param {ol.interaction.Interaction} interaction Interaction.\n       * @this {ol.PluggableMap}\n       */\n      function(interaction) {\n        interaction.setMap(this);\n      }, this);\n\n  _ol_events_.listen(this.interactions, _ol_CollectionEventType_.ADD,\n      /**\n       * @param {ol.Collection.Event} event Collection event.\n       */\n      function(event) {\n        event.element.setMap(this);\n      }, this);\n\n  _ol_events_.listen(this.interactions, _ol_CollectionEventType_.REMOVE,\n      /**\n       * @param {ol.Collection.Event} event Collection event.\n       */\n      function(event) {\n        event.element.setMap(null);\n      }, this);\n\n  this.overlays_.forEach(this.addOverlayInternal_, this);\n\n  _ol_events_.listen(this.overlays_, _ol_CollectionEventType_.ADD,\n      /**\n       * @param {ol.Collection.Event} event Collection event.\n       */\n      function(event) {\n        this.addOverlayInternal_(/** @type {ol.Overlay} */ (event.element));\n      }, this);\n\n  _ol_events_.listen(this.overlays_, _ol_CollectionEventType_.REMOVE,\n      /**\n       * @param {ol.Collection.Event} event Collection event.\n       */\n      function(event) {\n        var overlay = /** @type {ol.Overlay} */ (event.element);\n        var id = overlay.getId();\n        if (id !== undefined) {\n          delete this.overlayIdIndex_[id.toString()];\n        }\n        event.element.setMap(null);\n      }, this);\n\n};\n\n_ol_.inherits(_ol_PluggableMap_, _ol_Object_);\n\n\n/**\n * Add the given control to the map.\n * @param {ol.control.Control} control Control.\n * @api\n */\n_ol_PluggableMap_.prototype.addControl = function(control) {\n  this.getControls().push(control);\n};\n\n\n/**\n * Add the given interaction to the map.\n * @param {ol.interaction.Interaction} interaction Interaction to add.\n * @api\n */\n_ol_PluggableMap_.prototype.addInteraction = function(interaction) {\n  this.getInteractions().push(interaction);\n};\n\n\n/**\n * Adds the given layer to the top of this map. If you want to add a layer\n * elsewhere in the stack, use `getLayers()` and the methods available on\n * {@link ol.Collection}.\n * @param {ol.layer.Base} layer Layer.\n * @api\n */\n_ol_PluggableMap_.prototype.addLayer = function(layer) {\n  var layers = this.getLayerGroup().getLayers();\n  layers.push(layer);\n};\n\n\n/**\n * Add the given overlay to the map.\n * @param {ol.Overlay} overlay Overlay.\n * @api\n */\n_ol_PluggableMap_.prototype.addOverlay = function(overlay) {\n  this.getOverlays().push(overlay);\n};\n\n\n/**\n * This deals with map's overlay collection changes.\n * @param {ol.Overlay} overlay Overlay.\n * @private\n */\n_ol_PluggableMap_.prototype.addOverlayInternal_ = function(overlay) {\n  var id = overlay.getId();\n  if (id !== undefined) {\n    this.overlayIdIndex_[id.toString()] = overlay;\n  }\n  overlay.setMap(this);\n};\n\n\n/**\n *\n * @inheritDoc\n */\n_ol_PluggableMap_.prototype.disposeInternal = function() {\n  this.mapBrowserEventHandler_.dispose();\n  _ol_events_.unlisten(this.viewport_, _ol_events_EventType_.WHEEL,\n      this.handleBrowserEvent, this);\n  _ol_events_.unlisten(this.viewport_, _ol_events_EventType_.MOUSEWHEEL,\n      this.handleBrowserEvent, this);\n  if (this.handleResize_ !== undefined) {\n    window.removeEventListener(_ol_events_EventType_.RESIZE,\n        this.handleResize_, false);\n    this.handleResize_ = undefined;\n  }\n  if (this.animationDelayKey_) {\n    cancelAnimationFrame(this.animationDelayKey_);\n    this.animationDelayKey_ = undefined;\n  }\n  this.setTarget(null);\n  _ol_Object_.prototype.disposeInternal.call(this);\n};\n\n\n/**\n * Detect features that intersect a pixel on the viewport, and execute a\n * callback with each intersecting feature. Layers included in the detection can\n * be configured through the `layerFilter` option in `opt_options`.\n * @param {ol.Pixel} pixel Pixel.\n * @param {function(this: S, (ol.Feature|ol.render.Feature),\n *     ol.layer.Layer): T} callback Feature callback. The callback will be\n *     called with two arguments. The first argument is one\n *     {@link ol.Feature feature} or\n *     {@link ol.render.Feature render feature} at the pixel, the second is\n *     the {@link ol.layer.Layer layer} of the feature and will be null for\n *     unmanaged layers. To stop detection, callback functions can return a\n *     truthy value.\n * @param {olx.AtPixelOptions=} opt_options Optional options.\n * @return {T|undefined} Callback result, i.e. the return value of last\n * callback execution, or the first truthy callback return value.\n * @template S,T\n * @api\n */\n_ol_PluggableMap_.prototype.forEachFeatureAtPixel = function(pixel, callback, opt_options) {\n  if (!this.frameState_) {\n    return;\n  }\n  var coordinate = this.getCoordinateFromPixel(pixel);\n  opt_options = opt_options !== undefined ? opt_options : {};\n  var hitTolerance = opt_options.hitTolerance !== undefined ?\n    opt_options.hitTolerance * this.frameState_.pixelRatio : 0;\n  var layerFilter = opt_options.layerFilter !== undefined ?\n    opt_options.layerFilter : _ol_functions_.TRUE;\n  return this.renderer_.forEachFeatureAtCoordinate(\n      coordinate, this.frameState_, hitTolerance, callback, null,\n      layerFilter, null);\n};\n\n\n/**\n * Get all features that intersect a pixel on the viewport.\n * @param {ol.Pixel} pixel Pixel.\n * @param {olx.AtPixelOptions=} opt_options Optional options.\n * @return {Array.<ol.Feature|ol.render.Feature>} The detected features or\n * `null` if none were found.\n * @api\n */\n_ol_PluggableMap_.prototype.getFeaturesAtPixel = function(pixel, opt_options) {\n  var features = null;\n  this.forEachFeatureAtPixel(pixel, function(feature) {\n    if (!features) {\n      features = [];\n    }\n    features.push(feature);\n  }, opt_options);\n  return features;\n};\n\n/**\n * Detect layers that have a color value at a pixel on the viewport, and\n * execute a callback with each matching layer. Layers included in the\n * detection can be configured through `opt_layerFilter`.\n * @param {ol.Pixel} pixel Pixel.\n * @param {function(this: S, ol.layer.Layer, (Uint8ClampedArray|Uint8Array)): T} callback\n *     Layer callback. This callback will receive two arguments: first is the\n *     {@link ol.layer.Layer layer}, second argument is an array representing\n *     [R, G, B, A] pixel values (0 - 255) and will be `null` for layer types\n *     that do not currently support this argument. To stop detection, callback\n *     functions can return a truthy value.\n * @param {S=} opt_this Value to use as `this` when executing `callback`.\n * @param {(function(this: U, ol.layer.Layer): boolean)=} opt_layerFilter Layer\n *     filter function. The filter function will receive one argument, the\n *     {@link ol.layer.Layer layer-candidate} and it should return a boolean\n *     value. Only layers which are visible and for which this function returns\n *     `true` will be tested for features. By default, all visible layers will\n *     be tested.\n * @param {U=} opt_this2 Value to use as `this` when executing `layerFilter`.\n * @return {T|undefined} Callback result, i.e. the return value of last\n * callback execution, or the first truthy callback return value.\n * @template S,T,U\n * @api\n */\n_ol_PluggableMap_.prototype.forEachLayerAtPixel = function(pixel, callback, opt_this, opt_layerFilter, opt_this2) {\n  if (!this.frameState_) {\n    return;\n  }\n  var thisArg = opt_this !== undefined ? opt_this : null;\n  var layerFilter = opt_layerFilter !== undefined ?\n    opt_layerFilter : _ol_functions_.TRUE;\n  var thisArg2 = opt_this2 !== undefined ? opt_this2 : null;\n  return this.renderer_.forEachLayerAtPixel(\n      pixel, this.frameState_, callback, thisArg,\n      layerFilter, thisArg2);\n};\n\n\n/**\n * Detect if features intersect a pixel on the viewport. Layers included in the\n * detection can be configured through `opt_layerFilter`.\n * @param {ol.Pixel} pixel Pixel.\n * @param {olx.AtPixelOptions=} opt_options Optional options.\n * @return {boolean} Is there a feature at the given pixel?\n * @template U\n * @api\n */\n_ol_PluggableMap_.prototype.hasFeatureAtPixel = function(pixel, opt_options) {\n  if (!this.frameState_) {\n    return false;\n  }\n  var coordinate = this.getCoordinateFromPixel(pixel);\n  opt_options = opt_options !== undefined ? opt_options : {};\n  var layerFilter = opt_options.layerFilter !== undefined ?\n    opt_options.layerFilter : _ol_functions_.TRUE;\n  var hitTolerance = opt_options.hitTolerance !== undefined ?\n    opt_options.hitTolerance * this.frameState_.pixelRatio : 0;\n  return this.renderer_.hasFeatureAtCoordinate(\n      coordinate, this.frameState_, hitTolerance, layerFilter, null);\n};\n\n\n/**\n * Returns the coordinate in view projection for a browser event.\n * @param {Event} event Event.\n * @return {ol.Coordinate} Coordinate.\n * @api\n */\n_ol_PluggableMap_.prototype.getEventCoordinate = function(event) {\n  return this.getCoordinateFromPixel(this.getEventPixel(event));\n};\n\n\n/**\n * Returns the map pixel position for a browser event relative to the viewport.\n * @param {Event} event Event.\n * @return {ol.Pixel} Pixel.\n * @api\n */\n_ol_PluggableMap_.prototype.getEventPixel = function(event) {\n  var viewportPosition = this.viewport_.getBoundingClientRect();\n  var eventPosition = event.changedTouches ? event.changedTouches[0] : event;\n  return [\n    eventPosition.clientX - viewportPosition.left,\n    eventPosition.clientY - viewportPosition.top\n  ];\n};\n\n\n/**\n * Get the target in which this map is rendered.\n * Note that this returns what is entered as an option or in setTarget:\n * if that was an element, it returns an element; if a string, it returns that.\n * @return {Element|string|undefined} The Element or id of the Element that the\n *     map is rendered in.\n * @observable\n * @api\n */\n_ol_PluggableMap_.prototype.getTarget = function() {\n  return (\n    /** @type {Element|string|undefined} */ this.get(_ol_MapProperty_.TARGET)\n  );\n};\n\n\n/**\n * Get the DOM element into which this map is rendered. In contrast to\n * `getTarget` this method always return an `Element`, or `null` if the\n * map has no target.\n * @return {Element} The element that the map is rendered in.\n * @api\n */\n_ol_PluggableMap_.prototype.getTargetElement = function() {\n  var target = this.getTarget();\n  if (target !== undefined) {\n    return typeof target === 'string' ?\n      document.getElementById(target) :\n      target;\n  } else {\n    return null;\n  }\n};\n\n\n/**\n * Get the coordinate for a given pixel.  This returns a coordinate in the\n * map view projection.\n * @param {ol.Pixel} pixel Pixel position in the map viewport.\n * @return {ol.Coordinate} The coordinate for the pixel position.\n * @api\n */\n_ol_PluggableMap_.prototype.getCoordinateFromPixel = function(pixel) {\n  var frameState = this.frameState_;\n  if (!frameState) {\n    return null;\n  } else {\n    return _ol_transform_.apply(frameState.pixelToCoordinateTransform, pixel.slice());\n  }\n};\n\n\n/**\n * Get the map controls. Modifying this collection changes the controls\n * associated with the map.\n * @return {ol.Collection.<ol.control.Control>} Controls.\n * @api\n */\n_ol_PluggableMap_.prototype.getControls = function() {\n  return this.controls;\n};\n\n\n/**\n * Get the map overlays. Modifying this collection changes the overlays\n * associated with the map.\n * @return {ol.Collection.<ol.Overlay>} Overlays.\n * @api\n */\n_ol_PluggableMap_.prototype.getOverlays = function() {\n  return this.overlays_;\n};\n\n\n/**\n * Get an overlay by its identifier (the value returned by overlay.getId()).\n * Note that the index treats string and numeric identifiers as the same. So\n * `map.getOverlayById(2)` will return an overlay with id `'2'` or `2`.\n * @param {string|number} id Overlay identifier.\n * @return {ol.Overlay} Overlay.\n * @api\n */\n_ol_PluggableMap_.prototype.getOverlayById = function(id) {\n  var overlay = this.overlayIdIndex_[id.toString()];\n  return overlay !== undefined ? overlay : null;\n};\n\n\n/**\n * Get the map interactions. Modifying this collection changes the interactions\n * associated with the map.\n *\n * Interactions are used for e.g. pan, zoom and rotate.\n * @return {ol.Collection.<ol.interaction.Interaction>} Interactions.\n * @api\n */\n_ol_PluggableMap_.prototype.getInteractions = function() {\n  return this.interactions;\n};\n\n\n/**\n * Get the layergroup associated with this map.\n * @return {ol.layer.Group} A layer group containing the layers in this map.\n * @observable\n * @api\n */\n_ol_PluggableMap_.prototype.getLayerGroup = function() {\n  return (\n    /** @type {ol.layer.Group} */ this.get(_ol_MapProperty_.LAYERGROUP)\n  );\n};\n\n\n/**\n * Get the collection of layers associated with this map.\n * @return {!ol.Collection.<ol.layer.Base>} Layers.\n * @api\n */\n_ol_PluggableMap_.prototype.getLayers = function() {\n  var layers = this.getLayerGroup().getLayers();\n  return layers;\n};\n\n\n/**\n * Get the pixel for a coordinate.  This takes a coordinate in the map view\n * projection and returns the corresponding pixel.\n * @param {ol.Coordinate} coordinate A map coordinate.\n * @return {ol.Pixel} A pixel position in the map viewport.\n * @api\n */\n_ol_PluggableMap_.prototype.getPixelFromCoordinate = function(coordinate) {\n  var frameState = this.frameState_;\n  if (!frameState) {\n    return null;\n  } else {\n    return _ol_transform_.apply(frameState.coordinateToPixelTransform,\n        coordinate.slice(0, 2));\n  }\n};\n\n\n/**\n * Get the map renderer.\n * @return {ol.renderer.Map} Renderer\n */\n_ol_PluggableMap_.prototype.getRenderer = function() {\n  return this.renderer_;\n};\n\n\n/**\n * Get the size of this map.\n * @return {ol.Size|undefined} The size in pixels of the map in the DOM.\n * @observable\n * @api\n */\n_ol_PluggableMap_.prototype.getSize = function() {\n  return (\n    /** @type {ol.Size|undefined} */ this.get(_ol_MapProperty_.SIZE)\n  );\n};\n\n\n/**\n * Get the view associated with this map. A view manages properties such as\n * center and resolution.\n * @return {ol.View} The view that controls this map.\n * @observable\n * @api\n */\n_ol_PluggableMap_.prototype.getView = function() {\n  return (\n    /** @type {ol.View} */ this.get(_ol_MapProperty_.VIEW)\n  );\n};\n\n\n/**\n * Get the element that serves as the map viewport.\n * @return {Element} Viewport.\n * @api\n */\n_ol_PluggableMap_.prototype.getViewport = function() {\n  return this.viewport_;\n};\n\n\n/**\n * Get the element that serves as the container for overlays.  Elements added to\n * this container will let mousedown and touchstart events through to the map,\n * so clicks and gestures on an overlay will trigger {@link ol.MapBrowserEvent}\n * events.\n * @return {!Element} The map's overlay container.\n */\n_ol_PluggableMap_.prototype.getOverlayContainer = function() {\n  return this.overlayContainer_;\n};\n\n\n/**\n * Get the element that serves as a container for overlays that don't allow\n * event propagation. Elements added to this container won't let mousedown and\n * touchstart events through to the map, so clicks and gestures on an overlay\n * don't trigger any {@link ol.MapBrowserEvent}.\n * @return {!Element} The map's overlay container that stops events.\n */\n_ol_PluggableMap_.prototype.getOverlayContainerStopEvent = function() {\n  return this.overlayContainerStopEvent_;\n};\n\n\n/**\n * @param {ol.Tile} tile Tile.\n * @param {string} tileSourceKey Tile source key.\n * @param {ol.Coordinate} tileCenter Tile center.\n * @param {number} tileResolution Tile resolution.\n * @return {number} Tile priority.\n */\n_ol_PluggableMap_.prototype.getTilePriority = function(tile, tileSourceKey, tileCenter, tileResolution) {\n  // Filter out tiles at higher zoom levels than the current zoom level, or that\n  // are outside the visible extent.\n  var frameState = this.frameState_;\n  if (!frameState || !(tileSourceKey in frameState.wantedTiles)) {\n    return _ol_structs_PriorityQueue_.DROP;\n  }\n  if (!frameState.wantedTiles[tileSourceKey][tile.getKey()]) {\n    return _ol_structs_PriorityQueue_.DROP;\n  }\n  // Prioritize the highest zoom level tiles closest to the focus.\n  // Tiles at higher zoom levels are prioritized using Math.log(tileResolution).\n  // Within a zoom level, tiles are prioritized by the distance in pixels\n  // between the center of the tile and the focus.  The factor of 65536 means\n  // that the prioritization should behave as desired for tiles up to\n  // 65536 * Math.log(2) = 45426 pixels from the focus.\n  var deltaX = tileCenter[0] - frameState.focus[0];\n  var deltaY = tileCenter[1] - frameState.focus[1];\n  return 65536 * Math.log(tileResolution) +\n      Math.sqrt(deltaX * deltaX + deltaY * deltaY) / tileResolution;\n};\n\n\n/**\n * @param {Event} browserEvent Browser event.\n * @param {string=} opt_type Type.\n */\n_ol_PluggableMap_.prototype.handleBrowserEvent = function(browserEvent, opt_type) {\n  var type = opt_type || browserEvent.type;\n  var mapBrowserEvent = new _ol_MapBrowserEvent_(type, this, browserEvent);\n  this.handleMapBrowserEvent(mapBrowserEvent);\n};\n\n\n/**\n * @param {ol.MapBrowserEvent} mapBrowserEvent The event to handle.\n */\n_ol_PluggableMap_.prototype.handleMapBrowserEvent = function(mapBrowserEvent) {\n  if (!this.frameState_) {\n    // With no view defined, we cannot translate pixels into geographical\n    // coordinates so interactions cannot be used.\n    return;\n  }\n  this.focus_ = mapBrowserEvent.coordinate;\n  mapBrowserEvent.frameState = this.frameState_;\n  var interactionsArray = this.getInteractions().getArray();\n  var i;\n  if (this.dispatchEvent(mapBrowserEvent) !== false) {\n    for (i = interactionsArray.length - 1; i >= 0; i--) {\n      var interaction = interactionsArray[i];\n      if (!interaction.getActive()) {\n        continue;\n      }\n      var cont = interaction.handleEvent(mapBrowserEvent);\n      if (!cont) {\n        break;\n      }\n    }\n  }\n};\n\n\n/**\n * @protected\n */\n_ol_PluggableMap_.prototype.handlePostRender = function() {\n\n  var frameState = this.frameState_;\n\n  // Manage the tile queue\n  // Image loads are expensive and a limited resource, so try to use them\n  // efficiently:\n  // * When the view is static we allow a large number of parallel tile loads\n  //   to complete the frame as quickly as possible.\n  // * When animating or interacting, image loads can cause janks, so we reduce\n  //   the maximum number of loads per frame and limit the number of parallel\n  //   tile loads to remain reactive to view changes and to reduce the chance of\n  //   loading tiles that will quickly disappear from view.\n  var tileQueue = this.tileQueue_;\n  if (!tileQueue.isEmpty()) {\n    var maxTotalLoading = 16;\n    var maxNewLoads = maxTotalLoading;\n    if (frameState) {\n      var hints = frameState.viewHints;\n      if (hints[_ol_ViewHint_.ANIMATING]) {\n        maxTotalLoading = this.loadTilesWhileAnimating_ ? 8 : 0;\n        maxNewLoads = 2;\n      }\n      if (hints[_ol_ViewHint_.INTERACTING]) {\n        maxTotalLoading = this.loadTilesWhileInteracting_ ? 8 : 0;\n        maxNewLoads = 2;\n      }\n    }\n    if (tileQueue.getTilesLoading() < maxTotalLoading) {\n      tileQueue.reprioritize(); // FIXME only call if view has changed\n      tileQueue.loadMoreTiles(maxTotalLoading, maxNewLoads);\n    }\n  }\n\n  var postRenderFunctions = this.postRenderFunctions_;\n  var i, ii;\n  for (i = 0, ii = postRenderFunctions.length; i < ii; ++i) {\n    postRenderFunctions[i](this, frameState);\n  }\n  postRenderFunctions.length = 0;\n};\n\n\n/**\n * @private\n */\n_ol_PluggableMap_.prototype.handleSizeChanged_ = function() {\n  this.render();\n};\n\n\n/**\n * @private\n */\n_ol_PluggableMap_.prototype.handleTargetChanged_ = function() {\n  // target may be undefined, null, a string or an Element.\n  // If it's a string we convert it to an Element before proceeding.\n  // If it's not now an Element we remove the viewport from the DOM.\n  // If it's an Element we append the viewport element to it.\n\n  var targetElement;\n  if (this.getTarget()) {\n    targetElement = this.getTargetElement();\n  }\n\n  if (this.keyHandlerKeys_) {\n    for (var i = 0, ii = this.keyHandlerKeys_.length; i < ii; ++i) {\n      _ol_events_.unlistenByKey(this.keyHandlerKeys_[i]);\n    }\n    this.keyHandlerKeys_ = null;\n  }\n\n  if (!targetElement) {\n    this.renderer_.removeLayerRenderers();\n    _ol_dom_.removeNode(this.viewport_);\n    if (this.handleResize_ !== undefined) {\n      window.removeEventListener(_ol_events_EventType_.RESIZE,\n          this.handleResize_, false);\n      this.handleResize_ = undefined;\n    }\n  } else {\n    targetElement.appendChild(this.viewport_);\n\n    var keyboardEventTarget = !this.keyboardEventTarget_ ?\n      targetElement : this.keyboardEventTarget_;\n    this.keyHandlerKeys_ = [\n      _ol_events_.listen(keyboardEventTarget, _ol_events_EventType_.KEYDOWN,\n          this.handleBrowserEvent, this),\n      _ol_events_.listen(keyboardEventTarget, _ol_events_EventType_.KEYPRESS,\n          this.handleBrowserEvent, this)\n    ];\n\n    if (!this.handleResize_) {\n      this.handleResize_ = this.updateSize.bind(this);\n      window.addEventListener(_ol_events_EventType_.RESIZE,\n          this.handleResize_, false);\n    }\n  }\n\n  this.updateSize();\n  // updateSize calls setSize, so no need to call this.render\n  // ourselves here.\n};\n\n\n/**\n * @private\n */\n_ol_PluggableMap_.prototype.handleTileChange_ = function() {\n  this.render();\n};\n\n\n/**\n * @private\n */\n_ol_PluggableMap_.prototype.handleViewPropertyChanged_ = function() {\n  this.render();\n};\n\n\n/**\n * @private\n */\n_ol_PluggableMap_.prototype.handleViewChanged_ = function() {\n  if (this.viewPropertyListenerKey_) {\n    _ol_events_.unlistenByKey(this.viewPropertyListenerKey_);\n    this.viewPropertyListenerKey_ = null;\n  }\n  if (this.viewChangeListenerKey_) {\n    _ol_events_.unlistenByKey(this.viewChangeListenerKey_);\n    this.viewChangeListenerKey_ = null;\n  }\n  var view = this.getView();\n  if (view) {\n    this.viewport_.setAttribute('data-view', _ol_.getUid(view));\n    this.viewPropertyListenerKey_ = _ol_events_.listen(\n        view, _ol_ObjectEventType_.PROPERTYCHANGE,\n        this.handleViewPropertyChanged_, this);\n    this.viewChangeListenerKey_ = _ol_events_.listen(\n        view, _ol_events_EventType_.CHANGE,\n        this.handleViewPropertyChanged_, this);\n  }\n  this.render();\n};\n\n\n/**\n * @private\n */\n_ol_PluggableMap_.prototype.handleLayerGroupChanged_ = function() {\n  if (this.layerGroupPropertyListenerKeys_) {\n    this.layerGroupPropertyListenerKeys_.forEach(_ol_events_.unlistenByKey);\n    this.layerGroupPropertyListenerKeys_ = null;\n  }\n  var layerGroup = this.getLayerGroup();\n  if (layerGroup) {\n    this.layerGroupPropertyListenerKeys_ = [\n      _ol_events_.listen(\n          layerGroup, _ol_ObjectEventType_.PROPERTYCHANGE,\n          this.render, this),\n      _ol_events_.listen(\n          layerGroup, _ol_events_EventType_.CHANGE,\n          this.render, this)\n    ];\n  }\n  this.render();\n};\n\n\n/**\n * @return {boolean} Is rendered.\n */\n_ol_PluggableMap_.prototype.isRendered = function() {\n  return !!this.frameState_;\n};\n\n\n/**\n * Requests an immediate render in a synchronous manner.\n * @api\n */\n_ol_PluggableMap_.prototype.renderSync = function() {\n  if (this.animationDelayKey_) {\n    cancelAnimationFrame(this.animationDelayKey_);\n  }\n  this.animationDelay_();\n};\n\n\n/**\n * Request a map rendering (at the next animation frame).\n * @api\n */\n_ol_PluggableMap_.prototype.render = function() {\n  if (this.animationDelayKey_ === undefined) {\n    this.animationDelayKey_ = requestAnimationFrame(\n        this.animationDelay_);\n  }\n};\n\n\n/**\n * Remove the given control from the map.\n * @param {ol.control.Control} control Control.\n * @return {ol.control.Control|undefined} The removed control (or undefined\n *     if the control was not found).\n * @api\n */\n_ol_PluggableMap_.prototype.removeControl = function(control) {\n  return this.getControls().remove(control);\n};\n\n\n/**\n * Remove the given interaction from the map.\n * @param {ol.interaction.Interaction} interaction Interaction to remove.\n * @return {ol.interaction.Interaction|undefined} The removed interaction (or\n *     undefined if the interaction was not found).\n * @api\n */\n_ol_PluggableMap_.prototype.removeInteraction = function(interaction) {\n  return this.getInteractions().remove(interaction);\n};\n\n\n/**\n * Removes the given layer from the map.\n * @param {ol.layer.Base} layer Layer.\n * @return {ol.layer.Base|undefined} The removed layer (or undefined if the\n *     layer was not found).\n * @api\n */\n_ol_PluggableMap_.prototype.removeLayer = function(layer) {\n  var layers = this.getLayerGroup().getLayers();\n  return layers.remove(layer);\n};\n\n\n/**\n * Remove the given overlay from the map.\n * @param {ol.Overlay} overlay Overlay.\n * @return {ol.Overlay|undefined} The removed overlay (or undefined\n *     if the overlay was not found).\n * @api\n */\n_ol_PluggableMap_.prototype.removeOverlay = function(overlay) {\n  return this.getOverlays().remove(overlay);\n};\n\n\n/**\n * @param {number} time Time.\n * @private\n */\n_ol_PluggableMap_.prototype.renderFrame_ = function(time) {\n  var i, ii, viewState;\n\n  var size = this.getSize();\n  var view = this.getView();\n  var extent = _ol_extent_.createEmpty();\n  var previousFrameState = this.frameState_;\n  /** @type {?olx.FrameState} */\n  var frameState = null;\n  if (size !== undefined && _ol_size_.hasArea(size) && view && view.isDef()) {\n    var viewHints = view.getHints(this.frameState_ ? this.frameState_.viewHints : undefined);\n    var layerStatesArray = this.getLayerGroup().getLayerStatesArray();\n    var layerStates = {};\n    for (i = 0, ii = layerStatesArray.length; i < ii; ++i) {\n      layerStates[_ol_.getUid(layerStatesArray[i].layer)] = layerStatesArray[i];\n    }\n    viewState = view.getState();\n    var center = viewState.center;\n    var pixelResolution = viewState.resolution / this.pixelRatio_;\n    center[0] = Math.round(center[0] / pixelResolution) * pixelResolution;\n    center[1] = Math.round(center[1] / pixelResolution) * pixelResolution;\n    frameState = /** @type {olx.FrameState} */ ({\n      animate: false,\n      coordinateToPixelTransform: this.coordinateToPixelTransform_,\n      extent: extent,\n      focus: !this.focus_ ? center : this.focus_,\n      index: this.frameIndex_++,\n      layerStates: layerStates,\n      layerStatesArray: layerStatesArray,\n      logos: _ol_obj_.assign({}, this.logos_),\n      pixelRatio: this.pixelRatio_,\n      pixelToCoordinateTransform: this.pixelToCoordinateTransform_,\n      postRenderFunctions: [],\n      size: size,\n      skippedFeatureUids: this.skippedFeatureUids_,\n      tileQueue: this.tileQueue_,\n      time: time,\n      usedTiles: {},\n      viewState: viewState,\n      viewHints: viewHints,\n      wantedTiles: {}\n    });\n  }\n\n  if (frameState) {\n    frameState.extent = _ol_extent_.getForViewAndSize(viewState.center,\n        viewState.resolution, viewState.rotation, frameState.size, extent);\n  }\n\n  this.frameState_ = frameState;\n  this.renderer_.renderFrame(frameState);\n\n  if (frameState) {\n    if (frameState.animate) {\n      this.render();\n    }\n    Array.prototype.push.apply(\n        this.postRenderFunctions_, frameState.postRenderFunctions);\n\n    if (previousFrameState) {\n      var moveStart = !this.previousExtent_ ||\n                  (!_ol_extent_.isEmpty(this.previousExtent_) &&\n                  !_ol_extent_.equals(frameState.extent, this.previousExtent_));\n      if (moveStart) {\n        this.dispatchEvent(\n            new _ol_MapEvent_(_ol_MapEventType_.MOVESTART, this, previousFrameState));\n        this.previousExtent_ = _ol_extent_.createOrUpdateEmpty(this.previousExtent_);\n      }\n    }\n\n    var idle = this.previousExtent_ &&\n        !frameState.viewHints[_ol_ViewHint_.ANIMATING] &&\n        !frameState.viewHints[_ol_ViewHint_.INTERACTING] &&\n        !_ol_extent_.equals(frameState.extent, this.previousExtent_);\n\n    if (idle) {\n      this.dispatchEvent(\n          new _ol_MapEvent_(_ol_MapEventType_.MOVEEND, this, frameState));\n      _ol_extent_.clone(frameState.extent, this.previousExtent_);\n    }\n  }\n\n  this.dispatchEvent(\n      new _ol_MapEvent_(_ol_MapEventType_.POSTRENDER, this, frameState));\n\n  setTimeout(this.handlePostRender.bind(this), 0);\n\n};\n\n\n/**\n * Sets the layergroup of this map.\n * @param {ol.layer.Group} layerGroup A layer group containing the layers in\n *     this map.\n * @observable\n * @api\n */\n_ol_PluggableMap_.prototype.setLayerGroup = function(layerGroup) {\n  this.set(_ol_MapProperty_.LAYERGROUP, layerGroup);\n};\n\n\n/**\n * Set the size of this map.\n * @param {ol.Size|undefined} size The size in pixels of the map in the DOM.\n * @observable\n * @api\n */\n_ol_PluggableMap_.prototype.setSize = function(size) {\n  this.set(_ol_MapProperty_.SIZE, size);\n};\n\n\n/**\n * Set the target element to render this map into.\n * @param {Element|string|undefined} target The Element or id of the Element\n *     that the map is rendered in.\n * @observable\n * @api\n */\n_ol_PluggableMap_.prototype.setTarget = function(target) {\n  this.set(_ol_MapProperty_.TARGET, target);\n};\n\n\n/**\n * Set the view for this map.\n * @param {ol.View} view The view that controls this map.\n * @observable\n * @api\n */\n_ol_PluggableMap_.prototype.setView = function(view) {\n  this.set(_ol_MapProperty_.VIEW, view);\n};\n\n\n/**\n * @param {ol.Feature} feature Feature.\n */\n_ol_PluggableMap_.prototype.skipFeature = function(feature) {\n  var featureUid = _ol_.getUid(feature).toString();\n  this.skippedFeatureUids_[featureUid] = true;\n  this.render();\n};\n\n\n/**\n * Force a recalculation of the map viewport size.  This should be called when\n * third-party code changes the size of the map viewport.\n * @api\n */\n_ol_PluggableMap_.prototype.updateSize = function() {\n  var targetElement = this.getTargetElement();\n\n  if (!targetElement) {\n    this.setSize(undefined);\n  } else {\n    var computedStyle = getComputedStyle(targetElement);\n    this.setSize([\n      targetElement.offsetWidth -\n          parseFloat(computedStyle['borderLeftWidth']) -\n          parseFloat(computedStyle['paddingLeft']) -\n          parseFloat(computedStyle['paddingRight']) -\n          parseFloat(computedStyle['borderRightWidth']),\n      targetElement.offsetHeight -\n          parseFloat(computedStyle['borderTopWidth']) -\n          parseFloat(computedStyle['paddingTop']) -\n          parseFloat(computedStyle['paddingBottom']) -\n          parseFloat(computedStyle['borderBottomWidth'])\n    ]);\n  }\n};\n\n\n/**\n * @param {ol.Feature} feature Feature.\n */\n_ol_PluggableMap_.prototype.unskipFeature = function(feature) {\n  var featureUid = _ol_.getUid(feature).toString();\n  delete this.skippedFeatureUids_[featureUid];\n  this.render();\n};\n\n\n/**\n * @type {Array.<ol.renderer.Type>}\n * @const\n */\n_ol_PluggableMap_.DEFAULT_RENDERER_TYPES = [\n  _ol_renderer_Type_.CANVAS,\n  _ol_renderer_Type_.WEBGL\n];\n\n\n/**\n * @const\n * @type {string}\n */\n_ol_PluggableMap_.LOGO_URL = 'data:image/png;base64,' +\n    'iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAAACXBI' +\n    'WXMAAAHGAAABxgEXwfpGAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAA' +\n    'AhNQTFRF////AP//AICAgP//AFVVQECA////K1VVSbbbYL/fJ05idsTYJFtbbcjbJllmZszW' +\n    'WMTOIFhoHlNiZszTa9DdUcHNHlNlV8XRIVdiasrUHlZjIVZjaMnVH1RlIFRkH1RkH1ZlasvY' +\n    'asvXVsPQH1VkacnVa8vWIVZjIFRjVMPQa8rXIVVkXsXRsNveIFVkIFZlIVVj3eDeh6GmbMvX' +\n    'H1ZkIFRka8rWbMvXIFVkIFVjIFVkbMvWH1VjbMvWIFVlbcvWIFVla8vVIFVkbMvWbMvVH1Vk' +\n    'bMvWIFVlbcvWIFVkbcvVbMvWjNPbIFVkU8LPwMzNIFVkbczWIFVkbsvWbMvXIFVkRnB8bcvW' +\n    '2+TkW8XRIFVkIlZlJVloJlpoKlxrLl9tMmJwOWd0Omh1RXF8TneCT3iDUHiDU8LPVMLPVcLP' +\n    'VcPQVsPPVsPQV8PQWMTQWsTQW8TQXMXSXsXRX4SNX8bSYMfTYcfTYsfTY8jUZcfSZsnUaIqT' +\n    'acrVasrVa8jTa8rWbI2VbMvWbcvWdJObdcvUdszUd8vVeJaee87Yfc3WgJyjhqGnitDYjaar' +\n    'ldPZnrK2oNbborW5o9bbo9fbpLa6q9ndrL3ArtndscDDutzfu8fJwN7gwt7gxc/QyuHhy+Hi' +\n    'zeHi0NfX0+Pj19zb1+Tj2uXk29/e3uLg3+Lh3+bl4uXj4ufl4+fl5Ofl5ufl5ujm5+jmySDn' +\n    'BAAAAFp0Uk5TAAECAgMEBAYHCA0NDg4UGRogIiMmKSssLzU7PkJJT1JTVFliY2hrdHZ3foSF' +\n    'hYeJjY2QkpugqbG1tre5w8zQ09XY3uXn6+zx8vT09vf4+Pj5+fr6/P39/f3+gz7SsAAAAVVJ' +\n    'REFUOMtjYKA7EBDnwCPLrObS1BRiLoJLnte6CQy8FLHLCzs2QUG4FjZ5GbcmBDDjxJBXDWxC' +\n    'Brb8aM4zbkIDzpLYnAcE9VXlJSWlZRU13koIeW57mGx5XjoMZEUqwxWYQaQbSzLSkYGfKFSe' +\n    '0QMsX5WbjgY0YS4MBplemI4BdGBW+DQ11eZiymfqQuXZIjqwyadPNoSZ4L+0FVM6e+oGI6g8' +\n    'a9iKNT3o8kVzNkzRg5lgl7p4wyRUL9Yt2jAxVh6mQCogae6GmflI8p0r13VFWTHBQ0rWPW7a' +\n    'hgWVcPm+9cuLoyy4kCJDzCm6d8PSFoh0zvQNC5OjDJhQopPPJqph1doJBUD5tnkbZiUEqaCn' +\n    'B3bTqLTFG1bPn71kw4b+GFdpLElKIzRxxgYgWNYc5SCENVHKeUaltHdXx0dZ8uBI1hJ2UUDg' +\n    'q82CM2MwKeibqAvSO7MCABq0wXEPiqWEAAAAAElFTkSuQmCC';\n\n\n/**\n * @param {olx.MapOptions} options Map options.\n * @return {ol.MapOptionsInternal} Internal map options.\n */\n_ol_PluggableMap_.createOptionsInternal = function(options) {\n\n  /**\n   * @type {Element|Document}\n   */\n  var keyboardEventTarget = null;\n  if (options.keyboardEventTarget !== undefined) {\n    keyboardEventTarget = typeof options.keyboardEventTarget === 'string' ?\n      document.getElementById(options.keyboardEventTarget) :\n      options.keyboardEventTarget;\n  }\n\n  /**\n   * @type {Object.<string, *>}\n   */\n  var values = {};\n\n  var logos = {};\n  if (options.logo === undefined ||\n      (typeof options.logo === 'boolean' && options.logo)) {\n    logos[_ol_PluggableMap_.LOGO_URL] = 'https://openlayers.org/';\n  } else {\n    var logo = options.logo;\n    if (typeof logo === 'string') {\n      logos[logo] = '';\n    } else if (logo instanceof HTMLElement) {\n      logos[_ol_.getUid(logo).toString()] = logo;\n    } else if (logo) {\n      _ol_asserts_.assert(typeof logo.href == 'string', 44); // `logo.href` should be a string.\n      _ol_asserts_.assert(typeof logo.src == 'string', 45); // `logo.src` should be a string.\n      logos[logo.src] = logo.href;\n    }\n  }\n\n  var layerGroup = (options.layers instanceof _ol_layer_Group_) ?\n    options.layers : new _ol_layer_Group_({layers: options.layers});\n  values[_ol_MapProperty_.LAYERGROUP] = layerGroup;\n\n  values[_ol_MapProperty_.TARGET] = options.target;\n\n  values[_ol_MapProperty_.VIEW] = options.view !== undefined ?\n    options.view : new _ol_View_();\n\n  /**\n   * @type {Array.<ol.renderer.Type>}\n   */\n  var rendererTypes;\n\n  if (options.renderer !== undefined) {\n    if (Array.isArray(options.renderer)) {\n      rendererTypes = options.renderer;\n    } else if (typeof options.renderer === 'string') {\n      rendererTypes = [options.renderer];\n    } else {\n      _ol_asserts_.assert(false, 46); // Incorrect format for `renderer` option\n    }\n    if (rendererTypes.indexOf(/** @type {ol.renderer.Type} */ ('dom')) >= 0) {\n      rendererTypes = rendererTypes.concat(_ol_PluggableMap_.DEFAULT_RENDERER_TYPES);\n    }\n  } else {\n    rendererTypes = _ol_PluggableMap_.DEFAULT_RENDERER_TYPES;\n  }\n\n  /**\n   * @type {olx.MapRendererPlugin}\n   */\n  var mapRendererPlugin;\n\n  var mapRendererPlugins = _ol_plugins_.getMapRendererPlugins();\n  outer: for (var i = 0, ii = rendererTypes.length; i < ii; ++i) {\n    var rendererType = rendererTypes[i];\n    for (var j = 0, jj = mapRendererPlugins.length; j < jj; ++j) {\n      var candidate = mapRendererPlugins[j];\n      if (candidate['handles'](rendererType)) {\n        mapRendererPlugin = candidate;\n        break outer;\n      }\n    }\n  }\n\n  if (!mapRendererPlugin) {\n    throw new Error('Unable to create a map renderer for types: ' +  rendererTypes.join(', '));\n  }\n\n  var controls;\n  if (options.controls !== undefined) {\n    if (Array.isArray(options.controls)) {\n      controls = new _ol_Collection_(options.controls.slice());\n    } else {\n      _ol_asserts_.assert(options.controls instanceof _ol_Collection_,\n          47); // Expected `controls` to be an array or an `ol.Collection`\n      controls = options.controls;\n    }\n  }\n\n  var interactions;\n  if (options.interactions !== undefined) {\n    if (Array.isArray(options.interactions)) {\n      interactions = new _ol_Collection_(options.interactions.slice());\n    } else {\n      _ol_asserts_.assert(options.interactions instanceof _ol_Collection_,\n          48); // Expected `interactions` to be an array or an `ol.Collection`\n      interactions = options.interactions;\n    }\n  }\n\n  var overlays;\n  if (options.overlays !== undefined) {\n    if (Array.isArray(options.overlays)) {\n      overlays = new _ol_Collection_(options.overlays.slice());\n    } else {\n      _ol_asserts_.assert(options.overlays instanceof _ol_Collection_,\n          49); // Expected `overlays` to be an array or an `ol.Collection`\n      overlays = options.overlays;\n    }\n  } else {\n    overlays = new _ol_Collection_();\n  }\n\n  return {\n    controls: controls,\n    interactions: interactions,\n    keyboardEventTarget: keyboardEventTarget,\n    logos: logos,\n    overlays: overlays,\n    mapRendererPlugin: mapRendererPlugin,\n    values: values\n  };\n\n};\nexport default _ol_PluggableMap_;\n","/**\n * @classdesc\n * Implementation of inertial deceleration for map movement.\n *\n * @constructor\n * @param {number} decay Rate of decay (must be negative).\n * @param {number} minVelocity Minimum velocity (pixels/millisecond).\n * @param {number} delay Delay to consider to calculate the kinetic\n *     initial values (milliseconds).\n * @struct\n * @api\n */\nvar _ol_Kinetic_ = function(decay, minVelocity, delay) {\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.decay_ = decay;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.minVelocity_ = minVelocity;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.delay_ = delay;\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.points_ = [];\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.angle_ = 0;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.initialVelocity_ = 0;\n};\n\n\n/**\n * FIXME empty description for jsdoc\n */\n_ol_Kinetic_.prototype.begin = function() {\n  this.points_.length = 0;\n  this.angle_ = 0;\n  this.initialVelocity_ = 0;\n};\n\n\n/**\n * @param {number} x X.\n * @param {number} y Y.\n */\n_ol_Kinetic_.prototype.update = function(x, y) {\n  this.points_.push(x, y, Date.now());\n};\n\n\n/**\n * @return {boolean} Whether we should do kinetic animation.\n */\n_ol_Kinetic_.prototype.end = function() {\n  if (this.points_.length < 6) {\n    // at least 2 points are required (i.e. there must be at least 6 elements\n    // in the array)\n    return false;\n  }\n  var delay = Date.now() - this.delay_;\n  var lastIndex = this.points_.length - 3;\n  if (this.points_[lastIndex + 2] < delay) {\n    // the last tracked point is too old, which means that the user stopped\n    // panning before releasing the map\n    return false;\n  }\n\n  // get the first point which still falls into the delay time\n  var firstIndex = lastIndex - 3;\n  while (firstIndex > 0 && this.points_[firstIndex + 2] > delay) {\n    firstIndex -= 3;\n  }\n\n  var duration = this.points_[lastIndex + 2] - this.points_[firstIndex + 2];\n  // we don't want a duration of 0 (divide by zero)\n  // we also make sure the user panned for a duration of at least one frame\n  // (1/60s) to compute sane displacement values\n  if (duration < 1000 / 60) {\n    return false;\n  }\n\n  var dx = this.points_[lastIndex] - this.points_[firstIndex];\n  var dy = this.points_[lastIndex + 1] - this.points_[firstIndex + 1];\n  this.angle_ = Math.atan2(dy, dx);\n  this.initialVelocity_ = Math.sqrt(dx * dx + dy * dy) / duration;\n  return this.initialVelocity_ > this.minVelocity_;\n};\n\n\n/**\n * @return {number} Total distance travelled (pixels).\n */\n_ol_Kinetic_.prototype.getDistance = function() {\n  return (this.minVelocity_ - this.initialVelocity_) / this.decay_;\n};\n\n\n/**\n * @return {number} Angle of the kinetic panning animation (radians).\n */\n_ol_Kinetic_.prototype.getAngle = function() {\n  return this.angle_;\n};\nexport default _ol_Kinetic_;\n","import _ol_ from '../index.js';\nimport _ol_MapBrowserEventType_ from '../mapbrowsereventtype.js';\nimport _ol_interaction_Interaction_ from '../interaction/interaction.js';\n\n/**\n * @classdesc\n * Allows the user to zoom by double-clicking on the map.\n *\n * @constructor\n * @extends {ol.interaction.Interaction}\n * @param {olx.interaction.DoubleClickZoomOptions=} opt_options Options.\n * @api\n */\nvar _ol_interaction_DoubleClickZoom_ = function(opt_options) {\n\n  var options = opt_options ? opt_options : {};\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.delta_ = options.delta ? options.delta : 1;\n\n  _ol_interaction_Interaction_.call(this, {\n    handleEvent: _ol_interaction_DoubleClickZoom_.handleEvent\n  });\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n};\n\n_ol_.inherits(_ol_interaction_DoubleClickZoom_, _ol_interaction_Interaction_);\n\n\n/**\n * Handles the {@link ol.MapBrowserEvent map browser event} (if it was a\n * doubleclick) and eventually zooms the map.\n * @param {ol.MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} `false` to stop event propagation.\n * @this {ol.interaction.DoubleClickZoom}\n * @api\n */\n_ol_interaction_DoubleClickZoom_.handleEvent = function(mapBrowserEvent) {\n  var stopEvent = false;\n  var browserEvent = mapBrowserEvent.originalEvent;\n  if (mapBrowserEvent.type == _ol_MapBrowserEventType_.DBLCLICK) {\n    var map = mapBrowserEvent.map;\n    var anchor = mapBrowserEvent.coordinate;\n    var delta = browserEvent.shiftKey ? -this.delta_ : this.delta_;\n    var view = map.getView();\n    _ol_interaction_Interaction_.zoomByDelta(\n        view, delta, anchor, this.duration_);\n    mapBrowserEvent.preventDefault();\n    stopEvent = true;\n  }\n  return !stopEvent;\n};\nexport default _ol_interaction_DoubleClickZoom_;\n","import _ol_ from '../index.js';\nimport _ol_RotationConstraint_ from '../rotationconstraint.js';\nimport _ol_ViewHint_ from '../viewhint.js';\nimport _ol_events_condition_ from '../events/condition.js';\nimport _ol_functions_ from '../functions.js';\nimport _ol_interaction_Interaction_ from '../interaction/interaction.js';\nimport _ol_interaction_Pointer_ from '../interaction/pointer.js';\n\n/**\n * @classdesc\n * Allows the user to rotate the map by clicking and dragging on the map,\n * normally combined with an {@link ol.events.condition} that limits\n * it to when the alt and shift keys are held down.\n *\n * This interaction is only supported for mouse devices.\n *\n * @constructor\n * @extends {ol.interaction.Pointer}\n * @param {olx.interaction.DragRotateOptions=} opt_options Options.\n * @api\n */\nvar _ol_interaction_DragRotate_ = function(opt_options) {\n\n  var options = opt_options ? opt_options : {};\n\n  _ol_interaction_Pointer_.call(this, {\n    handleDownEvent: _ol_interaction_DragRotate_.handleDownEvent_,\n    handleDragEvent: _ol_interaction_DragRotate_.handleDragEvent_,\n    handleUpEvent: _ol_interaction_DragRotate_.handleUpEvent_\n  });\n\n  /**\n   * @private\n   * @type {ol.EventsConditionType}\n   */\n  this.condition_ = options.condition ?\n    options.condition : _ol_events_condition_.altShiftKeysOnly;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.lastAngle_ = undefined;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.duration_ = options.duration !== undefined ? options.duration : 250;\n};\n\n_ol_.inherits(_ol_interaction_DragRotate_, _ol_interaction_Pointer_);\n\n\n/**\n * @param {ol.MapBrowserPointerEvent} mapBrowserEvent Event.\n * @this {ol.interaction.DragRotate}\n * @private\n */\n_ol_interaction_DragRotate_.handleDragEvent_ = function(mapBrowserEvent) {\n  if (!_ol_events_condition_.mouseOnly(mapBrowserEvent)) {\n    return;\n  }\n\n  var map = mapBrowserEvent.map;\n  var view = map.getView();\n  if (view.getConstraints().rotation === _ol_RotationConstraint_.disable) {\n    return;\n  }\n  var size = map.getSize();\n  var offset = mapBrowserEvent.pixel;\n  var theta =\n      Math.atan2(size[1] / 2 - offset[1], offset[0] - size[0] / 2);\n  if (this.lastAngle_ !== undefined) {\n    var delta = theta - this.lastAngle_;\n    var rotation = view.getRotation();\n    _ol_interaction_Interaction_.rotateWithoutConstraints(\n        view, rotation - delta);\n  }\n  this.lastAngle_ = theta;\n};\n\n\n/**\n * @param {ol.MapBrowserPointerEvent} mapBrowserEvent Event.\n * @return {boolean} Stop drag sequence?\n * @this {ol.interaction.DragRotate}\n * @private\n */\n_ol_interaction_DragRotate_.handleUpEvent_ = function(mapBrowserEvent) {\n  if (!_ol_events_condition_.mouseOnly(mapBrowserEvent)) {\n    return true;\n  }\n\n  var map = mapBrowserEvent.map;\n  var view = map.getView();\n  view.setHint(_ol_ViewHint_.INTERACTING, -1);\n  var rotation = view.getRotation();\n  _ol_interaction_Interaction_.rotate(view, rotation,\n      undefined, this.duration_);\n  return false;\n};\n\n\n/**\n * @param {ol.MapBrowserPointerEvent} mapBrowserEvent Event.\n * @return {boolean} Start drag sequence?\n * @this {ol.interaction.DragRotate}\n * @private\n */\n_ol_interaction_DragRotate_.handleDownEvent_ = function(mapBrowserEvent) {\n  if (!_ol_events_condition_.mouseOnly(mapBrowserEvent)) {\n    return false;\n  }\n\n  if (_ol_events_condition_.mouseActionButton(mapBrowserEvent) &&\n      this.condition_(mapBrowserEvent)) {\n    var map = mapBrowserEvent.map;\n    map.getView().setHint(_ol_ViewHint_.INTERACTING, 1);\n    this.lastAngle_ = undefined;\n    return true;\n  } else {\n    return false;\n  }\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_interaction_DragRotate_.prototype.shouldStopEvent = _ol_functions_.FALSE;\nexport default _ol_interaction_DragRotate_;\n","// FIXME add rotation\n\nimport _ol_ from '../index.js';\nimport _ol_Disposable_ from '../disposable.js';\nimport _ol_geom_Polygon_ from '../geom/polygon.js';\n\n/**\n * @constructor\n * @extends {ol.Disposable}\n * @param {string} className CSS class name.\n */\nvar _ol_render_Box_ = function(className) {\n\n  /**\n   * @type {ol.geom.Polygon}\n   * @private\n   */\n  this.geometry_ = null;\n\n  /**\n   * @type {HTMLDivElement}\n   * @private\n   */\n  this.element_ = /** @type {HTMLDivElement} */ (document.createElement('div'));\n  this.element_.style.position = 'absolute';\n  this.element_.className = 'ol-box ' + className;\n\n  /**\n   * @private\n   * @type {ol.PluggableMap}\n   */\n  this.map_ = null;\n\n  /**\n   * @private\n   * @type {ol.Pixel}\n   */\n  this.startPixel_ = null;\n\n  /**\n   * @private\n   * @type {ol.Pixel}\n   */\n  this.endPixel_ = null;\n\n};\n\n_ol_.inherits(_ol_render_Box_, _ol_Disposable_);\n\n\n/**\n * @inheritDoc\n */\n_ol_render_Box_.prototype.disposeInternal = function() {\n  this.setMap(null);\n};\n\n\n/**\n * @private\n */\n_ol_render_Box_.prototype.render_ = function() {\n  var startPixel = this.startPixel_;\n  var endPixel = this.endPixel_;\n  var px = 'px';\n  var style = this.element_.style;\n  style.left = Math.min(startPixel[0], endPixel[0]) + px;\n  style.top = Math.min(startPixel[1], endPixel[1]) + px;\n  style.width = Math.abs(endPixel[0] - startPixel[0]) + px;\n  style.height = Math.abs(endPixel[1] - startPixel[1]) + px;\n};\n\n\n/**\n * @param {ol.PluggableMap} map Map.\n */\n_ol_render_Box_.prototype.setMap = function(map) {\n  if (this.map_) {\n    this.map_.getOverlayContainer().removeChild(this.element_);\n    var style = this.element_.style;\n    style.left = style.top = style.width = style.height = 'inherit';\n  }\n  this.map_ = map;\n  if (this.map_) {\n    this.map_.getOverlayContainer().appendChild(this.element_);\n  }\n};\n\n\n/**\n * @param {ol.Pixel} startPixel Start pixel.\n * @param {ol.Pixel} endPixel End pixel.\n */\n_ol_render_Box_.prototype.setPixels = function(startPixel, endPixel) {\n  this.startPixel_ = startPixel;\n  this.endPixel_ = endPixel;\n  this.createOrUpdateGeometry();\n  this.render_();\n};\n\n\n/**\n * Creates or updates the cached geometry.\n */\n_ol_render_Box_.prototype.createOrUpdateGeometry = function() {\n  var startPixel = this.startPixel_;\n  var endPixel = this.endPixel_;\n  var pixels = [\n    startPixel,\n    [startPixel[0], endPixel[1]],\n    endPixel,\n    [endPixel[0], startPixel[1]]\n  ];\n  var coordinates = pixels.map(this.map_.getCoordinateFromPixel, this.map_);\n  // close the polygon\n  coordinates[4] = coordinates[0].slice();\n  if (!this.geometry_) {\n    this.geometry_ = new _ol_geom_Polygon_([coordinates]);\n  } else {\n    this.geometry_.setCoordinates([coordinates]);\n  }\n};\n\n\n/**\n * @return {ol.geom.Polygon} Geometry.\n */\n_ol_render_Box_.prototype.getGeometry = function() {\n  return this.geometry_;\n};\nexport default _ol_render_Box_;\n","// FIXME draw drag box\nimport _ol_events_Event_ from '../events/event.js';\nimport _ol_ from '../index.js';\nimport _ol_events_condition_ from '../events/condition.js';\nimport _ol_interaction_Pointer_ from '../interaction/pointer.js';\nimport _ol_render_Box_ from '../render/box.js';\n\n/**\n * @classdesc\n * Allows the user to draw a vector box by clicking and dragging on the map,\n * normally combined with an {@link ol.events.condition} that limits\n * it to when the shift or other key is held down. This is used, for example,\n * for zooming to a specific area of the map\n * (see {@link ol.interaction.DragZoom} and\n * {@link ol.interaction.DragRotateAndZoom}).\n *\n * This interaction is only supported for mouse devices.\n *\n * @constructor\n * @extends {ol.interaction.Pointer}\n * @fires ol.interaction.DragBox.Event\n * @param {olx.interaction.DragBoxOptions=} opt_options Options.\n * @api\n */\nvar _ol_interaction_DragBox_ = function(opt_options) {\n\n  _ol_interaction_Pointer_.call(this, {\n    handleDownEvent: _ol_interaction_DragBox_.handleDownEvent_,\n    handleDragEvent: _ol_interaction_DragBox_.handleDragEvent_,\n    handleUpEvent: _ol_interaction_DragBox_.handleUpEvent_\n  });\n\n  var options = opt_options ? opt_options : {};\n\n  /**\n   * @type {ol.render.Box}\n   * @private\n   */\n  this.box_ = new _ol_render_Box_(options.className || 'ol-dragbox');\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.minArea_ = options.minArea !== undefined ? options.minArea : 64;\n\n  /**\n   * @type {ol.Pixel}\n   * @private\n   */\n  this.startPixel_ = null;\n\n  /**\n   * @private\n   * @type {ol.EventsConditionType}\n   */\n  this.condition_ = options.condition ?\n    options.condition : _ol_events_condition_.always;\n\n  /**\n   * @private\n   * @type {ol.DragBoxEndConditionType}\n   */\n  this.boxEndCondition_ = options.boxEndCondition ?\n    options.boxEndCondition : _ol_interaction_DragBox_.defaultBoxEndCondition;\n};\n\n_ol_.inherits(_ol_interaction_DragBox_, _ol_interaction_Pointer_);\n\n\n/**\n * The default condition for determining whether the boxend event\n * should fire.\n * @param {ol.MapBrowserEvent} mapBrowserEvent The originating MapBrowserEvent\n *     leading to the box end.\n * @param {ol.Pixel} startPixel The starting pixel of the box.\n * @param {ol.Pixel} endPixel The end pixel of the box.\n * @return {boolean} Whether or not the boxend condition should be fired.\n * @this {ol.interaction.DragBox}\n */\n_ol_interaction_DragBox_.defaultBoxEndCondition = function(mapBrowserEvent, startPixel, endPixel) {\n  var width = endPixel[0] - startPixel[0];\n  var height = endPixel[1] - startPixel[1];\n  return width * width + height * height >= this.minArea_;\n};\n\n\n/**\n * @param {ol.MapBrowserPointerEvent} mapBrowserEvent Event.\n * @this {ol.interaction.DragBox}\n * @private\n */\n_ol_interaction_DragBox_.handleDragEvent_ = function(mapBrowserEvent) {\n  if (!_ol_events_condition_.mouseOnly(mapBrowserEvent)) {\n    return;\n  }\n\n  this.box_.setPixels(this.startPixel_, mapBrowserEvent.pixel);\n\n  this.dispatchEvent(new _ol_interaction_DragBox_.Event(_ol_interaction_DragBox_.EventType_.BOXDRAG,\n      mapBrowserEvent.coordinate, mapBrowserEvent));\n};\n\n\n/**\n * Returns geometry of last drawn box.\n * @return {ol.geom.Polygon} Geometry.\n * @api\n */\n_ol_interaction_DragBox_.prototype.getGeometry = function() {\n  return this.box_.getGeometry();\n};\n\n\n/**\n * To be overridden by child classes.\n * FIXME: use constructor option instead of relying on overriding.\n * @param {ol.MapBrowserEvent} mapBrowserEvent Map browser event.\n * @protected\n */\n_ol_interaction_DragBox_.prototype.onBoxEnd = _ol_.nullFunction;\n\n\n/**\n * @param {ol.MapBrowserPointerEvent} mapBrowserEvent Event.\n * @return {boolean} Stop drag sequence?\n * @this {ol.interaction.DragBox}\n * @private\n */\n_ol_interaction_DragBox_.handleUpEvent_ = function(mapBrowserEvent) {\n  if (!_ol_events_condition_.mouseOnly(mapBrowserEvent)) {\n    return true;\n  }\n\n  this.box_.setMap(null);\n\n  if (this.boxEndCondition_(mapBrowserEvent,\n      this.startPixel_, mapBrowserEvent.pixel)) {\n    this.onBoxEnd(mapBrowserEvent);\n    this.dispatchEvent(new _ol_interaction_DragBox_.Event(_ol_interaction_DragBox_.EventType_.BOXEND,\n        mapBrowserEvent.coordinate, mapBrowserEvent));\n  }\n  return false;\n};\n\n\n/**\n * @param {ol.MapBrowserPointerEvent} mapBrowserEvent Event.\n * @return {boolean} Start drag sequence?\n * @this {ol.interaction.DragBox}\n * @private\n */\n_ol_interaction_DragBox_.handleDownEvent_ = function(mapBrowserEvent) {\n  if (!_ol_events_condition_.mouseOnly(mapBrowserEvent)) {\n    return false;\n  }\n\n  if (_ol_events_condition_.mouseActionButton(mapBrowserEvent) &&\n      this.condition_(mapBrowserEvent)) {\n    this.startPixel_ = mapBrowserEvent.pixel;\n    this.box_.setMap(mapBrowserEvent.map);\n    this.box_.setPixels(this.startPixel_, this.startPixel_);\n    this.dispatchEvent(new _ol_interaction_DragBox_.Event(_ol_interaction_DragBox_.EventType_.BOXSTART,\n        mapBrowserEvent.coordinate, mapBrowserEvent));\n    return true;\n  } else {\n    return false;\n  }\n};\n\n\n/**\n * @enum {string}\n * @private\n */\n_ol_interaction_DragBox_.EventType_ = {\n  /**\n   * Triggered upon drag box start.\n   * @event ol.interaction.DragBox.Event#boxstart\n   * @api\n   */\n  BOXSTART: 'boxstart',\n\n  /**\n   * Triggered on drag when box is active.\n   * @event ol.interaction.DragBox.Event#boxdrag\n   * @api\n   */\n  BOXDRAG: 'boxdrag',\n\n  /**\n   * Triggered upon drag box end.\n   * @event ol.interaction.DragBox.Event#boxend\n   * @api\n   */\n  BOXEND: 'boxend'\n};\n\n\n/**\n * @classdesc\n * Events emitted by {@link ol.interaction.DragBox} instances are instances of\n * this type.\n *\n * @param {string} type The event type.\n * @param {ol.Coordinate} coordinate The event coordinate.\n * @param {ol.MapBrowserEvent} mapBrowserEvent Originating event.\n * @extends {ol.events.Event}\n * @constructor\n * @implements {oli.DragBoxEvent}\n */\n_ol_interaction_DragBox_.Event = function(type, coordinate, mapBrowserEvent) {\n  _ol_events_Event_.call(this, type);\n\n  /**\n   * The coordinate of the drag event.\n   * @const\n   * @type {ol.Coordinate}\n   * @api\n   */\n  this.coordinate = coordinate;\n\n  /**\n   * @const\n   * @type {ol.MapBrowserEvent}\n   * @api\n   */\n  this.mapBrowserEvent = mapBrowserEvent;\n\n};\n_ol_.inherits(_ol_interaction_DragBox_.Event, _ol_events_Event_);\nexport default _ol_interaction_DragBox_;\n","import _ol_ from '../index.js';\nimport _ol_easing_ from '../easing.js';\nimport _ol_events_condition_ from '../events/condition.js';\nimport _ol_extent_ from '../extent.js';\nimport _ol_interaction_DragBox_ from '../interaction/dragbox.js';\n\n/**\n * @classdesc\n * Allows the user to zoom the map by clicking and dragging on the map,\n * normally combined with an {@link ol.events.condition} that limits\n * it to when a key, shift by default, is held down.\n *\n * To change the style of the box, use CSS and the `.ol-dragzoom` selector, or\n * your custom one configured with `className`.\n *\n * @constructor\n * @extends {ol.interaction.DragBox}\n * @param {olx.interaction.DragZoomOptions=} opt_options Options.\n * @api\n */\nvar _ol_interaction_DragZoom_ = function(opt_options) {\n  var options = opt_options ? opt_options : {};\n\n  var condition = options.condition ?\n    options.condition : _ol_events_condition_.shiftKeyOnly;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.duration_ = options.duration !== undefined ? options.duration : 200;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.out_ = options.out !== undefined ? options.out : false;\n\n  _ol_interaction_DragBox_.call(this, {\n    condition: condition,\n    className: options.className || 'ol-dragzoom'\n  });\n\n};\n\n_ol_.inherits(_ol_interaction_DragZoom_, _ol_interaction_DragBox_);\n\n\n/**\n * @inheritDoc\n */\n_ol_interaction_DragZoom_.prototype.onBoxEnd = function() {\n  var map = this.getMap();\n\n  var view = /** @type {!ol.View} */ (map.getView());\n\n  var size = /** @type {!ol.Size} */ (map.getSize());\n\n  var extent = this.getGeometry().getExtent();\n\n  if (this.out_) {\n    var mapExtent = view.calculateExtent(size);\n    var boxPixelExtent = _ol_extent_.createOrUpdateFromCoordinates([\n      map.getPixelFromCoordinate(_ol_extent_.getBottomLeft(extent)),\n      map.getPixelFromCoordinate(_ol_extent_.getTopRight(extent))]);\n    var factor = view.getResolutionForExtent(boxPixelExtent, size);\n\n    _ol_extent_.scaleFromCenter(mapExtent, 1 / factor);\n    extent = mapExtent;\n  }\n\n  var resolution = view.constrainResolution(\n      view.getResolutionForExtent(extent, size));\n\n  var center = _ol_extent_.getCenter(extent);\n  center = view.constrainCenter(center);\n\n  view.animate({\n    resolution: resolution,\n    center: center,\n    duration: this.duration_,\n    easing: _ol_easing_.easeOut\n  });\n\n};\nexport default _ol_interaction_DragZoom_;\n","/**\n * @enum {number}\n * @const\n */\nvar _ol_events_KeyCode_ = {\n  LEFT: 37,\n  UP: 38,\n  RIGHT: 39,\n  DOWN: 40\n};\n\nexport default _ol_events_KeyCode_;\n","import _ol_ from '../index.js';\nimport _ol_coordinate_ from '../coordinate.js';\nimport _ol_events_EventType_ from '../events/eventtype.js';\nimport _ol_events_KeyCode_ from '../events/keycode.js';\nimport _ol_events_condition_ from '../events/condition.js';\nimport _ol_interaction_Interaction_ from '../interaction/interaction.js';\n\n/**\n * @classdesc\n * Allows the user to pan the map using keyboard arrows.\n * Note that, although this interaction is by default included in maps,\n * the keys can only be used when browser focus is on the element to which\n * the keyboard events are attached. By default, this is the map div,\n * though you can change this with the `keyboardEventTarget` in\n * {@link ol.Map}. `document` never loses focus but, for any other element,\n * focus will have to be on, and returned to, this element if the keys are to\n * function.\n * See also {@link ol.interaction.KeyboardZoom}.\n *\n * @constructor\n * @extends {ol.interaction.Interaction}\n * @param {olx.interaction.KeyboardPanOptions=} opt_options Options.\n * @api\n */\nvar _ol_interaction_KeyboardPan_ = function(opt_options) {\n\n  _ol_interaction_Interaction_.call(this, {\n    handleEvent: _ol_interaction_KeyboardPan_.handleEvent\n  });\n\n  var options = opt_options || {};\n\n  /**\n   * @private\n   * @param {ol.MapBrowserEvent} mapBrowserEvent Browser event.\n   * @return {boolean} Combined condition result.\n   */\n  this.defaultCondition_ = function(mapBrowserEvent) {\n    return _ol_events_condition_.noModifierKeys(mapBrowserEvent) &&\n      _ol_events_condition_.targetNotEditable(mapBrowserEvent);\n  };\n\n  /**\n   * @private\n   * @type {ol.EventsConditionType}\n   */\n  this.condition_ = options.condition !== undefined ?\n    options.condition : this.defaultCondition_;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.duration_ = options.duration !== undefined ? options.duration : 100;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.pixelDelta_ = options.pixelDelta !== undefined ?\n    options.pixelDelta : 128;\n\n};\n\n_ol_.inherits(_ol_interaction_KeyboardPan_, _ol_interaction_Interaction_);\n\n/**\n * Handles the {@link ol.MapBrowserEvent map browser event} if it was a\n * `KeyEvent`, and decides the direction to pan to (if an arrow key was\n * pressed).\n * @param {ol.MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} `false` to stop event propagation.\n * @this {ol.interaction.KeyboardPan}\n * @api\n */\n_ol_interaction_KeyboardPan_.handleEvent = function(mapBrowserEvent) {\n  var stopEvent = false;\n  if (mapBrowserEvent.type == _ol_events_EventType_.KEYDOWN) {\n    var keyEvent = mapBrowserEvent.originalEvent;\n    var keyCode = keyEvent.keyCode;\n    if (this.condition_(mapBrowserEvent) &&\n        (keyCode == _ol_events_KeyCode_.DOWN ||\n        keyCode == _ol_events_KeyCode_.LEFT ||\n        keyCode == _ol_events_KeyCode_.RIGHT ||\n        keyCode == _ol_events_KeyCode_.UP)) {\n      var map = mapBrowserEvent.map;\n      var view = map.getView();\n      var mapUnitsDelta = view.getResolution() * this.pixelDelta_;\n      var deltaX = 0, deltaY = 0;\n      if (keyCode == _ol_events_KeyCode_.DOWN) {\n        deltaY = -mapUnitsDelta;\n      } else if (keyCode == _ol_events_KeyCode_.LEFT) {\n        deltaX = -mapUnitsDelta;\n      } else if (keyCode == _ol_events_KeyCode_.RIGHT) {\n        deltaX = mapUnitsDelta;\n      } else {\n        deltaY = mapUnitsDelta;\n      }\n      var delta = [deltaX, deltaY];\n      _ol_coordinate_.rotate(delta, view.getRotation());\n      _ol_interaction_Interaction_.pan(view, delta, this.duration_);\n      mapBrowserEvent.preventDefault();\n      stopEvent = true;\n    }\n  }\n  return !stopEvent;\n};\nexport default _ol_interaction_KeyboardPan_;\n","import _ol_ from '../index.js';\nimport _ol_events_EventType_ from '../events/eventtype.js';\nimport _ol_events_condition_ from '../events/condition.js';\nimport _ol_interaction_Interaction_ from '../interaction/interaction.js';\n\n/**\n * @classdesc\n * Allows the user to zoom the map using keyboard + and -.\n * Note that, although this interaction is by default included in maps,\n * the keys can only be used when browser focus is on the element to which\n * the keyboard events are attached. By default, this is the map div,\n * though you can change this with the `keyboardEventTarget` in\n * {@link ol.Map}. `document` never loses focus but, for any other element,\n * focus will have to be on, and returned to, this element if the keys are to\n * function.\n * See also {@link ol.interaction.KeyboardPan}.\n *\n * @constructor\n * @param {olx.interaction.KeyboardZoomOptions=} opt_options Options.\n * @extends {ol.interaction.Interaction}\n * @api\n */\nvar _ol_interaction_KeyboardZoom_ = function(opt_options) {\n\n  _ol_interaction_Interaction_.call(this, {\n    handleEvent: _ol_interaction_KeyboardZoom_.handleEvent\n  });\n\n  var options = opt_options ? opt_options : {};\n\n  /**\n   * @private\n   * @type {ol.EventsConditionType}\n   */\n  this.condition_ = options.condition ? options.condition :\n    _ol_events_condition_.targetNotEditable;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.delta_ = options.delta ? options.delta : 1;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.duration_ = options.duration !== undefined ? options.duration : 100;\n\n};\n\n_ol_.inherits(_ol_interaction_KeyboardZoom_, _ol_interaction_Interaction_);\n\n\n/**\n * Handles the {@link ol.MapBrowserEvent map browser event} if it was a\n * `KeyEvent`, and decides whether to zoom in or out (depending on whether the\n * key pressed was '+' or '-').\n * @param {ol.MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} `false` to stop event propagation.\n * @this {ol.interaction.KeyboardZoom}\n * @api\n */\n_ol_interaction_KeyboardZoom_.handleEvent = function(mapBrowserEvent) {\n  var stopEvent = false;\n  if (mapBrowserEvent.type == _ol_events_EventType_.KEYDOWN ||\n      mapBrowserEvent.type == _ol_events_EventType_.KEYPRESS) {\n    var keyEvent = mapBrowserEvent.originalEvent;\n    var charCode = keyEvent.charCode;\n    if (this.condition_(mapBrowserEvent) &&\n        (charCode == '+'.charCodeAt(0) || charCode == '-'.charCodeAt(0))) {\n      var map = mapBrowserEvent.map;\n      var delta = (charCode == '+'.charCodeAt(0)) ? this.delta_ : -this.delta_;\n      var view = map.getView();\n      _ol_interaction_Interaction_.zoomByDelta(\n          view, delta, undefined, this.duration_);\n      mapBrowserEvent.preventDefault();\n      stopEvent = true;\n    }\n  }\n  return !stopEvent;\n};\nexport default _ol_interaction_KeyboardZoom_;\n","import _ol_ from '../index.js';\nimport _ol_ViewHint_ from '../viewhint.js';\nimport _ol_easing_ from '../easing.js';\nimport _ol_events_EventType_ from '../events/eventtype.js';\nimport _ol_has_ from '../has.js';\nimport _ol_interaction_Interaction_ from '../interaction/interaction.js';\nimport _ol_math_ from '../math.js';\n\n/**\n * @classdesc\n * Allows the user to zoom the map by scrolling the mouse wheel.\n *\n * @constructor\n * @extends {ol.interaction.Interaction}\n * @param {olx.interaction.MouseWheelZoomOptions=} opt_options Options.\n * @api\n */\nvar _ol_interaction_MouseWheelZoom_ = function(opt_options) {\n\n  _ol_interaction_Interaction_.call(this, {\n    handleEvent: _ol_interaction_MouseWheelZoom_.handleEvent\n  });\n\n  var options = opt_options || {};\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.delta_ = 0;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.timeout_ = options.timeout !== undefined ? options.timeout : 80;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.useAnchor_ = options.useAnchor !== undefined ? options.useAnchor : true;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.constrainResolution_ = options.constrainResolution || false;\n\n  /**\n   * @private\n   * @type {?ol.Coordinate}\n   */\n  this.lastAnchor_ = null;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.startTime_ = undefined;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.timeoutId_ = undefined;\n\n  /**\n   * @private\n   * @type {ol.interaction.MouseWheelZoom.Mode_|undefined}\n   */\n  this.mode_ = undefined;\n\n  /**\n   * Trackpad events separated by this delay will be considered separate\n   * interactions.\n   * @type {number}\n   */\n  this.trackpadEventGap_ = 400;\n\n  /**\n   * @type {number|undefined}\n   */\n  this.trackpadTimeoutId_ = undefined;\n\n  /**\n   * The number of delta values per zoom level\n   * @private\n   * @type {number}\n   */\n  this.trackpadDeltaPerZoom_ = 300;\n\n  /**\n   * The zoom factor by which scroll zooming is allowed to exceed the limits.\n   * @private\n   * @type {number}\n   */\n  this.trackpadZoomBuffer_ = 1.5;\n\n};\n\n_ol_.inherits(_ol_interaction_MouseWheelZoom_, _ol_interaction_Interaction_);\n\n\n/**\n * Handles the {@link ol.MapBrowserEvent map browser event} (if it was a\n * mousewheel-event) and eventually zooms the map.\n * @param {ol.MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} Allow event propagation.\n * @this {ol.interaction.MouseWheelZoom}\n * @api\n */\n_ol_interaction_MouseWheelZoom_.handleEvent = function(mapBrowserEvent) {\n  var type = mapBrowserEvent.type;\n  if (type !== _ol_events_EventType_.WHEEL && type !== _ol_events_EventType_.MOUSEWHEEL) {\n    return true;\n  }\n\n  mapBrowserEvent.preventDefault();\n\n  var map = mapBrowserEvent.map;\n  var wheelEvent = /** @type {WheelEvent} */ (mapBrowserEvent.originalEvent);\n\n  if (this.useAnchor_) {\n    this.lastAnchor_ = mapBrowserEvent.coordinate;\n  }\n\n  // Delta normalisation inspired by\n  // https://github.com/mapbox/mapbox-gl-js/blob/001c7b9/js/ui/handler/scroll_zoom.js\n  var delta;\n  if (mapBrowserEvent.type == _ol_events_EventType_.WHEEL) {\n    delta = wheelEvent.deltaY;\n    if (_ol_has_.FIREFOX &&\n        wheelEvent.deltaMode === WheelEvent.DOM_DELTA_PIXEL) {\n      delta /= _ol_has_.DEVICE_PIXEL_RATIO;\n    }\n    if (wheelEvent.deltaMode === WheelEvent.DOM_DELTA_LINE) {\n      delta *= 40;\n    }\n  } else if (mapBrowserEvent.type == _ol_events_EventType_.MOUSEWHEEL) {\n    delta = -wheelEvent.wheelDeltaY;\n    if (_ol_has_.SAFARI) {\n      delta /= 3;\n    }\n  }\n\n  if (delta === 0) {\n    return false;\n  }\n\n  var now = Date.now();\n\n  if (this.startTime_ === undefined) {\n    this.startTime_ = now;\n  }\n\n  if (!this.mode_ || now - this.startTime_ > this.trackpadEventGap_) {\n    this.mode_ = Math.abs(delta) < 4 ?\n      _ol_interaction_MouseWheelZoom_.Mode_.TRACKPAD :\n      _ol_interaction_MouseWheelZoom_.Mode_.WHEEL;\n  }\n\n  if (this.mode_ === _ol_interaction_MouseWheelZoom_.Mode_.TRACKPAD) {\n    var view = map.getView();\n    if (this.trackpadTimeoutId_) {\n      clearTimeout(this.trackpadTimeoutId_);\n    } else {\n      view.setHint(_ol_ViewHint_.INTERACTING, 1);\n    }\n    this.trackpadTimeoutId_ = setTimeout(this.decrementInteractingHint_.bind(this), this.trackpadEventGap_);\n    var resolution = view.getResolution() * Math.pow(2, delta / this.trackpadDeltaPerZoom_);\n    var minResolution = view.getMinResolution();\n    var maxResolution = view.getMaxResolution();\n    var rebound = 0;\n    if (resolution < minResolution) {\n      resolution = Math.max(resolution, minResolution / this.trackpadZoomBuffer_);\n      rebound = 1;\n    } else if (resolution > maxResolution) {\n      resolution = Math.min(resolution, maxResolution * this.trackpadZoomBuffer_);\n      rebound = -1;\n    }\n    if (this.lastAnchor_) {\n      var center = view.calculateCenterZoom(resolution, this.lastAnchor_);\n      view.setCenter(view.constrainCenter(center));\n    }\n    view.setResolution(resolution);\n\n    if (rebound === 0 && this.constrainResolution_) {\n      view.animate({\n        resolution: view.constrainResolution(resolution, delta > 0 ? -1 : 1),\n        easing: _ol_easing_.easeOut,\n        anchor: this.lastAnchor_,\n        duration: this.duration_\n      });\n    }\n\n    if (rebound > 0) {\n      view.animate({\n        resolution: minResolution,\n        easing: _ol_easing_.easeOut,\n        anchor: this.lastAnchor_,\n        duration: 500\n      });\n    } else if (rebound < 0) {\n      view.animate({\n        resolution: maxResolution,\n        easing: _ol_easing_.easeOut,\n        anchor: this.lastAnchor_,\n        duration: 500\n      });\n    }\n    this.startTime_ = now;\n    return false;\n  }\n\n  this.delta_ += delta;\n\n  var timeLeft = Math.max(this.timeout_ - (now - this.startTime_), 0);\n\n  clearTimeout(this.timeoutId_);\n  this.timeoutId_ = setTimeout(this.handleWheelZoom_.bind(this, map), timeLeft);\n\n  return false;\n};\n\n\n/**\n * @private\n */\n_ol_interaction_MouseWheelZoom_.prototype.decrementInteractingHint_ = function() {\n  this.trackpadTimeoutId_ = undefined;\n  var view = this.getMap().getView();\n  view.setHint(_ol_ViewHint_.INTERACTING, -1);\n};\n\n\n/**\n * @private\n * @param {ol.PluggableMap} map Map.\n */\n_ol_interaction_MouseWheelZoom_.prototype.handleWheelZoom_ = function(map) {\n  var view = map.getView();\n  if (view.getAnimating()) {\n    view.cancelAnimations();\n  }\n  var maxDelta = _ol_.MOUSEWHEELZOOM_MAXDELTA;\n  var delta = _ol_math_.clamp(this.delta_, -maxDelta, maxDelta);\n  _ol_interaction_Interaction_.zoomByDelta(view, -delta, this.lastAnchor_,\n      this.duration_);\n  this.mode_ = undefined;\n  this.delta_ = 0;\n  this.lastAnchor_ = null;\n  this.startTime_ = undefined;\n  this.timeoutId_ = undefined;\n};\n\n\n/**\n * Enable or disable using the mouse's location as an anchor when zooming\n * @param {boolean} useAnchor true to zoom to the mouse's location, false\n * to zoom to the center of the map\n * @api\n */\n_ol_interaction_MouseWheelZoom_.prototype.setMouseAnchor = function(useAnchor) {\n  this.useAnchor_ = useAnchor;\n  if (!useAnchor) {\n    this.lastAnchor_ = null;\n  }\n};\n\n\n/**\n * @enum {string}\n * @private\n */\n_ol_interaction_MouseWheelZoom_.Mode_ = {\n  TRACKPAD: 'trackpad',\n  WHEEL: 'wheel'\n};\nexport default _ol_interaction_MouseWheelZoom_;\n","import _ol_ from '../index.js';\nimport _ol_ViewHint_ from '../viewhint.js';\nimport _ol_functions_ from '../functions.js';\nimport _ol_interaction_Interaction_ from '../interaction/interaction.js';\nimport _ol_interaction_Pointer_ from '../interaction/pointer.js';\nimport _ol_RotationConstraint_ from '../rotationconstraint.js';\n\n/**\n * @classdesc\n * Allows the user to rotate the map by twisting with two fingers\n * on a touch screen.\n *\n * @constructor\n * @extends {ol.interaction.Pointer}\n * @param {olx.interaction.PinchRotateOptions=} opt_options Options.\n * @api\n */\nvar _ol_interaction_PinchRotate_ = function(opt_options) {\n\n  _ol_interaction_Pointer_.call(this, {\n    handleDownEvent: _ol_interaction_PinchRotate_.handleDownEvent_,\n    handleDragEvent: _ol_interaction_PinchRotate_.handleDragEvent_,\n    handleUpEvent: _ol_interaction_PinchRotate_.handleUpEvent_\n  });\n\n  var options = opt_options || {};\n\n  /**\n   * @private\n   * @type {ol.Coordinate}\n   */\n  this.anchor_ = null;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.lastAngle_ = undefined;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.rotating_ = false;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.rotationDelta_ = 0.0;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.threshold_ = options.threshold !== undefined ? options.threshold : 0.3;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n};\n\n_ol_.inherits(_ol_interaction_PinchRotate_, _ol_interaction_Pointer_);\n\n\n/**\n * @param {ol.MapBrowserPointerEvent} mapBrowserEvent Event.\n * @this {ol.interaction.PinchRotate}\n * @private\n */\n_ol_interaction_PinchRotate_.handleDragEvent_ = function(mapBrowserEvent) {\n  var rotationDelta = 0.0;\n\n  var touch0 = this.targetPointers[0];\n  var touch1 = this.targetPointers[1];\n\n  // angle between touches\n  var angle = Math.atan2(\n      touch1.clientY - touch0.clientY,\n      touch1.clientX - touch0.clientX);\n\n  if (this.lastAngle_ !== undefined) {\n    var delta = angle - this.lastAngle_;\n    this.rotationDelta_ += delta;\n    if (!this.rotating_ &&\n        Math.abs(this.rotationDelta_) > this.threshold_) {\n      this.rotating_ = true;\n    }\n    rotationDelta = delta;\n  }\n  this.lastAngle_ = angle;\n\n  var map = mapBrowserEvent.map;\n  var view = map.getView();\n  if (view.getConstraints().rotation === _ol_RotationConstraint_.disable) {\n    return;\n  }\n\n  // rotate anchor point.\n  // FIXME: should be the intersection point between the lines:\n  //     touch0,touch1 and previousTouch0,previousTouch1\n  var viewportPosition = map.getViewport().getBoundingClientRect();\n  var centroid = _ol_interaction_Pointer_.centroid(this.targetPointers);\n  centroid[0] -= viewportPosition.left;\n  centroid[1] -= viewportPosition.top;\n  this.anchor_ = map.getCoordinateFromPixel(centroid);\n\n  // rotate\n  if (this.rotating_) {\n    var rotation = view.getRotation();\n    map.render();\n    _ol_interaction_Interaction_.rotateWithoutConstraints(view,\n        rotation + rotationDelta, this.anchor_);\n  }\n};\n\n\n/**\n * @param {ol.MapBrowserPointerEvent} mapBrowserEvent Event.\n * @return {boolean} Stop drag sequence?\n * @this {ol.interaction.PinchRotate}\n * @private\n */\n_ol_interaction_PinchRotate_.handleUpEvent_ = function(mapBrowserEvent) {\n  if (this.targetPointers.length < 2) {\n    var map = mapBrowserEvent.map;\n    var view = map.getView();\n    view.setHint(_ol_ViewHint_.INTERACTING, -1);\n    if (this.rotating_) {\n      var rotation = view.getRotation();\n      _ol_interaction_Interaction_.rotate(\n          view, rotation, this.anchor_, this.duration_);\n    }\n    return false;\n  } else {\n    return true;\n  }\n};\n\n\n/**\n * @param {ol.MapBrowserPointerEvent} mapBrowserEvent Event.\n * @return {boolean} Start drag sequence?\n * @this {ol.interaction.PinchRotate}\n * @private\n */\n_ol_interaction_PinchRotate_.handleDownEvent_ = function(mapBrowserEvent) {\n  if (this.targetPointers.length >= 2) {\n    var map = mapBrowserEvent.map;\n    this.anchor_ = null;\n    this.lastAngle_ = undefined;\n    this.rotating_ = false;\n    this.rotationDelta_ = 0.0;\n    if (!this.handlingDownUpSequence) {\n      map.getView().setHint(_ol_ViewHint_.INTERACTING, 1);\n    }\n    return true;\n  } else {\n    return false;\n  }\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_interaction_PinchRotate_.prototype.shouldStopEvent = _ol_functions_.FALSE;\nexport default _ol_interaction_PinchRotate_;\n","import _ol_ from '../index.js';\nimport _ol_ViewHint_ from '../viewhint.js';\nimport _ol_functions_ from '../functions.js';\nimport _ol_interaction_Interaction_ from '../interaction/interaction.js';\nimport _ol_interaction_Pointer_ from '../interaction/pointer.js';\n\n/**\n * @classdesc\n * Allows the user to zoom the map by pinching with two fingers\n * on a touch screen.\n *\n * @constructor\n * @extends {ol.interaction.Pointer}\n * @param {olx.interaction.PinchZoomOptions=} opt_options Options.\n * @api\n */\nvar _ol_interaction_PinchZoom_ = function(opt_options) {\n\n  _ol_interaction_Pointer_.call(this, {\n    handleDownEvent: _ol_interaction_PinchZoom_.handleDownEvent_,\n    handleDragEvent: _ol_interaction_PinchZoom_.handleDragEvent_,\n    handleUpEvent: _ol_interaction_PinchZoom_.handleUpEvent_\n  });\n\n  var options = opt_options ? opt_options : {};\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.constrainResolution_ = options.constrainResolution || false;\n\n  /**\n   * @private\n   * @type {ol.Coordinate}\n   */\n  this.anchor_ = null;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.duration_ = options.duration !== undefined ? options.duration : 400;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.lastDistance_ = undefined;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.lastScaleDelta_ = 1;\n\n};\n\n_ol_.inherits(_ol_interaction_PinchZoom_, _ol_interaction_Pointer_);\n\n\n/**\n * @param {ol.MapBrowserPointerEvent} mapBrowserEvent Event.\n * @this {ol.interaction.PinchZoom}\n * @private\n */\n_ol_interaction_PinchZoom_.handleDragEvent_ = function(mapBrowserEvent) {\n  var scaleDelta = 1.0;\n\n  var touch0 = this.targetPointers[0];\n  var touch1 = this.targetPointers[1];\n  var dx = touch0.clientX - touch1.clientX;\n  var dy = touch0.clientY - touch1.clientY;\n\n  // distance between touches\n  var distance = Math.sqrt(dx * dx + dy * dy);\n\n  if (this.lastDistance_ !== undefined) {\n    scaleDelta = this.lastDistance_ / distance;\n  }\n  this.lastDistance_ = distance;\n\n\n  var map = mapBrowserEvent.map;\n  var view = map.getView();\n  var resolution = view.getResolution();\n  var maxResolution = view.getMaxResolution();\n  var minResolution = view.getMinResolution();\n  var newResolution = resolution * scaleDelta;\n  if (newResolution > maxResolution) {\n    scaleDelta = maxResolution / resolution;\n    newResolution = maxResolution;\n  } else if (newResolution < minResolution) {\n    scaleDelta = minResolution / resolution;\n    newResolution = minResolution;\n  }\n\n  if (scaleDelta != 1.0) {\n    this.lastScaleDelta_ = scaleDelta;\n  }\n\n  // scale anchor point.\n  var viewportPosition = map.getViewport().getBoundingClientRect();\n  var centroid = _ol_interaction_Pointer_.centroid(this.targetPointers);\n  centroid[0] -= viewportPosition.left;\n  centroid[1] -= viewportPosition.top;\n  this.anchor_ = map.getCoordinateFromPixel(centroid);\n\n  // scale, bypass the resolution constraint\n  map.render();\n  _ol_interaction_Interaction_.zoomWithoutConstraints(view, newResolution, this.anchor_);\n};\n\n\n/**\n * @param {ol.MapBrowserPointerEvent} mapBrowserEvent Event.\n * @return {boolean} Stop drag sequence?\n * @this {ol.interaction.PinchZoom}\n * @private\n */\n_ol_interaction_PinchZoom_.handleUpEvent_ = function(mapBrowserEvent) {\n  if (this.targetPointers.length < 2) {\n    var map = mapBrowserEvent.map;\n    var view = map.getView();\n    view.setHint(_ol_ViewHint_.INTERACTING, -1);\n    var resolution = view.getResolution();\n    if (this.constrainResolution_ ||\n        resolution < view.getMinResolution() ||\n        resolution > view.getMaxResolution()) {\n      // Zoom to final resolution, with an animation, and provide a\n      // direction not to zoom out/in if user was pinching in/out.\n      // Direction is > 0 if pinching out, and < 0 if pinching in.\n      var direction = this.lastScaleDelta_ - 1;\n      _ol_interaction_Interaction_.zoom(view, resolution,\n          this.anchor_, this.duration_, direction);\n    }\n    return false;\n  } else {\n    return true;\n  }\n};\n\n\n/**\n * @param {ol.MapBrowserPointerEvent} mapBrowserEvent Event.\n * @return {boolean} Start drag sequence?\n * @this {ol.interaction.PinchZoom}\n * @private\n */\n_ol_interaction_PinchZoom_.handleDownEvent_ = function(mapBrowserEvent) {\n  if (this.targetPointers.length >= 2) {\n    var map = mapBrowserEvent.map;\n    this.anchor_ = null;\n    this.lastDistance_ = undefined;\n    this.lastScaleDelta_ = 1;\n    if (!this.handlingDownUpSequence) {\n      map.getView().setHint(_ol_ViewHint_.INTERACTING, 1);\n    }\n    return true;\n  } else {\n    return false;\n  }\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_interaction_PinchZoom_.prototype.shouldStopEvent = _ol_functions_.FALSE;\nexport default _ol_interaction_PinchZoom_;\n","import _ol_Collection_ from './collection.js';\nimport _ol_Kinetic_ from './kinetic.js';\nimport _ol_interaction_DoubleClickZoom_ from './interaction/doubleclickzoom.js';\nimport _ol_interaction_DragPan_ from './interaction/dragpan.js';\nimport _ol_interaction_DragRotate_ from './interaction/dragrotate.js';\nimport _ol_interaction_DragZoom_ from './interaction/dragzoom.js';\nimport _ol_interaction_KeyboardPan_ from './interaction/keyboardpan.js';\nimport _ol_interaction_KeyboardZoom_ from './interaction/keyboardzoom.js';\nimport _ol_interaction_MouseWheelZoom_ from './interaction/mousewheelzoom.js';\nimport _ol_interaction_PinchRotate_ from './interaction/pinchrotate.js';\nimport _ol_interaction_PinchZoom_ from './interaction/pinchzoom.js';\nvar _ol_interaction_ = {};\n\n\n/**\n * Set of interactions included in maps by default. Specific interactions can be\n * excluded by setting the appropriate option to false in the constructor\n * options, but the order of the interactions is fixed.  If you want to specify\n * a different order for interactions, you will need to create your own\n * {@link ol.interaction.Interaction} instances and insert them into a\n * {@link ol.Collection} in the order you want before creating your\n * {@link ol.Map} instance. The default set of interactions, in sequence, is:\n * * {@link ol.interaction.DragRotate}\n * * {@link ol.interaction.DoubleClickZoom}\n * * {@link ol.interaction.DragPan}\n * * {@link ol.interaction.PinchRotate}\n * * {@link ol.interaction.PinchZoom}\n * * {@link ol.interaction.KeyboardPan}\n * * {@link ol.interaction.KeyboardZoom}\n * * {@link ol.interaction.MouseWheelZoom}\n * * {@link ol.interaction.DragZoom}\n *\n * @param {olx.interaction.DefaultsOptions=} opt_options Defaults options.\n * @return {ol.Collection.<ol.interaction.Interaction>} A collection of\n * interactions to be used with the ol.Map constructor's interactions option.\n * @api\n */\n_ol_interaction_.defaults = function(opt_options) {\n\n  var options = opt_options ? opt_options : {};\n\n  var interactions = new _ol_Collection_();\n\n  var kinetic = new _ol_Kinetic_(-0.005, 0.05, 100);\n\n  var altShiftDragRotate = options.altShiftDragRotate !== undefined ?\n    options.altShiftDragRotate : true;\n  if (altShiftDragRotate) {\n    interactions.push(new _ol_interaction_DragRotate_());\n  }\n\n  var doubleClickZoom = options.doubleClickZoom !== undefined ?\n    options.doubleClickZoom : true;\n  if (doubleClickZoom) {\n    interactions.push(new _ol_interaction_DoubleClickZoom_({\n      delta: options.zoomDelta,\n      duration: options.zoomDuration\n    }));\n  }\n\n  var dragPan = options.dragPan !== undefined ? options.dragPan : true;\n  if (dragPan) {\n    interactions.push(new _ol_interaction_DragPan_({\n      kinetic: kinetic\n    }));\n  }\n\n  var pinchRotate = options.pinchRotate !== undefined ? options.pinchRotate :\n    true;\n  if (pinchRotate) {\n    interactions.push(new _ol_interaction_PinchRotate_());\n  }\n\n  var pinchZoom = options.pinchZoom !== undefined ? options.pinchZoom : true;\n  if (pinchZoom) {\n    interactions.push(new _ol_interaction_PinchZoom_({\n      constrainResolution: options.constrainResolution,\n      duration: options.zoomDuration\n    }));\n  }\n\n  var keyboard = options.keyboard !== undefined ? options.keyboard : true;\n  if (keyboard) {\n    interactions.push(new _ol_interaction_KeyboardPan_());\n    interactions.push(new _ol_interaction_KeyboardZoom_({\n      delta: options.zoomDelta,\n      duration: options.zoomDuration\n    }));\n  }\n\n  var mouseWheelZoom = options.mouseWheelZoom !== undefined ?\n    options.mouseWheelZoom : true;\n  if (mouseWheelZoom) {\n    interactions.push(new _ol_interaction_MouseWheelZoom_({\n      constrainResolution: options.constrainResolution,\n      duration: options.zoomDuration\n    }));\n  }\n\n  var shiftDragZoom = options.shiftDragZoom !== undefined ?\n    options.shiftDragZoom : true;\n  if (shiftDragZoom) {\n    interactions.push(new _ol_interaction_DragZoom_({\n      duration: options.zoomDuration\n    }));\n  }\n\n  return interactions;\n\n};\nexport default _ol_interaction_;\n","import _ol_ from './index.js';\nimport _ol_events_EventTarget_ from './events/eventtarget.js';\nimport _ol_events_EventType_ from './events/eventtype.js';\n\n/**\n * @constructor\n * @abstract\n * @extends {ol.events.EventTarget}\n * @param {ol.Extent} extent Extent.\n * @param {number|undefined} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @param {ol.ImageState} state State.\n */\nvar _ol_ImageBase_ = function(extent, resolution, pixelRatio, state) {\n\n  _ol_events_EventTarget_.call(this);\n\n  /**\n   * @protected\n   * @type {ol.Extent}\n   */\n  this.extent = extent;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.pixelRatio_ = pixelRatio;\n\n  /**\n   * @protected\n   * @type {number|undefined}\n   */\n  this.resolution = resolution;\n\n  /**\n   * @protected\n   * @type {ol.ImageState}\n   */\n  this.state = state;\n\n};\n\n_ol_.inherits(_ol_ImageBase_, _ol_events_EventTarget_);\n\n\n/**\n * @protected\n */\n_ol_ImageBase_.prototype.changed = function() {\n  this.dispatchEvent(_ol_events_EventType_.CHANGE);\n};\n\n\n/**\n * @return {ol.Extent} Extent.\n */\n_ol_ImageBase_.prototype.getExtent = function() {\n  return this.extent;\n};\n\n\n/**\n * @abstract\n * @return {HTMLCanvasElement|Image|HTMLVideoElement} Image.\n */\n_ol_ImageBase_.prototype.getImage = function() {};\n\n\n/**\n * @return {number} PixelRatio.\n */\n_ol_ImageBase_.prototype.getPixelRatio = function() {\n  return this.pixelRatio_;\n};\n\n\n/**\n * @return {number} Resolution.\n */\n_ol_ImageBase_.prototype.getResolution = function() {\n  return /** @type {number} */ (this.resolution);\n};\n\n\n/**\n * @return {ol.ImageState} State.\n */\n_ol_ImageBase_.prototype.getState = function() {\n  return this.state;\n};\n\n\n/**\n * Load not yet loaded URI.\n * @abstract\n */\n_ol_ImageBase_.prototype.load = function() {};\nexport default _ol_ImageBase_;\n","import _ol_ from './index.js';\nimport _ol_ImageBase_ from './imagebase.js';\nimport _ol_ImageState_ from './imagestate.js';\n\n/**\n * @constructor\n * @extends {ol.ImageBase}\n * @param {ol.Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @param {HTMLCanvasElement} canvas Canvas.\n * @param {ol.ImageCanvasLoader=} opt_loader Optional loader function to\n *     support asynchronous canvas drawing.\n */\nvar _ol_ImageCanvas_ = function(extent, resolution, pixelRatio, canvas, opt_loader) {\n\n  /**\n   * Optional canvas loader function.\n   * @type {?ol.ImageCanvasLoader}\n   * @private\n   */\n  this.loader_ = opt_loader !== undefined ? opt_loader : null;\n\n  var state = opt_loader !== undefined ?\n    _ol_ImageState_.IDLE : _ol_ImageState_.LOADED;\n\n  _ol_ImageBase_.call(this, extent, resolution, pixelRatio, state);\n\n  /**\n   * @private\n   * @type {HTMLCanvasElement}\n   */\n  this.canvas_ = canvas;\n\n  /**\n   * @private\n   * @type {Error}\n   */\n  this.error_ = null;\n\n};\n\n_ol_.inherits(_ol_ImageCanvas_, _ol_ImageBase_);\n\n\n/**\n * Get any error associated with asynchronous rendering.\n * @return {Error} Any error that occurred during rendering.\n */\n_ol_ImageCanvas_.prototype.getError = function() {\n  return this.error_;\n};\n\n\n/**\n * Handle async drawing complete.\n * @param {Error} err Any error during drawing.\n * @private\n */\n_ol_ImageCanvas_.prototype.handleLoad_ = function(err) {\n  if (err) {\n    this.error_ = err;\n    this.state = _ol_ImageState_.ERROR;\n  } else {\n    this.state = _ol_ImageState_.LOADED;\n  }\n  this.changed();\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_ImageCanvas_.prototype.load = function() {\n  if (this.state == _ol_ImageState_.IDLE) {\n    this.state = _ol_ImageState_.LOADING;\n    this.changed();\n    this.loader_(this.handleLoad_.bind(this));\n  }\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_ImageCanvas_.prototype.getImage = function() {\n  return this.canvas_;\n};\nexport default _ol_ImageCanvas_;\n","import _ol_ from '../index.js';\nimport _ol_events_Event_ from '../events/event.js';\n\n/**\n * @constructor\n * @extends {ol.events.Event}\n * @implements {oli.render.Event}\n * @param {ol.render.EventType} type Type.\n * @param {ol.render.VectorContext=} opt_vectorContext Vector context.\n * @param {olx.FrameState=} opt_frameState Frame state.\n * @param {?CanvasRenderingContext2D=} opt_context Context.\n * @param {?ol.webgl.Context=} opt_glContext WebGL Context.\n */\nvar _ol_render_Event_ = function(\n    type, opt_vectorContext, opt_frameState, opt_context,\n    opt_glContext) {\n\n  _ol_events_Event_.call(this, type);\n\n  /**\n   * For canvas, this is an instance of {@link ol.render.canvas.Immediate}.\n   * @type {ol.render.VectorContext|undefined}\n   * @api\n   */\n  this.vectorContext = opt_vectorContext;\n\n  /**\n   * An object representing the current render frame state.\n   * @type {olx.FrameState|undefined}\n   * @api\n   */\n  this.frameState = opt_frameState;\n\n  /**\n   * Canvas context. Only available when a Canvas renderer is used, null\n   * otherwise.\n   * @type {CanvasRenderingContext2D|null|undefined}\n   * @api\n   */\n  this.context = opt_context;\n\n  /**\n   * WebGL context. Only available when a WebGL renderer is used, null\n   * otherwise.\n   * @type {ol.webgl.Context|null|undefined}\n   * @api\n   */\n  this.glContext = opt_glContext;\n\n};\n\n_ol_.inherits(_ol_render_Event_, _ol_events_Event_);\nexport default _ol_render_Event_;\n","/**\n * Context for drawing geometries.  A vector context is available on render\n * events and does not need to be constructed directly.\n * @constructor\n * @abstract\n * @struct\n * @api\n */\nvar _ol_render_VectorContext_ = function() {\n};\n\n\n/**\n * Render a geometry with a custom renderer.\n *\n * @param {ol.geom.SimpleGeometry} geometry Geometry.\n * @param {ol.Feature|ol.render.Feature} feature Feature.\n * @param {Function} renderer Renderer.\n */\n_ol_render_VectorContext_.prototype.drawCustom = function(geometry, feature, renderer) {};\n\n\n/**\n * Render a geometry.\n *\n * @param {ol.geom.Geometry} geometry The geometry to render.\n */\n_ol_render_VectorContext_.prototype.drawGeometry = function(geometry) {};\n\n\n/**\n * Set the rendering style.\n *\n * @param {ol.style.Style} style The rendering style.\n */\n_ol_render_VectorContext_.prototype.setStyle = function(style) {};\n\n\n/**\n * @param {ol.geom.Circle} circleGeometry Circle geometry.\n * @param {ol.Feature} feature Feature.\n */\n_ol_render_VectorContext_.prototype.drawCircle = function(circleGeometry, feature) {};\n\n\n/**\n * @param {ol.Feature} feature Feature.\n * @param {ol.style.Style} style Style.\n */\n_ol_render_VectorContext_.prototype.drawFeature = function(feature, style) {};\n\n\n/**\n * @param {ol.geom.GeometryCollection} geometryCollectionGeometry Geometry\n *     collection.\n * @param {ol.Feature} feature Feature.\n */\n_ol_render_VectorContext_.prototype.drawGeometryCollection = function(geometryCollectionGeometry, feature) {};\n\n\n/**\n * @param {ol.geom.LineString|ol.render.Feature} lineStringGeometry Line\n *     string geometry.\n * @param {ol.Feature|ol.render.Feature} feature Feature.\n */\n_ol_render_VectorContext_.prototype.drawLineString = function(lineStringGeometry, feature) {};\n\n\n/**\n * @param {ol.geom.MultiLineString|ol.render.Feature} multiLineStringGeometry\n *     MultiLineString geometry.\n * @param {ol.Feature|ol.render.Feature} feature Feature.\n */\n_ol_render_VectorContext_.prototype.drawMultiLineString = function(multiLineStringGeometry, feature) {};\n\n\n/**\n * @param {ol.geom.MultiPoint|ol.render.Feature} multiPointGeometry MultiPoint\n *     geometry.\n * @param {ol.Feature|ol.render.Feature} feature Feature.\n */\n_ol_render_VectorContext_.prototype.drawMultiPoint = function(multiPointGeometry, feature) {};\n\n\n/**\n * @param {ol.geom.MultiPolygon} multiPolygonGeometry MultiPolygon geometry.\n * @param {ol.Feature|ol.render.Feature} feature Feature.\n */\n_ol_render_VectorContext_.prototype.drawMultiPolygon = function(multiPolygonGeometry, feature) {};\n\n\n/**\n * @param {ol.geom.Point|ol.render.Feature} pointGeometry Point geometry.\n * @param {ol.Feature|ol.render.Feature} feature Feature.\n */\n_ol_render_VectorContext_.prototype.drawPoint = function(pointGeometry, feature) {};\n\n\n/**\n * @param {ol.geom.Polygon|ol.render.Feature} polygonGeometry Polygon\n *     geometry.\n * @param {ol.Feature|ol.render.Feature} feature Feature.\n */\n_ol_render_VectorContext_.prototype.drawPolygon = function(polygonGeometry, feature) {};\n\n\n/**\n * @param {ol.geom.Geometry|ol.render.Feature} geometry Geometry.\n * @param {ol.Feature|ol.render.Feature} feature Feature.\n */\n_ol_render_VectorContext_.prototype.drawText = function(geometry, feature) {};\n\n\n/**\n * @param {ol.style.Fill} fillStyle Fill style.\n * @param {ol.style.Stroke} strokeStyle Stroke style.\n */\n_ol_render_VectorContext_.prototype.setFillStrokeStyle = function(fillStyle, strokeStyle) {};\n\n\n/**\n * @param {ol.style.Image} imageStyle Image style.\n * @param {ol.DeclutterGroup=} opt_declutterGroup Declutter.\n */\n_ol_render_VectorContext_.prototype.setImageStyle = function(imageStyle, opt_declutterGroup) {};\n\n\n/**\n * @param {ol.style.Text} textStyle Text style.\n * @param {ol.DeclutterGroup=} opt_declutterGroup Declutter.\n */\n_ol_render_VectorContext_.prototype.setTextStyle = function(textStyle, opt_declutterGroup) {};\nexport default _ol_render_VectorContext_;\n","// FIXME test, especially polygons with holes and multipolygons\n// FIXME need to handle large thick features (where pixel size matters)\n// FIXME add offset and end to ol.geom.flat.transform.transform2D?\n\nimport _ol_ from '../../index.js';\nimport _ol_array_ from '../../array.js';\nimport _ol_colorlike_ from '../../colorlike.js';\nimport _ol_extent_ from '../../extent.js';\nimport _ol_geom_GeometryType_ from '../../geom/geometrytype.js';\nimport _ol_geom_SimpleGeometry_ from '../../geom/simplegeometry.js';\nimport _ol_geom_flat_transform_ from '../../geom/flat/transform.js';\nimport _ol_has_ from '../../has.js';\nimport _ol_render_VectorContext_ from '../vectorcontext.js';\nimport _ol_render_canvas_ from '../canvas.js';\nimport _ol_transform_ from '../../transform.js';\n\n/**\n * @classdesc\n * A concrete subclass of {@link ol.render.VectorContext} that implements\n * direct rendering of features and geometries to an HTML5 Canvas context.\n * Instances of this class are created internally by the library and\n * provided to application code as vectorContext member of the\n * {@link ol.render.Event} object associated with postcompose, precompose and\n * render events emitted by layers and maps.\n *\n * @constructor\n * @extends {ol.render.VectorContext}\n * @param {CanvasRenderingContext2D} context Context.\n * @param {number} pixelRatio Pixel ratio.\n * @param {ol.Extent} extent Extent.\n * @param {ol.Transform} transform Transform.\n * @param {number} viewRotation View rotation.\n * @struct\n */\nvar _ol_render_canvas_Immediate_ = function(context, pixelRatio, extent, transform, viewRotation) {\n  _ol_render_VectorContext_.call(this);\n\n  /**\n   * @private\n   * @type {CanvasRenderingContext2D}\n   */\n  this.context_ = context;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.pixelRatio_ = pixelRatio;\n\n  /**\n   * @private\n   * @type {ol.Extent}\n   */\n  this.extent_ = extent;\n\n  /**\n   * @private\n   * @type {ol.Transform}\n   */\n  this.transform_ = transform;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.viewRotation_ = viewRotation;\n\n  /**\n   * @private\n   * @type {?ol.CanvasFillState}\n   */\n  this.contextFillState_ = null;\n\n  /**\n   * @private\n   * @type {?ol.CanvasStrokeState}\n   */\n  this.contextStrokeState_ = null;\n\n  /**\n   * @private\n   * @type {?ol.CanvasTextState}\n   */\n  this.contextTextState_ = null;\n\n  /**\n   * @private\n   * @type {?ol.CanvasFillState}\n   */\n  this.fillState_ = null;\n\n  /**\n   * @private\n   * @type {?ol.CanvasStrokeState}\n   */\n  this.strokeState_ = null;\n\n  /**\n   * @private\n   * @type {HTMLCanvasElement|HTMLVideoElement|Image}\n   */\n  this.image_ = null;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.imageAnchorX_ = 0;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.imageAnchorY_ = 0;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.imageHeight_ = 0;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.imageOpacity_ = 0;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.imageOriginX_ = 0;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.imageOriginY_ = 0;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.imageRotateWithView_ = false;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.imageRotation_ = 0;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.imageScale_ = 0;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.imageSnapToPixel_ = false;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.imageWidth_ = 0;\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this.text_ = '';\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.textOffsetX_ = 0;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.textOffsetY_ = 0;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.textRotateWithView_ = false;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.textRotation_ = 0;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.textScale_ = 0;\n\n  /**\n   * @private\n   * @type {?ol.CanvasFillState}\n   */\n  this.textFillState_ = null;\n\n  /**\n   * @private\n   * @type {?ol.CanvasStrokeState}\n   */\n  this.textStrokeState_ = null;\n\n  /**\n   * @private\n   * @type {?ol.CanvasTextState}\n   */\n  this.textState_ = null;\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.pixelCoordinates_ = [];\n\n  /**\n   * @private\n   * @type {ol.Transform}\n   */\n  this.tmpLocalTransform_ = _ol_transform_.create();\n\n};\n\n_ol_.inherits(_ol_render_canvas_Immediate_, _ol_render_VectorContext_);\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @private\n */\n_ol_render_canvas_Immediate_.prototype.drawImages_ = function(flatCoordinates, offset, end, stride) {\n  if (!this.image_) {\n    return;\n  }\n  var pixelCoordinates = _ol_geom_flat_transform_.transform2D(\n      flatCoordinates, offset, end, 2, this.transform_,\n      this.pixelCoordinates_);\n  var context = this.context_;\n  var localTransform = this.tmpLocalTransform_;\n  var alpha = context.globalAlpha;\n  if (this.imageOpacity_ != 1) {\n    context.globalAlpha = alpha * this.imageOpacity_;\n  }\n  var rotation = this.imageRotation_;\n  if (this.imageRotateWithView_) {\n    rotation += this.viewRotation_;\n  }\n  var i, ii;\n  for (i = 0, ii = pixelCoordinates.length; i < ii; i += 2) {\n    var x = pixelCoordinates[i] - this.imageAnchorX_;\n    var y = pixelCoordinates[i + 1] - this.imageAnchorY_;\n    if (this.imageSnapToPixel_) {\n      x = Math.round(x);\n      y = Math.round(y);\n    }\n    if (rotation !== 0 || this.imageScale_ != 1) {\n      var centerX = x + this.imageAnchorX_;\n      var centerY = y + this.imageAnchorY_;\n      _ol_transform_.compose(localTransform,\n          centerX, centerY,\n          this.imageScale_, this.imageScale_,\n          rotation,\n          -centerX, -centerY);\n      context.setTransform.apply(context, localTransform);\n    }\n    context.drawImage(this.image_, this.imageOriginX_, this.imageOriginY_,\n        this.imageWidth_, this.imageHeight_, x, y,\n        this.imageWidth_, this.imageHeight_);\n  }\n  if (rotation !== 0 || this.imageScale_ != 1) {\n    context.setTransform(1, 0, 0, 1, 0, 0);\n  }\n  if (this.imageOpacity_ != 1) {\n    context.globalAlpha = alpha;\n  }\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @private\n */\n_ol_render_canvas_Immediate_.prototype.drawText_ = function(flatCoordinates, offset, end, stride) {\n  if (!this.textState_ || this.text_ === '') {\n    return;\n  }\n  if (this.textFillState_) {\n    this.setContextFillState_(this.textFillState_);\n  }\n  if (this.textStrokeState_) {\n    this.setContextStrokeState_(this.textStrokeState_);\n  }\n  this.setContextTextState_(this.textState_);\n  var pixelCoordinates = _ol_geom_flat_transform_.transform2D(\n      flatCoordinates, offset, end, stride, this.transform_,\n      this.pixelCoordinates_);\n  var context = this.context_;\n  var rotation = this.textRotation_;\n  if (this.textRotateWithView_) {\n    rotation += this.viewRotation_;\n  }\n  for (; offset < end; offset += stride) {\n    var x = pixelCoordinates[offset] + this.textOffsetX_;\n    var y = pixelCoordinates[offset + 1] + this.textOffsetY_;\n    if (rotation !== 0 || this.textScale_ != 1) {\n      var localTransform = _ol_transform_.compose(this.tmpLocalTransform_,\n          x, y,\n          this.textScale_, this.textScale_,\n          rotation,\n          -x, -y);\n      context.setTransform.apply(context, localTransform);\n    }\n    if (this.textStrokeState_) {\n      context.strokeText(this.text_, x, y);\n    }\n    if (this.textFillState_) {\n      context.fillText(this.text_, x, y);\n    }\n  }\n  if (rotation !== 0 || this.textScale_ != 1) {\n    context.setTransform(1, 0, 0, 1, 0, 0);\n  }\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {boolean} close Close.\n * @private\n * @return {number} end End.\n */\n_ol_render_canvas_Immediate_.prototype.moveToLineTo_ = function(flatCoordinates, offset, end, stride, close) {\n  var context = this.context_;\n  var pixelCoordinates = _ol_geom_flat_transform_.transform2D(\n      flatCoordinates, offset, end, stride, this.transform_,\n      this.pixelCoordinates_);\n  context.moveTo(pixelCoordinates[0], pixelCoordinates[1]);\n  var length = pixelCoordinates.length;\n  if (close) {\n    length -= 2;\n  }\n  for (var i = 2; i < length; i += 2) {\n    context.lineTo(pixelCoordinates[i], pixelCoordinates[i + 1]);\n  }\n  if (close) {\n    context.closePath();\n  }\n  return end;\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<number>} ends Ends.\n * @param {number} stride Stride.\n * @private\n * @return {number} End.\n */\n_ol_render_canvas_Immediate_.prototype.drawRings_ = function(flatCoordinates, offset, ends, stride) {\n  var i, ii;\n  for (i = 0, ii = ends.length; i < ii; ++i) {\n    offset = this.moveToLineTo_(\n        flatCoordinates, offset, ends[i], stride, true);\n  }\n  return offset;\n};\n\n\n/**\n * Render a circle geometry into the canvas.  Rendering is immediate and uses\n * the current fill and stroke styles.\n *\n * @param {ol.geom.Circle} geometry Circle geometry.\n * @override\n * @api\n */\n_ol_render_canvas_Immediate_.prototype.drawCircle = function(geometry) {\n  if (!_ol_extent_.intersects(this.extent_, geometry.getExtent())) {\n    return;\n  }\n  if (this.fillState_ || this.strokeState_) {\n    if (this.fillState_) {\n      this.setContextFillState_(this.fillState_);\n    }\n    if (this.strokeState_) {\n      this.setContextStrokeState_(this.strokeState_);\n    }\n    var pixelCoordinates = _ol_geom_SimpleGeometry_.transform2D(\n        geometry, this.transform_, this.pixelCoordinates_);\n    var dx = pixelCoordinates[2] - pixelCoordinates[0];\n    var dy = pixelCoordinates[3] - pixelCoordinates[1];\n    var radius = Math.sqrt(dx * dx + dy * dy);\n    var context = this.context_;\n    context.beginPath();\n    context.arc(\n        pixelCoordinates[0], pixelCoordinates[1], radius, 0, 2 * Math.PI);\n    if (this.fillState_) {\n      context.fill();\n    }\n    if (this.strokeState_) {\n      context.stroke();\n    }\n  }\n  if (this.text_ !== '') {\n    this.drawText_(geometry.getCenter(), 0, 2, 2);\n  }\n};\n\n\n/**\n * Set the rendering style.  Note that since this is an immediate rendering API,\n * any `zIndex` on the provided style will be ignored.\n *\n * @param {ol.style.Style} style The rendering style.\n * @override\n * @api\n */\n_ol_render_canvas_Immediate_.prototype.setStyle = function(style) {\n  this.setFillStrokeStyle(style.getFill(), style.getStroke());\n  this.setImageStyle(style.getImage());\n  this.setTextStyle(style.getText());\n};\n\n\n/**\n * Render a geometry into the canvas.  Call\n * {@link ol.render.canvas.Immediate#setStyle} first to set the rendering style.\n *\n * @param {ol.geom.Geometry|ol.render.Feature} geometry The geometry to render.\n * @override\n * @api\n */\n_ol_render_canvas_Immediate_.prototype.drawGeometry = function(geometry) {\n  var type = geometry.getType();\n  switch (type) {\n    case _ol_geom_GeometryType_.POINT:\n      this.drawPoint(/** @type {ol.geom.Point} */ (geometry));\n      break;\n    case _ol_geom_GeometryType_.LINE_STRING:\n      this.drawLineString(/** @type {ol.geom.LineString} */ (geometry));\n      break;\n    case _ol_geom_GeometryType_.POLYGON:\n      this.drawPolygon(/** @type {ol.geom.Polygon} */ (geometry));\n      break;\n    case _ol_geom_GeometryType_.MULTI_POINT:\n      this.drawMultiPoint(/** @type {ol.geom.MultiPoint} */ (geometry));\n      break;\n    case _ol_geom_GeometryType_.MULTI_LINE_STRING:\n      this.drawMultiLineString(/** @type {ol.geom.MultiLineString} */ (geometry));\n      break;\n    case _ol_geom_GeometryType_.MULTI_POLYGON:\n      this.drawMultiPolygon(/** @type {ol.geom.MultiPolygon} */ (geometry));\n      break;\n    case _ol_geom_GeometryType_.GEOMETRY_COLLECTION:\n      this.drawGeometryCollection(/** @type {ol.geom.GeometryCollection} */ (geometry));\n      break;\n    case _ol_geom_GeometryType_.CIRCLE:\n      this.drawCircle(/** @type {ol.geom.Circle} */ (geometry));\n      break;\n    default:\n  }\n};\n\n\n/**\n * Render a feature into the canvas.  Note that any `zIndex` on the provided\n * style will be ignored - features are rendered immediately in the order that\n * this method is called.  If you need `zIndex` support, you should be using an\n * {@link ol.layer.Vector} instead.\n *\n * @param {ol.Feature} feature Feature.\n * @param {ol.style.Style} style Style.\n * @override\n * @api\n */\n_ol_render_canvas_Immediate_.prototype.drawFeature = function(feature, style) {\n  var geometry = style.getGeometryFunction()(feature);\n  if (!geometry ||\n      !_ol_extent_.intersects(this.extent_, geometry.getExtent())) {\n    return;\n  }\n  this.setStyle(style);\n  this.drawGeometry(geometry);\n};\n\n\n/**\n * Render a GeometryCollection to the canvas.  Rendering is immediate and\n * uses the current styles appropriate for each geometry in the collection.\n *\n * @param {ol.geom.GeometryCollection} geometry Geometry collection.\n * @override\n */\n_ol_render_canvas_Immediate_.prototype.drawGeometryCollection = function(geometry) {\n  var geometries = geometry.getGeometriesArray();\n  var i, ii;\n  for (i = 0, ii = geometries.length; i < ii; ++i) {\n    this.drawGeometry(geometries[i]);\n  }\n};\n\n\n/**\n * Render a Point geometry into the canvas.  Rendering is immediate and uses\n * the current style.\n *\n * @param {ol.geom.Point|ol.render.Feature} geometry Point geometry.\n * @override\n */\n_ol_render_canvas_Immediate_.prototype.drawPoint = function(geometry) {\n  var flatCoordinates = geometry.getFlatCoordinates();\n  var stride = geometry.getStride();\n  if (this.image_) {\n    this.drawImages_(flatCoordinates, 0, flatCoordinates.length, stride);\n  }\n  if (this.text_ !== '') {\n    this.drawText_(flatCoordinates, 0, flatCoordinates.length, stride);\n  }\n};\n\n\n/**\n * Render a MultiPoint geometry  into the canvas.  Rendering is immediate and\n * uses the current style.\n *\n * @param {ol.geom.MultiPoint|ol.render.Feature} geometry MultiPoint geometry.\n * @override\n */\n_ol_render_canvas_Immediate_.prototype.drawMultiPoint = function(geometry) {\n  var flatCoordinates = geometry.getFlatCoordinates();\n  var stride = geometry.getStride();\n  if (this.image_) {\n    this.drawImages_(flatCoordinates, 0, flatCoordinates.length, stride);\n  }\n  if (this.text_ !== '') {\n    this.drawText_(flatCoordinates, 0, flatCoordinates.length, stride);\n  }\n};\n\n\n/**\n * Render a LineString into the canvas.  Rendering is immediate and uses\n * the current style.\n *\n * @param {ol.geom.LineString|ol.render.Feature} geometry LineString geometry.\n * @override\n */\n_ol_render_canvas_Immediate_.prototype.drawLineString = function(geometry) {\n  if (!_ol_extent_.intersects(this.extent_, geometry.getExtent())) {\n    return;\n  }\n  if (this.strokeState_) {\n    this.setContextStrokeState_(this.strokeState_);\n    var context = this.context_;\n    var flatCoordinates = geometry.getFlatCoordinates();\n    context.beginPath();\n    this.moveToLineTo_(flatCoordinates, 0, flatCoordinates.length,\n        geometry.getStride(), false);\n    context.stroke();\n  }\n  if (this.text_ !== '') {\n    var flatMidpoint = geometry.getFlatMidpoint();\n    this.drawText_(flatMidpoint, 0, 2, 2);\n  }\n};\n\n\n/**\n * Render a MultiLineString geometry into the canvas.  Rendering is immediate\n * and uses the current style.\n *\n * @param {ol.geom.MultiLineString|ol.render.Feature} geometry MultiLineString\n *     geometry.\n * @override\n */\n_ol_render_canvas_Immediate_.prototype.drawMultiLineString = function(geometry) {\n  var geometryExtent = geometry.getExtent();\n  if (!_ol_extent_.intersects(this.extent_, geometryExtent)) {\n    return;\n  }\n  if (this.strokeState_) {\n    this.setContextStrokeState_(this.strokeState_);\n    var context = this.context_;\n    var flatCoordinates = geometry.getFlatCoordinates();\n    var offset = 0;\n    var ends = geometry.getEnds();\n    var stride = geometry.getStride();\n    context.beginPath();\n    var i, ii;\n    for (i = 0, ii = ends.length; i < ii; ++i) {\n      offset = this.moveToLineTo_(\n          flatCoordinates, offset, ends[i], stride, false);\n    }\n    context.stroke();\n  }\n  if (this.text_ !== '') {\n    var flatMidpoints = geometry.getFlatMidpoints();\n    this.drawText_(flatMidpoints, 0, flatMidpoints.length, 2);\n  }\n};\n\n\n/**\n * Render a Polygon geometry into the canvas.  Rendering is immediate and uses\n * the current style.\n *\n * @param {ol.geom.Polygon|ol.render.Feature} geometry Polygon geometry.\n * @override\n */\n_ol_render_canvas_Immediate_.prototype.drawPolygon = function(geometry) {\n  if (!_ol_extent_.intersects(this.extent_, geometry.getExtent())) {\n    return;\n  }\n  if (this.strokeState_ || this.fillState_) {\n    if (this.fillState_) {\n      this.setContextFillState_(this.fillState_);\n    }\n    if (this.strokeState_) {\n      this.setContextStrokeState_(this.strokeState_);\n    }\n    var context = this.context_;\n    context.beginPath();\n    this.drawRings_(geometry.getOrientedFlatCoordinates(),\n        0, geometry.getEnds(), geometry.getStride());\n    if (this.fillState_) {\n      context.fill();\n    }\n    if (this.strokeState_) {\n      context.stroke();\n    }\n  }\n  if (this.text_ !== '') {\n    var flatInteriorPoint = geometry.getFlatInteriorPoint();\n    this.drawText_(flatInteriorPoint, 0, 2, 2);\n  }\n};\n\n\n/**\n * Render MultiPolygon geometry into the canvas.  Rendering is immediate and\n * uses the current style.\n * @param {ol.geom.MultiPolygon} geometry MultiPolygon geometry.\n * @override\n */\n_ol_render_canvas_Immediate_.prototype.drawMultiPolygon = function(geometry) {\n  if (!_ol_extent_.intersects(this.extent_, geometry.getExtent())) {\n    return;\n  }\n  if (this.strokeState_ || this.fillState_) {\n    if (this.fillState_) {\n      this.setContextFillState_(this.fillState_);\n    }\n    if (this.strokeState_) {\n      this.setContextStrokeState_(this.strokeState_);\n    }\n    var context = this.context_;\n    var flatCoordinates = geometry.getOrientedFlatCoordinates();\n    var offset = 0;\n    var endss = geometry.getEndss();\n    var stride = geometry.getStride();\n    var i, ii;\n    context.beginPath();\n    for (i = 0, ii = endss.length; i < ii; ++i) {\n      var ends = endss[i];\n      offset = this.drawRings_(flatCoordinates, offset, ends, stride);\n    }\n    if (this.fillState_) {\n      context.fill();\n    }\n    if (this.strokeState_) {\n      context.stroke();\n    }\n  }\n  if (this.text_ !== '') {\n    var flatInteriorPoints = geometry.getFlatInteriorPoints();\n    this.drawText_(flatInteriorPoints, 0, flatInteriorPoints.length, 2);\n  }\n};\n\n\n/**\n * @param {ol.CanvasFillState} fillState Fill state.\n * @private\n */\n_ol_render_canvas_Immediate_.prototype.setContextFillState_ = function(fillState) {\n  var context = this.context_;\n  var contextFillState = this.contextFillState_;\n  if (!contextFillState) {\n    context.fillStyle = fillState.fillStyle;\n    this.contextFillState_ = {\n      fillStyle: fillState.fillStyle\n    };\n  } else {\n    if (contextFillState.fillStyle != fillState.fillStyle) {\n      contextFillState.fillStyle = context.fillStyle = fillState.fillStyle;\n    }\n  }\n};\n\n\n/**\n * @param {ol.CanvasStrokeState} strokeState Stroke state.\n * @private\n */\n_ol_render_canvas_Immediate_.prototype.setContextStrokeState_ = function(strokeState) {\n  var context = this.context_;\n  var contextStrokeState = this.contextStrokeState_;\n  if (!contextStrokeState) {\n    context.lineCap = strokeState.lineCap;\n    if (_ol_has_.CANVAS_LINE_DASH) {\n      context.setLineDash(strokeState.lineDash);\n      context.lineDashOffset = strokeState.lineDashOffset;\n    }\n    context.lineJoin = strokeState.lineJoin;\n    context.lineWidth = strokeState.lineWidth;\n    context.miterLimit = strokeState.miterLimit;\n    context.strokeStyle = strokeState.strokeStyle;\n    this.contextStrokeState_ = {\n      lineCap: strokeState.lineCap,\n      lineDash: strokeState.lineDash,\n      lineDashOffset: strokeState.lineDashOffset,\n      lineJoin: strokeState.lineJoin,\n      lineWidth: strokeState.lineWidth,\n      miterLimit: strokeState.miterLimit,\n      strokeStyle: strokeState.strokeStyle\n    };\n  } else {\n    if (contextStrokeState.lineCap != strokeState.lineCap) {\n      contextStrokeState.lineCap = context.lineCap = strokeState.lineCap;\n    }\n    if (_ol_has_.CANVAS_LINE_DASH) {\n      if (!_ol_array_.equals(\n          contextStrokeState.lineDash, strokeState.lineDash)) {\n        context.setLineDash(contextStrokeState.lineDash = strokeState.lineDash);\n      }\n      if (contextStrokeState.lineDashOffset != strokeState.lineDashOffset) {\n        contextStrokeState.lineDashOffset = context.lineDashOffset =\n            strokeState.lineDashOffset;\n      }\n    }\n    if (contextStrokeState.lineJoin != strokeState.lineJoin) {\n      contextStrokeState.lineJoin = context.lineJoin = strokeState.lineJoin;\n    }\n    if (contextStrokeState.lineWidth != strokeState.lineWidth) {\n      contextStrokeState.lineWidth = context.lineWidth = strokeState.lineWidth;\n    }\n    if (contextStrokeState.miterLimit != strokeState.miterLimit) {\n      contextStrokeState.miterLimit = context.miterLimit =\n          strokeState.miterLimit;\n    }\n    if (contextStrokeState.strokeStyle != strokeState.strokeStyle) {\n      contextStrokeState.strokeStyle = context.strokeStyle =\n          strokeState.strokeStyle;\n    }\n  }\n};\n\n\n/**\n * @param {ol.CanvasTextState} textState Text state.\n * @private\n */\n_ol_render_canvas_Immediate_.prototype.setContextTextState_ = function(textState) {\n  var context = this.context_;\n  var contextTextState = this.contextTextState_;\n  var textAlign = textState.textAlign ?\n    textState.textAlign : _ol_render_canvas_.defaultTextAlign;\n  if (!contextTextState) {\n    context.font = textState.font;\n    context.textAlign = textAlign;\n    context.textBaseline = textState.textBaseline;\n    this.contextTextState_ = {\n      font: textState.font,\n      textAlign: textAlign,\n      textBaseline: textState.textBaseline\n    };\n  } else {\n    if (contextTextState.font != textState.font) {\n      contextTextState.font = context.font = textState.font;\n    }\n    if (contextTextState.textAlign != textAlign) {\n      contextTextState.textAlign = textAlign;\n    }\n    if (contextTextState.textBaseline != textState.textBaseline) {\n      contextTextState.textBaseline = context.textBaseline =\n          textState.textBaseline;\n    }\n  }\n};\n\n\n/**\n * Set the fill and stroke style for subsequent draw operations.  To clear\n * either fill or stroke styles, pass null for the appropriate parameter.\n *\n * @param {ol.style.Fill} fillStyle Fill style.\n * @param {ol.style.Stroke} strokeStyle Stroke style.\n * @override\n */\n_ol_render_canvas_Immediate_.prototype.setFillStrokeStyle = function(fillStyle, strokeStyle) {\n  if (!fillStyle) {\n    this.fillState_ = null;\n  } else {\n    var fillStyleColor = fillStyle.getColor();\n    this.fillState_ = {\n      fillStyle: _ol_colorlike_.asColorLike(fillStyleColor ?\n        fillStyleColor : _ol_render_canvas_.defaultFillStyle)\n    };\n  }\n  if (!strokeStyle) {\n    this.strokeState_ = null;\n  } else {\n    var strokeStyleColor = strokeStyle.getColor();\n    var strokeStyleLineCap = strokeStyle.getLineCap();\n    var strokeStyleLineDash = strokeStyle.getLineDash();\n    var strokeStyleLineDashOffset = strokeStyle.getLineDashOffset();\n    var strokeStyleLineJoin = strokeStyle.getLineJoin();\n    var strokeStyleWidth = strokeStyle.getWidth();\n    var strokeStyleMiterLimit = strokeStyle.getMiterLimit();\n    this.strokeState_ = {\n      lineCap: strokeStyleLineCap !== undefined ?\n        strokeStyleLineCap : _ol_render_canvas_.defaultLineCap,\n      lineDash: strokeStyleLineDash ?\n        strokeStyleLineDash : _ol_render_canvas_.defaultLineDash,\n      lineDashOffset: strokeStyleLineDashOffset ?\n        strokeStyleLineDashOffset : _ol_render_canvas_.defaultLineDashOffset,\n      lineJoin: strokeStyleLineJoin !== undefined ?\n        strokeStyleLineJoin : _ol_render_canvas_.defaultLineJoin,\n      lineWidth: this.pixelRatio_ * (strokeStyleWidth !== undefined ?\n        strokeStyleWidth : _ol_render_canvas_.defaultLineWidth),\n      miterLimit: strokeStyleMiterLimit !== undefined ?\n        strokeStyleMiterLimit : _ol_render_canvas_.defaultMiterLimit,\n      strokeStyle: _ol_colorlike_.asColorLike(strokeStyleColor ?\n        strokeStyleColor : _ol_render_canvas_.defaultStrokeStyle)\n    };\n  }\n};\n\n\n/**\n * Set the image style for subsequent draw operations.  Pass null to remove\n * the image style.\n *\n * @param {ol.style.Image} imageStyle Image style.\n * @override\n */\n_ol_render_canvas_Immediate_.prototype.setImageStyle = function(imageStyle) {\n  if (!imageStyle) {\n    this.image_ = null;\n  } else {\n    var imageAnchor = imageStyle.getAnchor();\n    // FIXME pixel ratio\n    var imageImage = imageStyle.getImage(1);\n    var imageOrigin = imageStyle.getOrigin();\n    var imageSize = imageStyle.getSize();\n    this.imageAnchorX_ = imageAnchor[0];\n    this.imageAnchorY_ = imageAnchor[1];\n    this.imageHeight_ = imageSize[1];\n    this.image_ = imageImage;\n    this.imageOpacity_ = imageStyle.getOpacity();\n    this.imageOriginX_ = imageOrigin[0];\n    this.imageOriginY_ = imageOrigin[1];\n    this.imageRotateWithView_ = imageStyle.getRotateWithView();\n    this.imageRotation_ = imageStyle.getRotation();\n    this.imageScale_ = imageStyle.getScale() * this.pixelRatio_;\n    this.imageSnapToPixel_ = imageStyle.getSnapToPixel();\n    this.imageWidth_ = imageSize[0];\n  }\n};\n\n\n/**\n * Set the text style for subsequent draw operations.  Pass null to\n * remove the text style.\n *\n * @param {ol.style.Text} textStyle Text style.\n * @override\n */\n_ol_render_canvas_Immediate_.prototype.setTextStyle = function(textStyle) {\n  if (!textStyle) {\n    this.text_ = '';\n  } else {\n    var textFillStyle = textStyle.getFill();\n    if (!textFillStyle) {\n      this.textFillState_ = null;\n    } else {\n      var textFillStyleColor = textFillStyle.getColor();\n      this.textFillState_ = {\n        fillStyle: _ol_colorlike_.asColorLike(textFillStyleColor ?\n          textFillStyleColor : _ol_render_canvas_.defaultFillStyle)\n      };\n    }\n    var textStrokeStyle = textStyle.getStroke();\n    if (!textStrokeStyle) {\n      this.textStrokeState_ = null;\n    } else {\n      var textStrokeStyleColor = textStrokeStyle.getColor();\n      var textStrokeStyleLineCap = textStrokeStyle.getLineCap();\n      var textStrokeStyleLineDash = textStrokeStyle.getLineDash();\n      var textStrokeStyleLineDashOffset = textStrokeStyle.getLineDashOffset();\n      var textStrokeStyleLineJoin = textStrokeStyle.getLineJoin();\n      var textStrokeStyleWidth = textStrokeStyle.getWidth();\n      var textStrokeStyleMiterLimit = textStrokeStyle.getMiterLimit();\n      this.textStrokeState_ = {\n        lineCap: textStrokeStyleLineCap !== undefined ?\n          textStrokeStyleLineCap : _ol_render_canvas_.defaultLineCap,\n        lineDash: textStrokeStyleLineDash ?\n          textStrokeStyleLineDash : _ol_render_canvas_.defaultLineDash,\n        lineDashOffset: textStrokeStyleLineDashOffset ?\n          textStrokeStyleLineDashOffset : _ol_render_canvas_.defaultLineDashOffset,\n        lineJoin: textStrokeStyleLineJoin !== undefined ?\n          textStrokeStyleLineJoin : _ol_render_canvas_.defaultLineJoin,\n        lineWidth: textStrokeStyleWidth !== undefined ?\n          textStrokeStyleWidth : _ol_render_canvas_.defaultLineWidth,\n        miterLimit: textStrokeStyleMiterLimit !== undefined ?\n          textStrokeStyleMiterLimit : _ol_render_canvas_.defaultMiterLimit,\n        strokeStyle: _ol_colorlike_.asColorLike(textStrokeStyleColor ?\n          textStrokeStyleColor : _ol_render_canvas_.defaultStrokeStyle)\n      };\n    }\n    var textFont = textStyle.getFont();\n    var textOffsetX = textStyle.getOffsetX();\n    var textOffsetY = textStyle.getOffsetY();\n    var textRotateWithView = textStyle.getRotateWithView();\n    var textRotation = textStyle.getRotation();\n    var textScale = textStyle.getScale();\n    var textText = textStyle.getText();\n    var textTextAlign = textStyle.getTextAlign();\n    var textTextBaseline = textStyle.getTextBaseline();\n    this.textState_ = {\n      font: textFont !== undefined ?\n        textFont : _ol_render_canvas_.defaultFont,\n      textAlign: textTextAlign !== undefined ?\n        textTextAlign : _ol_render_canvas_.defaultTextAlign,\n      textBaseline: textTextBaseline !== undefined ?\n        textTextBaseline : _ol_render_canvas_.defaultTextBaseline\n    };\n    this.text_ = textText !== undefined ? textText : '';\n    this.textOffsetX_ =\n        textOffsetX !== undefined ? (this.pixelRatio_ * textOffsetX) : 0;\n    this.textOffsetY_ =\n        textOffsetY !== undefined ? (this.pixelRatio_ * textOffsetY) : 0;\n    this.textRotateWithView_ = textRotateWithView !== undefined ? textRotateWithView : false;\n    this.textRotation_ = textRotation !== undefined ? textRotation : 0;\n    this.textScale_ = this.pixelRatio_ * (textScale !== undefined ?\n      textScale : 1);\n  }\n};\nexport default _ol_render_canvas_Immediate_;\n","import _ol_ from '../index.js';\nimport _ol_ImageState_ from '../imagestate.js';\nimport _ol_Observable_ from '../observable.js';\nimport _ol_TileState_ from '../tilestate.js';\nimport _ol_asserts_ from '../asserts.js';\nimport _ol_events_ from '../events.js';\nimport _ol_events_EventType_ from '../events/eventtype.js';\nimport _ol_functions_ from '../functions.js';\nimport _ol_source_State_ from '../source/state.js';\n\n/**\n * @constructor\n * @extends {ol.Observable}\n * @param {ol.layer.Layer} layer Layer.\n * @struct\n */\nvar _ol_renderer_Layer_ = function(layer) {\n\n  _ol_Observable_.call(this);\n\n  /**\n   * @private\n   * @type {ol.layer.Layer}\n   */\n  this.layer_ = layer;\n\n\n};\n\n_ol_.inherits(_ol_renderer_Layer_, _ol_Observable_);\n\n\n/**\n * @param {ol.Coordinate} coordinate Coordinate.\n * @param {olx.FrameState} frameState Frame state.\n * @param {number} hitTolerance Hit tolerance in pixels.\n * @param {function(this: S, (ol.Feature|ol.render.Feature), ol.layer.Layer): T}\n *     callback Feature callback.\n * @param {S} thisArg Value to use as `this` when executing `callback`.\n * @return {T|undefined} Callback result.\n * @template S,T\n */\n_ol_renderer_Layer_.prototype.forEachFeatureAtCoordinate = _ol_.nullFunction;\n\n\n/**\n * @param {ol.Coordinate} coordinate Coordinate.\n * @param {olx.FrameState} frameState Frame state.\n * @return {boolean} Is there a feature at the given coordinate?\n */\n_ol_renderer_Layer_.prototype.hasFeatureAtCoordinate = _ol_functions_.FALSE;\n\n\n/**\n * Create a function that adds loaded tiles to the tile lookup.\n * @param {ol.source.Tile} source Tile source.\n * @param {ol.proj.Projection} projection Projection of the tiles.\n * @param {Object.<number, Object.<string, ol.Tile>>} tiles Lookup of loaded\n *     tiles by zoom level.\n * @return {function(number, ol.TileRange):boolean} A function that can be\n *     called with a zoom level and a tile range to add loaded tiles to the\n *     lookup.\n * @protected\n */\n_ol_renderer_Layer_.prototype.createLoadedTileFinder = function(source, projection, tiles) {\n  return (\n    /**\n     * @param {number} zoom Zoom level.\n     * @param {ol.TileRange} tileRange Tile range.\n     * @return {boolean} The tile range is fully loaded.\n     */\n    function(zoom, tileRange) {\n      function callback(tile) {\n        if (!tiles[zoom]) {\n          tiles[zoom] = {};\n        }\n        tiles[zoom][tile.tileCoord.toString()] = tile;\n      }\n      return source.forEachLoadedTile(projection, zoom, tileRange, callback);\n    });\n};\n\n\n/**\n * @return {ol.layer.Layer} Layer.\n */\n_ol_renderer_Layer_.prototype.getLayer = function() {\n  return this.layer_;\n};\n\n\n/**\n * Handle changes in image state.\n * @param {ol.events.Event} event Image change event.\n * @private\n */\n_ol_renderer_Layer_.prototype.handleImageChange_ = function(event) {\n  var image = /** @type {ol.Image} */ (event.target);\n  if (image.getState() === _ol_ImageState_.LOADED) {\n    this.renderIfReadyAndVisible();\n  }\n};\n\n\n/**\n * Load the image if not already loaded, and register the image change\n * listener if needed.\n * @param {ol.ImageBase} image Image.\n * @return {boolean} `true` if the image is already loaded, `false`\n *     otherwise.\n * @protected\n */\n_ol_renderer_Layer_.prototype.loadImage = function(image) {\n  var imageState = image.getState();\n  if (imageState != _ol_ImageState_.LOADED &&\n      imageState != _ol_ImageState_.ERROR) {\n    _ol_events_.listen(image, _ol_events_EventType_.CHANGE,\n        this.handleImageChange_, this);\n  }\n  if (imageState == _ol_ImageState_.IDLE) {\n    image.load();\n    imageState = image.getState();\n  }\n  return imageState == _ol_ImageState_.LOADED;\n};\n\n\n/**\n * @protected\n */\n_ol_renderer_Layer_.prototype.renderIfReadyAndVisible = function() {\n  var layer = this.getLayer();\n  if (layer.getVisible() && layer.getSourceState() == _ol_source_State_.READY) {\n    this.changed();\n  }\n};\n\n\n/**\n * @param {olx.FrameState} frameState Frame state.\n * @param {ol.source.Tile} tileSource Tile source.\n * @protected\n */\n_ol_renderer_Layer_.prototype.scheduleExpireCache = function(frameState, tileSource) {\n  if (tileSource.canExpireCache()) {\n    /**\n     * @param {ol.source.Tile} tileSource Tile source.\n     * @param {ol.PluggableMap} map Map.\n     * @param {olx.FrameState} frameState Frame state.\n     */\n    var postRenderFunction = function(tileSource, map, frameState) {\n      var tileSourceKey = _ol_.getUid(tileSource).toString();\n      if (tileSourceKey in frameState.usedTiles) {\n        tileSource.expireCache(frameState.viewState.projection,\n            frameState.usedTiles[tileSourceKey]);\n      }\n    }.bind(null, tileSource);\n\n    frameState.postRenderFunctions.push(\n        /** @type {ol.PostRenderFunction} */ (postRenderFunction)\n    );\n  }\n};\n\n\n/**\n * @param {olx.FrameState} frameState Frame state.\n * @param {ol.source.Source} source Source.\n * @protected\n */\n_ol_renderer_Layer_.prototype.updateLogos = function(frameState, source) {\n  var logo = source.getLogo();\n  if (logo !== undefined) {\n    if (typeof logo === 'string') {\n      frameState.logos[logo] = '';\n    } else if (logo) {\n      _ol_asserts_.assert(typeof logo.href == 'string', 44); // `logo.href` should be a string.\n      _ol_asserts_.assert(typeof logo.src == 'string', 45); // `logo.src` should be a string.\n      frameState.logos[logo.src] = logo.href;\n    }\n  }\n};\n\n\n/**\n * @param {Object.<string, Object.<string, ol.TileRange>>} usedTiles Used tiles.\n * @param {ol.source.Tile} tileSource Tile source.\n * @param {number} z Z.\n * @param {ol.TileRange} tileRange Tile range.\n * @protected\n */\n_ol_renderer_Layer_.prototype.updateUsedTiles = function(usedTiles, tileSource, z, tileRange) {\n  // FIXME should we use tilesToDrawByZ instead?\n  var tileSourceKey = _ol_.getUid(tileSource).toString();\n  var zKey = z.toString();\n  if (tileSourceKey in usedTiles) {\n    if (zKey in usedTiles[tileSourceKey]) {\n      usedTiles[tileSourceKey][zKey].extend(tileRange);\n    } else {\n      usedTiles[tileSourceKey][zKey] = tileRange;\n    }\n  } else {\n    usedTiles[tileSourceKey] = {};\n    usedTiles[tileSourceKey][zKey] = tileRange;\n  }\n};\n\n\n/**\n * Manage tile pyramid.\n * This function performs a number of functions related to the tiles at the\n * current zoom and lower zoom levels:\n * - registers idle tiles in frameState.wantedTiles so that they are not\n *   discarded by the tile queue\n * - enqueues missing tiles\n * @param {olx.FrameState} frameState Frame state.\n * @param {ol.source.Tile} tileSource Tile source.\n * @param {ol.tilegrid.TileGrid} tileGrid Tile grid.\n * @param {number} pixelRatio Pixel ratio.\n * @param {ol.proj.Projection} projection Projection.\n * @param {ol.Extent} extent Extent.\n * @param {number} currentZ Current Z.\n * @param {number} preload Load low resolution tiles up to 'preload' levels.\n * @param {function(this: T, ol.Tile)=} opt_tileCallback Tile callback.\n * @param {T=} opt_this Object to use as `this` in `opt_tileCallback`.\n * @protected\n * @template T\n */\n_ol_renderer_Layer_.prototype.manageTilePyramid = function(\n    frameState, tileSource, tileGrid, pixelRatio, projection, extent,\n    currentZ, preload, opt_tileCallback, opt_this) {\n  var tileSourceKey = _ol_.getUid(tileSource).toString();\n  if (!(tileSourceKey in frameState.wantedTiles)) {\n    frameState.wantedTiles[tileSourceKey] = {};\n  }\n  var wantedTiles = frameState.wantedTiles[tileSourceKey];\n  var tileQueue = frameState.tileQueue;\n  var minZoom = tileGrid.getMinZoom();\n  var tile, tileRange, tileResolution, x, y, z;\n  for (z = minZoom; z <= currentZ; ++z) {\n    tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z, tileRange);\n    tileResolution = tileGrid.getResolution(z);\n    for (x = tileRange.minX; x <= tileRange.maxX; ++x) {\n      for (y = tileRange.minY; y <= tileRange.maxY; ++y) {\n        if (currentZ - z <= preload) {\n          tile = tileSource.getTile(z, x, y, pixelRatio, projection);\n          if (tile.getState() == _ol_TileState_.IDLE) {\n            wantedTiles[tile.getKey()] = true;\n            if (!tileQueue.isKeyQueued(tile.getKey())) {\n              tileQueue.enqueue([tile, tileSourceKey,\n                tileGrid.getTileCoordCenter(tile.tileCoord), tileResolution]);\n            }\n          }\n          if (opt_tileCallback !== undefined) {\n            opt_tileCallback.call(opt_this, tile);\n          }\n        } else {\n          tileSource.useTile(z, x, y, projection);\n        }\n      }\n    }\n  }\n};\nexport default _ol_renderer_Layer_;\n","import _ol_ from '../../index.js';\nimport _ol_extent_ from '../../extent.js';\nimport _ol_functions_ from '../../functions.js';\nimport _ol_render_Event_ from '../../render/event.js';\nimport _ol_render_EventType_ from '../../render/eventtype.js';\nimport _ol_render_canvas_ from '../../render/canvas.js';\nimport _ol_render_canvas_Immediate_ from '../../render/canvas/immediate.js';\nimport _ol_renderer_Layer_ from '../layer.js';\nimport _ol_transform_ from '../../transform.js';\n\n/**\n * @constructor\n * @abstract\n * @extends {ol.renderer.Layer}\n * @param {ol.layer.Layer} layer Layer.\n */\nvar _ol_renderer_canvas_Layer_ = function(layer) {\n\n  _ol_renderer_Layer_.call(this, layer);\n\n  /**\n   * @protected\n   * @type {number}\n   */\n  this.renderedResolution;\n\n  /**\n   * @private\n   * @type {ol.Transform}\n   */\n  this.transform_ = _ol_transform_.create();\n\n};\n\n_ol_.inherits(_ol_renderer_canvas_Layer_, _ol_renderer_Layer_);\n\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {olx.FrameState} frameState Frame state.\n * @param {ol.Extent} extent Clip extent.\n * @protected\n */\n_ol_renderer_canvas_Layer_.prototype.clip = function(context, frameState, extent) {\n  var pixelRatio = frameState.pixelRatio;\n  var width = frameState.size[0] * pixelRatio;\n  var height = frameState.size[1] * pixelRatio;\n  var rotation = frameState.viewState.rotation;\n  var topLeft = _ol_extent_.getTopLeft(/** @type {ol.Extent} */ (extent));\n  var topRight = _ol_extent_.getTopRight(/** @type {ol.Extent} */ (extent));\n  var bottomRight = _ol_extent_.getBottomRight(/** @type {ol.Extent} */ (extent));\n  var bottomLeft = _ol_extent_.getBottomLeft(/** @type {ol.Extent} */ (extent));\n\n  _ol_transform_.apply(frameState.coordinateToPixelTransform, topLeft);\n  _ol_transform_.apply(frameState.coordinateToPixelTransform, topRight);\n  _ol_transform_.apply(frameState.coordinateToPixelTransform, bottomRight);\n  _ol_transform_.apply(frameState.coordinateToPixelTransform, bottomLeft);\n\n  context.save();\n  _ol_render_canvas_.rotateAtOffset(context, -rotation, width / 2, height / 2);\n  context.beginPath();\n  context.moveTo(topLeft[0] * pixelRatio, topLeft[1] * pixelRatio);\n  context.lineTo(topRight[0] * pixelRatio, topRight[1] * pixelRatio);\n  context.lineTo(bottomRight[0] * pixelRatio, bottomRight[1] * pixelRatio);\n  context.lineTo(bottomLeft[0] * pixelRatio, bottomLeft[1] * pixelRatio);\n  context.clip();\n  _ol_render_canvas_.rotateAtOffset(context, rotation, width / 2, height / 2);\n};\n\n\n/**\n * @param {ol.render.EventType} type Event type.\n * @param {CanvasRenderingContext2D} context Context.\n * @param {olx.FrameState} frameState Frame state.\n * @param {ol.Transform=} opt_transform Transform.\n * @private\n */\n_ol_renderer_canvas_Layer_.prototype.dispatchComposeEvent_ = function(type, context, frameState, opt_transform) {\n  var layer = this.getLayer();\n  if (layer.hasListener(type)) {\n    var width = frameState.size[0] * frameState.pixelRatio;\n    var height = frameState.size[1] * frameState.pixelRatio;\n    var rotation = frameState.viewState.rotation;\n    _ol_render_canvas_.rotateAtOffset(context, -rotation, width / 2, height / 2);\n    var transform = opt_transform !== undefined ?\n      opt_transform : this.getTransform(frameState, 0);\n    var render = new _ol_render_canvas_Immediate_(\n        context, frameState.pixelRatio, frameState.extent, transform,\n        frameState.viewState.rotation);\n    var composeEvent = new _ol_render_Event_(type, render, frameState,\n        context, null);\n    layer.dispatchEvent(composeEvent);\n    _ol_render_canvas_.rotateAtOffset(context, rotation, width / 2, height / 2);\n  }\n};\n\n\n/**\n * @param {ol.Coordinate} coordinate Coordinate.\n * @param {olx.FrameState} frameState FrameState.\n * @param {function(this: S, ol.layer.Layer, (Uint8ClampedArray|Uint8Array)): T} callback Layer\n *     callback.\n * @param {S} thisArg Value to use as `this` when executing `callback`.\n * @return {T|undefined} Callback result.\n * @template S,T,U\n */\n_ol_renderer_canvas_Layer_.prototype.forEachLayerAtCoordinate = function(coordinate, frameState, callback, thisArg) {\n  var hasFeature = this.forEachFeatureAtCoordinate(\n      coordinate, frameState, 0, _ol_functions_.TRUE, this);\n\n  if (hasFeature) {\n    return callback.call(thisArg, this.getLayer(), null);\n  } else {\n    return undefined;\n  }\n};\n\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {olx.FrameState} frameState Frame state.\n * @param {ol.LayerState} layerState Layer state.\n * @param {ol.Transform=} opt_transform Transform.\n * @protected\n */\n_ol_renderer_canvas_Layer_.prototype.postCompose = function(context, frameState, layerState, opt_transform) {\n  this.dispatchComposeEvent_(_ol_render_EventType_.POSTCOMPOSE, context,\n      frameState, opt_transform);\n};\n\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {olx.FrameState} frameState Frame state.\n * @param {ol.Transform=} opt_transform Transform.\n * @protected\n */\n_ol_renderer_canvas_Layer_.prototype.preCompose = function(context, frameState, opt_transform) {\n  this.dispatchComposeEvent_(_ol_render_EventType_.PRECOMPOSE, context,\n      frameState, opt_transform);\n};\n\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {olx.FrameState} frameState Frame state.\n * @param {ol.Transform=} opt_transform Transform.\n * @protected\n */\n_ol_renderer_canvas_Layer_.prototype.dispatchRenderEvent = function(context, frameState, opt_transform) {\n  this.dispatchComposeEvent_(_ol_render_EventType_.RENDER, context,\n      frameState, opt_transform);\n};\n\n\n/**\n * @param {olx.FrameState} frameState Frame state.\n * @param {number} offsetX Offset on the x-axis in view coordinates.\n * @protected\n * @return {!ol.Transform} Transform.\n */\n_ol_renderer_canvas_Layer_.prototype.getTransform = function(frameState, offsetX) {\n  var viewState = frameState.viewState;\n  var pixelRatio = frameState.pixelRatio;\n  var dx1 = pixelRatio * frameState.size[0] / 2;\n  var dy1 = pixelRatio * frameState.size[1] / 2;\n  var sx = pixelRatio / viewState.resolution;\n  var sy = -sx;\n  var angle = -viewState.rotation;\n  var dx2 = -viewState.center[0] + offsetX;\n  var dy2 = -viewState.center[1];\n  return _ol_transform_.compose(this.transform_, dx1, dy1, sx, sy, angle, dx2, dy2);\n};\n\n\n/**\n * @abstract\n * @param {olx.FrameState} frameState Frame state.\n * @param {ol.LayerState} layerState Layer state.\n * @param {CanvasRenderingContext2D} context Context.\n */\n_ol_renderer_canvas_Layer_.prototype.composeFrame = function(frameState, layerState, context) {};\n\n/**\n * @abstract\n * @param {olx.FrameState} frameState Frame state.\n * @param {ol.LayerState} layerState Layer state.\n * @return {boolean} whether composeFrame should be called.\n */\n_ol_renderer_canvas_Layer_.prototype.prepareFrame = function(frameState, layerState) {};\nexport default _ol_renderer_canvas_Layer_;\n","import _ol_ from '../../index.js';\nimport _ol_coordinate_ from '../../coordinate.js';\nimport _ol_dom_ from '../../dom.js';\nimport _ol_extent_ from '../../extent.js';\nimport _ol_renderer_canvas_Layer_ from '../canvas/layer.js';\nimport _ol_transform_ from '../../transform.js';\n\n/**\n * @constructor\n * @abstract\n * @extends {ol.renderer.canvas.Layer}\n * @param {ol.layer.Layer} layer Layer.\n */\nvar _ol_renderer_canvas_IntermediateCanvas_ = function(layer) {\n\n  _ol_renderer_canvas_Layer_.call(this, layer);\n\n  /**\n   * @protected\n   * @type {ol.Transform}\n   */\n  this.coordinateToCanvasPixelTransform = _ol_transform_.create();\n\n  /**\n   * @private\n   * @type {CanvasRenderingContext2D}\n   */\n  this.hitCanvasContext_ = null;\n\n};\n\n_ol_.inherits(_ol_renderer_canvas_IntermediateCanvas_, _ol_renderer_canvas_Layer_);\n\n\n/**\n * @inheritDoc\n */\n_ol_renderer_canvas_IntermediateCanvas_.prototype.composeFrame = function(frameState, layerState, context) {\n\n  this.preCompose(context, frameState);\n\n  var image = this.getImage();\n  if (image) {\n\n    // clipped rendering if layer extent is set\n    var extent = layerState.extent;\n    var clipped = extent !== undefined &&\n        !_ol_extent_.containsExtent(extent, frameState.extent) &&\n        _ol_extent_.intersects(extent, frameState.extent);\n    if (clipped) {\n      this.clip(context, frameState, /** @type {ol.Extent} */ (extent));\n    }\n\n    var imageTransform = this.getImageTransform();\n    // for performance reasons, context.save / context.restore is not used\n    // to save and restore the transformation matrix and the opacity.\n    // see http://jsperf.com/context-save-restore-versus-variable\n    var alpha = context.globalAlpha;\n    context.globalAlpha = layerState.opacity;\n\n    // for performance reasons, context.setTransform is only used\n    // when the view is rotated. see http://jsperf.com/canvas-transform\n    var dx = imageTransform[4];\n    var dy = imageTransform[5];\n    var dw = image.width * imageTransform[0];\n    var dh = image.height * imageTransform[3];\n    context.drawImage(image, 0, 0, +image.width, +image.height,\n        Math.round(dx), Math.round(dy), Math.round(dw), Math.round(dh));\n    context.globalAlpha = alpha;\n\n    if (clipped) {\n      context.restore();\n    }\n  }\n\n  this.postCompose(context, frameState, layerState);\n};\n\n\n/**\n * @abstract\n * @return {HTMLCanvasElement|HTMLVideoElement|Image} Canvas.\n */\n_ol_renderer_canvas_IntermediateCanvas_.prototype.getImage = function() {};\n\n\n/**\n * @abstract\n * @return {!ol.Transform} Image transform.\n */\n_ol_renderer_canvas_IntermediateCanvas_.prototype.getImageTransform = function() {};\n\n\n/**\n * @inheritDoc\n */\n_ol_renderer_canvas_IntermediateCanvas_.prototype.forEachFeatureAtCoordinate = function(coordinate, frameState, hitTolerance, callback, thisArg) {\n  var layer = this.getLayer();\n  var source = layer.getSource();\n  var resolution = frameState.viewState.resolution;\n  var rotation = frameState.viewState.rotation;\n  var skippedFeatureUids = frameState.skippedFeatureUids;\n  return source.forEachFeatureAtCoordinate(\n      coordinate, resolution, rotation, hitTolerance, skippedFeatureUids,\n      /**\n       * @param {ol.Feature|ol.render.Feature} feature Feature.\n       * @return {?} Callback result.\n       */\n      function(feature) {\n        return callback.call(thisArg, feature, layer);\n      });\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_renderer_canvas_IntermediateCanvas_.prototype.forEachLayerAtCoordinate = function(coordinate, frameState, callback, thisArg) {\n  if (!this.getImage()) {\n    return undefined;\n  }\n\n  if (this.getLayer().getSource().forEachFeatureAtCoordinate !== _ol_.nullFunction) {\n    // for ImageCanvas sources use the original hit-detection logic,\n    // so that for example also transparent polygons are detected\n    return _ol_renderer_canvas_Layer_.prototype.forEachLayerAtCoordinate.apply(this, arguments);\n  } else {\n    var pixel = _ol_transform_.apply(this.coordinateToCanvasPixelTransform, coordinate.slice());\n    _ol_coordinate_.scale(pixel, frameState.viewState.resolution / this.renderedResolution);\n\n    if (!this.hitCanvasContext_) {\n      this.hitCanvasContext_ = _ol_dom_.createCanvasContext2D(1, 1);\n    }\n\n    this.hitCanvasContext_.clearRect(0, 0, 1, 1);\n    this.hitCanvasContext_.drawImage(this.getImage(), pixel[0], pixel[1], 1, 1, 0, 0, 1, 1);\n\n    var imageData = this.hitCanvasContext_.getImageData(0, 0, 1, 1).data;\n    if (imageData[3] > 0) {\n      return callback.call(thisArg, this.getLayer(),  imageData);\n    } else {\n      return undefined;\n    }\n  }\n};\nexport default _ol_renderer_canvas_IntermediateCanvas_;\n","import _ol_ from '../../index.js';\nimport _ol_ImageCanvas_ from '../../imagecanvas.js';\nimport _ol_LayerType_ from '../../layertype.js';\nimport _ol_ViewHint_ from '../../viewhint.js';\nimport _ol_array_ from '../../array.js';\nimport _ol_extent_ from '../../extent.js';\nimport _ol_layer_VectorRenderType_ from '../../layer/vectorrendertype.js';\nimport _ol_obj_ from '../../obj.js';\nimport _ol_plugins_ from '../../plugins.js';\nimport _ol_renderer_Type_ from '../type.js';\nimport _ol_renderer_canvas_IntermediateCanvas_ from '../canvas/intermediatecanvas.js';\nimport _ol_transform_ from '../../transform.js';\n\n/**\n * @constructor\n * @extends {ol.renderer.canvas.IntermediateCanvas}\n * @param {ol.layer.Image} imageLayer Single image layer.\n * @api\n */\nvar _ol_renderer_canvas_ImageLayer_ = function(imageLayer) {\n\n  _ol_renderer_canvas_IntermediateCanvas_.call(this, imageLayer);\n\n  /**\n   * @private\n   * @type {?ol.ImageBase}\n   */\n  this.image_ = null;\n\n  /**\n   * @private\n   * @type {ol.Transform}\n   */\n  this.imageTransform_ = _ol_transform_.create();\n\n  /**\n   * @type {!Array.<string>}\n   */\n  this.skippedFeatures_ = [];\n\n  /**\n   * @private\n   * @type {ol.renderer.canvas.VectorLayer}\n   */\n  this.vectorRenderer_ = null;\n\n};\n\n_ol_.inherits(_ol_renderer_canvas_ImageLayer_, _ol_renderer_canvas_IntermediateCanvas_);\n\n\n/**\n * Determine if this renderer handles the provided layer.\n * @param {ol.renderer.Type} type The renderer type.\n * @param {ol.layer.Layer} layer The candidate layer.\n * @return {boolean} The renderer can render the layer.\n */\n_ol_renderer_canvas_ImageLayer_['handles'] = function(type, layer) {\n  return type === _ol_renderer_Type_.CANVAS && (layer.getType() === _ol_LayerType_.IMAGE ||\n      layer.getType() === _ol_LayerType_.VECTOR &&\n      /** @type {ol.layer.Vector} */ (layer).getRenderMode() === _ol_layer_VectorRenderType_.IMAGE);\n};\n\n\n/**\n * Create a layer renderer.\n * @param {ol.renderer.Map} mapRenderer The map renderer.\n * @param {ol.layer.Layer} layer The layer to be rendererd.\n * @return {ol.renderer.canvas.ImageLayer} The layer renderer.\n */\n_ol_renderer_canvas_ImageLayer_['create'] = function(mapRenderer, layer) {\n  var renderer = new _ol_renderer_canvas_ImageLayer_(/** @type {ol.layer.Image} */ (layer));\n  if (layer.getType() === _ol_LayerType_.VECTOR) {\n    var candidates = _ol_plugins_.getLayerRendererPlugins();\n    for (var i = 0, ii = candidates.length; i < ii; ++i) {\n      var candidate = /** @type {Object.<string, Function>} */ (candidates[i]);\n      if (candidate !== _ol_renderer_canvas_ImageLayer_ && candidate['handles'](_ol_renderer_Type_.CANVAS, layer)) {\n        renderer.setVectorRenderer(candidate['create'](mapRenderer, layer));\n      }\n    }\n  }\n  return renderer;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_renderer_canvas_ImageLayer_.prototype.getImage = function() {\n  return !this.image_ ? null : this.image_.getImage();\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_renderer_canvas_ImageLayer_.prototype.getImageTransform = function() {\n  return this.imageTransform_;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_renderer_canvas_ImageLayer_.prototype.prepareFrame = function(frameState, layerState) {\n\n  var pixelRatio = frameState.pixelRatio;\n  var size = frameState.size;\n  var viewState = frameState.viewState;\n  var viewCenter = viewState.center;\n  var viewResolution = viewState.resolution;\n\n  var image;\n  var imageLayer = /** @type {ol.layer.Image} */ (this.getLayer());\n  var imageSource = imageLayer.getSource();\n\n  var hints = frameState.viewHints;\n\n  var renderedExtent = frameState.extent;\n  if (layerState.extent !== undefined) {\n    renderedExtent = _ol_extent_.getIntersection(\n        renderedExtent, layerState.extent);\n  }\n\n  if (!hints[_ol_ViewHint_.ANIMATING] && !hints[_ol_ViewHint_.INTERACTING] &&\n      !_ol_extent_.isEmpty(renderedExtent)) {\n    var projection = viewState.projection;\n    if (!_ol_.ENABLE_RASTER_REPROJECTION) {\n      var sourceProjection = imageSource.getProjection();\n      if (sourceProjection) {\n        projection = sourceProjection;\n      }\n    }\n    var vectorRenderer = this.vectorRenderer_;\n    if (vectorRenderer) {\n      var context = vectorRenderer.context;\n      var imageFrameState = /** @type {olx.FrameState} */ (_ol_obj_.assign({}, frameState, {\n        size: [\n          _ol_extent_.getWidth(renderedExtent) / viewResolution,\n          _ol_extent_.getHeight(renderedExtent) / viewResolution\n        ],\n        viewState: /** @type {olx.ViewState} */ (_ol_obj_.assign({}, frameState.viewState, {\n          rotation: 0\n        }))\n      }));\n      var skippedFeatures = Object.keys(imageFrameState.skippedFeatureUids).sort();\n      if (vectorRenderer.prepareFrame(imageFrameState, layerState) &&\n          (vectorRenderer.replayGroupChanged ||\n          !_ol_array_.equals(skippedFeatures, this.skippedFeatures_))) {\n        context.canvas.width = imageFrameState.size[0] * pixelRatio;\n        context.canvas.height = imageFrameState.size[1] * pixelRatio;\n        vectorRenderer.composeFrame(imageFrameState, layerState, context);\n        this.image_ = new _ol_ImageCanvas_(renderedExtent, viewResolution, pixelRatio, context.canvas);\n        this.skippedFeatures_ = skippedFeatures;\n      }\n    } else {\n      image = imageSource.getImage(\n          renderedExtent, viewResolution, pixelRatio, projection);\n      if (image) {\n        var loaded = this.loadImage(image);\n        if (loaded) {\n          this.image_ = image;\n        }\n      }\n    }\n  }\n\n  if (this.image_) {\n    image = this.image_;\n    var imageExtent = image.getExtent();\n    var imageResolution = image.getResolution();\n    var imagePixelRatio = image.getPixelRatio();\n    var scale = pixelRatio * imageResolution /\n        (viewResolution * imagePixelRatio);\n    var transform = _ol_transform_.compose(this.imageTransform_,\n        pixelRatio * size[0] / 2, pixelRatio * size[1] / 2,\n        scale, scale,\n        0,\n        imagePixelRatio * (imageExtent[0] - viewCenter[0]) / imageResolution,\n        imagePixelRatio * (viewCenter[1] - imageExtent[3]) / imageResolution);\n    _ol_transform_.compose(this.coordinateToCanvasPixelTransform,\n        pixelRatio * size[0] / 2 - transform[4], pixelRatio * size[1] / 2 - transform[5],\n        pixelRatio / viewResolution, -pixelRatio / viewResolution,\n        0,\n        -viewCenter[0], -viewCenter[1]);\n\n    this.updateLogos(frameState, imageSource);\n    this.renderedResolution = imageResolution * pixelRatio / imagePixelRatio;\n  }\n\n  return !!this.image_;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_renderer_canvas_ImageLayer_.prototype.forEachFeatureAtCoordinate = function(coordinate, frameState, hitTolerance, callback, thisArg) {\n  if (this.vectorRenderer_) {\n    return this.vectorRenderer_.forEachFeatureAtCoordinate(coordinate, frameState, hitTolerance, callback, thisArg);\n  } else {\n    return _ol_renderer_canvas_IntermediateCanvas_.prototype.forEachFeatureAtCoordinate.call(this, coordinate, frameState, hitTolerance, callback, thisArg);\n  }\n};\n\n\n/**\n * @param {ol.renderer.canvas.VectorLayer} renderer Vector renderer.\n */\n_ol_renderer_canvas_ImageLayer_.prototype.setVectorRenderer = function(renderer) {\n  this.vectorRenderer_ = renderer;\n};\nexport default _ol_renderer_canvas_ImageLayer_;\n","import _ol_color_ from '../color.js';\n\n/**\n * Singleton class. Available through {@link ol.style.iconImageCache}.\n * @constructor\n */\nvar _ol_style_IconImageCache_ = function() {\n\n  /**\n   * @type {Object.<string, ol.style.IconImage>}\n   * @private\n   */\n  this.cache_ = {};\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.cacheSize_ = 0;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.maxCacheSize_ = 32;\n};\n\n\n/**\n * @param {string} src Src.\n * @param {?string} crossOrigin Cross origin.\n * @param {ol.Color} color Color.\n * @return {string} Cache key.\n */\n_ol_style_IconImageCache_.getKey = function(src, crossOrigin, color) {\n  var colorString = color ? _ol_color_.asString(color) : 'null';\n  return crossOrigin + ':' + src + ':' + colorString;\n};\n\n\n/**\n * FIXME empty description for jsdoc\n */\n_ol_style_IconImageCache_.prototype.clear = function() {\n  this.cache_ = {};\n  this.cacheSize_ = 0;\n};\n\n\n/**\n * FIXME empty description for jsdoc\n */\n_ol_style_IconImageCache_.prototype.expire = function() {\n  if (this.cacheSize_ > this.maxCacheSize_) {\n    var i = 0;\n    var key, iconImage;\n    for (key in this.cache_) {\n      iconImage = this.cache_[key];\n      if ((i++ & 3) === 0 && !iconImage.hasListener()) {\n        delete this.cache_[key];\n        --this.cacheSize_;\n      }\n    }\n  }\n};\n\n\n/**\n * @param {string} src Src.\n * @param {?string} crossOrigin Cross origin.\n * @param {ol.Color} color Color.\n * @return {ol.style.IconImage} Icon image.\n */\n_ol_style_IconImageCache_.prototype.get = function(src, crossOrigin, color) {\n  var key = _ol_style_IconImageCache_.getKey(src, crossOrigin, color);\n  return key in this.cache_ ? this.cache_[key] : null;\n};\n\n\n/**\n * @param {string} src Src.\n * @param {?string} crossOrigin Cross origin.\n * @param {ol.Color} color Color.\n * @param {ol.style.IconImage} iconImage Icon image.\n */\n_ol_style_IconImageCache_.prototype.set = function(src, crossOrigin, color, iconImage) {\n  var key = _ol_style_IconImageCache_.getKey(src, crossOrigin, color);\n  this.cache_[key] = iconImage;\n  ++this.cacheSize_;\n};\n\n\n/**\n * Set the cache size of the icon cache. Default is `32`. Change this value when\n * your map uses more than 32 different icon images and you are not caching icon\n * styles on the application level.\n * @param {number} maxCacheSize Cache max size.\n * @api\n */\n_ol_style_IconImageCache_.prototype.setSize = function(maxCacheSize) {\n  this.maxCacheSize_ = maxCacheSize;\n  this.expire();\n};\nexport default _ol_style_IconImageCache_;\n","import _ol_style_IconImageCache_ from './style/iconimagecache.js';\nvar _ol_style_ = {};\n\n/**\n * The {@link ol.style.IconImageCache} for {@link ol.style.Icon} images.\n * @api\n */\n_ol_style_.iconImageCache = new _ol_style_IconImageCache_();\nexport default _ol_style_;\n","import _ol_ from '../index.js';\nimport _ol_Disposable_ from '../disposable.js';\nimport _ol_events_ from '../events.js';\nimport _ol_events_EventType_ from '../events/eventtype.js';\nimport _ol_extent_ from '../extent.js';\nimport _ol_functions_ from '../functions.js';\nimport _ol_layer_Layer_ from '../layer/layer.js';\nimport _ol_plugins_ from '../plugins.js';\nimport _ol_style_ from '../style.js';\nimport _ol_transform_ from '../transform.js';\n\n/**\n * @constructor\n * @abstract\n * @extends {ol.Disposable}\n * @param {Element} container Container.\n * @param {ol.PluggableMap} map Map.\n * @struct\n */\nvar _ol_renderer_Map_ = function(container, map) {\n\n  _ol_Disposable_.call(this);\n\n\n  /**\n   * @private\n   * @type {ol.PluggableMap}\n   */\n  this.map_ = map;\n\n  /**\n   * @private\n   * @type {Object.<string, ol.renderer.Layer>}\n   */\n  this.layerRenderers_ = {};\n\n  /**\n   * @private\n   * @type {Object.<string, ol.EventsKey>}\n   */\n  this.layerRendererListeners_ = {};\n\n};\n\n_ol_.inherits(_ol_renderer_Map_, _ol_Disposable_);\n\n\n/**\n * @param {olx.FrameState} frameState FrameState.\n * @protected\n */\n_ol_renderer_Map_.prototype.calculateMatrices2D = function(frameState) {\n  var viewState = frameState.viewState;\n  var coordinateToPixelTransform = frameState.coordinateToPixelTransform;\n  var pixelToCoordinateTransform = frameState.pixelToCoordinateTransform;\n\n  _ol_transform_.compose(coordinateToPixelTransform,\n      frameState.size[0] / 2, frameState.size[1] / 2,\n      1 / viewState.resolution, -1 / viewState.resolution,\n      -viewState.rotation,\n      -viewState.center[0], -viewState.center[1]);\n\n  _ol_transform_.invert(\n      _ol_transform_.setFromArray(pixelToCoordinateTransform, coordinateToPixelTransform));\n};\n\n\n/**\n * Removes all layer renderers.\n */\n_ol_renderer_Map_.prototype.removeLayerRenderers = function() {\n  for (var key in this.layerRenderers_) {\n    this.removeLayerRendererByKey_(key).dispose();\n  }\n};\n\n\n/**\n * @param {ol.PluggableMap} map Map.\n * @param {olx.FrameState} frameState Frame state.\n * @private\n */\n_ol_renderer_Map_.expireIconCache_ = function(map, frameState) {\n  var cache = _ol_style_.iconImageCache;\n  cache.expire();\n};\n\n\n/**\n * @param {ol.Coordinate} coordinate Coordinate.\n * @param {olx.FrameState} frameState FrameState.\n * @param {number} hitTolerance Hit tolerance in pixels.\n * @param {function(this: S, (ol.Feature|ol.render.Feature),\n *     ol.layer.Layer): T} callback Feature callback.\n * @param {S} thisArg Value to use as `this` when executing `callback`.\n * @param {function(this: U, ol.layer.Layer): boolean} layerFilter Layer filter\n *     function, only layers which are visible and for which this function\n *     returns `true` will be tested for features.  By default, all visible\n *     layers will be tested.\n * @param {U} thisArg2 Value to use as `this` when executing `layerFilter`.\n * @return {T|undefined} Callback result.\n * @template S,T,U\n */\n_ol_renderer_Map_.prototype.forEachFeatureAtCoordinate = function(coordinate, frameState, hitTolerance, callback, thisArg,\n    layerFilter, thisArg2) {\n  var result;\n  var viewState = frameState.viewState;\n  var viewResolution = viewState.resolution;\n\n  /**\n   * @param {ol.Feature|ol.render.Feature} feature Feature.\n   * @param {ol.layer.Layer} layer Layer.\n   * @return {?} Callback result.\n   */\n  function forEachFeatureAtCoordinate(feature, layer) {\n    var key = _ol_.getUid(feature).toString();\n    var managed = frameState.layerStates[_ol_.getUid(layer)].managed;\n    if (!(key in frameState.skippedFeatureUids && !managed)) {\n      return callback.call(thisArg, feature, managed ? layer : null);\n    }\n  }\n\n  var projection = viewState.projection;\n\n  var translatedCoordinate = coordinate;\n  if (projection.canWrapX()) {\n    var projectionExtent = projection.getExtent();\n    var worldWidth = _ol_extent_.getWidth(projectionExtent);\n    var x = coordinate[0];\n    if (x < projectionExtent[0] || x > projectionExtent[2]) {\n      var worldsAway = Math.ceil((projectionExtent[0] - x) / worldWidth);\n      translatedCoordinate = [x + worldWidth * worldsAway, coordinate[1]];\n    }\n  }\n\n  var layerStates = frameState.layerStatesArray;\n  var numLayers = layerStates.length;\n  var i;\n  for (i = numLayers - 1; i >= 0; --i) {\n    var layerState = layerStates[i];\n    var layer = layerState.layer;\n    if (_ol_layer_Layer_.visibleAtResolution(layerState, viewResolution) &&\n        layerFilter.call(thisArg2, layer)) {\n      var layerRenderer = this.getLayerRenderer(layer);\n      if (layer.getSource()) {\n        result = layerRenderer.forEachFeatureAtCoordinate(\n            layer.getSource().getWrapX() ? translatedCoordinate : coordinate,\n            frameState, hitTolerance, forEachFeatureAtCoordinate, thisArg);\n      }\n      if (result) {\n        return result;\n      }\n    }\n  }\n  return undefined;\n};\n\n\n/**\n * @abstract\n * @param {ol.Pixel} pixel Pixel.\n * @param {olx.FrameState} frameState FrameState.\n * @param {function(this: S, ol.layer.Layer, (Uint8ClampedArray|Uint8Array)): T} callback Layer\n *     callback.\n * @param {S} thisArg Value to use as `this` when executing `callback`.\n * @param {function(this: U, ol.layer.Layer): boolean} layerFilter Layer filter\n *     function, only layers which are visible and for which this function\n *     returns `true` will be tested for features.  By default, all visible\n *     layers will be tested.\n * @param {U} thisArg2 Value to use as `this` when executing `layerFilter`.\n * @return {T|undefined} Callback result.\n * @template S,T,U\n */\n_ol_renderer_Map_.prototype.forEachLayerAtPixel = function(pixel, frameState, callback, thisArg,\n    layerFilter, thisArg2) {};\n\n\n/**\n * @param {ol.Coordinate} coordinate Coordinate.\n * @param {olx.FrameState} frameState FrameState.\n * @param {number} hitTolerance Hit tolerance in pixels.\n * @param {function(this: U, ol.layer.Layer): boolean} layerFilter Layer filter\n *     function, only layers which are visible and for which this function\n *     returns `true` will be tested for features.  By default, all visible\n *     layers will be tested.\n * @param {U} thisArg Value to use as `this` when executing `layerFilter`.\n * @return {boolean} Is there a feature at the given coordinate?\n * @template U\n */\n_ol_renderer_Map_.prototype.hasFeatureAtCoordinate = function(coordinate, frameState, hitTolerance, layerFilter, thisArg) {\n  var hasFeature = this.forEachFeatureAtCoordinate(\n      coordinate, frameState, hitTolerance, _ol_functions_.TRUE, this, layerFilter, thisArg);\n\n  return hasFeature !== undefined;\n};\n\n\n/**\n * @param {ol.layer.Layer} layer Layer.\n * @protected\n * @return {ol.renderer.Layer} Layer renderer.\n */\n_ol_renderer_Map_.prototype.getLayerRenderer = function(layer) {\n  var layerKey = _ol_.getUid(layer).toString();\n  if (layerKey in this.layerRenderers_) {\n    return this.layerRenderers_[layerKey];\n  } else {\n    var layerRendererPlugins = _ol_plugins_.getLayerRendererPlugins();\n    var renderer;\n    var type = this.getType();\n    for (var i = 0, ii = layerRendererPlugins.length; i < ii; ++i) {\n      var plugin = layerRendererPlugins[i];\n      if (plugin['handles'](type, layer)) {\n        renderer = plugin['create'](this, layer);\n        break;\n      }\n    }\n    if (renderer) {\n      this.layerRenderers_[layerKey] = renderer;\n      this.layerRendererListeners_[layerKey] = _ol_events_.listen(renderer,\n          _ol_events_EventType_.CHANGE, this.handleLayerRendererChange_, this);\n    } else {\n      throw new Error('Unable to create renderer for layer: ' + layer.getType());\n    }\n    return renderer;\n  }\n};\n\n\n/**\n * @param {string} layerKey Layer key.\n * @protected\n * @return {ol.renderer.Layer} Layer renderer.\n */\n_ol_renderer_Map_.prototype.getLayerRendererByKey = function(layerKey) {\n  return this.layerRenderers_[layerKey];\n};\n\n\n/**\n * @protected\n * @return {Object.<string, ol.renderer.Layer>} Layer renderers.\n */\n_ol_renderer_Map_.prototype.getLayerRenderers = function() {\n  return this.layerRenderers_;\n};\n\n\n/**\n * @return {ol.PluggableMap} Map.\n */\n_ol_renderer_Map_.prototype.getMap = function() {\n  return this.map_;\n};\n\n\n/**\n * @abstract\n * @return {ol.renderer.Type} Type\n */\n_ol_renderer_Map_.prototype.getType = function() {};\n\n\n/**\n * Handle changes in a layer renderer.\n * @private\n */\n_ol_renderer_Map_.prototype.handleLayerRendererChange_ = function() {\n  this.map_.render();\n};\n\n\n/**\n * @param {string} layerKey Layer key.\n * @return {ol.renderer.Layer} Layer renderer.\n * @private\n */\n_ol_renderer_Map_.prototype.removeLayerRendererByKey_ = function(layerKey) {\n  var layerRenderer = this.layerRenderers_[layerKey];\n  delete this.layerRenderers_[layerKey];\n\n  _ol_events_.unlistenByKey(this.layerRendererListeners_[layerKey]);\n  delete this.layerRendererListeners_[layerKey];\n\n  return layerRenderer;\n};\n\n\n/**\n * Render.\n * @param {?olx.FrameState} frameState Frame state.\n */\n_ol_renderer_Map_.prototype.renderFrame = _ol_.nullFunction;\n\n\n/**\n * @param {ol.PluggableMap} map Map.\n * @param {olx.FrameState} frameState Frame state.\n * @private\n */\n_ol_renderer_Map_.prototype.removeUnusedLayerRenderers_ = function(map, frameState) {\n  var layerKey;\n  for (layerKey in this.layerRenderers_) {\n    if (!frameState || !(layerKey in frameState.layerStates)) {\n      this.removeLayerRendererByKey_(layerKey).dispose();\n    }\n  }\n};\n\n\n/**\n * @param {olx.FrameState} frameState Frame state.\n * @protected\n */\n_ol_renderer_Map_.prototype.scheduleExpireIconCache = function(frameState) {\n  frameState.postRenderFunctions.push(\n      /** @type {ol.PostRenderFunction} */ (_ol_renderer_Map_.expireIconCache_)\n  );\n};\n\n\n/**\n * @param {!olx.FrameState} frameState Frame state.\n * @protected\n */\n_ol_renderer_Map_.prototype.scheduleRemoveUnusedLayerRenderers = function(frameState) {\n  var layerKey;\n  for (layerKey in this.layerRenderers_) {\n    if (!(layerKey in frameState.layerStates)) {\n      frameState.postRenderFunctions.push(\n          /** @type {ol.PostRenderFunction} */ (this.removeUnusedLayerRenderers_.bind(this))\n      );\n      return;\n    }\n  }\n};\n\n\n/**\n * @param {ol.LayerState} state1 First layer state.\n * @param {ol.LayerState} state2 Second layer state.\n * @return {number} The zIndex difference.\n */\n_ol_renderer_Map_.sortByZIndex = function(state1, state2) {\n  return state1.zIndex - state2.zIndex;\n};\nexport default _ol_renderer_Map_;\n","// FIXME offset panning\n\nimport _ol_transform_ from '../../transform.js';\nimport _ol_ from '../../index.js';\nimport _ol_array_ from '../../array.js';\nimport _ol_css_ from '../../css.js';\nimport _ol_dom_ from '../../dom.js';\nimport _ol_layer_Layer_ from '../../layer/layer.js';\nimport _ol_render_Event_ from '../../render/event.js';\nimport _ol_render_EventType_ from '../../render/eventtype.js';\nimport _ol_render_canvas_ from '../../render/canvas.js';\nimport _ol_render_canvas_Immediate_ from '../../render/canvas/immediate.js';\nimport _ol_renderer_Map_ from '../map.js';\nimport _ol_renderer_Type_ from '../type.js';\nimport _ol_source_State_ from '../../source/state.js';\n\n/**\n * @constructor\n * @extends {ol.renderer.Map}\n * @param {Element} container Container.\n * @param {ol.PluggableMap} map Map.\n * @api\n */\nvar _ol_renderer_canvas_Map_ = function(container, map) {\n\n  _ol_renderer_Map_.call(this, container, map);\n\n  /**\n   * @private\n   * @type {CanvasRenderingContext2D}\n   */\n  this.context_ = _ol_dom_.createCanvasContext2D();\n\n  /**\n   * @private\n   * @type {HTMLCanvasElement}\n   */\n  this.canvas_ = this.context_.canvas;\n\n  this.canvas_.style.width = '100%';\n  this.canvas_.style.height = '100%';\n  this.canvas_.style.display = 'block';\n  this.canvas_.className = _ol_css_.CLASS_UNSELECTABLE;\n  container.insertBefore(this.canvas_, container.childNodes[0] || null);\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.renderedVisible_ = true;\n\n  /**\n   * @private\n   * @type {ol.Transform}\n   */\n  this.transform_ = _ol_transform_.create();\n\n};\n\n_ol_.inherits(_ol_renderer_canvas_Map_, _ol_renderer_Map_);\n\n\n/**\n * Determine if this renderer handles the provided layer.\n * @param {ol.renderer.Type} type The renderer type.\n * @return {boolean} The renderer can render the layer.\n */\n_ol_renderer_canvas_Map_['handles'] = function(type) {\n  return type === _ol_renderer_Type_.CANVAS;\n};\n\n\n/**\n * Create the map renderer.\n * @param {Element} container Container.\n * @param {ol.PluggableMap} map Map.\n * @return {ol.renderer.canvas.Map} The map renderer.\n */\n_ol_renderer_canvas_Map_['create'] = function(container, map) {\n  return new _ol_renderer_canvas_Map_(container, map);\n};\n\n\n/**\n * @param {ol.render.EventType} type Event type.\n * @param {olx.FrameState} frameState Frame state.\n * @private\n */\n_ol_renderer_canvas_Map_.prototype.dispatchComposeEvent_ = function(type, frameState) {\n  var map = this.getMap();\n  var context = this.context_;\n  if (map.hasListener(type)) {\n    var extent = frameState.extent;\n    var pixelRatio = frameState.pixelRatio;\n    var viewState = frameState.viewState;\n    var rotation = viewState.rotation;\n\n    var transform = this.getTransform(frameState);\n\n    var vectorContext = new _ol_render_canvas_Immediate_(context, pixelRatio,\n        extent, transform, rotation);\n    var composeEvent = new _ol_render_Event_(type, vectorContext,\n        frameState, context, null);\n    map.dispatchEvent(composeEvent);\n  }\n};\n\n\n/**\n * @param {olx.FrameState} frameState Frame state.\n * @protected\n * @return {!ol.Transform} Transform.\n */\n_ol_renderer_canvas_Map_.prototype.getTransform = function(frameState) {\n  var viewState = frameState.viewState;\n  var dx1 = this.canvas_.width / 2;\n  var dy1 = this.canvas_.height / 2;\n  var sx = frameState.pixelRatio / viewState.resolution;\n  var sy = -sx;\n  var angle = -viewState.rotation;\n  var dx2 = -viewState.center[0];\n  var dy2 = -viewState.center[1];\n  return _ol_transform_.compose(this.transform_, dx1, dy1, sx, sy, angle, dx2, dy2);\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_renderer_canvas_Map_.prototype.getType = function() {\n  return _ol_renderer_Type_.CANVAS;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_renderer_canvas_Map_.prototype.renderFrame = function(frameState) {\n\n  if (!frameState) {\n    if (this.renderedVisible_) {\n      this.canvas_.style.display = 'none';\n      this.renderedVisible_ = false;\n    }\n    return;\n  }\n\n  var context = this.context_;\n  var pixelRatio = frameState.pixelRatio;\n  var width = Math.round(frameState.size[0] * pixelRatio);\n  var height = Math.round(frameState.size[1] * pixelRatio);\n  if (this.canvas_.width != width || this.canvas_.height != height) {\n    this.canvas_.width = width;\n    this.canvas_.height = height;\n  } else {\n    context.clearRect(0, 0, width, height);\n  }\n\n  var rotation = frameState.viewState.rotation;\n\n  this.calculateMatrices2D(frameState);\n\n  this.dispatchComposeEvent_(_ol_render_EventType_.PRECOMPOSE, frameState);\n\n  var layerStatesArray = frameState.layerStatesArray;\n  _ol_array_.stableSort(layerStatesArray, _ol_renderer_Map_.sortByZIndex);\n\n  if (rotation) {\n    context.save();\n    _ol_render_canvas_.rotateAtOffset(context, rotation, width / 2, height / 2);\n  }\n\n  var viewResolution = frameState.viewState.resolution;\n  var i, ii, layer, layerRenderer, layerState;\n  for (i = 0, ii = layerStatesArray.length; i < ii; ++i) {\n    layerState = layerStatesArray[i];\n    layer = layerState.layer;\n    layerRenderer = /** @type {ol.renderer.canvas.Layer} */ (this.getLayerRenderer(layer));\n    if (!_ol_layer_Layer_.visibleAtResolution(layerState, viewResolution) ||\n        layerState.sourceState != _ol_source_State_.READY) {\n      continue;\n    }\n    if (layerRenderer.prepareFrame(frameState, layerState)) {\n      layerRenderer.composeFrame(frameState, layerState, context);\n    }\n  }\n\n  if (rotation) {\n    context.restore();\n  }\n\n  this.dispatchComposeEvent_(\n      _ol_render_EventType_.POSTCOMPOSE, frameState);\n\n  if (!this.renderedVisible_) {\n    this.canvas_.style.display = '';\n    this.renderedVisible_ = true;\n  }\n\n  this.scheduleRemoveUnusedLayerRenderers(frameState);\n  this.scheduleExpireIconCache(frameState);\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_renderer_canvas_Map_.prototype.forEachLayerAtPixel = function(pixel, frameState, callback, thisArg,\n    layerFilter, thisArg2) {\n  var result;\n  var viewState = frameState.viewState;\n  var viewResolution = viewState.resolution;\n\n  var layerStates = frameState.layerStatesArray;\n  var numLayers = layerStates.length;\n\n  var coordinate = _ol_transform_.apply(\n      frameState.pixelToCoordinateTransform, pixel.slice());\n\n  var i;\n  for (i = numLayers - 1; i >= 0; --i) {\n    var layerState = layerStates[i];\n    var layer = layerState.layer;\n    if (_ol_layer_Layer_.visibleAtResolution(layerState, viewResolution) &&\n        layerFilter.call(thisArg2, layer)) {\n      var layerRenderer = /** @type {ol.renderer.canvas.Layer} */ (this.getLayerRenderer(layer));\n      result = layerRenderer.forEachLayerAtCoordinate(\n          coordinate, frameState, callback, thisArg);\n      if (result) {\n        return result;\n      }\n    }\n  }\n  return undefined;\n};\nexport default _ol_renderer_canvas_Map_;\n","import _ol_ from '../../index.js';\nimport _ol_LayerType_ from '../../layertype.js';\nimport _ol_TileRange_ from '../../tilerange.js';\nimport _ol_TileState_ from '../../tilestate.js';\nimport _ol_ViewHint_ from '../../viewhint.js';\nimport _ol_dom_ from '../../dom.js';\nimport _ol_extent_ from '../../extent.js';\nimport _ol_renderer_Type_ from '../type.js';\nimport _ol_renderer_canvas_IntermediateCanvas_ from '../canvas/intermediatecanvas.js';\nimport _ol_transform_ from '../../transform.js';\n\n/**\n * @constructor\n * @extends {ol.renderer.canvas.IntermediateCanvas}\n * @param {ol.layer.Tile|ol.layer.VectorTile} tileLayer Tile layer.\n * @api\n */\nvar _ol_renderer_canvas_TileLayer_ = function(tileLayer) {\n\n  _ol_renderer_canvas_IntermediateCanvas_.call(this, tileLayer);\n\n  /**\n   * @protected\n   * @type {CanvasRenderingContext2D}\n   */\n  this.context = this.context === null ? null :  _ol_dom_.createCanvasContext2D();\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.oversampling_;\n\n  /**\n   * @private\n   * @type {ol.Extent}\n   */\n  this.renderedExtent_ = null;\n\n  /**\n   * @protected\n   * @type {number}\n   */\n  this.renderedRevision;\n\n  /**\n   * @protected\n   * @type {!Array.<ol.Tile>}\n   */\n  this.renderedTiles = [];\n\n  /**\n   * @protected\n   * @type {ol.Extent}\n   */\n  this.tmpExtent = _ol_extent_.createEmpty();\n\n  /**\n   * @private\n   * @type {ol.TileRange}\n   */\n  this.tmpTileRange_ = new _ol_TileRange_(0, 0, 0, 0);\n\n  /**\n   * @private\n   * @type {ol.Transform}\n   */\n  this.imageTransform_ = _ol_transform_.create();\n\n  /**\n   * @protected\n   * @type {number}\n   */\n  this.zDirection = 0;\n\n};\n\n_ol_.inherits(_ol_renderer_canvas_TileLayer_, _ol_renderer_canvas_IntermediateCanvas_);\n\n\n/**\n * Determine if this renderer handles the provided layer.\n * @param {ol.renderer.Type} type The renderer type.\n * @param {ol.layer.Layer} layer The candidate layer.\n * @return {boolean} The renderer can render the layer.\n */\n_ol_renderer_canvas_TileLayer_['handles'] = function(type, layer) {\n  return type === _ol_renderer_Type_.CANVAS && layer.getType() === _ol_LayerType_.TILE;\n};\n\n\n/**\n * Create a layer renderer.\n * @param {ol.renderer.Map} mapRenderer The map renderer.\n * @param {ol.layer.Layer} layer The layer to be rendererd.\n * @return {ol.renderer.canvas.TileLayer} The layer renderer.\n */\n_ol_renderer_canvas_TileLayer_['create'] = function(mapRenderer, layer) {\n  return new _ol_renderer_canvas_TileLayer_(/** @type {ol.layer.Tile} */ (layer));\n};\n\n\n/**\n * @private\n * @param {ol.Tile} tile Tile.\n * @return {boolean} Tile is drawable.\n */\n_ol_renderer_canvas_TileLayer_.prototype.isDrawableTile_ = function(tile) {\n  var tileState = tile.getState();\n  var useInterimTilesOnError = this.getLayer().getUseInterimTilesOnError();\n  return tileState == _ol_TileState_.LOADED ||\n      tileState == _ol_TileState_.EMPTY ||\n      tileState == _ol_TileState_.ERROR && !useInterimTilesOnError;\n};\n\n/**\n * @inheritDoc\n */\n_ol_renderer_canvas_TileLayer_.prototype.prepareFrame = function(frameState, layerState) {\n\n  var pixelRatio = frameState.pixelRatio;\n  var size = frameState.size;\n  var viewState = frameState.viewState;\n  var projection = viewState.projection;\n  var viewResolution = viewState.resolution;\n  var viewCenter = viewState.center;\n\n  var tileLayer = this.getLayer();\n  var tileSource = /** @type {ol.source.Tile} */ (tileLayer.getSource());\n  var sourceRevision = tileSource.getRevision();\n  var tileGrid = tileSource.getTileGridForProjection(projection);\n  var z = tileGrid.getZForResolution(viewResolution, this.zDirection);\n  var tileResolution = tileGrid.getResolution(z);\n  var oversampling = Math.round(viewResolution / tileResolution) || 1;\n  var extent = frameState.extent;\n\n  if (layerState.extent !== undefined) {\n    extent = _ol_extent_.getIntersection(extent, layerState.extent);\n  }\n  if (_ol_extent_.isEmpty(extent)) {\n    // Return false to prevent the rendering of the layer.\n    return false;\n  }\n\n  var tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z);\n  var imageExtent = tileGrid.getTileRangeExtent(z, tileRange);\n\n  var tilePixelRatio = tileSource.getTilePixelRatio(pixelRatio);\n\n  /**\n   * @type {Object.<number, Object.<string, ol.Tile>>}\n   */\n  var tilesToDrawByZ = {};\n  tilesToDrawByZ[z] = {};\n\n  var findLoadedTiles = this.createLoadedTileFinder(\n      tileSource, projection, tilesToDrawByZ);\n\n  var tmpExtent = this.tmpExtent;\n  var tmpTileRange = this.tmpTileRange_;\n  var newTiles = false;\n  var tile, x, y;\n  for (x = tileRange.minX; x <= tileRange.maxX; ++x) {\n    for (y = tileRange.minY; y <= tileRange.maxY; ++y) {\n      tile = tileSource.getTile(z, x, y, pixelRatio, projection);\n      if (tile.getState() == _ol_TileState_.ERROR) {\n        if (!tileLayer.getUseInterimTilesOnError()) {\n          // When useInterimTilesOnError is false, we consider the error tile as loaded.\n          tile.setState(_ol_TileState_.LOADED);\n        } else if (tileLayer.getPreload() > 0) {\n          // Preloaded tiles for lower resolutions might have finished loading.\n          newTiles = true;\n        }\n      }\n      if (!this.isDrawableTile_(tile)) {\n        tile = tile.getInterimTile();\n      }\n      if (this.isDrawableTile_(tile)) {\n        var uid = _ol_.getUid(this);\n        if (tile.getState() == _ol_TileState_.LOADED) {\n          tilesToDrawByZ[z][tile.tileCoord.toString()] = tile;\n          var inTransition = tile.inTransition(uid);\n          if (!newTiles && (inTransition || this.renderedTiles.indexOf(tile) === -1)) {\n            newTiles = true;\n          }\n        }\n        if (tile.getAlpha(uid, frameState.time) === 1) {\n          // don't look for alt tiles if alpha is 1\n          continue;\n        }\n      }\n\n      var childTileRange = tileGrid.getTileCoordChildTileRange(\n          tile.tileCoord, tmpTileRange, tmpExtent);\n      var covered = false;\n      if (childTileRange) {\n        covered = findLoadedTiles(z + 1, childTileRange);\n      }\n      if (!covered) {\n        tileGrid.forEachTileCoordParentTileRange(\n            tile.tileCoord, findLoadedTiles, null, tmpTileRange, tmpExtent);\n      }\n\n    }\n  }\n\n  var renderedResolution = tileResolution * pixelRatio / tilePixelRatio * oversampling;\n  var hints = frameState.viewHints;\n  var animatingOrInteracting = hints[_ol_ViewHint_.ANIMATING] || hints[_ol_ViewHint_.INTERACTING];\n  if (!(this.renderedResolution && Date.now() - frameState.time > 16 && animatingOrInteracting) && (\n    newTiles ||\n        !(this.renderedExtent_ && _ol_extent_.containsExtent(this.renderedExtent_, extent)) ||\n        this.renderedRevision != sourceRevision ||\n        oversampling != this.oversampling_ ||\n        !animatingOrInteracting && renderedResolution != this.renderedResolution\n  )) {\n\n    var context = this.context;\n    if (context) {\n      var tilePixelSize = tileSource.getTilePixelSize(z, pixelRatio, projection);\n      var width = Math.round(tileRange.getWidth() * tilePixelSize[0] / oversampling);\n      var height = Math.round(tileRange.getHeight() * tilePixelSize[1] / oversampling);\n      var canvas = context.canvas;\n      if (canvas.width != width || canvas.height != height) {\n        this.oversampling_ = oversampling;\n        canvas.width = width;\n        canvas.height = height;\n      } else {\n        if (this.renderedExtent_ && !_ol_extent_.equals(imageExtent, this.renderedExtent_)) {\n          context.clearRect(0, 0, width, height);\n        }\n        oversampling = this.oversampling_;\n      }\n    }\n\n    this.renderedTiles.length = 0;\n    /** @type {Array.<number>} */\n    var zs = Object.keys(tilesToDrawByZ).map(Number);\n    zs.sort(function(a, b) {\n      if (a === z) {\n        return 1;\n      } else if (b === z) {\n        return -1;\n      } else {\n        return a > b ? 1 : a < b ? -1 : 0;\n      }\n    });\n    var currentResolution, currentScale, currentTilePixelSize, currentZ, i, ii;\n    var tileExtent, tileGutter, tilesToDraw, w, h;\n    for (i = 0, ii = zs.length; i < ii; ++i) {\n      currentZ = zs[i];\n      currentTilePixelSize = tileSource.getTilePixelSize(currentZ, pixelRatio, projection);\n      currentResolution = tileGrid.getResolution(currentZ);\n      currentScale = currentResolution / tileResolution;\n      tileGutter = tilePixelRatio * tileSource.getGutter(projection);\n      tilesToDraw = tilesToDrawByZ[currentZ];\n      for (var tileCoordKey in tilesToDraw) {\n        tile = tilesToDraw[tileCoordKey];\n        tileExtent = tileGrid.getTileCoordExtent(tile.getTileCoord(), tmpExtent);\n        x = (tileExtent[0] - imageExtent[0]) / tileResolution * tilePixelRatio / oversampling;\n        y = (imageExtent[3] - tileExtent[3]) / tileResolution * tilePixelRatio / oversampling;\n        w = currentTilePixelSize[0] * currentScale / oversampling;\n        h = currentTilePixelSize[1] * currentScale / oversampling;\n        this.drawTileImage(tile, frameState, layerState, x, y, w, h, tileGutter, z === currentZ);\n        this.renderedTiles.push(tile);\n      }\n    }\n\n    this.renderedRevision = sourceRevision;\n    this.renderedResolution = tileResolution * pixelRatio / tilePixelRatio * oversampling;\n    this.renderedExtent_ = imageExtent;\n  }\n\n  var scale = this.renderedResolution / viewResolution;\n  var transform = _ol_transform_.compose(this.imageTransform_,\n      pixelRatio * size[0] / 2, pixelRatio * size[1] / 2,\n      scale, scale,\n      0,\n      (this.renderedExtent_[0] - viewCenter[0]) / this.renderedResolution * pixelRatio,\n      (viewCenter[1] - this.renderedExtent_[3]) / this.renderedResolution * pixelRatio);\n  _ol_transform_.compose(this.coordinateToCanvasPixelTransform,\n      pixelRatio * size[0] / 2 - transform[4], pixelRatio * size[1] / 2 - transform[5],\n      pixelRatio / viewResolution, -pixelRatio / viewResolution,\n      0,\n      -viewCenter[0], -viewCenter[1]);\n\n\n  this.updateUsedTiles(frameState.usedTiles, tileSource, z, tileRange);\n  this.manageTilePyramid(frameState, tileSource, tileGrid, pixelRatio,\n      projection, extent, z, tileLayer.getPreload());\n  this.scheduleExpireCache(frameState, tileSource);\n  this.updateLogos(frameState, tileSource);\n\n  return this.renderedTiles.length > 0;\n};\n\n\n/**\n * @param {ol.Tile} tile Tile.\n * @param {olx.FrameState} frameState Frame state.\n * @param {ol.LayerState} layerState Layer state.\n * @param {number} x Left of the tile.\n * @param {number} y Top of the tile.\n * @param {number} w Width of the tile.\n * @param {number} h Height of the tile.\n * @param {number} gutter Tile gutter.\n * @param {boolean} transition Apply an alpha transition.\n */\n_ol_renderer_canvas_TileLayer_.prototype.drawTileImage = function(tile, frameState, layerState, x, y, w, h, gutter, transition) {\n  var image = tile.getImage(this.getLayer());\n  if (!image) {\n    return;\n  }\n  var uid = _ol_.getUid(this);\n  var alpha = transition ? tile.getAlpha(uid, frameState.time) : 1;\n  if (alpha === 1 && !this.getLayer().getSource().getOpaque(frameState.viewState.projection)) {\n    this.context.clearRect(x, y, w, h);\n  }\n  var alphaChanged = alpha !== this.context.globalAlpha;\n  if (alphaChanged) {\n    this.context.save();\n    this.context.globalAlpha = alpha;\n  }\n  this.context.drawImage(image, gutter, gutter,\n      image.width - 2 * gutter, image.height - 2 * gutter, x, y, w, h);\n\n  if (alphaChanged) {\n    this.context.restore();\n  }\n  if (alpha !== 1) {\n    frameState.animate = true;\n  } else if (transition) {\n    tile.endTransition(uid);\n  }\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_renderer_canvas_TileLayer_.prototype.getImage = function() {\n  var context = this.context;\n  return context ? context.canvas : null;\n};\n\n\n/**\n * @function\n * @return {ol.layer.Tile|ol.layer.VectorTile}\n */\n_ol_renderer_canvas_TileLayer_.prototype.getLayer;\n\n\n/**\n * @inheritDoc\n */\n_ol_renderer_canvas_TileLayer_.prototype.getImageTransform = function() {\n  return this.imageTransform_;\n};\nexport default _ol_renderer_canvas_TileLayer_;\n","/**\n * Base class for replay groups.\n * @constructor\n * @abstract\n */\nvar _ol_render_ReplayGroup_ = function() {};\n\n\n/**\n * @abstract\n * @param {number|undefined} zIndex Z index.\n * @param {ol.render.ReplayType} replayType Replay type.\n * @return {ol.render.VectorContext} Replay.\n */\n_ol_render_ReplayGroup_.prototype.getReplay = function(zIndex, replayType) {};\n\n\n/**\n * @abstract\n * @return {boolean} Is empty.\n */\n_ol_render_ReplayGroup_.prototype.isEmpty = function() {};\nexport default _ol_render_ReplayGroup_;\n","/**\n * @enum {string}\n */\nvar _ol_render_ReplayType_ = {\n  CIRCLE: 'Circle',\n  DEFAULT: 'Default',\n  IMAGE: 'Image',\n  LINE_STRING: 'LineString',\n  POLYGON: 'Polygon',\n  TEXT: 'Text'\n};\n\nexport default _ol_render_ReplayType_;\n","import _ol_math_ from '../../math.js';\nvar _ol_geom_flat_textpath_ = {};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Path to put text on.\n * @param {number} offset Start offset of the `flatCoordinates`.\n * @param {number} end End offset of the `flatCoordinates`.\n * @param {number} stride Stride.\n * @param {string} text Text to place on the path.\n * @param {function(string):number} measure Measure function returning the\n * width of the character passed as 1st argument.\n * @param {number} startM m along the path where the text starts.\n * @param {number} maxAngle Max angle between adjacent chars in radians.\n * @return {Array.<Array.<*>>} The result array of null if `maxAngle` was\n * exceeded. Entries of the array are x, y, anchorX, angle, chunk.\n */\n_ol_geom_flat_textpath_.lineString = function(\n    flatCoordinates, offset, end, stride, text, measure, startM, maxAngle) {\n  var result = [];\n\n  // Keep text upright\n  var reverse = flatCoordinates[offset] > flatCoordinates[end - stride];\n\n  var numChars = text.length;\n\n  var x1 = flatCoordinates[offset];\n  var y1 = flatCoordinates[offset + 1];\n  offset += stride;\n  var x2 = flatCoordinates[offset];\n  var y2 = flatCoordinates[offset + 1];\n  var segmentM = 0;\n  var segmentLength = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n\n  var chunk = '';\n  var chunkLength = 0;\n  var data, index, previousAngle;\n  for (var i = 0; i < numChars; ++i) {\n    index = reverse ? numChars - i - 1 : i;\n    var char = text.charAt(index);\n    chunk = reverse ? char + chunk : chunk + char;\n    var charLength = measure(chunk) - chunkLength;\n    chunkLength += charLength;\n    var charM = startM + charLength / 2;\n    while (offset < end - stride && segmentM + segmentLength < charM) {\n      x1 = x2;\n      y1 = y2;\n      offset += stride;\n      x2 = flatCoordinates[offset];\n      y2 = flatCoordinates[offset + 1];\n      segmentM += segmentLength;\n      segmentLength = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n    }\n    var segmentPos = charM - segmentM;\n    var angle = Math.atan2(y2 - y1, x2 - x1);\n    if (reverse) {\n      angle += angle > 0 ? -Math.PI : Math.PI;\n    }\n    if (previousAngle !== undefined) {\n      var delta = angle - previousAngle;\n      delta += (delta > Math.PI) ? -2 * Math.PI : (delta < -Math.PI) ? 2 * Math.PI : 0;\n      if (Math.abs(delta) > maxAngle) {\n        return null;\n      }\n    }\n    var interpolate = segmentPos / segmentLength;\n    var x = _ol_math_.lerp(x1, x2, interpolate);\n    var y = _ol_math_.lerp(y1, y2, interpolate);\n    if (previousAngle == angle) {\n      if (reverse) {\n        data[0] = x;\n        data[1] = y;\n        data[2] = charLength / 2;\n      }\n      data[4] = chunk;\n    } else {\n      chunk = char;\n      chunkLength = charLength;\n      data = [x, y, charLength / 2, angle, chunk];\n      if (reverse) {\n        result.unshift(data);\n      } else {\n        result.push(data);\n      }\n      previousAngle = angle;\n    }\n    startM += charLength;\n  }\n  return result;\n};\nexport default _ol_geom_flat_textpath_;\n","/**\n * @enum {number}\n */\nvar _ol_render_canvas_Instruction_ = {\n  BEGIN_GEOMETRY: 0,\n  BEGIN_PATH: 1,\n  CIRCLE: 2,\n  CLOSE_PATH: 3,\n  CUSTOM: 4,\n  DRAW_CHARS: 5,\n  DRAW_IMAGE: 6,\n  END_GEOMETRY: 7,\n  FILL: 8,\n  MOVE_TO_LINE_TO: 9,\n  SET_FILL_STYLE: 10,\n  SET_STROKE_STYLE: 11,\n  STROKE: 12\n};\n\nexport default _ol_render_canvas_Instruction_;\n","import _ol_render_ReplayType_ from '../render/replaytype.js';\nvar _ol_render_replay_ = {};\n\n\n/**\n * @const\n * @type {Array.<ol.render.ReplayType>}\n */\n_ol_render_replay_.ORDER = [\n  _ol_render_ReplayType_.POLYGON,\n  _ol_render_ReplayType_.CIRCLE,\n  _ol_render_ReplayType_.LINE_STRING,\n  _ol_render_ReplayType_.IMAGE,\n  _ol_render_ReplayType_.TEXT,\n  _ol_render_ReplayType_.DEFAULT\n];\n\n/**\n * @const\n * @enum {number}\n */\n_ol_render_replay_.TEXT_ALIGN = {};\n_ol_render_replay_.TEXT_ALIGN['left'] = 0;\n_ol_render_replay_.TEXT_ALIGN['end'] = 0;\n_ol_render_replay_.TEXT_ALIGN['center'] = 0.5;\n_ol_render_replay_.TEXT_ALIGN['right'] = 1;\n_ol_render_replay_.TEXT_ALIGN['start'] = 1;\n_ol_render_replay_.TEXT_ALIGN['top'] = 0;\n_ol_render_replay_.TEXT_ALIGN['middle'] = 0.5;\n_ol_render_replay_.TEXT_ALIGN['hanging'] = 0.2;\n_ol_render_replay_.TEXT_ALIGN['alphabetic'] = 0.8;\n_ol_render_replay_.TEXT_ALIGN['ideographic'] = 0.8;\n_ol_render_replay_.TEXT_ALIGN['bottom'] = 1;\nexport default _ol_render_replay_;\n","import _ol_ from '../../index.js';\nimport _ol_array_ from '../../array.js';\nimport _ol_colorlike_ from '../../colorlike.js';\nimport _ol_extent_ from '../../extent.js';\nimport _ol_extent_Relationship_ from '../../extent/relationship.js';\nimport _ol_geom_GeometryType_ from '../../geom/geometrytype.js';\nimport _ol_geom_flat_inflate_ from '../../geom/flat/inflate.js';\nimport _ol_geom_flat_length_ from '../../geom/flat/length.js';\nimport _ol_geom_flat_textpath_ from '../../geom/flat/textpath.js';\nimport _ol_geom_flat_transform_ from '../../geom/flat/transform.js';\nimport _ol_has_ from '../../has.js';\nimport _ol_obj_ from '../../obj.js';\nimport _ol_render_VectorContext_ from '../vectorcontext.js';\nimport _ol_render_canvas_ from '../canvas.js';\nimport _ol_render_canvas_Instruction_ from '../canvas/instruction.js';\nimport _ol_render_replay_ from '../replay.js';\nimport _ol_transform_ from '../../transform.js';\n\n/**\n * @constructor\n * @extends {ol.render.VectorContext}\n * @param {number} tolerance Tolerance.\n * @param {ol.Extent} maxExtent Maximum extent.\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @param {boolean} overlaps The replay can have overlapping geometries.\n * @param {?} declutterTree Declutter tree.\n * @struct\n */\nvar _ol_render_canvas_Replay_ = function(tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree) {\n  _ol_render_VectorContext_.call(this);\n\n  /**\n   * @type {?}\n   */\n  this.declutterTree = declutterTree;\n\n  /**\n   * @private\n   * @type {ol.Extent}\n   */\n  this.tmpExtent_ = _ol_extent_.createEmpty();\n\n  /**\n   * @protected\n   * @type {number}\n   */\n  this.tolerance = tolerance;\n\n  /**\n   * @protected\n   * @const\n   * @type {ol.Extent}\n   */\n  this.maxExtent = maxExtent;\n\n  /**\n   * @protected\n   * @type {boolean}\n   */\n  this.overlaps = overlaps;\n\n  /**\n   * @protected\n   * @type {number}\n   */\n  this.pixelRatio = pixelRatio;\n\n  /**\n   * @protected\n   * @type {number}\n   */\n  this.maxLineWidth = 0;\n\n  /**\n   * @protected\n   * @const\n   * @type {number}\n   */\n  this.resolution = resolution;\n\n  /**\n   * @private\n   * @type {ol.Coordinate}\n   */\n  this.fillOrigin_;\n\n  /**\n   * @private\n   * @type {Array.<*>}\n   */\n  this.beginGeometryInstruction1_ = null;\n\n  /**\n   * @private\n   * @type {Array.<*>}\n   */\n  this.beginGeometryInstruction2_ = null;\n\n  /**\n   * @private\n   * @type {ol.Extent}\n   */\n  this.bufferedMaxExtent_ = null;\n\n  /**\n   * @protected\n   * @type {Array.<*>}\n   */\n  this.instructions = [];\n\n  /**\n   * @protected\n   * @type {Array.<number>}\n   */\n  this.coordinates = [];\n\n  /**\n   * @private\n   * @type {Object.<number,ol.Coordinate|Array.<ol.Coordinate>|Array.<Array.<ol.Coordinate>>>}\n   */\n  this.coordinateCache_ = {};\n\n  /**\n   * @private\n   * @type {!ol.Transform}\n   */\n  this.renderedTransform_ = _ol_transform_.create();\n\n  /**\n   * @protected\n   * @type {Array.<*>}\n   */\n  this.hitDetectionInstructions = [];\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.pixelCoordinates_ = null;\n\n  /**\n   * @protected\n   * @type {ol.CanvasFillStrokeState}\n   */\n  this.state = /** @type {ol.CanvasFillStrokeState} */ ({});\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.viewRotation_ = 0;\n\n  /**\n   * @private\n   * @type {!ol.Transform}\n   */\n  this.tmpLocalTransform_ = _ol_transform_.create();\n\n  /**\n   * @private\n   * @type {!ol.Transform}\n   */\n  this.resetTransform_ = _ol_transform_.create();\n};\n\n_ol_.inherits(_ol_render_canvas_Replay_, _ol_render_VectorContext_);\n\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {ol.Coordinate} p1 1st point of the background box.\n * @param {ol.Coordinate} p2 2nd point of the background box.\n * @param {ol.Coordinate} p3 3rd point of the background box.\n * @param {ol.Coordinate} p4 4th point of the background box.\n * @param {Array.<*>} fillInstruction Fill instruction.\n * @param {Array.<*>} strokeInstruction Stroke instruction.\n */\n_ol_render_canvas_Replay_.prototype.replayTextBackground_ = function(context, p1, p2, p3, p4,\n    fillInstruction, strokeInstruction) {\n  context.beginPath();\n  context.moveTo.apply(context, p1);\n  context.lineTo.apply(context, p2);\n  context.lineTo.apply(context, p3);\n  context.lineTo.apply(context, p4);\n  context.lineTo.apply(context, p1);\n  if (fillInstruction) {\n    this.fillOrigin_ = /** @type {Array.<number>} */ (fillInstruction[2]);\n    this.fill_(context);\n  }\n  if (strokeInstruction) {\n    this.setStrokeStyle_(context, /** @type {Array.<*>} */ (strokeInstruction));\n    context.stroke();\n  }\n};\n\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {HTMLImageElement|HTMLCanvasElement|HTMLVideoElement} image Image.\n * @param {number} anchorX Anchor X.\n * @param {number} anchorY Anchor Y.\n * @param {ol.DeclutterGroup} declutterGroup Declutter group.\n * @param {number} height Height.\n * @param {number} opacity Opacity.\n * @param {number} originX Origin X.\n * @param {number} originY Origin Y.\n * @param {number} rotation Rotation.\n * @param {number} scale Scale.\n * @param {boolean} snapToPixel Snap to pixel.\n * @param {number} width Width.\n * @param {Array.<number>} padding Padding.\n * @param {Array.<*>} fillInstruction Fill instruction.\n * @param {Array.<*>} strokeInstruction Stroke instruction.\n */\n_ol_render_canvas_Replay_.prototype.replayImage_ = function(context, x, y, image,\n    anchorX, anchorY, declutterGroup, height, opacity, originX, originY,\n    rotation, scale, snapToPixel, width, padding, fillInstruction, strokeInstruction) {\n  var fillStroke = fillInstruction || strokeInstruction;\n  var localTransform = this.tmpLocalTransform_;\n  anchorX *= scale;\n  anchorY *= scale;\n  x -= anchorX;\n  y -= anchorY;\n  if (snapToPixel) {\n    x = Math.round(x);\n    y = Math.round(y);\n  }\n\n  var w = (width + originX > image.width) ? image.width - originX : width;\n  var h = (height + originY > image.height) ? image.height - originY : height;\n  var box = this.tmpExtent_;\n  var boxW = padding[3] + w * scale + padding[1];\n  var boxH = padding[0] + h * scale + padding[2];\n  var boxX = x - padding[3];\n  var boxY = y - padding[0];\n\n  /** @type {ol.Coordinate} */\n  var p1;\n  /** @type {ol.Coordinate} */\n  var p2;\n  /** @type {ol.Coordinate} */\n  var p3;\n  /** @type {ol.Coordinate} */\n  var p4;\n  if (fillStroke || rotation !== 0) {\n    p1 = [boxX, boxY];\n    p2 = [boxX + boxW, boxY];\n    p3 = [boxX + boxW, boxY + boxH];\n    p4 = [boxX, boxY + boxH];\n  }\n\n  var transform = null;\n  if (rotation !== 0) {\n    var centerX = x + anchorX;\n    var centerY = y + anchorY;\n    transform = _ol_transform_.compose(localTransform,\n        centerX, centerY, 1, 1, rotation, -centerX, -centerY);\n\n    _ol_extent_.createOrUpdateEmpty(box);\n    _ol_extent_.extendCoordinate(box, _ol_transform_.apply(localTransform, p1));\n    _ol_extent_.extendCoordinate(box, _ol_transform_.apply(localTransform, p2));\n    _ol_extent_.extendCoordinate(box, _ol_transform_.apply(localTransform, p3));\n    _ol_extent_.extendCoordinate(box, _ol_transform_.apply(localTransform, p4));\n  } else {\n    _ol_extent_.createOrUpdate(boxX, boxY, boxX + boxW, boxY + boxH, box);\n  }\n  var canvas = context.canvas;\n  var intersects = box[0] <= canvas.width && box[2] >= 0 && box[1] <= canvas.height && box[3] >= 0;\n  if (declutterGroup) {\n    if (!intersects && declutterGroup[4] == 1) {\n      return;\n    }\n    _ol_extent_.extend(declutterGroup, box);\n    var declutterArgs = intersects ?\n      [context, transform ? transform.slice(0) : null, opacity, image, originX, originY, w, h, x, y, scale] :\n      null;\n    if (declutterArgs && fillStroke) {\n      declutterArgs.push(fillInstruction, strokeInstruction, p1, p2, p3, p4);\n    }\n    declutterGroup.push(declutterArgs);\n  } else if (intersects) {\n    if (fillStroke) {\n      this.replayTextBackground_(context, p1, p2, p3, p4,\n          /** @type {Array.<*>} */ (fillInstruction),\n          /** @type {Array.<*>} */ (strokeInstruction));\n    }\n    _ol_render_canvas_.drawImage(context, transform, opacity, image, originX, originY, w, h, x, y, scale);\n  }\n};\n\n\n/**\n * @protected\n * @param {Array.<number>} dashArray Dash array.\n * @return {Array.<number>} Dash array with pixel ratio applied\n */\n_ol_render_canvas_Replay_.prototype.applyPixelRatio = function(dashArray) {\n  var pixelRatio = this.pixelRatio;\n  return pixelRatio == 1 ? dashArray : dashArray.map(function(dash) {\n    return dash * pixelRatio;\n  });\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {boolean} closed Last input coordinate equals first.\n * @param {boolean} skipFirst Skip first coordinate.\n * @protected\n * @return {number} My end.\n */\n_ol_render_canvas_Replay_.prototype.appendFlatCoordinates = function(flatCoordinates, offset, end, stride, closed, skipFirst) {\n\n  var myEnd = this.coordinates.length;\n  var extent = this.getBufferedMaxExtent();\n  if (skipFirst) {\n    offset += stride;\n  }\n  var lastCoord = [flatCoordinates[offset], flatCoordinates[offset + 1]];\n  var nextCoord = [NaN, NaN];\n  var skipped = true;\n\n  var i, lastRel, nextRel;\n  for (i = offset + stride; i < end; i += stride) {\n    nextCoord[0] = flatCoordinates[i];\n    nextCoord[1] = flatCoordinates[i + 1];\n    nextRel = _ol_extent_.coordinateRelationship(extent, nextCoord);\n    if (nextRel !== lastRel) {\n      if (skipped) {\n        this.coordinates[myEnd++] = lastCoord[0];\n        this.coordinates[myEnd++] = lastCoord[1];\n      }\n      this.coordinates[myEnd++] = nextCoord[0];\n      this.coordinates[myEnd++] = nextCoord[1];\n      skipped = false;\n    } else if (nextRel === _ol_extent_Relationship_.INTERSECTING) {\n      this.coordinates[myEnd++] = nextCoord[0];\n      this.coordinates[myEnd++] = nextCoord[1];\n      skipped = false;\n    } else {\n      skipped = true;\n    }\n    lastCoord[0] = nextCoord[0];\n    lastCoord[1] = nextCoord[1];\n    lastRel = nextRel;\n  }\n\n  // Last coordinate equals first or only one point to append:\n  if ((closed && skipped) || i === offset + stride) {\n    this.coordinates[myEnd++] = lastCoord[0];\n    this.coordinates[myEnd++] = lastCoord[1];\n  }\n  return myEnd;\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {Array.<number>} replayEnds Replay ends.\n * @return {number} Offset.\n */\n_ol_render_canvas_Replay_.prototype.drawCustomCoordinates_ = function(flatCoordinates, offset, ends, stride, replayEnds) {\n  for (var i = 0, ii = ends.length; i < ii; ++i) {\n    var end = ends[i];\n    var replayEnd = this.appendFlatCoordinates(flatCoordinates, offset, end, stride, false, false);\n    replayEnds.push(replayEnd);\n    offset = end;\n  }\n  return offset;\n};\n\n\n/**\n * @inheritDoc.\n */\n_ol_render_canvas_Replay_.prototype.drawCustom = function(geometry, feature, renderer) {\n  this.beginGeometry(geometry, feature);\n  var type = geometry.getType();\n  var stride = geometry.getStride();\n  var replayBegin = this.coordinates.length;\n  var flatCoordinates, replayEnd, replayEnds, replayEndss;\n  var offset;\n  if (type == _ol_geom_GeometryType_.MULTI_POLYGON) {\n    geometry = /** @type {ol.geom.MultiPolygon} */ (geometry);\n    flatCoordinates = geometry.getOrientedFlatCoordinates();\n    replayEndss = [];\n    var endss = geometry.getEndss();\n    offset = 0;\n    for (var i = 0, ii = endss.length; i < ii; ++i) {\n      var myEnds = [];\n      offset = this.drawCustomCoordinates_(flatCoordinates, offset, endss[i], stride, myEnds);\n      replayEndss.push(myEnds);\n    }\n    this.instructions.push([_ol_render_canvas_Instruction_.CUSTOM,\n      replayBegin, replayEndss, geometry, renderer, _ol_geom_flat_inflate_.coordinatesss]);\n  } else if (type == _ol_geom_GeometryType_.POLYGON || type == _ol_geom_GeometryType_.MULTI_LINE_STRING) {\n    replayEnds = [];\n    flatCoordinates = (type == _ol_geom_GeometryType_.POLYGON) ?\n      /** @type {ol.geom.Polygon} */ (geometry).getOrientedFlatCoordinates() :\n      geometry.getFlatCoordinates();\n    offset = this.drawCustomCoordinates_(flatCoordinates, 0,\n        /** @type {ol.geom.Polygon|ol.geom.MultiLineString} */ (geometry).getEnds(),\n        stride, replayEnds);\n    this.instructions.push([_ol_render_canvas_Instruction_.CUSTOM,\n      replayBegin, replayEnds, geometry, renderer, _ol_geom_flat_inflate_.coordinatess]);\n  } else if (type == _ol_geom_GeometryType_.LINE_STRING || type == _ol_geom_GeometryType_.MULTI_POINT) {\n    flatCoordinates = geometry.getFlatCoordinates();\n    replayEnd = this.appendFlatCoordinates(\n        flatCoordinates, 0, flatCoordinates.length, stride, false, false);\n    this.instructions.push([_ol_render_canvas_Instruction_.CUSTOM,\n      replayBegin, replayEnd, geometry, renderer, _ol_geom_flat_inflate_.coordinates]);\n  } else if (type == _ol_geom_GeometryType_.POINT) {\n    flatCoordinates = geometry.getFlatCoordinates();\n    this.coordinates.push(flatCoordinates[0], flatCoordinates[1]);\n    replayEnd = this.coordinates.length;\n    this.instructions.push([_ol_render_canvas_Instruction_.CUSTOM,\n      replayBegin, replayEnd, geometry, renderer]);\n  }\n  this.endGeometry(geometry, feature);\n};\n\n\n/**\n * @protected\n * @param {ol.geom.Geometry|ol.render.Feature} geometry Geometry.\n * @param {ol.Feature|ol.render.Feature} feature Feature.\n */\n_ol_render_canvas_Replay_.prototype.beginGeometry = function(geometry, feature) {\n  this.beginGeometryInstruction1_ =\n      [_ol_render_canvas_Instruction_.BEGIN_GEOMETRY, feature, 0];\n  this.instructions.push(this.beginGeometryInstruction1_);\n  this.beginGeometryInstruction2_ =\n      [_ol_render_canvas_Instruction_.BEGIN_GEOMETRY, feature, 0];\n  this.hitDetectionInstructions.push(this.beginGeometryInstruction2_);\n};\n\n\n/**\n * @private\n * @param {CanvasRenderingContext2D} context Context.\n */\n_ol_render_canvas_Replay_.prototype.fill_ = function(context) {\n  if (this.fillOrigin_) {\n    var origin = _ol_transform_.apply(this.renderedTransform_, this.fillOrigin_.slice());\n    context.translate(origin[0], origin[1]);\n    context.rotate(this.viewRotation_);\n  }\n  context.fill();\n  if (this.fillOrigin_) {\n    context.setTransform.apply(context, _ol_render_canvas_.resetTransform_);\n  }\n};\n\n\n/**\n * @private\n * @param {CanvasRenderingContext2D} context Context.\n * @param {Array.<*>} instruction Instruction.\n */\n_ol_render_canvas_Replay_.prototype.setStrokeStyle_ = function(context, instruction) {\n  context.strokeStyle = /** @type {ol.ColorLike} */ (instruction[1]);\n  context.lineWidth = /** @type {number} */ (instruction[2]);\n  context.lineCap = /** @type {string} */ (instruction[3]);\n  context.lineJoin = /** @type {string} */ (instruction[4]);\n  context.miterLimit = /** @type {number} */ (instruction[5]);\n  if (_ol_has_.CANVAS_LINE_DASH) {\n    context.lineDashOffset = /** @type {number} */ (instruction[7]);\n    context.setLineDash(/** @type {Array.<number>} */ (instruction[6]));\n  }\n};\n\n\n/**\n * @param {ol.DeclutterGroup} declutterGroup Declutter group.\n * @param {ol.Feature|ol.render.Feature} feature Feature.\n */\n_ol_render_canvas_Replay_.prototype.renderDeclutter_ = function(declutterGroup, feature) {\n  if (declutterGroup && declutterGroup.length > 5) {\n    var groupCount = declutterGroup[4];\n    if (groupCount == 1 || groupCount == declutterGroup.length - 5) {\n      /** @type {ol.RBushEntry} */\n      var box = {\n        minX: /** @type {number} */ (declutterGroup[0]),\n        minY: /** @type {number} */ (declutterGroup[1]),\n        maxX: /** @type {number} */ (declutterGroup[2]),\n        maxY: /** @type {number} */ (declutterGroup[3]),\n        value: feature\n      };\n      if (!this.declutterTree.collides(box)) {\n        this.declutterTree.insert(box);\n        var drawImage = _ol_render_canvas_.drawImage;\n        for (var j = 5, jj = declutterGroup.length; j < jj; ++j) {\n          var declutterData = /** @type {Array} */ (declutterGroup[j]);\n          if (declutterData) {\n            if (declutterData.length > 11) {\n              this.replayTextBackground_(declutterData[0],\n                  declutterData[13], declutterData[14], declutterData[15], declutterData[16],\n                  declutterData[11], declutterData[12]);\n            }\n            drawImage.apply(undefined, declutterData);\n          }\n        }\n      }\n      declutterGroup.length = 5;\n      _ol_extent_.createOrUpdateEmpty(declutterGroup);\n    }\n  }\n};\n\n\n/**\n * @private\n * @param {CanvasRenderingContext2D} context Context.\n * @param {ol.Transform} transform Transform.\n * @param {Object.<string, boolean>} skippedFeaturesHash Ids of features\n *     to skip.\n * @param {Array.<*>} instructions Instructions array.\n * @param {function((ol.Feature|ol.render.Feature)): T|undefined}\n *     featureCallback Feature callback.\n * @param {ol.Extent=} opt_hitExtent Only check features that intersect this\n *     extent.\n * @return {T|undefined} Callback result.\n * @template T\n */\n_ol_render_canvas_Replay_.prototype.replay_ = function(\n    context, transform, skippedFeaturesHash,\n    instructions, featureCallback, opt_hitExtent) {\n  /** @type {Array.<number>} */\n  var pixelCoordinates;\n  if (this.pixelCoordinates_ && _ol_array_.equals(transform, this.renderedTransform_)) {\n    pixelCoordinates = this.pixelCoordinates_;\n  } else {\n    if (!this.pixelCoordinates_) {\n      this.pixelCoordinates_ = [];\n    }\n    pixelCoordinates = _ol_geom_flat_transform_.transform2D(\n        this.coordinates, 0, this.coordinates.length, 2,\n        transform, this.pixelCoordinates_);\n    _ol_transform_.setFromArray(this.renderedTransform_, transform);\n  }\n  var skipFeatures = !_ol_obj_.isEmpty(skippedFeaturesHash);\n  var i = 0; // instruction index\n  var ii = instructions.length; // end of instructions\n  var d = 0; // data index\n  var dd; // end of per-instruction data\n  var anchorX, anchorY, prevX, prevY, roundX, roundY, declutterGroup, image;\n  var pendingFill = 0;\n  var pendingStroke = 0;\n  var lastFillInstruction = null;\n  var lastStrokeInstruction = null;\n  var coordinateCache = this.coordinateCache_;\n  var viewRotation = this.viewRotation_;\n\n  var state = /** @type {olx.render.State} */ ({\n    context: context,\n    pixelRatio: this.pixelRatio,\n    resolution: this.resolution,\n    rotation: viewRotation\n  });\n\n  // When the batch size gets too big, performance decreases. 200 is a good\n  // balance between batch size and number of fill/stroke instructions.\n  var batchSize =\n      this.instructions != instructions || this.overlaps ? 0 : 200;\n  while (i < ii) {\n    var instruction = instructions[i];\n    var type = /** @type {ol.render.canvas.Instruction} */ (instruction[0]);\n    var /** @type {ol.Feature|ol.render.Feature} */ feature, x, y;\n    switch (type) {\n      case _ol_render_canvas_Instruction_.BEGIN_GEOMETRY:\n        feature = /** @type {ol.Feature|ol.render.Feature} */ (instruction[1]);\n        if ((skipFeatures &&\n            skippedFeaturesHash[_ol_.getUid(feature).toString()]) ||\n            !feature.getGeometry()) {\n          i = /** @type {number} */ (instruction[2]);\n        } else if (opt_hitExtent !== undefined && !_ol_extent_.intersects(\n            opt_hitExtent, feature.getGeometry().getExtent())) {\n          i = /** @type {number} */ (instruction[2]) + 1;\n        } else {\n          ++i;\n        }\n        break;\n      case _ol_render_canvas_Instruction_.BEGIN_PATH:\n        if (pendingFill > batchSize) {\n          this.fill_(context);\n          pendingFill = 0;\n        }\n        if (pendingStroke > batchSize) {\n          context.stroke();\n          pendingStroke = 0;\n        }\n        if (!pendingFill && !pendingStroke) {\n          context.beginPath();\n          prevX = prevY = NaN;\n        }\n        ++i;\n        break;\n      case _ol_render_canvas_Instruction_.CIRCLE:\n        d = /** @type {number} */ (instruction[1]);\n        var x1 = pixelCoordinates[d];\n        var y1 = pixelCoordinates[d + 1];\n        var x2 = pixelCoordinates[d + 2];\n        var y2 = pixelCoordinates[d + 3];\n        var dx = x2 - x1;\n        var dy = y2 - y1;\n        var r = Math.sqrt(dx * dx + dy * dy);\n        context.moveTo(x1 + r, y1);\n        context.arc(x1, y1, r, 0, 2 * Math.PI, true);\n        ++i;\n        break;\n      case _ol_render_canvas_Instruction_.CLOSE_PATH:\n        context.closePath();\n        ++i;\n        break;\n      case _ol_render_canvas_Instruction_.CUSTOM:\n        d = /** @type {number} */ (instruction[1]);\n        dd = instruction[2];\n        var geometry = /** @type {ol.geom.SimpleGeometry} */ (instruction[3]);\n        var renderer = instruction[4];\n        var fn = instruction.length == 6 ? instruction[5] : undefined;\n        state.geometry = geometry;\n        state.feature = feature;\n        if (!(i in coordinateCache)) {\n          coordinateCache[i] = [];\n        }\n        var coords = coordinateCache[i];\n        if (fn) {\n          fn(pixelCoordinates, d, dd, 2, coords);\n        } else {\n          coords[0] = pixelCoordinates[d];\n          coords[1] = pixelCoordinates[d + 1];\n          coords.length = 2;\n        }\n        renderer(coords, state);\n        ++i;\n        break;\n      case _ol_render_canvas_Instruction_.DRAW_IMAGE:\n        d = /** @type {number} */ (instruction[1]);\n        dd = /** @type {number} */ (instruction[2]);\n        image =  /** @type {HTMLCanvasElement|HTMLVideoElement|Image} */\n            (instruction[3]);\n        // Remaining arguments in DRAW_IMAGE are in alphabetical order\n        anchorX = /** @type {number} */ (instruction[4]);\n        anchorY = /** @type {number} */ (instruction[5]);\n        declutterGroup = featureCallback ? null : /** @type {ol.DeclutterGroup} */ (instruction[6]);\n        var height = /** @type {number} */ (instruction[7]);\n        var opacity = /** @type {number} */ (instruction[8]);\n        var originX = /** @type {number} */ (instruction[9]);\n        var originY = /** @type {number} */ (instruction[10]);\n        var rotateWithView = /** @type {boolean} */ (instruction[11]);\n        var rotation = /** @type {number} */ (instruction[12]);\n        var scale = /** @type {number} */ (instruction[13]);\n        var snapToPixel = /** @type {boolean} */ (instruction[14]);\n        var width = /** @type {number} */ (instruction[15]);\n\n        var padding, backgroundFill, backgroundStroke;\n        if (instruction.length > 16) {\n          padding = /** @type {Array.<number>} */ (instruction[16]);\n          backgroundFill = /** @type {boolean} */ (instruction[17]);\n          backgroundStroke = /** @type {boolean} */ (instruction[18]);\n        } else {\n          padding = _ol_render_canvas_.defaultPadding;\n          backgroundFill = backgroundStroke = false;\n        }\n\n        if (rotateWithView) {\n          rotation += viewRotation;\n        }\n        for (; d < dd; d += 2) {\n          this.replayImage_(context,\n              pixelCoordinates[d], pixelCoordinates[d + 1], image, anchorX, anchorY,\n              declutterGroup, height, opacity, originX, originY, rotation, scale,\n              snapToPixel, width, padding,\n              backgroundFill ? /** @type {Array.<*>} */ (lastFillInstruction) : null,\n              backgroundStroke ? /** @type {Array.<*>} */ (lastStrokeInstruction) : null);\n        }\n        this.renderDeclutter_(declutterGroup, feature);\n        ++i;\n        break;\n      case _ol_render_canvas_Instruction_.DRAW_CHARS:\n        var begin = /** @type {number} */ (instruction[1]);\n        var end = /** @type {number} */ (instruction[2]);\n        var baseline = /** @type {number} */ (instruction[3]);\n        declutterGroup = featureCallback ? null : /** @type {ol.DeclutterGroup} */ (instruction[4]);\n        var overflow = /** @type {number} */ (instruction[5]);\n        var fillKey = /** @type {string} */ (instruction[6]);\n        var maxAngle = /** @type {number} */ (instruction[7]);\n        var measure = /** @type {function(string):number} */ (instruction[8]);\n        var offsetY = /** @type {number} */ (instruction[9]);\n        var strokeKey = /** @type {string} */ (instruction[10]);\n        var strokeWidth =  /** @type {number} */ (instruction[11]);\n        var text = /** @type {string} */ (instruction[12]);\n        var textKey = /** @type {string} */ (instruction[13]);\n        var textScale = /** @type {number} */ (instruction[14]);\n\n        var pathLength = _ol_geom_flat_length_.lineString(pixelCoordinates, begin, end, 2);\n        var textLength = measure(text);\n        if (overflow || textLength <= pathLength) {\n          var textAlign = /** @type {ol.render.canvas.TextReplay} */ (this).textStates[textKey].textAlign;\n          var startM = (pathLength - textLength) * _ol_render_replay_.TEXT_ALIGN[textAlign];\n          var parts = _ol_geom_flat_textpath_.lineString(\n              pixelCoordinates, begin, end, 2, text, measure, startM, maxAngle);\n          if (parts) {\n            var c, cc, chars, label, part;\n            if (strokeKey) {\n              for (c = 0, cc = parts.length; c < cc; ++c) {\n                part = parts[c]; // x, y, anchorX, rotation, chunk\n                chars = /** @type {string} */ (part[4]);\n                label = /** @type {ol.render.canvas.TextReplay} */ (this).getImage(chars, textKey, '', strokeKey);\n                anchorX = /** @type {number} */ (part[2]) + strokeWidth;\n                anchorY = baseline * label.height + (0.5 - baseline) * 2 * strokeWidth - offsetY;\n                this.replayImage_(context,\n                    /** @type {number} */ (part[0]), /** @type {number} */ (part[1]), label,\n                    anchorX, anchorY, declutterGroup, label.height, 1, 0, 0,\n                    /** @type {number} */ (part[3]), textScale, false, label.width,\n                    _ol_render_canvas_.defaultPadding, null, null);\n              }\n            }\n            if (fillKey) {\n              for (c = 0, cc = parts.length; c < cc; ++c) {\n                part = parts[c]; // x, y, anchorX, rotation, chunk\n                chars = /** @type {string} */ (part[4]);\n                label = /** @type {ol.render.canvas.TextReplay} */ (this).getImage(chars, textKey, fillKey, '');\n                anchorX = /** @type {number} */ (part[2]);\n                anchorY = baseline * label.height - offsetY;\n                this.replayImage_(context,\n                    /** @type {number} */ (part[0]), /** @type {number} */ (part[1]), label,\n                    anchorX, anchorY, declutterGroup, label.height, 1, 0, 0,\n                    /** @type {number} */ (part[3]), textScale, false, label.width,\n                    _ol_render_canvas_.defaultPadding, null, null);\n              }\n            }\n          }\n        }\n        this.renderDeclutter_(declutterGroup, feature);\n        ++i;\n        break;\n      case _ol_render_canvas_Instruction_.END_GEOMETRY:\n        if (featureCallback !== undefined) {\n          feature = /** @type {ol.Feature|ol.render.Feature} */ (instruction[1]);\n          var result = featureCallback(feature);\n          if (result) {\n            return result;\n          }\n        }\n        ++i;\n        break;\n      case _ol_render_canvas_Instruction_.FILL:\n        if (batchSize) {\n          pendingFill++;\n        } else {\n          this.fill_(context);\n        }\n        ++i;\n        break;\n      case _ol_render_canvas_Instruction_.MOVE_TO_LINE_TO:\n        d = /** @type {number} */ (instruction[1]);\n        dd = /** @type {number} */ (instruction[2]);\n        x = pixelCoordinates[d];\n        y = pixelCoordinates[d + 1];\n        roundX = (x + 0.5) | 0;\n        roundY = (y + 0.5) | 0;\n        if (roundX !== prevX || roundY !== prevY) {\n          context.moveTo(x, y);\n          prevX = roundX;\n          prevY = roundY;\n        }\n        for (d += 2; d < dd; d += 2) {\n          x = pixelCoordinates[d];\n          y = pixelCoordinates[d + 1];\n          roundX = (x + 0.5) | 0;\n          roundY = (y + 0.5) | 0;\n          if (d == dd - 2 || roundX !== prevX || roundY !== prevY) {\n            context.lineTo(x, y);\n            prevX = roundX;\n            prevY = roundY;\n          }\n        }\n        ++i;\n        break;\n      case _ol_render_canvas_Instruction_.SET_FILL_STYLE:\n        lastFillInstruction = instruction;\n        this.fillOrigin_ = instruction[2];\n\n        if (pendingFill) {\n          this.fill_(context);\n          pendingFill = 0;\n          if (pendingStroke) {\n            context.stroke();\n            pendingStroke = 0;\n          }\n        }\n\n        context.fillStyle = /** @type {ol.ColorLike} */ (instruction[1]);\n        ++i;\n        break;\n      case _ol_render_canvas_Instruction_.SET_STROKE_STYLE:\n        lastStrokeInstruction = instruction;\n        if (pendingStroke) {\n          context.stroke();\n          pendingStroke = 0;\n        }\n        this.setStrokeStyle_(context, /** @type {Array.<*>} */ (instruction));\n        ++i;\n        break;\n      case _ol_render_canvas_Instruction_.STROKE:\n        if (batchSize) {\n          pendingStroke++;\n        } else {\n          context.stroke();\n        }\n        ++i;\n        break;\n      default:\n        ++i; // consume the instruction anyway, to avoid an infinite loop\n        break;\n    }\n  }\n  if (pendingFill) {\n    this.fill_(context);\n  }\n  if (pendingStroke) {\n    context.stroke();\n  }\n  return undefined;\n};\n\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {ol.Transform} transform Transform.\n * @param {number} viewRotation View rotation.\n * @param {Object.<string, boolean>} skippedFeaturesHash Ids of features\n *     to skip.\n */\n_ol_render_canvas_Replay_.prototype.replay = function(\n    context, transform, viewRotation, skippedFeaturesHash) {\n  this.viewRotation_ = viewRotation;\n  this.replay_(context, transform,\n      skippedFeaturesHash, this.instructions, undefined, undefined);\n};\n\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {ol.Transform} transform Transform.\n * @param {number} viewRotation View rotation.\n * @param {Object.<string, boolean>} skippedFeaturesHash Ids of features\n *     to skip.\n * @param {function((ol.Feature|ol.render.Feature)): T=} opt_featureCallback\n *     Feature callback.\n * @param {ol.Extent=} opt_hitExtent Only check features that intersect this\n *     extent.\n * @return {T|undefined} Callback result.\n * @template T\n */\n_ol_render_canvas_Replay_.prototype.replayHitDetection = function(\n    context, transform, viewRotation, skippedFeaturesHash,\n    opt_featureCallback, opt_hitExtent) {\n  this.viewRotation_ = viewRotation;\n  return this.replay_(context, transform, skippedFeaturesHash,\n      this.hitDetectionInstructions, opt_featureCallback, opt_hitExtent);\n};\n\n\n/**\n * Reverse the hit detection instructions.\n */\n_ol_render_canvas_Replay_.prototype.reverseHitDetectionInstructions = function() {\n  var hitDetectionInstructions = this.hitDetectionInstructions;\n  // step 1 - reverse array\n  hitDetectionInstructions.reverse();\n  // step 2 - reverse instructions within geometry blocks\n  var i;\n  var n = hitDetectionInstructions.length;\n  var instruction;\n  var type;\n  var begin = -1;\n  for (i = 0; i < n; ++i) {\n    instruction = hitDetectionInstructions[i];\n    type = /** @type {ol.render.canvas.Instruction} */ (instruction[0]);\n    if (type == _ol_render_canvas_Instruction_.END_GEOMETRY) {\n      begin = i;\n    } else if (type == _ol_render_canvas_Instruction_.BEGIN_GEOMETRY) {\n      instruction[2] = i;\n      _ol_array_.reverseSubArray(this.hitDetectionInstructions, begin, i);\n      begin = -1;\n    }\n  }\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_canvas_Replay_.prototype.setFillStrokeStyle = function(fillStyle, strokeStyle) {\n  var state = this.state;\n  if (fillStyle) {\n    var fillStyleColor = fillStyle.getColor();\n    state.fillStyle = _ol_colorlike_.asColorLike(fillStyleColor ?\n      fillStyleColor : _ol_render_canvas_.defaultFillStyle);\n  } else {\n    state.fillStyle = undefined;\n  }\n  if (strokeStyle) {\n    var strokeStyleColor = strokeStyle.getColor();\n    state.strokeStyle = _ol_colorlike_.asColorLike(strokeStyleColor ?\n      strokeStyleColor : _ol_render_canvas_.defaultStrokeStyle);\n    var strokeStyleLineCap = strokeStyle.getLineCap();\n    state.lineCap = strokeStyleLineCap !== undefined ?\n      strokeStyleLineCap : _ol_render_canvas_.defaultLineCap;\n    var strokeStyleLineDash = strokeStyle.getLineDash();\n    state.lineDash = strokeStyleLineDash ?\n      strokeStyleLineDash.slice() : _ol_render_canvas_.defaultLineDash;\n    var strokeStyleLineDashOffset = strokeStyle.getLineDashOffset();\n    state.lineDashOffset = strokeStyleLineDashOffset ?\n      strokeStyleLineDashOffset : _ol_render_canvas_.defaultLineDashOffset;\n    var strokeStyleLineJoin = strokeStyle.getLineJoin();\n    state.lineJoin = strokeStyleLineJoin !== undefined ?\n      strokeStyleLineJoin : _ol_render_canvas_.defaultLineJoin;\n    var strokeStyleWidth = strokeStyle.getWidth();\n    state.lineWidth = strokeStyleWidth !== undefined ?\n      strokeStyleWidth : _ol_render_canvas_.defaultLineWidth;\n    var strokeStyleMiterLimit = strokeStyle.getMiterLimit();\n    state.miterLimit = strokeStyleMiterLimit !== undefined ?\n      strokeStyleMiterLimit : _ol_render_canvas_.defaultMiterLimit;\n\n    if (state.lineWidth > this.maxLineWidth) {\n      this.maxLineWidth = state.lineWidth;\n      // invalidate the buffered max extent cache\n      this.bufferedMaxExtent_ = null;\n    }\n  } else {\n    state.strokeStyle = undefined;\n    state.lineCap = undefined;\n    state.lineDash = null;\n    state.lineDashOffset = undefined;\n    state.lineJoin = undefined;\n    state.lineWidth = undefined;\n    state.miterLimit = undefined;\n  }\n};\n\n\n/**\n * @param {ol.CanvasFillStrokeState} state State.\n * @param {ol.geom.Geometry|ol.render.Feature} geometry Geometry.\n */\n_ol_render_canvas_Replay_.prototype.applyFill = function(state, geometry) {\n  var fillStyle = state.fillStyle;\n  var fillInstruction = [_ol_render_canvas_Instruction_.SET_FILL_STYLE, fillStyle];\n  if (typeof fillStyle !== 'string') {\n    var fillExtent = geometry.getExtent();\n    fillInstruction.push([fillExtent[0], fillExtent[3]]);\n  }\n  this.instructions.push(fillInstruction);\n};\n\n\n/**\n * @param {ol.CanvasFillStrokeState} state State.\n */\n_ol_render_canvas_Replay_.prototype.applyStroke = function(state) {\n  this.instructions.push([\n    _ol_render_canvas_Instruction_.SET_STROKE_STYLE,\n    state.strokeStyle, state.lineWidth * this.pixelRatio, state.lineCap,\n    state.lineJoin, state.miterLimit,\n    this.applyPixelRatio(state.lineDash), state.lineDashOffset * this.pixelRatio\n  ]);\n};\n\n\n/**\n * @param {ol.CanvasFillStrokeState} state State.\n * @param {function(this:ol.render.canvas.Replay, ol.CanvasFillStrokeState, (ol.geom.Geometry|ol.render.Feature))} applyFill Apply fill.\n * @param {ol.geom.Geometry|ol.render.Feature} geometry Geometry.\n */\n_ol_render_canvas_Replay_.prototype.updateFillStyle = function(state, applyFill, geometry) {\n  var fillStyle = state.fillStyle;\n  if (typeof fillStyle !== 'string' || state.currentFillStyle != fillStyle) {\n    applyFill.call(this, state, geometry);\n    state.currentFillStyle = fillStyle;\n  }\n};\n\n\n/**\n * @param {ol.CanvasFillStrokeState} state State.\n * @param {function(this:ol.render.canvas.Replay, ol.CanvasFillStrokeState)} applyStroke Apply stroke.\n */\n_ol_render_canvas_Replay_.prototype.updateStrokeStyle = function(state, applyStroke) {\n  var strokeStyle = state.strokeStyle;\n  var lineCap = state.lineCap;\n  var lineDash = state.lineDash;\n  var lineDashOffset = state.lineDashOffset;\n  var lineJoin = state.lineJoin;\n  var lineWidth = state.lineWidth;\n  var miterLimit = state.miterLimit;\n  if (state.currentStrokeStyle != strokeStyle ||\n      state.currentLineCap != lineCap ||\n      (lineDash != state.currentLineDash && !_ol_array_.equals(state.currentLineDash, lineDash)) ||\n      state.currentLineDashOffset != lineDashOffset ||\n      state.currentLineJoin != lineJoin ||\n      state.currentLineWidth != lineWidth ||\n      state.currentMiterLimit != miterLimit) {\n    applyStroke.call(this, state);\n    state.currentStrokeStyle = strokeStyle;\n    state.currentLineCap = lineCap;\n    state.currentLineDash = lineDash;\n    state.currentLineDashOffset = lineDashOffset;\n    state.currentLineJoin = lineJoin;\n    state.currentLineWidth = lineWidth;\n    state.currentMiterLimit = miterLimit;\n  }\n};\n\n\n/**\n * @param {ol.geom.Geometry|ol.render.Feature} geometry Geometry.\n * @param {ol.Feature|ol.render.Feature} feature Feature.\n */\n_ol_render_canvas_Replay_.prototype.endGeometry = function(geometry, feature) {\n  this.beginGeometryInstruction1_[2] = this.instructions.length;\n  this.beginGeometryInstruction1_ = null;\n  this.beginGeometryInstruction2_[2] = this.hitDetectionInstructions.length;\n  this.beginGeometryInstruction2_ = null;\n  var endGeometryInstruction =\n      [_ol_render_canvas_Instruction_.END_GEOMETRY, feature];\n  this.instructions.push(endGeometryInstruction);\n  this.hitDetectionInstructions.push(endGeometryInstruction);\n};\n\n\n/**\n * FIXME empty description for jsdoc\n */\n_ol_render_canvas_Replay_.prototype.finish = _ol_.nullFunction;\n\n\n/**\n * Get the buffered rendering extent.  Rendering will be clipped to the extent\n * provided to the constructor.  To account for symbolizers that may intersect\n * this extent, we calculate a buffered extent (e.g. based on stroke width).\n * @return {ol.Extent} The buffered rendering extent.\n * @protected\n */\n_ol_render_canvas_Replay_.prototype.getBufferedMaxExtent = function() {\n  if (!this.bufferedMaxExtent_) {\n    this.bufferedMaxExtent_ = _ol_extent_.clone(this.maxExtent);\n    if (this.maxLineWidth > 0) {\n      var width = this.resolution * (this.maxLineWidth + 1) / 2;\n      _ol_extent_.buffer(this.bufferedMaxExtent_, width, this.bufferedMaxExtent_);\n    }\n  }\n  return this.bufferedMaxExtent_;\n};\nexport default _ol_render_canvas_Replay_;\n","import _ol_ from '../../index.js';\nimport _ol_render_canvas_Instruction_ from '../canvas/instruction.js';\nimport _ol_render_canvas_Replay_ from '../canvas/replay.js';\n\n/**\n * @constructor\n * @extends {ol.render.canvas.Replay}\n * @param {number} tolerance Tolerance.\n * @param {ol.Extent} maxExtent Maximum extent.\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @param {boolean} overlaps The replay can have overlapping geometries.\n * @param {?} declutterTree Declutter tree.\n * @struct\n */\nvar _ol_render_canvas_ImageReplay_ = function(\n    tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree) {\n  _ol_render_canvas_Replay_.call(this,\n      tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree);\n\n  /**\n   * @private\n   * @type {ol.DeclutterGroup}\n   */\n  this.declutterGroup_ = null;\n\n  /**\n   * @private\n   * @type {HTMLCanvasElement|HTMLVideoElement|Image}\n   */\n  this.hitDetectionImage_ = null;\n\n  /**\n   * @private\n   * @type {HTMLCanvasElement|HTMLVideoElement|Image}\n   */\n  this.image_ = null;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.anchorX_ = undefined;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.anchorY_ = undefined;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.height_ = undefined;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.opacity_ = undefined;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.originX_ = undefined;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.originY_ = undefined;\n\n  /**\n   * @private\n   * @type {boolean|undefined}\n   */\n  this.rotateWithView_ = undefined;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.rotation_ = undefined;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.scale_ = undefined;\n\n  /**\n   * @private\n   * @type {boolean|undefined}\n   */\n  this.snapToPixel_ = undefined;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.width_ = undefined;\n\n};\n\n_ol_.inherits(_ol_render_canvas_ImageReplay_, _ol_render_canvas_Replay_);\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @private\n * @return {number} My end.\n */\n_ol_render_canvas_ImageReplay_.prototype.drawCoordinates_ = function(flatCoordinates, offset, end, stride) {\n  return this.appendFlatCoordinates(\n      flatCoordinates, offset, end, stride, false, false);\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_canvas_ImageReplay_.prototype.drawPoint = function(pointGeometry, feature) {\n  if (!this.image_) {\n    return;\n  }\n  this.beginGeometry(pointGeometry, feature);\n  var flatCoordinates = pointGeometry.getFlatCoordinates();\n  var stride = pointGeometry.getStride();\n  var myBegin = this.coordinates.length;\n  var myEnd = this.drawCoordinates_(\n      flatCoordinates, 0, flatCoordinates.length, stride);\n  this.instructions.push([\n    _ol_render_canvas_Instruction_.DRAW_IMAGE, myBegin, myEnd, this.image_,\n    // Remaining arguments to DRAW_IMAGE are in alphabetical order\n    this.anchorX_, this.anchorY_, this.declutterGroup_, this.height_, this.opacity_,\n    this.originX_, this.originY_, this.rotateWithView_, this.rotation_,\n    this.scale_ * this.pixelRatio, this.snapToPixel_, this.width_\n  ]);\n  this.hitDetectionInstructions.push([\n    _ol_render_canvas_Instruction_.DRAW_IMAGE, myBegin, myEnd,\n    this.hitDetectionImage_,\n    // Remaining arguments to DRAW_IMAGE are in alphabetical order\n    this.anchorX_, this.anchorY_, this.declutterGroup_, this.height_, this.opacity_,\n    this.originX_, this.originY_, this.rotateWithView_, this.rotation_,\n    this.scale_, this.snapToPixel_, this.width_\n  ]);\n  this.endGeometry(pointGeometry, feature);\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_canvas_ImageReplay_.prototype.drawMultiPoint = function(multiPointGeometry, feature) {\n  if (!this.image_) {\n    return;\n  }\n  this.beginGeometry(multiPointGeometry, feature);\n  var flatCoordinates = multiPointGeometry.getFlatCoordinates();\n  var stride = multiPointGeometry.getStride();\n  var myBegin = this.coordinates.length;\n  var myEnd = this.drawCoordinates_(\n      flatCoordinates, 0, flatCoordinates.length, stride);\n  this.instructions.push([\n    _ol_render_canvas_Instruction_.DRAW_IMAGE, myBegin, myEnd, this.image_,\n    // Remaining arguments to DRAW_IMAGE are in alphabetical order\n    this.anchorX_, this.anchorY_, this.declutterGroup_, this.height_, this.opacity_,\n    this.originX_, this.originY_, this.rotateWithView_, this.rotation_,\n    this.scale_ * this.pixelRatio, this.snapToPixel_, this.width_\n  ]);\n  this.hitDetectionInstructions.push([\n    _ol_render_canvas_Instruction_.DRAW_IMAGE, myBegin, myEnd,\n    this.hitDetectionImage_,\n    // Remaining arguments to DRAW_IMAGE are in alphabetical order\n    this.anchorX_, this.anchorY_, this.declutterGroup_, this.height_, this.opacity_,\n    this.originX_, this.originY_, this.rotateWithView_, this.rotation_,\n    this.scale_, this.snapToPixel_, this.width_\n  ]);\n  this.endGeometry(multiPointGeometry, feature);\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_canvas_ImageReplay_.prototype.finish = function() {\n  this.reverseHitDetectionInstructions();\n  // FIXME this doesn't really protect us against further calls to draw*Geometry\n  this.anchorX_ = undefined;\n  this.anchorY_ = undefined;\n  this.hitDetectionImage_ = null;\n  this.image_ = null;\n  this.height_ = undefined;\n  this.scale_ = undefined;\n  this.opacity_ = undefined;\n  this.originX_ = undefined;\n  this.originY_ = undefined;\n  this.rotateWithView_ = undefined;\n  this.rotation_ = undefined;\n  this.snapToPixel_ = undefined;\n  this.width_ = undefined;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_canvas_ImageReplay_.prototype.setImageStyle = function(imageStyle, declutterGroup) {\n  var anchor = imageStyle.getAnchor();\n  var size = imageStyle.getSize();\n  var hitDetectionImage = imageStyle.getHitDetectionImage(1);\n  var image = imageStyle.getImage(1);\n  var origin = imageStyle.getOrigin();\n  this.anchorX_ = anchor[0];\n  this.anchorY_ = anchor[1];\n  this.declutterGroup_ = /** @type {ol.DeclutterGroup} */ (declutterGroup);\n  this.hitDetectionImage_ = hitDetectionImage;\n  this.image_ = image;\n  this.height_ = size[1];\n  this.opacity_ = imageStyle.getOpacity();\n  this.originX_ = origin[0];\n  this.originY_ = origin[1];\n  this.rotateWithView_ = imageStyle.getRotateWithView();\n  this.rotation_ = imageStyle.getRotation();\n  this.scale_ = imageStyle.getScale();\n  this.snapToPixel_ = imageStyle.getSnapToPixel();\n  this.width_ = size[0];\n};\nexport default _ol_render_canvas_ImageReplay_;\n","import _ol_ from '../../index.js';\nimport _ol_render_canvas_Instruction_ from '../canvas/instruction.js';\nimport _ol_render_canvas_Replay_ from '../canvas/replay.js';\n\n/**\n * @constructor\n * @extends {ol.render.canvas.Replay}\n * @param {number} tolerance Tolerance.\n * @param {ol.Extent} maxExtent Maximum extent.\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @param {boolean} overlaps The replay can have overlapping geometries.\n * @param {?} declutterTree Declutter tree.\n * @struct\n */\nvar _ol_render_canvas_LineStringReplay_ = function(\n    tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree) {\n  _ol_render_canvas_Replay_.call(this,\n      tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree);\n};\n\n_ol_.inherits(_ol_render_canvas_LineStringReplay_, _ol_render_canvas_Replay_);\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @private\n * @return {number} end.\n */\n_ol_render_canvas_LineStringReplay_.prototype.drawFlatCoordinates_ = function(flatCoordinates, offset, end, stride) {\n  var myBegin = this.coordinates.length;\n  var myEnd = this.appendFlatCoordinates(\n      flatCoordinates, offset, end, stride, false, false);\n  var moveToLineToInstruction =\n      [_ol_render_canvas_Instruction_.MOVE_TO_LINE_TO, myBegin, myEnd];\n  this.instructions.push(moveToLineToInstruction);\n  this.hitDetectionInstructions.push(moveToLineToInstruction);\n  return end;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_canvas_LineStringReplay_.prototype.drawLineString = function(lineStringGeometry, feature) {\n  var state = this.state;\n  var strokeStyle = state.strokeStyle;\n  var lineWidth = state.lineWidth;\n  if (strokeStyle === undefined || lineWidth === undefined) {\n    return;\n  }\n  this.updateStrokeStyle(state, this.applyStroke);\n  this.beginGeometry(lineStringGeometry, feature);\n  this.hitDetectionInstructions.push([\n    _ol_render_canvas_Instruction_.SET_STROKE_STYLE,\n    state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n    state.miterLimit, state.lineDash, state.lineDashOffset\n  ], [\n    _ol_render_canvas_Instruction_.BEGIN_PATH\n  ]);\n  var flatCoordinates = lineStringGeometry.getFlatCoordinates();\n  var stride = lineStringGeometry.getStride();\n  this.drawFlatCoordinates_(flatCoordinates, 0, flatCoordinates.length, stride);\n  this.hitDetectionInstructions.push([_ol_render_canvas_Instruction_.STROKE]);\n  this.endGeometry(lineStringGeometry, feature);\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_canvas_LineStringReplay_.prototype.drawMultiLineString = function(multiLineStringGeometry, feature) {\n  var state = this.state;\n  var strokeStyle = state.strokeStyle;\n  var lineWidth = state.lineWidth;\n  if (strokeStyle === undefined || lineWidth === undefined) {\n    return;\n  }\n  this.updateStrokeStyle(state, this.applyStroke);\n  this.beginGeometry(multiLineStringGeometry, feature);\n  this.hitDetectionInstructions.push([\n    _ol_render_canvas_Instruction_.SET_STROKE_STYLE,\n    state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n    state.miterLimit, state.lineDash, state.lineDashOffset\n  ], [\n    _ol_render_canvas_Instruction_.BEGIN_PATH\n  ]);\n  var ends = multiLineStringGeometry.getEnds();\n  var flatCoordinates = multiLineStringGeometry.getFlatCoordinates();\n  var stride = multiLineStringGeometry.getStride();\n  var offset = 0;\n  var i, ii;\n  for (i = 0, ii = ends.length; i < ii; ++i) {\n    offset = this.drawFlatCoordinates_(\n        flatCoordinates, offset, ends[i], stride);\n  }\n  this.hitDetectionInstructions.push([_ol_render_canvas_Instruction_.STROKE]);\n  this.endGeometry(multiLineStringGeometry, feature);\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_canvas_LineStringReplay_.prototype.finish = function() {\n  var state = this.state;\n  if (state.lastStroke != undefined && state.lastStroke != this.coordinates.length) {\n    this.instructions.push([_ol_render_canvas_Instruction_.STROKE]);\n  }\n  this.reverseHitDetectionInstructions();\n  this.state = null;\n};\n\n\n/**\n * @inheritDoc.\n */\n_ol_render_canvas_LineStringReplay_.prototype.applyStroke = function(state) {\n  if (state.lastStroke != undefined && state.lastStroke != this.coordinates.length) {\n    this.instructions.push([_ol_render_canvas_Instruction_.STROKE]);\n    state.lastStroke = this.coordinates.length;\n  }\n  state.lastStroke = 0;\n  _ol_render_canvas_Replay_.prototype.applyStroke.call(this, state);\n  this.instructions.push([_ol_render_canvas_Instruction_.BEGIN_PATH]);\n};\nexport default _ol_render_canvas_LineStringReplay_;\n","import _ol_ from '../../index.js';\nimport _ol_color_ from '../../color.js';\nimport _ol_geom_flat_simplify_ from '../../geom/flat/simplify.js';\nimport _ol_render_canvas_ from '../canvas.js';\nimport _ol_render_canvas_Instruction_ from '../canvas/instruction.js';\nimport _ol_render_canvas_Replay_ from '../canvas/replay.js';\n\n/**\n * @constructor\n * @extends {ol.render.canvas.Replay}\n * @param {number} tolerance Tolerance.\n * @param {ol.Extent} maxExtent Maximum extent.\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @param {boolean} overlaps The replay can have overlapping geometries.\n * @param {?} declutterTree Declutter tree.\n * @struct\n */\nvar _ol_render_canvas_PolygonReplay_ = function(\n    tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree) {\n  _ol_render_canvas_Replay_.call(this,\n      tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree);\n};\n\n_ol_.inherits(_ol_render_canvas_PolygonReplay_, _ol_render_canvas_Replay_);\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<number>} ends Ends.\n * @param {number} stride Stride.\n * @private\n * @return {number} End.\n */\n_ol_render_canvas_PolygonReplay_.prototype.drawFlatCoordinatess_ = function(flatCoordinates, offset, ends, stride) {\n  var state = this.state;\n  var fill = state.fillStyle !== undefined;\n  var stroke = state.strokeStyle != undefined;\n  var numEnds = ends.length;\n  var beginPathInstruction = [_ol_render_canvas_Instruction_.BEGIN_PATH];\n  this.instructions.push(beginPathInstruction);\n  this.hitDetectionInstructions.push(beginPathInstruction);\n  for (var i = 0; i < numEnds; ++i) {\n    var end = ends[i];\n    var myBegin = this.coordinates.length;\n    var myEnd = this.appendFlatCoordinates(\n        flatCoordinates, offset, end, stride, true, !stroke);\n    var moveToLineToInstruction =\n        [_ol_render_canvas_Instruction_.MOVE_TO_LINE_TO, myBegin, myEnd];\n    this.instructions.push(moveToLineToInstruction);\n    this.hitDetectionInstructions.push(moveToLineToInstruction);\n    if (stroke) {\n      // Performance optimization: only call closePath() when we have a stroke.\n      // Otherwise the ring is closed already (see appendFlatCoordinates above).\n      var closePathInstruction = [_ol_render_canvas_Instruction_.CLOSE_PATH];\n      this.instructions.push(closePathInstruction);\n      this.hitDetectionInstructions.push(closePathInstruction);\n    }\n    offset = end;\n  }\n  var fillInstruction = [_ol_render_canvas_Instruction_.FILL];\n  this.hitDetectionInstructions.push(fillInstruction);\n  if (fill) {\n    this.instructions.push(fillInstruction);\n  }\n  if (stroke) {\n    var strokeInstruction = [_ol_render_canvas_Instruction_.STROKE];\n    this.instructions.push(strokeInstruction);\n    this.hitDetectionInstructions.push(strokeInstruction);\n  }\n  return offset;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_canvas_PolygonReplay_.prototype.drawCircle = function(circleGeometry, feature) {\n  var state = this.state;\n  var fillStyle = state.fillStyle;\n  var strokeStyle = state.strokeStyle;\n  if (fillStyle === undefined && strokeStyle === undefined) {\n    return;\n  }\n  this.setFillStrokeStyles_(circleGeometry);\n  this.beginGeometry(circleGeometry, feature);\n  // always fill the circle for hit detection\n  this.hitDetectionInstructions.push([\n    _ol_render_canvas_Instruction_.SET_FILL_STYLE,\n    _ol_color_.asString(_ol_render_canvas_.defaultFillStyle)\n  ]);\n  if (state.strokeStyle !== undefined) {\n    this.hitDetectionInstructions.push([\n      _ol_render_canvas_Instruction_.SET_STROKE_STYLE,\n      state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n      state.miterLimit, state.lineDash, state.lineDashOffset\n    ]);\n  }\n  var flatCoordinates = circleGeometry.getFlatCoordinates();\n  var stride = circleGeometry.getStride();\n  var myBegin = this.coordinates.length;\n  this.appendFlatCoordinates(\n      flatCoordinates, 0, flatCoordinates.length, stride, false, false);\n  var beginPathInstruction = [_ol_render_canvas_Instruction_.BEGIN_PATH];\n  var circleInstruction = [_ol_render_canvas_Instruction_.CIRCLE, myBegin];\n  this.instructions.push(beginPathInstruction, circleInstruction);\n  this.hitDetectionInstructions.push(beginPathInstruction, circleInstruction);\n  var fillInstruction = [_ol_render_canvas_Instruction_.FILL];\n  this.hitDetectionInstructions.push(fillInstruction);\n  if (state.fillStyle !== undefined) {\n    this.instructions.push(fillInstruction);\n  }\n  if (state.strokeStyle !== undefined) {\n    var strokeInstruction = [_ol_render_canvas_Instruction_.STROKE];\n    this.instructions.push(strokeInstruction);\n    this.hitDetectionInstructions.push(strokeInstruction);\n  }\n  this.endGeometry(circleGeometry, feature);\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_canvas_PolygonReplay_.prototype.drawPolygon = function(polygonGeometry, feature) {\n  var state = this.state;\n  this.setFillStrokeStyles_(polygonGeometry);\n  this.beginGeometry(polygonGeometry, feature);\n  // always fill the polygon for hit detection\n  this.hitDetectionInstructions.push([\n    _ol_render_canvas_Instruction_.SET_FILL_STYLE,\n    _ol_color_.asString(_ol_render_canvas_.defaultFillStyle)]\n  );\n  if (state.strokeStyle !== undefined) {\n    this.hitDetectionInstructions.push([\n      _ol_render_canvas_Instruction_.SET_STROKE_STYLE,\n      state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n      state.miterLimit, state.lineDash, state.lineDashOffset\n    ]);\n  }\n  var ends = polygonGeometry.getEnds();\n  var flatCoordinates = polygonGeometry.getOrientedFlatCoordinates();\n  var stride = polygonGeometry.getStride();\n  this.drawFlatCoordinatess_(flatCoordinates, 0, ends, stride);\n  this.endGeometry(polygonGeometry, feature);\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_canvas_PolygonReplay_.prototype.drawMultiPolygon = function(multiPolygonGeometry, feature) {\n  var state = this.state;\n  var fillStyle = state.fillStyle;\n  var strokeStyle = state.strokeStyle;\n  if (fillStyle === undefined && strokeStyle === undefined) {\n    return;\n  }\n  this.setFillStrokeStyles_(multiPolygonGeometry);\n  this.beginGeometry(multiPolygonGeometry, feature);\n  // always fill the multi-polygon for hit detection\n  this.hitDetectionInstructions.push([\n    _ol_render_canvas_Instruction_.SET_FILL_STYLE,\n    _ol_color_.asString(_ol_render_canvas_.defaultFillStyle)\n  ]);\n  if (state.strokeStyle !== undefined) {\n    this.hitDetectionInstructions.push([\n      _ol_render_canvas_Instruction_.SET_STROKE_STYLE,\n      state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n      state.miterLimit, state.lineDash, state.lineDashOffset\n    ]);\n  }\n  var endss = multiPolygonGeometry.getEndss();\n  var flatCoordinates = multiPolygonGeometry.getOrientedFlatCoordinates();\n  var stride = multiPolygonGeometry.getStride();\n  var offset = 0;\n  var i, ii;\n  for (i = 0, ii = endss.length; i < ii; ++i) {\n    offset = this.drawFlatCoordinatess_(\n        flatCoordinates, offset, endss[i], stride);\n  }\n  this.endGeometry(multiPolygonGeometry, feature);\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_canvas_PolygonReplay_.prototype.finish = function() {\n  this.reverseHitDetectionInstructions();\n  this.state = null;\n  // We want to preserve topology when drawing polygons.  Polygons are\n  // simplified using quantization and point elimination. However, we might\n  // have received a mix of quantized and non-quantized geometries, so ensure\n  // that all are quantized by quantizing all coordinates in the batch.\n  var tolerance = this.tolerance;\n  if (tolerance !== 0) {\n    var coordinates = this.coordinates;\n    var i, ii;\n    for (i = 0, ii = coordinates.length; i < ii; ++i) {\n      coordinates[i] = _ol_geom_flat_simplify_.snap(coordinates[i], tolerance);\n    }\n  }\n};\n\n\n/**\n * @private\n * @param {ol.geom.Geometry|ol.render.Feature} geometry Geometry.\n */\n_ol_render_canvas_PolygonReplay_.prototype.setFillStrokeStyles_ = function(geometry) {\n  var state = this.state;\n  var fillStyle = state.fillStyle;\n  if (fillStyle !== undefined) {\n    this.updateFillStyle(state, this.applyFill, geometry);\n  }\n  if (state.strokeStyle !== undefined) {\n    this.updateStrokeStyle(state, this.applyStroke);\n  }\n};\nexport default _ol_render_canvas_PolygonReplay_;\n","var _ol_geom_flat_straightchunk_ = {};\n\n\n/**\n * @param {number} maxAngle Maximum acceptable angle delta between segments.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {Array.<number>} Start and end of the first suitable chunk of the\n * given `flatCoordinates`.\n */\n_ol_geom_flat_straightchunk_.lineString = function(maxAngle, flatCoordinates, offset, end, stride) {\n  var chunkStart = offset;\n  var chunkEnd = offset;\n  var chunkM = 0;\n  var m = 0;\n  var start = offset;\n  var acos, i, m12, m23, x1, y1, x12, y12, x23, y23;\n  for (i = offset; i < end; i += stride) {\n    var x2 = flatCoordinates[i];\n    var y2 = flatCoordinates[i + 1];\n    if (x1 !== undefined) {\n      x23 = x2 - x1;\n      y23 = y2 - y1;\n      m23 = Math.sqrt(x23 * x23 + y23 * y23);\n      if (x12 !== undefined) {\n        m += m12;\n        acos = Math.acos((x12 * x23 + y12 * y23) / (m12 * m23));\n        if (acos > maxAngle) {\n          if (m > chunkM) {\n            chunkM = m;\n            chunkStart = start;\n            chunkEnd = i;\n          }\n          m = 0;\n          start = i - stride;\n        }\n      }\n      m12 = m23;\n      x12 = x23;\n      y12 = y23;\n    }\n    x1 = x2;\n    y1 = y2;\n  }\n  m += m23;\n  return m > chunkM ? [start, i] : [chunkStart, chunkEnd];\n};\nexport default _ol_geom_flat_straightchunk_;\n","/**\n * Text placement. One of `'point'`, `'line'`. Default is `'point'`. Note that\n * `'line'` requires the underlying geometry to be a {@link ol.geom.LineString},\n * {@link ol.geom.Polygon}, {@link ol.geom.MultiLineString} or\n * {@link ol.geom.MultiPolygon}.\n * @enum {string}\n */\nvar _ol_style_TextPlacement_ = {\n  POINT: 'point',\n  LINE: 'line'\n};\n\nexport default _ol_style_TextPlacement_;\n","import _ol_ from '../../index.js';\nimport _ol_colorlike_ from '../../colorlike.js';\nimport _ol_dom_ from '../../dom.js';\nimport _ol_extent_ from '../../extent.js';\nimport _ol_geom_flat_straightchunk_ from '../../geom/flat/straightchunk.js';\nimport _ol_geom_GeometryType_ from '../../geom/geometrytype.js';\nimport _ol_has_ from '../../has.js';\nimport _ol_render_canvas_ from '../canvas.js';\nimport _ol_render_canvas_Instruction_ from '../canvas/instruction.js';\nimport _ol_render_canvas_Replay_ from '../canvas/replay.js';\nimport _ol_render_replay_ from '../replay.js';\nimport _ol_style_TextPlacement_ from '../../style/textplacement.js';\n\n/**\n * @constructor\n * @extends {ol.render.canvas.Replay}\n * @param {number} tolerance Tolerance.\n * @param {ol.Extent} maxExtent Maximum extent.\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @param {boolean} overlaps The replay can have overlapping geometries.\n * @param {?} declutterTree Declutter tree.\n * @struct\n */\nvar _ol_render_canvas_TextReplay_ = function(\n    tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree) {\n  _ol_render_canvas_Replay_.call(this,\n      tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree);\n\n  /**\n   * @private\n   * @type {ol.DeclutterGroup}\n   */\n  this.declutterGroup_;\n\n  /**\n   * @private\n   * @type {Array.<HTMLCanvasElement>}\n   */\n  this.labels_ = null;\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this.text_ = '';\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.textOffsetX_ = 0;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.textOffsetY_ = 0;\n\n  /**\n   * @private\n   * @type {boolean|undefined}\n   */\n  this.textRotateWithView_ = undefined;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.textRotation_ = 0;\n\n  /**\n   * @private\n   * @type {?ol.CanvasFillState}\n   */\n  this.textFillState_ = null;\n\n  /**\n   * @type {Object.<string, ol.CanvasFillState>}\n   */\n  this.fillStates = {};\n\n  /**\n   * @private\n   * @type {?ol.CanvasStrokeState}\n   */\n  this.textStrokeState_ = null;\n\n  /**\n   * @type {Object.<string, ol.CanvasStrokeState>}\n   */\n  this.strokeStates = {};\n\n  /**\n   * @private\n   * @type {ol.CanvasTextState}\n   */\n  this.textState_ = /** @type {ol.CanvasTextState} */ ({});\n\n  /**\n   * @type {Object.<string, ol.CanvasTextState>}\n   */\n  this.textStates = {};\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this.textKey_ = '';\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this.fillKey_ = '';\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this.strokeKey_ = '';\n\n  /**\n   * @private\n   * @type {Object.<string, Object.<string, number>>}\n   */\n  this.widths_ = {};\n\n  var labelCache = _ol_render_canvas_.labelCache;\n  labelCache.prune();\n\n};\n\n_ol_.inherits(_ol_render_canvas_TextReplay_, _ol_render_canvas_Replay_);\n\n\n/**\n * @param {string} font Font to use for measuring.\n * @param {Array.<string>} lines Lines to measure.\n * @param {Array.<number>} widths Array will be populated with the widths of\n * each line.\n * @return {number} Width of the whole text.\n */\n_ol_render_canvas_TextReplay_.measureTextWidths = function(font, lines, widths) {\n  var numLines = lines.length;\n  var width = 0;\n  var currentWidth, i;\n  for (i = 0; i < numLines; ++i) {\n    currentWidth = _ol_render_canvas_.measureTextWidth(font, lines[i]);\n    width = Math.max(width, currentWidth);\n    widths.push(currentWidth);\n  }\n  return width;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_canvas_TextReplay_.prototype.drawText = function(geometry, feature) {\n  var fillState = this.textFillState_;\n  var strokeState = this.textStrokeState_;\n  var textState = this.textState_;\n  if (this.text_ === '' || !textState || (!fillState && !strokeState)) {\n    return;\n  }\n\n  var begin = this.coordinates.length;\n\n  var geometryType = geometry.getType();\n  var flatCoordinates = null;\n  var end = 2;\n  var stride = 2;\n  var i, ii;\n\n  if (textState.placement === _ol_style_TextPlacement_.LINE) {\n    if (!_ol_extent_.intersects(this.getBufferedMaxExtent(), geometry.getExtent())) {\n      return;\n    }\n    var ends;\n    flatCoordinates = geometry.getFlatCoordinates();\n    stride = geometry.getStride();\n    if (geometryType == _ol_geom_GeometryType_.LINE_STRING) {\n      ends = [flatCoordinates.length];\n    } else if (geometryType == _ol_geom_GeometryType_.MULTI_LINE_STRING) {\n      ends = geometry.getEnds();\n    } else if (geometryType == _ol_geom_GeometryType_.POLYGON) {\n      ends = geometry.getEnds().slice(0, 1);\n    } else if (geometryType == _ol_geom_GeometryType_.MULTI_POLYGON) {\n      var endss = geometry.getEndss();\n      ends = [];\n      for (i = 0, ii = endss.length; i < ii; ++i) {\n        ends.push(endss[i][0]);\n      }\n    }\n    this.beginGeometry(geometry, feature);\n    var textAlign = textState.textAlign;\n    var flatOffset = 0;\n    var flatEnd;\n    for (var o = 0, oo = ends.length; o < oo; ++o) {\n      if (textAlign == undefined) {\n        var range = _ol_geom_flat_straightchunk_.lineString(\n            textState.maxAngle, flatCoordinates, flatOffset, ends[o], stride);\n        flatOffset = range[0];\n        flatEnd = range[1];\n      } else {\n        flatEnd = ends[o];\n      }\n      for (i = flatOffset; i < flatEnd; i += stride) {\n        this.coordinates.push(flatCoordinates[i], flatCoordinates[i + 1]);\n      }\n      end = this.coordinates.length;\n      flatOffset = ends[o];\n      this.drawChars_(begin, end, this.declutterGroup_);\n      begin = end;\n    }\n    this.endGeometry(geometry, feature);\n\n  } else {\n    var label = this.getImage(this.text_, this.textKey_, this.fillKey_, this.strokeKey_);\n    var width = label.width / this.pixelRatio;\n    switch (geometryType) {\n      case _ol_geom_GeometryType_.POINT:\n      case _ol_geom_GeometryType_.MULTI_POINT:\n        flatCoordinates = geometry.getFlatCoordinates();\n        end = flatCoordinates.length;\n        break;\n      case _ol_geom_GeometryType_.LINE_STRING:\n        flatCoordinates = /** @type {ol.geom.LineString} */ (geometry).getFlatMidpoint();\n        break;\n      case _ol_geom_GeometryType_.CIRCLE:\n        flatCoordinates = /** @type {ol.geom.Circle} */ (geometry).getCenter();\n        break;\n      case _ol_geom_GeometryType_.MULTI_LINE_STRING:\n        flatCoordinates = /** @type {ol.geom.MultiLineString} */ (geometry).getFlatMidpoints();\n        end = flatCoordinates.length;\n        break;\n      case _ol_geom_GeometryType_.POLYGON:\n        flatCoordinates = /** @type {ol.geom.Polygon} */ (geometry).getFlatInteriorPoint();\n        if (!textState.overflow && flatCoordinates[2] / this.resolution < width) {\n          return;\n        }\n        stride = 3;\n        break;\n      case _ol_geom_GeometryType_.MULTI_POLYGON:\n        var interiorPoints = /** @type {ol.geom.MultiPolygon} */ (geometry).getFlatInteriorPoints();\n        flatCoordinates = [];\n        for (i = 0, ii = interiorPoints.length; i < ii; i += 3) {\n          if (textState.overflow || interiorPoints[i + 2] / this.resolution >= width) {\n            flatCoordinates.push(interiorPoints[i], interiorPoints[i + 1]);\n          }\n        }\n        end = flatCoordinates.length;\n        if (end == 0) {\n          return;\n        }\n        break;\n      default:\n    }\n    end = this.appendFlatCoordinates(flatCoordinates, 0, end, stride, false, false);\n    this.beginGeometry(geometry, feature);\n    if (textState.backgroundFill || textState.backgroundStroke) {\n      this.setFillStrokeStyle(textState.backgroundFill, textState.backgroundStroke);\n      this.updateFillStyle(this.state, this.applyFill, geometry);\n      this.updateStrokeStyle(this.state, this.applyStroke);\n    }\n    this.drawTextImage_(label, begin, end);\n    this.endGeometry(geometry, feature);\n  }\n};\n\n\n/**\n * @param {string} text Text.\n * @param {string} textKey Text style key.\n * @param {string} fillKey Fill style key.\n * @param {string} strokeKey Stroke style key.\n * @return {HTMLCanvasElement} Image.\n */\n_ol_render_canvas_TextReplay_.prototype.getImage = function(text, textKey, fillKey, strokeKey) {\n  var label;\n  var key = strokeKey + textKey + text + fillKey + this.pixelRatio;\n\n  var labelCache = _ol_render_canvas_.labelCache;\n  if (!labelCache.containsKey(key)) {\n    var strokeState = strokeKey ? this.strokeStates[strokeKey] || this.textStrokeState_ : null;\n    var fillState = fillKey ? this.fillStates[fillKey] || this.textFillState_ : null;\n    var textState = this.textStates[textKey] || this.textState_;\n    var pixelRatio = this.pixelRatio;\n    var scale = textState.scale * pixelRatio;\n    var align =  _ol_render_replay_.TEXT_ALIGN[textState.textAlign || _ol_render_canvas_.defaultTextAlign];\n    var strokeWidth = strokeKey && strokeState.lineWidth ? strokeState.lineWidth : 0;\n\n    var lines = text.split('\\n');\n    var numLines = lines.length;\n    var widths = [];\n    var width = _ol_render_canvas_TextReplay_.measureTextWidths(textState.font, lines, widths);\n    var lineHeight = _ol_render_canvas_.measureTextHeight(textState.font);\n    var height = lineHeight * numLines;\n    var renderWidth = (width + strokeWidth);\n    var context = _ol_dom_.createCanvasContext2D(\n        Math.ceil(renderWidth * scale),\n        Math.ceil((height + strokeWidth) * scale));\n    label = context.canvas;\n    labelCache.set(key, label);\n    if (scale != 1) {\n      context.scale(scale, scale);\n    }\n    context.font = textState.font;\n    if (strokeKey) {\n      context.strokeStyle = strokeState.strokeStyle;\n      context.lineWidth = strokeWidth * (_ol_has_.SAFARI ? scale : 1);\n      context.lineCap = strokeState.lineCap;\n      context.lineJoin = strokeState.lineJoin;\n      context.miterLimit = strokeState.miterLimit;\n      if (_ol_has_.CANVAS_LINE_DASH && strokeState.lineDash.length) {\n        context.setLineDash(strokeState.lineDash);\n        context.lineDashOffset = strokeState.lineDashOffset;\n      }\n    }\n    if (fillKey) {\n      context.fillStyle = fillState.fillStyle;\n    }\n    context.textBaseline = 'middle';\n    context.textAlign = 'center';\n    var leftRight = (0.5 - align);\n    var x = align * label.width / scale + leftRight * strokeWidth;\n    var i;\n    if (strokeKey) {\n      for (i = 0; i < numLines; ++i) {\n        context.strokeText(lines[i], x + leftRight * widths[i], 0.5 * (strokeWidth + lineHeight) + i * lineHeight);\n      }\n    }\n    if (fillKey) {\n      for (i = 0; i < numLines; ++i) {\n        context.fillText(lines[i], x + leftRight * widths[i], 0.5 * (strokeWidth + lineHeight) + i * lineHeight);\n      }\n    }\n  }\n  return labelCache.get(key);\n};\n\n\n/**\n * @private\n * @param {HTMLCanvasElement} label Label.\n * @param {number} begin Begin.\n * @param {number} end End.\n */\n_ol_render_canvas_TextReplay_.prototype.drawTextImage_ = function(label, begin, end) {\n  var textState = this.textState_;\n  var strokeState = this.textStrokeState_;\n  var pixelRatio = this.pixelRatio;\n  var align = _ol_render_replay_.TEXT_ALIGN[textState.textAlign || _ol_render_canvas_.defaultTextAlign];\n  var baseline = _ol_render_replay_.TEXT_ALIGN[textState.textBaseline];\n  var strokeWidth = strokeState && strokeState.lineWidth ? strokeState.lineWidth : 0;\n\n  var anchorX = align * label.width / pixelRatio + 2 * (0.5 - align) * strokeWidth;\n  var anchorY = baseline * label.height / pixelRatio + 2 * (0.5 - baseline) * strokeWidth;\n  this.instructions.push([_ol_render_canvas_Instruction_.DRAW_IMAGE, begin, end,\n    label, (anchorX - this.textOffsetX_) * pixelRatio, (anchorY - this.textOffsetY_) * pixelRatio,\n    this.declutterGroup_, label.height, 1, 0, 0, this.textRotateWithView_, this.textRotation_,\n    1, true, label.width,\n    textState.padding == _ol_render_canvas_.defaultPadding ?\n      _ol_render_canvas_.defaultPadding : textState.padding.map(function(p) {\n        return p * pixelRatio;\n      }),\n    !!textState.backgroundFill, !!textState.backgroundStroke\n  ]);\n  this.hitDetectionInstructions.push([_ol_render_canvas_Instruction_.DRAW_IMAGE, begin, end,\n    label, (anchorX - this.textOffsetX_) * pixelRatio, (anchorY - this.textOffsetY_) * pixelRatio,\n    this.declutterGroup_, label.height, 1, 0, 0, this.textRotateWithView_, this.textRotation_,\n    1 / pixelRatio, true, label.width, textState.padding,\n    !!textState.backgroundFill, !!textState.backgroundStroke\n  ]);\n};\n\n\n/**\n * @private\n * @param {number} begin Begin.\n * @param {number} end End.\n * @param {ol.DeclutterGroup} declutterGroup Declutter group.\n */\n_ol_render_canvas_TextReplay_.prototype.drawChars_ = function(begin, end, declutterGroup) {\n  var strokeState = this.textStrokeState_;\n  var textState = this.textState_;\n  var fillState = this.textFillState_;\n\n  var strokeKey = this.strokeKey_;\n  if (strokeState) {\n    if (!(strokeKey in this.strokeStates)) {\n      this.strokeStates[strokeKey] = /** @type {ol.CanvasStrokeState} */ ({\n        strokeStyle: strokeState.strokeStyle,\n        lineCap: strokeState.lineCap,\n        lineDashOffset: strokeState.lineDashOffset,\n        lineWidth: strokeState.lineWidth,\n        lineJoin: strokeState.lineJoin,\n        miterLimit: strokeState.miterLimit,\n        lineDash: strokeState.lineDash\n      });\n    }\n  }\n  var textKey = this.textKey_;\n  if (!(this.textKey_ in this.textStates)) {\n    this.textStates[this.textKey_] = /** @type {ol.CanvasTextState} */ ({\n      font: textState.font,\n      textAlign: textState.textAlign || _ol_render_canvas_.defaultTextAlign,\n      scale: textState.scale\n    });\n  }\n  var fillKey = this.fillKey_;\n  if (fillState) {\n    if (!(fillKey in this.fillStates)) {\n      this.fillStates[fillKey] = /** @type {ol.CanvasFillState} */ ({\n        fillStyle: fillState.fillStyle\n      });\n    }\n  }\n\n  var pixelRatio = this.pixelRatio;\n  var baseline = _ol_render_replay_.TEXT_ALIGN[textState.textBaseline];\n\n  var offsetY = this.textOffsetY_ * pixelRatio;\n  var text = this.text_;\n  var font = textState.font;\n  var textScale = textState.scale;\n  var strokeWidth = strokeState ? strokeState.lineWidth * textScale / 2 : 0;\n  var widths = this.widths_[font];\n  if (!widths) {\n    this.widths_[font] = widths = {};\n  }\n  this.instructions.push([_ol_render_canvas_Instruction_.DRAW_CHARS,\n    begin, end, baseline, declutterGroup,\n    textState.overflow, fillKey, textState.maxAngle,\n    function(text) {\n      var width = widths[text];\n      if (!width) {\n        width = widths[text] = _ol_render_canvas_.measureTextWidth(font, text);\n      }\n      return width * textScale * pixelRatio;\n    },\n    offsetY, strokeKey, strokeWidth * pixelRatio, text, textKey, 1\n  ]);\n  this.hitDetectionInstructions.push([_ol_render_canvas_Instruction_.DRAW_CHARS,\n    begin, end, baseline, declutterGroup,\n    textState.overflow, fillKey, textState.maxAngle,\n    function(text) {\n      var width = widths[text];\n      if (!width) {\n        width = widths[text] = _ol_render_canvas_.measureTextWidth(font, text);\n      }\n      return width * textScale;\n    },\n    offsetY, strokeKey, strokeWidth, text, textKey, 1 / pixelRatio\n  ]);\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_canvas_TextReplay_.prototype.setTextStyle = function(textStyle, declutterGroup) {\n  var textState, fillState, strokeState;\n  if (!textStyle) {\n    this.text_ = '';\n  } else {\n    this.declutterGroup_ = /** @type {ol.DeclutterGroup} */ (declutterGroup);\n\n    var textFillStyle = textStyle.getFill();\n    if (!textFillStyle) {\n      fillState = this.textFillState_ = null;\n    } else {\n      fillState = this.textFillState_;\n      if (!fillState) {\n        fillState = this.textFillState_ = /** @type {ol.CanvasFillState} */ ({});\n      }\n      fillState.fillStyle = _ol_colorlike_.asColorLike(\n          textFillStyle.getColor() || _ol_render_canvas_.defaultFillStyle);\n    }\n\n    var textStrokeStyle = textStyle.getStroke();\n    if (!textStrokeStyle) {\n      strokeState = this.textStrokeState_ = null;\n    } else {\n      strokeState = this.textStrokeState_;\n      if (!strokeState) {\n        strokeState = this.textStrokeState_ = /** @type {ol.CanvasStrokeState} */ ({});\n      }\n      var lineDash = textStrokeStyle.getLineDash();\n      var lineDashOffset = textStrokeStyle.getLineDashOffset();\n      var lineWidth = textStrokeStyle.getWidth();\n      var miterLimit = textStrokeStyle.getMiterLimit();\n      strokeState.lineCap = textStrokeStyle.getLineCap() || _ol_render_canvas_.defaultLineCap;\n      strokeState.lineDash = lineDash ? lineDash.slice() : _ol_render_canvas_.defaultLineDash;\n      strokeState.lineDashOffset =\n          lineDashOffset === undefined ? _ol_render_canvas_.defaultLineDashOffset : lineDashOffset;\n      strokeState.lineJoin = textStrokeStyle.getLineJoin() || _ol_render_canvas_.defaultLineJoin;\n      strokeState.lineWidth =\n          lineWidth === undefined ? _ol_render_canvas_.defaultLineWidth : lineWidth;\n      strokeState.miterLimit =\n          miterLimit === undefined ? _ol_render_canvas_.defaultMiterLimit : miterLimit;\n      strokeState.strokeStyle = _ol_colorlike_.asColorLike(\n          textStrokeStyle.getColor() || _ol_render_canvas_.defaultStrokeStyle);\n    }\n\n    textState = this.textState_;\n    var font = textStyle.getFont() || _ol_render_canvas_.defaultFont;\n    _ol_render_canvas_.checkFont(font);\n    var textScale = textStyle.getScale();\n    textState.overflow = textStyle.getOverflow();\n    textState.font = font;\n    textState.maxAngle = textStyle.getMaxAngle();\n    textState.placement = textStyle.getPlacement();\n    textState.textAlign = textStyle.getTextAlign();\n    textState.textBaseline = textStyle.getTextBaseline() || _ol_render_canvas_.defaultTextBaseline;\n    textState.backgroundFill = textStyle.getBackgroundFill();\n    textState.backgroundStroke = textStyle.getBackgroundStroke();\n    textState.padding = textStyle.getPadding() || _ol_render_canvas_.defaultPadding;\n    textState.scale = textScale === undefined ? 1 : textScale;\n\n    var textOffsetX = textStyle.getOffsetX();\n    var textOffsetY = textStyle.getOffsetY();\n    var textRotateWithView = textStyle.getRotateWithView();\n    var textRotation = textStyle.getRotation();\n    this.text_ = textStyle.getText() || '';\n    this.textOffsetX_ = textOffsetX === undefined ? 0 : textOffsetX;\n    this.textOffsetY_ = textOffsetY === undefined ? 0 : textOffsetY;\n    this.textRotateWithView_ = textRotateWithView === undefined ? false : textRotateWithView;\n    this.textRotation_ = textRotation === undefined ? 0 : textRotation;\n\n    this.strokeKey_ = strokeState ?\n      (typeof strokeState.strokeStyle == 'string' ? strokeState.strokeStyle : _ol_.getUid(strokeState.strokeStyle)) +\n      strokeState.lineCap + strokeState.lineDashOffset + '|' + strokeState.lineWidth +\n      strokeState.lineJoin + strokeState.miterLimit + '[' + strokeState.lineDash.join() + ']' :\n      '';\n    this.textKey_ = textState.font + textState.scale + (textState.textAlign || '?');\n    this.fillKey_ = fillState ?\n      (typeof fillState.fillStyle == 'string' ? fillState.fillStyle : ('|' + _ol_.getUid(fillState.fillStyle))) :\n      '';\n  }\n};\nexport default _ol_render_canvas_TextReplay_;\n","import _ol_ from '../../index.js';\nimport _ol_array_ from '../../array.js';\nimport _ol_dom_ from '../../dom.js';\nimport _ol_extent_ from '../../extent.js';\nimport _ol_geom_flat_transform_ from '../../geom/flat/transform.js';\nimport _ol_obj_ from '../../obj.js';\nimport _ol_render_ReplayGroup_ from '../replaygroup.js';\nimport _ol_render_ReplayType_ from '../replaytype.js';\nimport _ol_render_canvas_Replay_ from '../canvas/replay.js';\nimport _ol_render_canvas_ImageReplay_ from '../canvas/imagereplay.js';\nimport _ol_render_canvas_LineStringReplay_ from '../canvas/linestringreplay.js';\nimport _ol_render_canvas_PolygonReplay_ from '../canvas/polygonreplay.js';\nimport _ol_render_canvas_TextReplay_ from '../canvas/textreplay.js';\nimport _ol_render_replay_ from '../replay.js';\nimport _ol_transform_ from '../../transform.js';\n\n/**\n * @constructor\n * @extends {ol.render.ReplayGroup}\n * @param {number} tolerance Tolerance.\n * @param {ol.Extent} maxExtent Max extent.\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @param {boolean} overlaps The replay group can have overlapping geometries.\n * @param {?} declutterTree Declutter tree\n * for declutter processing in postrender.\n * @param {number=} opt_renderBuffer Optional rendering buffer.\n * @struct\n */\nvar _ol_render_canvas_ReplayGroup_ = function(\n    tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree, opt_renderBuffer) {\n  _ol_render_ReplayGroup_.call(this);\n\n  /**\n   * Declutter tree.\n   * @private\n   */\n  this.declutterTree_ = declutterTree;\n\n  /**\n   * @type {ol.DeclutterGroup}\n   * @private\n   */\n  this.declutterGroup_ = null;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.tolerance_ = tolerance;\n\n  /**\n   * @private\n   * @type {ol.Extent}\n   */\n  this.maxExtent_ = maxExtent;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.overlaps_ = overlaps;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.pixelRatio_ = pixelRatio;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.resolution_ = resolution;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.renderBuffer_ = opt_renderBuffer;\n\n  /**\n   * @private\n   * @type {!Object.<string,\n   *        Object.<ol.render.ReplayType, ol.render.canvas.Replay>>}\n   */\n  this.replaysByZIndex_ = {};\n\n  /**\n   * @private\n   * @type {CanvasRenderingContext2D}\n   */\n  this.hitDetectionContext_ = _ol_dom_.createCanvasContext2D(1, 1);\n\n  /**\n   * @private\n   * @type {ol.Transform}\n   */\n  this.hitDetectionTransform_ = _ol_transform_.create();\n};\n\n_ol_.inherits(_ol_render_canvas_ReplayGroup_, _ol_render_ReplayGroup_);\n\n\n/**\n * This cache is used for storing calculated pixel circles for increasing performance.\n * It is a static property to allow each Replaygroup to access it.\n * @type {Object.<number, Array.<Array.<(boolean|undefined)>>>}\n * @private\n */\n_ol_render_canvas_ReplayGroup_.circleArrayCache_ = {\n  0: [[true]]\n};\n\n\n/**\n * This method fills a row in the array from the given coordinate to the\n * middle with `true`.\n * @param {Array.<Array.<(boolean|undefined)>>} array The array that will be altered.\n * @param {number} x X coordinate.\n * @param {number} y Y coordinate.\n * @private\n */\n_ol_render_canvas_ReplayGroup_.fillCircleArrayRowToMiddle_ = function(array, x, y) {\n  var i;\n  var radius = Math.floor(array.length / 2);\n  if (x >= radius) {\n    for (i = radius; i < x; i++) {\n      array[i][y] = true;\n    }\n  } else if (x < radius) {\n    for (i = x + 1; i < radius; i++) {\n      array[i][y] = true;\n    }\n  }\n};\n\n\n/**\n * This methods creates a circle inside a fitting array. Points inside the\n * circle are marked by true, points on the outside are undefined.\n * It uses the midpoint circle algorithm.\n * A cache is used to increase performance.\n * @param {number} radius Radius.\n * @returns {Array.<Array.<(boolean|undefined)>>} An array with marked circle points.\n * @private\n */\n_ol_render_canvas_ReplayGroup_.getCircleArray_ = function(radius) {\n  if (_ol_render_canvas_ReplayGroup_.circleArrayCache_[radius] !== undefined) {\n    return _ol_render_canvas_ReplayGroup_.circleArrayCache_[radius];\n  }\n\n  var arraySize = radius * 2 + 1;\n  var arr = new Array(arraySize);\n  for (var i = 0; i < arraySize; i++) {\n    arr[i] = new Array(arraySize);\n  }\n\n  var x = radius;\n  var y = 0;\n  var error = 0;\n\n  while (x >= y) {\n    _ol_render_canvas_ReplayGroup_.fillCircleArrayRowToMiddle_(arr, radius + x, radius + y);\n    _ol_render_canvas_ReplayGroup_.fillCircleArrayRowToMiddle_(arr, radius + y, radius + x);\n    _ol_render_canvas_ReplayGroup_.fillCircleArrayRowToMiddle_(arr, radius - y, radius + x);\n    _ol_render_canvas_ReplayGroup_.fillCircleArrayRowToMiddle_(arr, radius - x, radius + y);\n    _ol_render_canvas_ReplayGroup_.fillCircleArrayRowToMiddle_(arr, radius - x, radius - y);\n    _ol_render_canvas_ReplayGroup_.fillCircleArrayRowToMiddle_(arr, radius - y, radius - x);\n    _ol_render_canvas_ReplayGroup_.fillCircleArrayRowToMiddle_(arr, radius + y, radius - x);\n    _ol_render_canvas_ReplayGroup_.fillCircleArrayRowToMiddle_(arr, radius + x, radius - y);\n\n    y++;\n    error += 1 + 2 * y;\n    if (2 * (error - x) + 1 > 0) {\n      x -= 1;\n      error += 1 - 2 * x;\n    }\n  }\n\n  _ol_render_canvas_ReplayGroup_.circleArrayCache_[radius] = arr;\n  return arr;\n};\n\n\n/**\n * @param {!Object.<string, Array.<*>>} declutterReplays Declutter replays.\n * @param {CanvasRenderingContext2D} context Context.\n * @param {number} rotation Rotation.\n */\n_ol_render_canvas_ReplayGroup_.replayDeclutter = function(declutterReplays, context, rotation) {\n  var zs = Object.keys(declutterReplays).map(Number).sort(_ol_array_.numberSafeCompareFunction);\n  var skippedFeatureUids = {};\n  for (var z = 0, zz = zs.length; z < zz; ++z) {\n    var replayData = declutterReplays[zs[z].toString()];\n    for (var i = 0, ii = replayData.length; i < ii;) {\n      var replay = replayData[i++];\n      var transform = replayData[i++];\n      replay.replay(context, transform, rotation, skippedFeatureUids);\n    }\n  }\n};\n\n\n/**\n * @param {boolean} group Group with previous replay.\n * @return {ol.DeclutterGroup} Declutter instruction group.\n */\n_ol_render_canvas_ReplayGroup_.prototype.addDeclutter = function(group) {\n  var declutter = null;\n  if (this.declutterTree_) {\n    if (group) {\n      declutter = this.declutterGroup_;\n      /** @type {number} */ (declutter[4])++;\n    } else {\n      declutter = this.declutterGroup_ = _ol_extent_.createEmpty();\n      declutter.push(1);\n    }\n  }\n  return declutter;\n};\n\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {ol.Transform} transform Transform.\n */\n_ol_render_canvas_ReplayGroup_.prototype.clip = function(context, transform) {\n  var flatClipCoords = this.getClipCoords(transform);\n  context.beginPath();\n  context.moveTo(flatClipCoords[0], flatClipCoords[1]);\n  context.lineTo(flatClipCoords[2], flatClipCoords[3]);\n  context.lineTo(flatClipCoords[4], flatClipCoords[5]);\n  context.lineTo(flatClipCoords[6], flatClipCoords[7]);\n  context.clip();\n};\n\n\n/**\n * @param {Array.<ol.render.ReplayType>} replays Replays.\n * @return {boolean} Has replays of the provided types.\n */\n_ol_render_canvas_ReplayGroup_.prototype.hasReplays = function(replays) {\n  for (var zIndex in this.replaysByZIndex_) {\n    var candidates = this.replaysByZIndex_[zIndex];\n    for (var i = 0, ii = replays.length; i < ii; ++i) {\n      if (replays[i] in candidates) {\n        return true;\n      }\n    }\n  }\n  return false;\n};\n\n\n/**\n * FIXME empty description for jsdoc\n */\n_ol_render_canvas_ReplayGroup_.prototype.finish = function() {\n  var zKey;\n  for (zKey in this.replaysByZIndex_) {\n    var replays = this.replaysByZIndex_[zKey];\n    var replayKey;\n    for (replayKey in replays) {\n      replays[replayKey].finish();\n    }\n  }\n};\n\n\n/**\n * @param {ol.Coordinate} coordinate Coordinate.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @param {number} hitTolerance Hit tolerance in pixels.\n * @param {Object.<string, boolean>} skippedFeaturesHash Ids of features\n *     to skip.\n * @param {function((ol.Feature|ol.render.Feature)): T} callback Feature\n *     callback.\n * @param {Object.<string, ol.DeclutterGroup>} declutterReplays Declutter\n *     replays.\n * @return {T|undefined} Callback result.\n * @template T\n */\n_ol_render_canvas_ReplayGroup_.prototype.forEachFeatureAtCoordinate = function(\n    coordinate, resolution, rotation, hitTolerance, skippedFeaturesHash, callback, declutterReplays) {\n\n  hitTolerance = Math.round(hitTolerance);\n  var contextSize = hitTolerance * 2 + 1;\n  var transform = _ol_transform_.compose(this.hitDetectionTransform_,\n      hitTolerance + 0.5, hitTolerance + 0.5,\n      1 / resolution, -1 / resolution,\n      -rotation,\n      -coordinate[0], -coordinate[1]);\n  var context = this.hitDetectionContext_;\n\n  if (context.canvas.width !== contextSize || context.canvas.height !== contextSize) {\n    context.canvas.width = contextSize;\n    context.canvas.height = contextSize;\n  } else {\n    context.clearRect(0, 0, contextSize, contextSize);\n  }\n\n  /**\n   * @type {ol.Extent}\n   */\n  var hitExtent;\n  if (this.renderBuffer_ !== undefined) {\n    hitExtent = _ol_extent_.createEmpty();\n    _ol_extent_.extendCoordinate(hitExtent, coordinate);\n    _ol_extent_.buffer(hitExtent, resolution * (this.renderBuffer_ + hitTolerance), hitExtent);\n  }\n\n  var mask = _ol_render_canvas_ReplayGroup_.getCircleArray_(hitTolerance);\n  var declutteredFeatures;\n  if (this.declutterTree_) {\n    declutteredFeatures = this.declutterTree_.all().map(function(entry) {\n      return entry.value;\n    });\n  }\n\n  var replayType;\n\n  /**\n   * @param {ol.Feature|ol.render.Feature} feature Feature.\n   * @return {?} Callback result.\n   */\n  function featureCallback(feature) {\n    var imageData = context.getImageData(0, 0, contextSize, contextSize).data;\n    for (var i = 0; i < contextSize; i++) {\n      for (var j = 0; j < contextSize; j++) {\n        if (mask[i][j]) {\n          if (imageData[(j * contextSize + i) * 4 + 3] > 0) {\n            var result;\n            if (!(declutteredFeatures && (replayType == _ol_render_ReplayType_.IMAGE || replayType == _ol_render_ReplayType_.TEXT)) ||\n                declutteredFeatures.indexOf(feature) !== -1) {\n              result = callback(feature);\n            }\n            if (result) {\n              return result;\n            } else {\n              context.clearRect(0, 0, contextSize, contextSize);\n              return undefined;\n            }\n          }\n        }\n      }\n    }\n  }\n\n  /** @type {Array.<number>} */\n  var zs = Object.keys(this.replaysByZIndex_).map(Number);\n  zs.sort(_ol_array_.numberSafeCompareFunction);\n\n  var i, j, replays, replay, result;\n  for (i = zs.length - 1; i >= 0; --i) {\n    var zIndexKey = zs[i].toString();\n    replays = this.replaysByZIndex_[zIndexKey];\n    for (j = _ol_render_replay_.ORDER.length - 1; j >= 0; --j) {\n      replayType = _ol_render_replay_.ORDER[j];\n      replay = replays[replayType];\n      if (replay !== undefined) {\n        if (declutterReplays &&\n            (replayType == _ol_render_ReplayType_.IMAGE || replayType == _ol_render_ReplayType_.TEXT)) {\n          var declutter = declutterReplays[zIndexKey];\n          if (!declutter) {\n            declutterReplays[zIndexKey] = [replay, transform.slice(0)];\n          } else {\n            declutter.push(replay, transform.slice(0));\n          }\n        } else {\n          result = replay.replayHitDetection(context, transform, rotation,\n              skippedFeaturesHash, featureCallback, hitExtent);\n          if (result) {\n            return result;\n          }\n        }\n      }\n    }\n  }\n  return undefined;\n};\n\n\n/**\n * @param {ol.Transform} transform Transform.\n * @return {Array.<number>} Clip coordinates.\n */\n_ol_render_canvas_ReplayGroup_.prototype.getClipCoords = function(transform) {\n  var maxExtent = this.maxExtent_;\n  var minX = maxExtent[0];\n  var minY = maxExtent[1];\n  var maxX = maxExtent[2];\n  var maxY = maxExtent[3];\n  var flatClipCoords = [minX, minY, minX, maxY, maxX, maxY, maxX, minY];\n  _ol_geom_flat_transform_.transform2D(\n      flatClipCoords, 0, 8, 2, transform, flatClipCoords);\n  return flatClipCoords;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_canvas_ReplayGroup_.prototype.getReplay = function(zIndex, replayType) {\n  var zIndexKey = zIndex !== undefined ? zIndex.toString() : '0';\n  var replays = this.replaysByZIndex_[zIndexKey];\n  if (replays === undefined) {\n    replays = {};\n    this.replaysByZIndex_[zIndexKey] = replays;\n  }\n  var replay = replays[replayType];\n  if (replay === undefined) {\n    var Constructor = _ol_render_canvas_ReplayGroup_.BATCH_CONSTRUCTORS_[replayType];\n    replay = new Constructor(this.tolerance_, this.maxExtent_,\n        this.resolution_, this.pixelRatio_, this.overlaps_, this.declutterTree_);\n    replays[replayType] = replay;\n  }\n  return replay;\n};\n\n\n/**\n * @return {Object.<string, Object.<ol.render.ReplayType, ol.render.canvas.Replay>>} Replays.\n */\n_ol_render_canvas_ReplayGroup_.prototype.getReplays = function() {\n  return this.replaysByZIndex_;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_canvas_ReplayGroup_.prototype.isEmpty = function() {\n  return _ol_obj_.isEmpty(this.replaysByZIndex_);\n};\n\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {ol.Transform} transform Transform.\n * @param {number} viewRotation View rotation.\n * @param {Object.<string, boolean>} skippedFeaturesHash Ids of features\n *     to skip.\n * @param {Array.<ol.render.ReplayType>=} opt_replayTypes Ordered replay types\n *     to replay. Default is {@link ol.render.replay.ORDER}\n * @param {Object.<string, ol.DeclutterGroup>=} opt_declutterReplays Declutter\n *     replays.\n */\n_ol_render_canvas_ReplayGroup_.prototype.replay = function(context,\n    transform, viewRotation, skippedFeaturesHash, opt_replayTypes, opt_declutterReplays) {\n\n  /** @type {Array.<number>} */\n  var zs = Object.keys(this.replaysByZIndex_).map(Number);\n  zs.sort(_ol_array_.numberSafeCompareFunction);\n\n  // setup clipping so that the parts of over-simplified geometries are not\n  // visible outside the current extent when panning\n  context.save();\n  this.clip(context, transform);\n\n  var replayTypes = opt_replayTypes ? opt_replayTypes : _ol_render_replay_.ORDER;\n  var i, ii, j, jj, replays, replay;\n  for (i = 0, ii = zs.length; i < ii; ++i) {\n    var zIndexKey = zs[i].toString();\n    replays = this.replaysByZIndex_[zIndexKey];\n    for (j = 0, jj = replayTypes.length; j < jj; ++j) {\n      var replayType = replayTypes[j];\n      replay = replays[replayType];\n      if (replay !== undefined) {\n        if (opt_declutterReplays &&\n            (replayType == _ol_render_ReplayType_.IMAGE || replayType == _ol_render_ReplayType_.TEXT)) {\n          var declutter = opt_declutterReplays[zIndexKey];\n          if (!declutter) {\n            opt_declutterReplays[zIndexKey] = [replay, transform.slice(0)];\n          } else {\n            declutter.push(replay, transform.slice(0));\n          }\n        } else {\n          replay.replay(context, transform, viewRotation, skippedFeaturesHash);\n        }\n      }\n    }\n  }\n\n  context.restore();\n};\n\n\n/**\n * @const\n * @private\n * @type {Object.<ol.render.ReplayType,\n *                function(new: ol.render.canvas.Replay, number, ol.Extent,\n *                number, number, boolean, Array.<ol.DeclutterGroup>)>}\n */\n_ol_render_canvas_ReplayGroup_.BATCH_CONSTRUCTORS_ = {\n  'Circle': _ol_render_canvas_PolygonReplay_,\n  'Default': _ol_render_canvas_Replay_,\n  'Image': _ol_render_canvas_ImageReplay_,\n  'LineString': _ol_render_canvas_LineStringReplay_,\n  'Polygon': _ol_render_canvas_PolygonReplay_,\n  'Text': _ol_render_canvas_TextReplay_\n};\nexport default _ol_render_canvas_ReplayGroup_;\n","import _ol_ from '../index.js';\nimport _ol_ImageState_ from '../imagestate.js';\nimport _ol_geom_GeometryType_ from '../geom/geometrytype.js';\nimport _ol_render_ReplayType_ from '../render/replaytype.js';\nvar _ol_renderer_vector_ = {};\n\n\n/**\n * @param {ol.Feature|ol.render.Feature} feature1 Feature 1.\n * @param {ol.Feature|ol.render.Feature} feature2 Feature 2.\n * @return {number} Order.\n */\n_ol_renderer_vector_.defaultOrder = function(feature1, feature2) {\n  return _ol_.getUid(feature1) - _ol_.getUid(feature2);\n};\n\n\n/**\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @return {number} Squared pixel tolerance.\n */\n_ol_renderer_vector_.getSquaredTolerance = function(resolution, pixelRatio) {\n  var tolerance = _ol_renderer_vector_.getTolerance(resolution, pixelRatio);\n  return tolerance * tolerance;\n};\n\n\n/**\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @return {number} Pixel tolerance.\n */\n_ol_renderer_vector_.getTolerance = function(resolution, pixelRatio) {\n  return _ol_.SIMPLIFY_TOLERANCE * resolution / pixelRatio;\n};\n\n\n/**\n * @param {ol.render.ReplayGroup} replayGroup Replay group.\n * @param {ol.geom.Circle} geometry Geometry.\n * @param {ol.style.Style} style Style.\n * @param {ol.Feature} feature Feature.\n * @private\n */\n_ol_renderer_vector_.renderCircleGeometry_ = function(replayGroup, geometry, style, feature) {\n  var fillStyle = style.getFill();\n  var strokeStyle = style.getStroke();\n  if (fillStyle || strokeStyle) {\n    var circleReplay = replayGroup.getReplay(\n        style.getZIndex(), _ol_render_ReplayType_.CIRCLE);\n    circleReplay.setFillStrokeStyle(fillStyle, strokeStyle);\n    circleReplay.drawCircle(geometry, feature);\n  }\n  var textStyle = style.getText();\n  if (textStyle) {\n    var textReplay = replayGroup.getReplay(\n        style.getZIndex(), _ol_render_ReplayType_.TEXT);\n    textReplay.setTextStyle(textStyle, replayGroup.addDeclutter(false));\n    textReplay.drawText(geometry, feature);\n  }\n};\n\n\n/**\n * @param {ol.render.ReplayGroup} replayGroup Replay group.\n * @param {ol.Feature|ol.render.Feature} feature Feature.\n * @param {ol.style.Style} style Style.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {function(this: T, ol.events.Event)} listener Listener function.\n * @param {T} thisArg Value to use as `this` when executing `listener`.\n * @return {boolean} `true` if style is loading.\n * @template T\n */\n_ol_renderer_vector_.renderFeature = function(\n    replayGroup, feature, style, squaredTolerance, listener, thisArg) {\n  var loading = false;\n  var imageStyle, imageState;\n  imageStyle = style.getImage();\n  if (imageStyle) {\n    imageState = imageStyle.getImageState();\n    if (imageState == _ol_ImageState_.LOADED ||\n        imageState == _ol_ImageState_.ERROR) {\n      imageStyle.unlistenImageChange(listener, thisArg);\n    } else {\n      if (imageState == _ol_ImageState_.IDLE) {\n        imageStyle.load();\n      }\n      imageState = imageStyle.getImageState();\n      imageStyle.listenImageChange(listener, thisArg);\n      loading = true;\n    }\n  }\n  _ol_renderer_vector_.renderFeature_(replayGroup, feature, style,\n      squaredTolerance);\n\n  return loading;\n};\n\n\n/**\n * @param {ol.render.ReplayGroup} replayGroup Replay group.\n * @param {ol.Feature|ol.render.Feature} feature Feature.\n * @param {ol.style.Style} style Style.\n * @param {number} squaredTolerance Squared tolerance.\n * @private\n */\n_ol_renderer_vector_.renderFeature_ = function(\n    replayGroup, feature, style, squaredTolerance) {\n  var geometry = style.getGeometryFunction()(feature);\n  if (!geometry) {\n    return;\n  }\n  var simplifiedGeometry = geometry.getSimplifiedGeometry(squaredTolerance);\n  var renderer = style.getRenderer();\n  if (renderer) {\n    _ol_renderer_vector_.renderGeometry_(replayGroup, simplifiedGeometry, style, feature);\n  } else {\n    var geometryRenderer =\n        _ol_renderer_vector_.GEOMETRY_RENDERERS_[simplifiedGeometry.getType()];\n    geometryRenderer(replayGroup, simplifiedGeometry, style, feature);\n  }\n};\n\n\n/**\n * @param {ol.render.ReplayGroup} replayGroup Replay group.\n * @param {ol.geom.Geometry} geometry Geometry.\n * @param {ol.style.Style} style Style.\n * @param {ol.Feature|ol.render.Feature} feature Feature.\n * @private\n */\n_ol_renderer_vector_.renderGeometry_ = function(replayGroup, geometry, style, feature) {\n  if (geometry.getType() == _ol_geom_GeometryType_.GEOMETRY_COLLECTION) {\n    var geometries = /** @type {ol.geom.GeometryCollection} */ (geometry).getGeometries();\n    for (var i = 0, ii = geometries.length; i < ii; ++i) {\n      _ol_renderer_vector_.renderGeometry_(replayGroup, geometries[i], style, feature);\n    }\n    return;\n  }\n  var replay = replayGroup.getReplay(style.getZIndex(), _ol_render_ReplayType_.DEFAULT);\n  replay.drawCustom(/** @type {ol.geom.SimpleGeometry} */ (geometry), feature, style.getRenderer());\n};\n\n\n/**\n * @param {ol.render.ReplayGroup} replayGroup Replay group.\n * @param {ol.geom.GeometryCollection} geometry Geometry.\n * @param {ol.style.Style} style Style.\n * @param {ol.Feature} feature Feature.\n * @private\n */\n_ol_renderer_vector_.renderGeometryCollectionGeometry_ = function(replayGroup, geometry, style, feature) {\n  var geometries = geometry.getGeometriesArray();\n  var i, ii;\n  for (i = 0, ii = geometries.length; i < ii; ++i) {\n    var geometryRenderer =\n        _ol_renderer_vector_.GEOMETRY_RENDERERS_[geometries[i].getType()];\n    geometryRenderer(replayGroup, geometries[i], style, feature);\n  }\n};\n\n\n/**\n * @param {ol.render.ReplayGroup} replayGroup Replay group.\n * @param {ol.geom.LineString|ol.render.Feature} geometry Geometry.\n * @param {ol.style.Style} style Style.\n * @param {ol.Feature|ol.render.Feature} feature Feature.\n * @private\n */\n_ol_renderer_vector_.renderLineStringGeometry_ = function(replayGroup, geometry, style, feature) {\n  var strokeStyle = style.getStroke();\n  if (strokeStyle) {\n    var lineStringReplay = replayGroup.getReplay(\n        style.getZIndex(), _ol_render_ReplayType_.LINE_STRING);\n    lineStringReplay.setFillStrokeStyle(null, strokeStyle);\n    lineStringReplay.drawLineString(geometry, feature);\n  }\n  var textStyle = style.getText();\n  if (textStyle) {\n    var textReplay = replayGroup.getReplay(\n        style.getZIndex(), _ol_render_ReplayType_.TEXT);\n    textReplay.setTextStyle(textStyle, replayGroup.addDeclutter(false));\n    textReplay.drawText(geometry, feature);\n  }\n};\n\n\n/**\n * @param {ol.render.ReplayGroup} replayGroup Replay group.\n * @param {ol.geom.MultiLineString|ol.render.Feature} geometry Geometry.\n * @param {ol.style.Style} style Style.\n * @param {ol.Feature|ol.render.Feature} feature Feature.\n * @private\n */\n_ol_renderer_vector_.renderMultiLineStringGeometry_ = function(replayGroup, geometry, style, feature) {\n  var strokeStyle = style.getStroke();\n  if (strokeStyle) {\n    var lineStringReplay = replayGroup.getReplay(\n        style.getZIndex(), _ol_render_ReplayType_.LINE_STRING);\n    lineStringReplay.setFillStrokeStyle(null, strokeStyle);\n    lineStringReplay.drawMultiLineString(geometry, feature);\n  }\n  var textStyle = style.getText();\n  if (textStyle) {\n    var textReplay = replayGroup.getReplay(\n        style.getZIndex(), _ol_render_ReplayType_.TEXT);\n    textReplay.setTextStyle(textStyle, replayGroup.addDeclutter(false));\n    textReplay.drawText(geometry, feature);\n  }\n};\n\n\n/**\n * @param {ol.render.ReplayGroup} replayGroup Replay group.\n * @param {ol.geom.MultiPolygon} geometry Geometry.\n * @param {ol.style.Style} style Style.\n * @param {ol.Feature} feature Feature.\n * @private\n */\n_ol_renderer_vector_.renderMultiPolygonGeometry_ = function(replayGroup, geometry, style, feature) {\n  var fillStyle = style.getFill();\n  var strokeStyle = style.getStroke();\n  if (strokeStyle || fillStyle) {\n    var polygonReplay = replayGroup.getReplay(\n        style.getZIndex(), _ol_render_ReplayType_.POLYGON);\n    polygonReplay.setFillStrokeStyle(fillStyle, strokeStyle);\n    polygonReplay.drawMultiPolygon(geometry, feature);\n  }\n  var textStyle = style.getText();\n  if (textStyle) {\n    var textReplay = replayGroup.getReplay(\n        style.getZIndex(), _ol_render_ReplayType_.TEXT);\n    textReplay.setTextStyle(textStyle, replayGroup.addDeclutter(false));\n    textReplay.drawText(geometry, feature);\n  }\n};\n\n\n/**\n * @param {ol.render.ReplayGroup} replayGroup Replay group.\n * @param {ol.geom.Point|ol.render.Feature} geometry Geometry.\n * @param {ol.style.Style} style Style.\n * @param {ol.Feature|ol.render.Feature} feature Feature.\n * @private\n */\n_ol_renderer_vector_.renderPointGeometry_ = function(replayGroup, geometry, style, feature) {\n  var imageStyle = style.getImage();\n  if (imageStyle) {\n    if (imageStyle.getImageState() != _ol_ImageState_.LOADED) {\n      return;\n    }\n    var imageReplay = replayGroup.getReplay(\n        style.getZIndex(), _ol_render_ReplayType_.IMAGE);\n    imageReplay.setImageStyle(imageStyle, replayGroup.addDeclutter(false));\n    imageReplay.drawPoint(geometry, feature);\n  }\n  var textStyle = style.getText();\n  if (textStyle) {\n    var textReplay = replayGroup.getReplay(\n        style.getZIndex(), _ol_render_ReplayType_.TEXT);\n    textReplay.setTextStyle(textStyle, replayGroup.addDeclutter(!!imageStyle));\n    textReplay.drawText(geometry, feature);\n  }\n};\n\n\n/**\n * @param {ol.render.ReplayGroup} replayGroup Replay group.\n * @param {ol.geom.MultiPoint|ol.render.Feature} geometry Geometry.\n * @param {ol.style.Style} style Style.\n * @param {ol.Feature|ol.render.Feature} feature Feature.\n * @private\n */\n_ol_renderer_vector_.renderMultiPointGeometry_ = function(replayGroup, geometry, style, feature) {\n  var imageStyle = style.getImage();\n  if (imageStyle) {\n    if (imageStyle.getImageState() != _ol_ImageState_.LOADED) {\n      return;\n    }\n    var imageReplay = replayGroup.getReplay(\n        style.getZIndex(), _ol_render_ReplayType_.IMAGE);\n    imageReplay.setImageStyle(imageStyle, replayGroup.addDeclutter(false));\n    imageReplay.drawMultiPoint(geometry, feature);\n  }\n  var textStyle = style.getText();\n  if (textStyle) {\n    var textReplay = replayGroup.getReplay(\n        style.getZIndex(), _ol_render_ReplayType_.TEXT);\n    textReplay.setTextStyle(textStyle, replayGroup.addDeclutter(!!imageStyle));\n    textReplay.drawText(geometry, feature);\n  }\n};\n\n\n/**\n * @param {ol.render.ReplayGroup} replayGroup Replay group.\n * @param {ol.geom.Polygon|ol.render.Feature} geometry Geometry.\n * @param {ol.style.Style} style Style.\n * @param {ol.Feature|ol.render.Feature} feature Feature.\n * @private\n */\n_ol_renderer_vector_.renderPolygonGeometry_ = function(replayGroup, geometry, style, feature) {\n  var fillStyle = style.getFill();\n  var strokeStyle = style.getStroke();\n  if (fillStyle || strokeStyle) {\n    var polygonReplay = replayGroup.getReplay(\n        style.getZIndex(), _ol_render_ReplayType_.POLYGON);\n    polygonReplay.setFillStrokeStyle(fillStyle, strokeStyle);\n    polygonReplay.drawPolygon(geometry, feature);\n  }\n  var textStyle = style.getText();\n  if (textStyle) {\n    var textReplay = replayGroup.getReplay(\n        style.getZIndex(), _ol_render_ReplayType_.TEXT);\n    textReplay.setTextStyle(textStyle, replayGroup.addDeclutter(false));\n    textReplay.drawText(geometry, feature);\n  }\n};\n\n\n/**\n * @const\n * @private\n * @type {Object.<ol.geom.GeometryType,\n *                function(ol.render.ReplayGroup, ol.geom.Geometry,\n *                         ol.style.Style, Object)>}\n */\n_ol_renderer_vector_.GEOMETRY_RENDERERS_ = {\n  'Point': _ol_renderer_vector_.renderPointGeometry_,\n  'LineString': _ol_renderer_vector_.renderLineStringGeometry_,\n  'Polygon': _ol_renderer_vector_.renderPolygonGeometry_,\n  'MultiPoint': _ol_renderer_vector_.renderMultiPointGeometry_,\n  'MultiLineString': _ol_renderer_vector_.renderMultiLineStringGeometry_,\n  'MultiPolygon': _ol_renderer_vector_.renderMultiPolygonGeometry_,\n  'GeometryCollection': _ol_renderer_vector_.renderGeometryCollectionGeometry_,\n  'Circle': _ol_renderer_vector_.renderCircleGeometry_\n};\nexport default _ol_renderer_vector_;\n","import _ol_ from '../../index.js';\nimport _ol_LayerType_ from '../../layertype.js';\nimport _ol_ViewHint_ from '../../viewhint.js';\nimport _ol_dom_ from '../../dom.js';\nimport _ol_events_ from '../../events.js';\nimport _ol_events_EventType_ from '../../events/eventtype.js';\nimport _ol_ext_rbush_ from 'rbush';\nimport _ol_extent_ from '../../extent.js';\nimport _ol_render_EventType_ from '../../render/eventtype.js';\nimport _ol_render_canvas_ from '../../render/canvas.js';\nimport _ol_render_canvas_ReplayGroup_ from '../../render/canvas/replaygroup.js';\nimport _ol_renderer_Type_ from '../type.js';\nimport _ol_renderer_canvas_Layer_ from '../canvas/layer.js';\nimport _ol_renderer_vector_ from '../vector.js';\n\n/**\n * @constructor\n * @extends {ol.renderer.canvas.Layer}\n * @param {ol.layer.Vector} vectorLayer Vector layer.\n * @api\n */\nvar _ol_renderer_canvas_VectorLayer_ = function(vectorLayer) {\n\n  _ol_renderer_canvas_Layer_.call(this, vectorLayer);\n\n  /**\n   * Declutter tree.\n   * @private\n   */\n  this.declutterTree_ = vectorLayer.getDeclutter() ?\n    _ol_ext_rbush_(9) : null;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.dirty_ = false;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.renderedRevision_ = -1;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.renderedResolution_ = NaN;\n\n  /**\n   * @private\n   * @type {ol.Extent}\n   */\n  this.renderedExtent_ = _ol_extent_.createEmpty();\n\n  /**\n   * @private\n   * @type {function(ol.Feature, ol.Feature): number|null}\n   */\n  this.renderedRenderOrder_ = null;\n\n  /**\n   * @private\n   * @type {ol.render.canvas.ReplayGroup}\n   */\n  this.replayGroup_ = null;\n\n  /**\n   * A new replay group had to be created by `prepareFrame()`\n   * @type {boolean}\n   */\n  this.replayGroupChanged = true;\n\n  /**\n   * @type {CanvasRenderingContext2D}\n   */\n  this.context = _ol_dom_.createCanvasContext2D();\n\n  _ol_events_.listen(_ol_render_canvas_.labelCache, _ol_events_EventType_.CLEAR, this.handleFontsChanged_, this);\n\n};\n\n_ol_.inherits(_ol_renderer_canvas_VectorLayer_, _ol_renderer_canvas_Layer_);\n\n\n/**\n * Determine if this renderer handles the provided layer.\n * @param {ol.renderer.Type} type The renderer type.\n * @param {ol.layer.Layer} layer The candidate layer.\n * @return {boolean} The renderer can render the layer.\n */\n_ol_renderer_canvas_VectorLayer_['handles'] = function(type, layer) {\n  return type === _ol_renderer_Type_.CANVAS && layer.getType() === _ol_LayerType_.VECTOR;\n};\n\n\n/**\n * Create a layer renderer.\n * @param {ol.renderer.Map} mapRenderer The map renderer.\n * @param {ol.layer.Layer} layer The layer to be rendererd.\n * @return {ol.renderer.canvas.VectorLayer} The layer renderer.\n */\n_ol_renderer_canvas_VectorLayer_['create'] = function(mapRenderer, layer) {\n  return new _ol_renderer_canvas_VectorLayer_(/** @type {ol.layer.Vector} */ (layer));\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_renderer_canvas_VectorLayer_.prototype.disposeInternal = function() {\n  _ol_events_.unlisten(_ol_render_canvas_.labelCache, _ol_events_EventType_.CLEAR, this.handleFontsChanged_, this);\n  _ol_renderer_canvas_Layer_.prototype.disposeInternal.call(this);\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_renderer_canvas_VectorLayer_.prototype.composeFrame = function(frameState, layerState, context) {\n\n  var extent = frameState.extent;\n  var pixelRatio = frameState.pixelRatio;\n  var skippedFeatureUids = layerState.managed ?\n    frameState.skippedFeatureUids : {};\n  var viewState = frameState.viewState;\n  var projection = viewState.projection;\n  var rotation = viewState.rotation;\n  var projectionExtent = projection.getExtent();\n  var vectorSource = /** @type {ol.source.Vector} */ (this.getLayer().getSource());\n\n  var transform = this.getTransform(frameState, 0);\n\n  this.preCompose(context, frameState, transform);\n\n  // clipped rendering if layer extent is set\n  var clipExtent = layerState.extent;\n  var clipped = clipExtent !== undefined;\n  if (clipped) {\n    this.clip(context, frameState,  /** @type {ol.Extent} */ (clipExtent));\n  }\n  var replayGroup = this.replayGroup_;\n  if (replayGroup && !replayGroup.isEmpty()) {\n    if (this.declutterTree_) {\n      this.declutterTree_.clear();\n    }\n    var layer = /** @type {ol.layer.Vector} */ (this.getLayer());\n    var drawOffsetX = 0;\n    var drawOffsetY = 0;\n    var replayContext;\n    var transparentLayer = layerState.opacity !== 1;\n    var hasRenderListeners = layer.hasListener(_ol_render_EventType_.RENDER);\n    if (transparentLayer || hasRenderListeners) {\n      var drawWidth = context.canvas.width;\n      var drawHeight = context.canvas.height;\n      if (rotation) {\n        var drawSize = Math.round(Math.sqrt(drawWidth * drawWidth + drawHeight * drawHeight));\n        drawOffsetX = (drawSize - drawWidth) / 2;\n        drawOffsetY = (drawSize - drawHeight) / 2;\n        drawWidth = drawHeight = drawSize;\n      }\n      // resize and clear\n      this.context.canvas.width = drawWidth;\n      this.context.canvas.height = drawHeight;\n      replayContext = this.context;\n    } else {\n      replayContext = context;\n    }\n\n    var alpha = replayContext.globalAlpha;\n    if (!transparentLayer) {\n      // for performance reasons, context.save / context.restore is not used\n      // to save and restore the transformation matrix and the opacity.\n      // see http://jsperf.com/context-save-restore-versus-variable\n      replayContext.globalAlpha = layerState.opacity;\n    }\n\n    if (replayContext != context) {\n      replayContext.translate(drawOffsetX, drawOffsetY);\n    }\n\n    var width = frameState.size[0] * pixelRatio;\n    var height = frameState.size[1] * pixelRatio;\n    _ol_render_canvas_.rotateAtOffset(replayContext, -rotation,\n        width / 2, height / 2);\n    replayGroup.replay(replayContext, transform, rotation, skippedFeatureUids);\n    if (vectorSource.getWrapX() && projection.canWrapX() &&\n        !_ol_extent_.containsExtent(projectionExtent, extent)) {\n      var startX = extent[0];\n      var worldWidth = _ol_extent_.getWidth(projectionExtent);\n      var world = 0;\n      var offsetX;\n      while (startX < projectionExtent[0]) {\n        --world;\n        offsetX = worldWidth * world;\n        transform = this.getTransform(frameState, offsetX);\n        replayGroup.replay(replayContext, transform, rotation, skippedFeatureUids);\n        startX += worldWidth;\n      }\n      world = 0;\n      startX = extent[2];\n      while (startX > projectionExtent[2]) {\n        ++world;\n        offsetX = worldWidth * world;\n        transform = this.getTransform(frameState, offsetX);\n        replayGroup.replay(replayContext, transform, rotation, skippedFeatureUids);\n        startX -= worldWidth;\n      }\n      // restore original transform for render and compose events\n      transform = this.getTransform(frameState, 0);\n    }\n    _ol_render_canvas_.rotateAtOffset(replayContext, rotation,\n        width / 2, height / 2);\n\n    if (replayContext != context) {\n      if (hasRenderListeners) {\n        this.dispatchRenderEvent(replayContext, frameState, transform);\n      }\n      if (transparentLayer) {\n        var mainContextAlpha = context.globalAlpha;\n        context.globalAlpha = layerState.opacity;\n        context.drawImage(replayContext.canvas, -drawOffsetX, -drawOffsetY);\n        context.globalAlpha = mainContextAlpha;\n      } else {\n        context.drawImage(replayContext.canvas, -drawOffsetX, -drawOffsetY);\n      }\n      replayContext.translate(-drawOffsetX, -drawOffsetY);\n    }\n\n    if (!transparentLayer) {\n      replayContext.globalAlpha = alpha;\n    }\n  }\n\n  if (clipped) {\n    context.restore();\n  }\n  this.postCompose(context, frameState, layerState, transform);\n\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_renderer_canvas_VectorLayer_.prototype.forEachFeatureAtCoordinate = function(coordinate, frameState, hitTolerance, callback, thisArg) {\n  if (!this.replayGroup_) {\n    return undefined;\n  } else {\n    var resolution = frameState.viewState.resolution;\n    var rotation = frameState.viewState.rotation;\n    var layer = /** @type {ol.layer.Vector} */ (this.getLayer());\n    /** @type {Object.<string, boolean>} */\n    var features = {};\n    var result = this.replayGroup_.forEachFeatureAtCoordinate(coordinate, resolution,\n        rotation, hitTolerance, {},\n        /**\n         * @param {ol.Feature|ol.render.Feature} feature Feature.\n         * @return {?} Callback result.\n         */\n        function(feature) {\n          var key = _ol_.getUid(feature).toString();\n          if (!(key in features)) {\n            features[key] = true;\n            return callback.call(thisArg, feature, layer);\n          }\n        }, null);\n    return result;\n  }\n};\n\n\n/**\n * @param {ol.events.Event} event Event.\n */\n_ol_renderer_canvas_VectorLayer_.prototype.handleFontsChanged_ = function(event) {\n  var layer = this.getLayer();\n  if (layer.getVisible() && this.replayGroup_) {\n    layer.changed();\n  }\n};\n\n\n/**\n * Handle changes in image style state.\n * @param {ol.events.Event} event Image style change event.\n * @private\n */\n_ol_renderer_canvas_VectorLayer_.prototype.handleStyleImageChange_ = function(event) {\n  this.renderIfReadyAndVisible();\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_renderer_canvas_VectorLayer_.prototype.prepareFrame = function(frameState, layerState) {\n\n  var vectorLayer = /** @type {ol.layer.Vector} */ (this.getLayer());\n  var vectorSource = vectorLayer.getSource();\n\n  this.updateLogos(frameState, vectorSource);\n\n  var animating = frameState.viewHints[_ol_ViewHint_.ANIMATING];\n  var interacting = frameState.viewHints[_ol_ViewHint_.INTERACTING];\n  var updateWhileAnimating = vectorLayer.getUpdateWhileAnimating();\n  var updateWhileInteracting = vectorLayer.getUpdateWhileInteracting();\n\n  if (!this.dirty_ && (!updateWhileAnimating && animating) ||\n      (!updateWhileInteracting && interacting)) {\n    return true;\n  }\n\n  var frameStateExtent = frameState.extent;\n  var viewState = frameState.viewState;\n  var projection = viewState.projection;\n  var resolution = viewState.resolution;\n  var pixelRatio = frameState.pixelRatio;\n  var vectorLayerRevision = vectorLayer.getRevision();\n  var vectorLayerRenderBuffer = vectorLayer.getRenderBuffer();\n  var vectorLayerRenderOrder = vectorLayer.getRenderOrder();\n\n  if (vectorLayerRenderOrder === undefined) {\n    vectorLayerRenderOrder = _ol_renderer_vector_.defaultOrder;\n  }\n\n  var extent = _ol_extent_.buffer(frameStateExtent,\n      vectorLayerRenderBuffer * resolution);\n  var projectionExtent = viewState.projection.getExtent();\n\n  if (vectorSource.getWrapX() && viewState.projection.canWrapX() &&\n      !_ol_extent_.containsExtent(projectionExtent, frameState.extent)) {\n    // For the replay group, we need an extent that intersects the real world\n    // (-180° to +180°). To support geometries in a coordinate range from -540°\n    // to +540°, we add at least 1 world width on each side of the projection\n    // extent. If the viewport is wider than the world, we need to add half of\n    // the viewport width to make sure we cover the whole viewport.\n    var worldWidth = _ol_extent_.getWidth(projectionExtent);\n    var buffer = Math.max(_ol_extent_.getWidth(extent) / 2, worldWidth);\n    extent[0] = projectionExtent[0] - buffer;\n    extent[2] = projectionExtent[2] + buffer;\n  }\n\n  if (!this.dirty_ &&\n      this.renderedResolution_ == resolution &&\n      this.renderedRevision_ == vectorLayerRevision &&\n      this.renderedRenderOrder_ == vectorLayerRenderOrder &&\n      _ol_extent_.containsExtent(this.renderedExtent_, extent)) {\n    this.replayGroupChanged = false;\n    return true;\n  }\n\n  this.replayGroup_ = null;\n\n  this.dirty_ = false;\n\n  var replayGroup = new _ol_render_canvas_ReplayGroup_(\n      _ol_renderer_vector_.getTolerance(resolution, pixelRatio), extent, resolution,\n      pixelRatio, vectorSource.getOverlaps(), this.declutterTree_, vectorLayer.getRenderBuffer());\n  vectorSource.loadFeatures(extent, resolution, projection);\n  /**\n   * @param {ol.Feature} feature Feature.\n   * @this {ol.renderer.canvas.VectorLayer}\n   */\n  var renderFeature = function(feature) {\n    var styles;\n    var styleFunction = feature.getStyleFunction();\n    if (styleFunction) {\n      styles = styleFunction.call(feature, resolution);\n    } else {\n      styleFunction = vectorLayer.getStyleFunction();\n      if (styleFunction) {\n        styles = styleFunction(feature, resolution);\n      }\n    }\n    if (styles) {\n      var dirty = this.renderFeature(\n          feature, resolution, pixelRatio, styles, replayGroup);\n      this.dirty_ = this.dirty_ || dirty;\n    }\n  }.bind(this);\n  if (vectorLayerRenderOrder) {\n    /** @type {Array.<ol.Feature>} */\n    var features = [];\n    vectorSource.forEachFeatureInExtent(extent,\n        /**\n         * @param {ol.Feature} feature Feature.\n         */\n        function(feature) {\n          features.push(feature);\n        }, this);\n    features.sort(vectorLayerRenderOrder);\n    for (var i = 0, ii = features.length; i < ii; ++i) {\n      renderFeature(features[i]);\n    }\n  } else {\n    vectorSource.forEachFeatureInExtent(extent, renderFeature, this);\n  }\n  replayGroup.finish();\n\n  this.renderedResolution_ = resolution;\n  this.renderedRevision_ = vectorLayerRevision;\n  this.renderedRenderOrder_ = vectorLayerRenderOrder;\n  this.renderedExtent_ = extent;\n  this.replayGroup_ = replayGroup;\n\n  this.replayGroupChanged = true;\n  return true;\n};\n\n\n/**\n * @param {ol.Feature} feature Feature.\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @param {(ol.style.Style|Array.<ol.style.Style>)} styles The style or array of\n *     styles.\n * @param {ol.render.canvas.ReplayGroup} replayGroup Replay group.\n * @return {boolean} `true` if an image is loading.\n */\n_ol_renderer_canvas_VectorLayer_.prototype.renderFeature = function(feature, resolution, pixelRatio, styles, replayGroup) {\n  if (!styles) {\n    return false;\n  }\n  var loading = false;\n  if (Array.isArray(styles)) {\n    for (var i = 0, ii = styles.length; i < ii; ++i) {\n      loading = _ol_renderer_vector_.renderFeature(\n          replayGroup, feature, styles[i],\n          _ol_renderer_vector_.getSquaredTolerance(resolution, pixelRatio),\n          this.handleStyleImageChange_, this) || loading;\n    }\n  } else {\n    loading = _ol_renderer_vector_.renderFeature(\n        replayGroup, feature, styles,\n        _ol_renderer_vector_.getSquaredTolerance(resolution, pixelRatio),\n        this.handleStyleImageChange_, this);\n  }\n  return loading;\n};\nexport default _ol_renderer_canvas_VectorLayer_;\n","/**\n * @enum {string}\n * Render mode for vector tiles:\n *  * `'image'`: Vector tiles are rendered as images. Great performance, but\n *    point symbols and texts are always rotated with the view and pixels are\n *    scaled during zoom animations.\n *  * `'hybrid'`: Polygon and line elements are rendered as images, so pixels\n *    are scaled during zoom animations. Point symbols and texts are accurately\n *    rendered as vectors and can stay upright on rotated views.\n *  * `'vector'`: Vector tiles are rendered as vectors. Most accurate rendering\n *    even during animations, but slower performance than the other options.\n * @api\n */\nvar _ol_layer_VectorTileRenderType_ = {\n  IMAGE: 'image',\n  HYBRID: 'hybrid',\n  VECTOR: 'vector'\n};\n\nexport default _ol_layer_VectorTileRenderType_;\n","import _ol_ from '../../index.js';\nimport _ol_LayerType_ from '../../layertype.js';\nimport _ol_TileState_ from '../../tilestate.js';\nimport _ol_dom_ from '../../dom.js';\nimport _ol_events_ from '../../events.js';\nimport _ol_events_EventType_ from '../../events/eventtype.js';\nimport _ol_ext_rbush_ from 'rbush';\nimport _ol_extent_ from '../../extent.js';\nimport _ol_layer_VectorTileRenderType_ from '../../layer/vectortilerendertype.js';\nimport _ol_proj_ from '../../proj.js';\nimport _ol_proj_Units_ from '../../proj/units.js';\nimport _ol_render_ReplayType_ from '../../render/replaytype.js';\nimport _ol_render_canvas_ from '../../render/canvas.js';\nimport _ol_render_canvas_ReplayGroup_ from '../../render/canvas/replaygroup.js';\nimport _ol_render_replay_ from '../../render/replay.js';\nimport _ol_renderer_Type_ from '../type.js';\nimport _ol_renderer_canvas_TileLayer_ from '../canvas/tilelayer.js';\nimport _ol_renderer_vector_ from '../vector.js';\nimport _ol_transform_ from '../../transform.js';\n\n/**\n * @constructor\n * @extends {ol.renderer.canvas.TileLayer}\n * @param {ol.layer.VectorTile} layer VectorTile layer.\n * @api\n */\nvar _ol_renderer_canvas_VectorTileLayer_ = function(layer) {\n\n  /**\n   * @type {CanvasRenderingContext2D}\n   */\n  this.context = null;\n\n  _ol_renderer_canvas_TileLayer_.call(this, layer);\n\n  /**\n   * Declutter tree.\n   * @private\n     */\n  this.declutterTree_ = layer.getDeclutter() ? _ol_ext_rbush_(9) : null;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.dirty_ = false;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.renderedLayerRevision_;\n\n  /**\n   * @private\n   * @type {ol.Transform}\n   */\n  this.tmpTransform_ = _ol_transform_.create();\n\n  // Use lower resolution for pure vector rendering. Closest resolution otherwise.\n  this.zDirection =\n      layer.getRenderMode() == _ol_layer_VectorTileRenderType_.VECTOR ? 1 : 0;\n\n  _ol_events_.listen(_ol_render_canvas_.labelCache, _ol_events_EventType_.CLEAR, this.handleFontsChanged_, this);\n\n};\n\n_ol_.inherits(_ol_renderer_canvas_VectorTileLayer_, _ol_renderer_canvas_TileLayer_);\n\n\n/**\n * Determine if this renderer handles the provided layer.\n * @param {ol.renderer.Type} type The renderer type.\n * @param {ol.layer.Layer} layer The candidate layer.\n * @return {boolean} The renderer can render the layer.\n */\n_ol_renderer_canvas_VectorTileLayer_['handles'] = function(type, layer) {\n  return type === _ol_renderer_Type_.CANVAS && layer.getType() === _ol_LayerType_.VECTOR_TILE;\n};\n\n\n/**\n * Create a layer renderer.\n * @param {ol.renderer.Map} mapRenderer The map renderer.\n * @param {ol.layer.Layer} layer The layer to be rendererd.\n * @return {ol.renderer.canvas.VectorTileLayer} The layer renderer.\n */\n_ol_renderer_canvas_VectorTileLayer_['create'] = function(mapRenderer, layer) {\n  return new _ol_renderer_canvas_VectorTileLayer_(/** @type {ol.layer.VectorTile} */ (layer));\n};\n\n\n/**\n * @const\n * @type {!Object.<string, Array.<ol.render.ReplayType>>}\n */\n_ol_renderer_canvas_VectorTileLayer_.IMAGE_REPLAYS = {\n  'image': [_ol_render_ReplayType_.POLYGON, _ol_render_ReplayType_.CIRCLE,\n    _ol_render_ReplayType_.LINE_STRING, _ol_render_ReplayType_.IMAGE, _ol_render_ReplayType_.TEXT],\n  'hybrid': [_ol_render_ReplayType_.POLYGON, _ol_render_ReplayType_.LINE_STRING]\n};\n\n\n/**\n * @const\n * @type {!Object.<string, Array.<ol.render.ReplayType>>}\n */\n_ol_renderer_canvas_VectorTileLayer_.VECTOR_REPLAYS = {\n  'image': [_ol_render_ReplayType_.DEFAULT],\n  'hybrid': [_ol_render_ReplayType_.IMAGE, _ol_render_ReplayType_.TEXT, _ol_render_ReplayType_.DEFAULT],\n  'vector': _ol_render_replay_.ORDER\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_renderer_canvas_VectorTileLayer_.prototype.disposeInternal = function() {\n  _ol_events_.unlisten(_ol_render_canvas_.labelCache, _ol_events_EventType_.CLEAR, this.handleFontsChanged_, this);\n  _ol_renderer_canvas_TileLayer_.prototype.disposeInternal.call(this);\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_renderer_canvas_VectorTileLayer_.prototype.prepareFrame = function(frameState, layerState) {\n  var layer = this.getLayer();\n  var layerRevision = layer.getRevision();\n  if (this.renderedLayerRevision_ != layerRevision) {\n    this.renderedTiles.length = 0;\n    var renderMode = layer.getRenderMode();\n    if (!this.context && renderMode != _ol_layer_VectorTileRenderType_.VECTOR) {\n      this.context = _ol_dom_.createCanvasContext2D();\n    }\n    if (this.context && renderMode == _ol_layer_VectorTileRenderType_.VECTOR) {\n      this.context = null;\n    }\n  }\n  this.renderedLayerRevision_ = layerRevision;\n  return _ol_renderer_canvas_TileLayer_.prototype.prepareFrame.apply(this, arguments);\n};\n\n\n/**\n * @param {ol.VectorImageTile} tile Tile.\n * @param {olx.FrameState} frameState Frame state.\n * @private\n */\n_ol_renderer_canvas_VectorTileLayer_.prototype.createReplayGroup_ = function(\n    tile, frameState) {\n  var layer = this.getLayer();\n  var pixelRatio = frameState.pixelRatio;\n  var projection = frameState.viewState.projection;\n  var revision = layer.getRevision();\n  var renderOrder = /** @type {ol.RenderOrderFunction} */\n      (layer.getRenderOrder()) || null;\n\n  var replayState = tile.getReplayState(layer);\n  if (!replayState.dirty && replayState.renderedRevision == revision &&\n      replayState.renderedRenderOrder == renderOrder) {\n    return;\n  }\n\n  var source = /** @type {ol.source.VectorTile} */ (layer.getSource());\n  var sourceTileGrid = source.getTileGrid();\n  var tileGrid = source.getTileGridForProjection(projection);\n  var resolution = tileGrid.getResolution(tile.tileCoord[0]);\n  var tileExtent = tileGrid.getTileCoordExtent(tile.wrappedTileCoord);\n\n  var zIndexKeys = {};\n  for (var t = 0, tt = tile.tileKeys.length; t < tt; ++t) {\n    var sourceTile = tile.getTile(tile.tileKeys[t]);\n    if (sourceTile.getState() == _ol_TileState_.ERROR) {\n      continue;\n    }\n\n    var sourceTileCoord = sourceTile.tileCoord;\n    var sourceTileExtent = sourceTileGrid.getTileCoordExtent(sourceTileCoord);\n    var sharedExtent = _ol_extent_.getIntersection(tileExtent, sourceTileExtent);\n    var bufferedExtent = _ol_extent_.equals(sourceTileExtent, sharedExtent) ? null :\n      _ol_extent_.buffer(sharedExtent, layer.getRenderBuffer() * resolution);\n    var tileProjection = sourceTile.getProjection();\n    var reproject = false;\n    if (!_ol_proj_.equivalent(projection, tileProjection)) {\n      reproject = true;\n      sourceTile.setProjection(projection);\n    }\n    replayState.dirty = false;\n    var replayGroup = new _ol_render_canvas_ReplayGroup_(0, sharedExtent, resolution,\n        pixelRatio, source.getOverlaps(), this.declutterTree_, layer.getRenderBuffer());\n    var squaredTolerance = _ol_renderer_vector_.getSquaredTolerance(\n        resolution, pixelRatio);\n\n    /**\n     * @param {ol.Feature|ol.render.Feature} feature Feature.\n     * @this {ol.renderer.canvas.VectorTileLayer}\n     */\n    var renderFeature = function(feature) {\n      var styles;\n      var styleFunction = feature.getStyleFunction();\n      if (styleFunction) {\n        styles = styleFunction.call(/** @type {ol.Feature} */ (feature), resolution);\n      } else {\n        styleFunction = layer.getStyleFunction();\n        if (styleFunction) {\n          styles = styleFunction(feature, resolution);\n        }\n      }\n      if (styles) {\n        var dirty = this.renderFeature(feature, squaredTolerance, styles,\n            replayGroup);\n        this.dirty_ = this.dirty_ || dirty;\n        replayState.dirty = replayState.dirty || dirty;\n      }\n    };\n\n    var features = sourceTile.getFeatures();\n    if (renderOrder && renderOrder !== replayState.renderedRenderOrder) {\n      features.sort(renderOrder);\n    }\n    var feature;\n    for (var i = 0, ii = features.length; i < ii; ++i) {\n      feature = features[i];\n      if (reproject) {\n        if (tileProjection.getUnits() == _ol_proj_Units_.TILE_PIXELS) {\n          // projected tile extent\n          tileProjection.setWorldExtent(sourceTileExtent);\n          // tile extent in tile pixel space\n          tileProjection.setExtent(sourceTile.getExtent());\n        }\n        feature.getGeometry().transform(tileProjection, projection);\n      }\n      if (!bufferedExtent || _ol_extent_.intersects(bufferedExtent, feature.getGeometry().getExtent())) {\n        renderFeature.call(this, feature);\n      }\n    }\n    replayGroup.finish();\n    for (var r in replayGroup.getReplays()) {\n      zIndexKeys[r] = true;\n    }\n    sourceTile.setReplayGroup(layer, tile.tileCoord.toString(), replayGroup);\n  }\n  replayState.renderedRevision = revision;\n  replayState.renderedRenderOrder = renderOrder;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_renderer_canvas_VectorTileLayer_.prototype.drawTileImage = function(\n    tile, frameState, layerState, x, y, w, h, gutter, transition) {\n  var vectorImageTile = /** @type {ol.VectorImageTile} */ (tile);\n  this.createReplayGroup_(vectorImageTile, frameState);\n  if (this.context) {\n    this.renderTileImage_(vectorImageTile, frameState, layerState);\n    _ol_renderer_canvas_TileLayer_.prototype.drawTileImage.apply(this, arguments);\n  }\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_renderer_canvas_VectorTileLayer_.prototype.forEachFeatureAtCoordinate = function(coordinate, frameState, hitTolerance, callback, thisArg) {\n  var resolution = frameState.viewState.resolution;\n  var rotation = frameState.viewState.rotation;\n  hitTolerance = hitTolerance == undefined ? 0 : hitTolerance;\n  var layer = this.getLayer();\n  /** @type {Object.<string, boolean>} */\n  var features = {};\n\n  /** @type {Array.<ol.VectorImageTile>} */\n  var renderedTiles = this.renderedTiles;\n\n  var source = /** @type {ol.source.VectorTile} */ (layer.getSource());\n  var tileGrid = source.getTileGridForProjection(frameState.viewState.projection);\n  var bufferedExtent, found;\n  var i, ii, replayGroup;\n  var tile, tileCoord, tileExtent;\n  for (i = 0, ii = renderedTiles.length; i < ii; ++i) {\n    tile = renderedTiles[i];\n    tileCoord = tile.wrappedTileCoord;\n    tileExtent = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent);\n    bufferedExtent = _ol_extent_.buffer(tileExtent, hitTolerance * resolution, bufferedExtent);\n    if (!_ol_extent_.containsCoordinate(bufferedExtent, coordinate)) {\n      continue;\n    }\n    for (var t = 0, tt = tile.tileKeys.length; t < tt; ++t) {\n      var sourceTile = tile.getTile(tile.tileKeys[t]);\n      if (sourceTile.getState() == _ol_TileState_.ERROR) {\n        continue;\n      }\n      replayGroup = sourceTile.getReplayGroup(layer, tile.tileCoord.toString());\n      found = found || replayGroup.forEachFeatureAtCoordinate(\n          coordinate, resolution, rotation, hitTolerance, {},\n          /**\n           * @param {ol.Feature|ol.render.Feature} feature Feature.\n           * @return {?} Callback result.\n           */\n          function(feature) {\n            var key = _ol_.getUid(feature).toString();\n            if (!(key in features)) {\n              features[key] = true;\n              return callback.call(thisArg, feature, layer);\n            }\n          }, null);\n    }\n  }\n  return found;\n};\n\n\n/**\n * @param {ol.VectorTile} tile Tile.\n * @param {olx.FrameState} frameState Frame state.\n * @return {ol.Transform} transform Transform.\n * @private\n */\n_ol_renderer_canvas_VectorTileLayer_.prototype.getReplayTransform_ = function(tile, frameState) {\n  var layer = this.getLayer();\n  var source = /** @type {ol.source.VectorTile} */ (layer.getSource());\n  var tileGrid = source.getTileGrid();\n  var tileCoord = tile.tileCoord;\n  var tileResolution = tileGrid.getResolution(tileCoord[0]);\n  var viewState = frameState.viewState;\n  var pixelRatio = frameState.pixelRatio;\n  var renderResolution = viewState.resolution / pixelRatio;\n  var tileExtent = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent);\n  var center = viewState.center;\n  var origin = _ol_extent_.getTopLeft(tileExtent);\n  var size = frameState.size;\n  var offsetX = Math.round(pixelRatio * size[0] / 2);\n  var offsetY = Math.round(pixelRatio * size[1] / 2);\n  return _ol_transform_.compose(this.tmpTransform_,\n      offsetX, offsetY,\n      tileResolution / renderResolution, tileResolution / renderResolution,\n      viewState.rotation,\n      (origin[0] - center[0]) / tileResolution,\n      (center[1] - origin[1]) / tileResolution);\n};\n\n\n/**\n * @param {ol.events.Event} event Event.\n */\n_ol_renderer_canvas_VectorTileLayer_.prototype.handleFontsChanged_ = function(event) {\n  var layer = this.getLayer();\n  if (layer.getVisible() && this.renderedLayerRevision_ !== undefined) {\n    layer.changed();\n  }\n};\n\n\n/**\n * Handle changes in image style state.\n * @param {ol.events.Event} event Image style change event.\n * @private\n */\n_ol_renderer_canvas_VectorTileLayer_.prototype.handleStyleImageChange_ = function(event) {\n  this.renderIfReadyAndVisible();\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_renderer_canvas_VectorTileLayer_.prototype.postCompose = function(context, frameState, layerState) {\n  var layer = this.getLayer();\n  var declutterReplays = layer.getDeclutter() ? {} : null;\n  var source = /** @type {ol.source.VectorTile} */ (layer.getSource());\n  var renderMode = layer.getRenderMode();\n  var replayTypes = _ol_renderer_canvas_VectorTileLayer_.VECTOR_REPLAYS[renderMode];\n  var pixelRatio = frameState.pixelRatio;\n  var rotation = frameState.viewState.rotation;\n  var size = frameState.size;\n  var offsetX, offsetY;\n  if (rotation) {\n    offsetX = Math.round(pixelRatio * size[0] / 2);\n    offsetY = Math.round(pixelRatio * size[1] / 2);\n    _ol_render_canvas_.rotateAtOffset(context, -rotation, offsetX, offsetY);\n  }\n  if (declutterReplays) {\n    this.declutterTree_.clear();\n  }\n  var tiles = this.renderedTiles;\n  var tileGrid = source.getTileGridForProjection(frameState.viewState.projection);\n  var clips = [];\n  var zs = [];\n  for (var i = tiles.length - 1; i >= 0; --i) {\n    var tile = /** @type {ol.VectorImageTile} */ (tiles[i]);\n    if (tile.getState() == _ol_TileState_.ABORT) {\n      continue;\n    }\n    var tileCoord = tile.tileCoord;\n    var worldOffset = tileGrid.getTileCoordExtent(tileCoord)[0] -\n        tileGrid.getTileCoordExtent(tile.wrappedTileCoord)[0];\n    var transform = undefined;\n    for (var t = 0, tt = tile.tileKeys.length; t < tt; ++t) {\n      var sourceTile = tile.getTile(tile.tileKeys[t]);\n      if (sourceTile.getState() == _ol_TileState_.ERROR) {\n        continue;\n      }\n      var replayGroup = sourceTile.getReplayGroup(layer, tileCoord.toString());\n      if (renderMode != _ol_layer_VectorTileRenderType_.VECTOR && !replayGroup.hasReplays(replayTypes)) {\n        continue;\n      }\n      if (!transform) {\n        transform = this.getTransform(frameState, worldOffset);\n      }\n      var currentZ = sourceTile.tileCoord[0];\n      var currentClip = replayGroup.getClipCoords(transform);\n      context.save();\n      context.globalAlpha = layerState.opacity;\n      // Create a clip mask for regions in this low resolution tile that are\n      // already filled by a higher resolution tile\n      for (var j = 0, jj = clips.length; j < jj; ++j) {\n        var clip = clips[j];\n        if (currentZ < zs[j]) {\n          context.beginPath();\n          // counter-clockwise (outer ring) for current tile\n          context.moveTo(currentClip[0], currentClip[1]);\n          context.lineTo(currentClip[2], currentClip[3]);\n          context.lineTo(currentClip[4], currentClip[5]);\n          context.lineTo(currentClip[6], currentClip[7]);\n          // clockwise (inner ring) for higher resolution tile\n          context.moveTo(clip[6], clip[7]);\n          context.lineTo(clip[4], clip[5]);\n          context.lineTo(clip[2], clip[3]);\n          context.lineTo(clip[0], clip[1]);\n          context.clip();\n        }\n      }\n      replayGroup.replay(context, transform, rotation, {}, replayTypes, declutterReplays);\n      context.restore();\n      clips.push(currentClip);\n      zs.push(currentZ);\n    }\n  }\n  if (declutterReplays) {\n    _ol_render_canvas_ReplayGroup_.replayDeclutter(declutterReplays, context, rotation);\n  }\n  if (rotation) {\n    _ol_render_canvas_.rotateAtOffset(context, rotation,\n        /** @type {number} */ (offsetX), /** @type {number} */ (offsetY));\n  }\n  _ol_renderer_canvas_TileLayer_.prototype.postCompose.apply(this, arguments);\n};\n\n\n/**\n * @param {ol.Feature|ol.render.Feature} feature Feature.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {(ol.style.Style|Array.<ol.style.Style>)} styles The style or array of\n *     styles.\n * @param {ol.render.canvas.ReplayGroup} replayGroup Replay group.\n * @return {boolean} `true` if an image is loading.\n */\n_ol_renderer_canvas_VectorTileLayer_.prototype.renderFeature = function(feature, squaredTolerance, styles, replayGroup) {\n  if (!styles) {\n    return false;\n  }\n  var loading = false;\n  if (Array.isArray(styles)) {\n    for (var i = 0, ii = styles.length; i < ii; ++i) {\n      loading = _ol_renderer_vector_.renderFeature(\n          replayGroup, feature, styles[i], squaredTolerance,\n          this.handleStyleImageChange_, this) || loading;\n    }\n  } else {\n    loading = _ol_renderer_vector_.renderFeature(\n        replayGroup, feature, styles, squaredTolerance,\n        this.handleStyleImageChange_, this);\n  }\n  return loading;\n};\n\n\n/**\n * @param {ol.VectorImageTile} tile Tile.\n * @param {olx.FrameState} frameState Frame state.\n * @param {ol.LayerState} layerState Layer state.\n * @private\n */\n_ol_renderer_canvas_VectorTileLayer_.prototype.renderTileImage_ = function(\n    tile, frameState, layerState) {\n  var layer = this.getLayer();\n  var replayState = tile.getReplayState(layer);\n  var revision = layer.getRevision();\n  var replays = _ol_renderer_canvas_VectorTileLayer_.IMAGE_REPLAYS[layer.getRenderMode()];\n  if (replays && replayState.renderedTileRevision !== revision) {\n    replayState.renderedTileRevision = revision;\n    var tileCoord = tile.wrappedTileCoord;\n    var z = tileCoord[0];\n    var pixelRatio = frameState.pixelRatio;\n    var source = /** @type {ol.source.VectorTile} */ (layer.getSource());\n    var tileGrid = source.getTileGridForProjection(frameState.viewState.projection);\n    var resolution = tileGrid.getResolution(z);\n    var context = tile.getContext(layer);\n    var size = source.getTilePixelSize(z, pixelRatio, frameState.viewState.projection);\n    context.canvas.width = size[0];\n    context.canvas.height = size[1];\n    var tileExtent = tileGrid.getTileCoordExtent(tileCoord);\n    for (var i = 0, ii = tile.tileKeys.length; i < ii; ++i) {\n      var sourceTile = tile.getTile(tile.tileKeys[i]);\n      if (sourceTile.getState() == _ol_TileState_.ERROR) {\n        continue;\n      }\n      var pixelScale = pixelRatio / resolution;\n      var transform = _ol_transform_.reset(this.tmpTransform_);\n      _ol_transform_.scale(transform, pixelScale, -pixelScale);\n      _ol_transform_.translate(transform, -tileExtent[0], -tileExtent[3]);\n      var replayGroup = sourceTile.getReplayGroup(layer, tile.tileCoord.toString());\n      replayGroup.replay(context, transform, 0, {}, replays);\n    }\n  }\n};\nexport default _ol_renderer_canvas_VectorTileLayer_;\n","import _ol_functions_ from '../functions.js';\n\n/**\n * @constructor\n * @abstract\n * @param {string} source Source.\n * @struct\n */\nvar _ol_webgl_Shader_ = function(source) {\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this.source_ = source;\n\n};\n\n\n/**\n * @abstract\n * @return {number} Type.\n */\n_ol_webgl_Shader_.prototype.getType = function() {};\n\n\n/**\n * @return {string} Source.\n */\n_ol_webgl_Shader_.prototype.getSource = function() {\n  return this.source_;\n};\n\n\n/**\n * @return {boolean} Is animated?\n */\n_ol_webgl_Shader_.prototype.isAnimated = _ol_functions_.FALSE;\nexport default _ol_webgl_Shader_;\n","import _ol_ from '../index.js';\nimport _ol_webgl_ from '../webgl.js';\nimport _ol_webgl_Shader_ from '../webgl/shader.js';\n\n/**\n * @constructor\n * @extends {ol.webgl.Shader}\n * @param {string} source Source.\n * @struct\n */\nvar _ol_webgl_Fragment_ = function(source) {\n  _ol_webgl_Shader_.call(this, source);\n};\n\n_ol_.inherits(_ol_webgl_Fragment_, _ol_webgl_Shader_);\n\n\n/**\n * @inheritDoc\n */\n_ol_webgl_Fragment_.prototype.getType = function() {\n  return _ol_webgl_.FRAGMENT_SHADER;\n};\nexport default _ol_webgl_Fragment_;\n","import _ol_ from '../index.js';\nimport _ol_webgl_ from '../webgl.js';\nimport _ol_webgl_Shader_ from '../webgl/shader.js';\n\n/**\n * @constructor\n * @extends {ol.webgl.Shader}\n * @param {string} source Source.\n * @struct\n */\nvar _ol_webgl_Vertex_ = function(source) {\n  _ol_webgl_Shader_.call(this, source);\n};\n\n_ol_.inherits(_ol_webgl_Vertex_, _ol_webgl_Shader_);\n\n\n/**\n * @inheritDoc\n */\n_ol_webgl_Vertex_.prototype.getType = function() {\n  return _ol_webgl_.VERTEX_SHADER;\n};\nexport default _ol_webgl_Vertex_;\n","// This file is automatically generated, do not edit\nimport _ol_ from '../../../index.js';\nimport _ol_webgl_Fragment_ from '../../../webgl/fragment.js';\nimport _ol_webgl_Vertex_ from '../../../webgl/vertex.js';\nvar _ol_render_webgl_circlereplay_defaultshader_ = {};\n\n\n_ol_render_webgl_circlereplay_defaultshader_.fragment = new _ol_webgl_Fragment_(_ol_.DEBUG_WEBGL ?\n  'precision mediump float;\\nvarying vec2 v_center;\\nvarying vec2 v_offset;\\nvarying float v_halfWidth;\\nvarying float v_pixelRatio;\\n\\n\\n\\nuniform float u_opacity;\\nuniform vec4 u_fillColor;\\nuniform vec4 u_strokeColor;\\nuniform vec2 u_size;\\n\\nvoid main(void) {\\n  vec2 windowCenter = vec2((v_center.x + 1.0) / 2.0 * u_size.x * v_pixelRatio,\\n      (v_center.y + 1.0) / 2.0 * u_size.y * v_pixelRatio);\\n  vec2 windowOffset = vec2((v_offset.x + 1.0) / 2.0 * u_size.x * v_pixelRatio,\\n      (v_offset.y + 1.0) / 2.0 * u_size.y * v_pixelRatio);\\n  float radius = length(windowCenter - windowOffset);\\n  float dist = length(windowCenter - gl_FragCoord.xy);\\n  if (dist > radius + v_halfWidth) {\\n    if (u_strokeColor.a == 0.0) {\\n      gl_FragColor = u_fillColor;\\n    } else {\\n      gl_FragColor = u_strokeColor;\\n    }\\n    gl_FragColor.a = gl_FragColor.a - (dist - (radius + v_halfWidth));\\n  } else if (u_fillColor.a == 0.0) {\\n    // Hooray, no fill, just stroke. We can use real antialiasing.\\n    gl_FragColor = u_strokeColor;\\n    if (dist < radius - v_halfWidth) {\\n      gl_FragColor.a = gl_FragColor.a - (radius - v_halfWidth - dist);\\n    }\\n  } else {\\n    gl_FragColor = u_fillColor;\\n    float strokeDist = radius - v_halfWidth;\\n    float antialias = 2.0 * v_pixelRatio;\\n    if (dist > strokeDist) {\\n      gl_FragColor = u_strokeColor;\\n    } else if (dist >= strokeDist - antialias) {\\n      float step = smoothstep(strokeDist - antialias, strokeDist, dist);\\n      gl_FragColor = mix(u_fillColor, u_strokeColor, step);\\n    }\\n  }\\n  gl_FragColor.a = gl_FragColor.a * u_opacity;\\n  if (gl_FragColor.a <= 0.0) {\\n    discard;\\n  }\\n}\\n' :\n  'precision mediump float;varying vec2 a;varying vec2 b;varying float c;varying float d;uniform float m;uniform vec4 n;uniform vec4 o;uniform vec2 p;void main(void){vec2 windowCenter=vec2((a.x+1.0)/2.0*p.x*d,(a.y+1.0)/2.0*p.y*d);vec2 windowOffset=vec2((b.x+1.0)/2.0*p.x*d,(b.y+1.0)/2.0*p.y*d);float radius=length(windowCenter-windowOffset);float dist=length(windowCenter-gl_FragCoord.xy);if(dist>radius+c){if(o.a==0.0){gl_FragColor=n;}else{gl_FragColor=o;}gl_FragColor.a=gl_FragColor.a-(dist-(radius+c));}else if(n.a==0.0){gl_FragColor=o;if(dist<radius-c){gl_FragColor.a=gl_FragColor.a-(radius-c-dist);}} else{gl_FragColor=n;float strokeDist=radius-c;float antialias=2.0*d;if(dist>strokeDist){gl_FragColor=o;}else if(dist>=strokeDist-antialias){float step=smoothstep(strokeDist-antialias,strokeDist,dist);gl_FragColor=mix(n,o,step);}} gl_FragColor.a=gl_FragColor.a*m;if(gl_FragColor.a<=0.0){discard;}}');\n\n_ol_render_webgl_circlereplay_defaultshader_.vertex = new _ol_webgl_Vertex_(_ol_.DEBUG_WEBGL ?\n  'varying vec2 v_center;\\nvarying vec2 v_offset;\\nvarying float v_halfWidth;\\nvarying float v_pixelRatio;\\n\\n\\nattribute vec2 a_position;\\nattribute float a_instruction;\\nattribute float a_radius;\\n\\nuniform mat4 u_projectionMatrix;\\nuniform mat4 u_offsetScaleMatrix;\\nuniform mat4 u_offsetRotateMatrix;\\nuniform float u_lineWidth;\\nuniform float u_pixelRatio;\\n\\nvoid main(void) {\\n  mat4 offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\\n  v_center = vec4(u_projectionMatrix * vec4(a_position, 0.0, 1.0)).xy;\\n  v_pixelRatio = u_pixelRatio;\\n  float lineWidth = u_lineWidth * u_pixelRatio;\\n  v_halfWidth = lineWidth / 2.0;\\n  if (lineWidth == 0.0) {\\n    lineWidth = 2.0 * u_pixelRatio;\\n  }\\n  vec2 offset;\\n  // Radius with anitaliasing (roughly).\\n  float radius = a_radius + 3.0 * u_pixelRatio;\\n  // Until we get gl_VertexID in WebGL, we store an instruction.\\n  if (a_instruction == 0.0) {\\n    // Offsetting the edges of the triangle by lineWidth / 2 is necessary, however\\n    // we should also leave some space for the antialiasing, thus we offset by lineWidth.\\n    offset = vec2(-1.0, 1.0);\\n  } else if (a_instruction == 1.0) {\\n    offset = vec2(-1.0, -1.0);\\n  } else if (a_instruction == 2.0) {\\n    offset = vec2(1.0, -1.0);\\n  } else {\\n    offset = vec2(1.0, 1.0);\\n  }\\n\\n  gl_Position = u_projectionMatrix * vec4(a_position + offset * radius, 0.0, 1.0) +\\n      offsetMatrix * vec4(offset * lineWidth, 0.0, 0.0);\\n  v_offset = vec4(u_projectionMatrix * vec4(a_position.x + a_radius, a_position.y,\\n      0.0, 1.0)).xy;\\n\\n  if (distance(v_center, v_offset) > 20000.0) {\\n    gl_Position = vec4(v_center, 0.0, 1.0);\\n  }\\n}\\n\\n\\n' :\n  'varying vec2 a;varying vec2 b;varying float c;varying float d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;uniform float k;uniform float l;void main(void){mat4 offsetMatrix=i*j;a=vec4(h*vec4(e,0.0,1.0)).xy;d=l;float lineWidth=k*l;c=lineWidth/2.0;if(lineWidth==0.0){lineWidth=2.0*l;}vec2 offset;float radius=g+3.0*l;//Until we get gl_VertexID in WebGL,we store an instruction.if(f==0.0){//Offsetting the edges of the triangle by lineWidth/2 is necessary,however//we should also leave some space for the antialiasing,thus we offset by lineWidth.offset=vec2(-1.0,1.0);}else if(f==1.0){offset=vec2(-1.0,-1.0);}else if(f==2.0){offset=vec2(1.0,-1.0);}else{offset=vec2(1.0,1.0);}gl_Position=h*vec4(e+offset*radius,0.0,1.0)+offsetMatrix*vec4(offset*lineWidth,0.0,0.0);b=vec4(h*vec4(e.x+g,e.y,0.0,1.0)).xy;if(distance(a,b)>20000.0){gl_Position=vec4(a,0.0,1.0);}}');\nexport default _ol_render_webgl_circlereplay_defaultshader_;","// This file is automatically generated, do not edit\nimport _ol_ from '../../../../index.js';\n\n/**\n * @constructor\n * @param {WebGLRenderingContext} gl GL.\n * @param {WebGLProgram} program Program.\n * @struct\n */\nvar _ol_render_webgl_circlereplay_defaultshader_Locations_ = function(gl, program) {\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_projectionMatrix = gl.getUniformLocation(\n      program, _ol_.DEBUG_WEBGL ? 'u_projectionMatrix' : 'h');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_offsetScaleMatrix = gl.getUniformLocation(\n      program, _ol_.DEBUG_WEBGL ? 'u_offsetScaleMatrix' : 'i');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_offsetRotateMatrix = gl.getUniformLocation(\n      program, _ol_.DEBUG_WEBGL ? 'u_offsetRotateMatrix' : 'j');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_lineWidth = gl.getUniformLocation(\n      program, _ol_.DEBUG_WEBGL ? 'u_lineWidth' : 'k');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_pixelRatio = gl.getUniformLocation(\n      program, _ol_.DEBUG_WEBGL ? 'u_pixelRatio' : 'l');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_opacity = gl.getUniformLocation(\n      program, _ol_.DEBUG_WEBGL ? 'u_opacity' : 'm');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_fillColor = gl.getUniformLocation(\n      program, _ol_.DEBUG_WEBGL ? 'u_fillColor' : 'n');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_strokeColor = gl.getUniformLocation(\n      program, _ol_.DEBUG_WEBGL ? 'u_strokeColor' : 'o');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_size = gl.getUniformLocation(\n      program, _ol_.DEBUG_WEBGL ? 'u_size' : 'p');\n\n  /**\n   * @type {number}\n   */\n  this.a_position = gl.getAttribLocation(\n      program, _ol_.DEBUG_WEBGL ? 'a_position' : 'e');\n\n  /**\n   * @type {number}\n   */\n  this.a_instruction = gl.getAttribLocation(\n      program, _ol_.DEBUG_WEBGL ? 'a_instruction' : 'f');\n\n  /**\n   * @type {number}\n   */\n  this.a_radius = gl.getAttribLocation(\n      program, _ol_.DEBUG_WEBGL ? 'a_radius' : 'g');\n};\n\nexport default _ol_render_webgl_circlereplay_defaultshader_Locations_;","var _ol_vec_Mat4_ = {};\n\n\n/**\n * @return {Array.<number>} 4x4 matrix representing a 3D identity transform.\n */\n_ol_vec_Mat4_.create = function() {\n  return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n};\n\n\n/**\n * @param {Array.<number>} mat4 Flattened 4x4 matrix receiving the result.\n * @param {ol.Transform} transform Transformation matrix.\n * @return {Array.<number>} 2D transformation matrix as flattened 4x4 matrix.\n */\n_ol_vec_Mat4_.fromTransform = function(mat4, transform) {\n  mat4[0] = transform[0];\n  mat4[1] = transform[1];\n  mat4[4] = transform[2];\n  mat4[5] = transform[3];\n  mat4[12] = transform[4];\n  mat4[13] = transform[5];\n  return mat4;\n};\nexport default _ol_vec_Mat4_;\n","import _ol_ from '../../index.js';\nimport _ol_extent_ from '../../extent.js';\nimport _ol_render_VectorContext_ from '../vectorcontext.js';\nimport _ol_transform_ from '../../transform.js';\nimport _ol_vec_Mat4_ from '../../vec/mat4.js';\nimport _ol_webgl_ from '../../webgl.js';\n\n/**\n * @constructor\n * @abstract\n * @extends {ol.render.VectorContext}\n * @param {number} tolerance Tolerance.\n * @param {ol.Extent} maxExtent Max extent.\n * @struct\n */\nvar _ol_render_webgl_Replay_ = function(tolerance, maxExtent) {\n  _ol_render_VectorContext_.call(this);\n\n  /**\n   * @protected\n   * @type {number}\n   */\n  this.tolerance = tolerance;\n\n  /**\n   * @protected\n   * @const\n   * @type {ol.Extent}\n   */\n  this.maxExtent = maxExtent;\n\n  /**\n   * The origin of the coordinate system for the point coordinates sent to\n   * the GPU. To eliminate jitter caused by precision problems in the GPU\n   * we use the \"Rendering Relative to Eye\" technique described in the \"3D\n   * Engine Design for Virtual Globes\" book.\n   * @protected\n   * @type {ol.Coordinate}\n   */\n  this.origin = _ol_extent_.getCenter(maxExtent);\n\n  /**\n   * @private\n   * @type {ol.Transform}\n   */\n  this.projectionMatrix_ = _ol_transform_.create();\n\n  /**\n   * @private\n   * @type {ol.Transform}\n   */\n  this.offsetRotateMatrix_ = _ol_transform_.create();\n\n  /**\n   * @private\n   * @type {ol.Transform}\n   */\n  this.offsetScaleMatrix_ = _ol_transform_.create();\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.tmpMat4_ = _ol_vec_Mat4_.create();\n\n  /**\n   * @protected\n   * @type {Array.<number>}\n   */\n  this.indices = [];\n\n  /**\n   * @protected\n   * @type {?ol.webgl.Buffer}\n   */\n  this.indicesBuffer = null;\n\n  /**\n   * Start index per feature (the index).\n   * @protected\n   * @type {Array.<number>}\n   */\n  this.startIndices = [];\n\n  /**\n   * Start index per feature (the feature).\n   * @protected\n   * @type {Array.<ol.Feature|ol.render.Feature>}\n   */\n  this.startIndicesFeature = [];\n\n  /**\n   * @protected\n   * @type {Array.<number>}\n   */\n  this.vertices = [];\n\n  /**\n   * @protected\n   * @type {?ol.webgl.Buffer}\n   */\n  this.verticesBuffer = null;\n\n  /**\n   * Optional parameter for PolygonReplay instances.\n   * @protected\n   * @type {ol.render.webgl.LineStringReplay|undefined}\n   */\n  this.lineStringReplay = undefined;\n\n};\n\n_ol_.inherits(_ol_render_webgl_Replay_, _ol_render_VectorContext_);\n\n\n/**\n * @abstract\n * @param {ol.webgl.Context} context WebGL context.\n * @return {function()} Delete resources function.\n */\n_ol_render_webgl_Replay_.prototype.getDeleteResourcesFunction = function(context) {};\n\n\n/**\n * @abstract\n * @param {ol.webgl.Context} context Context.\n */\n_ol_render_webgl_Replay_.prototype.finish = function(context) {};\n\n\n/**\n * @abstract\n * @protected\n * @param {WebGLRenderingContext} gl gl.\n * @param {ol.webgl.Context} context Context.\n * @param {ol.Size} size Size.\n * @param {number} pixelRatio Pixel ratio.\n * @return {ol.render.webgl.circlereplay.defaultshader.Locations|\n            ol.render.webgl.linestringreplay.defaultshader.Locations|\n            ol.render.webgl.polygonreplay.defaultshader.Locations|\n            ol.render.webgl.texturereplay.defaultshader.Locations} Locations.\n */\n_ol_render_webgl_Replay_.prototype.setUpProgram = function(gl, context, size, pixelRatio) {};\n\n\n/**\n * @abstract\n * @protected\n * @param {WebGLRenderingContext} gl gl.\n * @param {ol.render.webgl.circlereplay.defaultshader.Locations|\n           ol.render.webgl.linestringreplay.defaultshader.Locations|\n           ol.render.webgl.polygonreplay.defaultshader.Locations|\n           ol.render.webgl.texturereplay.defaultshader.Locations} locations Locations.\n */\n_ol_render_webgl_Replay_.prototype.shutDownProgram = function(gl, locations) {};\n\n\n/**\n * @abstract\n * @protected\n * @param {WebGLRenderingContext} gl gl.\n * @param {ol.webgl.Context} context Context.\n * @param {Object.<string, boolean>} skippedFeaturesHash Ids of features\n *  to skip.\n * @param {boolean} hitDetection Hit detection mode.\n */\n_ol_render_webgl_Replay_.prototype.drawReplay = function(gl, context, skippedFeaturesHash, hitDetection) {};\n\n\n/**\n * @abstract\n * @protected\n * @param {WebGLRenderingContext} gl gl.\n * @param {ol.webgl.Context} context Context.\n * @param {Object.<string, boolean>} skippedFeaturesHash Ids of features\n *  to skip.\n * @param {function((ol.Feature|ol.render.Feature)): T|undefined} featureCallback Feature callback.\n * @param {ol.Extent=} opt_hitExtent Hit extent: Only features intersecting\n *  this extent are checked.\n * @return {T|undefined} Callback result.\n * @template T\n */\n_ol_render_webgl_Replay_.prototype.drawHitDetectionReplayOneByOne = function(gl, context, skippedFeaturesHash, featureCallback, opt_hitExtent) {};\n\n\n/**\n * @protected\n * @param {WebGLRenderingContext} gl gl.\n * @param {ol.webgl.Context} context Context.\n * @param {Object.<string, boolean>} skippedFeaturesHash Ids of features\n *  to skip.\n * @param {function((ol.Feature|ol.render.Feature)): T|undefined} featureCallback Feature callback.\n * @param {boolean} oneByOne Draw features one-by-one for the hit-detecion.\n * @param {ol.Extent=} opt_hitExtent Hit extent: Only features intersecting\n *  this extent are checked.\n * @return {T|undefined} Callback result.\n * @template T\n */\n_ol_render_webgl_Replay_.prototype.drawHitDetectionReplay = function(gl, context, skippedFeaturesHash,\n    featureCallback, oneByOne, opt_hitExtent) {\n  if (!oneByOne) {\n    // draw all hit-detection features in \"once\" (by texture group)\n    return this.drawHitDetectionReplayAll(gl, context,\n        skippedFeaturesHash, featureCallback);\n  } else {\n    // draw hit-detection features one by one\n    return this.drawHitDetectionReplayOneByOne(gl, context,\n        skippedFeaturesHash, featureCallback, opt_hitExtent);\n  }\n};\n\n\n/**\n * @protected\n * @param {WebGLRenderingContext} gl gl.\n * @param {ol.webgl.Context} context Context.\n * @param {Object.<string, boolean>} skippedFeaturesHash Ids of features\n *  to skip.\n * @param {function((ol.Feature|ol.render.Feature)): T|undefined} featureCallback Feature callback.\n * @return {T|undefined} Callback result.\n * @template T\n */\n_ol_render_webgl_Replay_.prototype.drawHitDetectionReplayAll = function(gl, context, skippedFeaturesHash,\n    featureCallback) {\n  gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n  this.drawReplay(gl, context, skippedFeaturesHash, true);\n\n  var result = featureCallback(null);\n  if (result) {\n    return result;\n  } else {\n    return undefined;\n  }\n};\n\n\n/**\n * @param {ol.webgl.Context} context Context.\n * @param {ol.Coordinate} center Center.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @param {ol.Size} size Size.\n * @param {number} pixelRatio Pixel ratio.\n * @param {number} opacity Global opacity.\n * @param {Object.<string, boolean>} skippedFeaturesHash Ids of features\n *  to skip.\n * @param {function((ol.Feature|ol.render.Feature)): T|undefined} featureCallback Feature callback.\n * @param {boolean} oneByOne Draw features one-by-one for the hit-detecion.\n * @param {ol.Extent=} opt_hitExtent Hit extent: Only features intersecting\n *  this extent are checked.\n * @return {T|undefined} Callback result.\n * @template T\n */\n_ol_render_webgl_Replay_.prototype.replay = function(context,\n    center, resolution, rotation, size, pixelRatio,\n    opacity, skippedFeaturesHash,\n    featureCallback, oneByOne, opt_hitExtent) {\n  var gl = context.getGL();\n  var tmpStencil, tmpStencilFunc, tmpStencilMaskVal, tmpStencilRef, tmpStencilMask,\n      tmpStencilOpFail, tmpStencilOpPass, tmpStencilOpZFail;\n\n  if (this.lineStringReplay) {\n    tmpStencil = gl.isEnabled(gl.STENCIL_TEST);\n    tmpStencilFunc = gl.getParameter(gl.STENCIL_FUNC);\n    tmpStencilMaskVal = gl.getParameter(gl.STENCIL_VALUE_MASK);\n    tmpStencilRef = gl.getParameter(gl.STENCIL_REF);\n    tmpStencilMask = gl.getParameter(gl.STENCIL_WRITEMASK);\n    tmpStencilOpFail = gl.getParameter(gl.STENCIL_FAIL);\n    tmpStencilOpPass = gl.getParameter(gl.STENCIL_PASS_DEPTH_PASS);\n    tmpStencilOpZFail = gl.getParameter(gl.STENCIL_PASS_DEPTH_FAIL);\n\n    gl.enable(gl.STENCIL_TEST);\n    gl.clear(gl.STENCIL_BUFFER_BIT);\n    gl.stencilMask(255);\n    gl.stencilFunc(gl.ALWAYS, 1, 255);\n    gl.stencilOp(gl.KEEP, gl.KEEP, gl.REPLACE);\n\n    this.lineStringReplay.replay(context,\n        center, resolution, rotation, size, pixelRatio,\n        opacity, skippedFeaturesHash,\n        featureCallback, oneByOne, opt_hitExtent);\n\n    gl.stencilMask(0);\n    gl.stencilFunc(gl.NOTEQUAL, 1, 255);\n  }\n\n  context.bindBuffer(_ol_webgl_.ARRAY_BUFFER, this.verticesBuffer);\n\n  context.bindBuffer(_ol_webgl_.ELEMENT_ARRAY_BUFFER, this.indicesBuffer);\n\n  var locations = this.setUpProgram(gl, context, size, pixelRatio);\n\n  // set the \"uniform\" values\n  var projectionMatrix = _ol_transform_.reset(this.projectionMatrix_);\n  _ol_transform_.scale(projectionMatrix, 2 / (resolution * size[0]), 2 / (resolution * size[1]));\n  _ol_transform_.rotate(projectionMatrix, -rotation);\n  _ol_transform_.translate(projectionMatrix, -(center[0] - this.origin[0]), -(center[1] - this.origin[1]));\n\n  var offsetScaleMatrix = _ol_transform_.reset(this.offsetScaleMatrix_);\n  _ol_transform_.scale(offsetScaleMatrix, 2 / size[0], 2 / size[1]);\n\n  var offsetRotateMatrix = _ol_transform_.reset(this.offsetRotateMatrix_);\n  if (rotation !== 0) {\n    _ol_transform_.rotate(offsetRotateMatrix, -rotation);\n  }\n\n  gl.uniformMatrix4fv(locations.u_projectionMatrix, false,\n      _ol_vec_Mat4_.fromTransform(this.tmpMat4_, projectionMatrix));\n  gl.uniformMatrix4fv(locations.u_offsetScaleMatrix, false,\n      _ol_vec_Mat4_.fromTransform(this.tmpMat4_, offsetScaleMatrix));\n  gl.uniformMatrix4fv(locations.u_offsetRotateMatrix, false,\n      _ol_vec_Mat4_.fromTransform(this.tmpMat4_, offsetRotateMatrix));\n  gl.uniform1f(locations.u_opacity, opacity);\n\n  // draw!\n  var result;\n  if (featureCallback === undefined) {\n    this.drawReplay(gl, context, skippedFeaturesHash, false);\n  } else {\n    // draw feature by feature for the hit-detection\n    result = this.drawHitDetectionReplay(gl, context, skippedFeaturesHash,\n        featureCallback, oneByOne, opt_hitExtent);\n  }\n\n  // disable the vertex attrib arrays\n  this.shutDownProgram(gl, locations);\n\n  if (this.lineStringReplay) {\n    if (!tmpStencil) {\n      gl.disable(gl.STENCIL_TEST);\n    }\n    gl.clear(gl.STENCIL_BUFFER_BIT);\n    gl.stencilFunc(/** @type {number} */ (tmpStencilFunc),\n        /** @type {number} */ (tmpStencilRef), /** @type {number} */ (tmpStencilMaskVal));\n    gl.stencilMask(/** @type {number} */ (tmpStencilMask));\n    gl.stencilOp(/** @type {number} */ (tmpStencilOpFail),\n        /** @type {number} */ (tmpStencilOpZFail), /** @type {number} */ (tmpStencilOpPass));\n  }\n\n  return result;\n};\n\n/**\n * @protected\n * @param {WebGLRenderingContext} gl gl.\n * @param {ol.webgl.Context} context Context.\n * @param {number} start Start index.\n * @param {number} end End index.\n */\n_ol_render_webgl_Replay_.prototype.drawElements = function(\n    gl, context, start, end) {\n  var elementType = context.hasOESElementIndexUint ?\n    _ol_webgl_.UNSIGNED_INT : _ol_webgl_.UNSIGNED_SHORT;\n  var elementSize = context.hasOESElementIndexUint ? 4 : 2;\n\n  var numItems = end - start;\n  var offsetInBytes = start * elementSize;\n  gl.drawElements(_ol_webgl_.TRIANGLES, numItems, elementType, offsetInBytes);\n};\nexport default _ol_render_webgl_Replay_;\n","var _ol_render_webgl_ = {};\n\n\n/**\n * @const\n * @type {string}\n */\n_ol_render_webgl_.defaultFont = '10px sans-serif';\n\n\n/**\n * @const\n * @type {ol.Color}\n */\n_ol_render_webgl_.defaultFillStyle = [0.0, 0.0, 0.0, 1.0];\n\n\n/**\n * @const\n * @type {string}\n */\n_ol_render_webgl_.defaultLineCap = 'round';\n\n\n/**\n * @const\n * @type {Array.<number>}\n */\n_ol_render_webgl_.defaultLineDash = [];\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_render_webgl_.defaultLineDashOffset = 0;\n\n\n/**\n * @const\n * @type {string}\n */\n_ol_render_webgl_.defaultLineJoin = 'round';\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_render_webgl_.defaultMiterLimit = 10;\n\n/**\n * @const\n * @type {ol.Color}\n */\n_ol_render_webgl_.defaultStrokeStyle = [0.0, 0.0, 0.0, 1.0];\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_render_webgl_.defaultTextAlign = 0.5;\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_render_webgl_.defaultTextBaseline = 0.5;\n\n\n/**\n * @const\n * @type {number}\n */\n_ol_render_webgl_.defaultLineWidth = 1;\n\n/**\n * Calculates the orientation of a triangle based on the determinant method.\n * @param {number} x1 First X coordinate.\n * @param {number} y1 First Y coordinate.\n * @param {number} x2 Second X coordinate.\n * @param {number} y2 Second Y coordinate.\n * @param {number} x3 Third X coordinate.\n * @param {number} y3 Third Y coordinate.\n * @return {boolean|undefined} Triangle is clockwise.\n */\n_ol_render_webgl_.triangleIsCounterClockwise = function(x1, y1, x2, y2, x3, y3) {\n  var area = (x2 - x1) * (y3 - y1) - (x3 - x1) * (y2 - y1);\n  return (area <= _ol_render_webgl_.EPSILON && area >= -_ol_render_webgl_.EPSILON) ?\n    undefined : area > 0;\n};\n\n/**\n * @const\n * @type {number}\n */\n_ol_render_webgl_.EPSILON = Number.EPSILON || 2.220446049250313e-16;\nexport default _ol_render_webgl_;\n","import _ol_webgl_ from '../webgl.js';\n\n/**\n * @constructor\n * @param {Array.<number>=} opt_arr Array.\n * @param {number=} opt_usage Usage.\n * @struct\n */\nvar _ol_webgl_Buffer_ = function(opt_arr, opt_usage) {\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.arr_ = opt_arr !== undefined ? opt_arr : [];\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.usage_ = opt_usage !== undefined ?\n    opt_usage : _ol_webgl_Buffer_.Usage_.STATIC_DRAW;\n\n};\n\n\n/**\n * @return {Array.<number>} Array.\n */\n_ol_webgl_Buffer_.prototype.getArray = function() {\n  return this.arr_;\n};\n\n\n/**\n * @return {number} Usage.\n */\n_ol_webgl_Buffer_.prototype.getUsage = function() {\n  return this.usage_;\n};\n\n\n/**\n * @enum {number}\n * @private\n */\n_ol_webgl_Buffer_.Usage_ = {\n  STATIC_DRAW: _ol_webgl_.STATIC_DRAW,\n  STREAM_DRAW: _ol_webgl_.STREAM_DRAW,\n  DYNAMIC_DRAW: _ol_webgl_.DYNAMIC_DRAW\n};\nexport default _ol_webgl_Buffer_;\n","import _ol_ from '../../index.js';\nimport _ol_array_ from '../../array.js';\nimport _ol_color_ from '../../color.js';\nimport _ol_extent_ from '../../extent.js';\nimport _ol_obj_ from '../../obj.js';\nimport _ol_geom_flat_transform_ from '../../geom/flat/transform.js';\nimport _ol_render_webgl_circlereplay_defaultshader_ from '../webgl/circlereplay/defaultshader.js';\nimport _ol_render_webgl_circlereplay_defaultshader_Locations_ from '../webgl/circlereplay/defaultshader/locations.js';\nimport _ol_render_webgl_Replay_ from '../webgl/replay.js';\nimport _ol_render_webgl_ from '../webgl.js';\nimport _ol_webgl_ from '../../webgl.js';\nimport _ol_webgl_Buffer_ from '../../webgl/buffer.js';\n\n/**\n * @constructor\n * @extends {ol.render.webgl.Replay}\n * @param {number} tolerance Tolerance.\n * @param {ol.Extent} maxExtent Max extent.\n * @struct\n */\nvar _ol_render_webgl_CircleReplay_ = function(tolerance, maxExtent) {\n  _ol_render_webgl_Replay_.call(this, tolerance, maxExtent);\n\n  /**\n   * @private\n   * @type {ol.render.webgl.circlereplay.defaultshader.Locations}\n   */\n  this.defaultLocations_ = null;\n\n  /**\n   * @private\n   * @type {Array.<Array.<Array.<number>|number>>}\n   */\n  this.styles_ = [];\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.styleIndices_ = [];\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.radius_ = 0;\n\n  /**\n   * @private\n   * @type {{fillColor: (Array.<number>|null),\n   *         strokeColor: (Array.<number>|null),\n   *         lineDash: Array.<number>,\n   *         lineDashOffset: (number|undefined),\n   *         lineWidth: (number|undefined),\n   *         changed: boolean}|null}\n   */\n  this.state_ = {\n    fillColor: null,\n    strokeColor: null,\n    lineDash: null,\n    lineDashOffset: undefined,\n    lineWidth: undefined,\n    changed: false\n  };\n\n};\n\n_ol_.inherits(_ol_render_webgl_CircleReplay_, _ol_render_webgl_Replay_);\n\n\n/**\n * @private\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n */\n_ol_render_webgl_CircleReplay_.prototype.drawCoordinates_ = function(\n    flatCoordinates, offset, end, stride) {\n  var numVertices = this.vertices.length;\n  var numIndices = this.indices.length;\n  var n = numVertices / 4;\n  var i, ii;\n  for (i = offset, ii = end; i < ii; i += stride) {\n    this.vertices[numVertices++] = flatCoordinates[i];\n    this.vertices[numVertices++] = flatCoordinates[i + 1];\n    this.vertices[numVertices++] = 0;\n    this.vertices[numVertices++] = this.radius_;\n\n    this.vertices[numVertices++] = flatCoordinates[i];\n    this.vertices[numVertices++] = flatCoordinates[i + 1];\n    this.vertices[numVertices++] = 1;\n    this.vertices[numVertices++] = this.radius_;\n\n    this.vertices[numVertices++] = flatCoordinates[i];\n    this.vertices[numVertices++] = flatCoordinates[i + 1];\n    this.vertices[numVertices++] = 2;\n    this.vertices[numVertices++] = this.radius_;\n\n    this.vertices[numVertices++] = flatCoordinates[i];\n    this.vertices[numVertices++] = flatCoordinates[i + 1];\n    this.vertices[numVertices++] = 3;\n    this.vertices[numVertices++] = this.radius_;\n\n    this.indices[numIndices++] = n;\n    this.indices[numIndices++] = n + 1;\n    this.indices[numIndices++] = n + 2;\n\n    this.indices[numIndices++] = n + 2;\n    this.indices[numIndices++] = n + 3;\n    this.indices[numIndices++] = n;\n\n    n += 4;\n  }\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_CircleReplay_.prototype.drawCircle = function(circleGeometry, feature) {\n  var radius = circleGeometry.getRadius();\n  var stride = circleGeometry.getStride();\n  if (radius) {\n    this.startIndices.push(this.indices.length);\n    this.startIndicesFeature.push(feature);\n    if (this.state_.changed) {\n      this.styleIndices_.push(this.indices.length);\n      this.state_.changed = false;\n    }\n\n    this.radius_ = radius;\n    var flatCoordinates = circleGeometry.getFlatCoordinates();\n    flatCoordinates = _ol_geom_flat_transform_.translate(flatCoordinates, 0, 2,\n        stride, -this.origin[0], -this.origin[1]);\n    this.drawCoordinates_(flatCoordinates, 0, 2, stride);\n  } else {\n    if (this.state_.changed) {\n      this.styles_.pop();\n      if (this.styles_.length) {\n        var lastState = this.styles_[this.styles_.length - 1];\n        this.state_.fillColor =  /** @type {Array.<number>} */ (lastState[0]);\n        this.state_.strokeColor = /** @type {Array.<number>} */ (lastState[1]);\n        this.state_.lineWidth = /** @type {number} */ (lastState[2]);\n        this.state_.changed = false;\n      }\n    }\n  }\n};\n\n\n/**\n * @inheritDoc\n **/\n_ol_render_webgl_CircleReplay_.prototype.finish = function(context) {\n  // create, bind, and populate the vertices buffer\n  this.verticesBuffer = new _ol_webgl_Buffer_(this.vertices);\n\n  // create, bind, and populate the indices buffer\n  this.indicesBuffer = new _ol_webgl_Buffer_(this.indices);\n\n  this.startIndices.push(this.indices.length);\n\n  //Clean up, if there is nothing to draw\n  if (this.styleIndices_.length === 0 && this.styles_.length > 0) {\n    this.styles_ = [];\n  }\n\n  this.vertices = null;\n  this.indices = null;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_CircleReplay_.prototype.getDeleteResourcesFunction = function(context) {\n  // We only delete our stuff here. The shaders and the program may\n  // be used by other CircleReplay instances (for other layers). And\n  // they will be deleted when disposing of the ol.webgl.Context\n  // object.\n  var verticesBuffer = this.verticesBuffer;\n  var indicesBuffer = this.indicesBuffer;\n  return function() {\n    context.deleteBuffer(verticesBuffer);\n    context.deleteBuffer(indicesBuffer);\n  };\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_CircleReplay_.prototype.setUpProgram = function(gl, context, size, pixelRatio) {\n  // get the program\n  var fragmentShader, vertexShader;\n  fragmentShader = _ol_render_webgl_circlereplay_defaultshader_.fragment;\n  vertexShader = _ol_render_webgl_circlereplay_defaultshader_.vertex;\n  var program = context.getProgram(fragmentShader, vertexShader);\n\n  // get the locations\n  var locations;\n  if (!this.defaultLocations_) {\n    locations = new _ol_render_webgl_circlereplay_defaultshader_Locations_(gl, program);\n    this.defaultLocations_ = locations;\n  } else {\n    locations = this.defaultLocations_;\n  }\n\n  context.useProgram(program);\n\n  // enable the vertex attrib arrays\n  gl.enableVertexAttribArray(locations.a_position);\n  gl.vertexAttribPointer(locations.a_position, 2, _ol_webgl_.FLOAT,\n      false, 16, 0);\n\n  gl.enableVertexAttribArray(locations.a_instruction);\n  gl.vertexAttribPointer(locations.a_instruction, 1, _ol_webgl_.FLOAT,\n      false, 16, 8);\n\n  gl.enableVertexAttribArray(locations.a_radius);\n  gl.vertexAttribPointer(locations.a_radius, 1, _ol_webgl_.FLOAT,\n      false, 16, 12);\n\n  // Enable renderer specific uniforms.\n  gl.uniform2fv(locations.u_size, size);\n  gl.uniform1f(locations.u_pixelRatio, pixelRatio);\n\n  return locations;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_CircleReplay_.prototype.shutDownProgram = function(gl, locations) {\n  gl.disableVertexAttribArray(locations.a_position);\n  gl.disableVertexAttribArray(locations.a_instruction);\n  gl.disableVertexAttribArray(locations.a_radius);\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_CircleReplay_.prototype.drawReplay = function(gl, context, skippedFeaturesHash, hitDetection) {\n  if (!_ol_obj_.isEmpty(skippedFeaturesHash)) {\n    this.drawReplaySkipping_(gl, context, skippedFeaturesHash);\n  } else {\n    //Draw by style groups to minimize drawElements() calls.\n    var i, start, end, nextStyle;\n    end = this.startIndices[this.startIndices.length - 1];\n    for (i = this.styleIndices_.length - 1; i >= 0; --i) {\n      start = this.styleIndices_[i];\n      nextStyle = this.styles_[i];\n      this.setFillStyle_(gl, /** @type {Array.<number>} */ (nextStyle[0]));\n      this.setStrokeStyle_(gl, /** @type {Array.<number>} */ (nextStyle[1]),\n          /** @type {number} */ (nextStyle[2]));\n      this.drawElements(gl, context, start, end);\n      end = start;\n    }\n  }\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_CircleReplay_.prototype.drawHitDetectionReplayOneByOne = function(gl, context, skippedFeaturesHash,\n    featureCallback, opt_hitExtent) {\n  var i, start, end, nextStyle, groupStart, feature, featureUid, featureIndex;\n  featureIndex = this.startIndices.length - 2;\n  end = this.startIndices[featureIndex + 1];\n  for (i = this.styleIndices_.length - 1; i >= 0; --i) {\n    nextStyle = this.styles_[i];\n    this.setFillStyle_(gl, /** @type {Array.<number>} */ (nextStyle[0]));\n    this.setStrokeStyle_(gl, /** @type {Array.<number>} */ (nextStyle[1]),\n        /** @type {number} */ (nextStyle[2]));\n    groupStart = this.styleIndices_[i];\n\n    while (featureIndex >= 0 &&\n        this.startIndices[featureIndex] >= groupStart) {\n      start = this.startIndices[featureIndex];\n      feature = this.startIndicesFeature[featureIndex];\n      featureUid = _ol_.getUid(feature).toString();\n\n      if (skippedFeaturesHash[featureUid] === undefined &&\n          feature.getGeometry() &&\n          (opt_hitExtent === undefined || _ol_extent_.intersects(\n              /** @type {Array<number>} */ (opt_hitExtent),\n              feature.getGeometry().getExtent()))) {\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n        this.drawElements(gl, context, start, end);\n\n        var result = featureCallback(feature);\n\n        if (result) {\n          return result;\n        }\n\n      }\n      featureIndex--;\n      end = start;\n    }\n  }\n  return undefined;\n};\n\n\n/**\n * @private\n * @param {WebGLRenderingContext} gl gl.\n * @param {ol.webgl.Context} context Context.\n * @param {Object} skippedFeaturesHash Ids of features to skip.\n */\n_ol_render_webgl_CircleReplay_.prototype.drawReplaySkipping_ = function(gl, context, skippedFeaturesHash) {\n  var i, start, end, nextStyle, groupStart, feature, featureUid, featureIndex, featureStart;\n  featureIndex = this.startIndices.length - 2;\n  end = start = this.startIndices[featureIndex + 1];\n  for (i = this.styleIndices_.length - 1; i >= 0; --i) {\n    nextStyle = this.styles_[i];\n    this.setFillStyle_(gl, /** @type {Array.<number>} */ (nextStyle[0]));\n    this.setStrokeStyle_(gl, /** @type {Array.<number>} */ (nextStyle[1]),\n        /** @type {number} */ (nextStyle[2]));\n    groupStart = this.styleIndices_[i];\n\n    while (featureIndex >= 0 &&\n        this.startIndices[featureIndex] >= groupStart) {\n      featureStart = this.startIndices[featureIndex];\n      feature = this.startIndicesFeature[featureIndex];\n      featureUid = _ol_.getUid(feature).toString();\n\n      if (skippedFeaturesHash[featureUid]) {\n        if (start !== end) {\n          this.drawElements(gl, context, start, end);\n        }\n        end = featureStart;\n      }\n      featureIndex--;\n      start = featureStart;\n    }\n    if (start !== end) {\n      this.drawElements(gl, context, start, end);\n    }\n    start = end = groupStart;\n  }\n};\n\n\n/**\n * @private\n * @param {WebGLRenderingContext} gl gl.\n * @param {Array.<number>} color Color.\n */\n_ol_render_webgl_CircleReplay_.prototype.setFillStyle_ = function(gl, color) {\n  gl.uniform4fv(this.defaultLocations_.u_fillColor, color);\n};\n\n\n/**\n * @private\n * @param {WebGLRenderingContext} gl gl.\n * @param {Array.<number>} color Color.\n * @param {number} lineWidth Line width.\n */\n_ol_render_webgl_CircleReplay_.prototype.setStrokeStyle_ = function(gl, color, lineWidth) {\n  gl.uniform4fv(this.defaultLocations_.u_strokeColor, color);\n  gl.uniform1f(this.defaultLocations_.u_lineWidth, lineWidth);\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_CircleReplay_.prototype.setFillStrokeStyle = function(fillStyle, strokeStyle) {\n  var strokeStyleColor, strokeStyleWidth;\n  if (strokeStyle) {\n    var strokeStyleLineDash = strokeStyle.getLineDash();\n    this.state_.lineDash = strokeStyleLineDash ?\n      strokeStyleLineDash : _ol_render_webgl_.defaultLineDash;\n    var strokeStyleLineDashOffset = strokeStyle.getLineDashOffset();\n    this.state_.lineDashOffset = strokeStyleLineDashOffset ?\n      strokeStyleLineDashOffset : _ol_render_webgl_.defaultLineDashOffset;\n    strokeStyleColor = strokeStyle.getColor();\n    if (!(strokeStyleColor instanceof CanvasGradient) &&\n        !(strokeStyleColor instanceof CanvasPattern)) {\n      strokeStyleColor = _ol_color_.asArray(strokeStyleColor).map(function(c, i) {\n        return i != 3 ? c / 255 : c;\n      }) || _ol_render_webgl_.defaultStrokeStyle;\n    } else {\n      strokeStyleColor = _ol_render_webgl_.defaultStrokeStyle;\n    }\n    strokeStyleWidth = strokeStyle.getWidth();\n    strokeStyleWidth = strokeStyleWidth !== undefined ?\n      strokeStyleWidth : _ol_render_webgl_.defaultLineWidth;\n  } else {\n    strokeStyleColor = [0, 0, 0, 0];\n    strokeStyleWidth = 0;\n  }\n  var fillStyleColor = fillStyle ? fillStyle.getColor() : [0, 0, 0, 0];\n  if (!(fillStyleColor instanceof CanvasGradient) &&\n      !(fillStyleColor instanceof CanvasPattern)) {\n    fillStyleColor = _ol_color_.asArray(fillStyleColor).map(function(c, i) {\n      return i != 3 ? c / 255 : c;\n    }) || _ol_render_webgl_.defaultFillStyle;\n  } else {\n    fillStyleColor = _ol_render_webgl_.defaultFillStyle;\n  }\n  if (!this.state_.strokeColor || !_ol_array_.equals(this.state_.strokeColor, strokeStyleColor) ||\n      !this.state_.fillColor || !_ol_array_.equals(this.state_.fillColor, fillStyleColor) ||\n      this.state_.lineWidth !== strokeStyleWidth) {\n    this.state_.changed = true;\n    this.state_.fillColor = fillStyleColor;\n    this.state_.strokeColor = strokeStyleColor;\n    this.state_.lineWidth = strokeStyleWidth;\n    this.styles_.push([fillStyleColor, strokeStyleColor, strokeStyleWidth]);\n  }\n};\nexport default _ol_render_webgl_CircleReplay_;\n","// This file is automatically generated, do not edit\nimport _ol_ from '../../../index.js';\nimport _ol_webgl_Fragment_ from '../../../webgl/fragment.js';\nimport _ol_webgl_Vertex_ from '../../../webgl/vertex.js';\nvar _ol_render_webgl_texturereplay_defaultshader_ = {};\n\n\n_ol_render_webgl_texturereplay_defaultshader_.fragment = new _ol_webgl_Fragment_(_ol_.DEBUG_WEBGL ?\n  'precision mediump float;\\nvarying vec2 v_texCoord;\\nvarying float v_opacity;\\n\\nuniform float u_opacity;\\nuniform sampler2D u_image;\\n\\nvoid main(void) {\\n  vec4 texColor = texture2D(u_image, v_texCoord);\\n  gl_FragColor.rgb = texColor.rgb;\\n  float alpha = texColor.a * v_opacity * u_opacity;\\n  if (alpha == 0.0) {\\n    discard;\\n  }\\n  gl_FragColor.a = alpha;\\n}\\n' :\n  'precision mediump float;varying vec2 a;varying float b;uniform float k;uniform sampler2D l;void main(void){vec4 texColor=texture2D(l,a);gl_FragColor.rgb=texColor.rgb;float alpha=texColor.a*b*k;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}');\n\n_ol_render_webgl_texturereplay_defaultshader_.vertex = new _ol_webgl_Vertex_(_ol_.DEBUG_WEBGL ?\n  'varying vec2 v_texCoord;\\nvarying float v_opacity;\\n\\nattribute vec2 a_position;\\nattribute vec2 a_texCoord;\\nattribute vec2 a_offsets;\\nattribute float a_opacity;\\nattribute float a_rotateWithView;\\n\\nuniform mat4 u_projectionMatrix;\\nuniform mat4 u_offsetScaleMatrix;\\nuniform mat4 u_offsetRotateMatrix;\\n\\nvoid main(void) {\\n  mat4 offsetMatrix = u_offsetScaleMatrix;\\n  if (a_rotateWithView == 1.0) {\\n    offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\\n  }\\n  vec4 offsets = offsetMatrix * vec4(a_offsets, 0.0, 0.0);\\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\\n  v_texCoord = a_texCoord;\\n  v_opacity = a_opacity;\\n}\\n\\n\\n' :\n  'varying vec2 a;varying float b;attribute vec2 c;attribute vec2 d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;void main(void){mat4 offsetMatrix=i;if(g==1.0){offsetMatrix=i*j;}vec4 offsets=offsetMatrix*vec4(e,0.0,0.0);gl_Position=h*vec4(c,0.0,1.0)+offsets;a=d;b=f;}');\nexport default _ol_render_webgl_texturereplay_defaultshader_;","// This file is automatically generated, do not edit\nimport _ol_ from '../../../../index.js';\n\n/**\n * @constructor\n * @param {WebGLRenderingContext} gl GL.\n * @param {WebGLProgram} program Program.\n * @struct\n */\nvar _ol_render_webgl_texturereplay_defaultshader_Locations_ = function(gl, program) {\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_projectionMatrix = gl.getUniformLocation(\n      program, _ol_.DEBUG_WEBGL ? 'u_projectionMatrix' : 'h');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_offsetScaleMatrix = gl.getUniformLocation(\n      program, _ol_.DEBUG_WEBGL ? 'u_offsetScaleMatrix' : 'i');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_offsetRotateMatrix = gl.getUniformLocation(\n      program, _ol_.DEBUG_WEBGL ? 'u_offsetRotateMatrix' : 'j');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_opacity = gl.getUniformLocation(\n      program, _ol_.DEBUG_WEBGL ? 'u_opacity' : 'k');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_image = gl.getUniformLocation(\n      program, _ol_.DEBUG_WEBGL ? 'u_image' : 'l');\n\n  /**\n   * @type {number}\n   */\n  this.a_position = gl.getAttribLocation(\n      program, _ol_.DEBUG_WEBGL ? 'a_position' : 'c');\n\n  /**\n   * @type {number}\n   */\n  this.a_texCoord = gl.getAttribLocation(\n      program, _ol_.DEBUG_WEBGL ? 'a_texCoord' : 'd');\n\n  /**\n   * @type {number}\n   */\n  this.a_offsets = gl.getAttribLocation(\n      program, _ol_.DEBUG_WEBGL ? 'a_offsets' : 'e');\n\n  /**\n   * @type {number}\n   */\n  this.a_opacity = gl.getAttribLocation(\n      program, _ol_.DEBUG_WEBGL ? 'a_opacity' : 'f');\n\n  /**\n   * @type {number}\n   */\n  this.a_rotateWithView = gl.getAttribLocation(\n      program, _ol_.DEBUG_WEBGL ? 'a_rotateWithView' : 'g');\n};\n\nexport default _ol_render_webgl_texturereplay_defaultshader_Locations_;","/**\n * @enum {string}\n */\nvar _ol_webgl_ContextEventType_ = {\n  LOST: 'webglcontextlost',\n  RESTORED: 'webglcontextrestored'\n};\n\nexport default _ol_webgl_ContextEventType_;\n","import _ol_ from '../index.js';\nimport _ol_Disposable_ from '../disposable.js';\nimport _ol_array_ from '../array.js';\nimport _ol_events_ from '../events.js';\nimport _ol_obj_ from '../obj.js';\nimport _ol_webgl_ from '../webgl.js';\nimport _ol_webgl_ContextEventType_ from '../webgl/contexteventtype.js';\n\n/**\n * @classdesc\n * A WebGL context for accessing low-level WebGL capabilities.\n *\n * @constructor\n * @extends {ol.Disposable}\n * @param {HTMLCanvasElement} canvas Canvas.\n * @param {WebGLRenderingContext} gl GL.\n */\nvar _ol_webgl_Context_ = function(canvas, gl) {\n\n  /**\n   * @private\n   * @type {HTMLCanvasElement}\n   */\n  this.canvas_ = canvas;\n\n  /**\n   * @private\n   * @type {WebGLRenderingContext}\n   */\n  this.gl_ = gl;\n\n  /**\n   * @private\n   * @type {Object.<string, ol.WebglBufferCacheEntry>}\n   */\n  this.bufferCache_ = {};\n\n  /**\n   * @private\n   * @type {Object.<string, WebGLShader>}\n   */\n  this.shaderCache_ = {};\n\n  /**\n   * @private\n   * @type {Object.<string, WebGLProgram>}\n   */\n  this.programCache_ = {};\n\n  /**\n   * @private\n   * @type {WebGLProgram}\n   */\n  this.currentProgram_ = null;\n\n  /**\n   * @private\n   * @type {WebGLFramebuffer}\n   */\n  this.hitDetectionFramebuffer_ = null;\n\n  /**\n   * @private\n   * @type {WebGLTexture}\n   */\n  this.hitDetectionTexture_ = null;\n\n  /**\n   * @private\n   * @type {WebGLRenderbuffer}\n   */\n  this.hitDetectionRenderbuffer_ = null;\n\n  /**\n   * @type {boolean}\n   */\n  this.hasOESElementIndexUint = _ol_array_.includes(\n      _ol_.WEBGL_EXTENSIONS, 'OES_element_index_uint');\n\n  // use the OES_element_index_uint extension if available\n  if (this.hasOESElementIndexUint) {\n    gl.getExtension('OES_element_index_uint');\n  }\n\n  _ol_events_.listen(this.canvas_, _ol_webgl_ContextEventType_.LOST,\n      this.handleWebGLContextLost, this);\n  _ol_events_.listen(this.canvas_, _ol_webgl_ContextEventType_.RESTORED,\n      this.handleWebGLContextRestored, this);\n\n};\n\n_ol_.inherits(_ol_webgl_Context_, _ol_Disposable_);\n\n\n/**\n * Just bind the buffer if it's in the cache. Otherwise create\n * the WebGL buffer, bind it, populate it, and add an entry to\n * the cache.\n * @param {number} target Target.\n * @param {ol.webgl.Buffer} buf Buffer.\n */\n_ol_webgl_Context_.prototype.bindBuffer = function(target, buf) {\n  var gl = this.getGL();\n  var arr = buf.getArray();\n  var bufferKey = String(_ol_.getUid(buf));\n  if (bufferKey in this.bufferCache_) {\n    var bufferCacheEntry = this.bufferCache_[bufferKey];\n    gl.bindBuffer(target, bufferCacheEntry.buffer);\n  } else {\n    var buffer = gl.createBuffer();\n    gl.bindBuffer(target, buffer);\n    var /** @type {ArrayBufferView} */ arrayBuffer;\n    if (target == _ol_webgl_.ARRAY_BUFFER) {\n      arrayBuffer = new Float32Array(arr);\n    } else if (target == _ol_webgl_.ELEMENT_ARRAY_BUFFER) {\n      arrayBuffer = this.hasOESElementIndexUint ?\n        new Uint32Array(arr) : new Uint16Array(arr);\n    }\n    gl.bufferData(target, arrayBuffer, buf.getUsage());\n    this.bufferCache_[bufferKey] = {\n      buf: buf,\n      buffer: buffer\n    };\n  }\n};\n\n\n/**\n * @param {ol.webgl.Buffer} buf Buffer.\n */\n_ol_webgl_Context_.prototype.deleteBuffer = function(buf) {\n  var gl = this.getGL();\n  var bufferKey = String(_ol_.getUid(buf));\n  var bufferCacheEntry = this.bufferCache_[bufferKey];\n  if (!gl.isContextLost()) {\n    gl.deleteBuffer(bufferCacheEntry.buffer);\n  }\n  delete this.bufferCache_[bufferKey];\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_webgl_Context_.prototype.disposeInternal = function() {\n  _ol_events_.unlistenAll(this.canvas_);\n  var gl = this.getGL();\n  if (!gl.isContextLost()) {\n    var key;\n    for (key in this.bufferCache_) {\n      gl.deleteBuffer(this.bufferCache_[key].buffer);\n    }\n    for (key in this.programCache_) {\n      gl.deleteProgram(this.programCache_[key]);\n    }\n    for (key in this.shaderCache_) {\n      gl.deleteShader(this.shaderCache_[key]);\n    }\n    // delete objects for hit-detection\n    gl.deleteFramebuffer(this.hitDetectionFramebuffer_);\n    gl.deleteRenderbuffer(this.hitDetectionRenderbuffer_);\n    gl.deleteTexture(this.hitDetectionTexture_);\n  }\n};\n\n\n/**\n * @return {HTMLCanvasElement} Canvas.\n */\n_ol_webgl_Context_.prototype.getCanvas = function() {\n  return this.canvas_;\n};\n\n\n/**\n * Get the WebGL rendering context\n * @return {WebGLRenderingContext} The rendering context.\n * @api\n */\n_ol_webgl_Context_.prototype.getGL = function() {\n  return this.gl_;\n};\n\n\n/**\n * Get the frame buffer for hit detection.\n * @return {WebGLFramebuffer} The hit detection frame buffer.\n */\n_ol_webgl_Context_.prototype.getHitDetectionFramebuffer = function() {\n  if (!this.hitDetectionFramebuffer_) {\n    this.initHitDetectionFramebuffer_();\n  }\n  return this.hitDetectionFramebuffer_;\n};\n\n\n/**\n * Get shader from the cache if it's in the cache. Otherwise, create\n * the WebGL shader, compile it, and add entry to cache.\n * @param {ol.webgl.Shader} shaderObject Shader object.\n * @return {WebGLShader} Shader.\n */\n_ol_webgl_Context_.prototype.getShader = function(shaderObject) {\n  var shaderKey = String(_ol_.getUid(shaderObject));\n  if (shaderKey in this.shaderCache_) {\n    return this.shaderCache_[shaderKey];\n  } else {\n    var gl = this.getGL();\n    var shader = gl.createShader(shaderObject.getType());\n    gl.shaderSource(shader, shaderObject.getSource());\n    gl.compileShader(shader);\n    this.shaderCache_[shaderKey] = shader;\n    return shader;\n  }\n};\n\n\n/**\n * Get the program from the cache if it's in the cache. Otherwise create\n * the WebGL program, attach the shaders to it, and add an entry to the\n * cache.\n * @param {ol.webgl.Fragment} fragmentShaderObject Fragment shader.\n * @param {ol.webgl.Vertex} vertexShaderObject Vertex shader.\n * @return {WebGLProgram} Program.\n */\n_ol_webgl_Context_.prototype.getProgram = function(\n    fragmentShaderObject, vertexShaderObject) {\n  var programKey =\n      _ol_.getUid(fragmentShaderObject) + '/' + _ol_.getUid(vertexShaderObject);\n  if (programKey in this.programCache_) {\n    return this.programCache_[programKey];\n  } else {\n    var gl = this.getGL();\n    var program = gl.createProgram();\n    gl.attachShader(program, this.getShader(fragmentShaderObject));\n    gl.attachShader(program, this.getShader(vertexShaderObject));\n    gl.linkProgram(program);\n    this.programCache_[programKey] = program;\n    return program;\n  }\n};\n\n\n/**\n * FIXME empy description for jsdoc\n */\n_ol_webgl_Context_.prototype.handleWebGLContextLost = function() {\n  _ol_obj_.clear(this.bufferCache_);\n  _ol_obj_.clear(this.shaderCache_);\n  _ol_obj_.clear(this.programCache_);\n  this.currentProgram_ = null;\n  this.hitDetectionFramebuffer_ = null;\n  this.hitDetectionTexture_ = null;\n  this.hitDetectionRenderbuffer_ = null;\n};\n\n\n/**\n * FIXME empy description for jsdoc\n */\n_ol_webgl_Context_.prototype.handleWebGLContextRestored = function() {\n};\n\n\n/**\n * Creates a 1x1 pixel framebuffer for the hit-detection.\n * @private\n */\n_ol_webgl_Context_.prototype.initHitDetectionFramebuffer_ = function() {\n  var gl = this.gl_;\n  var framebuffer = gl.createFramebuffer();\n  gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n\n  var texture = _ol_webgl_Context_.createEmptyTexture(gl, 1, 1);\n  var renderbuffer = gl.createRenderbuffer();\n  gl.bindRenderbuffer(gl.RENDERBUFFER, renderbuffer);\n  gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, 1, 1);\n  gl.framebufferTexture2D(\n      gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, 0);\n  gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT,\n      gl.RENDERBUFFER, renderbuffer);\n\n  gl.bindTexture(gl.TEXTURE_2D, null);\n  gl.bindRenderbuffer(gl.RENDERBUFFER, null);\n  gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n  this.hitDetectionFramebuffer_ = framebuffer;\n  this.hitDetectionTexture_ = texture;\n  this.hitDetectionRenderbuffer_ = renderbuffer;\n};\n\n\n/**\n * Use a program.  If the program is already in use, this will return `false`.\n * @param {WebGLProgram} program Program.\n * @return {boolean} Changed.\n * @api\n */\n_ol_webgl_Context_.prototype.useProgram = function(program) {\n  if (program == this.currentProgram_) {\n    return false;\n  } else {\n    var gl = this.getGL();\n    gl.useProgram(program);\n    this.currentProgram_ = program;\n    return true;\n  }\n};\n\n\n/**\n * @param {WebGLRenderingContext} gl WebGL rendering context.\n * @param {number=} opt_wrapS wrapS.\n * @param {number=} opt_wrapT wrapT.\n * @return {WebGLTexture} The texture.\n * @private\n */\n_ol_webgl_Context_.createTexture_ = function(gl, opt_wrapS, opt_wrapT) {\n  var texture = gl.createTexture();\n  gl.bindTexture(gl.TEXTURE_2D, texture);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n\n  if (opt_wrapS !== undefined) {\n    gl.texParameteri(\n        _ol_webgl_.TEXTURE_2D, _ol_webgl_.TEXTURE_WRAP_S, opt_wrapS);\n  }\n  if (opt_wrapT !== undefined) {\n    gl.texParameteri(\n        _ol_webgl_.TEXTURE_2D, _ol_webgl_.TEXTURE_WRAP_T, opt_wrapT);\n  }\n\n  return texture;\n};\n\n\n/**\n * @param {WebGLRenderingContext} gl WebGL rendering context.\n * @param {number} width Width.\n * @param {number} height Height.\n * @param {number=} opt_wrapS wrapS.\n * @param {number=} opt_wrapT wrapT.\n * @return {WebGLTexture} The texture.\n */\n_ol_webgl_Context_.createEmptyTexture = function(\n    gl, width, height, opt_wrapS, opt_wrapT) {\n  var texture = _ol_webgl_Context_.createTexture_(gl, opt_wrapS, opt_wrapT);\n  gl.texImage2D(\n      gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0, gl.RGBA, gl.UNSIGNED_BYTE,\n      null);\n\n  return texture;\n};\n\n\n/**\n * @param {WebGLRenderingContext} gl WebGL rendering context.\n * @param {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} image Image.\n * @param {number=} opt_wrapS wrapS.\n * @param {number=} opt_wrapT wrapT.\n * @return {WebGLTexture} The texture.\n */\n_ol_webgl_Context_.createTexture = function(gl, image, opt_wrapS, opt_wrapT) {\n  var texture = _ol_webgl_Context_.createTexture_(gl, opt_wrapS, opt_wrapT);\n  gl.texImage2D(\n      gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n\n  return texture;\n};\nexport default _ol_webgl_Context_;\n","import _ol_ from '../../index.js';\nimport _ol_extent_ from '../../extent.js';\nimport _ol_obj_ from '../../obj.js';\nimport _ol_render_webgl_texturereplay_defaultshader_ from '../webgl/texturereplay/defaultshader.js';\nimport _ol_render_webgl_texturereplay_defaultshader_Locations_ from '../webgl/texturereplay/defaultshader/locations.js';\nimport _ol_render_webgl_Replay_ from '../webgl/replay.js';\nimport _ol_webgl_ from '../../webgl.js';\nimport _ol_webgl_Context_ from '../../webgl/context.js';\n\n/**\n * @constructor\n * @abstract\n * @extends {ol.render.webgl.Replay}\n * @param {number} tolerance Tolerance.\n * @param {ol.Extent} maxExtent Max extent.\n * @struct\n */\nvar _ol_render_webgl_TextureReplay_ = function(tolerance, maxExtent) {\n  _ol_render_webgl_Replay_.call(this, tolerance, maxExtent);\n\n  /**\n   * @type {number|undefined}\n   * @protected\n   */\n  this.anchorX = undefined;\n\n  /**\n   * @type {number|undefined}\n   * @protected\n   */\n  this.anchorY = undefined;\n\n  /**\n   * @type {Array.<number>}\n   * @protected\n   */\n  this.groupIndices = [];\n\n  /**\n   * @type {Array.<number>}\n   * @protected\n   */\n  this.hitDetectionGroupIndices = [];\n\n  /**\n   * @type {number|undefined}\n   * @protected\n   */\n  this.height = undefined;\n\n  /**\n   * @type {number|undefined}\n   * @protected\n   */\n  this.imageHeight = undefined;\n\n  /**\n   * @type {number|undefined}\n   * @protected\n   */\n  this.imageWidth = undefined;\n\n  /**\n   * @protected\n   * @type {ol.render.webgl.texturereplay.defaultshader.Locations}\n   */\n  this.defaultLocations = null;\n\n  /**\n   * @protected\n   * @type {number|undefined}\n   */\n  this.opacity = undefined;\n\n  /**\n   * @type {number|undefined}\n   * @protected\n   */\n  this.originX = undefined;\n\n  /**\n   * @type {number|undefined}\n   * @protected\n   */\n  this.originY = undefined;\n\n  /**\n   * @protected\n   * @type {boolean|undefined}\n   */\n  this.rotateWithView = undefined;\n\n  /**\n   * @protected\n   * @type {number|undefined}\n   */\n  this.rotation = undefined;\n\n  /**\n   * @protected\n   * @type {number|undefined}\n   */\n  this.scale = undefined;\n\n  /**\n   * @type {number|undefined}\n   * @protected\n   */\n  this.width = undefined;\n};\n\n_ol_.inherits(_ol_render_webgl_TextureReplay_, _ol_render_webgl_Replay_);\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_TextureReplay_.prototype.getDeleteResourcesFunction = function(context) {\n  var verticesBuffer = this.verticesBuffer;\n  var indicesBuffer = this.indicesBuffer;\n  var textures = this.getTextures(true);\n  var gl = context.getGL();\n  return function() {\n    if (!gl.isContextLost()) {\n      var i, ii;\n      for (i = 0, ii = textures.length; i < ii; ++i) {\n        gl.deleteTexture(textures[i]);\n      }\n    }\n    context.deleteBuffer(verticesBuffer);\n    context.deleteBuffer(indicesBuffer);\n  };\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {number} My end.\n * @protected\n */\n_ol_render_webgl_TextureReplay_.prototype.drawCoordinates = function(flatCoordinates, offset, end, stride) {\n  var anchorX = /** @type {number} */ (this.anchorX);\n  var anchorY = /** @type {number} */ (this.anchorY);\n  var height = /** @type {number} */ (this.height);\n  var imageHeight = /** @type {number} */ (this.imageHeight);\n  var imageWidth = /** @type {number} */ (this.imageWidth);\n  var opacity = /** @type {number} */ (this.opacity);\n  var originX = /** @type {number} */ (this.originX);\n  var originY = /** @type {number} */ (this.originY);\n  var rotateWithView = this.rotateWithView ? 1.0 : 0.0;\n  // this.rotation_ is anti-clockwise, but rotation is clockwise\n  var rotation = /** @type {number} */ (-this.rotation);\n  var scale = /** @type {number} */ (this.scale);\n  var width = /** @type {number} */ (this.width);\n  var cos = Math.cos(rotation);\n  var sin = Math.sin(rotation);\n  var numIndices = this.indices.length;\n  var numVertices = this.vertices.length;\n  var i, n, offsetX, offsetY, x, y;\n  for (i = offset; i < end; i += stride) {\n    x = flatCoordinates[i] - this.origin[0];\n    y = flatCoordinates[i + 1] - this.origin[1];\n\n    // There are 4 vertices per [x, y] point, one for each corner of the\n    // rectangle we're going to draw. We'd use 1 vertex per [x, y] point if\n    // WebGL supported Geometry Shaders (which can emit new vertices), but that\n    // is not currently the case.\n    //\n    // And each vertex includes 8 values: the x and y coordinates, the x and\n    // y offsets used to calculate the position of the corner, the u and\n    // v texture coordinates for the corner, the opacity, and whether the\n    // the image should be rotated with the view (rotateWithView).\n\n    n = numVertices / 8;\n\n    // bottom-left corner\n    offsetX = -scale * anchorX;\n    offsetY = -scale * (height - anchorY);\n    this.vertices[numVertices++] = x;\n    this.vertices[numVertices++] = y;\n    this.vertices[numVertices++] = offsetX * cos - offsetY * sin;\n    this.vertices[numVertices++] = offsetX * sin + offsetY * cos;\n    this.vertices[numVertices++] = originX / imageWidth;\n    this.vertices[numVertices++] = (originY + height) / imageHeight;\n    this.vertices[numVertices++] = opacity;\n    this.vertices[numVertices++] = rotateWithView;\n\n    // bottom-right corner\n    offsetX = scale * (width - anchorX);\n    offsetY = -scale * (height - anchorY);\n    this.vertices[numVertices++] = x;\n    this.vertices[numVertices++] = y;\n    this.vertices[numVertices++] = offsetX * cos - offsetY * sin;\n    this.vertices[numVertices++] = offsetX * sin + offsetY * cos;\n    this.vertices[numVertices++] = (originX + width) / imageWidth;\n    this.vertices[numVertices++] = (originY + height) / imageHeight;\n    this.vertices[numVertices++] = opacity;\n    this.vertices[numVertices++] = rotateWithView;\n\n    // top-right corner\n    offsetX = scale * (width - anchorX);\n    offsetY = scale * anchorY;\n    this.vertices[numVertices++] = x;\n    this.vertices[numVertices++] = y;\n    this.vertices[numVertices++] = offsetX * cos - offsetY * sin;\n    this.vertices[numVertices++] = offsetX * sin + offsetY * cos;\n    this.vertices[numVertices++] = (originX + width) / imageWidth;\n    this.vertices[numVertices++] = originY / imageHeight;\n    this.vertices[numVertices++] = opacity;\n    this.vertices[numVertices++] = rotateWithView;\n\n    // top-left corner\n    offsetX = -scale * anchorX;\n    offsetY = scale * anchorY;\n    this.vertices[numVertices++] = x;\n    this.vertices[numVertices++] = y;\n    this.vertices[numVertices++] = offsetX * cos - offsetY * sin;\n    this.vertices[numVertices++] = offsetX * sin + offsetY * cos;\n    this.vertices[numVertices++] = originX / imageWidth;\n    this.vertices[numVertices++] = originY / imageHeight;\n    this.vertices[numVertices++] = opacity;\n    this.vertices[numVertices++] = rotateWithView;\n\n    this.indices[numIndices++] = n;\n    this.indices[numIndices++] = n + 1;\n    this.indices[numIndices++] = n + 2;\n    this.indices[numIndices++] = n;\n    this.indices[numIndices++] = n + 2;\n    this.indices[numIndices++] = n + 3;\n  }\n\n  return numVertices;\n};\n\n\n/**\n * @protected\n * @param {Array.<WebGLTexture>} textures Textures.\n * @param {Array.<HTMLCanvasElement|HTMLImageElement|HTMLVideoElement>} images\n *    Images.\n * @param {Object.<string, WebGLTexture>} texturePerImage Texture cache.\n * @param {WebGLRenderingContext} gl Gl.\n */\n_ol_render_webgl_TextureReplay_.prototype.createTextures = function(textures, images, texturePerImage, gl) {\n  var texture, image, uid, i;\n  var ii = images.length;\n  for (i = 0; i < ii; ++i) {\n    image = images[i];\n\n    uid = _ol_.getUid(image).toString();\n    if (uid in texturePerImage) {\n      texture = texturePerImage[uid];\n    } else {\n      texture = _ol_webgl_Context_.createTexture(\n          gl, image, _ol_webgl_.CLAMP_TO_EDGE, _ol_webgl_.CLAMP_TO_EDGE);\n      texturePerImage[uid] = texture;\n    }\n    textures[i] = texture;\n  }\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_TextureReplay_.prototype.setUpProgram = function(gl, context, size, pixelRatio) {\n  // get the program\n  var fragmentShader = _ol_render_webgl_texturereplay_defaultshader_.fragment;\n  var vertexShader = _ol_render_webgl_texturereplay_defaultshader_.vertex;\n  var program = context.getProgram(fragmentShader, vertexShader);\n\n  // get the locations\n  var locations;\n  if (!this.defaultLocations) {\n    locations = new _ol_render_webgl_texturereplay_defaultshader_Locations_(gl, program);\n    this.defaultLocations = locations;\n  } else {\n    locations = this.defaultLocations;\n  }\n\n  // use the program (FIXME: use the return value)\n  context.useProgram(program);\n\n  // enable the vertex attrib arrays\n  gl.enableVertexAttribArray(locations.a_position);\n  gl.vertexAttribPointer(locations.a_position, 2, _ol_webgl_.FLOAT,\n      false, 32, 0);\n\n  gl.enableVertexAttribArray(locations.a_offsets);\n  gl.vertexAttribPointer(locations.a_offsets, 2, _ol_webgl_.FLOAT,\n      false, 32, 8);\n\n  gl.enableVertexAttribArray(locations.a_texCoord);\n  gl.vertexAttribPointer(locations.a_texCoord, 2, _ol_webgl_.FLOAT,\n      false, 32, 16);\n\n  gl.enableVertexAttribArray(locations.a_opacity);\n  gl.vertexAttribPointer(locations.a_opacity, 1, _ol_webgl_.FLOAT,\n      false, 32, 24);\n\n  gl.enableVertexAttribArray(locations.a_rotateWithView);\n  gl.vertexAttribPointer(locations.a_rotateWithView, 1, _ol_webgl_.FLOAT,\n      false, 32, 28);\n\n  return locations;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_TextureReplay_.prototype.shutDownProgram = function(gl, locations) {\n  gl.disableVertexAttribArray(locations.a_position);\n  gl.disableVertexAttribArray(locations.a_offsets);\n  gl.disableVertexAttribArray(locations.a_texCoord);\n  gl.disableVertexAttribArray(locations.a_opacity);\n  gl.disableVertexAttribArray(locations.a_rotateWithView);\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_TextureReplay_.prototype.drawReplay = function(gl, context, skippedFeaturesHash, hitDetection) {\n  var textures = hitDetection ? this.getHitDetectionTextures() : this.getTextures();\n  var groupIndices = hitDetection ? this.hitDetectionGroupIndices : this.groupIndices;\n\n  if (!_ol_obj_.isEmpty(skippedFeaturesHash)) {\n    this.drawReplaySkipping(\n        gl, context, skippedFeaturesHash, textures, groupIndices);\n  } else {\n    var i, ii, start;\n    for (i = 0, ii = textures.length, start = 0; i < ii; ++i) {\n      gl.bindTexture(_ol_webgl_.TEXTURE_2D, textures[i]);\n      var end = groupIndices[i];\n      this.drawElements(gl, context, start, end);\n      start = end;\n    }\n  }\n};\n\n\n/**\n * Draw the replay while paying attention to skipped features.\n *\n * This functions creates groups of features that can be drawn to together,\n * so that the number of `drawElements` calls is minimized.\n *\n * For example given the following texture groups:\n *\n *    Group 1: A B C\n *    Group 2: D [E] F G\n *\n * If feature E should be skipped, the following `drawElements` calls will be\n * made:\n *\n *    drawElements with feature A, B and C\n *    drawElements with feature D\n *    drawElements with feature F and G\n *\n * @protected\n * @param {WebGLRenderingContext} gl gl.\n * @param {ol.webgl.Context} context Context.\n * @param {Object.<string, boolean>} skippedFeaturesHash Ids of features\n *  to skip.\n * @param {Array.<WebGLTexture>} textures Textures.\n * @param {Array.<number>} groupIndices Texture group indices.\n */\n_ol_render_webgl_TextureReplay_.prototype.drawReplaySkipping = function(gl, context, skippedFeaturesHash, textures,\n    groupIndices) {\n  var featureIndex = 0;\n\n  var i, ii;\n  for (i = 0, ii = textures.length; i < ii; ++i) {\n    gl.bindTexture(_ol_webgl_.TEXTURE_2D, textures[i]);\n    var groupStart = (i > 0) ? groupIndices[i - 1] : 0;\n    var groupEnd = groupIndices[i];\n\n    var start = groupStart;\n    var end = groupStart;\n    while (featureIndex < this.startIndices.length &&\n        this.startIndices[featureIndex] <= groupEnd) {\n      var feature = this.startIndicesFeature[featureIndex];\n\n      var featureUid = _ol_.getUid(feature).toString();\n      if (skippedFeaturesHash[featureUid] !== undefined) {\n        // feature should be skipped\n        if (start !== end) {\n          // draw the features so far\n          this.drawElements(gl, context, start, end);\n        }\n        // continue with the next feature\n        start = (featureIndex === this.startIndices.length - 1) ?\n          groupEnd : this.startIndices[featureIndex + 1];\n        end = start;\n      } else {\n        // the feature is not skipped, augment the end index\n        end = (featureIndex === this.startIndices.length - 1) ?\n          groupEnd : this.startIndices[featureIndex + 1];\n      }\n      featureIndex++;\n    }\n\n    if (start !== end) {\n      // draw the remaining features (in case there was no skipped feature\n      // in this texture group, all features of a group are drawn together)\n      this.drawElements(gl, context, start, end);\n    }\n  }\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_TextureReplay_.prototype.drawHitDetectionReplayOneByOne = function(gl, context, skippedFeaturesHash,\n    featureCallback, opt_hitExtent) {\n  var i, groupStart, start, end, feature, featureUid;\n  var featureIndex = this.startIndices.length - 1;\n  var hitDetectionTextures = this.getHitDetectionTextures();\n  for (i = hitDetectionTextures.length - 1; i >= 0; --i) {\n    gl.bindTexture(_ol_webgl_.TEXTURE_2D, hitDetectionTextures[i]);\n    groupStart = (i > 0) ? this.hitDetectionGroupIndices[i - 1] : 0;\n    end = this.hitDetectionGroupIndices[i];\n\n    // draw all features for this texture group\n    while (featureIndex >= 0 &&\n        this.startIndices[featureIndex] >= groupStart) {\n      start = this.startIndices[featureIndex];\n      feature = this.startIndicesFeature[featureIndex];\n      featureUid = _ol_.getUid(feature).toString();\n\n      if (skippedFeaturesHash[featureUid] === undefined &&\n          feature.getGeometry() &&\n          (opt_hitExtent === undefined || _ol_extent_.intersects(\n              /** @type {Array<number>} */ (opt_hitExtent),\n              feature.getGeometry().getExtent()))) {\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n        this.drawElements(gl, context, start, end);\n\n        var result = featureCallback(feature);\n        if (result) {\n          return result;\n        }\n      }\n\n      end = start;\n      featureIndex--;\n    }\n  }\n  return undefined;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_TextureReplay_.prototype.finish = function(context) {\n  this.anchorX = undefined;\n  this.anchorY = undefined;\n  this.height = undefined;\n  this.imageHeight = undefined;\n  this.imageWidth = undefined;\n  this.indices = null;\n  this.opacity = undefined;\n  this.originX = undefined;\n  this.originY = undefined;\n  this.rotateWithView = undefined;\n  this.rotation = undefined;\n  this.scale = undefined;\n  this.vertices = null;\n  this.width = undefined;\n};\n\n\n/**\n * @abstract\n * @protected\n * @param {boolean=} opt_all Return hit detection textures with regular ones.\n * @returns {Array.<WebGLTexture>} Textures.\n */\n_ol_render_webgl_TextureReplay_.prototype.getTextures = function(opt_all) {};\n\n\n/**\n * @abstract\n * @protected\n * @returns {Array.<WebGLTexture>} Textures.\n */\n_ol_render_webgl_TextureReplay_.prototype.getHitDetectionTextures = function() {};\nexport default _ol_render_webgl_TextureReplay_;\n","import _ol_ from '../../index.js';\nimport _ol_render_webgl_TextureReplay_ from '../webgl/texturereplay.js';\nimport _ol_webgl_Buffer_ from '../../webgl/buffer.js';\n\n/**\n * @constructor\n * @extends {ol.render.webgl.TextureReplay}\n * @param {number} tolerance Tolerance.\n * @param {ol.Extent} maxExtent Max extent.\n * @struct\n */\nvar _ol_render_webgl_ImageReplay_ = function(tolerance, maxExtent) {\n  _ol_render_webgl_TextureReplay_.call(this, tolerance, maxExtent);\n\n  /**\n   * @type {Array.<HTMLCanvasElement|HTMLImageElement|HTMLVideoElement>}\n   * @protected\n   */\n  this.images_ = [];\n\n  /**\n   * @type {Array.<HTMLCanvasElement|HTMLImageElement|HTMLVideoElement>}\n   * @protected\n   */\n  this.hitDetectionImages_ = [];\n\n  /**\n   * @type {Array.<WebGLTexture>}\n   * @private\n   */\n  this.textures_ = [];\n\n  /**\n   * @type {Array.<WebGLTexture>}\n   * @private\n   */\n  this.hitDetectionTextures_ = [];\n\n};\n\n_ol_.inherits(_ol_render_webgl_ImageReplay_, _ol_render_webgl_TextureReplay_);\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_ImageReplay_.prototype.drawMultiPoint = function(multiPointGeometry, feature) {\n  this.startIndices.push(this.indices.length);\n  this.startIndicesFeature.push(feature);\n  var flatCoordinates = multiPointGeometry.getFlatCoordinates();\n  var stride = multiPointGeometry.getStride();\n  this.drawCoordinates(\n      flatCoordinates, 0, flatCoordinates.length, stride);\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_ImageReplay_.prototype.drawPoint = function(pointGeometry, feature) {\n  this.startIndices.push(this.indices.length);\n  this.startIndicesFeature.push(feature);\n  var flatCoordinates = pointGeometry.getFlatCoordinates();\n  var stride = pointGeometry.getStride();\n  this.drawCoordinates(\n      flatCoordinates, 0, flatCoordinates.length, stride);\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_ImageReplay_.prototype.finish = function(context) {\n  var gl = context.getGL();\n\n  this.groupIndices.push(this.indices.length);\n  this.hitDetectionGroupIndices.push(this.indices.length);\n\n  // create, bind, and populate the vertices buffer\n  this.verticesBuffer = new _ol_webgl_Buffer_(this.vertices);\n\n  var indices = this.indices;\n\n  // create, bind, and populate the indices buffer\n  this.indicesBuffer = new _ol_webgl_Buffer_(indices);\n\n  // create textures\n  /** @type {Object.<string, WebGLTexture>} */\n  var texturePerImage = {};\n\n  this.createTextures(this.textures_, this.images_, texturePerImage, gl);\n\n  this.createTextures(this.hitDetectionTextures_, this.hitDetectionImages_,\n      texturePerImage, gl);\n\n  this.images_ = null;\n  this.hitDetectionImages_ = null;\n  _ol_render_webgl_TextureReplay_.prototype.finish.call(this, context);\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_ImageReplay_.prototype.setImageStyle = function(imageStyle) {\n  var anchor = imageStyle.getAnchor();\n  var image = imageStyle.getImage(1);\n  var imageSize = imageStyle.getImageSize();\n  var hitDetectionImage = imageStyle.getHitDetectionImage(1);\n  var opacity = imageStyle.getOpacity();\n  var origin = imageStyle.getOrigin();\n  var rotateWithView = imageStyle.getRotateWithView();\n  var rotation = imageStyle.getRotation();\n  var size = imageStyle.getSize();\n  var scale = imageStyle.getScale();\n\n  var currentImage;\n  if (this.images_.length === 0) {\n    this.images_.push(image);\n  } else {\n    currentImage = this.images_[this.images_.length - 1];\n    if (_ol_.getUid(currentImage) != _ol_.getUid(image)) {\n      this.groupIndices.push(this.indices.length);\n      this.images_.push(image);\n    }\n  }\n\n  if (this.hitDetectionImages_.length === 0) {\n    this.hitDetectionImages_.push(hitDetectionImage);\n  } else {\n    currentImage =\n        this.hitDetectionImages_[this.hitDetectionImages_.length - 1];\n    if (_ol_.getUid(currentImage) != _ol_.getUid(hitDetectionImage)) {\n      this.hitDetectionGroupIndices.push(this.indices.length);\n      this.hitDetectionImages_.push(hitDetectionImage);\n    }\n  }\n\n  this.anchorX = anchor[0];\n  this.anchorY = anchor[1];\n  this.height = size[1];\n  this.imageHeight = imageSize[1];\n  this.imageWidth = imageSize[0];\n  this.opacity = opacity;\n  this.originX = origin[0];\n  this.originY = origin[1];\n  this.rotation = rotation;\n  this.rotateWithView = rotateWithView;\n  this.scale = scale;\n  this.width = size[0];\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_ImageReplay_.prototype.getTextures = function(opt_all) {\n  return opt_all ? this.textures_.concat(this.hitDetectionTextures_) : this.textures_;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_ImageReplay_.prototype.getHitDetectionTextures = function() {\n  return this.hitDetectionTextures_;\n};\nexport default _ol_render_webgl_ImageReplay_;\n","import _ol_geom_flat_area_ from '../flat/area.js';\nvar _ol_geom_flat_topology_ = {};\n\n/**\n * Check if the linestring is a boundary.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {boolean} The linestring is a boundary.\n */\n_ol_geom_flat_topology_.lineStringIsClosed = function(flatCoordinates, offset, end, stride) {\n  var lastCoord = end - stride;\n  if (flatCoordinates[offset] === flatCoordinates[lastCoord] &&\n      flatCoordinates[offset + 1] === flatCoordinates[lastCoord + 1] && (end - offset) / stride > 3) {\n    return !!_ol_geom_flat_area_.linearRing(flatCoordinates, offset, end, stride);\n  }\n  return false;\n};\nexport default _ol_geom_flat_topology_;\n","// This file is automatically generated, do not edit\nimport _ol_ from '../../../index.js';\nimport _ol_webgl_Fragment_ from '../../../webgl/fragment.js';\nimport _ol_webgl_Vertex_ from '../../../webgl/vertex.js';\nvar _ol_render_webgl_linestringreplay_defaultshader_ = {};\n\n\n_ol_render_webgl_linestringreplay_defaultshader_.fragment = new _ol_webgl_Fragment_(_ol_.DEBUG_WEBGL ?\n  'precision mediump float;\\nvarying float v_round;\\nvarying vec2 v_roundVertex;\\nvarying float v_halfWidth;\\n\\n\\n\\nuniform float u_opacity;\\nuniform vec4 u_color;\\nuniform vec2 u_size;\\nuniform float u_pixelRatio;\\n\\nvoid main(void) {\\n  if (v_round > 0.0) {\\n    vec2 windowCoords = vec2((v_roundVertex.x + 1.0) / 2.0 * u_size.x * u_pixelRatio,\\n        (v_roundVertex.y + 1.0) / 2.0 * u_size.y * u_pixelRatio);\\n    if (length(windowCoords - gl_FragCoord.xy) > v_halfWidth * u_pixelRatio) {\\n      discard;\\n    }\\n  }\\n  gl_FragColor = u_color;\\n  float alpha = u_color.a * u_opacity;\\n  if (alpha == 0.0) {\\n    discard;\\n  }\\n  gl_FragColor.a = alpha;\\n}\\n' :\n  'precision mediump float;varying float a;varying vec2 aVertex;varying float c;uniform float m;uniform vec4 n;uniform vec2 o;uniform float p;void main(void){if(a>0.0){vec2 windowCoords=vec2((aVertex.x+1.0)/2.0*o.x*p,(aVertex.y+1.0)/2.0*o.y*p);if(length(windowCoords-gl_FragCoord.xy)>c*p){discard;}} gl_FragColor=n;float alpha=n.a*m;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}');\n\n_ol_render_webgl_linestringreplay_defaultshader_.vertex = new _ol_webgl_Vertex_(_ol_.DEBUG_WEBGL ?\n  'varying float v_round;\\nvarying vec2 v_roundVertex;\\nvarying float v_halfWidth;\\n\\n\\nattribute vec2 a_lastPos;\\nattribute vec2 a_position;\\nattribute vec2 a_nextPos;\\nattribute float a_direction;\\n\\nuniform mat4 u_projectionMatrix;\\nuniform mat4 u_offsetScaleMatrix;\\nuniform mat4 u_offsetRotateMatrix;\\nuniform float u_lineWidth;\\nuniform float u_miterLimit;\\n\\nbool nearlyEquals(in float value, in float ref) {\\n  float epsilon = 0.000000000001;\\n  return value >= ref - epsilon && value <= ref + epsilon;\\n}\\n\\nvoid alongNormal(out vec2 offset, in vec2 nextP, in float turnDir, in float direction) {\\n  vec2 dirVect = nextP - a_position;\\n  vec2 normal = normalize(vec2(-turnDir * dirVect.y, turnDir * dirVect.x));\\n  offset = u_lineWidth / 2.0 * normal * direction;\\n}\\n\\nvoid miterUp(out vec2 offset, out float round, in bool isRound, in float direction) {\\n  float halfWidth = u_lineWidth / 2.0;\\n  vec2 tangent = normalize(normalize(a_nextPos - a_position) + normalize(a_position - a_lastPos));\\n  vec2 normal = vec2(-tangent.y, tangent.x);\\n  vec2 dirVect = a_nextPos - a_position;\\n  vec2 tmpNormal = normalize(vec2(-dirVect.y, dirVect.x));\\n  float miterLength = abs(halfWidth / dot(normal, tmpNormal));\\n  offset = normal * direction * miterLength;\\n  round = 0.0;\\n  if (isRound) {\\n    round = 1.0;\\n  } else if (miterLength > u_miterLimit + u_lineWidth) {\\n    offset = halfWidth * tmpNormal * direction;\\n  }\\n}\\n\\nbool miterDown(out vec2 offset, in vec4 projPos, in mat4 offsetMatrix, in float direction) {\\n  bool degenerate = false;\\n  vec2 tangent = normalize(normalize(a_nextPos - a_position) + normalize(a_position - a_lastPos));\\n  vec2 normal = vec2(-tangent.y, tangent.x);\\n  vec2 dirVect = a_lastPos - a_position;\\n  vec2 tmpNormal = normalize(vec2(-dirVect.y, dirVect.x));\\n  vec2 longOffset, shortOffset, longVertex;\\n  vec4 shortProjVertex;\\n  float halfWidth = u_lineWidth / 2.0;\\n  if (length(a_nextPos - a_position) > length(a_lastPos - a_position)) {\\n    longOffset = tmpNormal * direction * halfWidth;\\n    shortOffset = normalize(vec2(dirVect.y, -dirVect.x)) * direction * halfWidth;\\n    longVertex = a_nextPos;\\n    shortProjVertex = u_projectionMatrix * vec4(a_lastPos, 0.0, 1.0);\\n  } else {\\n    shortOffset = tmpNormal * direction * halfWidth;\\n    longOffset = normalize(vec2(dirVect.y, -dirVect.x)) * direction * halfWidth;\\n    longVertex = a_lastPos;\\n    shortProjVertex = u_projectionMatrix * vec4(a_nextPos, 0.0, 1.0);\\n  }\\n  //Intersection algorithm based on theory by Paul Bourke (http://paulbourke.net/geometry/pointlineplane/).\\n  vec4 p1 = u_projectionMatrix * vec4(longVertex, 0.0, 1.0) + offsetMatrix * vec4(longOffset, 0.0, 0.0);\\n  vec4 p2 = projPos + offsetMatrix * vec4(longOffset, 0.0, 0.0);\\n  vec4 p3 = shortProjVertex + offsetMatrix * vec4(-shortOffset, 0.0, 0.0);\\n  vec4 p4 = shortProjVertex + offsetMatrix * vec4(shortOffset, 0.0, 0.0);\\n  float denom = (p4.y - p3.y) * (p2.x - p1.x) - (p4.x - p3.x) * (p2.y - p1.y);\\n  float firstU = ((p4.x - p3.x) * (p1.y - p3.y) - (p4.y - p3.y) * (p1.x - p3.x)) / denom;\\n  float secondU = ((p2.x - p1.x) * (p1.y - p3.y) - (p2.y - p1.y) * (p1.x - p3.x)) / denom;\\n  float epsilon = 0.000000000001;\\n  if (firstU > epsilon && firstU < 1.0 - epsilon && secondU > epsilon && secondU < 1.0 - epsilon) {\\n    shortProjVertex.x = p1.x + firstU * (p2.x - p1.x);\\n    shortProjVertex.y = p1.y + firstU * (p2.y - p1.y);\\n    offset = shortProjVertex.xy;\\n    degenerate = true;\\n  } else {\\n    float miterLength = abs(halfWidth / dot(normal, tmpNormal));\\n    offset = normal * direction * miterLength;\\n  }\\n  return degenerate;\\n}\\n\\nvoid squareCap(out vec2 offset, out float round, in bool isRound, in vec2 nextP,\\n    in float turnDir, in float direction) {\\n  round = 0.0;\\n  vec2 dirVect = a_position - nextP;\\n  vec2 firstNormal = normalize(dirVect);\\n  vec2 secondNormal = vec2(turnDir * firstNormal.y * direction, -turnDir * firstNormal.x * direction);\\n  vec2 hypotenuse = normalize(firstNormal - secondNormal);\\n  vec2 normal = vec2(turnDir * hypotenuse.y * direction, -turnDir * hypotenuse.x * direction);\\n  float length = sqrt(v_halfWidth * v_halfWidth * 2.0);\\n  offset = normal * length;\\n  if (isRound) {\\n    round = 1.0;\\n  }\\n}\\n\\nvoid main(void) {\\n  bool degenerate = false;\\n  float direction = float(sign(a_direction));\\n  mat4 offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\\n  vec2 offset;\\n  vec4 projPos = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\\n  bool round = nearlyEquals(mod(a_direction, 2.0), 0.0);\\n\\n  v_round = 0.0;\\n  v_halfWidth = u_lineWidth / 2.0;\\n  v_roundVertex = projPos.xy;\\n\\n  if (nearlyEquals(mod(a_direction, 3.0), 0.0) || nearlyEquals(mod(a_direction, 17.0), 0.0)) {\\n    alongNormal(offset, a_nextPos, 1.0, direction);\\n  } else if (nearlyEquals(mod(a_direction, 5.0), 0.0) || nearlyEquals(mod(a_direction, 13.0), 0.0)) {\\n    alongNormal(offset, a_lastPos, -1.0, direction);\\n  } else if (nearlyEquals(mod(a_direction, 23.0), 0.0)) {\\n    miterUp(offset, v_round, round, direction);\\n  } else if (nearlyEquals(mod(a_direction, 19.0), 0.0)) {\\n    degenerate = miterDown(offset, projPos, offsetMatrix, direction);\\n  } else if (nearlyEquals(mod(a_direction, 7.0), 0.0)) {\\n    squareCap(offset, v_round, round, a_nextPos, 1.0, direction);\\n  } else if (nearlyEquals(mod(a_direction, 11.0), 0.0)) {\\n    squareCap(offset, v_round, round, a_lastPos, -1.0, direction);\\n  }\\n  if (!degenerate) {\\n    vec4 offsets = offsetMatrix * vec4(offset, 0.0, 0.0);\\n    gl_Position = projPos + offsets;\\n  } else {\\n    gl_Position = vec4(offset, 0.0, 1.0);\\n  }\\n}\\n\\n\\n' :\n  'varying float a;varying vec2 aVertex;varying float c;attribute vec2 d;attribute vec2 e;attribute vec2 f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;uniform float k;uniform float l;bool nearlyEquals(in float value,in float ref){float epsilon=0.000000000001;return value>=ref-epsilon&&value<=ref+epsilon;}void alongNormal(out vec2 offset,in vec2 nextP,in float turnDir,in float direction){vec2 dirVect=nextP-e;vec2 normal=normalize(vec2(-turnDir*dirVect.y,turnDir*dirVect.x));offset=k/2.0*normal*direction;}void miterUp(out vec2 offset,out float round,in bool isRound,in float direction){float halfWidth=k/2.0;vec2 tangent=normalize(normalize(f-e)+normalize(e-d));vec2 normal=vec2(-tangent.y,tangent.x);vec2 dirVect=f-e;vec2 tmpNormal=normalize(vec2(-dirVect.y,dirVect.x));float miterLength=abs(halfWidth/dot(normal,tmpNormal));offset=normal*direction*miterLength;round=0.0;if(isRound){round=1.0;}else if(miterLength>l+k){offset=halfWidth*tmpNormal*direction;}} bool miterDown(out vec2 offset,in vec4 projPos,in mat4 offsetMatrix,in float direction){bool degenerate=false;vec2 tangent=normalize(normalize(f-e)+normalize(e-d));vec2 normal=vec2(-tangent.y,tangent.x);vec2 dirVect=d-e;vec2 tmpNormal=normalize(vec2(-dirVect.y,dirVect.x));vec2 longOffset,shortOffset,longVertex;vec4 shortProjVertex;float halfWidth=k/2.0;if(length(f-e)>length(d-e)){longOffset=tmpNormal*direction*halfWidth;shortOffset=normalize(vec2(dirVect.y,-dirVect.x))*direction*halfWidth;longVertex=f;shortProjVertex=h*vec4(d,0.0,1.0);}else{shortOffset=tmpNormal*direction*halfWidth;longOffset=normalize(vec2(dirVect.y,-dirVect.x))*direction*halfWidth;longVertex=d;shortProjVertex=h*vec4(f,0.0,1.0);}vec4 p1=h*vec4(longVertex,0.0,1.0)+offsetMatrix*vec4(longOffset,0.0,0.0);vec4 p2=projPos+offsetMatrix*vec4(longOffset,0.0,0.0);vec4 p3=shortProjVertex+offsetMatrix*vec4(-shortOffset,0.0,0.0);vec4 p4=shortProjVertex+offsetMatrix*vec4(shortOffset,0.0,0.0);float denom=(p4.y-p3.y)*(p2.x-p1.x)-(p4.x-p3.x)*(p2.y-p1.y);float firstU=((p4.x-p3.x)*(p1.y-p3.y)-(p4.y-p3.y)*(p1.x-p3.x))/denom;float secondU=((p2.x-p1.x)*(p1.y-p3.y)-(p2.y-p1.y)*(p1.x-p3.x))/denom;float epsilon=0.000000000001;if(firstU>epsilon&&firstU<1.0-epsilon&&secondU>epsilon&&secondU<1.0-epsilon){shortProjVertex.x=p1.x+firstU*(p2.x-p1.x);shortProjVertex.y=p1.y+firstU*(p2.y-p1.y);offset=shortProjVertex.xy;degenerate=true;}else{float miterLength=abs(halfWidth/dot(normal,tmpNormal));offset=normal*direction*miterLength;}return degenerate;}void squareCap(out vec2 offset,out float round,in bool isRound,in vec2 nextP,in float turnDir,in float direction){round=0.0;vec2 dirVect=e-nextP;vec2 firstNormal=normalize(dirVect);vec2 secondNormal=vec2(turnDir*firstNormal.y*direction,-turnDir*firstNormal.x*direction);vec2 hypotenuse=normalize(firstNormal-secondNormal);vec2 normal=vec2(turnDir*hypotenuse.y*direction,-turnDir*hypotenuse.x*direction);float length=sqrt(c*c*2.0);offset=normal*length;if(isRound){round=1.0;}} void main(void){bool degenerate=false;float direction=float(sign(g));mat4 offsetMatrix=i*j;vec2 offset;vec4 projPos=h*vec4(e,0.0,1.0);bool round=nearlyEquals(mod(g,2.0),0.0);a=0.0;c=k/2.0;aVertex=projPos.xy;if(nearlyEquals(mod(g,3.0),0.0)||nearlyEquals(mod(g,17.0),0.0)){alongNormal(offset,f,1.0,direction);}else if(nearlyEquals(mod(g,5.0),0.0)||nearlyEquals(mod(g,13.0),0.0)){alongNormal(offset,d,-1.0,direction);}else if(nearlyEquals(mod(g,23.0),0.0)){miterUp(offset,a,round,direction);}else if(nearlyEquals(mod(g,19.0),0.0)){degenerate=miterDown(offset,projPos,offsetMatrix,direction);}else if(nearlyEquals(mod(g,7.0),0.0)){squareCap(offset,a,round,f,1.0,direction);}else if(nearlyEquals(mod(g,11.0),0.0)){squareCap(offset,a,round,d,-1.0,direction);}if(!degenerate){vec4 offsets=offsetMatrix*vec4(offset,0.0,0.0);gl_Position=projPos+offsets;}else{gl_Position=vec4(offset,0.0,1.0);}}');\nexport default _ol_render_webgl_linestringreplay_defaultshader_;","// This file is automatically generated, do not edit\nimport _ol_ from '../../../../index.js';\n\n/**\n * @constructor\n * @param {WebGLRenderingContext} gl GL.\n * @param {WebGLProgram} program Program.\n * @struct\n */\nvar _ol_render_webgl_linestringreplay_defaultshader_Locations_ = function(gl, program) {\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_projectionMatrix = gl.getUniformLocation(\n      program, _ol_.DEBUG_WEBGL ? 'u_projectionMatrix' : 'h');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_offsetScaleMatrix = gl.getUniformLocation(\n      program, _ol_.DEBUG_WEBGL ? 'u_offsetScaleMatrix' : 'i');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_offsetRotateMatrix = gl.getUniformLocation(\n      program, _ol_.DEBUG_WEBGL ? 'u_offsetRotateMatrix' : 'j');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_lineWidth = gl.getUniformLocation(\n      program, _ol_.DEBUG_WEBGL ? 'u_lineWidth' : 'k');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_miterLimit = gl.getUniformLocation(\n      program, _ol_.DEBUG_WEBGL ? 'u_miterLimit' : 'l');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_opacity = gl.getUniformLocation(\n      program, _ol_.DEBUG_WEBGL ? 'u_opacity' : 'm');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_color = gl.getUniformLocation(\n      program, _ol_.DEBUG_WEBGL ? 'u_color' : 'n');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_size = gl.getUniformLocation(\n      program, _ol_.DEBUG_WEBGL ? 'u_size' : 'o');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_pixelRatio = gl.getUniformLocation(\n      program, _ol_.DEBUG_WEBGL ? 'u_pixelRatio' : 'p');\n\n  /**\n   * @type {number}\n   */\n  this.a_lastPos = gl.getAttribLocation(\n      program, _ol_.DEBUG_WEBGL ? 'a_lastPos' : 'd');\n\n  /**\n   * @type {number}\n   */\n  this.a_position = gl.getAttribLocation(\n      program, _ol_.DEBUG_WEBGL ? 'a_position' : 'e');\n\n  /**\n   * @type {number}\n   */\n  this.a_nextPos = gl.getAttribLocation(\n      program, _ol_.DEBUG_WEBGL ? 'a_nextPos' : 'f');\n\n  /**\n   * @type {number}\n   */\n  this.a_direction = gl.getAttribLocation(\n      program, _ol_.DEBUG_WEBGL ? 'a_direction' : 'g');\n};\n\nexport default _ol_render_webgl_linestringreplay_defaultshader_Locations_;","import _ol_ from '../../index.js';\nimport _ol_array_ from '../../array.js';\nimport _ol_color_ from '../../color.js';\nimport _ol_extent_ from '../../extent.js';\nimport _ol_geom_flat_orient_ from '../../geom/flat/orient.js';\nimport _ol_geom_flat_transform_ from '../../geom/flat/transform.js';\nimport _ol_geom_flat_topology_ from '../../geom/flat/topology.js';\nimport _ol_obj_ from '../../obj.js';\nimport _ol_render_webgl_ from '../webgl.js';\nimport _ol_render_webgl_Replay_ from '../webgl/replay.js';\nimport _ol_render_webgl_linestringreplay_defaultshader_ from '../webgl/linestringreplay/defaultshader.js';\nimport _ol_render_webgl_linestringreplay_defaultshader_Locations_ from '../webgl/linestringreplay/defaultshader/locations.js';\nimport _ol_webgl_ from '../../webgl.js';\nimport _ol_webgl_Buffer_ from '../../webgl/buffer.js';\n\n/**\n * @constructor\n * @extends {ol.render.webgl.Replay}\n * @param {number} tolerance Tolerance.\n * @param {ol.Extent} maxExtent Max extent.\n * @struct\n */\nvar _ol_render_webgl_LineStringReplay_ = function(tolerance, maxExtent) {\n  _ol_render_webgl_Replay_.call(this, tolerance, maxExtent);\n\n  /**\n   * @private\n   * @type {ol.render.webgl.linestringreplay.defaultshader.Locations}\n   */\n  this.defaultLocations_ = null;\n\n  /**\n   * @private\n   * @type {Array.<Array.<?>>}\n   */\n  this.styles_ = [];\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.styleIndices_ = [];\n\n  /**\n   * @private\n   * @type {{strokeColor: (Array.<number>|null),\n   *         lineCap: (string|undefined),\n   *         lineDash: Array.<number>,\n   *         lineDashOffset: (number|undefined),\n   *         lineJoin: (string|undefined),\n   *         lineWidth: (number|undefined),\n   *         miterLimit: (number|undefined),\n   *         changed: boolean}|null}\n   */\n  this.state_ = {\n    strokeColor: null,\n    lineCap: undefined,\n    lineDash: null,\n    lineDashOffset: undefined,\n    lineJoin: undefined,\n    lineWidth: undefined,\n    miterLimit: undefined,\n    changed: false\n  };\n\n};\n\n_ol_.inherits(_ol_render_webgl_LineStringReplay_, _ol_render_webgl_Replay_);\n\n\n/**\n * Draw one segment.\n * @private\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n */\n_ol_render_webgl_LineStringReplay_.prototype.drawCoordinates_ = function(flatCoordinates, offset, end, stride) {\n\n  var i, ii;\n  var numVertices = this.vertices.length;\n  var numIndices = this.indices.length;\n  //To save a vertex, the direction of a point is a product of the sign (1 or -1), a prime from\n  //ol.render.webgl.LineStringReplay.Instruction_, and a rounding factor (1 or 2). If the product is even,\n  //we round it. If it is odd, we don't.\n  var lineJoin = this.state_.lineJoin === 'bevel' ? 0 :\n    this.state_.lineJoin === 'miter' ? 1 : 2;\n  var lineCap = this.state_.lineCap === 'butt' ? 0 :\n    this.state_.lineCap === 'square' ? 1 : 2;\n  var closed = _ol_geom_flat_topology_.lineStringIsClosed(flatCoordinates, offset, end, stride);\n  var startCoords, sign, n;\n  var lastIndex = numIndices;\n  var lastSign = 1;\n  //We need the adjacent vertices to define normals in joins. p0 = last, p1 = current, p2 = next.\n  var p0, p1, p2;\n\n  for (i = offset, ii = end; i < ii; i += stride) {\n\n    n = numVertices / 7;\n\n    p0 = p1;\n    p1 = p2 || [flatCoordinates[i], flatCoordinates[i + 1]];\n    //First vertex.\n    if (i === offset) {\n      p2 = [flatCoordinates[i + stride], flatCoordinates[i + stride + 1]];\n      if (end - offset === stride * 2 && _ol_array_.equals(p1, p2)) {\n        break;\n      }\n      if (closed) {\n        //A closed line! Complete the circle.\n        p0 = [flatCoordinates[end - stride * 2],\n          flatCoordinates[end - stride * 2 + 1]];\n\n        startCoords = p2;\n      } else {\n        //Add the first two/four vertices.\n\n        if (lineCap) {\n          numVertices = this.addVertices_([0, 0], p1, p2,\n              lastSign * _ol_render_webgl_LineStringReplay_.Instruction_.BEGIN_LINE_CAP * lineCap, numVertices);\n\n          numVertices = this.addVertices_([0, 0], p1, p2,\n              -lastSign * _ol_render_webgl_LineStringReplay_.Instruction_.BEGIN_LINE_CAP * lineCap, numVertices);\n\n          this.indices[numIndices++] = n + 2;\n          this.indices[numIndices++] = n;\n          this.indices[numIndices++] = n + 1;\n\n          this.indices[numIndices++] = n + 1;\n          this.indices[numIndices++] = n + 3;\n          this.indices[numIndices++] = n + 2;\n\n        }\n\n        numVertices = this.addVertices_([0, 0], p1, p2,\n            lastSign * _ol_render_webgl_LineStringReplay_.Instruction_.BEGIN_LINE * (lineCap || 1), numVertices);\n\n        numVertices = this.addVertices_([0, 0], p1, p2,\n            -lastSign * _ol_render_webgl_LineStringReplay_.Instruction_.BEGIN_LINE * (lineCap || 1), numVertices);\n\n        lastIndex = numVertices / 7 - 1;\n\n        continue;\n      }\n    } else if (i === end - stride) {\n      //Last vertex.\n      if (closed) {\n        //Same as the first vertex.\n        p2 = startCoords;\n        break;\n      } else {\n        p0 = p0 || [0, 0];\n\n        numVertices = this.addVertices_(p0, p1, [0, 0],\n            lastSign * _ol_render_webgl_LineStringReplay_.Instruction_.END_LINE * (lineCap || 1), numVertices);\n\n        numVertices = this.addVertices_(p0, p1, [0, 0],\n            -lastSign * _ol_render_webgl_LineStringReplay_.Instruction_.END_LINE * (lineCap || 1), numVertices);\n\n        this.indices[numIndices++] = n;\n        this.indices[numIndices++] = lastIndex - 1;\n        this.indices[numIndices++] = lastIndex;\n\n        this.indices[numIndices++] = lastIndex;\n        this.indices[numIndices++] = n + 1;\n        this.indices[numIndices++] = n;\n\n        if (lineCap) {\n          numVertices = this.addVertices_(p0, p1, [0, 0],\n              lastSign * _ol_render_webgl_LineStringReplay_.Instruction_.END_LINE_CAP * lineCap, numVertices);\n\n          numVertices = this.addVertices_(p0, p1, [0, 0],\n              -lastSign * _ol_render_webgl_LineStringReplay_.Instruction_.END_LINE_CAP * lineCap, numVertices);\n\n          this.indices[numIndices++] = n + 2;\n          this.indices[numIndices++] = n;\n          this.indices[numIndices++] = n + 1;\n\n          this.indices[numIndices++] = n + 1;\n          this.indices[numIndices++] = n + 3;\n          this.indices[numIndices++] = n + 2;\n\n        }\n\n        break;\n      }\n    } else {\n      p2 = [flatCoordinates[i + stride], flatCoordinates[i + stride + 1]];\n    }\n\n    // We group CW and straight lines, thus the not so inituitive CCW checking function.\n    sign = _ol_render_webgl_.triangleIsCounterClockwise(p0[0], p0[1], p1[0], p1[1], p2[0], p2[1])\n      ? -1 : 1;\n\n    numVertices = this.addVertices_(p0, p1, p2,\n        sign * _ol_render_webgl_LineStringReplay_.Instruction_.BEVEL_FIRST * (lineJoin || 1), numVertices);\n\n    numVertices = this.addVertices_(p0, p1, p2,\n        sign * _ol_render_webgl_LineStringReplay_.Instruction_.BEVEL_SECOND * (lineJoin || 1), numVertices);\n\n    numVertices = this.addVertices_(p0, p1, p2,\n        -sign * _ol_render_webgl_LineStringReplay_.Instruction_.MITER_BOTTOM * (lineJoin || 1), numVertices);\n\n    if (i > offset) {\n      this.indices[numIndices++] = n;\n      this.indices[numIndices++] = lastIndex - 1;\n      this.indices[numIndices++] = lastIndex;\n\n      this.indices[numIndices++] = n + 2;\n      this.indices[numIndices++] = n;\n      this.indices[numIndices++] = lastSign * sign > 0 ? lastIndex : lastIndex - 1;\n    }\n\n    this.indices[numIndices++] = n;\n    this.indices[numIndices++] = n + 2;\n    this.indices[numIndices++] = n + 1;\n\n    lastIndex = n + 2;\n    lastSign = sign;\n\n    //Add miter\n    if (lineJoin) {\n      numVertices = this.addVertices_(p0, p1, p2,\n          sign * _ol_render_webgl_LineStringReplay_.Instruction_.MITER_TOP * lineJoin, numVertices);\n\n      this.indices[numIndices++] = n + 1;\n      this.indices[numIndices++] = n + 3;\n      this.indices[numIndices++] = n;\n    }\n  }\n\n  if (closed) {\n    n = n || numVertices / 7;\n    sign = _ol_geom_flat_orient_.linearRingIsClockwise([p0[0], p0[1], p1[0], p1[1], p2[0], p2[1]], 0, 6, 2)\n      ? 1 : -1;\n\n    numVertices = this.addVertices_(p0, p1, p2,\n        sign * _ol_render_webgl_LineStringReplay_.Instruction_.BEVEL_FIRST * (lineJoin || 1), numVertices);\n\n    numVertices = this.addVertices_(p0, p1, p2,\n        -sign * _ol_render_webgl_LineStringReplay_.Instruction_.MITER_BOTTOM * (lineJoin || 1), numVertices);\n\n    this.indices[numIndices++] = n;\n    this.indices[numIndices++] = lastIndex - 1;\n    this.indices[numIndices++] = lastIndex;\n\n    this.indices[numIndices++] = n + 1;\n    this.indices[numIndices++] = n;\n    this.indices[numIndices++] = lastSign * sign > 0 ? lastIndex : lastIndex - 1;\n  }\n};\n\n/**\n * @param {Array.<number>} p0 Last coordinates.\n * @param {Array.<number>} p1 Current coordinates.\n * @param {Array.<number>} p2 Next coordinates.\n * @param {number} product Sign, instruction, and rounding product.\n * @param {number} numVertices Vertex counter.\n * @return {number} Vertex counter.\n * @private\n */\n_ol_render_webgl_LineStringReplay_.prototype.addVertices_ = function(p0, p1, p2, product, numVertices) {\n  this.vertices[numVertices++] = p0[0];\n  this.vertices[numVertices++] = p0[1];\n  this.vertices[numVertices++] = p1[0];\n  this.vertices[numVertices++] = p1[1];\n  this.vertices[numVertices++] = p2[0];\n  this.vertices[numVertices++] = p2[1];\n  this.vertices[numVertices++] = product;\n\n  return numVertices;\n};\n\n/**\n * Check if the linestring can be drawn (i. e. valid).\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {boolean} The linestring can be drawn.\n * @private\n */\n_ol_render_webgl_LineStringReplay_.prototype.isValid_ = function(flatCoordinates, offset, end, stride) {\n  var range = end - offset;\n  if (range < stride * 2) {\n    return false;\n  } else if (range === stride * 2) {\n    var firstP = [flatCoordinates[offset], flatCoordinates[offset + 1]];\n    var lastP = [flatCoordinates[offset + stride], flatCoordinates[offset + stride + 1]];\n    return !_ol_array_.equals(firstP, lastP);\n  }\n\n  return true;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_LineStringReplay_.prototype.drawLineString = function(lineStringGeometry, feature) {\n  var flatCoordinates = lineStringGeometry.getFlatCoordinates();\n  var stride = lineStringGeometry.getStride();\n  if (this.isValid_(flatCoordinates, 0, flatCoordinates.length, stride)) {\n    flatCoordinates = _ol_geom_flat_transform_.translate(flatCoordinates, 0, flatCoordinates.length,\n        stride, -this.origin[0], -this.origin[1]);\n    if (this.state_.changed) {\n      this.styleIndices_.push(this.indices.length);\n      this.state_.changed = false;\n    }\n    this.startIndices.push(this.indices.length);\n    this.startIndicesFeature.push(feature);\n    this.drawCoordinates_(\n        flatCoordinates, 0, flatCoordinates.length, stride);\n  }\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_LineStringReplay_.prototype.drawMultiLineString = function(multiLineStringGeometry, feature) {\n  var indexCount = this.indices.length;\n  var ends = multiLineStringGeometry.getEnds();\n  ends.unshift(0);\n  var flatCoordinates = multiLineStringGeometry.getFlatCoordinates();\n  var stride = multiLineStringGeometry.getStride();\n  var i, ii;\n  if (ends.length > 1) {\n    for (i = 1, ii = ends.length; i < ii; ++i) {\n      if (this.isValid_(flatCoordinates, ends[i - 1], ends[i], stride)) {\n        var lineString = _ol_geom_flat_transform_.translate(flatCoordinates, ends[i - 1], ends[i],\n            stride, -this.origin[0], -this.origin[1]);\n        this.drawCoordinates_(\n            lineString, 0, lineString.length, stride);\n      }\n    }\n  }\n  if (this.indices.length > indexCount) {\n    this.startIndices.push(indexCount);\n    this.startIndicesFeature.push(feature);\n    if (this.state_.changed) {\n      this.styleIndices_.push(indexCount);\n      this.state_.changed = false;\n    }\n  }\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {Array.<Array.<number>>} holeFlatCoordinates Hole flat coordinates.\n * @param {number} stride Stride.\n */\n_ol_render_webgl_LineStringReplay_.prototype.drawPolygonCoordinates = function(\n    flatCoordinates, holeFlatCoordinates, stride) {\n  if (!_ol_geom_flat_topology_.lineStringIsClosed(flatCoordinates, 0,\n      flatCoordinates.length, stride)) {\n    flatCoordinates.push(flatCoordinates[0]);\n    flatCoordinates.push(flatCoordinates[1]);\n  }\n  this.drawCoordinates_(flatCoordinates, 0, flatCoordinates.length, stride);\n  if (holeFlatCoordinates.length) {\n    var i, ii;\n    for (i = 0, ii = holeFlatCoordinates.length; i < ii; ++i) {\n      if (!_ol_geom_flat_topology_.lineStringIsClosed(holeFlatCoordinates[i], 0,\n          holeFlatCoordinates[i].length, stride)) {\n        holeFlatCoordinates[i].push(holeFlatCoordinates[i][0]);\n        holeFlatCoordinates[i].push(holeFlatCoordinates[i][1]);\n      }\n      this.drawCoordinates_(holeFlatCoordinates[i], 0,\n          holeFlatCoordinates[i].length, stride);\n    }\n  }\n};\n\n\n/**\n * @param {ol.Feature|ol.render.Feature} feature Feature.\n * @param {number=} opt_index Index count.\n */\n_ol_render_webgl_LineStringReplay_.prototype.setPolygonStyle = function(feature, opt_index) {\n  var index = opt_index === undefined ? this.indices.length : opt_index;\n  this.startIndices.push(index);\n  this.startIndicesFeature.push(feature);\n  if (this.state_.changed) {\n    this.styleIndices_.push(index);\n    this.state_.changed = false;\n  }\n};\n\n\n/**\n * @return {number} Current index.\n */\n_ol_render_webgl_LineStringReplay_.prototype.getCurrentIndex = function() {\n  return this.indices.length;\n};\n\n\n/**\n * @inheritDoc\n **/\n_ol_render_webgl_LineStringReplay_.prototype.finish = function(context) {\n  // create, bind, and populate the vertices buffer\n  this.verticesBuffer = new _ol_webgl_Buffer_(this.vertices);\n\n  // create, bind, and populate the indices buffer\n  this.indicesBuffer = new _ol_webgl_Buffer_(this.indices);\n\n  this.startIndices.push(this.indices.length);\n\n  //Clean up, if there is nothing to draw\n  if (this.styleIndices_.length === 0 && this.styles_.length > 0) {\n    this.styles_ = [];\n  }\n\n  this.vertices = null;\n  this.indices = null;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_LineStringReplay_.prototype.getDeleteResourcesFunction = function(context) {\n  var verticesBuffer = this.verticesBuffer;\n  var indicesBuffer = this.indicesBuffer;\n  return function() {\n    context.deleteBuffer(verticesBuffer);\n    context.deleteBuffer(indicesBuffer);\n  };\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_LineStringReplay_.prototype.setUpProgram = function(gl, context, size, pixelRatio) {\n  // get the program\n  var fragmentShader, vertexShader;\n  fragmentShader = _ol_render_webgl_linestringreplay_defaultshader_.fragment;\n  vertexShader = _ol_render_webgl_linestringreplay_defaultshader_.vertex;\n  var program = context.getProgram(fragmentShader, vertexShader);\n\n  // get the locations\n  var locations;\n  if (!this.defaultLocations_) {\n    locations = new _ol_render_webgl_linestringreplay_defaultshader_Locations_(gl, program);\n    this.defaultLocations_ = locations;\n  } else {\n    locations = this.defaultLocations_;\n  }\n\n  context.useProgram(program);\n\n  // enable the vertex attrib arrays\n  gl.enableVertexAttribArray(locations.a_lastPos);\n  gl.vertexAttribPointer(locations.a_lastPos, 2, _ol_webgl_.FLOAT,\n      false, 28, 0);\n\n  gl.enableVertexAttribArray(locations.a_position);\n  gl.vertexAttribPointer(locations.a_position, 2, _ol_webgl_.FLOAT,\n      false, 28, 8);\n\n  gl.enableVertexAttribArray(locations.a_nextPos);\n  gl.vertexAttribPointer(locations.a_nextPos, 2, _ol_webgl_.FLOAT,\n      false, 28, 16);\n\n  gl.enableVertexAttribArray(locations.a_direction);\n  gl.vertexAttribPointer(locations.a_direction, 1, _ol_webgl_.FLOAT,\n      false, 28, 24);\n\n  // Enable renderer specific uniforms.\n  gl.uniform2fv(locations.u_size, size);\n  gl.uniform1f(locations.u_pixelRatio, pixelRatio);\n\n  return locations;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_LineStringReplay_.prototype.shutDownProgram = function(gl, locations) {\n  gl.disableVertexAttribArray(locations.a_lastPos);\n  gl.disableVertexAttribArray(locations.a_position);\n  gl.disableVertexAttribArray(locations.a_nextPos);\n  gl.disableVertexAttribArray(locations.a_direction);\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_LineStringReplay_.prototype.drawReplay = function(gl, context, skippedFeaturesHash, hitDetection) {\n  //Save GL parameters.\n  var tmpDepthFunc = /** @type {number} */ (gl.getParameter(gl.DEPTH_FUNC));\n  var tmpDepthMask = /** @type {boolean} */ (gl.getParameter(gl.DEPTH_WRITEMASK));\n\n  if (!hitDetection) {\n    gl.enable(gl.DEPTH_TEST);\n    gl.depthMask(true);\n    gl.depthFunc(gl.NOTEQUAL);\n  }\n\n  if (!_ol_obj_.isEmpty(skippedFeaturesHash)) {\n    this.drawReplaySkipping_(gl, context, skippedFeaturesHash);\n  } else {\n    //Draw by style groups to minimize drawElements() calls.\n    var i, start, end, nextStyle;\n    end = this.startIndices[this.startIndices.length - 1];\n    for (i = this.styleIndices_.length - 1; i >= 0; --i) {\n      start = this.styleIndices_[i];\n      nextStyle = this.styles_[i];\n      this.setStrokeStyle_(gl, nextStyle[0], nextStyle[1], nextStyle[2]);\n      this.drawElements(gl, context, start, end);\n      gl.clear(gl.DEPTH_BUFFER_BIT);\n      end = start;\n    }\n  }\n  if (!hitDetection) {\n    gl.disable(gl.DEPTH_TEST);\n    gl.clear(gl.DEPTH_BUFFER_BIT);\n    //Restore GL parameters.\n    gl.depthMask(tmpDepthMask);\n    gl.depthFunc(tmpDepthFunc);\n  }\n};\n\n\n/**\n * @private\n * @param {WebGLRenderingContext} gl gl.\n * @param {ol.webgl.Context} context Context.\n * @param {Object} skippedFeaturesHash Ids of features to skip.\n */\n_ol_render_webgl_LineStringReplay_.prototype.drawReplaySkipping_ = function(gl, context, skippedFeaturesHash) {\n  var i, start, end, nextStyle, groupStart, feature, featureUid, featureIndex, featureStart;\n  featureIndex = this.startIndices.length - 2;\n  end = start = this.startIndices[featureIndex + 1];\n  for (i = this.styleIndices_.length - 1; i >= 0; --i) {\n    nextStyle = this.styles_[i];\n    this.setStrokeStyle_(gl, nextStyle[0], nextStyle[1], nextStyle[2]);\n    groupStart = this.styleIndices_[i];\n\n    while (featureIndex >= 0 &&\n        this.startIndices[featureIndex] >= groupStart) {\n      featureStart = this.startIndices[featureIndex];\n      feature = this.startIndicesFeature[featureIndex];\n      featureUid = _ol_.getUid(feature).toString();\n\n      if (skippedFeaturesHash[featureUid]) {\n        if (start !== end) {\n          this.drawElements(gl, context, start, end);\n          gl.clear(gl.DEPTH_BUFFER_BIT);\n        }\n        end = featureStart;\n      }\n      featureIndex--;\n      start = featureStart;\n    }\n    if (start !== end) {\n      this.drawElements(gl, context, start, end);\n      gl.clear(gl.DEPTH_BUFFER_BIT);\n    }\n    start = end = groupStart;\n  }\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_LineStringReplay_.prototype.drawHitDetectionReplayOneByOne = function(gl, context, skippedFeaturesHash,\n    featureCallback, opt_hitExtent) {\n  var i, start, end, nextStyle, groupStart, feature, featureUid, featureIndex;\n  featureIndex = this.startIndices.length - 2;\n  end = this.startIndices[featureIndex + 1];\n  for (i = this.styleIndices_.length - 1; i >= 0; --i) {\n    nextStyle = this.styles_[i];\n    this.setStrokeStyle_(gl, nextStyle[0], nextStyle[1], nextStyle[2]);\n    groupStart = this.styleIndices_[i];\n\n    while (featureIndex >= 0 &&\n        this.startIndices[featureIndex] >= groupStart) {\n      start = this.startIndices[featureIndex];\n      feature = this.startIndicesFeature[featureIndex];\n      featureUid = _ol_.getUid(feature).toString();\n\n      if (skippedFeaturesHash[featureUid] === undefined &&\n          feature.getGeometry() &&\n          (opt_hitExtent === undefined || _ol_extent_.intersects(\n              /** @type {Array<number>} */ (opt_hitExtent),\n              feature.getGeometry().getExtent()))) {\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n        this.drawElements(gl, context, start, end);\n\n        var result = featureCallback(feature);\n\n        if (result) {\n          return result;\n        }\n\n      }\n      featureIndex--;\n      end = start;\n    }\n  }\n  return undefined;\n};\n\n\n/**\n * @private\n * @param {WebGLRenderingContext} gl gl.\n * @param {Array.<number>} color Color.\n * @param {number} lineWidth Line width.\n * @param {number} miterLimit Miter limit.\n */\n_ol_render_webgl_LineStringReplay_.prototype.setStrokeStyle_ = function(gl, color, lineWidth, miterLimit) {\n  gl.uniform4fv(this.defaultLocations_.u_color, color);\n  gl.uniform1f(this.defaultLocations_.u_lineWidth, lineWidth);\n  gl.uniform1f(this.defaultLocations_.u_miterLimit, miterLimit);\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_LineStringReplay_.prototype.setFillStrokeStyle = function(fillStyle, strokeStyle) {\n  var strokeStyleLineCap = strokeStyle.getLineCap();\n  this.state_.lineCap = strokeStyleLineCap !== undefined ?\n    strokeStyleLineCap : _ol_render_webgl_.defaultLineCap;\n  var strokeStyleLineDash = strokeStyle.getLineDash();\n  this.state_.lineDash = strokeStyleLineDash ?\n    strokeStyleLineDash : _ol_render_webgl_.defaultLineDash;\n  var strokeStyleLineDashOffset = strokeStyle.getLineDashOffset();\n  this.state_.lineDashOffset = strokeStyleLineDashOffset ?\n    strokeStyleLineDashOffset : _ol_render_webgl_.defaultLineDashOffset;\n  var strokeStyleLineJoin = strokeStyle.getLineJoin();\n  this.state_.lineJoin = strokeStyleLineJoin !== undefined ?\n    strokeStyleLineJoin : _ol_render_webgl_.defaultLineJoin;\n  var strokeStyleColor = strokeStyle.getColor();\n  if (!(strokeStyleColor instanceof CanvasGradient) &&\n      !(strokeStyleColor instanceof CanvasPattern)) {\n    strokeStyleColor = _ol_color_.asArray(strokeStyleColor).map(function(c, i) {\n      return i != 3 ? c / 255 : c;\n    }) || _ol_render_webgl_.defaultStrokeStyle;\n  } else {\n    strokeStyleColor = _ol_render_webgl_.defaultStrokeStyle;\n  }\n  var strokeStyleWidth = strokeStyle.getWidth();\n  strokeStyleWidth = strokeStyleWidth !== undefined ?\n    strokeStyleWidth : _ol_render_webgl_.defaultLineWidth;\n  var strokeStyleMiterLimit = strokeStyle.getMiterLimit();\n  strokeStyleMiterLimit = strokeStyleMiterLimit !== undefined ?\n    strokeStyleMiterLimit : _ol_render_webgl_.defaultMiterLimit;\n  if (!this.state_.strokeColor || !_ol_array_.equals(this.state_.strokeColor, strokeStyleColor) ||\n      this.state_.lineWidth !== strokeStyleWidth || this.state_.miterLimit !== strokeStyleMiterLimit) {\n    this.state_.changed = true;\n    this.state_.strokeColor = strokeStyleColor;\n    this.state_.lineWidth = strokeStyleWidth;\n    this.state_.miterLimit = strokeStyleMiterLimit;\n    this.styles_.push([strokeStyleColor, strokeStyleWidth, strokeStyleMiterLimit]);\n  }\n};\n\n/**\n * @enum {number}\n * @private\n */\n_ol_render_webgl_LineStringReplay_.Instruction_ = {\n  ROUND: 2,\n  BEGIN_LINE: 3,\n  END_LINE: 5,\n  BEGIN_LINE_CAP: 7,\n  END_LINE_CAP: 11,\n  BEVEL_FIRST: 13,\n  BEVEL_SECOND: 17,\n  MITER_BOTTOM: 19,\n  MITER_TOP: 23\n};\nexport default _ol_render_webgl_LineStringReplay_;\n","// This file is automatically generated, do not edit\nimport _ol_ from '../../../index.js';\nimport _ol_webgl_Fragment_ from '../../../webgl/fragment.js';\nimport _ol_webgl_Vertex_ from '../../../webgl/vertex.js';\nvar _ol_render_webgl_polygonreplay_defaultshader_ = {};\n\n\n_ol_render_webgl_polygonreplay_defaultshader_.fragment = new _ol_webgl_Fragment_(_ol_.DEBUG_WEBGL ?\n  'precision mediump float;\\n\\n\\n\\nuniform vec4 u_color;\\nuniform float u_opacity;\\n\\nvoid main(void) {\\n  gl_FragColor = u_color;\\n  float alpha = u_color.a * u_opacity;\\n  if (alpha == 0.0) {\\n    discard;\\n  }\\n  gl_FragColor.a = alpha;\\n}\\n' :\n  'precision mediump float;uniform vec4 e;uniform float f;void main(void){gl_FragColor=e;float alpha=e.a*f;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}');\n\n_ol_render_webgl_polygonreplay_defaultshader_.vertex = new _ol_webgl_Vertex_(_ol_.DEBUG_WEBGL ?\n  '\\n\\nattribute vec2 a_position;\\n\\nuniform mat4 u_projectionMatrix;\\nuniform mat4 u_offsetScaleMatrix;\\nuniform mat4 u_offsetRotateMatrix;\\n\\nvoid main(void) {\\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\\n}\\n\\n\\n' :\n  'attribute vec2 a;uniform mat4 b;uniform mat4 c;uniform mat4 d;void main(void){gl_Position=b*vec4(a,0.0,1.0);}');\nexport default _ol_render_webgl_polygonreplay_defaultshader_;","// This file is automatically generated, do not edit\nimport _ol_ from '../../../../index.js';\n\n/**\n * @constructor\n * @param {WebGLRenderingContext} gl GL.\n * @param {WebGLProgram} program Program.\n * @struct\n */\nvar _ol_render_webgl_polygonreplay_defaultshader_Locations_ = function(gl, program) {\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_projectionMatrix = gl.getUniformLocation(\n      program, _ol_.DEBUG_WEBGL ? 'u_projectionMatrix' : 'b');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_offsetScaleMatrix = gl.getUniformLocation(\n      program, _ol_.DEBUG_WEBGL ? 'u_offsetScaleMatrix' : 'c');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_offsetRotateMatrix = gl.getUniformLocation(\n      program, _ol_.DEBUG_WEBGL ? 'u_offsetRotateMatrix' : 'd');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_color = gl.getUniformLocation(\n      program, _ol_.DEBUG_WEBGL ? 'u_color' : 'e');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_opacity = gl.getUniformLocation(\n      program, _ol_.DEBUG_WEBGL ? 'u_opacity' : 'f');\n\n  /**\n   * @type {number}\n   */\n  this.a_position = gl.getAttribLocation(\n      program, _ol_.DEBUG_WEBGL ? 'a_position' : 'a');\n};\n\nexport default _ol_render_webgl_polygonreplay_defaultshader_Locations_;","/**\n * Creates an empty linked list structure.\n *\n * @constructor\n * @struct\n * @param {boolean=} opt_circular The last item is connected to the first one,\n * and the first item to the last one. Default is true.\n */\nvar _ol_structs_LinkedList_ = function(opt_circular) {\n\n  /**\n   * @private\n   * @type {ol.LinkedListItem|undefined}\n   */\n  this.first_ = undefined;\n\n  /**\n   * @private\n   * @type {ol.LinkedListItem|undefined}\n   */\n  this.last_ = undefined;\n\n  /**\n   * @private\n   * @type {ol.LinkedListItem|undefined}\n   */\n  this.head_ = undefined;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.circular_ = opt_circular === undefined ? true : opt_circular;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.length_ = 0;\n};\n\n/**\n * Inserts an item into the linked list right after the current one.\n *\n * @param {?} data Item data.\n */\n_ol_structs_LinkedList_.prototype.insertItem = function(data) {\n\n  /** @type {ol.LinkedListItem} */\n  var item = {\n    prev: undefined,\n    next: undefined,\n    data: data\n  };\n\n  var head = this.head_;\n\n  //Initialize the list.\n  if (!head) {\n    this.first_ = item;\n    this.last_ = item;\n    if (this.circular_) {\n      item.next = item;\n      item.prev = item;\n    }\n  } else {\n    //Link the new item to the adjacent ones.\n    var next = head.next;\n    item.prev = head;\n    item.next = next;\n    head.next = item;\n    if (next) {\n      next.prev = item;\n    }\n\n    if (head === this.last_) {\n      this.last_ = item;\n    }\n  }\n  this.head_ = item;\n  this.length_++;\n};\n\n/**\n * Removes the current item from the list. Sets the cursor to the next item,\n * if possible.\n */\n_ol_structs_LinkedList_.prototype.removeItem = function() {\n  var head = this.head_;\n  if (head) {\n    var next = head.next;\n    var prev = head.prev;\n    if (next) {\n      next.prev = prev;\n    }\n    if (prev) {\n      prev.next = next;\n    }\n    this.head_ = next || prev;\n\n    if (this.first_ === this.last_) {\n      this.head_ = undefined;\n      this.first_ = undefined;\n      this.last_ = undefined;\n    } else if (this.first_ === head) {\n      this.first_ = this.head_;\n    } else if (this.last_ === head) {\n      this.last_ = prev ? this.head_.prev : this.head_;\n    }\n    this.length_--;\n  }\n};\n\n/**\n * Sets the cursor to the first item, and returns the associated data.\n *\n * @return {?} Item data.\n */\n_ol_structs_LinkedList_.prototype.firstItem = function() {\n  this.head_ = this.first_;\n  if (this.head_) {\n    return this.head_.data;\n  }\n  return undefined;\n};\n\n/**\n* Sets the cursor to the last item, and returns the associated data.\n*\n* @return {?} Item data.\n*/\n_ol_structs_LinkedList_.prototype.lastItem = function() {\n  this.head_ = this.last_;\n  if (this.head_) {\n    return this.head_.data;\n  }\n  return undefined;\n};\n\n/**\n * Sets the cursor to the next item, and returns the associated data.\n *\n * @return {?} Item data.\n */\n_ol_structs_LinkedList_.prototype.nextItem = function() {\n  if (this.head_ && this.head_.next) {\n    this.head_ = this.head_.next;\n    return this.head_.data;\n  }\n  return undefined;\n};\n\n/**\n * Returns the next item's data without moving the cursor.\n *\n * @return {?} Item data.\n */\n_ol_structs_LinkedList_.prototype.getNextItem = function() {\n  if (this.head_ && this.head_.next) {\n    return this.head_.next.data;\n  }\n  return undefined;\n};\n\n/**\n * Sets the cursor to the previous item, and returns the associated data.\n *\n * @return {?} Item data.\n */\n_ol_structs_LinkedList_.prototype.prevItem = function() {\n  if (this.head_ && this.head_.prev) {\n    this.head_ = this.head_.prev;\n    return this.head_.data;\n  }\n  return undefined;\n};\n\n/**\n * Returns the previous item's data without moving the cursor.\n *\n * @return {?} Item data.\n */\n_ol_structs_LinkedList_.prototype.getPrevItem = function() {\n  if (this.head_ && this.head_.prev) {\n    return this.head_.prev.data;\n  }\n  return undefined;\n};\n\n/**\n * Returns the current item's data.\n *\n * @return {?} Item data.\n */\n_ol_structs_LinkedList_.prototype.getCurrItem = function() {\n  if (this.head_) {\n    return this.head_.data;\n  }\n  return undefined;\n};\n\n/**\n * Sets the first item of the list. This only works for circular lists, and sets\n * the last item accordingly.\n */\n_ol_structs_LinkedList_.prototype.setFirstItem = function() {\n  if (this.circular_ && this.head_) {\n    this.first_ = this.head_;\n    this.last_ = this.head_.prev;\n  }\n};\n\n/**\n * Concatenates two lists.\n * @param {ol.structs.LinkedList} list List to merge into the current list.\n */\n_ol_structs_LinkedList_.prototype.concat = function(list) {\n  if (list.head_) {\n    if (this.head_) {\n      var end = this.head_.next;\n      this.head_.next = list.first_;\n      list.first_.prev = this.head_;\n      end.prev = list.last_;\n      list.last_.next = end;\n      this.length_ += list.length_;\n    } else {\n      this.head_ = list.head_;\n      this.first_ = list.first_;\n      this.last_ = list.last_;\n      this.length_ = list.length_;\n    }\n    list.head_ = undefined;\n    list.first_ = undefined;\n    list.last_ = undefined;\n    list.length_ = 0;\n  }\n};\n\n/**\n * Returns the current length of the list.\n *\n * @return {number} Length.\n */\n_ol_structs_LinkedList_.prototype.getLength = function() {\n  return this.length_;\n};\nexport default _ol_structs_LinkedList_;\n","import _ol_ from '../../index.js';\nimport _ol_array_ from '../../array.js';\nimport _ol_color_ from '../../color.js';\nimport _ol_extent_ from '../../extent.js';\nimport _ol_obj_ from '../../obj.js';\nimport _ol_geom_flat_contains_ from '../../geom/flat/contains.js';\nimport _ol_geom_flat_orient_ from '../../geom/flat/orient.js';\nimport _ol_geom_flat_transform_ from '../../geom/flat/transform.js';\nimport _ol_render_webgl_polygonreplay_defaultshader_ from '../webgl/polygonreplay/defaultshader.js';\nimport _ol_render_webgl_polygonreplay_defaultshader_Locations_ from '../webgl/polygonreplay/defaultshader/locations.js';\nimport _ol_render_webgl_LineStringReplay_ from '../webgl/linestringreplay.js';\nimport _ol_render_webgl_Replay_ from '../webgl/replay.js';\nimport _ol_render_webgl_ from '../webgl.js';\nimport _ol_style_Stroke_ from '../../style/stroke.js';\nimport _ol_structs_LinkedList_ from '../../structs/linkedlist.js';\nimport _ol_structs_RBush_ from '../../structs/rbush.js';\nimport _ol_webgl_ from '../../webgl.js';\nimport _ol_webgl_Buffer_ from '../../webgl/buffer.js';\n\n/**\n * @constructor\n * @extends {ol.render.webgl.Replay}\n * @param {number} tolerance Tolerance.\n * @param {ol.Extent} maxExtent Max extent.\n * @struct\n */\nvar _ol_render_webgl_PolygonReplay_ = function(tolerance, maxExtent) {\n  _ol_render_webgl_Replay_.call(this, tolerance, maxExtent);\n\n  this.lineStringReplay = new _ol_render_webgl_LineStringReplay_(\n      tolerance, maxExtent);\n\n  /**\n   * @private\n   * @type {ol.render.webgl.polygonreplay.defaultshader.Locations}\n   */\n  this.defaultLocations_ = null;\n\n  /**\n   * @private\n   * @type {Array.<Array.<number>>}\n   */\n  this.styles_ = [];\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.styleIndices_ = [];\n\n  /**\n   * @private\n   * @type {{fillColor: (Array.<number>|null),\n   *         changed: boolean}|null}\n   */\n  this.state_ = {\n    fillColor: null,\n    changed: false\n  };\n\n};\n\n_ol_.inherits(_ol_render_webgl_PolygonReplay_, _ol_render_webgl_Replay_);\n\n\n/**\n * Draw one polygon.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {Array.<Array.<number>>} holeFlatCoordinates Hole flat coordinates.\n * @param {number} stride Stride.\n * @private\n */\n_ol_render_webgl_PolygonReplay_.prototype.drawCoordinates_ = function(\n    flatCoordinates, holeFlatCoordinates, stride) {\n  // Triangulate the polygon\n  var outerRing = new _ol_structs_LinkedList_();\n  var rtree = new _ol_structs_RBush_();\n  // Initialize the outer ring\n  this.processFlatCoordinates_(flatCoordinates, stride, outerRing, rtree, true);\n  var maxCoords = this.getMaxCoords_(outerRing);\n\n  // Eliminate holes, if there are any\n  if (holeFlatCoordinates.length) {\n    var i, ii;\n    var holeLists = [];\n    for (i = 0, ii = holeFlatCoordinates.length; i < ii; ++i) {\n      var holeList = {\n        list: new _ol_structs_LinkedList_(),\n        maxCoords: undefined,\n        rtree: new _ol_structs_RBush_()\n      };\n      holeLists.push(holeList);\n      this.processFlatCoordinates_(holeFlatCoordinates[i],\n          stride, holeList.list, holeList.rtree, false);\n      this.classifyPoints_(holeList.list, holeList.rtree, true);\n      holeList.maxCoords = this.getMaxCoords_(holeList.list);\n    }\n    holeLists.sort(function(a, b) {\n      return b.maxCoords[0] === a.maxCoords[0] ?\n        a.maxCoords[1] - b.maxCoords[1] : b.maxCoords[0] - a.maxCoords[0];\n    });\n    for (i = 0; i < holeLists.length; ++i) {\n      var currList = holeLists[i].list;\n      var start = currList.firstItem();\n      var currItem = start;\n      var intersection;\n      do {\n        //TODO: Triangulate holes when they intersect the outer ring.\n        if (this.getIntersections_(currItem, rtree).length) {\n          intersection = true;\n          break;\n        }\n        currItem = currList.nextItem();\n      } while (start !== currItem);\n      if (!intersection) {\n        if (this.bridgeHole_(currList, holeLists[i].maxCoords[0], outerRing, maxCoords[0], rtree)) {\n          rtree.concat(holeLists[i].rtree);\n          this.classifyPoints_(outerRing, rtree, false);\n        }\n      }\n    }\n  } else {\n    this.classifyPoints_(outerRing, rtree, false);\n  }\n  this.triangulate_(outerRing, rtree);\n};\n\n\n/**\n * Inserts flat coordinates in a linked list and adds them to the vertex buffer.\n * @private\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} stride Stride.\n * @param {ol.structs.LinkedList} list Linked list.\n * @param {ol.structs.RBush} rtree R-Tree of the polygon.\n * @param {boolean} clockwise Coordinate order should be clockwise.\n */\n_ol_render_webgl_PolygonReplay_.prototype.processFlatCoordinates_ = function(\n    flatCoordinates, stride, list, rtree, clockwise) {\n  var isClockwise = _ol_geom_flat_orient_.linearRingIsClockwise(flatCoordinates,\n      0, flatCoordinates.length, stride);\n  var i, ii;\n  var n = this.vertices.length / 2;\n  /** @type {ol.WebglPolygonVertex} */\n  var start;\n  /** @type {ol.WebglPolygonVertex} */\n  var p0;\n  /** @type {ol.WebglPolygonVertex} */\n  var p1;\n  var extents = [];\n  var segments = [];\n  if (clockwise === isClockwise) {\n    start = this.createPoint_(flatCoordinates[0], flatCoordinates[1], n++);\n    p0 = start;\n    for (i = stride, ii = flatCoordinates.length; i < ii; i += stride) {\n      p1 = this.createPoint_(flatCoordinates[i], flatCoordinates[i + 1], n++);\n      segments.push(this.insertItem_(p0, p1, list));\n      extents.push([Math.min(p0.x, p1.x), Math.min(p0.y, p1.y), Math.max(p0.x, p1.x),\n        Math.max(p0.y, p1.y)]);\n      p0 = p1;\n    }\n    segments.push(this.insertItem_(p1, start, list));\n    extents.push([Math.min(p0.x, p1.x), Math.min(p0.y, p1.y), Math.max(p0.x, p1.x),\n      Math.max(p0.y, p1.y)]);\n  } else {\n    var end = flatCoordinates.length - stride;\n    start = this.createPoint_(flatCoordinates[end], flatCoordinates[end + 1], n++);\n    p0 = start;\n    for (i = end - stride, ii = 0; i >= ii; i -= stride) {\n      p1 = this.createPoint_(flatCoordinates[i], flatCoordinates[i + 1], n++);\n      segments.push(this.insertItem_(p0, p1, list));\n      extents.push([Math.min(p0.x, p1.x), Math.min(p0.y, p1.y), Math.max(p0.x, p1.x),\n        Math.max(p0.y, p1.y)]);\n      p0 = p1;\n    }\n    segments.push(this.insertItem_(p1, start, list));\n    extents.push([Math.min(p0.x, p1.x), Math.min(p0.y, p1.y), Math.max(p0.x, p1.x),\n      Math.max(p0.y, p1.y)]);\n  }\n  rtree.load(extents, segments);\n};\n\n\n/**\n * Returns the rightmost coordinates of a polygon on the X axis.\n * @private\n * @param {ol.structs.LinkedList} list Polygons ring.\n * @return {Array.<number>} Max X coordinates.\n */\n_ol_render_webgl_PolygonReplay_.prototype.getMaxCoords_ = function(list) {\n  var start = list.firstItem();\n  var seg = start;\n  var maxCoords = [seg.p0.x, seg.p0.y];\n\n  do {\n    seg = list.nextItem();\n    if (seg.p0.x > maxCoords[0]) {\n      maxCoords = [seg.p0.x, seg.p0.y];\n    }\n  } while (seg !== start);\n\n  return maxCoords;\n};\n\n\n/**\n * Classifies the points of a polygon list as convex, reflex. Removes collinear vertices.\n * @private\n * @param {ol.structs.LinkedList} list Polygon ring.\n * @param {ol.structs.RBush} rtree R-Tree of the polygon.\n * @param {boolean} ccw The orientation of the polygon is counter-clockwise.\n * @return {boolean} There were reclassified points.\n */\n_ol_render_webgl_PolygonReplay_.prototype.classifyPoints_ = function(list, rtree, ccw) {\n  var start = list.firstItem();\n  var s0 = start;\n  var s1 = list.nextItem();\n  var pointsReclassified = false;\n  do {\n    var reflex = ccw ? _ol_render_webgl_.triangleIsCounterClockwise(s1.p1.x,\n        s1.p1.y, s0.p1.x, s0.p1.y, s0.p0.x, s0.p0.y) :\n      _ol_render_webgl_.triangleIsCounterClockwise(s0.p0.x, s0.p0.y, s0.p1.x,\n          s0.p1.y, s1.p1.x, s1.p1.y);\n    if (reflex === undefined) {\n      this.removeItem_(s0, s1, list, rtree);\n      pointsReclassified = true;\n      if (s1 === start) {\n        start = list.getNextItem();\n      }\n      s1 = s0;\n      list.prevItem();\n    } else if (s0.p1.reflex !== reflex) {\n      s0.p1.reflex = reflex;\n      pointsReclassified = true;\n    }\n    s0 = s1;\n    s1 = list.nextItem();\n  } while (s0 !== start);\n  return pointsReclassified;\n};\n\n\n/**\n * @private\n * @param {ol.structs.LinkedList} hole Linked list of the hole.\n * @param {number} holeMaxX Maximum X value of the hole.\n * @param {ol.structs.LinkedList} list Linked list of the polygon.\n * @param {number} listMaxX Maximum X value of the polygon.\n * @param {ol.structs.RBush} rtree R-Tree of the polygon.\n * @return {boolean} Bridging was successful.\n */\n_ol_render_webgl_PolygonReplay_.prototype.bridgeHole_ = function(hole, holeMaxX,\n    list, listMaxX, rtree) {\n  var seg = hole.firstItem();\n  while (seg.p1.x !== holeMaxX) {\n    seg = hole.nextItem();\n  }\n\n  var p1 = seg.p1;\n  /** @type {ol.WebglPolygonVertex} */\n  var p2 = {x: listMaxX, y: p1.y, i: -1};\n  var minDist = Infinity;\n  var i, ii, bestPoint;\n  /** @type {ol.WebglPolygonVertex} */\n  var p5;\n\n  var intersectingSegments = this.getIntersections_({p0: p1, p1: p2}, rtree, true);\n  for (i = 0, ii = intersectingSegments.length; i < ii; ++i) {\n    var currSeg = intersectingSegments[i];\n    var intersection = this.calculateIntersection_(p1, p2, currSeg.p0,\n        currSeg.p1, true);\n    var dist = Math.abs(p1.x - intersection[0]);\n    if (dist < minDist && _ol_render_webgl_.triangleIsCounterClockwise(p1.x, p1.y,\n        currSeg.p0.x, currSeg.p0.y, currSeg.p1.x, currSeg.p1.y) !== undefined) {\n      minDist = dist;\n      p5 = {x: intersection[0], y: intersection[1], i: -1};\n      seg = currSeg;\n    }\n  }\n  if (minDist === Infinity) {\n    return false;\n  }\n  bestPoint = seg.p1;\n\n  if (minDist > 0) {\n    var pointsInTriangle = this.getPointsInTriangle_(p1, p5, seg.p1, rtree);\n    if (pointsInTriangle.length) {\n      var theta = Infinity;\n      for (i = 0, ii = pointsInTriangle.length; i < ii; ++i) {\n        var currPoint = pointsInTriangle[i];\n        var currTheta = Math.atan2(p1.y - currPoint.y, p2.x - currPoint.x);\n        if (currTheta < theta || (currTheta === theta && currPoint.x < bestPoint.x)) {\n          theta = currTheta;\n          bestPoint = currPoint;\n        }\n      }\n    }\n  }\n\n  seg = list.firstItem();\n  while (seg.p1.x !== bestPoint.x || seg.p1.y !== bestPoint.y) {\n    seg = list.nextItem();\n  }\n\n  //We clone the bridge points as they can have different convexity.\n  var p0Bridge = {x: p1.x, y: p1.y, i: p1.i, reflex: undefined};\n  var p1Bridge = {x: seg.p1.x, y: seg.p1.y, i: seg.p1.i, reflex: undefined};\n\n  hole.getNextItem().p0 = p0Bridge;\n  this.insertItem_(p1, seg.p1, hole, rtree);\n  this.insertItem_(p1Bridge, p0Bridge, hole, rtree);\n  seg.p1 = p1Bridge;\n  hole.setFirstItem();\n  list.concat(hole);\n\n  return true;\n};\n\n\n/**\n * @private\n * @param {ol.structs.LinkedList} list Linked list of the polygon.\n * @param {ol.structs.RBush} rtree R-Tree of the polygon.\n */\n_ol_render_webgl_PolygonReplay_.prototype.triangulate_ = function(list, rtree) {\n  var ccw = false;\n  var simple = this.isSimple_(list, rtree);\n\n  // Start clipping ears\n  while (list.getLength() > 3) {\n    if (simple) {\n      if (!this.clipEars_(list, rtree, simple, ccw)) {\n        if (!this.classifyPoints_(list, rtree, ccw)) {\n          // Due to the behavior of OL's PIP algorithm, the ear clipping cannot\n          // introduce touching segments. However, the original data may have some.\n          if (!this.resolveSelfIntersections_(list, rtree, true)) {\n            break;\n          }\n        }\n      }\n    } else {\n      if (!this.clipEars_(list, rtree, simple, ccw)) {\n        // We ran out of ears, try to reclassify.\n        if (!this.classifyPoints_(list, rtree, ccw)) {\n          // We have a bad polygon, try to resolve local self-intersections.\n          if (!this.resolveSelfIntersections_(list, rtree)) {\n            simple = this.isSimple_(list, rtree);\n            if (!simple) {\n              // We have a really bad polygon, try more time consuming methods.\n              this.splitPolygon_(list, rtree);\n              break;\n            } else {\n              ccw = !this.isClockwise_(list);\n              this.classifyPoints_(list, rtree, ccw);\n            }\n          }\n        }\n      }\n    }\n  }\n  if (list.getLength() === 3) {\n    var numIndices = this.indices.length;\n    this.indices[numIndices++] = list.getPrevItem().p0.i;\n    this.indices[numIndices++] = list.getCurrItem().p0.i;\n    this.indices[numIndices++] = list.getNextItem().p0.i;\n  }\n};\n\n\n/**\n * @private\n * @param {ol.structs.LinkedList} list Linked list of the polygon.\n * @param {ol.structs.RBush} rtree R-Tree of the polygon.\n * @param {boolean} simple The polygon is simple.\n * @param {boolean} ccw Orientation of the polygon is counter-clockwise.\n * @return {boolean} There were processed ears.\n */\n_ol_render_webgl_PolygonReplay_.prototype.clipEars_ = function(list, rtree, simple, ccw) {\n  var numIndices = this.indices.length;\n  var start = list.firstItem();\n  var s0 = list.getPrevItem();\n  var s1 = start;\n  var s2 = list.nextItem();\n  var s3 = list.getNextItem();\n  var p0, p1, p2;\n  var processedEars = false;\n  do {\n    p0 = s1.p0;\n    p1 = s1.p1;\n    p2 = s2.p1;\n    if (p1.reflex === false) {\n      // We might have a valid ear\n      var variableCriterion;\n      if (simple) {\n        variableCriterion = this.getPointsInTriangle_(p0, p1, p2, rtree, true).length === 0;\n      } else {\n        variableCriterion = ccw ? this.diagonalIsInside_(s3.p1, p2, p1, p0,\n            s0.p0) : this.diagonalIsInside_(s0.p0, p0, p1, p2, s3.p1);\n      }\n      if ((simple || this.getIntersections_({p0: p0, p1: p2}, rtree).length === 0) &&\n          variableCriterion) {\n        //The diagonal is completely inside the polygon\n        if (simple || p0.reflex === false || p2.reflex === false ||\n            _ol_geom_flat_orient_.linearRingIsClockwise([s0.p0.x, s0.p0.y, p0.x,\n              p0.y, p1.x, p1.y, p2.x, p2.y, s3.p1.x, s3.p1.y], 0, 10, 2) === !ccw) {\n          //The diagonal is persumably valid, we have an ear\n          this.indices[numIndices++] = p0.i;\n          this.indices[numIndices++] = p1.i;\n          this.indices[numIndices++] = p2.i;\n          this.removeItem_(s1, s2, list, rtree);\n          if (s2 === start) {\n            start = s3;\n          }\n          processedEars = true;\n        }\n      }\n    }\n    // Else we have a reflex point.\n    s0 = list.getPrevItem();\n    s1 = list.getCurrItem();\n    s2 = list.nextItem();\n    s3 = list.getNextItem();\n  } while (s1 !== start && list.getLength() > 3);\n\n  return processedEars;\n};\n\n\n/**\n * @private\n * @param {ol.structs.LinkedList} list Linked list of the polygon.\n * @param {ol.structs.RBush} rtree R-Tree of the polygon.\n * @param {boolean=} opt_touch Resolve touching segments.\n * @return {boolean} There were resolved intersections.\n*/\n_ol_render_webgl_PolygonReplay_.prototype.resolveSelfIntersections_ = function(\n    list, rtree, opt_touch) {\n  var start = list.firstItem();\n  list.nextItem();\n  var s0 = start;\n  var s1 = list.nextItem();\n  var resolvedIntersections = false;\n\n  do {\n    var intersection = this.calculateIntersection_(s0.p0, s0.p1, s1.p0, s1.p1,\n        opt_touch);\n    if (intersection) {\n      var breakCond = false;\n      var numVertices = this.vertices.length;\n      var numIndices = this.indices.length;\n      var n = numVertices / 2;\n      var seg = list.prevItem();\n      list.removeItem();\n      rtree.remove(seg);\n      breakCond = (seg === start);\n      var p;\n      if (opt_touch) {\n        if (intersection[0] === s0.p0.x && intersection[1] === s0.p0.y) {\n          list.prevItem();\n          p = s0.p0;\n          s1.p0 = p;\n          rtree.remove(s0);\n          breakCond = breakCond || (s0 === start);\n        } else {\n          p = s1.p1;\n          s0.p1 = p;\n          rtree.remove(s1);\n          breakCond = breakCond || (s1 === start);\n        }\n        list.removeItem();\n      } else {\n        p = this.createPoint_(intersection[0], intersection[1], n);\n        s0.p1 = p;\n        s1.p0 = p;\n        rtree.update([Math.min(s0.p0.x, s0.p1.x), Math.min(s0.p0.y, s0.p1.y),\n          Math.max(s0.p0.x, s0.p1.x), Math.max(s0.p0.y, s0.p1.y)], s0);\n        rtree.update([Math.min(s1.p0.x, s1.p1.x), Math.min(s1.p0.y, s1.p1.y),\n          Math.max(s1.p0.x, s1.p1.x), Math.max(s1.p0.y, s1.p1.y)], s1);\n      }\n\n      this.indices[numIndices++] = seg.p0.i;\n      this.indices[numIndices++] = seg.p1.i;\n      this.indices[numIndices++] = p.i;\n\n      resolvedIntersections = true;\n      if (breakCond) {\n        break;\n      }\n    }\n\n    s0 = list.getPrevItem();\n    s1 = list.nextItem();\n  } while (s0 !== start);\n  return resolvedIntersections;\n};\n\n\n/**\n * @private\n * @param {ol.structs.LinkedList} list Linked list of the polygon.\n * @param {ol.structs.RBush} rtree R-Tree of the polygon.\n * @return {boolean} The polygon is simple.\n */\n_ol_render_webgl_PolygonReplay_.prototype.isSimple_ = function(list, rtree) {\n  var start = list.firstItem();\n  var seg = start;\n  do {\n    if (this.getIntersections_(seg, rtree).length) {\n      return false;\n    }\n    seg = list.nextItem();\n  } while (seg !== start);\n  return true;\n};\n\n\n/**\n * @private\n * @param {ol.structs.LinkedList} list Linked list of the polygon.\n * @return {boolean} Orientation is clockwise.\n */\n_ol_render_webgl_PolygonReplay_.prototype.isClockwise_ = function(list) {\n  var length = list.getLength() * 2;\n  var flatCoordinates = new Array(length);\n  var start = list.firstItem();\n  var seg = start;\n  var i = 0;\n  do {\n    flatCoordinates[i++] = seg.p0.x;\n    flatCoordinates[i++] = seg.p0.y;\n    seg = list.nextItem();\n  } while (seg !== start);\n  return _ol_geom_flat_orient_.linearRingIsClockwise(flatCoordinates, 0, length, 2);\n};\n\n\n/**\n * @private\n * @param {ol.structs.LinkedList} list Linked list of the polygon.\n * @param {ol.structs.RBush} rtree R-Tree of the polygon.\n */\n_ol_render_webgl_PolygonReplay_.prototype.splitPolygon_ = function(list, rtree) {\n  var start = list.firstItem();\n  var s0 = start;\n  do {\n    var intersections = this.getIntersections_(s0, rtree);\n    if (intersections.length) {\n      var s1 = intersections[0];\n      var n = this.vertices.length / 2;\n      var intersection = this.calculateIntersection_(s0.p0,\n          s0.p1, s1.p0, s1.p1);\n      var p = this.createPoint_(intersection[0], intersection[1], n);\n      var newPolygon = new _ol_structs_LinkedList_();\n      var newRtree = new _ol_structs_RBush_();\n      this.insertItem_(p, s0.p1, newPolygon, newRtree);\n      s0.p1 = p;\n      rtree.update([Math.min(s0.p0.x, p.x), Math.min(s0.p0.y, p.y),\n        Math.max(s0.p0.x, p.x), Math.max(s0.p0.y, p.y)], s0);\n      var currItem = list.nextItem();\n      while (currItem !== s1) {\n        this.insertItem_(currItem.p0, currItem.p1, newPolygon, newRtree);\n        rtree.remove(currItem);\n        list.removeItem();\n        currItem = list.getCurrItem();\n      }\n      this.insertItem_(s1.p0, p, newPolygon, newRtree);\n      s1.p0 = p;\n      rtree.update([Math.min(s1.p1.x, p.x), Math.min(s1.p1.y, p.y),\n        Math.max(s1.p1.x, p.x), Math.max(s1.p1.y, p.y)], s1);\n      this.classifyPoints_(list, rtree, false);\n      this.triangulate_(list, rtree);\n      this.classifyPoints_(newPolygon, newRtree, false);\n      this.triangulate_(newPolygon, newRtree);\n      break;\n    }\n    s0 = list.nextItem();\n  } while (s0 !== start);\n};\n\n\n/**\n * @private\n * @param {number} x X coordinate.\n * @param {number} y Y coordinate.\n * @param {number} i Index.\n * @return {ol.WebglPolygonVertex} List item.\n */\n_ol_render_webgl_PolygonReplay_.prototype.createPoint_ = function(x, y, i) {\n  var numVertices = this.vertices.length;\n  this.vertices[numVertices++] = x;\n  this.vertices[numVertices++] = y;\n  /** @type {ol.WebglPolygonVertex} */\n  var p = {\n    x: x,\n    y: y,\n    i: i,\n    reflex: undefined\n  };\n  return p;\n};\n\n\n/**\n * @private\n * @param {ol.WebglPolygonVertex} p0 First point of segment.\n * @param {ol.WebglPolygonVertex} p1 Second point of segment.\n * @param {ol.structs.LinkedList} list Polygon ring.\n * @param {ol.structs.RBush=} opt_rtree Insert the segment into the R-Tree.\n * @return {ol.WebglPolygonSegment} segment.\n */\n_ol_render_webgl_PolygonReplay_.prototype.insertItem_ = function(p0, p1, list, opt_rtree) {\n  var seg = {\n    p0: p0,\n    p1: p1\n  };\n  list.insertItem(seg);\n  if (opt_rtree) {\n    opt_rtree.insert([Math.min(p0.x, p1.x), Math.min(p0.y, p1.y),\n      Math.max(p0.x, p1.x), Math.max(p0.y, p1.y)], seg);\n  }\n  return seg;\n};\n\n\n/**\n  * @private\n  * @param {ol.WebglPolygonSegment} s0 Segment before the remove candidate.\n  * @param {ol.WebglPolygonSegment} s1 Remove candidate segment.\n  * @param {ol.structs.LinkedList} list Polygon ring.\n  * @param {ol.structs.RBush} rtree R-Tree of the polygon.\n  */\n_ol_render_webgl_PolygonReplay_.prototype.removeItem_ = function(s0, s1, list, rtree) {\n  if (list.getCurrItem() === s1) {\n    list.removeItem();\n    s0.p1 = s1.p1;\n    rtree.remove(s1);\n    rtree.update([Math.min(s0.p0.x, s0.p1.x), Math.min(s0.p0.y, s0.p1.y),\n      Math.max(s0.p0.x, s0.p1.x), Math.max(s0.p0.y, s0.p1.y)], s0);\n  }\n};\n\n\n/**\n * @private\n * @param {ol.WebglPolygonVertex} p0 First point.\n * @param {ol.WebglPolygonVertex} p1 Second point.\n * @param {ol.WebglPolygonVertex} p2 Third point.\n * @param {ol.structs.RBush} rtree R-Tree of the polygon.\n * @param {boolean=} opt_reflex Only include reflex points.\n * @return {Array.<ol.WebglPolygonVertex>} Points in the triangle.\n */\n_ol_render_webgl_PolygonReplay_.prototype.getPointsInTriangle_ = function(p0, p1,\n    p2, rtree, opt_reflex) {\n  var i, ii, j, p;\n  var result = [];\n  var segmentsInExtent = rtree.getInExtent([Math.min(p0.x, p1.x, p2.x),\n    Math.min(p0.y, p1.y, p2.y), Math.max(p0.x, p1.x, p2.x), Math.max(p0.y,\n        p1.y, p2.y)]);\n  for (i = 0, ii = segmentsInExtent.length; i < ii; ++i) {\n    for (j in segmentsInExtent[i]) {\n      p = segmentsInExtent[i][j];\n      if (typeof p === 'object' && (!opt_reflex || p.reflex)) {\n        if ((p.x !== p0.x || p.y !== p0.y) && (p.x !== p1.x || p.y !== p1.y) &&\n            (p.x !== p2.x || p.y !== p2.y) && result.indexOf(p) === -1 &&\n            _ol_geom_flat_contains_.linearRingContainsXY([p0.x, p0.y, p1.x, p1.y,\n              p2.x, p2.y], 0, 6, 2, p.x, p.y)) {\n          result.push(p);\n        }\n      }\n    }\n  }\n  return result;\n};\n\n\n/**\n * @private\n * @param {ol.WebglPolygonSegment} segment Segment.\n * @param {ol.structs.RBush} rtree R-Tree of the polygon.\n * @param {boolean=} opt_touch Touching segments should be considered an intersection.\n * @return {Array.<ol.WebglPolygonSegment>} Intersecting segments.\n */\n_ol_render_webgl_PolygonReplay_.prototype.getIntersections_ = function(segment, rtree, opt_touch) {\n  var p0 = segment.p0;\n  var p1 = segment.p1;\n  var segmentsInExtent = rtree.getInExtent([Math.min(p0.x, p1.x),\n    Math.min(p0.y, p1.y), Math.max(p0.x, p1.x), Math.max(p0.y, p1.y)]);\n  var result = [];\n  var i, ii;\n  for (i = 0, ii = segmentsInExtent.length; i < ii; ++i) {\n    var currSeg = segmentsInExtent[i];\n    if (segment !== currSeg && (opt_touch || currSeg.p0 !== p1 || currSeg.p1 !== p0) &&\n        this.calculateIntersection_(p0, p1, currSeg.p0, currSeg.p1, opt_touch)) {\n      result.push(currSeg);\n    }\n  }\n  return result;\n};\n\n\n/**\n * Line intersection algorithm by Paul Bourke.\n * @see http://paulbourke.net/geometry/pointlineplane/\n *\n * @private\n * @param {ol.WebglPolygonVertex} p0 First point.\n * @param {ol.WebglPolygonVertex} p1 Second point.\n * @param {ol.WebglPolygonVertex} p2 Third point.\n * @param {ol.WebglPolygonVertex} p3 Fourth point.\n * @param {boolean=} opt_touch Touching segments should be considered an intersection.\n * @return {Array.<number>|undefined} Intersection coordinates.\n */\n_ol_render_webgl_PolygonReplay_.prototype.calculateIntersection_ = function(p0,\n    p1, p2, p3, opt_touch) {\n  var denom = (p3.y - p2.y) * (p1.x - p0.x) - (p3.x - p2.x) * (p1.y - p0.y);\n  if (denom !== 0) {\n    var ua = ((p3.x - p2.x) * (p0.y - p2.y) - (p3.y - p2.y) * (p0.x - p2.x)) / denom;\n    var ub = ((p1.x - p0.x) * (p0.y - p2.y) - (p1.y - p0.y) * (p0.x - p2.x)) / denom;\n    if ((!opt_touch && ua > _ol_render_webgl_.EPSILON && ua < 1 - _ol_render_webgl_.EPSILON &&\n        ub > _ol_render_webgl_.EPSILON && ub < 1 - _ol_render_webgl_.EPSILON) || (opt_touch &&\n        ua >= 0 && ua <= 1 && ub >= 0 && ub <= 1)) {\n      return [p0.x + ua * (p1.x - p0.x), p0.y + ua * (p1.y - p0.y)];\n    }\n  }\n  return undefined;\n};\n\n\n/**\n * @private\n * @param {ol.WebglPolygonVertex} p0 Point before the start of the diagonal.\n * @param {ol.WebglPolygonVertex} p1 Start point of the diagonal.\n * @param {ol.WebglPolygonVertex} p2 Ear candidate.\n * @param {ol.WebglPolygonVertex} p3 End point of the diagonal.\n * @param {ol.WebglPolygonVertex} p4 Point after the end of the diagonal.\n * @return {boolean} Diagonal is inside the polygon.\n */\n_ol_render_webgl_PolygonReplay_.prototype.diagonalIsInside_ = function(p0, p1, p2, p3, p4) {\n  if (p1.reflex === undefined || p3.reflex === undefined) {\n    return false;\n  }\n  var p1IsLeftOf = (p2.x - p3.x) * (p1.y - p3.y) > (p2.y - p3.y) * (p1.x - p3.x);\n  var p1IsRightOf = (p4.x - p3.x) * (p1.y - p3.y) < (p4.y - p3.y) * (p1.x - p3.x);\n  var p3IsLeftOf = (p0.x - p1.x) * (p3.y - p1.y) > (p0.y - p1.y) * (p3.x - p1.x);\n  var p3IsRightOf = (p2.x - p1.x) * (p3.y - p1.y) < (p2.y - p1.y) * (p3.x - p1.x);\n  var p1InCone = p3.reflex ? p1IsRightOf || p1IsLeftOf : p1IsRightOf && p1IsLeftOf;\n  var p3InCone = p1.reflex ? p3IsRightOf || p3IsLeftOf : p3IsRightOf && p3IsLeftOf;\n  return p1InCone && p3InCone;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_PolygonReplay_.prototype.drawMultiPolygon = function(multiPolygonGeometry, feature) {\n  var endss = multiPolygonGeometry.getEndss();\n  var stride = multiPolygonGeometry.getStride();\n  var currIndex = this.indices.length;\n  var currLineIndex = this.lineStringReplay.getCurrentIndex();\n  var flatCoordinates = multiPolygonGeometry.getFlatCoordinates();\n  var i, ii, j, jj;\n  var start = 0;\n  for (i = 0, ii = endss.length; i < ii; ++i) {\n    var ends = endss[i];\n    if (ends.length > 0) {\n      var outerRing = _ol_geom_flat_transform_.translate(flatCoordinates, start, ends[0],\n          stride, -this.origin[0], -this.origin[1]);\n      if (outerRing.length) {\n        var holes = [];\n        var holeFlatCoords;\n        for (j = 1, jj = ends.length; j < jj; ++j) {\n          if (ends[j] !== ends[j - 1]) {\n            holeFlatCoords = _ol_geom_flat_transform_.translate(flatCoordinates, ends[j - 1],\n                ends[j], stride, -this.origin[0], -this.origin[1]);\n            holes.push(holeFlatCoords);\n          }\n        }\n        this.lineStringReplay.drawPolygonCoordinates(outerRing, holes, stride);\n        this.drawCoordinates_(outerRing, holes, stride);\n      }\n    }\n    start = ends[ends.length - 1];\n  }\n  if (this.indices.length > currIndex) {\n    this.startIndices.push(currIndex);\n    this.startIndicesFeature.push(feature);\n    if (this.state_.changed) {\n      this.styleIndices_.push(currIndex);\n      this.state_.changed = false;\n    }\n  }\n  if (this.lineStringReplay.getCurrentIndex() > currLineIndex) {\n    this.lineStringReplay.setPolygonStyle(feature, currLineIndex);\n  }\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_PolygonReplay_.prototype.drawPolygon = function(polygonGeometry, feature) {\n  var ends = polygonGeometry.getEnds();\n  var stride = polygonGeometry.getStride();\n  if (ends.length > 0) {\n    var flatCoordinates = polygonGeometry.getFlatCoordinates().map(Number);\n    var outerRing = _ol_geom_flat_transform_.translate(flatCoordinates, 0, ends[0],\n        stride, -this.origin[0], -this.origin[1]);\n    if (outerRing.length) {\n      var holes = [];\n      var i, ii, holeFlatCoords;\n      for (i = 1, ii = ends.length; i < ii; ++i) {\n        if (ends[i] !== ends[i - 1]) {\n          holeFlatCoords = _ol_geom_flat_transform_.translate(flatCoordinates, ends[i - 1],\n              ends[i], stride, -this.origin[0], -this.origin[1]);\n          holes.push(holeFlatCoords);\n        }\n      }\n\n      this.startIndices.push(this.indices.length);\n      this.startIndicesFeature.push(feature);\n      if (this.state_.changed) {\n        this.styleIndices_.push(this.indices.length);\n        this.state_.changed = false;\n      }\n      this.lineStringReplay.setPolygonStyle(feature);\n\n      this.lineStringReplay.drawPolygonCoordinates(outerRing, holes, stride);\n      this.drawCoordinates_(outerRing, holes, stride);\n    }\n  }\n};\n\n\n/**\n * @inheritDoc\n **/\n_ol_render_webgl_PolygonReplay_.prototype.finish = function(context) {\n  // create, bind, and populate the vertices buffer\n  this.verticesBuffer = new _ol_webgl_Buffer_(this.vertices);\n\n  // create, bind, and populate the indices buffer\n  this.indicesBuffer = new _ol_webgl_Buffer_(this.indices);\n\n  this.startIndices.push(this.indices.length);\n\n  this.lineStringReplay.finish(context);\n\n  //Clean up, if there is nothing to draw\n  if (this.styleIndices_.length === 0 && this.styles_.length > 0) {\n    this.styles_ = [];\n  }\n\n  this.vertices = null;\n  this.indices = null;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_PolygonReplay_.prototype.getDeleteResourcesFunction = function(context) {\n  var verticesBuffer = this.verticesBuffer;\n  var indicesBuffer = this.indicesBuffer;\n  var lineDeleter = this.lineStringReplay.getDeleteResourcesFunction(context);\n  return function() {\n    context.deleteBuffer(verticesBuffer);\n    context.deleteBuffer(indicesBuffer);\n    lineDeleter();\n  };\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_PolygonReplay_.prototype.setUpProgram = function(gl, context, size, pixelRatio) {\n  // get the program\n  var fragmentShader, vertexShader;\n  fragmentShader = _ol_render_webgl_polygonreplay_defaultshader_.fragment;\n  vertexShader = _ol_render_webgl_polygonreplay_defaultshader_.vertex;\n  var program = context.getProgram(fragmentShader, vertexShader);\n\n  // get the locations\n  var locations;\n  if (!this.defaultLocations_) {\n    locations = new _ol_render_webgl_polygonreplay_defaultshader_Locations_(gl, program);\n    this.defaultLocations_ = locations;\n  } else {\n    locations = this.defaultLocations_;\n  }\n\n  context.useProgram(program);\n\n  // enable the vertex attrib arrays\n  gl.enableVertexAttribArray(locations.a_position);\n  gl.vertexAttribPointer(locations.a_position, 2, _ol_webgl_.FLOAT,\n      false, 8, 0);\n\n  return locations;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_PolygonReplay_.prototype.shutDownProgram = function(gl, locations) {\n  gl.disableVertexAttribArray(locations.a_position);\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_PolygonReplay_.prototype.drawReplay = function(gl, context, skippedFeaturesHash, hitDetection) {\n  //Save GL parameters.\n  var tmpDepthFunc = /** @type {number} */ (gl.getParameter(gl.DEPTH_FUNC));\n  var tmpDepthMask = /** @type {boolean} */ (gl.getParameter(gl.DEPTH_WRITEMASK));\n\n  if (!hitDetection) {\n    gl.enable(gl.DEPTH_TEST);\n    gl.depthMask(true);\n    gl.depthFunc(gl.NOTEQUAL);\n  }\n\n  if (!_ol_obj_.isEmpty(skippedFeaturesHash)) {\n    this.drawReplaySkipping_(gl, context, skippedFeaturesHash);\n  } else {\n    //Draw by style groups to minimize drawElements() calls.\n    var i, start, end, nextStyle;\n    end = this.startIndices[this.startIndices.length - 1];\n    for (i = this.styleIndices_.length - 1; i >= 0; --i) {\n      start = this.styleIndices_[i];\n      nextStyle = this.styles_[i];\n      this.setFillStyle_(gl, nextStyle);\n      this.drawElements(gl, context, start, end);\n      end = start;\n    }\n  }\n  if (!hitDetection) {\n    gl.disable(gl.DEPTH_TEST);\n    gl.clear(gl.DEPTH_BUFFER_BIT);\n    //Restore GL parameters.\n    gl.depthMask(tmpDepthMask);\n    gl.depthFunc(tmpDepthFunc);\n  }\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_PolygonReplay_.prototype.drawHitDetectionReplayOneByOne = function(gl, context, skippedFeaturesHash,\n    featureCallback, opt_hitExtent) {\n  var i, start, end, nextStyle, groupStart, feature, featureUid, featureIndex;\n  featureIndex = this.startIndices.length - 2;\n  end = this.startIndices[featureIndex + 1];\n  for (i = this.styleIndices_.length - 1; i >= 0; --i) {\n    nextStyle = this.styles_[i];\n    this.setFillStyle_(gl, nextStyle);\n    groupStart = this.styleIndices_[i];\n\n    while (featureIndex >= 0 &&\n        this.startIndices[featureIndex] >= groupStart) {\n      start = this.startIndices[featureIndex];\n      feature = this.startIndicesFeature[featureIndex];\n      featureUid = _ol_.getUid(feature).toString();\n\n      if (skippedFeaturesHash[featureUid] === undefined &&\n          feature.getGeometry() &&\n          (opt_hitExtent === undefined || _ol_extent_.intersects(\n              /** @type {Array<number>} */ (opt_hitExtent),\n              feature.getGeometry().getExtent()))) {\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n        this.drawElements(gl, context, start, end);\n\n        var result = featureCallback(feature);\n\n        if (result) {\n          return result;\n        }\n\n      }\n      featureIndex--;\n      end = start;\n    }\n  }\n  return undefined;\n};\n\n\n/**\n * @private\n * @param {WebGLRenderingContext} gl gl.\n * @param {ol.webgl.Context} context Context.\n * @param {Object} skippedFeaturesHash Ids of features to skip.\n */\n_ol_render_webgl_PolygonReplay_.prototype.drawReplaySkipping_ = function(gl, context, skippedFeaturesHash) {\n  var i, start, end, nextStyle, groupStart, feature, featureUid, featureIndex, featureStart;\n  featureIndex = this.startIndices.length - 2;\n  end = start = this.startIndices[featureIndex + 1];\n  for (i = this.styleIndices_.length - 1; i >= 0; --i) {\n    nextStyle = this.styles_[i];\n    this.setFillStyle_(gl, nextStyle);\n    groupStart = this.styleIndices_[i];\n\n    while (featureIndex >= 0 &&\n        this.startIndices[featureIndex] >= groupStart) {\n      featureStart = this.startIndices[featureIndex];\n      feature = this.startIndicesFeature[featureIndex];\n      featureUid = _ol_.getUid(feature).toString();\n\n      if (skippedFeaturesHash[featureUid]) {\n        if (start !== end) {\n          this.drawElements(gl, context, start, end);\n          gl.clear(gl.DEPTH_BUFFER_BIT);\n        }\n        end = featureStart;\n      }\n      featureIndex--;\n      start = featureStart;\n    }\n    if (start !== end) {\n      this.drawElements(gl, context, start, end);\n      gl.clear(gl.DEPTH_BUFFER_BIT);\n    }\n    start = end = groupStart;\n  }\n};\n\n\n/**\n * @private\n * @param {WebGLRenderingContext} gl gl.\n * @param {Array.<number>} color Color.\n */\n_ol_render_webgl_PolygonReplay_.prototype.setFillStyle_ = function(gl, color) {\n  gl.uniform4fv(this.defaultLocations_.u_color, color);\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_PolygonReplay_.prototype.setFillStrokeStyle = function(fillStyle, strokeStyle) {\n  var fillStyleColor = fillStyle ? fillStyle.getColor() : [0, 0, 0, 0];\n  if (!(fillStyleColor instanceof CanvasGradient) &&\n      !(fillStyleColor instanceof CanvasPattern)) {\n    fillStyleColor = _ol_color_.asArray(fillStyleColor).map(function(c, i) {\n      return i != 3 ? c / 255 : c;\n    }) || _ol_render_webgl_.defaultFillStyle;\n  } else {\n    fillStyleColor = _ol_render_webgl_.defaultFillStyle;\n  }\n  if (!this.state_.fillColor || !_ol_array_.equals(fillStyleColor, this.state_.fillColor)) {\n    this.state_.fillColor = fillStyleColor;\n    this.state_.changed = true;\n    this.styles_.push(fillStyleColor);\n  }\n  //Provide a null stroke style, if no strokeStyle is provided. Required for the draw interaction to work.\n  if (strokeStyle) {\n    this.lineStringReplay.setFillStrokeStyle(null, strokeStyle);\n  } else {\n    var nullStrokeStyle = new _ol_style_Stroke_({\n      color: [0, 0, 0, 0],\n      lineWidth: 0\n    });\n    this.lineStringReplay.setFillStrokeStyle(null, nullStrokeStyle);\n  }\n};\nexport default _ol_render_webgl_PolygonReplay_;\n","import _ol_dom_ from '../dom.js';\n\n/**\n * This class facilitates the creation of image atlases.\n *\n * Images added to an atlas will be rendered onto a single\n * atlas canvas. The distribution of images on the canvas is\n * managed with the bin packing algorithm described in:\n * http://www.blackpawn.com/texts/lightmaps/\n *\n * @constructor\n * @struct\n * @param {number} size The size in pixels of the sprite image.\n * @param {number} space The space in pixels between images.\n *    Because texture coordinates are float values, the edges of\n *    images might not be completely correct (in a way that the\n *    edges overlap when being rendered). To avoid this we add a\n *    padding around each image.\n */\nvar _ol_style_Atlas_ = function(size, space) {\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.space_ = space;\n\n  /**\n   * @private\n   * @type {Array.<ol.AtlasBlock>}\n   */\n  this.emptyBlocks_ = [{x: 0, y: 0, width: size, height: size}];\n\n  /**\n   * @private\n   * @type {Object.<string, ol.AtlasInfo>}\n   */\n  this.entries_ = {};\n\n  /**\n   * @private\n   * @type {CanvasRenderingContext2D}\n   */\n  this.context_ = _ol_dom_.createCanvasContext2D(size, size);\n\n  /**\n   * @private\n   * @type {HTMLCanvasElement}\n   */\n  this.canvas_ = this.context_.canvas;\n};\n\n\n/**\n * @param {string} id The identifier of the entry to check.\n * @return {?ol.AtlasInfo} The atlas info.\n */\n_ol_style_Atlas_.prototype.get = function(id) {\n  return this.entries_[id] || null;\n};\n\n\n/**\n * @param {string} id The identifier of the entry to add.\n * @param {number} width The width.\n * @param {number} height The height.\n * @param {function(CanvasRenderingContext2D, number, number)} renderCallback\n *    Called to render the new image onto an atlas image.\n * @param {Object=} opt_this Value to use as `this` when executing\n *    `renderCallback`.\n * @return {?ol.AtlasInfo} The position and atlas image for the entry.\n */\n_ol_style_Atlas_.prototype.add = function(id, width, height, renderCallback, opt_this) {\n  var block, i, ii;\n  for (i = 0, ii = this.emptyBlocks_.length; i < ii; ++i) {\n    block = this.emptyBlocks_[i];\n    if (block.width >= width + this.space_ &&\n        block.height >= height + this.space_) {\n      // we found a block that is big enough for our entry\n      var entry = {\n        offsetX: block.x + this.space_,\n        offsetY: block.y + this.space_,\n        image: this.canvas_\n      };\n      this.entries_[id] = entry;\n\n      // render the image on the atlas image\n      renderCallback.call(opt_this, this.context_,\n          block.x + this.space_, block.y + this.space_);\n\n      // split the block after the insertion, either horizontally or vertically\n      this.split_(i, block, width + this.space_, height + this.space_);\n\n      return entry;\n    }\n  }\n\n  // there is no space for the new entry in this atlas\n  return null;\n};\n\n\n/**\n * @private\n * @param {number} index The index of the block.\n * @param {ol.AtlasBlock} block The block to split.\n * @param {number} width The width of the entry to insert.\n * @param {number} height The height of the entry to insert.\n */\n_ol_style_Atlas_.prototype.split_ = function(index, block, width, height) {\n  var deltaWidth = block.width - width;\n  var deltaHeight = block.height - height;\n\n  /** @type {ol.AtlasBlock} */\n  var newBlock1;\n  /** @type {ol.AtlasBlock} */\n  var newBlock2;\n\n  if (deltaWidth > deltaHeight) {\n    // split vertically\n    // block right of the inserted entry\n    newBlock1 = {\n      x: block.x + width,\n      y: block.y,\n      width: block.width - width,\n      height: block.height\n    };\n\n    // block below the inserted entry\n    newBlock2 = {\n      x: block.x,\n      y: block.y + height,\n      width: width,\n      height: block.height - height\n    };\n    this.updateBlocks_(index, newBlock1, newBlock2);\n  } else {\n    // split horizontally\n    // block right of the inserted entry\n    newBlock1 = {\n      x: block.x + width,\n      y: block.y,\n      width: block.width - width,\n      height: height\n    };\n\n    // block below the inserted entry\n    newBlock2 = {\n      x: block.x,\n      y: block.y + height,\n      width: block.width,\n      height: block.height - height\n    };\n    this.updateBlocks_(index, newBlock1, newBlock2);\n  }\n};\n\n\n/**\n * Remove the old block and insert new blocks at the same array position.\n * The new blocks are inserted at the same position, so that splitted\n * blocks (that are potentially smaller) are filled first.\n * @private\n * @param {number} index The index of the block to remove.\n * @param {ol.AtlasBlock} newBlock1 The 1st block to add.\n * @param {ol.AtlasBlock} newBlock2 The 2nd block to add.\n */\n_ol_style_Atlas_.prototype.updateBlocks_ = function(index, newBlock1, newBlock2) {\n  var args = [index, 1];\n  if (newBlock1.width > 0 && newBlock1.height > 0) {\n    args.push(newBlock1);\n  }\n  if (newBlock2.width > 0 && newBlock2.height > 0) {\n    args.push(newBlock2);\n  }\n  this.emptyBlocks_.splice.apply(this.emptyBlocks_, args);\n};\nexport default _ol_style_Atlas_;\n","import _ol_ from '../index.js';\nimport _ol_style_Atlas_ from '../style/atlas.js';\n\n/**\n * Manages the creation of image atlases.\n *\n * Images added to this manager will be inserted into an atlas, which\n * will be used for rendering.\n * The `size` given in the constructor is the size for the first\n * atlas. After that, when new atlases are created, they will have\n * twice the size as the latest atlas (until `maxSize` is reached).\n *\n * If an application uses many images or very large images, it is recommended\n * to set a higher `size` value to avoid the creation of too many atlases.\n *\n * @constructor\n * @struct\n * @api\n * @param {olx.style.AtlasManagerOptions=} opt_options Options.\n */\nvar _ol_style_AtlasManager_ = function(opt_options) {\n\n  var options = opt_options || {};\n\n  /**\n   * The size in pixels of the latest atlas image.\n   * @private\n   * @type {number}\n   */\n  this.currentSize_ = options.initialSize !== undefined ?\n    options.initialSize : _ol_.INITIAL_ATLAS_SIZE;\n\n  /**\n   * The maximum size in pixels of atlas images.\n   * @private\n   * @type {number}\n   */\n  this.maxSize_ = options.maxSize !== undefined ?\n    options.maxSize : _ol_.MAX_ATLAS_SIZE != -1 ?\n      _ol_.MAX_ATLAS_SIZE : _ol_.WEBGL_MAX_TEXTURE_SIZE !== undefined ?\n        _ol_.WEBGL_MAX_TEXTURE_SIZE : 2048;\n\n  /**\n   * The size in pixels between images.\n   * @private\n   * @type {number}\n   */\n  this.space_ = options.space !== undefined ? options.space : 1;\n\n  /**\n   * @private\n   * @type {Array.<ol.style.Atlas>}\n   */\n  this.atlases_ = [new _ol_style_Atlas_(this.currentSize_, this.space_)];\n\n  /**\n   * The size in pixels of the latest atlas image for hit-detection images.\n   * @private\n   * @type {number}\n   */\n  this.currentHitSize_ = this.currentSize_;\n\n  /**\n   * @private\n   * @type {Array.<ol.style.Atlas>}\n   */\n  this.hitAtlases_ = [new _ol_style_Atlas_(this.currentHitSize_, this.space_)];\n};\n\n\n/**\n * @param {string} id The identifier of the entry to check.\n * @return {?ol.AtlasManagerInfo} The position and atlas image for the\n *    entry, or `null` if the entry is not part of the atlas manager.\n */\n_ol_style_AtlasManager_.prototype.getInfo = function(id) {\n  /** @type {?ol.AtlasInfo} */\n  var info = this.getInfo_(this.atlases_, id);\n\n  if (!info) {\n    return null;\n  }\n  var hitInfo = /** @type {ol.AtlasInfo} */ (this.getInfo_(this.hitAtlases_, id));\n\n  return this.mergeInfos_(info, hitInfo);\n};\n\n\n/**\n * @private\n * @param {Array.<ol.style.Atlas>} atlases The atlases to search.\n * @param {string} id The identifier of the entry to check.\n * @return {?ol.AtlasInfo} The position and atlas image for the entry,\n *    or `null` if the entry is not part of the atlases.\n */\n_ol_style_AtlasManager_.prototype.getInfo_ = function(atlases, id) {\n  var atlas, info, i, ii;\n  for (i = 0, ii = atlases.length; i < ii; ++i) {\n    atlas = atlases[i];\n    info = atlas.get(id);\n    if (info) {\n      return info;\n    }\n  }\n  return null;\n};\n\n\n/**\n * @private\n * @param {ol.AtlasInfo} info The info for the real image.\n * @param {ol.AtlasInfo} hitInfo The info for the hit-detection\n *    image.\n * @return {?ol.AtlasManagerInfo} The position and atlas image for the\n *    entry, or `null` if the entry is not part of the atlases.\n */\n_ol_style_AtlasManager_.prototype.mergeInfos_ = function(info, hitInfo) {\n  return /** @type {ol.AtlasManagerInfo} */ ({\n    offsetX: info.offsetX,\n    offsetY: info.offsetY,\n    image: info.image,\n    hitImage: hitInfo.image\n  });\n};\n\n\n/**\n * Add an image to the atlas manager.\n *\n * If an entry for the given id already exists, the entry will\n * be overridden (but the space on the atlas graphic will not be freed).\n *\n * If `renderHitCallback` is provided, the image (or the hit-detection version\n * of the image) will be rendered into a separate hit-detection atlas image.\n *\n * @param {string} id The identifier of the entry to add.\n * @param {number} width The width.\n * @param {number} height The height.\n * @param {function(CanvasRenderingContext2D, number, number)} renderCallback\n *    Called to render the new image onto an atlas image.\n * @param {function(CanvasRenderingContext2D, number, number)=}\n *    opt_renderHitCallback Called to render a hit-detection image onto a hit\n *    detection atlas image.\n * @param {Object=} opt_this Value to use as `this` when executing\n *    `renderCallback` and `renderHitCallback`.\n * @return {?ol.AtlasManagerInfo}  The position and atlas image for the\n *    entry, or `null` if the image is too big.\n */\n_ol_style_AtlasManager_.prototype.add = function(id, width, height,\n    renderCallback, opt_renderHitCallback, opt_this) {\n  if (width + this.space_ > this.maxSize_ ||\n      height + this.space_ > this.maxSize_) {\n    return null;\n  }\n\n  /** @type {?ol.AtlasInfo} */\n  var info = this.add_(false,\n      id, width, height, renderCallback, opt_this);\n  if (!info) {\n    return null;\n  }\n\n  // even if no hit-detection entry is requested, we insert a fake entry into\n  // the hit-detection atlas, to make sure that the offset is the same for\n  // the original image and the hit-detection image.\n  var renderHitCallback = opt_renderHitCallback !== undefined ?\n    opt_renderHitCallback : _ol_.nullFunction;\n\n  var hitInfo = /** @type {ol.AtlasInfo} */ (this.add_(true,\n      id, width, height, renderHitCallback, opt_this));\n\n  return this.mergeInfos_(info, hitInfo);\n};\n\n\n/**\n * @private\n * @param {boolean} isHitAtlas If the hit-detection atlases are used.\n * @param {string} id The identifier of the entry to add.\n * @param {number} width The width.\n * @param {number} height The height.\n * @param {function(CanvasRenderingContext2D, number, number)} renderCallback\n *    Called to render the new image onto an atlas image.\n * @param {Object=} opt_this Value to use as `this` when executing\n *    `renderCallback` and `renderHitCallback`.\n * @return {?ol.AtlasInfo}  The position and atlas image for the entry,\n *    or `null` if the image is too big.\n */\n_ol_style_AtlasManager_.prototype.add_ = function(isHitAtlas, id, width, height,\n    renderCallback, opt_this) {\n  var atlases = (isHitAtlas) ? this.hitAtlases_ : this.atlases_;\n  var atlas, info, i, ii;\n  for (i = 0, ii = atlases.length; i < ii; ++i) {\n    atlas = atlases[i];\n    info = atlas.add(id, width, height, renderCallback, opt_this);\n    if (info) {\n      return info;\n    } else if (!info && i === ii - 1) {\n      // the entry could not be added to one of the existing atlases,\n      // create a new atlas that is twice as big and try to add to this one.\n      var size;\n      if (isHitAtlas) {\n        size = Math.min(this.currentHitSize_ * 2, this.maxSize_);\n        this.currentHitSize_ = size;\n      } else {\n        size = Math.min(this.currentSize_ * 2, this.maxSize_);\n        this.currentSize_ = size;\n      }\n      atlas = new _ol_style_Atlas_(size, this.space_);\n      atlases.push(atlas);\n      // run the loop another time\n      ++ii;\n    }\n  }\n  return null;\n};\nexport default _ol_style_AtlasManager_;\n","import _ol_ from '../../index.js';\nimport _ol_colorlike_ from '../../colorlike.js';\nimport _ol_dom_ from '../../dom.js';\nimport _ol_geom_GeometryType_ from '../../geom/geometrytype.js';\nimport _ol_has_ from '../../has.js';\nimport _ol_render_replay_ from '../replay.js';\nimport _ol_render_webgl_ from '../webgl.js';\nimport _ol_render_webgl_TextureReplay_ from '../webgl/texturereplay.js';\nimport _ol_style_AtlasManager_ from '../../style/atlasmanager.js';\nimport _ol_webgl_Buffer_ from '../../webgl/buffer.js';\n\n/**\n * @constructor\n * @extends {ol.render.webgl.TextureReplay}\n * @param {number} tolerance Tolerance.\n * @param {ol.Extent} maxExtent Max extent.\n * @struct\n */\nvar _ol_render_webgl_TextReplay_ = function(tolerance, maxExtent) {\n  _ol_render_webgl_TextureReplay_.call(this, tolerance, maxExtent);\n\n  /**\n   * @private\n   * @type {Array.<HTMLCanvasElement>}\n   */\n  this.images_ = [];\n\n  /**\n   * @private\n   * @type {Array.<WebGLTexture>}\n   */\n  this.textures_ = [];\n\n  /**\n   * @private\n   * @type {HTMLCanvasElement}\n   */\n  this.measureCanvas_ = _ol_dom_.createCanvasContext2D(0, 0).canvas;\n\n  /**\n   * @private\n   * @type {{strokeColor: (ol.ColorLike|null),\n   *         lineCap: (string|undefined),\n   *         lineDash: Array.<number>,\n   *         lineDashOffset: (number|undefined),\n   *         lineJoin: (string|undefined),\n   *         lineWidth: number,\n   *         miterLimit: (number|undefined),\n   *         fillColor: (ol.ColorLike|null),\n   *         font: (string|undefined),\n   *         scale: (number|undefined)}}\n   */\n  this.state_ = {\n    strokeColor: null,\n    lineCap: undefined,\n    lineDash: null,\n    lineDashOffset: undefined,\n    lineJoin: undefined,\n    lineWidth: 0,\n    miterLimit: undefined,\n    fillColor: null,\n    font: undefined,\n    scale: undefined\n  };\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this.text_ = '';\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.textAlign_ = undefined;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.textBaseline_ = undefined;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.offsetX_ = undefined;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.offsetY_ = undefined;\n\n  /**\n   * @private\n   * @type {Object.<string, ol.WebglGlyphAtlas>}\n   */\n  this.atlases_ = {};\n\n  /**\n   * @private\n   * @type {ol.WebglGlyphAtlas|undefined}\n   */\n  this.currAtlas_ = undefined;\n\n  this.scale = 1;\n\n  this.opacity = 1;\n\n};\n\n_ol_.inherits(_ol_render_webgl_TextReplay_, _ol_render_webgl_TextureReplay_);\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_TextReplay_.prototype.drawText = function(geometry, feature) {\n  if (this.text_) {\n    var flatCoordinates = null;\n    var offset = 0;\n    var end = 2;\n    var stride = 2;\n    switch (geometry.getType()) {\n      case _ol_geom_GeometryType_.POINT:\n      case _ol_geom_GeometryType_.MULTI_POINT:\n        flatCoordinates = geometry.getFlatCoordinates();\n        end = flatCoordinates.length;\n        stride = geometry.getStride();\n        break;\n      case _ol_geom_GeometryType_.CIRCLE:\n        flatCoordinates = /** @type {ol.geom.Circle} */ (geometry).getCenter();\n        break;\n      case _ol_geom_GeometryType_.LINE_STRING:\n        flatCoordinates = /** @type {ol.geom.LineString} */ (geometry).getFlatMidpoint();\n        break;\n      case _ol_geom_GeometryType_.MULTI_LINE_STRING:\n        flatCoordinates = /** @type {ol.geom.MultiLineString} */ (geometry).getFlatMidpoints();\n        end = flatCoordinates.length;\n        break;\n      case _ol_geom_GeometryType_.POLYGON:\n        flatCoordinates = /** @type {ol.geom.Polygon} */ (geometry).getFlatInteriorPoint();\n        break;\n      case _ol_geom_GeometryType_.MULTI_POLYGON:\n        flatCoordinates = /** @type {ol.geom.MultiPolygon} */ (geometry).getFlatInteriorPoints();\n        end = flatCoordinates.length;\n        break;\n      default:\n    }\n    this.startIndices.push(this.indices.length);\n    this.startIndicesFeature.push(feature);\n\n    var glyphAtlas = this.currAtlas_;\n    var lines = this.text_.split('\\n');\n    var textSize = this.getTextSize_(lines);\n    var i, ii, j, jj, currX, currY, charArr, charInfo;\n    var anchorX = Math.round(textSize[0] * this.textAlign_ - this.offsetX_);\n    var anchorY = Math.round(textSize[1] * this.textBaseline_ - this.offsetY_);\n    var lineWidth = (this.state_.lineWidth / 2) * this.state_.scale;\n\n    for (i = 0, ii = lines.length; i < ii; ++i) {\n      currX = 0;\n      currY = glyphAtlas.height * i;\n      charArr = lines[i].split('');\n\n      for (j = 0, jj = charArr.length; j < jj; ++j) {\n        charInfo = glyphAtlas.atlas.getInfo(charArr[j]);\n\n        if (charInfo) {\n          var image = charInfo.image;\n\n          this.anchorX = anchorX - currX;\n          this.anchorY = anchorY - currY;\n          this.originX = j === 0 ? charInfo.offsetX - lineWidth : charInfo.offsetX;\n          this.originY = charInfo.offsetY;\n          this.height = glyphAtlas.height;\n          this.width = j === 0 || j === charArr.length - 1 ?\n            glyphAtlas.width[charArr[j]] + lineWidth : glyphAtlas.width[charArr[j]];\n          this.imageHeight = image.height;\n          this.imageWidth = image.width;\n\n          var currentImage;\n          if (this.images_.length === 0) {\n            this.images_.push(image);\n          } else {\n            currentImage = this.images_[this.images_.length - 1];\n            if (_ol_.getUid(currentImage) != _ol_.getUid(image)) {\n              this.groupIndices.push(this.indices.length);\n              this.images_.push(image);\n            }\n          }\n\n          this.drawText_(flatCoordinates, offset, end, stride);\n        }\n        currX += this.width;\n      }\n    }\n  }\n};\n\n\n/**\n * @private\n * @param {Array.<string>} lines Label to draw split to lines.\n * @return {Array.<number>} Size of the label in pixels.\n */\n_ol_render_webgl_TextReplay_.prototype.getTextSize_ = function(lines) {\n  var self = this;\n  var glyphAtlas = this.currAtlas_;\n  var textHeight = lines.length * glyphAtlas.height;\n  //Split every line to an array of chars, sum up their width, and select the longest.\n  var textWidth = lines.map(function(str) {\n    var sum = 0;\n    var i, ii;\n    for (i = 0, ii = str.length; i < ii; ++i) {\n      var curr = str[i];\n      if (!glyphAtlas.width[curr]) {\n        self.addCharToAtlas_(curr);\n      }\n      sum += glyphAtlas.width[curr] ? glyphAtlas.width[curr] : 0;\n    }\n    return sum;\n  }).reduce(function(max, curr) {\n    return Math.max(max, curr);\n  });\n\n  return [textWidth, textHeight];\n};\n\n\n/**\n * @private\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n */\n_ol_render_webgl_TextReplay_.prototype.drawText_ = function(flatCoordinates, offset,\n    end, stride) {\n  var i, ii;\n  for (i = offset, ii = end; i < ii; i += stride) {\n    this.drawCoordinates(flatCoordinates, offset, end, stride);\n  }\n};\n\n\n/**\n * @private\n * @param {string} char Character.\n */\n_ol_render_webgl_TextReplay_.prototype.addCharToAtlas_ = function(char) {\n  if (char.length === 1) {\n    var glyphAtlas = this.currAtlas_;\n    var state = this.state_;\n    var mCtx = this.measureCanvas_.getContext('2d');\n    mCtx.font = state.font;\n    var width = Math.ceil(mCtx.measureText(char).width * state.scale);\n\n    var info = glyphAtlas.atlas.add(char, width, glyphAtlas.height,\n        function(ctx, x, y) {\n          //Parameterize the canvas\n          ctx.font = /** @type {string} */ (state.font);\n          ctx.fillStyle = state.fillColor;\n          ctx.strokeStyle = state.strokeColor;\n          ctx.lineWidth = state.lineWidth;\n          ctx.lineCap = /*** @type {string} */ (state.lineCap);\n          ctx.lineJoin = /** @type {string} */ (state.lineJoin);\n          ctx.miterLimit = /** @type {number} */ (state.miterLimit);\n          ctx.textAlign = 'left';\n          ctx.textBaseline = 'top';\n          if (_ol_has_.CANVAS_LINE_DASH && state.lineDash) {\n            //FIXME: use pixelRatio\n            ctx.setLineDash(state.lineDash);\n            ctx.lineDashOffset = /** @type {number} */ (state.lineDashOffset);\n          }\n          if (state.scale !== 1) {\n            //FIXME: use pixelRatio\n            ctx.setTransform(/** @type {number} */ (state.scale), 0, 0,\n                /** @type {number} */ (state.scale), 0, 0);\n          }\n\n          //Draw the character on the canvas\n          if (state.strokeColor) {\n            ctx.strokeText(char, x, y);\n          }\n          if (state.fillColor) {\n            ctx.fillText(char, x, y);\n          }\n        });\n\n    if (info) {\n      glyphAtlas.width[char] = width;\n    }\n  }\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_TextReplay_.prototype.finish = function(context) {\n  var gl = context.getGL();\n\n  this.groupIndices.push(this.indices.length);\n  this.hitDetectionGroupIndices = this.groupIndices;\n\n  // create, bind, and populate the vertices buffer\n  this.verticesBuffer = new _ol_webgl_Buffer_(this.vertices);\n\n  // create, bind, and populate the indices buffer\n  this.indicesBuffer = new _ol_webgl_Buffer_(this.indices);\n\n  // create textures\n  /** @type {Object.<string, WebGLTexture>} */\n  var texturePerImage = {};\n\n  this.createTextures(this.textures_, this.images_, texturePerImage, gl);\n\n  this.state_ = {\n    strokeColor: null,\n    lineCap: undefined,\n    lineDash: null,\n    lineDashOffset: undefined,\n    lineJoin: undefined,\n    lineWidth: 0,\n    miterLimit: undefined,\n    fillColor: null,\n    font: undefined,\n    scale: undefined\n  };\n  this.text_ = '';\n  this.textAlign_ = undefined;\n  this.textBaseline_ = undefined;\n  this.offsetX_ = undefined;\n  this.offsetY_ = undefined;\n  this.images_ = null;\n  this.atlases_ = {};\n  this.currAtlas_ = undefined;\n  _ol_render_webgl_TextureReplay_.prototype.finish.call(this, context);\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_TextReplay_.prototype.setTextStyle = function(textStyle) {\n  var state = this.state_;\n  var textFillStyle = textStyle.getFill();\n  var textStrokeStyle = textStyle.getStroke();\n  if (!textStyle || !textStyle.getText() || (!textFillStyle && !textStrokeStyle)) {\n    this.text_ = '';\n  } else {\n    if (!textFillStyle) {\n      state.fillColor = null;\n    } else {\n      var textFillStyleColor = textFillStyle.getColor();\n      state.fillColor = _ol_colorlike_.asColorLike(textFillStyleColor ?\n        textFillStyleColor : _ol_render_webgl_.defaultFillStyle);\n    }\n    if (!textStrokeStyle) {\n      state.strokeColor = null;\n      state.lineWidth = 0;\n    } else {\n      var textStrokeStyleColor = textStrokeStyle.getColor();\n      state.strokeColor = _ol_colorlike_.asColorLike(textStrokeStyleColor ?\n        textStrokeStyleColor : _ol_render_webgl_.defaultStrokeStyle);\n      state.lineWidth = textStrokeStyle.getWidth() || _ol_render_webgl_.defaultLineWidth;\n      state.lineCap = textStrokeStyle.getLineCap() || _ol_render_webgl_.defaultLineCap;\n      state.lineDashOffset = textStrokeStyle.getLineDashOffset() || _ol_render_webgl_.defaultLineDashOffset;\n      state.lineJoin = textStrokeStyle.getLineJoin() || _ol_render_webgl_.defaultLineJoin;\n      state.miterLimit = textStrokeStyle.getMiterLimit() || _ol_render_webgl_.defaultMiterLimit;\n      var lineDash = textStrokeStyle.getLineDash();\n      state.lineDash = lineDash ? lineDash.slice() : _ol_render_webgl_.defaultLineDash;\n    }\n    state.font = textStyle.getFont() || _ol_render_webgl_.defaultFont;\n    state.scale = textStyle.getScale() || 1;\n    this.text_ = /** @type {string} */ (textStyle.getText());\n    var textAlign = _ol_render_replay_.TEXT_ALIGN[textStyle.getTextAlign()];\n    var textBaseline = _ol_render_replay_.TEXT_ALIGN[textStyle.getTextBaseline()];\n    this.textAlign_ = textAlign === undefined ?\n      _ol_render_webgl_.defaultTextAlign : textAlign;\n    this.textBaseline_ = textBaseline === undefined ?\n      _ol_render_webgl_.defaultTextBaseline : textBaseline;\n    this.offsetX_ = textStyle.getOffsetX() || 0;\n    this.offsetY_ = textStyle.getOffsetY() || 0;\n    this.rotateWithView = !!textStyle.getRotateWithView();\n    this.rotation = textStyle.getRotation() || 0;\n\n    this.currAtlas_ = this.getAtlas_(state);\n  }\n};\n\n\n/**\n * @private\n * @param {Object} state Font attributes.\n * @return {ol.WebglGlyphAtlas} Glyph atlas.\n */\n_ol_render_webgl_TextReplay_.prototype.getAtlas_ = function(state) {\n  var params = [];\n  var i;\n  for (i in state) {\n    if (state[i] || state[i] === 0) {\n      if (Array.isArray(state[i])) {\n        params = params.concat(state[i]);\n      } else {\n        params.push(state[i]);\n      }\n    }\n  }\n  var hash = this.calculateHash_(params);\n  if (!this.atlases_[hash]) {\n    var mCtx = this.measureCanvas_.getContext('2d');\n    mCtx.font = state.font;\n    var height = Math.ceil((mCtx.measureText('M').width * 1.5 +\n        state.lineWidth / 2) * state.scale);\n\n    this.atlases_[hash] = {\n      atlas: new _ol_style_AtlasManager_({\n        space: state.lineWidth + 1\n      }),\n      width: {},\n      height: height\n    };\n  }\n  return this.atlases_[hash];\n};\n\n\n/**\n * @private\n * @param {Array.<string|number>} params Array of parameters.\n * @return {string} Hash string.\n */\n_ol_render_webgl_TextReplay_.prototype.calculateHash_ = function(params) {\n  //TODO: Create a more performant, reliable, general hash function.\n  var i, ii;\n  var hash = '';\n  for (i = 0, ii = params.length; i < ii; ++i) {\n    hash += params[i];\n  }\n  return hash;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_TextReplay_.prototype.getTextures = function(opt_all) {\n  return this.textures_;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_TextReplay_.prototype.getHitDetectionTextures = function() {\n  return this.textures_;\n};\nexport default _ol_render_webgl_TextReplay_;\n","import _ol_ from '../../index.js';\nimport _ol_array_ from '../../array.js';\nimport _ol_extent_ from '../../extent.js';\nimport _ol_obj_ from '../../obj.js';\nimport _ol_render_replay_ from '../replay.js';\nimport _ol_render_ReplayGroup_ from '../replaygroup.js';\nimport _ol_render_webgl_CircleReplay_ from '../webgl/circlereplay.js';\nimport _ol_render_webgl_ImageReplay_ from '../webgl/imagereplay.js';\nimport _ol_render_webgl_LineStringReplay_ from '../webgl/linestringreplay.js';\nimport _ol_render_webgl_PolygonReplay_ from '../webgl/polygonreplay.js';\nimport _ol_render_webgl_TextReplay_ from '../webgl/textreplay.js';\n\n/**\n * @constructor\n * @extends {ol.render.ReplayGroup}\n * @param {number} tolerance Tolerance.\n * @param {ol.Extent} maxExtent Max extent.\n * @param {number=} opt_renderBuffer Render buffer.\n * @struct\n */\nvar _ol_render_webgl_ReplayGroup_ = function(tolerance, maxExtent, opt_renderBuffer) {\n  _ol_render_ReplayGroup_.call(this);\n\n  /**\n   * @type {ol.Extent}\n   * @private\n   */\n  this.maxExtent_ = maxExtent;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.tolerance_ = tolerance;\n\n  /**\n   * @type {number|undefined}\n   * @private\n   */\n  this.renderBuffer_ = opt_renderBuffer;\n\n  /**\n   * @private\n   * @type {!Object.<string,\n   *        Object.<ol.render.ReplayType, ol.render.webgl.Replay>>}\n   */\n  this.replaysByZIndex_ = {};\n\n};\n\n_ol_.inherits(_ol_render_webgl_ReplayGroup_, _ol_render_ReplayGroup_);\n\n\n/**\n * @param {ol.style.Style} style Style.\n * @param {boolean} group Group with previous replay.\n */\n_ol_render_webgl_ReplayGroup_.prototype.addDeclutter = function(style, group) {};\n\n\n/**\n * @param {ol.webgl.Context} context WebGL context.\n * @return {function()} Delete resources function.\n */\n_ol_render_webgl_ReplayGroup_.prototype.getDeleteResourcesFunction = function(context) {\n  var functions = [];\n  var zKey;\n  for (zKey in this.replaysByZIndex_) {\n    var replays = this.replaysByZIndex_[zKey];\n    var replayKey;\n    for (replayKey in replays) {\n      functions.push(\n          replays[replayKey].getDeleteResourcesFunction(context));\n    }\n  }\n  return function() {\n    var length = functions.length;\n    var result;\n    for (var i = 0; i < length; i++) {\n      result = functions[i].apply(this, arguments);\n    }\n    return result;\n  };\n};\n\n\n/**\n * @param {ol.webgl.Context} context Context.\n */\n_ol_render_webgl_ReplayGroup_.prototype.finish = function(context) {\n  var zKey;\n  for (zKey in this.replaysByZIndex_) {\n    var replays = this.replaysByZIndex_[zKey];\n    var replayKey;\n    for (replayKey in replays) {\n      replays[replayKey].finish(context);\n    }\n  }\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_ReplayGroup_.prototype.getReplay = function(zIndex, replayType) {\n  var zIndexKey = zIndex !== undefined ? zIndex.toString() : '0';\n  var replays = this.replaysByZIndex_[zIndexKey];\n  if (replays === undefined) {\n    replays = {};\n    this.replaysByZIndex_[zIndexKey] = replays;\n  }\n  var replay = replays[replayType];\n  if (replay === undefined) {\n    /**\n     * @type {Function}\n     */\n    var Constructor = _ol_render_webgl_ReplayGroup_.BATCH_CONSTRUCTORS_[replayType];\n    replay = new Constructor(this.tolerance_, this.maxExtent_);\n    replays[replayType] = replay;\n  }\n  return replay;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_ReplayGroup_.prototype.isEmpty = function() {\n  return _ol_obj_.isEmpty(this.replaysByZIndex_);\n};\n\n\n/**\n * @param {ol.webgl.Context} context Context.\n * @param {ol.Coordinate} center Center.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @param {ol.Size} size Size.\n * @param {number} pixelRatio Pixel ratio.\n * @param {number} opacity Global opacity.\n * @param {Object.<string, boolean>} skippedFeaturesHash Ids of features\n *  to skip.\n */\n_ol_render_webgl_ReplayGroup_.prototype.replay = function(context,\n    center, resolution, rotation, size, pixelRatio,\n    opacity, skippedFeaturesHash) {\n  /** @type {Array.<number>} */\n  var zs = Object.keys(this.replaysByZIndex_).map(Number);\n  zs.sort(_ol_array_.numberSafeCompareFunction);\n\n  var i, ii, j, jj, replays, replay;\n  for (i = 0, ii = zs.length; i < ii; ++i) {\n    replays = this.replaysByZIndex_[zs[i].toString()];\n    for (j = 0, jj = _ol_render_replay_.ORDER.length; j < jj; ++j) {\n      replay = replays[_ol_render_replay_.ORDER[j]];\n      if (replay !== undefined) {\n        replay.replay(context,\n            center, resolution, rotation, size, pixelRatio,\n            opacity, skippedFeaturesHash,\n            undefined, false);\n      }\n    }\n  }\n};\n\n\n/**\n * @private\n * @param {ol.webgl.Context} context Context.\n * @param {ol.Coordinate} center Center.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @param {ol.Size} size Size.\n * @param {number} pixelRatio Pixel ratio.\n * @param {number} opacity Global opacity.\n * @param {Object.<string, boolean>} skippedFeaturesHash Ids of features\n *  to skip.\n * @param {function((ol.Feature|ol.render.Feature)): T|undefined} featureCallback Feature callback.\n * @param {boolean} oneByOne Draw features one-by-one for the hit-detecion.\n * @param {ol.Extent=} opt_hitExtent Hit extent: Only features intersecting\n *  this extent are checked.\n * @return {T|undefined} Callback result.\n * @template T\n */\n_ol_render_webgl_ReplayGroup_.prototype.replayHitDetection_ = function(context,\n    center, resolution, rotation, size, pixelRatio, opacity,\n    skippedFeaturesHash, featureCallback, oneByOne, opt_hitExtent) {\n  /** @type {Array.<number>} */\n  var zs = Object.keys(this.replaysByZIndex_).map(Number);\n  zs.sort(function(a, b) {\n    return b - a;\n  });\n\n  var i, ii, j, replays, replay, result;\n  for (i = 0, ii = zs.length; i < ii; ++i) {\n    replays = this.replaysByZIndex_[zs[i].toString()];\n    for (j = _ol_render_replay_.ORDER.length - 1; j >= 0; --j) {\n      replay = replays[_ol_render_replay_.ORDER[j]];\n      if (replay !== undefined) {\n        result = replay.replay(context,\n            center, resolution, rotation, size, pixelRatio, opacity,\n            skippedFeaturesHash, featureCallback, oneByOne, opt_hitExtent);\n        if (result) {\n          return result;\n        }\n      }\n    }\n  }\n  return undefined;\n};\n\n\n/**\n * @param {ol.Coordinate} coordinate Coordinate.\n * @param {ol.webgl.Context} context Context.\n * @param {ol.Coordinate} center Center.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @param {ol.Size} size Size.\n * @param {number} pixelRatio Pixel ratio.\n * @param {number} opacity Global opacity.\n * @param {Object.<string, boolean>} skippedFeaturesHash Ids of features\n *  to skip.\n * @param {function((ol.Feature|ol.render.Feature)): T|undefined} callback Feature callback.\n * @return {T|undefined} Callback result.\n * @template T\n */\n_ol_render_webgl_ReplayGroup_.prototype.forEachFeatureAtCoordinate = function(\n    coordinate, context, center, resolution, rotation, size, pixelRatio,\n    opacity, skippedFeaturesHash,\n    callback) {\n  var gl = context.getGL();\n  gl.bindFramebuffer(\n      gl.FRAMEBUFFER, context.getHitDetectionFramebuffer());\n\n\n  /**\n   * @type {ol.Extent}\n   */\n  var hitExtent;\n  if (this.renderBuffer_ !== undefined) {\n    // build an extent around the coordinate, so that only features that\n    // intersect this extent are checked\n    hitExtent = _ol_extent_.buffer(\n        _ol_extent_.createOrUpdateFromCoordinate(coordinate),\n        resolution * this.renderBuffer_);\n  }\n\n  return this.replayHitDetection_(context,\n      coordinate, resolution, rotation, _ol_render_webgl_ReplayGroup_.HIT_DETECTION_SIZE_,\n      pixelRatio, opacity, skippedFeaturesHash,\n      /**\n       * @param {ol.Feature|ol.render.Feature} feature Feature.\n       * @return {?} Callback result.\n       */\n      function(feature) {\n        var imageData = new Uint8Array(4);\n        gl.readPixels(0, 0, 1, 1, gl.RGBA, gl.UNSIGNED_BYTE, imageData);\n\n        if (imageData[3] > 0) {\n          var result = callback(feature);\n          if (result) {\n            return result;\n          }\n        }\n      }, true, hitExtent);\n};\n\n\n/**\n * @param {ol.Coordinate} coordinate Coordinate.\n * @param {ol.webgl.Context} context Context.\n * @param {ol.Coordinate} center Center.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @param {ol.Size} size Size.\n * @param {number} pixelRatio Pixel ratio.\n * @param {number} opacity Global opacity.\n * @param {Object.<string, boolean>} skippedFeaturesHash Ids of features\n *  to skip.\n * @return {boolean} Is there a feature at the given coordinate?\n */\n_ol_render_webgl_ReplayGroup_.prototype.hasFeatureAtCoordinate = function(\n    coordinate, context, center, resolution, rotation, size, pixelRatio,\n    opacity, skippedFeaturesHash) {\n  var gl = context.getGL();\n  gl.bindFramebuffer(\n      gl.FRAMEBUFFER, context.getHitDetectionFramebuffer());\n\n  var hasFeature = this.replayHitDetection_(context,\n      coordinate, resolution, rotation, _ol_render_webgl_ReplayGroup_.HIT_DETECTION_SIZE_,\n      pixelRatio, opacity, skippedFeaturesHash,\n      /**\n       * @param {ol.Feature|ol.render.Feature} feature Feature.\n       * @return {boolean} Is there a feature?\n       */\n      function(feature) {\n        var imageData = new Uint8Array(4);\n        gl.readPixels(0, 0, 1, 1, gl.RGBA, gl.UNSIGNED_BYTE, imageData);\n        return imageData[3] > 0;\n      }, false);\n\n  return hasFeature !== undefined;\n};\n\n/**\n * @const\n * @private\n * @type {Array.<number>}\n */\n_ol_render_webgl_ReplayGroup_.HIT_DETECTION_SIZE_ = [1, 1];\n\n/**\n * @const\n * @private\n * @type {Object.<ol.render.ReplayType,\n *                function(new: ol.render.webgl.Replay, number,\n *                ol.Extent)>}\n */\n_ol_render_webgl_ReplayGroup_.BATCH_CONSTRUCTORS_ = {\n  'Circle': _ol_render_webgl_CircleReplay_,\n  'Image': _ol_render_webgl_ImageReplay_,\n  'LineString': _ol_render_webgl_LineStringReplay_,\n  'Polygon': _ol_render_webgl_PolygonReplay_,\n  'Text': _ol_render_webgl_TextReplay_\n};\nexport default _ol_render_webgl_ReplayGroup_;\n","import _ol_ from '../../index.js';\nimport _ol_extent_ from '../../extent.js';\nimport _ol_geom_GeometryType_ from '../../geom/geometrytype.js';\nimport _ol_render_ReplayType_ from '../replaytype.js';\nimport _ol_render_VectorContext_ from '../vectorcontext.js';\nimport _ol_render_webgl_ReplayGroup_ from '../webgl/replaygroup.js';\n\n/**\n * @constructor\n * @extends {ol.render.VectorContext}\n * @param {ol.webgl.Context} context Context.\n * @param {ol.Coordinate} center Center.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @param {ol.Size} size Size.\n * @param {ol.Extent} extent Extent.\n * @param {number} pixelRatio Pixel ratio.\n * @struct\n */\nvar _ol_render_webgl_Immediate_ = function(context, center, resolution, rotation, size, extent, pixelRatio) {\n  _ol_render_VectorContext_.call(this);\n\n  /**\n   * @private\n   */\n  this.context_ = context;\n\n  /**\n   * @private\n   */\n  this.center_ = center;\n\n  /**\n   * @private\n   */\n  this.extent_ = extent;\n\n  /**\n   * @private\n   */\n  this.pixelRatio_ = pixelRatio;\n\n  /**\n   * @private\n   */\n  this.size_ = size;\n\n  /**\n   * @private\n   */\n  this.rotation_ = rotation;\n\n  /**\n   * @private\n   */\n  this.resolution_ = resolution;\n\n  /**\n   * @private\n   * @type {ol.style.Image}\n   */\n  this.imageStyle_ = null;\n\n  /**\n   * @private\n   * @type {ol.style.Fill}\n   */\n  this.fillStyle_ = null;\n\n  /**\n   * @private\n   * @type {ol.style.Stroke}\n   */\n  this.strokeStyle_ = null;\n\n  /**\n   * @private\n   * @type {ol.style.Text}\n   */\n  this.textStyle_ = null;\n\n};\n\n_ol_.inherits(_ol_render_webgl_Immediate_, _ol_render_VectorContext_);\n\n\n/**\n * @param {ol.render.webgl.ReplayGroup} replayGroup Replay group.\n * @param {ol.geom.Geometry|ol.render.Feature} geometry Geometry.\n * @private\n */\n_ol_render_webgl_Immediate_.prototype.drawText_ = function(replayGroup, geometry) {\n  var context = this.context_;\n  var replay = /** @type {ol.render.webgl.TextReplay} */ (\n    replayGroup.getReplay(0, _ol_render_ReplayType_.TEXT));\n  replay.setTextStyle(this.textStyle_);\n  replay.drawText(geometry, null);\n  replay.finish(context);\n  // default colors\n  var opacity = 1;\n  var skippedFeatures = {};\n  var featureCallback;\n  var oneByOne = false;\n  replay.replay(this.context_, this.center_, this.resolution_, this.rotation_,\n      this.size_, this.pixelRatio_, opacity, skippedFeatures, featureCallback,\n      oneByOne);\n  replay.getDeleteResourcesFunction(context)();\n};\n\n\n/**\n * Set the rendering style.  Note that since this is an immediate rendering API,\n * any `zIndex` on the provided style will be ignored.\n *\n * @param {ol.style.Style} style The rendering style.\n * @override\n * @api\n */\n_ol_render_webgl_Immediate_.prototype.setStyle = function(style) {\n  this.setFillStrokeStyle(style.getFill(), style.getStroke());\n  this.setImageStyle(style.getImage());\n  this.setTextStyle(style.getText());\n};\n\n\n/**\n * Render a geometry into the canvas.  Call\n * {@link ol.render.webgl.Immediate#setStyle} first to set the rendering style.\n *\n * @param {ol.geom.Geometry|ol.render.Feature} geometry The geometry to render.\n * @override\n * @api\n */\n_ol_render_webgl_Immediate_.prototype.drawGeometry = function(geometry) {\n  var type = geometry.getType();\n  switch (type) {\n    case _ol_geom_GeometryType_.POINT:\n      this.drawPoint(/** @type {ol.geom.Point} */ (geometry), null);\n      break;\n    case _ol_geom_GeometryType_.LINE_STRING:\n      this.drawLineString(/** @type {ol.geom.LineString} */ (geometry), null);\n      break;\n    case _ol_geom_GeometryType_.POLYGON:\n      this.drawPolygon(/** @type {ol.geom.Polygon} */ (geometry), null);\n      break;\n    case _ol_geom_GeometryType_.MULTI_POINT:\n      this.drawMultiPoint(/** @type {ol.geom.MultiPoint} */ (geometry), null);\n      break;\n    case _ol_geom_GeometryType_.MULTI_LINE_STRING:\n      this.drawMultiLineString(/** @type {ol.geom.MultiLineString} */ (geometry), null);\n      break;\n    case _ol_geom_GeometryType_.MULTI_POLYGON:\n      this.drawMultiPolygon(/** @type {ol.geom.MultiPolygon} */ (geometry), null);\n      break;\n    case _ol_geom_GeometryType_.GEOMETRY_COLLECTION:\n      this.drawGeometryCollection(/** @type {ol.geom.GeometryCollection} */ (geometry), null);\n      break;\n    case _ol_geom_GeometryType_.CIRCLE:\n      this.drawCircle(/** @type {ol.geom.Circle} */ (geometry), null);\n      break;\n    default:\n      // pass\n  }\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\n_ol_render_webgl_Immediate_.prototype.drawFeature = function(feature, style) {\n  var geometry = style.getGeometryFunction()(feature);\n  if (!geometry ||\n      !_ol_extent_.intersects(this.extent_, geometry.getExtent())) {\n    return;\n  }\n  this.setStyle(style);\n  this.drawGeometry(geometry);\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_Immediate_.prototype.drawGeometryCollection = function(geometry, data) {\n  var geometries = geometry.getGeometriesArray();\n  var i, ii;\n  for (i = 0, ii = geometries.length; i < ii; ++i) {\n    this.drawGeometry(geometries[i]);\n  }\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_Immediate_.prototype.drawPoint = function(geometry, data) {\n  var context = this.context_;\n  var replayGroup = new _ol_render_webgl_ReplayGroup_(1, this.extent_);\n  var replay = /** @type {ol.render.webgl.ImageReplay} */ (\n    replayGroup.getReplay(0, _ol_render_ReplayType_.IMAGE));\n  replay.setImageStyle(this.imageStyle_);\n  replay.drawPoint(geometry, data);\n  replay.finish(context);\n  // default colors\n  var opacity = 1;\n  var skippedFeatures = {};\n  var featureCallback;\n  var oneByOne = false;\n  replay.replay(this.context_, this.center_, this.resolution_, this.rotation_,\n      this.size_, this.pixelRatio_, opacity, skippedFeatures, featureCallback,\n      oneByOne);\n  replay.getDeleteResourcesFunction(context)();\n\n  if (this.textStyle_) {\n    this.drawText_(replayGroup, geometry);\n  }\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_Immediate_.prototype.drawMultiPoint = function(geometry, data) {\n  var context = this.context_;\n  var replayGroup = new _ol_render_webgl_ReplayGroup_(1, this.extent_);\n  var replay = /** @type {ol.render.webgl.ImageReplay} */ (\n    replayGroup.getReplay(0, _ol_render_ReplayType_.IMAGE));\n  replay.setImageStyle(this.imageStyle_);\n  replay.drawMultiPoint(geometry, data);\n  replay.finish(context);\n  var opacity = 1;\n  var skippedFeatures = {};\n  var featureCallback;\n  var oneByOne = false;\n  replay.replay(this.context_, this.center_, this.resolution_, this.rotation_,\n      this.size_, this.pixelRatio_, opacity, skippedFeatures, featureCallback,\n      oneByOne);\n  replay.getDeleteResourcesFunction(context)();\n\n  if (this.textStyle_) {\n    this.drawText_(replayGroup, geometry);\n  }\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_Immediate_.prototype.drawLineString = function(geometry, data) {\n  var context = this.context_;\n  var replayGroup = new _ol_render_webgl_ReplayGroup_(1, this.extent_);\n  var replay = /** @type {ol.render.webgl.LineStringReplay} */ (\n    replayGroup.getReplay(0, _ol_render_ReplayType_.LINE_STRING));\n  replay.setFillStrokeStyle(null, this.strokeStyle_);\n  replay.drawLineString(geometry, data);\n  replay.finish(context);\n  var opacity = 1;\n  var skippedFeatures = {};\n  var featureCallback;\n  var oneByOne = false;\n  replay.replay(this.context_, this.center_, this.resolution_, this.rotation_,\n      this.size_, this.pixelRatio_, opacity, skippedFeatures, featureCallback,\n      oneByOne);\n  replay.getDeleteResourcesFunction(context)();\n\n  if (this.textStyle_) {\n    this.drawText_(replayGroup, geometry);\n  }\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_Immediate_.prototype.drawMultiLineString = function(geometry, data) {\n  var context = this.context_;\n  var replayGroup = new _ol_render_webgl_ReplayGroup_(1, this.extent_);\n  var replay = /** @type {ol.render.webgl.LineStringReplay} */ (\n    replayGroup.getReplay(0, _ol_render_ReplayType_.LINE_STRING));\n  replay.setFillStrokeStyle(null, this.strokeStyle_);\n  replay.drawMultiLineString(geometry, data);\n  replay.finish(context);\n  var opacity = 1;\n  var skippedFeatures = {};\n  var featureCallback;\n  var oneByOne = false;\n  replay.replay(this.context_, this.center_, this.resolution_, this.rotation_,\n      this.size_, this.pixelRatio_, opacity, skippedFeatures, featureCallback,\n      oneByOne);\n  replay.getDeleteResourcesFunction(context)();\n\n  if (this.textStyle_) {\n    this.drawText_(replayGroup, geometry);\n  }\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_Immediate_.prototype.drawPolygon = function(geometry, data) {\n  var context = this.context_;\n  var replayGroup = new _ol_render_webgl_ReplayGroup_(1, this.extent_);\n  var replay = /** @type {ol.render.webgl.PolygonReplay} */ (\n    replayGroup.getReplay(0, _ol_render_ReplayType_.POLYGON));\n  replay.setFillStrokeStyle(this.fillStyle_, this.strokeStyle_);\n  replay.drawPolygon(geometry, data);\n  replay.finish(context);\n  var opacity = 1;\n  var skippedFeatures = {};\n  var featureCallback;\n  var oneByOne = false;\n  replay.replay(this.context_, this.center_, this.resolution_, this.rotation_,\n      this.size_, this.pixelRatio_, opacity, skippedFeatures, featureCallback,\n      oneByOne);\n  replay.getDeleteResourcesFunction(context)();\n\n  if (this.textStyle_) {\n    this.drawText_(replayGroup, geometry);\n  }\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_Immediate_.prototype.drawMultiPolygon = function(geometry, data) {\n  var context = this.context_;\n  var replayGroup = new _ol_render_webgl_ReplayGroup_(1, this.extent_);\n  var replay = /** @type {ol.render.webgl.PolygonReplay} */ (\n    replayGroup.getReplay(0, _ol_render_ReplayType_.POLYGON));\n  replay.setFillStrokeStyle(this.fillStyle_, this.strokeStyle_);\n  replay.drawMultiPolygon(geometry, data);\n  replay.finish(context);\n  var opacity = 1;\n  var skippedFeatures = {};\n  var featureCallback;\n  var oneByOne = false;\n  replay.replay(this.context_, this.center_, this.resolution_, this.rotation_,\n      this.size_, this.pixelRatio_, opacity, skippedFeatures, featureCallback,\n      oneByOne);\n  replay.getDeleteResourcesFunction(context)();\n\n  if (this.textStyle_) {\n    this.drawText_(replayGroup, geometry);\n  }\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_Immediate_.prototype.drawCircle = function(geometry, data) {\n  var context = this.context_;\n  var replayGroup = new _ol_render_webgl_ReplayGroup_(1, this.extent_);\n  var replay = /** @type {ol.render.webgl.CircleReplay} */ (\n    replayGroup.getReplay(0, _ol_render_ReplayType_.CIRCLE));\n  replay.setFillStrokeStyle(this.fillStyle_, this.strokeStyle_);\n  replay.drawCircle(geometry, data);\n  replay.finish(context);\n  var opacity = 1;\n  var skippedFeatures = {};\n  var featureCallback;\n  var oneByOne = false;\n  replay.replay(this.context_, this.center_, this.resolution_, this.rotation_,\n      this.size_, this.pixelRatio_, opacity, skippedFeatures, featureCallback,\n      oneByOne);\n  replay.getDeleteResourcesFunction(context)();\n\n  if (this.textStyle_) {\n    this.drawText_(replayGroup, geometry);\n  }\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_Immediate_.prototype.setImageStyle = function(imageStyle) {\n  this.imageStyle_ = imageStyle;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_Immediate_.prototype.setFillStrokeStyle = function(fillStyle, strokeStyle) {\n  this.fillStyle_ = fillStyle;\n  this.strokeStyle_ = strokeStyle;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_render_webgl_Immediate_.prototype.setTextStyle = function(textStyle) {\n  this.textStyle_ = textStyle;\n};\nexport default _ol_render_webgl_Immediate_;\n","// This file is automatically generated, do not edit\nimport _ol_ from '../../index.js';\nimport _ol_webgl_Fragment_ from '../../webgl/fragment.js';\nimport _ol_webgl_Vertex_ from '../../webgl/vertex.js';\nvar _ol_renderer_webgl_defaultmapshader_ = {};\n\n\n_ol_renderer_webgl_defaultmapshader_.fragment = new _ol_webgl_Fragment_(_ol_.DEBUG_WEBGL ?\n  'precision mediump float;\\nvarying vec2 v_texCoord;\\n\\n\\nuniform float u_opacity;\\nuniform sampler2D u_texture;\\n\\nvoid main(void) {\\n  vec4 texColor = texture2D(u_texture, v_texCoord);\\n  gl_FragColor.rgb = texColor.rgb;\\n  gl_FragColor.a = texColor.a * u_opacity;\\n}\\n' :\n  'precision mediump float;varying vec2 a;uniform float f;uniform sampler2D g;void main(void){vec4 texColor=texture2D(g,a);gl_FragColor.rgb=texColor.rgb;gl_FragColor.a=texColor.a*f;}');\n\n_ol_renderer_webgl_defaultmapshader_.vertex = new _ol_webgl_Vertex_(_ol_.DEBUG_WEBGL ?\n  'varying vec2 v_texCoord;\\n\\n\\nattribute vec2 a_position;\\nattribute vec2 a_texCoord;\\n\\nuniform mat4 u_texCoordMatrix;\\nuniform mat4 u_projectionMatrix;\\n\\nvoid main(void) {\\n  gl_Position = u_projectionMatrix * vec4(a_position, 0., 1.);\\n  v_texCoord = (u_texCoordMatrix * vec4(a_texCoord, 0., 1.)).st;\\n}\\n\\n\\n' :\n  'varying vec2 a;attribute vec2 b;attribute vec2 c;uniform mat4 d;uniform mat4 e;void main(void){gl_Position=e*vec4(b,0.,1.);a=(d*vec4(c,0.,1.)).st;}');\nexport default _ol_renderer_webgl_defaultmapshader_;","// This file is automatically generated, do not edit\nimport _ol_ from '../../../index.js';\n\n/**\n * @constructor\n * @param {WebGLRenderingContext} gl GL.\n * @param {WebGLProgram} program Program.\n * @struct\n */\nvar _ol_renderer_webgl_defaultmapshader_Locations_ = function(gl, program) {\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_texCoordMatrix = gl.getUniformLocation(\n      program, _ol_.DEBUG_WEBGL ? 'u_texCoordMatrix' : 'd');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_projectionMatrix = gl.getUniformLocation(\n      program, _ol_.DEBUG_WEBGL ? 'u_projectionMatrix' : 'e');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_opacity = gl.getUniformLocation(\n      program, _ol_.DEBUG_WEBGL ? 'u_opacity' : 'f');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_texture = gl.getUniformLocation(\n      program, _ol_.DEBUG_WEBGL ? 'u_texture' : 'g');\n\n  /**\n   * @type {number}\n   */\n  this.a_position = gl.getAttribLocation(\n      program, _ol_.DEBUG_WEBGL ? 'a_position' : 'b');\n\n  /**\n   * @type {number}\n   */\n  this.a_texCoord = gl.getAttribLocation(\n      program, _ol_.DEBUG_WEBGL ? 'a_texCoord' : 'c');\n};\n\nexport default _ol_renderer_webgl_defaultmapshader_Locations_;","import _ol_ from '../../index.js';\nimport _ol_render_Event_ from '../../render/event.js';\nimport _ol_render_EventType_ from '../../render/eventtype.js';\nimport _ol_render_webgl_Immediate_ from '../../render/webgl/immediate.js';\nimport _ol_renderer_Layer_ from '../layer.js';\nimport _ol_renderer_webgl_defaultmapshader_ from '../webgl/defaultmapshader.js';\nimport _ol_renderer_webgl_defaultmapshader_Locations_ from '../webgl/defaultmapshader/locations.js';\nimport _ol_transform_ from '../../transform.js';\nimport _ol_vec_Mat4_ from '../../vec/mat4.js';\nimport _ol_webgl_ from '../../webgl.js';\nimport _ol_webgl_Buffer_ from '../../webgl/buffer.js';\nimport _ol_webgl_Context_ from '../../webgl/context.js';\n\n/**\n * @constructor\n * @abstract\n * @extends {ol.renderer.Layer}\n * @param {ol.renderer.webgl.Map} mapRenderer Map renderer.\n * @param {ol.layer.Layer} layer Layer.\n */\nvar _ol_renderer_webgl_Layer_ = function(mapRenderer, layer) {\n\n  _ol_renderer_Layer_.call(this, layer);\n\n  /**\n   * @protected\n   * @type {ol.renderer.webgl.Map}\n   */\n  this.mapRenderer = mapRenderer;\n\n  /**\n   * @private\n   * @type {ol.webgl.Buffer}\n   */\n  this.arrayBuffer_ = new _ol_webgl_Buffer_([\n    -1, -1, 0, 0,\n    1, -1, 1, 0,\n    -1, 1, 0, 1,\n    1, 1, 1, 1\n  ]);\n\n  /**\n   * @protected\n   * @type {WebGLTexture}\n   */\n  this.texture = null;\n\n  /**\n   * @protected\n   * @type {WebGLFramebuffer}\n   */\n  this.framebuffer = null;\n\n  /**\n   * @protected\n   * @type {number|undefined}\n   */\n  this.framebufferDimension = undefined;\n\n  /**\n   * @protected\n   * @type {ol.Transform}\n   */\n  this.texCoordMatrix = _ol_transform_.create();\n\n  /**\n   * @protected\n   * @type {ol.Transform}\n   */\n  this.projectionMatrix = _ol_transform_.create();\n\n  /**\n   * @type {Array.<number>}\n   * @private\n   */\n  this.tmpMat4_ = _ol_vec_Mat4_.create();\n\n  /**\n   * @private\n   * @type {ol.renderer.webgl.defaultmapshader.Locations}\n   */\n  this.defaultLocations_ = null;\n\n};\n\n_ol_.inherits(_ol_renderer_webgl_Layer_, _ol_renderer_Layer_);\n\n\n/**\n * @param {olx.FrameState} frameState Frame state.\n * @param {number} framebufferDimension Framebuffer dimension.\n * @protected\n */\n_ol_renderer_webgl_Layer_.prototype.bindFramebuffer = function(frameState, framebufferDimension) {\n\n  var gl = this.mapRenderer.getGL();\n\n  if (this.framebufferDimension === undefined ||\n      this.framebufferDimension != framebufferDimension) {\n    /**\n     * @param {WebGLRenderingContext} gl GL.\n     * @param {WebGLFramebuffer} framebuffer Framebuffer.\n     * @param {WebGLTexture} texture Texture.\n     */\n    var postRenderFunction = function(gl, framebuffer, texture) {\n      if (!gl.isContextLost()) {\n        gl.deleteFramebuffer(framebuffer);\n        gl.deleteTexture(texture);\n      }\n    }.bind(null, gl, this.framebuffer, this.texture);\n\n    frameState.postRenderFunctions.push(\n        /** @type {ol.PostRenderFunction} */ (postRenderFunction)\n    );\n\n    var texture = _ol_webgl_Context_.createEmptyTexture(\n        gl, framebufferDimension, framebufferDimension);\n\n    var framebuffer = gl.createFramebuffer();\n    gl.bindFramebuffer(_ol_webgl_.FRAMEBUFFER, framebuffer);\n    gl.framebufferTexture2D(_ol_webgl_.FRAMEBUFFER,\n        _ol_webgl_.COLOR_ATTACHMENT0, _ol_webgl_.TEXTURE_2D, texture, 0);\n\n    this.texture = texture;\n    this.framebuffer = framebuffer;\n    this.framebufferDimension = framebufferDimension;\n\n  } else {\n    gl.bindFramebuffer(_ol_webgl_.FRAMEBUFFER, this.framebuffer);\n  }\n\n};\n\n\n/**\n * @param {olx.FrameState} frameState Frame state.\n * @param {ol.LayerState} layerState Layer state.\n * @param {ol.webgl.Context} context Context.\n */\n_ol_renderer_webgl_Layer_.prototype.composeFrame = function(frameState, layerState, context) {\n\n  this.dispatchComposeEvent_(\n      _ol_render_EventType_.PRECOMPOSE, context, frameState);\n\n  context.bindBuffer(_ol_webgl_.ARRAY_BUFFER, this.arrayBuffer_);\n\n  var gl = context.getGL();\n\n  var fragmentShader = _ol_renderer_webgl_defaultmapshader_.fragment;\n  var vertexShader = _ol_renderer_webgl_defaultmapshader_.vertex;\n\n  var program = context.getProgram(fragmentShader, vertexShader);\n\n  var locations;\n  if (!this.defaultLocations_) {\n    locations = new _ol_renderer_webgl_defaultmapshader_Locations_(gl, program);\n    this.defaultLocations_ = locations;\n  } else {\n    locations = this.defaultLocations_;\n  }\n\n  if (context.useProgram(program)) {\n    gl.enableVertexAttribArray(locations.a_position);\n    gl.vertexAttribPointer(\n        locations.a_position, 2, _ol_webgl_.FLOAT, false, 16, 0);\n    gl.enableVertexAttribArray(locations.a_texCoord);\n    gl.vertexAttribPointer(\n        locations.a_texCoord, 2, _ol_webgl_.FLOAT, false, 16, 8);\n    gl.uniform1i(locations.u_texture, 0);\n  }\n\n  gl.uniformMatrix4fv(locations.u_texCoordMatrix, false,\n      _ol_vec_Mat4_.fromTransform(this.tmpMat4_, this.getTexCoordMatrix()));\n  gl.uniformMatrix4fv(locations.u_projectionMatrix, false,\n      _ol_vec_Mat4_.fromTransform(this.tmpMat4_, this.getProjectionMatrix()));\n  gl.uniform1f(locations.u_opacity, layerState.opacity);\n  gl.bindTexture(_ol_webgl_.TEXTURE_2D, this.getTexture());\n  gl.drawArrays(_ol_webgl_.TRIANGLE_STRIP, 0, 4);\n\n  this.dispatchComposeEvent_(\n      _ol_render_EventType_.POSTCOMPOSE, context, frameState);\n\n};\n\n\n/**\n * @param {ol.render.EventType} type Event type.\n * @param {ol.webgl.Context} context WebGL context.\n * @param {olx.FrameState} frameState Frame state.\n * @private\n */\n_ol_renderer_webgl_Layer_.prototype.dispatchComposeEvent_ = function(type, context, frameState) {\n  var layer = this.getLayer();\n  if (layer.hasListener(type)) {\n    var viewState = frameState.viewState;\n    var resolution = viewState.resolution;\n    var pixelRatio = frameState.pixelRatio;\n    var extent = frameState.extent;\n    var center = viewState.center;\n    var rotation = viewState.rotation;\n    var size = frameState.size;\n\n    var render = new _ol_render_webgl_Immediate_(\n        context, center, resolution, rotation, size, extent, pixelRatio);\n    var composeEvent = new _ol_render_Event_(\n        type, render, frameState, null, context);\n    layer.dispatchEvent(composeEvent);\n  }\n};\n\n\n/**\n * @return {!ol.Transform} Matrix.\n */\n_ol_renderer_webgl_Layer_.prototype.getTexCoordMatrix = function() {\n  return this.texCoordMatrix;\n};\n\n\n/**\n * @return {WebGLTexture} Texture.\n */\n_ol_renderer_webgl_Layer_.prototype.getTexture = function() {\n  return this.texture;\n};\n\n\n/**\n * @return {!ol.Transform} Matrix.\n */\n_ol_renderer_webgl_Layer_.prototype.getProjectionMatrix = function() {\n  return this.projectionMatrix;\n};\n\n\n/**\n * Handle webglcontextlost.\n */\n_ol_renderer_webgl_Layer_.prototype.handleWebGLContextLost = function() {\n  this.texture = null;\n  this.framebuffer = null;\n  this.framebufferDimension = undefined;\n};\n\n\n/**\n * @abstract\n * @param {olx.FrameState} frameState Frame state.\n * @param {ol.LayerState} layerState Layer state.\n * @param {ol.webgl.Context} context Context.\n * @return {boolean} whether composeFrame should be called.\n */\n_ol_renderer_webgl_Layer_.prototype.prepareFrame = function(frameState, layerState, context) {};\n\n\n/**\n * @abstract\n * @param {ol.Pixel} pixel Pixel.\n * @param {olx.FrameState} frameState FrameState.\n * @param {function(this: S, ol.layer.Layer, (Uint8ClampedArray|Uint8Array)): T} callback Layer\n *     callback.\n * @param {S} thisArg Value to use as `this` when executing `callback`.\n * @return {T|undefined} Callback result.\n * @template S,T,U\n */\n_ol_renderer_webgl_Layer_.prototype.forEachLayerAtPixel = function(pixel, frameState, callback, thisArg) {};\nexport default _ol_renderer_webgl_Layer_;\n","import _ol_ from '../../index.js';\nimport _ol_LayerType_ from '../../layertype.js';\nimport _ol_ViewHint_ from '../../viewhint.js';\nimport _ol_dom_ from '../../dom.js';\nimport _ol_extent_ from '../../extent.js';\nimport _ol_functions_ from '../../functions.js';\nimport _ol_renderer_Type_ from '../type.js';\nimport _ol_renderer_webgl_Layer_ from '../webgl/layer.js';\nimport _ol_transform_ from '../../transform.js';\nimport _ol_webgl_ from '../../webgl.js';\nimport _ol_webgl_Context_ from '../../webgl/context.js';\n\n/**\n * @constructor\n * @extends {ol.renderer.webgl.Layer}\n * @param {ol.renderer.webgl.Map} mapRenderer Map renderer.\n * @param {ol.layer.Image} imageLayer Tile layer.\n * @api\n */\nvar _ol_renderer_webgl_ImageLayer_ = function(mapRenderer, imageLayer) {\n\n  _ol_renderer_webgl_Layer_.call(this, mapRenderer, imageLayer);\n\n  /**\n   * The last rendered image.\n   * @private\n   * @type {?ol.ImageBase}\n   */\n  this.image_ = null;\n\n  /**\n   * @private\n   * @type {CanvasRenderingContext2D}\n   */\n  this.hitCanvasContext_ = null;\n\n  /**\n   * @private\n   * @type {?ol.Transform}\n   */\n  this.hitTransformationMatrix_ = null;\n\n};\n\n_ol_.inherits(_ol_renderer_webgl_ImageLayer_, _ol_renderer_webgl_Layer_);\n\n\n/**\n * Determine if this renderer handles the provided layer.\n * @param {ol.renderer.Type} type The renderer type.\n * @param {ol.layer.Layer} layer The candidate layer.\n * @return {boolean} The renderer can render the layer.\n */\n_ol_renderer_webgl_ImageLayer_['handles'] = function(type, layer) {\n  return type === _ol_renderer_Type_.WEBGL && layer.getType() === _ol_LayerType_.IMAGE;\n};\n\n\n/**\n * Create a layer renderer.\n * @param {ol.renderer.Map} mapRenderer The map renderer.\n * @param {ol.layer.Layer} layer The layer to be rendererd.\n * @return {ol.renderer.webgl.ImageLayer} The layer renderer.\n */\n_ol_renderer_webgl_ImageLayer_['create'] = function(mapRenderer, layer) {\n  return new _ol_renderer_webgl_ImageLayer_(\n      /** @type {ol.renderer.webgl.Map} */ (mapRenderer),\n      /** @type {ol.layer.Image} */ (layer)\n  );\n};\n\n\n/**\n * @param {ol.ImageBase} image Image.\n * @private\n * @return {WebGLTexture} Texture.\n */\n_ol_renderer_webgl_ImageLayer_.prototype.createTexture_ = function(image) {\n\n  // We meet the conditions to work with non-power of two textures.\n  // http://www.khronos.org/webgl/wiki/WebGL_and_OpenGL_Differences#Non-Power_of_Two_Texture_Support\n  // http://learningwebgl.com/blog/?p=2101\n\n  var imageElement = image.getImage();\n  var gl = this.mapRenderer.getGL();\n\n  return _ol_webgl_Context_.createTexture(\n      gl, imageElement, _ol_webgl_.CLAMP_TO_EDGE, _ol_webgl_.CLAMP_TO_EDGE);\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_renderer_webgl_ImageLayer_.prototype.forEachFeatureAtCoordinate = function(coordinate, frameState, hitTolerance, callback, thisArg) {\n  var layer = this.getLayer();\n  var source = layer.getSource();\n  var resolution = frameState.viewState.resolution;\n  var rotation = frameState.viewState.rotation;\n  var skippedFeatureUids = frameState.skippedFeatureUids;\n  return source.forEachFeatureAtCoordinate(\n      coordinate, resolution, rotation, hitTolerance, skippedFeatureUids,\n\n      /**\n       * @param {ol.Feature|ol.render.Feature} feature Feature.\n       * @return {?} Callback result.\n       */\n      function(feature) {\n        return callback.call(thisArg, feature, layer);\n      });\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_renderer_webgl_ImageLayer_.prototype.prepareFrame = function(frameState, layerState, context) {\n\n  var gl = this.mapRenderer.getGL();\n\n  var pixelRatio = frameState.pixelRatio;\n  var viewState = frameState.viewState;\n  var viewCenter = viewState.center;\n  var viewResolution = viewState.resolution;\n  var viewRotation = viewState.rotation;\n\n  var image = this.image_;\n  var texture = this.texture;\n  var imageLayer = /** @type {ol.layer.Image} */ (this.getLayer());\n  var imageSource = imageLayer.getSource();\n\n  var hints = frameState.viewHints;\n\n  var renderedExtent = frameState.extent;\n  if (layerState.extent !== undefined) {\n    renderedExtent = _ol_extent_.getIntersection(\n        renderedExtent, layerState.extent);\n  }\n  if (!hints[_ol_ViewHint_.ANIMATING] && !hints[_ol_ViewHint_.INTERACTING] &&\n      !_ol_extent_.isEmpty(renderedExtent)) {\n    var projection = viewState.projection;\n    if (!_ol_.ENABLE_RASTER_REPROJECTION) {\n      var sourceProjection = imageSource.getProjection();\n      if (sourceProjection) {\n        projection = sourceProjection;\n      }\n    }\n    var image_ = imageSource.getImage(renderedExtent, viewResolution,\n        pixelRatio, projection);\n    if (image_) {\n      var loaded = this.loadImage(image_);\n      if (loaded) {\n        image = image_;\n        texture = this.createTexture_(image_);\n        if (this.texture) {\n          /**\n           * @param {WebGLRenderingContext} gl GL.\n           * @param {WebGLTexture} texture Texture.\n           */\n          var postRenderFunction = function(gl, texture) {\n            if (!gl.isContextLost()) {\n              gl.deleteTexture(texture);\n            }\n          }.bind(null, gl, this.texture);\n          frameState.postRenderFunctions.push(\n              /** @type {ol.PostRenderFunction} */ (postRenderFunction)\n          );\n        }\n      }\n    }\n  }\n\n  if (image) {\n    var canvas = this.mapRenderer.getContext().getCanvas();\n\n    this.updateProjectionMatrix_(canvas.width, canvas.height,\n        pixelRatio, viewCenter, viewResolution, viewRotation,\n        image.getExtent());\n    this.hitTransformationMatrix_ = null;\n\n    // Translate and scale to flip the Y coord.\n    var texCoordMatrix = this.texCoordMatrix;\n    _ol_transform_.reset(texCoordMatrix);\n    _ol_transform_.scale(texCoordMatrix, 1, -1);\n    _ol_transform_.translate(texCoordMatrix, 0, -1);\n\n    this.image_ = image;\n    this.texture = texture;\n\n    this.updateLogos(frameState, imageSource);\n  }\n\n  return !!image;\n};\n\n\n/**\n * @param {number} canvasWidth Canvas width.\n * @param {number} canvasHeight Canvas height.\n * @param {number} pixelRatio Pixel ratio.\n * @param {ol.Coordinate} viewCenter View center.\n * @param {number} viewResolution View resolution.\n * @param {number} viewRotation View rotation.\n * @param {ol.Extent} imageExtent Image extent.\n * @private\n */\n_ol_renderer_webgl_ImageLayer_.prototype.updateProjectionMatrix_ = function(canvasWidth, canvasHeight, pixelRatio,\n    viewCenter, viewResolution, viewRotation, imageExtent) {\n\n  var canvasExtentWidth = canvasWidth * viewResolution;\n  var canvasExtentHeight = canvasHeight * viewResolution;\n\n  var projectionMatrix = this.projectionMatrix;\n  _ol_transform_.reset(projectionMatrix);\n  _ol_transform_.scale(projectionMatrix,\n      pixelRatio * 2 / canvasExtentWidth,\n      pixelRatio * 2 / canvasExtentHeight);\n  _ol_transform_.rotate(projectionMatrix, -viewRotation);\n  _ol_transform_.translate(projectionMatrix,\n      imageExtent[0] - viewCenter[0],\n      imageExtent[1] - viewCenter[1]);\n  _ol_transform_.scale(projectionMatrix,\n      (imageExtent[2] - imageExtent[0]) / 2,\n      (imageExtent[3] - imageExtent[1]) / 2);\n  _ol_transform_.translate(projectionMatrix, 1, 1);\n\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_renderer_webgl_ImageLayer_.prototype.hasFeatureAtCoordinate = function(coordinate, frameState) {\n  var hasFeature = this.forEachFeatureAtCoordinate(\n      coordinate, frameState, 0, _ol_functions_.TRUE, this);\n  return hasFeature !== undefined;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_renderer_webgl_ImageLayer_.prototype.forEachLayerAtPixel = function(pixel, frameState, callback, thisArg) {\n  if (!this.image_ || !this.image_.getImage()) {\n    return undefined;\n  }\n\n  if (this.getLayer().getSource().forEachFeatureAtCoordinate !== _ol_.nullFunction) {\n    // for ImageCanvas sources use the original hit-detection logic,\n    // so that for example also transparent polygons are detected\n    var coordinate = _ol_transform_.apply(\n        frameState.pixelToCoordinateTransform, pixel.slice());\n    var hasFeature = this.forEachFeatureAtCoordinate(\n        coordinate, frameState, 0, _ol_functions_.TRUE, this);\n\n    if (hasFeature) {\n      return callback.call(thisArg, this.getLayer(), null);\n    } else {\n      return undefined;\n    }\n  } else {\n    var imageSize =\n        [this.image_.getImage().width, this.image_.getImage().height];\n\n    if (!this.hitTransformationMatrix_) {\n      this.hitTransformationMatrix_ = this.getHitTransformationMatrix_(\n          frameState.size, imageSize);\n    }\n\n    var pixelOnFrameBuffer = _ol_transform_.apply(\n        this.hitTransformationMatrix_, pixel.slice());\n\n    if (pixelOnFrameBuffer[0] < 0 || pixelOnFrameBuffer[0] > imageSize[0] ||\n        pixelOnFrameBuffer[1] < 0 || pixelOnFrameBuffer[1] > imageSize[1]) {\n      // outside the image, no need to check\n      return undefined;\n    }\n\n    if (!this.hitCanvasContext_) {\n      this.hitCanvasContext_ = _ol_dom_.createCanvasContext2D(1, 1);\n    }\n\n    this.hitCanvasContext_.clearRect(0, 0, 1, 1);\n    this.hitCanvasContext_.drawImage(this.image_.getImage(),\n        pixelOnFrameBuffer[0], pixelOnFrameBuffer[1], 1, 1, 0, 0, 1, 1);\n\n    var imageData = this.hitCanvasContext_.getImageData(0, 0, 1, 1).data;\n    if (imageData[3] > 0) {\n      return callback.call(thisArg, this.getLayer(),  imageData);\n    } else {\n      return undefined;\n    }\n  }\n};\n\n\n/**\n * The transformation matrix to get the pixel on the image for a\n * pixel on the map.\n * @param {ol.Size} mapSize The map size.\n * @param {ol.Size} imageSize The image size.\n * @return {ol.Transform} The transformation matrix.\n * @private\n */\n_ol_renderer_webgl_ImageLayer_.prototype.getHitTransformationMatrix_ = function(mapSize, imageSize) {\n  // the first matrix takes a map pixel, flips the y-axis and scales to\n  // a range between -1 ... 1\n  var mapCoordTransform = _ol_transform_.create();\n  _ol_transform_.translate(mapCoordTransform, -1, -1);\n  _ol_transform_.scale(mapCoordTransform, 2 / mapSize[0], 2 / mapSize[1]);\n  _ol_transform_.translate(mapCoordTransform, 0, mapSize[1]);\n  _ol_transform_.scale(mapCoordTransform, 1, -1);\n\n  // the second matrix is the inverse of the projection matrix used in the\n  // shader for drawing\n  var projectionMatrixInv = _ol_transform_.invert(this.projectionMatrix.slice());\n\n  // the third matrix scales to the image dimensions and flips the y-axis again\n  var transform = _ol_transform_.create();\n  _ol_transform_.translate(transform, 0, imageSize[1]);\n  _ol_transform_.scale(transform, 1, -1);\n  _ol_transform_.scale(transform, imageSize[0] / 2, imageSize[1] / 2);\n  _ol_transform_.translate(transform, 1, 1);\n\n  _ol_transform_.multiply(transform, projectionMatrixInv);\n  _ol_transform_.multiply(transform, mapCoordTransform);\n\n  return transform;\n};\nexport default _ol_renderer_webgl_ImageLayer_;\n","// FIXME check against gl.getParameter(webgl.MAX_TEXTURE_SIZE)\n\nimport _ol_ from '../../index.js';\nimport _ol_array_ from '../../array.js';\nimport _ol_css_ from '../../css.js';\nimport _ol_dom_ from '../../dom.js';\nimport _ol_events_ from '../../events.js';\nimport _ol_has_ from '../../has.js';\nimport _ol_layer_Layer_ from '../../layer/layer.js';\nimport _ol_render_Event_ from '../../render/event.js';\nimport _ol_render_EventType_ from '../../render/eventtype.js';\nimport _ol_render_webgl_Immediate_ from '../../render/webgl/immediate.js';\nimport _ol_renderer_Map_ from '../map.js';\nimport _ol_renderer_Type_ from '../type.js';\nimport _ol_source_State_ from '../../source/state.js';\nimport _ol_structs_LRUCache_ from '../../structs/lrucache.js';\nimport _ol_structs_PriorityQueue_ from '../../structs/priorityqueue.js';\nimport _ol_webgl_ from '../../webgl.js';\nimport _ol_webgl_Context_ from '../../webgl/context.js';\nimport _ol_webgl_ContextEventType_ from '../../webgl/contexteventtype.js';\n\n/**\n * @constructor\n * @extends {ol.renderer.Map}\n * @param {Element} container Container.\n * @param {ol.PluggableMap} map Map.\n * @api\n */\nvar _ol_renderer_webgl_Map_ = function(container, map) {\n  _ol_renderer_Map_.call(this, container, map);\n\n  /**\n   * @private\n   * @type {HTMLCanvasElement}\n   */\n  this.canvas_ = /** @type {HTMLCanvasElement} */\n    (document.createElement('CANVAS'));\n  this.canvas_.style.width = '100%';\n  this.canvas_.style.height = '100%';\n  this.canvas_.style.display = 'block';\n  this.canvas_.className = _ol_css_.CLASS_UNSELECTABLE;\n  container.insertBefore(this.canvas_, container.childNodes[0] || null);\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.clipTileCanvasWidth_ = 0;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.clipTileCanvasHeight_ = 0;\n\n  /**\n   * @private\n   * @type {CanvasRenderingContext2D}\n   */\n  this.clipTileContext_ = _ol_dom_.createCanvasContext2D();\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.renderedVisible_ = true;\n\n  /**\n   * @private\n   * @type {WebGLRenderingContext}\n   */\n  this.gl_ = _ol_webgl_.getContext(this.canvas_, {\n    antialias: true,\n    depth: true,\n    failIfMajorPerformanceCaveat: true,\n    preserveDrawingBuffer: false,\n    stencil: true\n  });\n\n  /**\n   * @private\n   * @type {ol.webgl.Context}\n   */\n  this.context_ = new _ol_webgl_Context_(this.canvas_, this.gl_);\n\n  _ol_events_.listen(this.canvas_, _ol_webgl_ContextEventType_.LOST,\n      this.handleWebGLContextLost, this);\n  _ol_events_.listen(this.canvas_, _ol_webgl_ContextEventType_.RESTORED,\n      this.handleWebGLContextRestored, this);\n\n  /**\n   * @private\n   * @type {ol.structs.LRUCache.<ol.WebglTextureCacheEntry|null>}\n   */\n  this.textureCache_ = new _ol_structs_LRUCache_();\n\n  /**\n   * @private\n   * @type {ol.Coordinate}\n   */\n  this.focus_ = null;\n\n  /**\n   * @private\n   * @type {ol.structs.PriorityQueue.<Array>}\n   */\n  this.tileTextureQueue_ = new _ol_structs_PriorityQueue_(\n      /**\n       * @param {Array.<*>} element Element.\n       * @return {number} Priority.\n       * @this {ol.renderer.webgl.Map}\n       */\n      (function(element) {\n        var tileCenter = /** @type {ol.Coordinate} */ (element[1]);\n        var tileResolution = /** @type {number} */ (element[2]);\n        var deltaX = tileCenter[0] - this.focus_[0];\n        var deltaY = tileCenter[1] - this.focus_[1];\n        return 65536 * Math.log(tileResolution) +\n            Math.sqrt(deltaX * deltaX + deltaY * deltaY) / tileResolution;\n      }).bind(this),\n      /**\n       * @param {Array.<*>} element Element.\n       * @return {string} Key.\n       */\n      function(element) {\n        return /** @type {ol.Tile} */ (element[0]).getKey();\n      });\n\n\n  /**\n   * @param {ol.PluggableMap} map Map.\n   * @param {?olx.FrameState} frameState Frame state.\n   * @return {boolean} false.\n   * @this {ol.renderer.webgl.Map}\n   */\n  this.loadNextTileTexture_ =\n      function(map, frameState) {\n        if (!this.tileTextureQueue_.isEmpty()) {\n          this.tileTextureQueue_.reprioritize();\n          var element = this.tileTextureQueue_.dequeue();\n          var tile = /** @type {ol.Tile} */ (element[0]);\n          var tileSize = /** @type {ol.Size} */ (element[3]);\n          var tileGutter = /** @type {number} */ (element[4]);\n          this.bindTileTexture(\n              tile, tileSize, tileGutter, _ol_webgl_.LINEAR, _ol_webgl_.LINEAR);\n        }\n        return false;\n      }.bind(this);\n\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.textureCacheFrameMarkerCount_ = 0;\n\n  this.initializeGL_();\n};\n\n_ol_.inherits(_ol_renderer_webgl_Map_, _ol_renderer_Map_);\n\n\n/**\n * Determine if this renderer handles the provided layer.\n * @param {ol.renderer.Type} type The renderer type.\n * @return {boolean} The renderer can render the layer.\n */\n_ol_renderer_webgl_Map_['handles'] = function(type) {\n  return _ol_has_.WEBGL && type === _ol_renderer_Type_.WEBGL;\n};\n\n\n/**\n * Create the map renderer.\n * @param {Element} container Container.\n * @param {ol.PluggableMap} map Map.\n * @return {ol.renderer.webgl.Map} The map renderer.\n */\n_ol_renderer_webgl_Map_['create'] = function(container, map) {\n  return new _ol_renderer_webgl_Map_(container, map);\n};\n\n\n/**\n * @param {ol.Tile} tile Tile.\n * @param {ol.Size} tileSize Tile size.\n * @param {number} tileGutter Tile gutter.\n * @param {number} magFilter Mag filter.\n * @param {number} minFilter Min filter.\n */\n_ol_renderer_webgl_Map_.prototype.bindTileTexture = function(tile, tileSize, tileGutter, magFilter, minFilter) {\n  var gl = this.getGL();\n  var tileKey = tile.getKey();\n  if (this.textureCache_.containsKey(tileKey)) {\n    var textureCacheEntry = this.textureCache_.get(tileKey);\n    gl.bindTexture(_ol_webgl_.TEXTURE_2D, textureCacheEntry.texture);\n    if (textureCacheEntry.magFilter != magFilter) {\n      gl.texParameteri(\n          _ol_webgl_.TEXTURE_2D, _ol_webgl_.TEXTURE_MAG_FILTER, magFilter);\n      textureCacheEntry.magFilter = magFilter;\n    }\n    if (textureCacheEntry.minFilter != minFilter) {\n      gl.texParameteri(\n          _ol_webgl_.TEXTURE_2D, _ol_webgl_.TEXTURE_MIN_FILTER, minFilter);\n      textureCacheEntry.minFilter = minFilter;\n    }\n  } else {\n    var texture = gl.createTexture();\n    gl.bindTexture(_ol_webgl_.TEXTURE_2D, texture);\n    if (tileGutter > 0) {\n      var clipTileCanvas = this.clipTileContext_.canvas;\n      var clipTileContext = this.clipTileContext_;\n      if (this.clipTileCanvasWidth_ !== tileSize[0] ||\n          this.clipTileCanvasHeight_ !== tileSize[1]) {\n        clipTileCanvas.width = tileSize[0];\n        clipTileCanvas.height = tileSize[1];\n        this.clipTileCanvasWidth_ = tileSize[0];\n        this.clipTileCanvasHeight_ = tileSize[1];\n      } else {\n        clipTileContext.clearRect(0, 0, tileSize[0], tileSize[1]);\n      }\n      clipTileContext.drawImage(tile.getImage(), tileGutter, tileGutter,\n          tileSize[0], tileSize[1], 0, 0, tileSize[0], tileSize[1]);\n      gl.texImage2D(_ol_webgl_.TEXTURE_2D, 0,\n          _ol_webgl_.RGBA, _ol_webgl_.RGBA,\n          _ol_webgl_.UNSIGNED_BYTE, clipTileCanvas);\n    } else {\n      gl.texImage2D(_ol_webgl_.TEXTURE_2D, 0,\n          _ol_webgl_.RGBA, _ol_webgl_.RGBA,\n          _ol_webgl_.UNSIGNED_BYTE, tile.getImage());\n    }\n    gl.texParameteri(\n        _ol_webgl_.TEXTURE_2D, _ol_webgl_.TEXTURE_MAG_FILTER, magFilter);\n    gl.texParameteri(\n        _ol_webgl_.TEXTURE_2D, _ol_webgl_.TEXTURE_MIN_FILTER, minFilter);\n    gl.texParameteri(_ol_webgl_.TEXTURE_2D, _ol_webgl_.TEXTURE_WRAP_S,\n        _ol_webgl_.CLAMP_TO_EDGE);\n    gl.texParameteri(_ol_webgl_.TEXTURE_2D, _ol_webgl_.TEXTURE_WRAP_T,\n        _ol_webgl_.CLAMP_TO_EDGE);\n    this.textureCache_.set(tileKey, {\n      texture: texture,\n      magFilter: magFilter,\n      minFilter: minFilter\n    });\n  }\n};\n\n\n/**\n * @param {ol.render.EventType} type Event type.\n * @param {olx.FrameState} frameState Frame state.\n * @private\n */\n_ol_renderer_webgl_Map_.prototype.dispatchComposeEvent_ = function(type, frameState) {\n  var map = this.getMap();\n  if (map.hasListener(type)) {\n    var context = this.context_;\n\n    var extent = frameState.extent;\n    var size = frameState.size;\n    var viewState = frameState.viewState;\n    var pixelRatio = frameState.pixelRatio;\n\n    var resolution = viewState.resolution;\n    var center = viewState.center;\n    var rotation = viewState.rotation;\n\n    var vectorContext = new _ol_render_webgl_Immediate_(context,\n        center, resolution, rotation, size, extent, pixelRatio);\n    var composeEvent = new _ol_render_Event_(type, vectorContext,\n        frameState, null, context);\n    map.dispatchEvent(composeEvent);\n  }\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_renderer_webgl_Map_.prototype.disposeInternal = function() {\n  var gl = this.getGL();\n  if (!gl.isContextLost()) {\n    this.textureCache_.forEach(\n        /**\n         * @param {?ol.WebglTextureCacheEntry} textureCacheEntry\n         *     Texture cache entry.\n         */\n        function(textureCacheEntry) {\n          if (textureCacheEntry) {\n            gl.deleteTexture(textureCacheEntry.texture);\n          }\n        });\n  }\n  this.context_.dispose();\n  _ol_renderer_Map_.prototype.disposeInternal.call(this);\n};\n\n\n/**\n * @param {ol.PluggableMap} map Map.\n * @param {olx.FrameState} frameState Frame state.\n * @private\n */\n_ol_renderer_webgl_Map_.prototype.expireCache_ = function(map, frameState) {\n  var gl = this.getGL();\n  var textureCacheEntry;\n  while (this.textureCache_.getCount() - this.textureCacheFrameMarkerCount_ >\n      _ol_.WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK) {\n    textureCacheEntry = this.textureCache_.peekLast();\n    if (!textureCacheEntry) {\n      if (+this.textureCache_.peekLastKey() == frameState.index) {\n        break;\n      } else {\n        --this.textureCacheFrameMarkerCount_;\n      }\n    } else {\n      gl.deleteTexture(textureCacheEntry.texture);\n    }\n    this.textureCache_.pop();\n  }\n};\n\n\n/**\n * @return {ol.webgl.Context} The context.\n */\n_ol_renderer_webgl_Map_.prototype.getContext = function() {\n  return this.context_;\n};\n\n\n/**\n * @return {WebGLRenderingContext} GL.\n */\n_ol_renderer_webgl_Map_.prototype.getGL = function() {\n  return this.gl_;\n};\n\n\n/**\n * @return {ol.structs.PriorityQueue.<Array>} Tile texture queue.\n */\n_ol_renderer_webgl_Map_.prototype.getTileTextureQueue = function() {\n  return this.tileTextureQueue_;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_renderer_webgl_Map_.prototype.getType = function() {\n  return _ol_renderer_Type_.WEBGL;\n};\n\n\n/**\n * @param {ol.events.Event} event Event.\n * @protected\n */\n_ol_renderer_webgl_Map_.prototype.handleWebGLContextLost = function(event) {\n  event.preventDefault();\n  this.textureCache_.clear();\n  this.textureCacheFrameMarkerCount_ = 0;\n\n  var renderers = this.getLayerRenderers();\n  for (var id in renderers) {\n    var renderer = /** @type {ol.renderer.webgl.Layer} */ (renderers[id]);\n    renderer.handleWebGLContextLost();\n  }\n};\n\n\n/**\n * @protected\n */\n_ol_renderer_webgl_Map_.prototype.handleWebGLContextRestored = function() {\n  this.initializeGL_();\n  this.getMap().render();\n};\n\n\n/**\n * @private\n */\n_ol_renderer_webgl_Map_.prototype.initializeGL_ = function() {\n  var gl = this.gl_;\n  gl.activeTexture(_ol_webgl_.TEXTURE0);\n  gl.blendFuncSeparate(\n      _ol_webgl_.SRC_ALPHA, _ol_webgl_.ONE_MINUS_SRC_ALPHA,\n      _ol_webgl_.ONE, _ol_webgl_.ONE_MINUS_SRC_ALPHA);\n  gl.disable(_ol_webgl_.CULL_FACE);\n  gl.disable(_ol_webgl_.DEPTH_TEST);\n  gl.disable(_ol_webgl_.SCISSOR_TEST);\n  gl.disable(_ol_webgl_.STENCIL_TEST);\n};\n\n\n/**\n * @param {ol.Tile} tile Tile.\n * @return {boolean} Is tile texture loaded.\n */\n_ol_renderer_webgl_Map_.prototype.isTileTextureLoaded = function(tile) {\n  return this.textureCache_.containsKey(tile.getKey());\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_renderer_webgl_Map_.prototype.renderFrame = function(frameState) {\n\n  var context = this.getContext();\n  var gl = this.getGL();\n\n  if (gl.isContextLost()) {\n    return false;\n  }\n\n  if (!frameState) {\n    if (this.renderedVisible_) {\n      this.canvas_.style.display = 'none';\n      this.renderedVisible_ = false;\n    }\n    return false;\n  }\n\n  this.focus_ = frameState.focus;\n\n  this.textureCache_.set((-frameState.index).toString(), null);\n  ++this.textureCacheFrameMarkerCount_;\n\n  this.dispatchComposeEvent_(_ol_render_EventType_.PRECOMPOSE, frameState);\n\n  /** @type {Array.<ol.LayerState>} */\n  var layerStatesToDraw = [];\n  var layerStatesArray = frameState.layerStatesArray;\n  _ol_array_.stableSort(layerStatesArray, _ol_renderer_Map_.sortByZIndex);\n\n  var viewResolution = frameState.viewState.resolution;\n  var i, ii, layerRenderer, layerState;\n  for (i = 0, ii = layerStatesArray.length; i < ii; ++i) {\n    layerState = layerStatesArray[i];\n    if (_ol_layer_Layer_.visibleAtResolution(layerState, viewResolution) &&\n        layerState.sourceState == _ol_source_State_.READY) {\n      layerRenderer = /** @type {ol.renderer.webgl.Layer} */ (this.getLayerRenderer(layerState.layer));\n      if (layerRenderer.prepareFrame(frameState, layerState, context)) {\n        layerStatesToDraw.push(layerState);\n      }\n    }\n  }\n\n  var width = frameState.size[0] * frameState.pixelRatio;\n  var height = frameState.size[1] * frameState.pixelRatio;\n  if (this.canvas_.width != width || this.canvas_.height != height) {\n    this.canvas_.width = width;\n    this.canvas_.height = height;\n  }\n\n  gl.bindFramebuffer(_ol_webgl_.FRAMEBUFFER, null);\n\n  gl.clearColor(0, 0, 0, 0);\n  gl.clear(_ol_webgl_.COLOR_BUFFER_BIT);\n  gl.enable(_ol_webgl_.BLEND);\n  gl.viewport(0, 0, this.canvas_.width, this.canvas_.height);\n\n  for (i = 0, ii = layerStatesToDraw.length; i < ii; ++i) {\n    layerState = layerStatesToDraw[i];\n    layerRenderer = /** @type {ol.renderer.webgl.Layer} */ (this.getLayerRenderer(layerState.layer));\n    layerRenderer.composeFrame(frameState, layerState, context);\n  }\n\n  if (!this.renderedVisible_) {\n    this.canvas_.style.display = '';\n    this.renderedVisible_ = true;\n  }\n\n  this.calculateMatrices2D(frameState);\n\n  if (this.textureCache_.getCount() - this.textureCacheFrameMarkerCount_ >\n      _ol_.WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK) {\n    frameState.postRenderFunctions.push(\n        /** @type {ol.PostRenderFunction} */ (this.expireCache_.bind(this))\n    );\n  }\n\n  if (!this.tileTextureQueue_.isEmpty()) {\n    frameState.postRenderFunctions.push(this.loadNextTileTexture_);\n    frameState.animate = true;\n  }\n\n  this.dispatchComposeEvent_(_ol_render_EventType_.POSTCOMPOSE, frameState);\n\n  this.scheduleRemoveUnusedLayerRenderers(frameState);\n  this.scheduleExpireIconCache(frameState);\n\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_renderer_webgl_Map_.prototype.forEachFeatureAtCoordinate = function(coordinate, frameState, hitTolerance, callback, thisArg,\n    layerFilter, thisArg2) {\n  var result;\n\n  if (this.getGL().isContextLost()) {\n    return false;\n  }\n\n  var viewState = frameState.viewState;\n\n  var layerStates = frameState.layerStatesArray;\n  var numLayers = layerStates.length;\n  var i;\n  for (i = numLayers - 1; i >= 0; --i) {\n    var layerState = layerStates[i];\n    var layer = layerState.layer;\n    if (_ol_layer_Layer_.visibleAtResolution(layerState, viewState.resolution) &&\n        layerFilter.call(thisArg2, layer)) {\n      var layerRenderer = this.getLayerRenderer(layer);\n      result = layerRenderer.forEachFeatureAtCoordinate(\n          coordinate, frameState, hitTolerance, callback, thisArg);\n      if (result) {\n        return result;\n      }\n    }\n  }\n  return undefined;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_renderer_webgl_Map_.prototype.hasFeatureAtCoordinate = function(coordinate, frameState, hitTolerance, layerFilter, thisArg) {\n  var hasFeature = false;\n\n  if (this.getGL().isContextLost()) {\n    return false;\n  }\n\n  var viewState = frameState.viewState;\n\n  var layerStates = frameState.layerStatesArray;\n  var numLayers = layerStates.length;\n  var i;\n  for (i = numLayers - 1; i >= 0; --i) {\n    var layerState = layerStates[i];\n    var layer = layerState.layer;\n    if (_ol_layer_Layer_.visibleAtResolution(layerState, viewState.resolution) &&\n        layerFilter.call(thisArg, layer)) {\n      var layerRenderer = this.getLayerRenderer(layer);\n      hasFeature =\n          layerRenderer.hasFeatureAtCoordinate(coordinate, frameState);\n      if (hasFeature) {\n        return true;\n      }\n    }\n  }\n  return hasFeature;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_renderer_webgl_Map_.prototype.forEachLayerAtPixel = function(pixel, frameState, callback, thisArg,\n    layerFilter, thisArg2) {\n  if (this.getGL().isContextLost()) {\n    return false;\n  }\n\n  var viewState = frameState.viewState;\n  var result;\n\n  var layerStates = frameState.layerStatesArray;\n  var numLayers = layerStates.length;\n  var i;\n  for (i = numLayers - 1; i >= 0; --i) {\n    var layerState = layerStates[i];\n    var layer = layerState.layer;\n    if (_ol_layer_Layer_.visibleAtResolution(layerState, viewState.resolution) &&\n        layerFilter.call(thisArg, layer)) {\n      var layerRenderer = /** @type {ol.renderer.webgl.Layer} */ (this.getLayerRenderer(layer));\n      result = layerRenderer.forEachLayerAtPixel(\n          pixel, frameState, callback, thisArg);\n      if (result) {\n        return result;\n      }\n    }\n  }\n  return undefined;\n};\nexport default _ol_renderer_webgl_Map_;","// This file is automatically generated, do not edit\nimport _ol_ from '../../index.js';\nimport _ol_webgl_Fragment_ from '../../webgl/fragment.js';\nimport _ol_webgl_Vertex_ from '../../webgl/vertex.js';\nvar _ol_renderer_webgl_tilelayershader_ = {};\n\n\n_ol_renderer_webgl_tilelayershader_.fragment = new _ol_webgl_Fragment_(_ol_.DEBUG_WEBGL ?\n  'precision mediump float;\\nvarying vec2 v_texCoord;\\n\\n\\nuniform sampler2D u_texture;\\n\\nvoid main(void) {\\n  gl_FragColor = texture2D(u_texture, v_texCoord);\\n}\\n' :\n  'precision mediump float;varying vec2 a;uniform sampler2D e;void main(void){gl_FragColor=texture2D(e,a);}');\n\n_ol_renderer_webgl_tilelayershader_.vertex = new _ol_webgl_Vertex_(_ol_.DEBUG_WEBGL ?\n  'varying vec2 v_texCoord;\\n\\n\\nattribute vec2 a_position;\\nattribute vec2 a_texCoord;\\nuniform vec4 u_tileOffset;\\n\\nvoid main(void) {\\n  gl_Position = vec4(a_position * u_tileOffset.xy + u_tileOffset.zw, 0., 1.);\\n  v_texCoord = a_texCoord;\\n}\\n\\n\\n' :\n  'varying vec2 a;attribute vec2 b;attribute vec2 c;uniform vec4 d;void main(void){gl_Position=vec4(b*d.xy+d.zw,0.,1.);a=c;}');\nexport default _ol_renderer_webgl_tilelayershader_;","// This file is automatically generated, do not edit\nimport _ol_ from '../../../index.js';\n\n/**\n * @constructor\n * @param {WebGLRenderingContext} gl GL.\n * @param {WebGLProgram} program Program.\n * @struct\n */\nvar _ol_renderer_webgl_tilelayershader_Locations_ = function(gl, program) {\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_tileOffset = gl.getUniformLocation(\n      program, _ol_.DEBUG_WEBGL ? 'u_tileOffset' : 'd');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_texture = gl.getUniformLocation(\n      program, _ol_.DEBUG_WEBGL ? 'u_texture' : 'e');\n\n  /**\n   * @type {number}\n   */\n  this.a_position = gl.getAttribLocation(\n      program, _ol_.DEBUG_WEBGL ? 'a_position' : 'b');\n\n  /**\n   * @type {number}\n   */\n  this.a_texCoord = gl.getAttribLocation(\n      program, _ol_.DEBUG_WEBGL ? 'a_texCoord' : 'c');\n};\n\nexport default _ol_renderer_webgl_tilelayershader_Locations_;","// FIXME large resolutions lead to too large framebuffers :-(\n// FIXME animated shaders! check in redraw\n\nimport _ol_ from '../../index.js';\nimport _ol_LayerType_ from '../../layertype.js';\nimport _ol_TileRange_ from '../../tilerange.js';\nimport _ol_TileState_ from '../../tilestate.js';\nimport _ol_array_ from '../../array.js';\nimport _ol_extent_ from '../../extent.js';\nimport _ol_math_ from '../../math.js';\nimport _ol_renderer_Type_ from '../type.js';\nimport _ol_renderer_webgl_Layer_ from '../webgl/layer.js';\nimport _ol_renderer_webgl_tilelayershader_ from '../webgl/tilelayershader.js';\nimport _ol_renderer_webgl_tilelayershader_Locations_ from '../webgl/tilelayershader/locations.js';\nimport _ol_size_ from '../../size.js';\nimport _ol_transform_ from '../../transform.js';\nimport _ol_webgl_ from '../../webgl.js';\nimport _ol_webgl_Buffer_ from '../../webgl/buffer.js';\n\n/**\n * @constructor\n * @extends {ol.renderer.webgl.Layer}\n * @param {ol.renderer.webgl.Map} mapRenderer Map renderer.\n * @param {ol.layer.Tile} tileLayer Tile layer.\n * @api\n */\nvar _ol_renderer_webgl_TileLayer_ = function(mapRenderer, tileLayer) {\n\n  _ol_renderer_webgl_Layer_.call(this, mapRenderer, tileLayer);\n\n  /**\n   * @private\n   * @type {ol.webgl.Fragment}\n   */\n  this.fragmentShader_ = _ol_renderer_webgl_tilelayershader_.fragment;\n\n  /**\n   * @private\n   * @type {ol.webgl.Vertex}\n   */\n  this.vertexShader_ = _ol_renderer_webgl_tilelayershader_.vertex;\n\n  /**\n   * @private\n   * @type {ol.renderer.webgl.tilelayershader.Locations}\n   */\n  this.locations_ = null;\n\n  /**\n   * @private\n   * @type {ol.webgl.Buffer}\n   */\n  this.renderArrayBuffer_ = new _ol_webgl_Buffer_([\n    0, 0, 0, 1,\n    1, 0, 1, 1,\n    0, 1, 0, 0,\n    1, 1, 1, 0\n  ]);\n\n  /**\n   * @private\n   * @type {ol.TileRange}\n   */\n  this.renderedTileRange_ = null;\n\n  /**\n   * @private\n   * @type {ol.Extent}\n   */\n  this.renderedFramebufferExtent_ = null;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.renderedRevision_ = -1;\n\n  /**\n   * @private\n   * @type {ol.Size}\n   */\n  this.tmpSize_ = [0, 0];\n\n};\n\n_ol_.inherits(_ol_renderer_webgl_TileLayer_, _ol_renderer_webgl_Layer_);\n\n\n/**\n * Determine if this renderer handles the provided layer.\n * @param {ol.renderer.Type} type The renderer type.\n * @param {ol.layer.Layer} layer The candidate layer.\n * @return {boolean} The renderer can render the layer.\n */\n_ol_renderer_webgl_TileLayer_['handles'] = function(type, layer) {\n  return type === _ol_renderer_Type_.WEBGL && layer.getType() === _ol_LayerType_.TILE;\n};\n\n\n/**\n * Create a layer renderer.\n * @param {ol.renderer.Map} mapRenderer The map renderer.\n * @param {ol.layer.Layer} layer The layer to be rendererd.\n * @return {ol.renderer.webgl.TileLayer} The layer renderer.\n */\n_ol_renderer_webgl_TileLayer_['create'] = function(mapRenderer, layer) {\n  return new _ol_renderer_webgl_TileLayer_(\n      /** @type {ol.renderer.webgl.Map} */ (mapRenderer),\n      /** @type {ol.layer.Tile} */ (layer)\n  );\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_renderer_webgl_TileLayer_.prototype.disposeInternal = function() {\n  var context = this.mapRenderer.getContext();\n  context.deleteBuffer(this.renderArrayBuffer_);\n  _ol_renderer_webgl_Layer_.prototype.disposeInternal.call(this);\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_renderer_webgl_TileLayer_.prototype.createLoadedTileFinder = function(source, projection, tiles) {\n  var mapRenderer = this.mapRenderer;\n\n  return (\n    /**\n     * @param {number} zoom Zoom level.\n     * @param {ol.TileRange} tileRange Tile range.\n     * @return {boolean} The tile range is fully loaded.\n     */\n    function(zoom, tileRange) {\n      function callback(tile) {\n        var loaded = mapRenderer.isTileTextureLoaded(tile);\n        if (loaded) {\n          if (!tiles[zoom]) {\n            tiles[zoom] = {};\n          }\n          tiles[zoom][tile.tileCoord.toString()] = tile;\n        }\n        return loaded;\n      }\n      return source.forEachLoadedTile(projection, zoom, tileRange, callback);\n    });\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_renderer_webgl_TileLayer_.prototype.handleWebGLContextLost = function() {\n  _ol_renderer_webgl_Layer_.prototype.handleWebGLContextLost.call(this);\n  this.locations_ = null;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_renderer_webgl_TileLayer_.prototype.prepareFrame = function(frameState, layerState, context) {\n\n  var mapRenderer = this.mapRenderer;\n  var gl = context.getGL();\n\n  var viewState = frameState.viewState;\n  var projection = viewState.projection;\n\n  var tileLayer = /** @type {ol.layer.Tile} */ (this.getLayer());\n  var tileSource = tileLayer.getSource();\n  var tileGrid = tileSource.getTileGridForProjection(projection);\n  var z = tileGrid.getZForResolution(viewState.resolution);\n  var tileResolution = tileGrid.getResolution(z);\n\n  var tilePixelSize =\n      tileSource.getTilePixelSize(z, frameState.pixelRatio, projection);\n  var pixelRatio = tilePixelSize[0] /\n      _ol_size_.toSize(tileGrid.getTileSize(z), this.tmpSize_)[0];\n  var tilePixelResolution = tileResolution / pixelRatio;\n  var tileGutter = tileSource.getTilePixelRatio(pixelRatio) * tileSource.getGutter(projection);\n\n  var center = viewState.center;\n  var extent = frameState.extent;\n  var tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z);\n\n  var framebufferExtent;\n  if (this.renderedTileRange_ &&\n      this.renderedTileRange_.equals(tileRange) &&\n      this.renderedRevision_ == tileSource.getRevision()) {\n    framebufferExtent = this.renderedFramebufferExtent_;\n  } else {\n\n    var tileRangeSize = tileRange.getSize();\n\n    var maxDimension = Math.max(\n        tileRangeSize[0] * tilePixelSize[0],\n        tileRangeSize[1] * tilePixelSize[1]);\n    var framebufferDimension = _ol_math_.roundUpToPowerOfTwo(maxDimension);\n    var framebufferExtentDimension = tilePixelResolution * framebufferDimension;\n    var origin = tileGrid.getOrigin(z);\n    var minX = origin[0] +\n        tileRange.minX * tilePixelSize[0] * tilePixelResolution;\n    var minY = origin[1] +\n        tileRange.minY * tilePixelSize[1] * tilePixelResolution;\n    framebufferExtent = [\n      minX, minY,\n      minX + framebufferExtentDimension, minY + framebufferExtentDimension\n    ];\n\n    this.bindFramebuffer(frameState, framebufferDimension);\n    gl.viewport(0, 0, framebufferDimension, framebufferDimension);\n\n    gl.clearColor(0, 0, 0, 0);\n    gl.clear(_ol_webgl_.COLOR_BUFFER_BIT);\n    gl.disable(_ol_webgl_.BLEND);\n\n    var program = context.getProgram(this.fragmentShader_, this.vertexShader_);\n    context.useProgram(program);\n    if (!this.locations_) {\n      this.locations_ = new _ol_renderer_webgl_tilelayershader_Locations_(gl, program);\n    }\n\n    context.bindBuffer(_ol_webgl_.ARRAY_BUFFER, this.renderArrayBuffer_);\n    gl.enableVertexAttribArray(this.locations_.a_position);\n    gl.vertexAttribPointer(\n        this.locations_.a_position, 2, _ol_webgl_.FLOAT, false, 16, 0);\n    gl.enableVertexAttribArray(this.locations_.a_texCoord);\n    gl.vertexAttribPointer(\n        this.locations_.a_texCoord, 2, _ol_webgl_.FLOAT, false, 16, 8);\n    gl.uniform1i(this.locations_.u_texture, 0);\n\n    /**\n     * @type {Object.<number, Object.<string, ol.Tile>>}\n     */\n    var tilesToDrawByZ = {};\n    tilesToDrawByZ[z] = {};\n\n    var findLoadedTiles = this.createLoadedTileFinder(\n        tileSource, projection, tilesToDrawByZ);\n\n    var useInterimTilesOnError = tileLayer.getUseInterimTilesOnError();\n    var allTilesLoaded = true;\n    var tmpExtent = _ol_extent_.createEmpty();\n    var tmpTileRange = new _ol_TileRange_(0, 0, 0, 0);\n    var childTileRange, drawable, fullyLoaded, tile, tileState;\n    var x, y, tileExtent;\n    for (x = tileRange.minX; x <= tileRange.maxX; ++x) {\n      for (y = tileRange.minY; y <= tileRange.maxY; ++y) {\n\n        tile = tileSource.getTile(z, x, y, pixelRatio, projection);\n        if (layerState.extent !== undefined) {\n          // ignore tiles outside layer extent\n          tileExtent = tileGrid.getTileCoordExtent(tile.tileCoord, tmpExtent);\n          if (!_ol_extent_.intersects(tileExtent, layerState.extent)) {\n            continue;\n          }\n        }\n        tileState = tile.getState();\n        drawable = tileState == _ol_TileState_.LOADED ||\n            tileState == _ol_TileState_.EMPTY ||\n            tileState == _ol_TileState_.ERROR && !useInterimTilesOnError;\n        if (!drawable) {\n          tile = tile.getInterimTile();\n        }\n        tileState = tile.getState();\n        if (tileState == _ol_TileState_.LOADED) {\n          if (mapRenderer.isTileTextureLoaded(tile)) {\n            tilesToDrawByZ[z][tile.tileCoord.toString()] = tile;\n            continue;\n          }\n        } else if (tileState == _ol_TileState_.EMPTY ||\n                   (tileState == _ol_TileState_.ERROR &&\n                    !useInterimTilesOnError)) {\n          continue;\n        }\n\n        allTilesLoaded = false;\n        fullyLoaded = tileGrid.forEachTileCoordParentTileRange(\n            tile.tileCoord, findLoadedTiles, null, tmpTileRange, tmpExtent);\n        if (!fullyLoaded) {\n          childTileRange = tileGrid.getTileCoordChildTileRange(\n              tile.tileCoord, tmpTileRange, tmpExtent);\n          if (childTileRange) {\n            findLoadedTiles(z + 1, childTileRange);\n          }\n        }\n\n      }\n\n    }\n\n    /** @type {Array.<number>} */\n    var zs = Object.keys(tilesToDrawByZ).map(Number);\n    zs.sort(_ol_array_.numberSafeCompareFunction);\n    var u_tileOffset = new Float32Array(4);\n    var i, ii, tileKey, tilesToDraw;\n    for (i = 0, ii = zs.length; i < ii; ++i) {\n      tilesToDraw = tilesToDrawByZ[zs[i]];\n      for (tileKey in tilesToDraw) {\n        tile = tilesToDraw[tileKey];\n        tileExtent = tileGrid.getTileCoordExtent(tile.tileCoord, tmpExtent);\n        u_tileOffset[0] = 2 * (tileExtent[2] - tileExtent[0]) /\n            framebufferExtentDimension;\n        u_tileOffset[1] = 2 * (tileExtent[3] - tileExtent[1]) /\n            framebufferExtentDimension;\n        u_tileOffset[2] = 2 * (tileExtent[0] - framebufferExtent[0]) /\n            framebufferExtentDimension - 1;\n        u_tileOffset[3] = 2 * (tileExtent[1] - framebufferExtent[1]) /\n            framebufferExtentDimension - 1;\n        gl.uniform4fv(this.locations_.u_tileOffset, u_tileOffset);\n        mapRenderer.bindTileTexture(tile, tilePixelSize,\n            tileGutter * pixelRatio, _ol_webgl_.LINEAR, _ol_webgl_.LINEAR);\n        gl.drawArrays(_ol_webgl_.TRIANGLE_STRIP, 0, 4);\n      }\n    }\n\n    if (allTilesLoaded) {\n      this.renderedTileRange_ = tileRange;\n      this.renderedFramebufferExtent_ = framebufferExtent;\n      this.renderedRevision_ = tileSource.getRevision();\n    } else {\n      this.renderedTileRange_ = null;\n      this.renderedFramebufferExtent_ = null;\n      this.renderedRevision_ = -1;\n      frameState.animate = true;\n    }\n\n  }\n\n  this.updateUsedTiles(frameState.usedTiles, tileSource, z, tileRange);\n  var tileTextureQueue = mapRenderer.getTileTextureQueue();\n  this.manageTilePyramid(\n      frameState, tileSource, tileGrid, pixelRatio, projection, extent, z,\n      tileLayer.getPreload(),\n      /**\n       * @param {ol.Tile} tile Tile.\n       */\n      function(tile) {\n        if (tile.getState() == _ol_TileState_.LOADED &&\n            !mapRenderer.isTileTextureLoaded(tile) &&\n            !tileTextureQueue.isKeyQueued(tile.getKey())) {\n          tileTextureQueue.enqueue([\n            tile,\n            tileGrid.getTileCoordCenter(tile.tileCoord),\n            tileGrid.getResolution(tile.tileCoord[0]),\n            tilePixelSize, tileGutter * pixelRatio\n          ]);\n        }\n      }, this);\n  this.scheduleExpireCache(frameState, tileSource);\n  this.updateLogos(frameState, tileSource);\n\n  var texCoordMatrix = this.texCoordMatrix;\n  _ol_transform_.reset(texCoordMatrix);\n  _ol_transform_.translate(texCoordMatrix,\n      (Math.round(center[0] / tileResolution) * tileResolution - framebufferExtent[0]) /\n          (framebufferExtent[2] - framebufferExtent[0]),\n      (Math.round(center[1] / tileResolution) * tileResolution - framebufferExtent[1]) /\n          (framebufferExtent[3] - framebufferExtent[1]));\n  if (viewState.rotation !== 0) {\n    _ol_transform_.rotate(texCoordMatrix, viewState.rotation);\n  }\n  _ol_transform_.scale(texCoordMatrix,\n      frameState.size[0] * viewState.resolution /\n          (framebufferExtent[2] - framebufferExtent[0]),\n      frameState.size[1] * viewState.resolution /\n          (framebufferExtent[3] - framebufferExtent[1]));\n  _ol_transform_.translate(texCoordMatrix, -0.5, -0.5);\n\n  return true;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_renderer_webgl_TileLayer_.prototype.forEachLayerAtPixel = function(pixel, frameState, callback, thisArg) {\n  if (!this.framebuffer) {\n    return undefined;\n  }\n\n  var pixelOnMapScaled = [\n    pixel[0] / frameState.size[0],\n    (frameState.size[1] - pixel[1]) / frameState.size[1]];\n\n  var pixelOnFrameBufferScaled = _ol_transform_.apply(\n      this.texCoordMatrix, pixelOnMapScaled.slice());\n  var pixelOnFrameBuffer = [\n    pixelOnFrameBufferScaled[0] * this.framebufferDimension,\n    pixelOnFrameBufferScaled[1] * this.framebufferDimension];\n\n  var gl = this.mapRenderer.getContext().getGL();\n  gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer);\n  var imageData = new Uint8Array(4);\n  gl.readPixels(pixelOnFrameBuffer[0], pixelOnFrameBuffer[1], 1, 1,\n      gl.RGBA, gl.UNSIGNED_BYTE, imageData);\n\n  if (imageData[3] > 0) {\n    return callback.call(thisArg, this.getLayer(), imageData);\n  } else {\n    return undefined;\n  }\n};\nexport default _ol_renderer_webgl_TileLayer_;","import _ol_ from '../../index.js';\nimport _ol_LayerType_ from '../../layertype.js';\nimport _ol_ViewHint_ from '../../viewhint.js';\nimport _ol_extent_ from '../../extent.js';\nimport _ol_render_webgl_ReplayGroup_ from '../../render/webgl/replaygroup.js';\nimport _ol_renderer_Type_ from '../type.js';\nimport _ol_renderer_vector_ from '../vector.js';\nimport _ol_renderer_webgl_Layer_ from '../webgl/layer.js';\nimport _ol_transform_ from '../../transform.js';\n\n/**\n * @constructor\n * @extends {ol.renderer.webgl.Layer}\n * @param {ol.renderer.webgl.Map} mapRenderer Map renderer.\n * @param {ol.layer.Vector} vectorLayer Vector layer.\n * @api\n */\nvar _ol_renderer_webgl_VectorLayer_ = function(mapRenderer, vectorLayer) {\n\n  _ol_renderer_webgl_Layer_.call(this, mapRenderer, vectorLayer);\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.dirty_ = false;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.renderedRevision_ = -1;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.renderedResolution_ = NaN;\n\n  /**\n   * @private\n   * @type {ol.Extent}\n   */\n  this.renderedExtent_ = _ol_extent_.createEmpty();\n\n  /**\n   * @private\n   * @type {function(ol.Feature, ol.Feature): number|null}\n   */\n  this.renderedRenderOrder_ = null;\n\n  /**\n   * @private\n   * @type {ol.render.webgl.ReplayGroup}\n   */\n  this.replayGroup_ = null;\n\n  /**\n   * The last layer state.\n   * @private\n   * @type {?ol.LayerState}\n   */\n  this.layerState_ = null;\n\n};\n\n_ol_.inherits(_ol_renderer_webgl_VectorLayer_, _ol_renderer_webgl_Layer_);\n\n\n/**\n * Determine if this renderer handles the provided layer.\n * @param {ol.renderer.Type} type The renderer type.\n * @param {ol.layer.Layer} layer The candidate layer.\n * @return {boolean} The renderer can render the layer.\n */\n_ol_renderer_webgl_VectorLayer_['handles'] = function(type, layer) {\n  return type === _ol_renderer_Type_.WEBGL && layer.getType() === _ol_LayerType_.VECTOR;\n};\n\n\n/**\n * Create a layer renderer.\n * @param {ol.renderer.Map} mapRenderer The map renderer.\n * @param {ol.layer.Layer} layer The layer to be rendererd.\n * @return {ol.renderer.webgl.VectorLayer} The layer renderer.\n */\n_ol_renderer_webgl_VectorLayer_['create'] = function(mapRenderer, layer) {\n  return new _ol_renderer_webgl_VectorLayer_(\n      /** @type {ol.renderer.webgl.Map} */ (mapRenderer),\n      /** @type {ol.layer.Vector} */ (layer)\n  );\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_renderer_webgl_VectorLayer_.prototype.composeFrame = function(frameState, layerState, context) {\n  this.layerState_ = layerState;\n  var viewState = frameState.viewState;\n  var replayGroup = this.replayGroup_;\n  var size = frameState.size;\n  var pixelRatio = frameState.pixelRatio;\n  var gl = this.mapRenderer.getGL();\n  if (replayGroup && !replayGroup.isEmpty()) {\n    gl.enable(gl.SCISSOR_TEST);\n    gl.scissor(0, 0, size[0] * pixelRatio, size[1] * pixelRatio);\n    replayGroup.replay(context,\n        viewState.center, viewState.resolution, viewState.rotation,\n        size, pixelRatio, layerState.opacity,\n        layerState.managed ? frameState.skippedFeatureUids : {});\n    gl.disable(gl.SCISSOR_TEST);\n  }\n\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_renderer_webgl_VectorLayer_.prototype.disposeInternal = function() {\n  var replayGroup = this.replayGroup_;\n  if (replayGroup) {\n    var context = this.mapRenderer.getContext();\n    replayGroup.getDeleteResourcesFunction(context)();\n    this.replayGroup_ = null;\n  }\n  _ol_renderer_webgl_Layer_.prototype.disposeInternal.call(this);\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_renderer_webgl_VectorLayer_.prototype.forEachFeatureAtCoordinate = function(coordinate, frameState, hitTolerance, callback, thisArg) {\n  if (!this.replayGroup_ || !this.layerState_) {\n    return undefined;\n  } else {\n    var context = this.mapRenderer.getContext();\n    var viewState = frameState.viewState;\n    var layer = this.getLayer();\n    var layerState = this.layerState_;\n    /** @type {Object.<string, boolean>} */\n    var features = {};\n    return this.replayGroup_.forEachFeatureAtCoordinate(coordinate,\n        context, viewState.center, viewState.resolution, viewState.rotation,\n        frameState.size, frameState.pixelRatio, layerState.opacity,\n        {},\n        /**\n         * @param {ol.Feature|ol.render.Feature} feature Feature.\n         * @return {?} Callback result.\n         */\n        function(feature) {\n          var key = _ol_.getUid(feature).toString();\n          if (!(key in features)) {\n            features[key] = true;\n            return callback.call(thisArg, feature, layer);\n          }\n        });\n  }\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_renderer_webgl_VectorLayer_.prototype.hasFeatureAtCoordinate = function(coordinate, frameState) {\n  if (!this.replayGroup_ || !this.layerState_) {\n    return false;\n  } else {\n    var context = this.mapRenderer.getContext();\n    var viewState = frameState.viewState;\n    var layerState = this.layerState_;\n    return this.replayGroup_.hasFeatureAtCoordinate(coordinate,\n        context, viewState.center, viewState.resolution, viewState.rotation,\n        frameState.size, frameState.pixelRatio, layerState.opacity,\n        frameState.skippedFeatureUids);\n  }\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_renderer_webgl_VectorLayer_.prototype.forEachLayerAtPixel = function(pixel, frameState, callback, thisArg) {\n  var coordinate = _ol_transform_.apply(\n      frameState.pixelToCoordinateTransform, pixel.slice());\n  var hasFeature = this.hasFeatureAtCoordinate(coordinate, frameState);\n\n  if (hasFeature) {\n    return callback.call(thisArg, this.getLayer(), null);\n  } else {\n    return undefined;\n  }\n};\n\n\n/**\n * Handle changes in image style state.\n * @param {ol.events.Event} event Image style change event.\n * @private\n */\n_ol_renderer_webgl_VectorLayer_.prototype.handleStyleImageChange_ = function(event) {\n  this.renderIfReadyAndVisible();\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_renderer_webgl_VectorLayer_.prototype.prepareFrame = function(frameState, layerState, context) {\n\n  var vectorLayer = /** @type {ol.layer.Vector} */ (this.getLayer());\n  var vectorSource = vectorLayer.getSource();\n\n  this.updateLogos(frameState, vectorSource);\n\n  var animating = frameState.viewHints[_ol_ViewHint_.ANIMATING];\n  var interacting = frameState.viewHints[_ol_ViewHint_.INTERACTING];\n  var updateWhileAnimating = vectorLayer.getUpdateWhileAnimating();\n  var updateWhileInteracting = vectorLayer.getUpdateWhileInteracting();\n\n  if (!this.dirty_ && (!updateWhileAnimating && animating) ||\n      (!updateWhileInteracting && interacting)) {\n    return true;\n  }\n\n  var frameStateExtent = frameState.extent;\n  var viewState = frameState.viewState;\n  var projection = viewState.projection;\n  var resolution = viewState.resolution;\n  var pixelRatio = frameState.pixelRatio;\n  var vectorLayerRevision = vectorLayer.getRevision();\n  var vectorLayerRenderBuffer = vectorLayer.getRenderBuffer();\n  var vectorLayerRenderOrder = vectorLayer.getRenderOrder();\n\n  if (vectorLayerRenderOrder === undefined) {\n    vectorLayerRenderOrder = _ol_renderer_vector_.defaultOrder;\n  }\n\n  var extent = _ol_extent_.buffer(frameStateExtent,\n      vectorLayerRenderBuffer * resolution);\n\n  if (!this.dirty_ &&\n      this.renderedResolution_ == resolution &&\n      this.renderedRevision_ == vectorLayerRevision &&\n      this.renderedRenderOrder_ == vectorLayerRenderOrder &&\n      _ol_extent_.containsExtent(this.renderedExtent_, extent)) {\n    return true;\n  }\n\n  if (this.replayGroup_) {\n    frameState.postRenderFunctions.push(\n        this.replayGroup_.getDeleteResourcesFunction(context));\n  }\n\n  this.dirty_ = false;\n\n  var replayGroup = new _ol_render_webgl_ReplayGroup_(\n      _ol_renderer_vector_.getTolerance(resolution, pixelRatio),\n      extent, vectorLayer.getRenderBuffer());\n  vectorSource.loadFeatures(extent, resolution, projection);\n  /**\n   * @param {ol.Feature} feature Feature.\n   * @this {ol.renderer.webgl.VectorLayer}\n   */\n  var renderFeature = function(feature) {\n    var styles;\n    var styleFunction = feature.getStyleFunction();\n    if (styleFunction) {\n      styles = styleFunction.call(feature, resolution);\n    } else {\n      styleFunction = vectorLayer.getStyleFunction();\n      if (styleFunction) {\n        styles = styleFunction(feature, resolution);\n      }\n    }\n    if (styles) {\n      var dirty = this.renderFeature(\n          feature, resolution, pixelRatio, styles, replayGroup);\n      this.dirty_ = this.dirty_ || dirty;\n    }\n  };\n  if (vectorLayerRenderOrder) {\n    /** @type {Array.<ol.Feature>} */\n    var features = [];\n    vectorSource.forEachFeatureInExtent(extent,\n        /**\n         * @param {ol.Feature} feature Feature.\n         */\n        function(feature) {\n          features.push(feature);\n        }, this);\n    features.sort(vectorLayerRenderOrder);\n    features.forEach(renderFeature, this);\n  } else {\n    vectorSource.forEachFeatureInExtent(extent, renderFeature, this);\n  }\n  replayGroup.finish(context);\n\n  this.renderedResolution_ = resolution;\n  this.renderedRevision_ = vectorLayerRevision;\n  this.renderedRenderOrder_ = vectorLayerRenderOrder;\n  this.renderedExtent_ = extent;\n  this.replayGroup_ = replayGroup;\n\n  return true;\n};\n\n\n/**\n * @param {ol.Feature} feature Feature.\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @param {(ol.style.Style|Array.<ol.style.Style>)} styles The style or array of\n *     styles.\n * @param {ol.render.webgl.ReplayGroup} replayGroup Replay group.\n * @return {boolean} `true` if an image is loading.\n */\n_ol_renderer_webgl_VectorLayer_.prototype.renderFeature = function(feature, resolution, pixelRatio, styles, replayGroup) {\n  if (!styles) {\n    return false;\n  }\n  var loading = false;\n  if (Array.isArray(styles)) {\n    for (var i = styles.length - 1, ii = 0; i >= ii; --i) {\n      loading = _ol_renderer_vector_.renderFeature(\n          replayGroup, feature, styles[i],\n          _ol_renderer_vector_.getSquaredTolerance(resolution, pixelRatio),\n          this.handleStyleImageChange_, this) || loading;\n    }\n  } else {\n    loading = _ol_renderer_vector_.renderFeature(\n        replayGroup, feature, styles,\n        _ol_renderer_vector_.getSquaredTolerance(resolution, pixelRatio),\n        this.handleStyleImageChange_, this) || loading;\n  }\n  return loading;\n};\nexport default _ol_renderer_webgl_VectorLayer_;\n","import _ol_ from './index.js';\nimport _ol_PluggableMap_ from './pluggablemap.js';\nimport _ol_PluginType_ from './plugintype.js';\nimport _ol_control_ from './control.js';\nimport _ol_interaction_ from './interaction.js';\nimport _ol_obj_ from './obj.js';\nimport _ol_plugins_ from './plugins.js';\nimport _ol_renderer_canvas_ImageLayer_ from './renderer/canvas/imagelayer.js';\nimport _ol_renderer_canvas_Map_ from './renderer/canvas/map.js';\nimport _ol_renderer_canvas_TileLayer_ from './renderer/canvas/tilelayer.js';\nimport _ol_renderer_canvas_VectorLayer_ from './renderer/canvas/vectorlayer.js';\nimport _ol_renderer_canvas_VectorTileLayer_ from './renderer/canvas/vectortilelayer.js';\nimport _ol_renderer_webgl_ImageLayer_ from './renderer/webgl/imagelayer.js';\nimport _ol_renderer_webgl_Map_ from './renderer/webgl/map.js';\nimport _ol_renderer_webgl_TileLayer_ from './renderer/webgl/tilelayer.js';\nimport _ol_renderer_webgl_VectorLayer_ from './renderer/webgl/vectorlayer.js';\n\n\nif (_ol_.ENABLE_CANVAS) {\n  _ol_plugins_.register(_ol_PluginType_.MAP_RENDERER, _ol_renderer_canvas_Map_);\n  _ol_plugins_.registerMultiple(_ol_PluginType_.LAYER_RENDERER, [\n    _ol_renderer_canvas_ImageLayer_,\n    _ol_renderer_canvas_TileLayer_,\n    _ol_renderer_canvas_VectorLayer_,\n    _ol_renderer_canvas_VectorTileLayer_\n  ]);\n}\n\nif (_ol_.ENABLE_WEBGL) {\n  _ol_plugins_.register(_ol_PluginType_.MAP_RENDERER, _ol_renderer_webgl_Map_);\n  _ol_plugins_.registerMultiple(_ol_PluginType_.LAYER_RENDERER, [\n    _ol_renderer_webgl_ImageLayer_,\n    _ol_renderer_webgl_TileLayer_,\n    _ol_renderer_webgl_VectorLayer_\n  ]);\n}\n\n\n/**\n * @classdesc\n * The map is the core component of OpenLayers. For a map to render, a view,\n * one or more layers, and a target container are needed:\n *\n *     var map = new ol.Map({\n *       view: new ol.View({\n *         center: [0, 0],\n *         zoom: 1\n *       }),\n *       layers: [\n *         new ol.layer.Tile({\n *           source: new ol.source.OSM()\n *         })\n *       ],\n *       target: 'map'\n *     });\n *\n * The above snippet creates a map using a {@link ol.layer.Tile} to display\n * {@link ol.source.OSM} OSM data and render it to a DOM element with the\n * id `map`.\n *\n * The constructor places a viewport container (with CSS class name\n * `ol-viewport`) in the target element (see `getViewport()`), and then two\n * further elements within the viewport: one with CSS class name\n * `ol-overlaycontainer-stopevent` for controls and some overlays, and one with\n * CSS class name `ol-overlaycontainer` for other overlays (see the `stopEvent`\n * option of {@link ol.Overlay} for the difference). The map itself is placed in\n * a further element within the viewport.\n *\n * Layers are stored as a `ol.Collection` in layerGroups. A top-level group is\n * provided by the library. This is what is accessed by `getLayerGroup` and\n * `setLayerGroup`. Layers entered in the options are added to this group, and\n * `addLayer` and `removeLayer` change the layer collection in the group.\n * `getLayers` is a convenience function for `getLayerGroup().getLayers()`.\n * Note that `ol.layer.Group` is a subclass of `ol.layer.Base`, so layers\n * entered in the options or added with `addLayer` can be groups, which can\n * contain further groups, and so on.\n *\n * @constructor\n * @extends {ol.PluggableMap}\n * @param {olx.MapOptions} options Map options.\n * @fires ol.MapBrowserEvent\n * @fires ol.MapEvent\n * @fires ol.render.Event#postcompose\n * @fires ol.render.Event#precompose\n * @api\n */\nvar _ol_Map_ = function(options) {\n  options = _ol_obj_.assign({}, options);\n  if (!options.controls) {\n    options.controls = _ol_control_.defaults();\n  }\n  if (!options.interactions) {\n    options.interactions = _ol_interaction_.defaults();\n  }\n\n  _ol_PluggableMap_.call(this, options);\n};\n\n_ol_.inherits(_ol_Map_, _ol_PluggableMap_);\nexport default _ol_Map_;\n","import _ol_asserts_ from './asserts.js';\nimport _ol_events_ from './events.js';\nimport _ol_events_EventType_ from './events/eventtype.js';\nimport _ol_ from './index.js';\nimport _ol_Object_ from './object.js';\nimport _ol_geom_Geometry_ from './geom/geometry.js';\nimport _ol_style_Style_ from './style/style.js';\n\n/**\n * @classdesc\n * A vector object for geographic features with a geometry and other\n * attribute properties, similar to the features in vector file formats like\n * GeoJSON.\n *\n * Features can be styled individually with `setStyle`; otherwise they use the\n * style of their vector layer.\n *\n * Note that attribute properties are set as {@link ol.Object} properties on\n * the feature object, so they are observable, and have get/set accessors.\n *\n * Typically, a feature has a single geometry property. You can set the\n * geometry using the `setGeometry` method and get it with `getGeometry`.\n * It is possible to store more than one geometry on a feature using attribute\n * properties. By default, the geometry used for rendering is identified by\n * the property name `geometry`. If you want to use another geometry property\n * for rendering, use the `setGeometryName` method to change the attribute\n * property associated with the geometry for the feature.  For example:\n *\n * ```js\n * var feature = new ol.Feature({\n *   geometry: new ol.geom.Polygon(polyCoords),\n *   labelPoint: new ol.geom.Point(labelCoords),\n *   name: 'My Polygon'\n * });\n *\n * // get the polygon geometry\n * var poly = feature.getGeometry();\n *\n * // Render the feature as a point using the coordinates from labelPoint\n * feature.setGeometryName('labelPoint');\n *\n * // get the point geometry\n * var point = feature.getGeometry();\n * ```\n *\n * @constructor\n * @extends {ol.Object}\n * @param {ol.geom.Geometry|Object.<string, *>=} opt_geometryOrProperties\n *     You may pass a Geometry object directly, or an object literal\n *     containing properties.  If you pass an object literal, you may\n *     include a Geometry associated with a `geometry` key.\n * @api\n */\nvar _ol_Feature_ = function(opt_geometryOrProperties) {\n\n  _ol_Object_.call(this);\n\n  /**\n   * @private\n   * @type {number|string|undefined}\n   */\n  this.id_ = undefined;\n\n  /**\n   * @type {string}\n   * @private\n   */\n  this.geometryName_ = 'geometry';\n\n  /**\n   * User provided style.\n   * @private\n   * @type {ol.style.Style|Array.<ol.style.Style>|\n   *     ol.FeatureStyleFunction}\n   */\n  this.style_ = null;\n\n  /**\n   * @private\n   * @type {ol.FeatureStyleFunction|undefined}\n   */\n  this.styleFunction_ = undefined;\n\n  /**\n   * @private\n   * @type {?ol.EventsKey}\n   */\n  this.geometryChangeKey_ = null;\n\n  _ol_events_.listen(\n      this, _ol_Object_.getChangeEventType(this.geometryName_),\n      this.handleGeometryChanged_, this);\n\n  if (opt_geometryOrProperties !== undefined) {\n    if (opt_geometryOrProperties instanceof _ol_geom_Geometry_ ||\n        !opt_geometryOrProperties) {\n      var geometry = opt_geometryOrProperties;\n      this.setGeometry(geometry);\n    } else {\n      /** @type {Object.<string, *>} */\n      var properties = opt_geometryOrProperties;\n      this.setProperties(properties);\n    }\n  }\n};\n\n_ol_.inherits(_ol_Feature_, _ol_Object_);\n\n\n/**\n * Clone this feature. If the original feature has a geometry it\n * is also cloned. The feature id is not set in the clone.\n * @return {ol.Feature} The clone.\n * @api\n */\n_ol_Feature_.prototype.clone = function() {\n  var clone = new _ol_Feature_(this.getProperties());\n  clone.setGeometryName(this.getGeometryName());\n  var geometry = this.getGeometry();\n  if (geometry) {\n    clone.setGeometry(geometry.clone());\n  }\n  var style = this.getStyle();\n  if (style) {\n    clone.setStyle(style);\n  }\n  return clone;\n};\n\n\n/**\n * Get the feature's default geometry.  A feature may have any number of named\n * geometries.  The \"default\" geometry (the one that is rendered by default) is\n * set when calling {@link ol.Feature#setGeometry}.\n * @return {ol.geom.Geometry|undefined} The default geometry for the feature.\n * @api\n * @observable\n */\n_ol_Feature_.prototype.getGeometry = function() {\n  return /** @type {ol.geom.Geometry|undefined} */ (\n    this.get(this.geometryName_));\n};\n\n\n/**\n * Get the feature identifier.  This is a stable identifier for the feature and\n * is either set when reading data from a remote source or set explicitly by\n * calling {@link ol.Feature#setId}.\n * @return {number|string|undefined} Id.\n * @api\n */\n_ol_Feature_.prototype.getId = function() {\n  return this.id_;\n};\n\n\n/**\n * Get the name of the feature's default geometry.  By default, the default\n * geometry is named `geometry`.\n * @return {string} Get the property name associated with the default geometry\n *     for this feature.\n * @api\n */\n_ol_Feature_.prototype.getGeometryName = function() {\n  return this.geometryName_;\n};\n\n\n/**\n * Get the feature's style. Will return what was provided to the\n * {@link ol.Feature#setStyle} method.\n * @return {ol.style.Style|Array.<ol.style.Style>|\n *     ol.FeatureStyleFunction|ol.StyleFunction} The feature style.\n * @api\n */\n_ol_Feature_.prototype.getStyle = function() {\n  return this.style_;\n};\n\n\n/**\n * Get the feature's style function.\n * @return {ol.FeatureStyleFunction|undefined} Return a function\n * representing the current style of this feature.\n * @api\n */\n_ol_Feature_.prototype.getStyleFunction = function() {\n  return this.styleFunction_;\n};\n\n\n/**\n * @private\n */\n_ol_Feature_.prototype.handleGeometryChange_ = function() {\n  this.changed();\n};\n\n\n/**\n * @private\n */\n_ol_Feature_.prototype.handleGeometryChanged_ = function() {\n  if (this.geometryChangeKey_) {\n    _ol_events_.unlistenByKey(this.geometryChangeKey_);\n    this.geometryChangeKey_ = null;\n  }\n  var geometry = this.getGeometry();\n  if (geometry) {\n    this.geometryChangeKey_ = _ol_events_.listen(geometry,\n        _ol_events_EventType_.CHANGE, this.handleGeometryChange_, this);\n  }\n  this.changed();\n};\n\n\n/**\n * Set the default geometry for the feature.  This will update the property\n * with the name returned by {@link ol.Feature#getGeometryName}.\n * @param {ol.geom.Geometry|undefined} geometry The new geometry.\n * @api\n * @observable\n */\n_ol_Feature_.prototype.setGeometry = function(geometry) {\n  this.set(this.geometryName_, geometry);\n};\n\n\n/**\n * Set the style for the feature.  This can be a single style object, an array\n * of styles, or a function that takes a resolution and returns an array of\n * styles. If it is `null` the feature has no style (a `null` style).\n * @param {ol.style.Style|Array.<ol.style.Style>|\n *     ol.FeatureStyleFunction|ol.StyleFunction} style Style for this feature.\n * @api\n * @fires ol.events.Event#event:change\n */\n_ol_Feature_.prototype.setStyle = function(style) {\n  this.style_ = style;\n  this.styleFunction_ = !style ?\n    undefined : _ol_Feature_.createStyleFunction(style);\n  this.changed();\n};\n\n\n/**\n * Set the feature id.  The feature id is considered stable and may be used when\n * requesting features or comparing identifiers returned from a remote source.\n * The feature id can be used with the {@link ol.source.Vector#getFeatureById}\n * method.\n * @param {number|string|undefined} id The feature id.\n * @api\n * @fires ol.events.Event#event:change\n */\n_ol_Feature_.prototype.setId = function(id) {\n  this.id_ = id;\n  this.changed();\n};\n\n\n/**\n * Set the property name to be used when getting the feature's default geometry.\n * When calling {@link ol.Feature#getGeometry}, the value of the property with\n * this name will be returned.\n * @param {string} name The property name of the default geometry.\n * @api\n */\n_ol_Feature_.prototype.setGeometryName = function(name) {\n  _ol_events_.unlisten(\n      this, _ol_Object_.getChangeEventType(this.geometryName_),\n      this.handleGeometryChanged_, this);\n  this.geometryName_ = name;\n  _ol_events_.listen(\n      this, _ol_Object_.getChangeEventType(this.geometryName_),\n      this.handleGeometryChanged_, this);\n  this.handleGeometryChanged_();\n};\n\n\n/**\n * Convert the provided object into a feature style function.  Functions passed\n * through unchanged.  Arrays of ol.style.Style or single style objects wrapped\n * in a new feature style function.\n * @param {ol.FeatureStyleFunction|!Array.<ol.style.Style>|!ol.style.Style} obj\n *     A feature style function, a single style, or an array of styles.\n * @return {ol.FeatureStyleFunction} A style function.\n */\n_ol_Feature_.createStyleFunction = function(obj) {\n  var styleFunction;\n\n  if (typeof obj === 'function') {\n    if (obj.length == 2) {\n      styleFunction = function(resolution) {\n        return /** @type {ol.StyleFunction} */ (obj)(this, resolution);\n      };\n    } else {\n      styleFunction = obj;\n    }\n  } else {\n    /**\n     * @type {Array.<ol.style.Style>}\n     */\n    var styles;\n    if (Array.isArray(obj)) {\n      styles = obj;\n    } else {\n      _ol_asserts_.assert(obj instanceof _ol_style_Style_,\n          41); // Expected an `ol.style.Style` or an array of `ol.style.Style`\n      styles = [obj];\n    }\n    styleFunction = function() {\n      return styles;\n    };\n  }\n  return styleFunction;\n};\nexport default _ol_Feature_;\n","var _ol_loadingstrategy_ = {};\n\n\n/**\n * Strategy function for loading all features with a single request.\n * @param {ol.Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @return {Array.<ol.Extent>} Extents.\n * @api\n */\n_ol_loadingstrategy_.all = function(extent, resolution) {\n  return [[-Infinity, -Infinity, Infinity, Infinity]];\n};\n\n\n/**\n * Strategy function for loading features based on the view's extent and\n * resolution.\n * @param {ol.Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @return {Array.<ol.Extent>} Extents.\n * @api\n */\n_ol_loadingstrategy_.bbox = function(extent, resolution) {\n  return [extent];\n};\n\n\n/**\n * Creates a strategy function for loading features based on a tile grid.\n * @param {ol.tilegrid.TileGrid} tileGrid Tile grid.\n * @return {function(ol.Extent, number): Array.<ol.Extent>} Loading strategy.\n * @api\n */\n_ol_loadingstrategy_.tile = function(tileGrid) {\n  return (\n  /**\n       * @param {ol.Extent} extent Extent.\n       * @param {number} resolution Resolution.\n       * @return {Array.<ol.Extent>} Extents.\n       */\n    function(extent, resolution) {\n      var z = tileGrid.getZForResolution(resolution);\n      var tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z);\n      /** @type {Array.<ol.Extent>} */\n      var extents = [];\n      /** @type {ol.TileCoord} */\n      var tileCoord = [z, 0, 0];\n      for (tileCoord[1] = tileRange.minX; tileCoord[1] <= tileRange.maxX;\n        ++tileCoord[1]) {\n        for (tileCoord[2] = tileRange.minY; tileCoord[2] <= tileRange.maxY;\n          ++tileCoord[2]) {\n          extents.push(tileGrid.getTileCoordExtent(tileCoord));\n        }\n      }\n      return extents;\n    });\n};\nexport default _ol_loadingstrategy_;\n","var _ol_geom_flat_length_ = {};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {number} Length.\n */\n_ol_geom_flat_length_.lineString = function(flatCoordinates, offset, end, stride) {\n  var x1 = flatCoordinates[offset];\n  var y1 = flatCoordinates[offset + 1];\n  var length = 0;\n  var i;\n  for (i = offset + stride; i < end; i += stride) {\n    var x2 = flatCoordinates[i];\n    var y2 = flatCoordinates[i + 1];\n    length += Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n    x1 = x2;\n    y1 = y2;\n  }\n  return length;\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {number} Perimeter.\n */\n_ol_geom_flat_length_.linearRing = function(flatCoordinates, offset, end, stride) {\n  var perimeter =\n      _ol_geom_flat_length_.lineString(flatCoordinates, offset, end, stride);\n  var dx = flatCoordinates[end - stride] - flatCoordinates[offset];\n  var dy = flatCoordinates[end - stride + 1] - flatCoordinates[offset + 1];\n  perimeter += Math.sqrt(dx * dx + dy * dy);\n  return perimeter;\n};\nexport default _ol_geom_flat_length_;\n","var _ol_geom_flat_segments_ = {};\n\n\n/**\n * This function calls `callback` for each segment of the flat coordinates\n * array. If the callback returns a truthy value the function returns that\n * value immediately. Otherwise the function returns `false`.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {function(this: S, ol.Coordinate, ol.Coordinate): T} callback Function\n *     called for each segment.\n * @param {S=} opt_this The object to be used as the value of 'this'\n *     within callback.\n * @return {T|boolean} Value.\n * @template T,S\n */\n_ol_geom_flat_segments_.forEach = function(flatCoordinates, offset, end, stride, callback, opt_this) {\n  var point1 = [flatCoordinates[offset], flatCoordinates[offset + 1]];\n  var point2 = [];\n  var ret;\n  for (; (offset + stride) < end; offset += stride) {\n    point2[0] = flatCoordinates[offset + stride];\n    point2[1] = flatCoordinates[offset + stride + 1];\n    ret = callback.call(opt_this, point1, point2);\n    if (ret) {\n      return ret;\n    }\n    point1[0] = point2[0];\n    point1[1] = point2[1];\n  }\n  return false;\n};\nexport default _ol_geom_flat_segments_;\n","import _ol_array_ from '../../array.js';\nimport _ol_geom_flat_contains_ from '../flat/contains.js';\nvar _ol_geom_flat_interiorpoint_ = {};\n\n\n/**\n * Calculates a point that is likely to lie in the interior of the linear rings.\n * Inspired by JTS's com.vividsolutions.jts.geom.Geometry#getInteriorPoint.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {Array.<number>} flatCenters Flat centers.\n * @param {number} flatCentersOffset Flat center offset.\n * @param {Array.<number>=} opt_dest Destination.\n * @return {Array.<number>} Destination point as XYM coordinate, where M is the\n * length of the horizontal intersection that the point belongs to.\n */\n_ol_geom_flat_interiorpoint_.linearRings = function(flatCoordinates, offset,\n    ends, stride, flatCenters, flatCentersOffset, opt_dest) {\n  var i, ii, x, x1, x2, y1, y2;\n  var y = flatCenters[flatCentersOffset + 1];\n  /** @type {Array.<number>} */\n  var intersections = [];\n  // Calculate intersections with the horizontal line\n  for (var r = 0, rr = ends.length; r < rr; ++r) {\n    var end = ends[r];\n    x1 = flatCoordinates[end - stride];\n    y1 = flatCoordinates[end - stride + 1];\n    for (i = offset; i < end; i += stride) {\n      x2 = flatCoordinates[i];\n      y2 = flatCoordinates[i + 1];\n      if ((y <= y1 && y2 <= y) || (y1 <= y && y <= y2)) {\n        x = (y - y1) / (y2 - y1) * (x2 - x1) + x1;\n        intersections.push(x);\n      }\n      x1 = x2;\n      y1 = y2;\n    }\n  }\n  // Find the longest segment of the horizontal line that has its center point\n  // inside the linear ring.\n  var pointX = NaN;\n  var maxSegmentLength = -Infinity;\n  intersections.sort(_ol_array_.numberSafeCompareFunction);\n  x1 = intersections[0];\n  for (i = 1, ii = intersections.length; i < ii; ++i) {\n    x2 = intersections[i];\n    var segmentLength = Math.abs(x2 - x1);\n    if (segmentLength > maxSegmentLength) {\n      x = (x1 + x2) / 2;\n      if (_ol_geom_flat_contains_.linearRingsContainsXY(\n          flatCoordinates, offset, ends, stride, x, y)) {\n        pointX = x;\n        maxSegmentLength = segmentLength;\n      }\n    }\n    x1 = x2;\n  }\n  if (isNaN(pointX)) {\n    // There is no horizontal line that has its center point inside the linear\n    // ring.  Use the center of the the linear ring's extent.\n    pointX = flatCenters[flatCentersOffset];\n  }\n  if (opt_dest) {\n    opt_dest.push(pointX, y, maxSegmentLength);\n    return opt_dest;\n  } else {\n    return [pointX, y, maxSegmentLength];\n  }\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<Array.<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {Array.<number>} flatCenters Flat centers.\n * @return {Array.<number>} Interior points as XYM coordinates, where M is the\n * length of the horizontal intersection that the point belongs to.\n */\n_ol_geom_flat_interiorpoint_.linearRingss = function(flatCoordinates, offset, endss, stride, flatCenters) {\n  var interiorPoints = [];\n  var i, ii;\n  for (i = 0, ii = endss.length; i < ii; ++i) {\n    var ends = endss[i];\n    interiorPoints = _ol_geom_flat_interiorpoint_.linearRings(flatCoordinates,\n        offset, ends, stride, flatCenters, 2 * i, interiorPoints);\n    offset = ends[ends.length - 1];\n  }\n  return interiorPoints;\n};\nexport default _ol_geom_flat_interiorpoint_;\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAABr0lEQVQ4T6VUzVnCQBB9E/QsHYgVuFQgdoAdYAVuTPSqXjV82RKwAzsQK3CpwNhBPAsZv8kPLiFIwD3uzLzvvZk3QwCg9KMiOjhipk8AKRGfyv97fP22KcZMM+C7V9TNv6y5tVJDOaA/nhLQZYYBFhbUMfJv42Cg/MgApMCYuDHwQoO8EQFDBiWSuwIIzu6tuZnK5y5P6fE9CIMVwF0AtuWWkiMDziZVH+pFSkdDoDO1xk/XY+MRiJWNQ91aci4LuAKyi3pbGiUrPR4BnjBImiRJERHuJCaDsybwqzylnwaA17MmmPwy1I8KOEyaJBW2+gUsQNkCnYsmAkvb/DXlOmDJNAX40prwxVW1N2AFUm9BDrjtNTF0a9wWtLTNag8dsBmDLZgSYPEitttbMjNSwDupD7IA3M02D0SsATpi8LONw9H6UFrapgJY9WV27pq9tWT3AAijvh8lAB3LQKwJ+xVL93ydMeMByKZE3qskvMdB2ZL1XZYNqfKY4VsT5CevLJBNoS5wIKuXAnMlwW3nrLyjQmQ5oFY+3ORTpeMeUfYhvQV3tEz8X4CFQ+Keu9M/peAtJOCyBAQAAAAASUVORK5CYII=\"","exports = module.exports = require(\"../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".identify .infoWindow .titlePanel{\\r\\n    width: 100%;\\r\\n    text-align: center;\\r\\n    background-color: #31718d;\\r\\n    height: 40px;\\r\\n    line-height: 40px;\\r\\n}\\r\\n.identify .infoWindow h3 {\\r\\n    margin: 0 auto;\\r\\n    color: white;\\r\\n}\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".mapSelectDiv{\\r\\n    border: 2px dashed #0000c4;\\r\\n    background: #5a72f8;\\r\\n    position: absolute;\\r\\n    width: 0;\\r\\n    height: 0;\\r\\n    filter: alpha(opacity:10);\\r\\n    opacity: 0.2\\r\\n}\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".identify .infoWindow table.altrowstable {\\r\\n    font-family: verdana, arial, sans-serif;\\r\\n    font-size: 11px;\\r\\n    color: #31718d;\\r\\n    border-width: 1px;\\r\\n    border-color: #d6e3e9;\\r\\n    border-collapse: collapse;\\r\\n    width: 100%;\\r\\n    table-layout: fixed;\\r\\n    animation: showTableGradually 0.8s;\\r\\n    -moz-animation: showTableGradually  0.8s; /* Firefox */\\r\\n    -webkit-animation: showTableGradually  0.8s; /* Safari and Chrome */\\r\\n    -o-animation: showTableGradually  0.8s; /* Opera */\\r\\n}\\r\\n\\r\\n.identify .infoWindow table.altrowstable th {\\r\\n    border-width: 1px;\\r\\n    padding: 8px;\\r\\n    border-style: solid;\\r\\n    border-color: #d6e3e9;\\r\\n}\\r\\n.identify .infoWindow table.altrowstable .title {\\r\\n    text-align: left;\\r\\n    font-size: 12px;\\r\\n    width: 35%;\\r\\n}\\r\\n\\r\\n.identify .infoWindow table.altrowstable td {\\r\\n    border-width: 1px;\\r\\n    padding: 8px;\\r\\n    border-style: solid;\\r\\n    border-color: #e9f0f3;\\r\\n    word-wrap: break-word;\\r\\n}\\r\\n\\r\\n.identify .infoWindow table.altrowstable .oddrowcolor {\\r\\n    background-color: #ffffff;\\r\\n}\\r\\n\\r\\n.identify .infoWindow table.altrowstable .evenrowcolor {\\r\\n    background-color: #e9f0f3;\\r\\n}\\r\\n/*滚动条样式*/\\r\\n.featureAttrTable::-webkit-scrollbar {\\r\\n    width: 10px;     /*高宽分别对应横竖滚动条的尺寸*/\\r\\n    height: 1px;\\r\\n}\\r\\n.featureAttrTable::-webkit-scrollbar-track {\\r\\n    -webkit-box-shadow: inset 0 0 5px rgba(18,66,87,0.2);\\r\\n    border-radius: 10px;\\r\\n    background: #EDEDED;\\r\\n}\\r\\n.featureAttrTable::-webkit-scrollbar-thumb {\\r\\n    border-radius: 10px;\\r\\n    -webkit-box-shadow: inset 0 0 5px rgba(18,66,87,0.2);\\r\\n    background: rgba(49, 113, 141, 0.59);\\r\\n}\\r\\n@keyframes showTableGradually{\\r\\n    0%{ opacity: 0; transform: translate(-30px, 0) }\\r\\n    100%{ opacity: 1; transform: translate(0, 0) }\\r\\n}\", \"\"]);\n\n// exports\n","var escape = require(\"../../../../../../node_modules/css-loader/lib/url/escape.js\");\nexports = module.exports = require(\"../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\\r\\n.identify .infoWindow ul {\\r\\n    padding-left: 1em;\\r\\n    list-style: none;\\r\\n    margin: 0 auto;\\r\\n\\r\\n    animation: showGradually 0.3s;\\r\\n    -moz-animation: showGradually  0.3s; /* Firefox */\\r\\n    -webkit-animation: showGradually  0.3s; /* Safari and Chrome */\\r\\n    -o-animation: showGradually  0.3s; /* Opera */\\r\\n}\\r\\n\\r\\n.identify .infoWindow ul .hidden{\\r\\n    display: none;\\r\\n}\\r\\n\\r\\n.identify .infoWindow li.group {\\r\\n    padding-top: 5px;\\r\\n    text-align: left;\\r\\n    list-style: square inside url(\" + escape(require(\"./img/tree-gourp.png\")) + \");\\r\\n}\\r\\n.identify .infoWindow li.folding{\\r\\n    list-style: square inside url(\" + escape(require(\"./img/tree-maximize.png\")) + \");\\r\\n}\\r\\n\\r\\n.identify .infoWindow li.group > label {\\r\\n    font-weight: bold;\\r\\n    text-align: left !important;\\r\\n    color: #31718d;\\r\\n}\\r\\n\\r\\n.identify .infoWindow li.layer {\\r\\n    /*display: table;*/\\r\\n    width: 100%;\\r\\n    margin: 3px 0 3px 4.5%;\\r\\n    height: 24px;\\r\\n    line-height: 24px;\\r\\n    list-style: square outside url(\" + escape(require(\"./img/tree-ldashed.png\")) + \");\\r\\n}\\r\\n/*.identify .infoWindow li.layer .treeicon{*/\\r\\n    /*!*display: inline-block;*!*/\\r\\n    /*!*height: 24px;*!*/\\r\\n    /*!*width: 24px;*!*/\\r\\n    /*!*background: url(\\\"./img/tree-ldashed.png\\\") no-repeat center center;*!*/\\r\\n/*}*/\\r\\n\\r\\n.identify .infoWindow li.layer label{\\r\\n    text-align: left !important;\\r\\n    color: #31718d;\\r\\n    font-size: 15px;\\r\\n    position:absolute;\\r\\n}\\r\\n\\r\\n.identify .infoWindow li.group ul {\\r\\n    margin: 5px 16px 0 0;\\r\\n}\\r\\n\\r\\n.identify .infoWindow li.group li.layer:focus,\\r\\n.identify .infoWindow li.group li.layer:hover,\\r\\n.identify .infoWindow .select{\\r\\n    background-color: #e9f0f3;\\r\\n    color: white;\\r\\n}\\r\\n\\r\\n.identify .infoWindow label.disabled {\\r\\n    opacity: 0.4;\\r\\n}\\r\\n/*滚动条样式*/\\r\\n.featureTreeContainer::-webkit-scrollbar {\\r\\n    width: 10px;     /*高宽分别对应横竖滚动条的尺寸*/\\r\\n    height: 1px;\\r\\n}\\r\\n.featureTreeContainer::-webkit-scrollbar-track {\\r\\n    -webkit-box-shadow: inset 0 0 5px rgba(18,66,87,0.2);\\r\\n    border-radius: 10px;\\r\\n    background: #EDEDED;\\r\\n}\\r\\n.featureTreeContainer::-webkit-scrollbar-thumb {\\r\\n    border-radius: 10px;\\r\\n    -webkit-box-shadow: inset 0 0 5px rgba(18,66,87,0.2);\\r\\n    background: rgba(49, 113, 141, 0.59);\\r\\n}\\r\\n\\r\\n@keyframes showGradually{\\r\\n    0%{ opacity: 0; transform: translate(0, -30px) }\\r\\n    100%{ opacity: 1; transform: translate(0, 0) }\\r\\n}\", \"\"]);\n\n// exports\n","var escape = require(\"../../../../../../node_modules/css-loader/lib/url/escape.js\");\nexports = module.exports = require(\"../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\\r\\n.identify .infoWindow .selectContainer {\\r\\n    width: 100%;\\r\\n    height: 40px;\\r\\n    /*border-radius: 5px;*/\\r\\n    /*box-shadow: 0 0 2px #ccc;*/\\r\\n    position: relative;\\r\\n}\\r\\n\\r\\n.identify .infoWindow .selectContainer cite{\\r\\n    display: block;\\r\\n    color: #31718d;\\r\\n    font-weight: bold;\\r\\n    width: 97%;\\r\\n    height: 40px;\\r\\n    line-height: 40px;\\r\\n    background: url(\" + escape(require(\"./img/pull-down.png\")) + \") no-repeat right center;\\r\\n    text-align: center;\\r\\n    position: relative;\\r\\n}\\r\\n\\r\\n.selectElement{\\r\\n    display: none;\\r\\n    position: absolute;\\r\\n    z-index: 99;\\r\\n    width: 300px;\\r\\n    box-shadow: 0 0 1px #31718d;\\r\\n    background: #fff;\\r\\n    max-height: 500px;\\r\\n    overflow-x: hidden;\\r\\n    overflow-y: hidden;\\r\\n}\\r\\n\\r\\n.selectElementshown{\\r\\n    display: block !important;\\r\\n    animation: selectShowGradually 0.3s;\\r\\n    -moz-animation: selectShowGradually  0.3s; /* Firefox */\\r\\n    -webkit-animation: selectShowGradually  0.3s; /* Safari and Chrome */\\r\\n    -o-animation: selectShowGradually  0.3s; /* Opera */\\r\\n}\\r\\n\\r\\n.selectElement ul{\\r\\n    padding: 0;\\r\\n    margin:  0px auto;\\r\\n}\\r\\n.selectElement ul:first-child{\\r\\n    padding-bottom: 20px !important;\\r\\n}\\r\\n/*分割线*/\\r\\n.selectElement ul .Separateline{\\r\\n    width: 300px;\\r\\n}\\r\\n.selectElement ul .Separateline span{\\r\\n    display: inline-block;\\r\\n    width: 100px;\\r\\n    vertical-align: middle;\\r\\n    text-align: center;\\r\\n    font-size: 5px;\\r\\n    color: #31718d;\\r\\n    font-weight: bold;\\r\\n    font-family: 黑体;\\r\\n}\\r\\n.selectElement ul .Separateline b{\\r\\n    background: #d6e3e9;\\r\\n    margin-top: 4px;\\r\\n    display: inline-block;\\r\\n    width: 100px;\\r\\n    height: 2px;\\r\\n    _overflow: hidden;\\r\\n    vertical-align: middle;\\r\\n}\\r\\n\\r\\n.selectElement .optionElement{\\r\\n    list-style: none;\\r\\n    position: relative;\\r\\n    text-align: center;\\r\\n    line-height: 36px;\\r\\n    /*border-top: 1px solid #d6e3e9;*/\\r\\n    border-bottom: 1px solid #d6e3e9;\\r\\n}\\r\\n\\r\\n.selectElement lable{\\r\\n    color: #31718d;\\r\\n}\\r\\n\\r\\n.selectElement a{\\r\\n    display: block;\\r\\n    height: 36px;\\r\\n    color: #333;\\r\\n    width: 100%;\\r\\n    margin: 0px;\\r\\n    text-decoration: none;\\r\\n}\\r\\n\\r\\n.selectElement ul li a:hover,.selectElement ul li a:focus{\\r\\n    background: #e9f0f3;\\r\\n    text-decoration: none;\\r\\n}\\r\\n\\r\\n.selectElement a img{\\r\\n    border: 0px;\\r\\n    left: 20%;\\r\\n    top: calc(50% - 18px);\\r\\n    margin: 0;\\r\\n    padding-right: 10px;\\r\\n}\\r\\n.selectElement .TreeContainerElement a lable{\\r\\n    position: absolute;\\r\\n}\\r\\n\\r\\n.selectElement .TreeContainerElement {\\r\\n    border-top: none;\\r\\n    text-align: left;\\r\\n    list-style: none;\\r\\n    line-height: 36px;\\r\\n    width: 100%;\\r\\n\\r\\n    animation: selectTreeNodeshowGradually 0.3s;\\r\\n    -moz-animation: selectTreeNodeshowGradually  0.3s; /* Firefox */\\r\\n    -webkit-animation: selectTreeNodeshowGradually  0.3s; /* Safari and Chrome */\\r\\n    -o-animation: selectTreeNodeshowGradually  0.3s; /* Opera */\\r\\n}\\r\\n.selectElement .TreeContainerElement .treeNodeElement{\\r\\n    padding-left: 1em;\\r\\n}\\r\\n.selectElement .TreeContainerElement .hidden{\\r\\n    display: none;\\r\\n}\\r\\n/*滚动条样式*/\\r\\n.selectElement::-webkit-scrollbar {\\r\\n    width: 10px;     /*高宽分别对应横竖滚动条的尺寸*/\\r\\n    height: 1px;\\r\\n}\\r\\n.selectElement::-webkit-scrollbar-track {\\r\\n    -webkit-box-shadow: inset 0 0 5px rgba(18,66,87,0.2);\\r\\n    border-radius: 10px;\\r\\n    background: #EDEDED;\\r\\n}\\r\\n.selectElement::-webkit-scrollbar-thumb {\\r\\n    border-radius: 10px;\\r\\n    -webkit-box-shadow: inset 0 0 5px rgba(18,66,87,0.2);\\r\\n    background: rgba(49, 113, 141, 0.59);\\r\\n}\\r\\n@keyframes selectShowGradually{\\r\\n    0%{ opacity: 0; }\\r\\n    100%{ opacity: 1;}\\r\\n}\\r\\n@keyframes selectTreeNodeshowGradually{\\r\\n    0%{ opacity: 0; transform: translate(0, -30px) }\\r\\n    100%{ opacity: 1; transform: translate(0, 0) }\\r\\n}\", \"\"]);\n\n// exports\n","import Map from \"ol/map\";\r\n\r\nexport default class BaseUtils{\r\n    constructor(map){\r\n        if(! map instanceof Map){\r\n            throw new Error(\"调用对象失败，传入的Map参数无效\");\r\n        }\r\n        this.map = map;\r\n        this.mapElement = map.getTargetElement;\r\n        this.mapListeners = [];\r\n        this.openFlag = false;//功能是否渲染成功\r\n    }\r\n}","/**\n * Overlay position: `'bottom-left'`, `'bottom-center'`,  `'bottom-right'`,\n * `'center-left'`, `'center-center'`, `'center-right'`, `'top-left'`,\n * `'top-center'`, `'top-right'`\n * @enum {string}\n */\nvar _ol_OverlayPositioning_ = {\n  BOTTOM_LEFT: 'bottom-left',\n  BOTTOM_CENTER: 'bottom-center',\n  BOTTOM_RIGHT: 'bottom-right',\n  CENTER_LEFT: 'center-left',\n  CENTER_CENTER: 'center-center',\n  CENTER_RIGHT: 'center-right',\n  TOP_LEFT: 'top-left',\n  TOP_CENTER: 'top-center',\n  TOP_RIGHT: 'top-right'\n};\n\nexport default _ol_OverlayPositioning_;\n","import _ol_ from './index.js';\nimport _ol_MapEventType_ from './mapeventtype.js';\nimport _ol_Object_ from './object.js';\nimport _ol_OverlayPositioning_ from './overlaypositioning.js';\nimport _ol_css_ from './css.js';\nimport _ol_dom_ from './dom.js';\nimport _ol_events_ from './events.js';\nimport _ol_extent_ from './extent.js';\n\n/**\n * @classdesc\n * An element to be displayed over the map and attached to a single map\n * location.  Like {@link ol.control.Control}, Overlays are visible widgets.\n * Unlike Controls, they are not in a fixed position on the screen, but are tied\n * to a geographical coordinate, so panning the map will move an Overlay but not\n * a Control.\n *\n * Example:\n *\n *     var popup = new ol.Overlay({\n *       element: document.getElementById('popup')\n *     });\n *     popup.setPosition(coordinate);\n *     map.addOverlay(popup);\n *\n * @constructor\n * @extends {ol.Object}\n * @param {olx.OverlayOptions} options Overlay options.\n * @api\n */\nvar _ol_Overlay_ = function(options) {\n\n  _ol_Object_.call(this);\n\n  /**\n   * @protected\n   * @type {olx.OverlayOptions}\n   */\n  this.options = options;\n\n  /**\n   * @protected\n   * @type {number|string|undefined}\n   */\n  this.id = options.id;\n\n  /**\n   * @protected\n   * @type {boolean}\n   */\n  this.insertFirst = options.insertFirst !== undefined ?\n    options.insertFirst : true;\n\n  /**\n   * @protected\n   * @type {boolean}\n   */\n  this.stopEvent = options.stopEvent !== undefined ? options.stopEvent : true;\n\n  /**\n   * @protected\n   * @type {Element}\n   */\n  this.element = document.createElement('DIV');\n  this.element.className = options.className !== undefined ?\n    options.className : 'ol-overlay-container ' + _ol_css_.CLASS_SELECTABLE;\n  this.element.style.position = 'absolute';\n\n  /**\n   * @protected\n   * @type {boolean}\n   */\n  this.autoPan = options.autoPan !== undefined ? options.autoPan : false;\n\n  /**\n   * @protected\n   * @type {olx.OverlayPanOptions}\n   */\n  this.autoPanAnimation = options.autoPanAnimation ||\n    /** @type {olx.OverlayPanOptions} */ ({});\n\n  /**\n   * @protected\n   * @type {number}\n   */\n  this.autoPanMargin = options.autoPanMargin !== undefined ?\n    options.autoPanMargin : 20;\n\n  /**\n   * @protected\n   * @type {{bottom_: string,\n   *         left_: string,\n   *         right_: string,\n   *         top_: string,\n   *         visible: boolean}}\n   */\n  this.rendered = {\n    bottom_: '',\n    left_: '',\n    right_: '',\n    top_: '',\n    visible: true\n  };\n\n  /**\n   * @protected\n   * @type {?ol.EventsKey}\n   */\n  this.mapPostrenderListenerKey = null;\n\n  _ol_events_.listen(\n      this, _ol_Object_.getChangeEventType(_ol_Overlay_.Property.ELEMENT),\n      this.handleElementChanged, this);\n\n  _ol_events_.listen(\n      this, _ol_Object_.getChangeEventType(_ol_Overlay_.Property.MAP),\n      this.handleMapChanged, this);\n\n  _ol_events_.listen(\n      this, _ol_Object_.getChangeEventType(_ol_Overlay_.Property.OFFSET),\n      this.handleOffsetChanged, this);\n\n  _ol_events_.listen(\n      this, _ol_Object_.getChangeEventType(_ol_Overlay_.Property.POSITION),\n      this.handlePositionChanged, this);\n\n  _ol_events_.listen(\n      this, _ol_Object_.getChangeEventType(_ol_Overlay_.Property.POSITIONING),\n      this.handlePositioningChanged, this);\n\n  if (options.element !== undefined) {\n    this.setElement(options.element);\n  }\n\n  this.setOffset(options.offset !== undefined ? options.offset : [0, 0]);\n\n  this.setPositioning(options.positioning !== undefined ?\n    /** @type {ol.OverlayPositioning} */ (options.positioning) :\n    _ol_OverlayPositioning_.TOP_LEFT);\n\n  if (options.position !== undefined) {\n    this.setPosition(options.position);\n  }\n\n};\n\n_ol_.inherits(_ol_Overlay_, _ol_Object_);\n\n\n/**\n * Get the DOM element of this overlay.\n * @return {Element|undefined} The Element containing the overlay.\n * @observable\n * @api\n */\n_ol_Overlay_.prototype.getElement = function() {\n  return (\n    /** @type {Element|undefined} */ this.get(_ol_Overlay_.Property.ELEMENT)\n  );\n};\n\n\n/**\n * Get the overlay identifier which is set on constructor.\n * @return {number|string|undefined} Id.\n * @api\n */\n_ol_Overlay_.prototype.getId = function() {\n  return this.id;\n};\n\n\n/**\n * Get the map associated with this overlay.\n * @return {ol.PluggableMap|undefined} The map that the overlay is part of.\n * @observable\n * @api\n */\n_ol_Overlay_.prototype.getMap = function() {\n  return (\n    /** @type {ol.PluggableMap|undefined} */ this.get(_ol_Overlay_.Property.MAP)\n  );\n};\n\n\n/**\n * Get the offset of this overlay.\n * @return {Array.<number>} The offset.\n * @observable\n * @api\n */\n_ol_Overlay_.prototype.getOffset = function() {\n  return (\n    /** @type {Array.<number>} */ this.get(_ol_Overlay_.Property.OFFSET)\n  );\n};\n\n\n/**\n * Get the current position of this overlay.\n * @return {ol.Coordinate|undefined} The spatial point that the overlay is\n *     anchored at.\n * @observable\n * @api\n */\n_ol_Overlay_.prototype.getPosition = function() {\n  return (\n    /** @type {ol.Coordinate|undefined} */ this.get(_ol_Overlay_.Property.POSITION)\n  );\n};\n\n\n/**\n * Get the current positioning of this overlay.\n * @return {ol.OverlayPositioning} How the overlay is positioned\n *     relative to its point on the map.\n * @observable\n * @api\n */\n_ol_Overlay_.prototype.getPositioning = function() {\n  return (\n    /** @type {ol.OverlayPositioning} */ this.get(_ol_Overlay_.Property.POSITIONING)\n  );\n};\n\n\n/**\n * @protected\n */\n_ol_Overlay_.prototype.handleElementChanged = function() {\n  _ol_dom_.removeChildren(this.element);\n  var element = this.getElement();\n  if (element) {\n    this.element.appendChild(element);\n  }\n};\n\n\n/**\n * @protected\n */\n_ol_Overlay_.prototype.handleMapChanged = function() {\n  if (this.mapPostrenderListenerKey) {\n    _ol_dom_.removeNode(this.element);\n    _ol_events_.unlistenByKey(this.mapPostrenderListenerKey);\n    this.mapPostrenderListenerKey = null;\n  }\n  var map = this.getMap();\n  if (map) {\n    this.mapPostrenderListenerKey = _ol_events_.listen(map,\n        _ol_MapEventType_.POSTRENDER, this.render, this);\n    this.updatePixelPosition();\n    var container = this.stopEvent ?\n      map.getOverlayContainerStopEvent() : map.getOverlayContainer();\n    if (this.insertFirst) {\n      container.insertBefore(this.element, container.childNodes[0] || null);\n    } else {\n      container.appendChild(this.element);\n    }\n  }\n};\n\n\n/**\n * @protected\n */\n_ol_Overlay_.prototype.render = function() {\n  this.updatePixelPosition();\n};\n\n\n/**\n * @protected\n */\n_ol_Overlay_.prototype.handleOffsetChanged = function() {\n  this.updatePixelPosition();\n};\n\n\n/**\n * @protected\n */\n_ol_Overlay_.prototype.handlePositionChanged = function() {\n  this.updatePixelPosition();\n  if (this.get(_ol_Overlay_.Property.POSITION) && this.autoPan) {\n    this.panIntoView();\n  }\n};\n\n\n/**\n * @protected\n */\n_ol_Overlay_.prototype.handlePositioningChanged = function() {\n  this.updatePixelPosition();\n};\n\n\n/**\n * Set the DOM element to be associated with this overlay.\n * @param {Element|undefined} element The Element containing the overlay.\n * @observable\n * @api\n */\n_ol_Overlay_.prototype.setElement = function(element) {\n  this.set(_ol_Overlay_.Property.ELEMENT, element);\n};\n\n\n/**\n * Set the map to be associated with this overlay.\n * @param {ol.PluggableMap|undefined} map The map that the overlay is part of.\n * @observable\n * @api\n */\n_ol_Overlay_.prototype.setMap = function(map) {\n  this.set(_ol_Overlay_.Property.MAP, map);\n};\n\n\n/**\n * Set the offset for this overlay.\n * @param {Array.<number>} offset Offset.\n * @observable\n * @api\n */\n_ol_Overlay_.prototype.setOffset = function(offset) {\n  this.set(_ol_Overlay_.Property.OFFSET, offset);\n};\n\n\n/**\n * Set the position for this overlay. If the position is `undefined` the\n * overlay is hidden.\n * @param {ol.Coordinate|undefined} position The spatial point that the overlay\n *     is anchored at.\n * @observable\n * @api\n */\n_ol_Overlay_.prototype.setPosition = function(position) {\n  this.set(_ol_Overlay_.Property.POSITION, position);\n};\n\n\n/**\n * Pan the map so that the overlay is entirely visible in the current viewport\n * (if necessary).\n * @protected\n */\n_ol_Overlay_.prototype.panIntoView = function() {\n  var map = this.getMap();\n\n  if (!map || !map.getTargetElement()) {\n    return;\n  }\n\n  var mapRect = this.getRect(map.getTargetElement(), map.getSize());\n  var element = /** @type {!Element} */ (this.getElement());\n  var overlayRect = this.getRect(element,\n      [_ol_dom_.outerWidth(element), _ol_dom_.outerHeight(element)]);\n\n  var margin = this.autoPanMargin;\n  if (!_ol_extent_.containsExtent(mapRect, overlayRect)) {\n    // the overlay is not completely inside the viewport, so pan the map\n    var offsetLeft = overlayRect[0] - mapRect[0];\n    var offsetRight = mapRect[2] - overlayRect[2];\n    var offsetTop = overlayRect[1] - mapRect[1];\n    var offsetBottom = mapRect[3] - overlayRect[3];\n\n    var delta = [0, 0];\n    if (offsetLeft < 0) {\n      // move map to the left\n      delta[0] = offsetLeft - margin;\n    } else if (offsetRight < 0) {\n      // move map to the right\n      delta[0] = Math.abs(offsetRight) + margin;\n    }\n    if (offsetTop < 0) {\n      // move map up\n      delta[1] = offsetTop - margin;\n    } else if (offsetBottom < 0) {\n      // move map down\n      delta[1] = Math.abs(offsetBottom) + margin;\n    }\n\n    if (delta[0] !== 0 || delta[1] !== 0) {\n      var center = /** @type {ol.Coordinate} */ (map.getView().getCenter());\n      var centerPx = map.getPixelFromCoordinate(center);\n      var newCenterPx = [\n        centerPx[0] + delta[0],\n        centerPx[1] + delta[1]\n      ];\n\n      map.getView().animate({\n        center: map.getCoordinateFromPixel(newCenterPx),\n        duration: this.autoPanAnimation.duration,\n        easing: this.autoPanAnimation.easing\n      });\n    }\n  }\n};\n\n\n/**\n * Get the extent of an element relative to the document\n * @param {Element|undefined} element The element.\n * @param {ol.Size|undefined} size The size of the element.\n * @return {ol.Extent} The extent.\n * @protected\n */\n_ol_Overlay_.prototype.getRect = function(element, size) {\n  var box = element.getBoundingClientRect();\n  var offsetX = box.left + window.pageXOffset;\n  var offsetY = box.top + window.pageYOffset;\n  return [\n    offsetX,\n    offsetY,\n    offsetX + size[0],\n    offsetY + size[1]\n  ];\n};\n\n\n/**\n * Set the positioning for this overlay.\n * @param {ol.OverlayPositioning} positioning how the overlay is\n *     positioned relative to its point on the map.\n * @observable\n * @api\n */\n_ol_Overlay_.prototype.setPositioning = function(positioning) {\n  this.set(_ol_Overlay_.Property.POSITIONING, positioning);\n};\n\n\n/**\n * Modify the visibility of the element.\n * @param {boolean} visible Element visibility.\n * @protected\n */\n_ol_Overlay_.prototype.setVisible = function(visible) {\n  if (this.rendered.visible !== visible) {\n    this.element.style.display = visible ? '' : 'none';\n    this.rendered.visible = visible;\n  }\n};\n\n\n/**\n * Update pixel position.\n * @protected\n */\n_ol_Overlay_.prototype.updatePixelPosition = function() {\n  var map = this.getMap();\n  var position = this.getPosition();\n  if (!map || !map.isRendered() || !position) {\n    this.setVisible(false);\n    return;\n  }\n\n  var pixel = map.getPixelFromCoordinate(position);\n  var mapSize = map.getSize();\n  this.updateRenderedPosition(pixel, mapSize);\n};\n\n\n/**\n * @param {ol.Pixel} pixel The pixel location.\n * @param {ol.Size|undefined} mapSize The map size.\n * @protected\n */\n_ol_Overlay_.prototype.updateRenderedPosition = function(pixel, mapSize) {\n  var style = this.element.style;\n  var offset = this.getOffset();\n\n  var positioning = this.getPositioning();\n\n  this.setVisible(true);\n\n  var offsetX = offset[0];\n  var offsetY = offset[1];\n  if (positioning == _ol_OverlayPositioning_.BOTTOM_RIGHT ||\n      positioning == _ol_OverlayPositioning_.CENTER_RIGHT ||\n      positioning == _ol_OverlayPositioning_.TOP_RIGHT) {\n    if (this.rendered.left_ !== '') {\n      this.rendered.left_ = style.left = '';\n    }\n    var right = Math.round(mapSize[0] - pixel[0] - offsetX) + 'px';\n    if (this.rendered.right_ != right) {\n      this.rendered.right_ = style.right = right;\n    }\n  } else {\n    if (this.rendered.right_ !== '') {\n      this.rendered.right_ = style.right = '';\n    }\n    if (positioning == _ol_OverlayPositioning_.BOTTOM_CENTER ||\n        positioning == _ol_OverlayPositioning_.CENTER_CENTER ||\n        positioning == _ol_OverlayPositioning_.TOP_CENTER) {\n      offsetX -= this.element.offsetWidth / 2;\n    }\n    var left = Math.round(pixel[0] + offsetX) + 'px';\n    if (this.rendered.left_ != left) {\n      this.rendered.left_ = style.left = left;\n    }\n  }\n  if (positioning == _ol_OverlayPositioning_.BOTTOM_LEFT ||\n      positioning == _ol_OverlayPositioning_.BOTTOM_CENTER ||\n      positioning == _ol_OverlayPositioning_.BOTTOM_RIGHT) {\n    if (this.rendered.top_ !== '') {\n      this.rendered.top_ = style.top = '';\n    }\n    var bottom = Math.round(mapSize[1] - pixel[1] - offsetY) + 'px';\n    if (this.rendered.bottom_ != bottom) {\n      this.rendered.bottom_ = style.bottom = bottom;\n    }\n  } else {\n    if (this.rendered.bottom_ !== '') {\n      this.rendered.bottom_ = style.bottom = '';\n    }\n    if (positioning == _ol_OverlayPositioning_.CENTER_LEFT ||\n        positioning == _ol_OverlayPositioning_.CENTER_CENTER ||\n        positioning == _ol_OverlayPositioning_.CENTER_RIGHT) {\n      offsetY -= this.element.offsetHeight / 2;\n    }\n    var top = Math.round(pixel[1] + offsetY) + 'px';\n    if (this.rendered.top_ != top) {\n      this.rendered.top_ = style.top = top;\n    }\n  }\n};\n\n\n/**\n * returns the options this Overlay has been created with\n * @public\n * @return {olx.OverlayOptions} overlay options\n */\n_ol_Overlay_.prototype.getOptions = function() {\n  return this.options;\n};\n\n\n/**\n * @enum {string}\n * @protected\n */\n_ol_Overlay_.Property = {\n  ELEMENT: 'element',\n  MAP: 'map',\n  OFFSET: 'offset',\n  POSITION: 'position',\n  POSITIONING: 'positioning'\n};\nexport default _ol_Overlay_;\n","import \"./ol-AnimationMarker.css\";\r\nimport Overlay from 'ol/overlay';\r\nimport DragPan from \"ol/interaction/dragpan\";\r\nconst defaultImage = require(\"./img/highlight-marker.png\");\r\n\r\nexport default class AnimationMarker extends Overlay{\r\n    constructor(opt_options) {\r\n\r\n        let options = opt_options || {};\r\n        /* don't making the map panning*/\r\n        if (options.autoPan === undefined) {\r\n            options.autoPan = false;\r\n        }\r\n\r\n        let element = document.createElement('div');\r\n\r\n        options.element = element;\r\n        super(options);\r\n\r\n        this.container = element;\r\n        this.container.className = 'ol-AnimationMarker';\r\n\r\n        this.content = document.createElement('img');\r\n        this.content.src = options.image ? options.image : defaultImage;\r\n\r\n        this.container.appendChild(this.content);\r\n\r\n        this.timeInterval = null;\r\n\r\n    }\r\n    /**\r\n     * Show the AnimationMarker.\r\n     * @param {ol.Coordinate} coord Where to anchor the AnimationMarker.\r\n     * @returns {Popup} The Popup instance\r\n     */\r\n    show(point) {\r\n        let coord = point.getGeometry().getCoordinates();\r\n        this.setCoordinates(coord);\r\n\r\n        if(!this.container.classList.contains(\"shown\")){\r\n            this.container.classList.add(\"shown\");\r\n        }\r\n\r\n        // this._clearAnimation();\r\n        // this._animationShow(coord);\r\n        return this;\r\n    }\r\n\r\n    // /**\r\n    //  * 动画展示\r\n    //  * @param coord\r\n    //  * @private\r\n    //  */\r\n    // _animationShow(coord){\r\n    //     let mapSize = this._getMapSize();\r\n    //     let curPixel = this._getScreenXYByCoordinate(coord);\r\n    //     /**\r\n    //      * 这里只需要修改 totalTime 的值可以改变动画的渲染时间，其他不要改动\r\n    //      * @type {number}\r\n    //      */\r\n    //     let totalTime = 400, //动画的总时间 单位是毫秒\r\n    //         heightPower = 4, //高度衰减的倍率\r\n    //         dValue = mapSize[1] / 10, //marker的最大高度，像素为单位\r\n    //         dTime = 10; //动画每一帧的时间\r\n    //\r\n    //     let totalSecondTime = totalTime/ 1000;\r\n    //     let acceleration = 2 * dValue / Math.pow(totalSecondTime * Math.sqrt(heightPower) /( 1 + Math.sqrt(heightPower)), 2); // 单位像素 / 秒\r\n    //\r\n    //     let iHeight = dValue,//能量衰减后的高度\r\n    //         iTime = totalTime;//剩余时间\r\n    //\r\n    //     //根据时间计算当前高度的方法\r\n    //     let getHeight = (ivalue, time)=>/* time second*/{\r\n    //         if(time <= 0) return 0;//如果时间已经少于0，则直接返回0\r\n    //         let _height = ivalue - acceleration * time * time / 2;\r\n    //\r\n    //         if( _height <= 0){\r\n    //             iHeight = iHeight / heightPower;\r\n    //             totalTime = totalTime - time * 1000;\r\n    //         }\r\n    //         return  _height;\r\n    //     }\r\n    //\r\n    //     let timeIntervalu = this.timeInterval = window.setInterval(()=>{\r\n    //         iTime = iTime - dTime;\r\n    //\r\n    //         let dHeight = getHeight(iHeight, (totalTime - iTime) / 1000);\r\n    //         //current piexl\r\n    //         let piexl = [curPixel[0], curPixel[1] - dHeight];\r\n    //         let coor = this._getCoordinateFromScreenXY(piexl);\r\n    //         this.setCoordinates(coor);\r\n    //\r\n    //         let postion = this.getPosition();\r\n    //         if(postion[0] != coor[0] || postion[1] != coor[1]){\r\n    //             timeIntervalu && window.clearInterval(timeIntervalu);\r\n    //         }\r\n    //         if(iTime <= 0) {\r\n    //             this.setCoordinates(coord);\r\n    //             timeIntervalu && window.clearInterval(timeIntervalu);\r\n    //         }\r\n    //     }, dTime)\r\n    // }\r\n    // /**\r\n    //  * 通过地理坐标获取屏幕坐标\r\n    //  * @param coor\r\n    //  * @private\r\n    //  */\r\n    // _getScreenXYByCoordinate(coor){\r\n    //     return this.getMap().getPixelFromCoordinate(coor);\r\n    // }\r\n    // /**\r\n    //  * 通过屏幕坐标获取地理坐标\r\n    //  * @param coor\r\n    //  * @private\r\n    //  */\r\n    // _getCoordinateFromScreenXY(piexl){\r\n    //     return this.getMap().getCoordinateFromPixel(piexl);\r\n    // }\r\n    // /**\r\n    //  * 获取地图的尺寸\r\n    //  * @returns {ol.Size}\r\n    //  */\r\n    // _getMapSize(){\r\n    //     return this.getMap().getSize();\r\n    // }\r\n    /**\r\n     * set the AnimationMarker Coordinates.\r\n     * @param {ol.Coordinate} coord Where to anchor the AnimationMarker.\r\n     * @returns {Popup} The Popup instance\r\n     */\r\n    setCoordinates(coord){\r\n        this.setPosition(coord);\r\n    }\r\n    /**\r\n     * Hide the popup.\r\n     * @returns {Popup} The Popup instance\r\n     */\r\n    hide() {\r\n        if(this.container.classList.contains(\"shown\")){\r\n            this.container.classList.remove(\"shown\");\r\n        }\r\n        // this._clearAnimation();\r\n\r\n        return this;\r\n    }\r\n    /**\r\n     * Indicates if the popup is in open state\r\n     * @returns {Boolean} Whether the popup instance is open\r\n     */\r\n    isOpened() {\r\n        return this.container.classList.contains(\"shown\");\r\n    }\r\n\r\n    // /**\r\n    //  * 清除动画\r\n    //  * @private\r\n    //  */\r\n    // _clearAnimation(){\r\n    //     if(this.timeInterval){\r\n    //         window.clearInterval(this.timeInterval);\r\n    //         this.timeInterval = null;\r\n    //     }\r\n    // }\r\n\r\n    // /**\r\n    //  * 清除动画事件\r\n    //  */\r\n    // clearAnimation(){\r\n    //     this._clearAnimation();\r\n    // }\r\n    // /**\r\n    //  * 禁止地图拖动\r\n    //  * @private\r\n    //  */\r\n    // _disableMapDrag(){\r\n    //     this.getMap().getInteractions().forEach(function(element,index,array){\r\n    //         if(element instanceof DragPan)\r\n    //             element.setActive(false);\r\n    //     });\r\n    // }\r\n    //\r\n    // /**\r\n    //  * 允许地图拖动\r\n    //  * @private\r\n    //  */\r\n    // _enableMapDrag(){\r\n    //     this.getMap().getInteractions().forEach(function(element,index,array){\r\n    //         if(element instanceof DragPan){}\r\n    //         element.setActive(true);\r\n    //     });\r\n    // }\r\n}\r\n\r\n\r\n// OpenLayers\r\nif (window.ol && window.ol.Overlay) {\r\n    window.ol.Overlay.AnimationMarker = AnimationMarker;\r\n}","import VectorLayer from 'ol/layer/vector';\nimport VectorSource from 'ol/source/vector';\nimport SymbolStyle from 'ol/style/style';\nimport CircleSymbol from 'ol/style/circle';\nimport StrokeSymbol from 'ol/style/stroke';\nimport FillSymbol from 'ol/style/fill';\nimport Base from '../ol-Base-Utils';\nimport Observable from 'ol/observable';\nimport Point from 'ol/geom/point';\nimport Feature from 'ol/feature';\n\nimport AnimationMarker  from '../../../AnimationMarker/ol-AnimationMarker';\n\n/**\n * OpenLayers Feature HighLighg Utils. convenent to highlight feature;\n * @constructor\n * @extends {ol.Base.Utils}\n * @param {lo.map} map\n */\nclass FeatureFeatureHighLightUtils extends Base{\n    constructor(map){\n        super(map);\n        this.originalStyle = new SymbolStyle({\n            image: new CircleSymbol({\n                radius: 7,\n                fill: new FillSymbol({color: 'blue'}),\n                stroke: new StrokeSymbol({color: 'red', width: 2})\n            }),\n            stroke: new StrokeSymbol({\n                width: 2,\n                color: 'red'\n            }),\n            fill: new FillSymbol({\n                color: 'blue'\n            })\n        });\n        this.highlightlayer = new VectorLayer({\n            source: new VectorSource(),\n            map: map,\n            style: this.originalStyle\n        });\n        this.highlightlayerforspecific = new VectorLayer({\n            source: new VectorSource(),\n            map: map,\n            style: this.originalStyle\n        });\n        this.highlighfeature = null;\n        this.animationMarker = null;\n        this.highlightOtherFeature = null;\n    }\n    startup(){\n        try{\n            if(!this.openFlag){\n                this._highlightShow();\n                this.openFlag = true;\n            }else{\n                console.warn(\"FeatureHighLight功能已开启，请勿重复使用\");\n            }\n        }catch (e) {\n            throw new Error(e.messages);\n        }\n    }\n    close(){\n        if(this.openFlag){\n            this._highlightClose();\n            this.openFlag = false;\n        }else{\n            console.warn(\"FeatureHighLight功能未开启，无法关闭\");\n        }\n    }\n\n    /**\n     * 高亮指定的要素\n     * @param {ol-feature}\n     * TODO 针对要素类型，做更多的高亮动画，类型，例如做overlay\n     */\n    highlightSpecificFeature(feature){\n        let geometryType = feature.getGeometry().getType();\n\n        switch (geometryType) {\n            case \"Point\":\n                this._highlightPointFeature(feature);\n                break;\n            default:\n                this._highlightOtherFeature(feature)\n                break;\n        }\n        return this;\n    }\n\n    /**\n     * 高亮除点要素其他的要素，闪烁三次\n     * @private\n     */\n    _highlightOtherFeature(feature){\n        this.clearhighlightFeature();\n        this._highlightOtherFeaturetWithAnimate(feature);\n    }\n\n    /**\n     * 高亮除点要素其他的要素，闪烁三次\n     * @param feature\n     * @private\n     */\n    _highlightOtherFeaturetWithAnimate(feature){\n        let copyFeature= this.highlightOtherFeature = new Feature({\n            geometry: feature.getGeometry(),\n            labelPoint: feature.getGeometry(),\n        });\n        this.highlightlayerforspecific.getSource().addFeature(copyFeature);\n        //高亮的样式\n        let highlightStyle = new SymbolStyle({\n            image: new CircleSymbol({\n                radius: 7,\n                fill: new FillSymbol({color: 'yellow'}),\n                stroke: new StrokeSymbol({color: 'red', width: 2})\n            }),\n            stroke: new StrokeSymbol({\n                width: 6,\n                color: 'yellow'\n            }),\n            fill: new FillSymbol({\n                color: 'yellow'\n            })\n        });\n        copyFeature.setStyle(highlightStyle);\n\n        let totalTime = 5, curTime = 0;\n\n        let timeInterval = window.setInterval(()=>{\n            if(curTime < totalTime){\n                let curStyle = copyFeature.getStyle();\n                if(curStyle != highlightStyle)\n                    copyFeature.setStyle(highlightStyle);\n                else\n                    copyFeature.setStyle(this.originalStyle);\n\n                curTime ++;\n            }\n            else{\n                window.clearInterval(timeInterval);\n            }\n        }, 300);\n    }\n    /**\n     * 高亮点要素\n     * @param point {ol-feature}\n     * @private\n     */\n    _highlightPointFeature(point){\n        this.clearhighlightFeature();\n        this._highlightPointWithAnimate(point);\n    }\n\n    /**\n     * 清除高亮的要素\n     * @private\n     */\n    clearhighlightFeature(){\n        if(this.animationMarker && this.animationMarker.isOpened()){\n            this.map.removeOverlay(this.animationMarker);\n            this.animationMarker = null;\n        }\n        if (!!this.highlightOtherFeature) {\n            this.highlightlayerforspecific.getSource().removeFeature(this.highlightOtherFeature);\n            this.highlightOtherFeature = null;\n        }\n    }\n\n    /**\n     * 使用动画标记高亮要素\n     * @param point\n     * @private\n     */\n    _highlightPointWithAnimate(point){\n        //this.map.getView().fit(point.getGeometry(), { duration: 500, maxZoom: 17 });\n        let animationMarker = this.animationMarker =  new AnimationMarker();\n        this.map.addOverlay(animationMarker);\n\n        animationMarker.show(point);\n    }\n\n    /**\n     * 高亮鼠标经过的要素\n     * @param evt {MouseEvent}\n     * @private\n     */\n    _highlighFeature(evt){\n        let features = this.map.getFeaturesAtPixel(evt.pixel);\n        if(!!features){\n            let _feature = this.map.forEachFeatureAtPixel(evt.pixel, (feature)=> {\n                return feature;\n            });\n            if (_feature !== this.highlighfeature) {\n                if (!!this.highlighfeature) {\n                    this.highlightlayer.getSource().removeFeature(this.highlighfeature);\n                }\n                if (!!_feature) {\n                    this.highlightlayer.getSource().addFeature(_feature);\n                }\n                this.highlighfeature = _feature;\n            }\n        }\n        else{\n            if (!!this.highlighfeature) {\n                this.highlightlayer.getSource().removeFeature(this.highlighfeature);\n                this.highlighfeature = null;\n            }\n        }\n    }\n    /*\n    展示途径要素高亮功能\n     */\n    _highlightShow(){\n        this.mapListeners.push(this.map.on('pointermove', this._highlighFeature.bind(this)));\n    }\n    /*\n    关闭途经要素高亮功能\n     */\n    _highlightClose(){\n        for (let i = 0, key; i < this.mapListeners.length; i++) {\n            Observable.unByKey(this.mapListeners[i]);\n        }\n        this.mapListeners.length = 0;\n\n        this.clearhighlightFeature();\n    }\n}\n\nexport default FeatureFeatureHighLightUtils;","import _ol_ from '../index.js';\nimport _ol_LayerType_ from '../layertype.js';\nimport _ol_layer_Layer_ from '../layer/layer.js';\n\n/**\n * @classdesc\n * Server-rendered images that are available for arbitrary extents and\n * resolutions.\n * Note that any property set in the options is set as a {@link ol.Object}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @constructor\n * @extends {ol.layer.Layer}\n * @fires ol.render.Event\n * @param {olx.layer.ImageOptions=} opt_options Layer options.\n * @api\n */\nvar _ol_layer_Image_ = function(opt_options) {\n  var options = opt_options ? opt_options : {};\n  _ol_layer_Layer_.call(this,  /** @type {olx.layer.LayerOptions} */ (options));\n\n  /**\n   * The layer type.\n   * @protected\n   * @type {ol.LayerType}\n   */\n  this.type = _ol_LayerType_.IMAGE;\n\n};\n\n_ol_.inherits(_ol_layer_Image_, _ol_layer_Layer_);\n\n\n/**\n * Return the associated {@link ol.source.Image source} of the image layer.\n * @function\n * @return {ol.source.Image} Source.\n * @api\n */\n_ol_layer_Image_.prototype.getSource;\nexport default _ol_layer_Image_;\n","import Base from '../ol-Base-Utils';\r\nimport VectorSource from 'ol/source/vector';\r\nimport VectorLayer from 'ol/layer/vector';\r\nimport TileLayer from 'ol/layer/tile';\r\nimport LayerGroup from 'ol/layer/group';\r\nimport ImageLayer from 'ol/layer/image';\r\n/**\r\n * OpenLayers Feature Layer Utils. Help to Use Layer and Feature;\r\n * @constructor\r\n * @extends {ol.Base.Utils}\r\n * @param {lo.map} map\r\n */\r\nclass FeatureIdentifyUtils extends Base{\r\n    constructor(map){\r\n        super(map);\r\n    }\r\n\r\n    /**\r\n     *\r\n     */\r\n    getVectorLayerInfo(layers){\r\n        let result = [];\r\n        for (let i = 0, length = layers.array_.length; i < length; i++){\r\n            let layer = layers.array_[i];\r\n            if(!(layer instanceof  VectorLayer || layer instanceof LayerGroup)) continue;\r\n\r\n            let layerinfo = {};\r\n            layerinfo.oid = layer.ol_uid;\r\n            layerinfo.title = this.getVectorLayerTitle(layer);\r\n            layerinfo.layerdata = layer;\r\n            layerinfo.icon = \"layer\";\r\n            layerinfo.value = \"layer_\" + layerinfo.oid;\r\n            if(layer instanceof LayerGroup){\r\n                let childlayer = this.getVectorLayerInfo(layer.getLayers());\r\n                layerinfo.childLayer = childlayer;\r\n                layerinfo.icon = \"layergroup\";\r\n                layerinfo.value = \"layergroup_\" + layerinfo.oid;\r\n            }\r\n\r\n            result.push(layerinfo);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * @public\r\n     * @param {ol-feature} feature\r\n     * @returns {ol-layer} if no layer return null\r\n     */\r\n    getLayerByFeature(feature){\r\n        let layersCollection = this.map.getLayers();\r\n        let result = this._getLayerByFeature(layersCollection, feature);\r\n        return result;\r\n    }\r\n    /**\r\n     * @public\r\n     * @param {ol-feature} feature\r\n     * @returns {ol-layer} if no layer return null\r\n     * @desc given the visible layer whicn the spectic feature\r\n     */\r\n    getVisibleLayerByFeature(feature){\r\n        let layersCollection = this.map.getLayers();\r\n        let result = this._getLayerByFeature(layersCollection, feature, {visible: true});\r\n        return result;\r\n    }\r\n    /**\r\n     * @private\r\n     * @param {ol-Collection} layersCollection\r\n     * @param {ol-feature} feature\r\n     * @returns {ol-layer} if no layer return null\r\n     * TODO make all of the layerType are useful\r\n     */\r\n    _getLayerByFeature(layersCollection, feature, filterOtions){\r\n        let result = null, layers = layersCollection.getArray();\r\n\r\n        if(!!layers){\r\n            for(let i = 0, length = layers.length; i < length; i++){\r\n                let layer = layers[i];\r\n                // filter the propertity\r\n                if(this._filterLayer(layer, filterOtions))\r\n                    break;\r\n                //indincate the layer type\r\n                if(layer instanceof LayerGroup){\r\n                    result = this._getLayerByFeature(layer.getLayers(), feature);\r\n                    if(result) break;\r\n                }else{\r\n                    let source = layer.getSource && layer.getSource();\r\n                    if(source instanceof VectorSource) {\r\n                        let hasFeatures = this._isFeatureInVectorSource(source, feature, false);\r\n                        if (hasFeatures) {\r\n                            result = layer; break;\r\n                        }\r\n                    }else if(source instanceof ImageLayer){\r\n                        //TODO ImageLayer process\r\n                    }else if(source instanceof TileLayer){\r\n                        //TODO TileLayer process\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param filterOtions layer's Propertity\r\n     * @private\r\n     * @desc filter layer's Propertity\r\n     * @return {boolean} isHasFilterPropertity\r\n     */\r\n    _filterLayer(layer, filterOtions){\r\n        let options = filterOtions || {};\r\n        let layerPropertity = layer.getProperties();\r\n\r\n        for (let key in filterOtions){\r\n            if(options[key] !== layerPropertity[key])\r\n                return true;\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * @private\r\n     * @param {ol-source} source\r\n     * @param {ol-feature} feature\r\n     * @param {boolean} isIndex\r\n     * @returns {number} if isIndex is true\r\n     * @returns {boolean} if isIndex is false\r\n     * @desc judge the feature is nor in the specified source\r\n     */\r\n    _isFeatureInVectorSource(source, feature, isIndex){\r\n        let features = source.getFeatures(), rIndex = -1;\r\n        if(features && features.length > 0){\r\n            for(let i = 0, length = features.length; i < length; i++){\r\n                if(features[i].ol_uid === feature.ol_uid) {\r\n                    rIndex = i;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return isIndex == true ? rIndex : (rIndex === -1 ? false : true);\r\n    }\r\n\r\n    /**\r\n     * 查找是否在给定的图层上\r\n     * @param layer\r\n     * @param feature\r\n     * @return {boolean}\r\n     */\r\n    isFeatureInLayer(layer, feature){\r\n        let result = false;\r\n        if(layer instanceof LayerGroup){\r\n            let _layers = layer.getLayers().array_;\r\n            for (let i = 0, length = _layers.length; i < length; i++ ){\r\n                let _result = this.isFeatureInLayer(_layers[i], feature);\r\n                if(_result){\r\n                    result = _result;\r\n                    break;\r\n                }\r\n            }\r\n        }else if(layer instanceof VectorLayer){\r\n            result = this._isFeatureInVectorSource(layer.getSource(), feature);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * 要素集中获取指定图层的要素\r\n     * @param features\r\n     * @param layer\r\n     * @return {Array}\r\n     */\r\n    getFeaturesByLayerFilter(features, layer){\r\n        let result = [];\r\n        if(!!features && features.length > 0){\r\n            for (let i = 0, length = features.length; i < length; i++){\r\n                let feature = features[i];\r\n                if(this.isFeatureInLayer(layer, feature))\r\n                    result.push(feature);\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    /**\r\n     *\r\n     * search all of the features inside extent in all layers\r\n     * @param layers\r\n     * @param extent\r\n     * @return {Array}\r\n     */\r\n    getFeatureByExtent(layers, extent, options){\r\n        let features = [], _options = options || {};\r\n        for(let i = layers.length - 1; i >= 0; i--){\r\n            let layer = layers[i];\r\n            if(_options.visible && !layer.getVisible()) continue;\r\n\r\n            if(layer instanceof LayerGroup){\r\n                let _features = this.getFeatureByExtent(layer.getLayers().array_, extent, _options);\r\n                features = features.concat(_features);\r\n                if(_options.topmost && features.length > 0) break;\r\n            }else{\r\n                let source = layer.getSource && layer.getSource();\r\n                if(source instanceof VectorSource) {\r\n                    let _features = source.getFeaturesInExtent(extent);\r\n                    features = features.concat(_features);\r\n                    if(_options.topmost && features.length > 0) break;\r\n                }\r\n            }\r\n        }\r\n        return features;\r\n    }\r\n\r\n    /**\r\n     *\r\n     */\r\n    getVectorLayerTitle(layer){\r\n        let title = \"无标题\";\r\n        if(!!layer){\r\n            if(layer instanceof VectorLayer || layer instanceof LayerGroup) {\r\n                if(layer.get(\"title\")) {\r\n                    title = layer.get(\"title\");\r\n                }\r\n            }\r\n        }\r\n        return title;\r\n    }\r\n\r\n    /**\r\n     * 根据Layer的OL_OID返回对应的Layer对象\r\n     * @param oid\r\n     */\r\n    getLayerByLayerID(oid, layers){\r\n        let result = null;\r\n        if(layers){\r\n            for (let i = 0, length = layers.length; i < length; i++){\r\n                let layer = layers[i];\r\n\r\n                if(layer.ol_uid == oid){\r\n                    result = layer;\r\n                    break;\r\n                }\r\n                if(layer instanceof LayerGroup){\r\n                    let _layer = this.getLayerByLayerID(oid, layer.getLayers().array_);\r\n                    if(_layer) {\r\n                        result = _layer;\r\n                        break;\r\n                    };\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    /**\r\n     * get the topmost layer from all of the layer\r\n     * @param layers\r\n     * @return {ol/layer/layer}\r\n     */\r\n    geTopMostLayer(layers){\r\n        let _layer = null;\r\n        for(let i = layers.length - 1; i >= 0; i--){\r\n            let layer = layers[i];\r\n            if(layer instanceof LayerGroup){\r\n                _layer = this.geTopMostLayer(layer.getLayers().array_);\r\n            }else{\r\n                let source = layer.getSource && layer.getSource();\r\n                if(source instanceof VectorSource) {\r\n                    _layer = layer;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return _layer;\r\n    }\r\n}\r\nexport default FeatureIdentifyUtils;","import \"./ol-MapSelection-Utils.css\";\r\nimport Base from \"../ol-Base-Utils\";\r\nimport DragPan from \"ol/interaction/dragpan\";\r\n/**\r\n * OpenLayers Map Selection Utils. convenent to Draw and Selection on map;\r\n * @constructor\r\n * @extends {ol.Base.Utils}\r\n * @param {lo.map} map\r\n */\r\nexport default class MapSelectionUtils extends Base{\r\n    constructor(map, options){\r\n        super(map);\r\n\r\n        this.options = options || {};\r\n        this.targetElement = map.getTargetElement();\r\n        this.selectRegionElement = null;\r\n        this.selectRegionClass = \"mapSelectDiv\";\r\n\r\n        if(this.targetElement.onmousedown || this.targetElement.onmousemove || this.targetElement.onmouseup){\r\n            console.error(\"onmousedown、onmousemove、onmouseup已经注册了其他事件，请使用其他Element，--MapSelectionUtils\");\r\n        }\r\n        if(!this.targetElement)\r\n            throw new Error(\"调用MapSelectionUtils的map地图控件不正确\");\r\n    }\r\n    /**\r\n     * 开启鼠标框选的功能\r\n     * \r\n     * @param {any} DrawCallback \r\n     * @memberof MapSelectionUtils\r\n     */\r\n    startDrawRectangle(drawCpmpeleteCallback){\r\n        //禁止地图拖动的事件\r\n        this._disableMapDrag();\r\n\r\n        this.targetElement.onmousedown = (e)=> {\r\n            if(this.selectRegionElement){\r\n                this.selectRegionElement.parentNode.removeChild(this.selectRegionElement);\r\n                this.selectRegionElement = null;\r\n            }\r\n\r\n            let posx = e.clientX, posy = e.clientY;\r\n            this._dynamicDrawRegion(posx, posy, drawCpmpeleteCallback);\r\n        }\r\n    }\r\n    /**\r\n     * 关闭鼠标框选的功能\r\n     * \r\n     * @memberof MapSelectionUtils\r\n     */\r\n    closeDrawRectangle(){\r\n        //设置允许地图拖动\r\n        this._enableMapDrag();\r\n\r\n        let mainContanier = this.targetElement;\r\n        mainContanier.onmousedown = null;\r\n        mainContanier.onmousemove = null;\r\n        mainContanier.onmouseup = null;\r\n\r\n        if(this.selectRegionElement){\r\n            this.selectRegionElement.parentNode.removeChild(this.selectRegionElement);\r\n            this.selectRegionElement = null;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 是否打开了功能\r\n     * @return {boolean}\r\n     */\r\n    isOpen(){\r\n        return this.targetElement.onmousedown !== null;\r\n    }\r\n\r\n    /**\r\n     * 禁止地图拖动\r\n     * @private\r\n     */\r\n    _disableMapDrag(){\r\n        this.map.getInteractions().forEach(function(element,index,array){\r\n            if(element instanceof DragPan)\r\n                element.getActive() && element.setActive(false);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 允许地图拖动\r\n     * @private\r\n     */\r\n    _enableMapDrag(){\r\n        this.map.getInteractions().forEach(function(element,index,array){\r\n            if(element instanceof DragPan){}\r\n                !element.getActive() && element.setActive(true);\r\n        });\r\n    }\r\n\r\n    /**\r\n     *  渲染一个给定像素坐标的div\r\n     * @param pageX\r\n     * @param pageY\r\n     * @return {HTMLDivElement}\r\n     * @private\r\n     */\r\n    _renderDynamicDiv(clientX, clientY){\r\n        let div = document.createElement(\"div\");\r\n        div.className = this.selectRegionClass;\r\n        div.style.left = clientX + \"px\";\r\n        div.style.top = clientY + \"px\";\r\n\r\n        return div;\r\n    }\r\n\r\n    /**\r\n     * 动态绘制区域\r\n     * @param e\r\n     * @private\r\n     */\r\n    _dynamicDrawRegion(posx,  posy, drawCpmpeleteCallback){\r\n        let mainContanier = this.targetElement;\r\n\r\n        this.selectRegionElement = this._renderDynamicDiv(posx, posy);\r\n        mainContanier.appendChild(this.selectRegionElement);\r\n\r\n        //注册容器点击时的鼠标移动事件\r\n        mainContanier.onmousemove = (ev)=> {\r\n            //计算div的尺寸\r\n            this.selectRegionElement.style.left = Math.min(ev.clientX, posx) + \"px\";\r\n            this.selectRegionElement.style.top = Math.min(ev.clientY, posy) + \"px\";\r\n            this.selectRegionElement.style.width = Math.abs(posx - ev.clientX)+\"px\";\r\n            this.selectRegionElement.style.height = Math.abs(posy - ev.clientY)+\"px\";\r\n        }\r\n        //注册容器鼠标上抬的事件\r\n        mainContanier.onmouseup = ()=> {\r\n            mainContanier.onmousemove = null;\r\n            mainContanier.onmouseup = null;\r\n\r\n            drawCpmpeleteCallback && drawCpmpeleteCallback(this.selectRegionElement);\r\n\r\n            this.selectRegionElement.parentNode.removeChild(this.selectRegionElement);\r\n            this.selectRegionElement = null;\r\n        }\r\n    }\r\n}","import Base from \"../ol-Base-Utils\";\r\nimport Polygon from \"ol/geom/polygon\";\r\n\r\nexport default class MapzCoordinateUtils extends Base{\r\n    constructor(map){\r\n        super(map);\r\n    }\r\n\r\n    /**\r\n     * 通过一个屏幕要素，获取地图上的extent\r\n     * @param element\r\n     */\r\n    getExtendByElement(element){\r\n        let extent = null;\r\n\r\n        let div_top = element.offsetTop, div_left = element.offsetLeft;\r\n        let div_right = div_left + element.offsetWidth, div_bottom = div_top + element.offsetHeight;\r\n\r\n        let mapElement = this.map.getTargetElement();\r\n        let map_top = mapElement.offsetTop, map_left = mapElement.offsetLeft;\r\n\r\n        let left = div_left - map_left, right = div_right - map_left;\r\n        let top = div_top - map_top, bottom = div_bottom - map_top;\r\n\r\n        if(Math.abs(left - right) > 4 || Math.abs(top - bottom) > 4){\r\n            let topleft = this.map.getCoordinateFromPixel([left, top]);\r\n            let bottomright = this.map.getCoordinateFromPixel([right, bottom]);\r\n            let topright = this.map.getCoordinateFromPixel([right, top]);\r\n            let bottomleft = this.map.getCoordinateFromPixel([left, bottom]);\r\n\r\n            let polygon = new Polygon([[topleft, topright, bottomright, bottomleft, topleft]]);\r\n            extent = polygon.getExtent();\r\n        }\r\n\r\n        return extent;\r\n    }\r\n}\r\n\r\n","/**\r\n * OpenLayers Feature Identify Control. Base Component Class\r\n * @constructor\r\n * @param {Object} element, the component renderby:\r\n */\r\nexport default class IdentifyBaseComponent{\r\n    constructor(element){\r\n        this.element = element;\r\n    }\r\n    initComponent(){\r\n        return this;\r\n    }\r\n    destroyComponent(){\r\n        this.element.parentNode && this.element.parentNode.removeChild(this.element);\r\n    }\r\n    _extend(destination, source){\r\n        for( let property in source ){\r\n            destination[property] = source[property];\r\n        }\r\n        return destination;\r\n    }\r\n}","import \"./ol-Identify-TypeSelect.css\";\r\nimport IdentifyBaseComponent from '../ol-Identify-BaseComponent';\r\n\r\nconst LayerIconImage = require(\"./img/tree-ldashed.png\");\r\nconst LayerGroupIconImage = require(\"./img/icon-layer.png\");\r\n/**\r\n * OpenLayers Feature Identify Control. LayerTypeSelect Component\r\n * @constructor\r\n * @param {Object} element, the component renderby:\r\n */\r\nexport default  class IdentifyLayerTypeSelect extends IdentifyBaseComponent{\r\n    constructor(element){\r\n        super(element);\r\n        // the option element type Enum\r\n        this.optionEnum = { ALLLAYER: \"all\", TOPMOST: \"topmost\", VISIBLE: \"visible\"};\r\n        this.optionTextEnum = { ALLLAYER: \"所有的图层\", TOPMOST: \"最上面的图层\", VISIBLE: \"可见的图层\"};\r\n        //select element\r\n        this._layerTypeSelect = null;\r\n        this._layerTypeSelectControl = null;\r\n        this._layerTypeOptionContaniner = null;\r\n        this.valueFieldName = \"dataValue\";\r\n\r\n        this._curSelected = null;\r\n        this._selectLiElement = null;\r\n\r\n        this.maxHeight = 200;\r\n\r\n        this.defaultImage = {\r\n            \"layer\": LayerIconImage,\r\n            \"layergroup\": LayerGroupIconImage\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @public\r\n     * @desc create the Layer type condition selected element\r\n     * @returns {HtmlElement} select Element\r\n     */\r\n    initComponent(){\r\n        let selectContainer = this._layerTypeSelectControl =  document.createElement(\"div\");\r\n        selectContainer.className = \"selectContainer\";\r\n\r\n        let curSelectContent = this._createCurrentOption();\r\n\r\n        let selectContentContainer = this._layerTypeSelect = document.createElement(\"div\");\r\n        selectContentContainer.className = \"selectElement\";\r\n\r\n        let selectContent  = this._layerTypeOptionContaniner = this._createSelect();\r\n\r\n        let option_topmost = this._createOption(this.optionEnum.TOPMOST, this.optionTextEnum.TOPMOST);\r\n        let options_visible = this._createOption(this.optionEnum.VISIBLE, this.optionTextEnum.VISIBLE);\r\n        let options_all = this._createOption(this.optionEnum.ALLLAYER, this.optionTextEnum.ALLLAYER);\r\n\r\n        selectContent.appendChild(option_topmost);\r\n        selectContent.appendChild(options_visible);\r\n        selectContent.appendChild(options_all);\r\n        selectContainer.appendChild(curSelectContent);\r\n\r\n        selectContentContainer.appendChild(selectContent);\r\n        document.body.appendChild(selectContentContainer);\r\n\r\n        this.selectOption(options_all);\r\n\r\n        this.element.appendChild(selectContainer);\r\n        return selectContainer;\r\n    }\r\n\r\n    /**\r\n     * 选择某个选项\r\n     * @param optionElement\r\n     * @return {IdentifyLayerTypeSelect}\r\n     */\r\n    selectOption(optionElement){\r\n        let copyElement = document.createElement(\"label\");\r\n        copyElement.setAttribute(this.valueFieldName, optionElement.getAttribute(this.valueFieldName));\r\n        copyElement.innerText = optionElement.childNodes[0].innerText;\r\n\r\n        this._selectLiElement = copyElement;\r\n        this._curSelected = copyElement;\r\n\r\n        let citeElement = this._layerTypeSelectControl.childNodes[0];\r\n        let oldOptionElement = citeElement.childNodes[0];\r\n\r\n        citeElement.removeChild(oldOptionElement);\r\n        citeElement.appendChild(copyElement);\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * 增加选项\r\n     * @param value\r\n     * @param text\r\n     * @param iconName\r\n     */\r\n    addOption(value, text, iconName){\r\n        let option = this._createOption(value, text, iconName);\r\n        this._layerTypeOptionContaniner.appendChild(option);\r\n    }\r\n\r\n    /**\r\n     * 增加树节点的选项\r\n     * @param treeNodes\r\n     * @param title 是否需要分割线，分割线的标题，有标题则有分割线\r\n     * treeNodes {\r\n     *\r\n     * }\r\n     */\r\n    addTreeNodeOption(treeNodes, title){\r\n        if(treeNodes && treeNodes.length > 0){\r\n            let option = this._addTreeNodeOption(treeNodes);\r\n            let separateline = this._createSeparateline(title);\r\n            this._layerTypeOptionContaniner.appendChild(separateline);\r\n            this._layerTypeOptionContaniner.appendChild(option);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 增加树节点的option选项\r\n     * @param treeNodes\r\n     * @param element\r\n     * @private\r\n     */\r\n    _addTreeNodeOption(treeNodes){\r\n        let treeContainer = document.createElement(\"ul\");\r\n        treeContainer.className = \"TreeContainerElement\";\r\n\r\n        for (let i = 0, length = treeNodes.length; i < length; i++){\r\n            let treeNode = treeNodes[i];\r\n\r\n            let treeNodeElement = this._createOption(treeNode.value? treeNode.value : treeNode.title, treeNode.title, treeNode.icon, true);\r\n\r\n            if(treeNode.childLayer){\r\n                let childULElement = this._addTreeNodeOption(treeNode.childLayer);\r\n                treeNodeElement.appendChild(childULElement);\r\n            }\r\n            treeContainer.appendChild(treeNodeElement);\r\n        }\r\n        return treeContainer;\r\n    }\r\n\r\n    /**\r\n     * 展示和隐藏面板\r\n     * @param evt\r\n     */\r\n    showorhideOptionPanel(evt){\r\n        if(!this._layerTypeSelect.classList.contains(\"selectElementshown\")){\r\n            this.showOptionPanel(evt);\r\n        }else{\r\n            this.hideOptionPanel(evt);\r\n        }\r\n    }\r\n    /**\r\n     * 展示选择面板\r\n     * @param evt\r\n     */\r\n    showOptionPanel(evt){\r\n        if(!this._layerTypeSelect.classList.contains(\"selectElementshown\")){\r\n            this._layerTypeSelect.classList.add(\"selectElementshown\");\r\n        }\r\n\r\n        let div_top = this._getOffsetTopByBody(this._layerTypeSelectControl), div_left = this._getOffsetLeftByBody(this._layerTypeSelectControl);\r\n        //自动适配位置\r\n        if( div_top + this._layerTypeSelectControl.offsetHeight + this.maxHeight > document.body.offsetHeight)\r\n        {\r\n            this._layerTypeSelect.style.left = div_left + 'px';\r\n            this._layerTypeSelect.style.top = div_top - this._layerTypeSelect.offsetHeight + 'px';\r\n        }else{\r\n            this._layerTypeSelect.style.left = div_left + 'px';\r\n            this._layerTypeSelect.style.top = div_top + this._layerTypeSelectControl.offsetHeight + 'px';\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 隐藏选择面板\r\n     * @param evt\r\n     */\r\n    hideOptionPanel(evt){\r\n        if(this._layerTypeSelect.classList.contains(\"selectElementshown\")){\r\n            this._layerTypeSelect.classList.remove(\"selectElementshown\");\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 获取要素到body顶部的像素\r\n     * @param el\r\n     * @return {number}\r\n     * @private\r\n     */\r\n    _getOffsetTopByBody(el){\r\n        let offsetTop = 0;\r\n        while (el && el.tagName !== 'BODY') {\r\n            offsetTop += el.offsetTop;\r\n            el = el.offsetParent;\r\n        }\r\n        return offsetTop\r\n    }\r\n\r\n    /**\r\n     * 获取要素到bodu最左边的像素值\r\n     * @param el\r\n     * @return {number}\r\n     * @private\r\n     */\r\n    _getOffsetLeftByBody(el){\r\n        let offsetLeft = 0;\r\n        while (el && el.tagName !== 'BODY') {\r\n            offsetLeft += el.offsetLeft;\r\n            el = el.offsetParent;\r\n        }\r\n        return offsetLeft;\r\n    }\r\n    /**\r\n     * 创建当前选择的内容\r\n     * @private\r\n     */\r\n    _createCurrentOption(){\r\n        let container = document.createElement(\"cite\");\r\n        let lable = this._curSelected =  document.createElement(\"lable\");\r\n        lable.innerText = \"下拉选择\";\r\n\r\n        container.appendChild(lable);\r\n        container.onclick = (e)=> this.showorhideOptionPanel(e);\r\n\r\n        return container;\r\n    }\r\n    /**\r\n     * 创建仿照Select要素\r\n     * @return {HTMLUListElement}\r\n     * @private\r\n     */\r\n    _createSelect(){\r\n        let selectElement = document.createElement(\"ul\");\r\n\r\n        selectElement.onmouseleave = (e)=> this.hideOptionPanel(e);\r\n\r\n        return selectElement;\r\n    }\r\n\r\n    /**\r\n     * 创建仿照option要素\r\n     * @param value\r\n     * @param text\r\n     * @return {HTMLLIElement}\r\n     * @private\r\n     */\r\n    _createOption(value, text, iconName, isTreeNode){\r\n        let optionElement = document.createElement(\"li\");\r\n        optionElement.className = !isTreeNode ? \"optionElement\" : \"treeNodeElement\";\r\n        optionElement.setAttribute(this.valueFieldName, value);\r\n        optionElement.onclick = (e)=> {\r\n            this.selectOption(optionElement);\r\n            this.hideOptionPanel(e);\r\n            e.stopPropagation();\r\n        };\r\n\r\n        let aElement = document.createElement(\"a\");\r\n\r\n        if(this.defaultImage[iconName]){\r\n            let iconElement = document.createElement(\"img\");\r\n            iconElement.src = this.defaultImage[iconName];\r\n            //如果是树节点，则增加折叠事件\r\n            isTreeNode && (iconElement.onclick = function(e){\r\n                let targetElement = e.target;\r\n                while (targetElement.tagName != \"LI\"){\r\n                    targetElement = targetElement.parentNode;\r\n                }\r\n                for(let i = 0, length = targetElement.childElementCount; i < length; i++){\r\n                    let childElement = targetElement.childNodes[i];\r\n                    if(childElement.tagName == \"UL\"){\r\n                        if(childElement.classList.contains(\"hidden\")){\r\n                            childElement.classList.remove(\"hidden\");\r\n                        }else{\r\n                            childElement.classList.add(\"hidden\");\r\n                        }\r\n                        break;\r\n                    }\r\n                }\r\n                e.stopPropagation();\r\n            });\r\n            aElement.appendChild(iconElement);\r\n        }\r\n\r\n        let textContent = document.createElement(\"lable\");\r\n        textContent.innerText = text;\r\n        // textContent.setAttribute(this.valueFieldName, value);\r\n\r\n        aElement.appendChild(textContent);\r\n        optionElement.appendChild(aElement);\r\n\r\n        return optionElement;\r\n    }\r\n\r\n    /**\r\n     * 创建分割线\r\n     * @param text 分割线标题\r\n     * @return {HTMLSpanElement}\r\n     * @private\r\n     */\r\n    _createSeparateline(text){\r\n        let separateline = document.createElement(\"div\");\r\n        separateline.className = \"Separateline\";\r\n\r\n        if(text){\r\n            let bBefore = document.createElement(\"b\");\r\n            let bAfter = document.createElement(\"b\");\r\n            let textContanier = document.createElement(\"span\");\r\n            textContanier.innerText = text;\r\n            separateline.appendChild(bBefore);\r\n            separateline.appendChild(textContanier);\r\n            separateline.appendChild(bAfter);\r\n        }\r\n        return separateline;\r\n    }\r\n\r\n    /**\r\n     * @public\r\n     * @desc get the LayerType Select Element has selectd Value\r\n     * @returns {string} selected options Value\r\n     */\r\n    getLayerTypeSelectValue(){\r\n        return this._curSelected.getAttribute(this.valueFieldName) ? this._curSelected.getAttribute(this.valueFieldName) : null;\r\n    }\r\n}","import \"./ol-Identify-FeatureLayerTree.css\";\r\nimport IdentifyBaseComponent from \"../ol-Identify-BaseComponent\";\r\n// /**\r\n//  * OpenLayers Feature Identify Control. LayerTree Component\r\n//  * @constructor\r\n//  * @param {Object} element, the component renderby:\r\n//  */\r\nexport default  class IdentifyFeatureLayerTree extends IdentifyBaseComponent{\r\n    constructor(element, dataNode){\r\n        super(element);\r\n        /**\r\n         * _DataTreeNode Array{Object}\r\n         * Object{\r\n         *      layerGroup: string,\r\n         *      layerGroupSource: ol_layer_Layer,\r\n         *      groupIndex:number,\r\n         *      layerData: Array{layerObject}\r\n         * }\r\n         * layerObject{\r\n         *      layerName：string，\r\n         *      layerSource： ol_feature,\r\n         *      groupIndex: number,\r\n         *      layerIndex: number\r\n         * }\r\n         */\r\n        this._DataTreeNode = dataNode;   // feature treeNode data\r\n        this._selectTreeNode = null;\r\n\r\n        //Evented Listener set Varience\r\n        let noop = ()=>{} // empty operation\r\n        this._TreeNodeOnClick = noop;\r\n        this._TreeNodeOnHover = noop;\r\n        this._TreeGroupOnClick = noop;\r\n        this._TreeGroupOnHover = noop;\r\n    }\r\n    /**\r\n     * @public\r\n     * @desc build the featureTree in the specific element\r\n     */\r\n    initComponent(){\r\n        //before create tree, need to empty the container\r\n        this.element.innerHTML = \"\";\r\n\r\n        let feateaTree = document.createElement(\"div\");\r\n        this.element.appendChild(feateaTree);\r\n        //create Tree Node\r\n        let treeNode = this._renderTreeNodes(this._DataTreeNode);\r\n        feateaTree.appendChild(treeNode);\r\n\r\n        return this;\r\n    }\r\n    /**\r\n     * @desc bind the event on element operation\r\n     * @param eventName\r\n     * @param callback\r\n     * @returns {identify}\r\n     */\r\n    bindEvent(eventName, callback){\r\n        if(!callback){\r\n            console.warn(\"callback is underfind on bindEvent!\");\r\n            return;\r\n        }\r\n        /**\r\n         * no bind this;\r\n         */\r\n        switch(eventName){\r\n            case \"treeclick\":\r\n                this._TreeNodeOnClick = callback;\r\n                break;\r\n            case \"treemove\":\r\n                this._TreeNodeOnHover = callback;\r\n                break;\r\n            default:\r\n                console.warn(\"Don's have this event on BindEvent\");\r\n                break;\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * @desc select the treeNode，include affect\r\n     * @param treeNodeData\r\n     */\r\n    selectTreeNodeByData(treeNodeData){\r\n        let groupIndex = treeNodeData.groupIndex, layerIndex = treeNodeData.layerIndex;\r\n        let _element = this.element.childNodes[0].childNodes[0];\r\n        let groupNode = _element.childNodes[groupIndex];\r\n        let layerNode = groupNode.childNodes[1].childNodes[layerIndex];\r\n\r\n        this._selectFeatureTreeNode(layerNode, treeNodeData);\r\n    }\r\n    /**\r\n     *\r\n     * @param element\r\n     * @private\r\n     * @desc render all the Tree Node for featureTree\r\n     */\r\n    _renderTreeNodes(dataNode){\r\n        let ul = document.createElement('ul');\r\n        for (let i = 0, length = dataNode.length; i < length; i++){\r\n            let layerGroupNode = dataNode[i];\r\n            let li = document.createElement(\"li\"), label = document.createElement('label');\r\n            let ul_ChildNode = this._renderTreeNode_(layerGroupNode.layerData);\r\n\r\n            li.className = 'group';\r\n            label.innerHTML = layerGroupNode.layerGroup + \"(\" + layerGroupNode.layerData.length + \")\";\r\n            label.onclick = (e)=>this._treeGroupClickHandle(e, ul_ChildNode);\r\n\r\n            li.appendChild(label);\r\n            li.appendChild(ul_ChildNode);\r\n            ul.appendChild(li);\r\n        }\r\n        return ul;\r\n    }\r\n    /**\r\n     * 树的组节点被点击处理事件\r\n     * @param evt\r\n     * @private\r\n     */\r\n    _treeGroupClickHandle(evt, ul){\r\n        if(ul.classList.contains(\"hidden\")){\r\n            ul.classList.remove(\"hidden\");\r\n            ul.parentNode.classList.remove(\"folding\");\r\n        }else{\r\n            ul.classList.add(\"hidden\");\r\n            ul.parentNode.classList.add(\"folding\");\r\n        }\r\n    }\r\n    /**\r\n     *\r\n     * @param element\r\n     * @private\r\n     * @desc render one of Tree Node for featureTree\r\n     */\r\n    _renderTreeNode_(layerNode){\r\n        let ul = document.createElement('ul');\r\n        for (let i = 0, length = layerNode.length; i < length; i++){\r\n            let featureNode = layerNode[i];\r\n            let lyrTitle = featureNode.layerName, lyrId = lyrTitle;\r\n            let li = document.createElement('li'), label = document.createElement('label');\r\n            li.className = 'layer';\r\n            // let icon = document.createElement(\"i\");\r\n            // icon.className = \"treeicon\";\r\n\r\n            label.htmlFor = lyrId;\r\n            label.innerText = lyrTitle;\r\n            // li.appendChild(icon);\r\n            li.appendChild(label);\r\n            //bind click、hover Event, !!! no bind this on Event !!!\r\n            li.onclick = (evt)=> this._FeatureTreeNodeOnClick.call(Object.assign(this, {_layer_: featureNode}), evt);\r\n            li.ontouchstart = (evt)=> this._FeatureTreeNodeOnClick.call(Object.assign(this, {_layer_: featureNode}), evt);\r\n            li.onmousemove = (evt)=> this._TreeGroupOnHover.call(Object.assign(this, {_layer_: featureNode}), evt);\r\n            li.ontouchmove = (evt)=> this._TreeGroupOnHover.call(Object.assign(this, {_layer_: featureNode}), evt);\r\n\r\n            ul.appendChild(li);\r\n        }\r\n        return ul;\r\n    }\r\n    /**\r\n     * @desc when the feature TreeNode li was clicked， will trigger\r\n     * @param evt MouseClick Event\r\n     * @private\r\n     */\r\n    _FeatureTreeNodeOnClick(evt){\r\n        let targetliElement = null;\r\n        for(let i = 0, length = evt.path.length; i < length; i++){\r\n            let tmpElement = evt.path[i];\r\n            let nodeName = tmpElement[\"nodeName\"] ? tmpElement[\"nodeName\"]\r\n                : (tmpElement[\"tagName\"] ? tmpElement[\"tagName\"] : null);\r\n\r\n            if( nodeName && nodeName.toLocaleUpperCase() === \"LI\"\r\n                && tmpElement.classList.contains(\"layer\")){\r\n                targetliElement = tmpElement;\r\n                break;\r\n            }\r\n        }\r\n        if(targetliElement == null){\r\n            throw new Error(\"click the Error Place，check your code, Html file and Js file\");\r\n        }\r\n        this._selectFeatureTreeNode(targetliElement, this._layer_);\r\n        this._TreeNodeOnClick(evt, this._layer_);\r\n    }\r\n    /**\r\n     * @desc select a feature Tree node , this will be trigger\r\n     * @param element {HtmlElement} the Tree Node element , ** li node **\r\n     * @param item {layerNode} the Layer Node\r\n     * @private\r\n     */\r\n    _selectFeatureTreeNode(element, item){\r\n        //change the select item's css style\r\n        let selectedNode = this.selectTreeNode;\r\n        if(selectedNode && selectedNode.classList.contains(\"select\")){\r\n            selectedNode.classList.remove(\"select\");\r\n        }\r\n        let treeNode = this.selectTreeNode = element;\r\n        if(treeNode && !treeNode.classList.contains(\"select\")){\r\n            treeNode.classList.add(\"select\");\r\n        }\r\n    }\r\n    /**\r\n     *\r\n     * @param flCollection simple\r\n     * @private\r\n     * @return {Array} DataTreeNode\r\n     * TODO 想方法获取图层的名字，这里不知道怎么获取\r\n     *\r\n     */\r\n    static createTreeNodeData(flCollection){\r\n        let result = [];\r\n        if(!flCollection instanceof Array){\r\n            console.error(\"调用_createTreeNodeData的参数错误！\");\r\n        }else{\r\n            for (let i = 0, length = flCollection.length; i < length; i++){\r\n                let featureAndLayer = flCollection[i];\r\n                let layer = featureAndLayer[0], feature = featureAndLayer[1];\r\n                if(!layer){\r\n                   continue;\r\n                }\r\n                let layerGroupTitle = layer.get(\"title\")\r\n                    ? layer.get(\"title\")\r\n                    : \"无标题\" + i;\r\n\r\n                let hasResult = result.findIndex((value, index, arr) => {\r\n                    return value.layerGroup == layerGroupTitle && value.layerGroupSource === layer;\r\n                });\r\n                if(hasResult === -1){\r\n                    let featureData = { layerName: feature. id_, layerSource: feature, groupIndex: result.length, layerIndex: 0 };\r\n                    result.push({\r\n                        layerGroup: layerGroupTitle,\r\n                        layerGroupSource: layer,\r\n                        groupIndex: result.length,\r\n                        layerData: [featureData]\r\n                    });\r\n                }else{\r\n                    let featureData = { layerName: feature. id_, layerSource: feature, groupIndex: hasResult, layerIndex: result[hasResult][\"layerData\"].length };\r\n                    result[hasResult][\"layerData\"].push(featureData);\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * 获取树节点的第一个要素\r\n     * @param flCollection\r\n     */\r\n    static getTreeNodeFirstData(dataTreeNode){\r\n        let result = null;\r\n        if(dataTreeNode && dataTreeNode.length > 0){\r\n            let layersData = dataTreeNode[0][\"layerData\"];\r\n            if(layersData && layersData.length > 0){\r\n                result = layersData[0];\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n}","import \"./ol-Identify-FeatureAttrTable.css\";\r\nimport IdentifyBaseComponent from \"../ol-Identify-BaseComponent\";\r\n// /**\r\n//  * OpenLayers Feature Identify Control. LayerTree Component\r\n//  * @constructor\r\n//  * @param {Object} element, the component renderby:\r\n//  */\r\nexport default  class IdentifyFeatureAttrTable extends IdentifyBaseComponent{\r\n    constructor(element){\r\n        super(element);\r\n    }\r\n    /**\r\n     * @desc render the feature's Attribute on the element by table form\r\n     * @public\r\n     */\r\n    initComponent(feature){\r\n        this.element.innerHTML = \"\";\r\n\r\n        let keys = feature.getKeys(), propertity = feature.getProperties();\r\n        let tableContainer = document.createElement(\"table\");\r\n        tableContainer.className = \"altrowstable\";\r\n        for(let i = 0, length = keys.length; i < length; i++){\r\n            if(keys[i] == feature.getGeometryName()) continue;\r\n            let tr = document.createElement(\"tr\");\r\n            let th_title = document.createElement(\"th\");\r\n            th_title.className = \"title\";\r\n            let th_value = document.createElement(\"th\");\r\n            if( i % 2 == 0){\r\n                th_title.classList.add(\"evenrowcolor\");\r\n                th_value.classList.add(\"evenrowcolor\");\r\n            }else{\r\n                th_title.className = \"title oddrowcolor\";\r\n                th_value.className = \"oddrowcolor\";\r\n            }\r\n            th_title.innerText = keys[i];\r\n            th_value.innerText = propertity[keys[i]];\r\n\r\n            tr.appendChild(th_title);\r\n            tr.appendChild(th_value);\r\n            tableContainer.appendChild(tr);\r\n        }\r\n        this.element.appendChild(tableContainer);\r\n\r\n        return this;\r\n    }\r\n}","import IdentifyBaseComponent from \"../ol-Identify-BaseComponent\";\r\nconst defaultImagePath = require(\"./img/box-select.png\");\r\n/**\r\n * OpenLayers Feature Identify Control. Tool Component\r\n * @constructor\r\n * @param {Object} element, the component renderby:\r\n */\r\nexport default  class IdentifyTool extends IdentifyBaseComponent{\r\n    constructor(element, options){\r\n        super(element);\r\n        let _options = options || {};\r\n        this.toolContaniner = null;\r\n\r\n        this.toolClassName =  _options.className ? _options.className : \"toolContanier\";\r\n        this.iconImage = _options.iconImage ? _options.iconImage : defaultImagePath;\r\n        this.handle = _options.handle ? _options.handle : function(){};\r\n    }\r\n    initComponent(){\r\n        ;\r\n\r\n        let toolContanier = this.toolContaniner = document.createElement(\"a\");\r\n        toolContanier.className = this.toolClassName;\r\n        toolContanier.style.backgroundImage = \"url(\" + this.iconImage + \")\";\r\n        toolContanier.onclick = this.handle;\r\n\r\n        this.element.appendChild(toolContanier);\r\n    }\r\n\r\n    /**\r\n     * 设置tool为激活状态，增加select颜色\r\n     * @param active\r\n     */\r\n    setActive(active){\r\n        if(!active){\r\n            if(this.toolContaniner.classList.contains(\"select\")){\r\n                this.toolContaniner.classList.remove(\"select\")\r\n            }\r\n        }else{\r\n            if(!this.toolContaniner.classList.contains(\"select\")){\r\n                this.toolContaniner.classList.add(\"select\")\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 获取tool的状态\r\n     * @return {boolean}是否是激活状态\r\n     */\r\n    getActive(){\r\n        return this.toolContaniner.classList.contains(\"select\");\r\n    }\r\n}","import IdentifyBaseComponent from \"../ol-Identify-BaseComponent\";\r\nimport IdentifyTool from './ol_Identify-Tool';\r\nconst boxSelectImagePath = require(\"./img/box-select.png\");\r\nconst treeClearImagePath = require(\"./img/tree-clear.png\");\r\nconst treeHiddenImagePath = require(\"./img/tree-hidden.png\");\r\nconst tableHiddenImagePath = require(\"./img/table-hidden.png\");\r\nconst featureFitImagePath = require(\"./img/feature-fitbound.png\");\r\n/**\r\n * OpenLayers Feature Identify Control. Toolbar Component\r\n * @constructor\r\n * @param {Object} element, the component renderby:\r\n */\r\nexport default  class IdentifyToolbar extends IdentifyBaseComponent{\r\n    constructor(element){\r\n        super(element);\r\n\r\n        this.tools = [];\r\n        this.toolbarContanier = null;\r\n        this.toolbarClassName = \"toolbarContanier\";\r\n        //TODO 完善更多的功能\r\n        this.defaultOptions = {\r\n            name:  null,\r\n            image: null,\r\n            handle: null,\r\n            imageUrl:   null,\r\n            imageFocus: null,\r\n            className: \"\"\r\n        };\r\n        this.defaultImageEmun = {\r\n            boxSelect:  boxSelectImagePath,\r\n            clearTree:  treeClearImagePath,\r\n            hideTree:   treeHiddenImagePath,\r\n            hideTable:  tableHiddenImagePath,\r\n            fitFeature: featureFitImagePath\r\n        };\r\n    }\r\n    initComponent(){\r\n        let toolbarContanier = this.toolbarContanier = document.createElement(\"div\");\r\n        toolbarContanier.className = this.toolbarClassName;\r\n\r\n        this.element.appendChild(toolbarContanier);\r\n    }\r\n\r\n    /**\r\n     * 把tool增加到工具栏\r\n     * @param tool\r\n     * @private\r\n     */\r\n    _addToolToToolbar(tool){\r\n        let _tool = new IdentifyTool(this.toolbarContanier, tool);\r\n        _tool.initComponent();\r\n\r\n        return _tool;\r\n    }\r\n\r\n    /**\r\n     * 增加额外的功能到工具栏\r\n     * @param options\r\n     */\r\n    registerExtraTool(options){\r\n        let _options = this._extend(this.defaultOptions, options || {});\r\n        if(!_options.name && !_options.handle){\r\n            throw new Error(\"registerExtraTool 的参数不正确，必须有name和handle参数!\")\r\n        }\r\n        let handle = _options.handle ? _options.handle : null;\r\n        let iconImage = _options.imageUrl ? _options.imageUrl : (\r\n            _options.image ? this.defaultImageEmun[_options.image] : null);\r\n        let className = _options.className ? _options.className : null;\r\n\r\n        let _tool = this._addToolToToolbar({\r\n            handle: handle,\r\n            iconImage: iconImage,\r\n            className: className\r\n        });\r\n        this.tools.push(_tool);\r\n\r\n        return _tool;\r\n    }\r\n\r\n    /**\r\n     * @desc reset all of the tools\r\n     * @public\r\n     */\r\n    resetTool(){\r\n        for (let i = 0, length = this.tools.length; i < length; i++){\r\n            this.tools[i].setActive(false);\r\n        }\r\n    }\r\n}","import IdentifyBaseComponent from \"../ol-Identify-BaseComponent\";\r\nimport \"./ol-Identify-TitlePanel.css\";\r\n\r\nexport default  class IdentifyTitlePanel extends IdentifyBaseComponent{\r\n    constructor(element, options){\r\n        super(element);\r\n        let _options = options || {};\r\n        this.titleText = _options.title ? _options.title : \"Identify\";\r\n    }\r\n    initComponent(){\r\n        let titleContainer = document.createElement(\"div\");\r\n        titleContainer.className = \"titlePanel\";\r\n\r\n        let titleContent = document.createElement(\"h3\");\r\n        titleContent.innerText = \"Identify\";\r\n\r\n        titleContainer.appendChild(titleContent);\r\n        this.element.appendChild(titleContainer);\r\n    }\r\n}","import \"./ol-Identify.css\";\r\nimport Control from 'ol/control/control';\r\nimport Observable from 'ol/observable';\r\n\r\nimport FeatureHighLight from './utils/FeatureHighLight/ol-FeatureHighLight-Utils';\r\nimport FeatureLayerHelper from './utils/FeatureLayer/ol-FeatureLayer-Utils';\r\nimport MapDrawHelper from './utils/MapSelection/ol-MapSelection-Utils';\r\nimport MapCoordinateHelper from './utils/MapCoordinate/ol-MapCoordinate-Utils';\r\nimport IdentifyLayerTypeSelect from './component/TypeSelect/ol-Identify-TypeSelect';\r\nimport IdentifyFeatureLayerTree from './component/LayerTree/ol-Identify-FeatureLayerTree';\r\nimport IdentifyFeatureAttrTable from './component/AttrTable/ol-Identify-FeatureAttrTable';\r\nimport IdentifyFeatureToolbar from './component/ToolBar/ol-Identify-Toolbar';\r\nimport IdentifyFeatureTitlePanel from './component/TitlePanel/ol-Identify-TitlePanel';\r\n\r\n/**\r\n * OpenLayers Feature Identify Control.\r\n * @constructor\r\n * @extends {ol.control.Control}\r\n * @param {Object} opt_options Control options, extends olx.control.ControlOptions adding:\r\n * **`position`** `String` - the button positon. left right\r\n */\r\nexport default class identify extends Control{\r\n    constructor(opt_options) {\r\n        /**\r\n         * external Args\r\n         * @type {*|{Object}}\r\n         */\r\n        let options = opt_options || {};\r\n        //This will be Container, the entry\r\n        let element = document.createElement('div');\r\n        super({element: element, render: options.render, target: options.target});\r\n       //Add the element Css Class\r\n        this.closeClassName = 'ol-unselectable ol-control identify';\r\n        this.openClassName = 'shown';\r\n        if (this._isTouchDevice()) {\r\n            this.closeClassName += ' touch';\r\n        }\r\n        //declare the container positon\r\n        this.position = !! options.position? options.position : \"top\";\r\n\r\n        element.className = this.closeClassName + \" \" + this.position;\r\n\r\n        //Map Evented Listeners Conventent to register and unregister\r\n        this.mapListeners = [];\r\n\r\n        //declare other variance\r\n        this.button = null;     //entry button\r\n        this.infoWindow = null; //result infowindow\r\n        this.highlight = null;  // control the feature highlight\r\n        this._mapDrawHelper = null; //map select region control\r\n\r\n        this._toolbarContanier = null;// toolbar element\r\n        this._layerTypeSelect = null;// layer type 's select element\r\n        this._layerFeatureTree = null;// layer feature component\r\n        this._featureSelected =  null;// feature which feature tree has selected\r\n        this._featureAttrTable = null;// feature Attribute table component\r\n\r\n        this.featureSelectedTree = null;// the tree for feature which has selected\r\n        this.featureSelectedTreeContainer = null;// the tree container for feature which has selected\r\n        this.featureAttributeTable = null;// the feature Attribute table element\r\n        this.featureAttributeContainer = null;// thre feature Attribute container element\r\n\r\n        this.featureTreeHiddenTool = null;  //featureTreeHiddenTool,which control the featureTree hidden\r\n        this.featureAttrTableHiddenTool = null; //featureAttrTableHiddenTool, which control the featureAttrTabl hidden\r\n    }\r\n\r\n    /**\r\n     * @desc show the Identify component\r\n     * @public\r\n     * @return {identify}\r\n     */\r\n    showIdenditfy(){\r\n        //create the entry Button\r\n        this._initEntryBtnElement(this.element);\r\n        //create the result infoWindow\r\n        this._initResultInfoWindow(this.element);\r\n        return this;\r\n    }\r\n    /**\r\n     * @private\r\n     * @desc Create the Identify Button in Container\r\n     */\r\n    _initEntryBtnElement(element){\r\n        this.button = document.createElement('button');\r\n        this.button.setAttribute('title', \"ol_Identify_\");\r\n        this.button.onclick = (e)=>{\r\n            e = e || window.event;\r\n            this.showOrCloseIdentify();\r\n            e.preventDefault();\r\n        };\r\n        element.appendChild(this.button);\r\n    }\r\n    /**\r\n     * @private\r\n     * @desc Create the InfoWindow in Container\r\n     */\r\n    _initResultInfoWindow(element){\r\n        this.infoWindow = document.createElement('div');\r\n        //declare the container positon\r\n        this.infoWindow.className = 'infoWindow';\r\n        element.appendChild(this.infoWindow);\r\n        this._enableTouchScroll(this.infoWindow);\r\n\r\n        this._renderInfoWindowBase(this.infoWindow);\r\n    }\r\n    /**\r\n     * Set the map instance the control is associated with.\r\n     * @param {ol.Map} map The map instance.\r\n     */\r\n    setMap(map) {\r\n        // Clean up listeners associated with the previous map\r\n        this._destroyMapListener();\r\n        // Wire up listeners etc. and store reference to new map\r\n        super.setMap(map);\r\n\r\n        return this;\r\n    }\r\n    /**\r\n     * @public\r\n     * @desc Show or Close the infoWindow on the Screen, auto check!!\r\n     */\r\n    showOrCloseIdentify(){\r\n        if (!this.element.classList.contains(this.openClassName)) {\r\n            this._showSpecificContainer(this.element, this._startSelectFeatures);\r\n        }else{\r\n            this._hideSpecificContainer(this.element, this._cancleSelectFeatures);\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * @public\r\n     * @desc Show the infoWindow on the Screen\r\n     */\r\n    showIdentify() {\r\n        this._showSpecificContainer(this.element);\r\n        return this;\r\n    }\r\n    /**\r\n     * @public\r\n     * @desc Hide the infoWindow on the Screen\r\n     */\r\n    closeIdentify(){\r\n        this._hideSpecificContainer(this.element);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * @private\r\n     * @desc change the cursor to identify,and need to select a feature on map\r\n     */\r\n    _startSelectFeatures() {\r\n        //change the cursor to identify\r\n        let mapElement = this.map_.getTargetElement();\r\n        mapElement.style.cursor = \"help\";\r\n        //highlight feature\r\n        this.highlight = new FeatureHighLight(this.map_);\r\n        this.highlight.startup();\r\n        //add Map click listener for select the region for features\r\n        // open the result infoWindows\r\n        this._mapDrawHelper = new MapDrawHelper(this.map_);\r\n        this.mapListeners.push(this.map_.on(\"singleclick\", (evt)=>this._mapSingleClickHandle(evt)));\r\n    }\r\n    /**\r\n     * @private\r\n     * @desc reset the cursor to custom,clear the other relative things\r\n     */\r\n    _cancleSelectFeatures(){\r\n        //reset the cursor to identify\r\n        let mapElement = this.map_.getTargetElement();\r\n        mapElement.style.cursor = \"default\";\r\n        //close the highlight layer\r\n        this.highlight.close();\r\n        //remove the featureSelectedTree\r\n        this.featureSelectedTreeContainer\r\n            =  this._destroySpecificContainer(this.featureSelectedTreeContainer);\r\n        this.featureSelectedTree\r\n            =  this._destroySpecificContainer(this.featureSelectedTree);\r\n        //remove the featureAttributeTable\r\n        this.featureAttributeContainer\r\n            =  this._destroySpecificContainer(this.featureAttributeContainer);\r\n        this.featureAttributeTable\r\n            =  this._destroySpecificContainer(this.featureAttributeTable);\r\n        //setUnActive toolbar\r\n        this._toolbarContanier.resetTool();\r\n\r\n        this._mapDrawHelper.isOpen() && this._mapDrawHelper.closeDrawRectangle();\r\n\r\n        this._destroyMapListener();\r\n    }\r\n    /**\r\n     * SingleClick EventHandle\r\n     * @param evt\r\n     * @private\r\n     */\r\n    _mapSingleClickHandle(evt){\r\n        let features, options = {}, condition = this._layerTypeSelect.getLayerTypeSelectValue();\r\n        //According to Enum optionEnum , get the collection;\r\n        switch (condition){\r\n            case this._layerTypeSelect.optionEnum.ALLLAYER:\r\n                features = this.map_.getFeaturesAtPixel(evt.pixel);\r\n                break;\r\n            case this._layerTypeSelect.optionEnum.TOPMOST:\r\n                let _features = this.map_.forEachFeatureAtPixel(evt.pixel, (_feature)=> { return _feature });\r\n                _features && (features = [_features]);\r\n                break;\r\n            case this._layerTypeSelect.optionEnum.VISIBLE:\r\n                features = this.map_.getFeaturesAtPixel(evt.pixel);\r\n                options.visible = true;\r\n                break;\r\n            default:\r\n                let layerHelper = new FeatureLayerHelper(this.map_);\r\n                let targetLayer = layerHelper.getLayerByLayerID(condition.split(\"_\")[1], this.map_.getLayers().array_);\r\n                let t_features = this.map_.getFeaturesAtPixel(evt.pixel);\r\n                features = layerHelper.getFeaturesByLayerFilter(t_features, targetLayer);\r\n                break;\r\n        }\r\n        if(!! features && features.length > 0){\r\n            let collection = this._getLayerByFeature(features, options);\r\n            this.renderInfoWindow(collection);\r\n        }\r\n    }\r\n    /**\r\n     * @public\r\n     * @desc Arfter select the feature region, Render InfoWindow for those selected features\r\n     */\r\n    renderInfoWindow(flCollection) {\r\n        let featureTreeContainer = this.featureSelectedTreeContainer\r\n            = this.featureSelectedTreeContainer\r\n            ? this.featureSelectedTreeContainer\r\n            : this._renderContainer(this.infoWindow);\r\n\r\n        let isFeatureTreeHidden = this.featureTreeHiddenTool.getActive();\r\n        let featureTreeClassName = isFeatureTreeHidden ? \"featureTreeContainer\" : \"featureTreeContainer shown\";\r\n\r\n        let featureTree = this.featureSelectedTree\r\n            = this.featureSelectedTree\r\n            ? this.featureSelectedTree\r\n            : this._renderContainer(featureTreeContainer, { className: featureTreeClassName });\r\n\r\n        let dataTreeNode = IdentifyFeatureLayerTree.createTreeNodeData(flCollection);\r\n        this._layerFeatureTree = new IdentifyFeatureLayerTree(featureTree, dataTreeNode);\r\n        this._layerFeatureTree.initComponent()\r\n            .bindEvent(\"treeclick\", (evt, layer) => this._featureTreeNodeClickHandle(layer));\r\n        // In default, select the fitst one on  dataTreeNode\r\n        // let firstNodeData = IdentifyFeatureLayerTree.getTreeNodeFirstData(dataTreeNode);\r\n        //\r\n        // if(firstNodeData !== null){\r\n        //     this._layerFeatureTree.selectTreeNodeByData(firstNodeData);\r\n        //     this._featureTreeNodeClickHandle(firstNodeData);\r\n        // }\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * @desc tree node click handle\r\n     * @param {TreeNode} item\r\n     * @private\r\n     */\r\n    _featureTreeNodeClickHandle(item){\r\n        this._featureSelected = item;\r\n        //highligh feature on map\r\n        this.highlight.highlightSpecificFeature(item.layerSource);\r\n        //create feature attribute table\r\n        let attrTableContainer = this.featureAttributeContainer\r\n            = this.featureAttributeContainer\r\n            ? this.featureAttributeContainer\r\n            : this._renderContainer(this.infoWindow);\r\n\r\n        let isFeatureAttrTableHidden = this.featureAttrTableHiddenTool.getActive();\r\n        let featureAttrTableClassName = isFeatureAttrTableHidden ? \"featureAttrTable\" :  \"featureAttrTable shown\";\r\n        let attrTable = this.featureAttributeTable\r\n            = this.featureAttributeTable\r\n            ? this.featureAttributeTable\r\n            : this._renderContainer(attrTableContainer, {className: featureAttrTableClassName});\r\n\r\n        let featureAttrTable = this._featureAttrTable = new IdentifyFeatureAttrTable(attrTable);\r\n        featureAttrTable.initComponent(item.layerSource);\r\n    }\r\n\r\n    /**\r\n     * @private\r\n     * @param {HtmlElement} element\r\n     * @param {} flCollection\r\n     * @desc create the FeatureTree in the specific element\r\n     * @return {HtmlElement} FeatureTree Element\r\n     */\r\n    _renderContainer(element, options){\r\n        let _options = options || {};\r\n        let _Contanier = document.createElement(\"div\");\r\n        for(let key in _options)\r\n            _Contanier[key] = _options[key];\r\n\r\n        element.appendChild(_Contanier);\r\n\r\n        return _Contanier;\r\n    }\r\n\r\n    /**\r\n     * @desc make the specific element display shown\r\n     * @param element\r\n     * @private\r\n     */\r\n    _showSpecificContainer(element, callback){\r\n        if (!element.classList.contains(this.openClassName)) {\r\n            element.classList.add(this.openClassName);\r\n            callback && callback.call(this, element);\r\n        }\r\n    }\r\n    /**\r\n     * @desc make the specific element display hiden\r\n     * @param element\r\n     * @private\r\n     */\r\n    _hideSpecificContainer(element, callback){\r\n        if (element.classList.contains(this.openClassName)) {\r\n            element.classList.remove(this.openClassName);\r\n            callback && callback.call(this, element);\r\n        }\r\n    }\r\n    /**\r\n     * @private\r\n     * @desc destroy the specific element\r\n     */\r\n    _destroySpecificContainer(element){\r\n        !!element && element.parentNode\r\n            && element.parentNode.removeChild(element);\r\n\r\n        return null;\r\n    }\r\n    /**\r\n     * @private\r\n     * @desc get the layer which own by specific feature\r\n     * @return\r\n     */\r\n    _getLayerByFeature(features, options){\r\n        let flCollection = [], _options = options || {};\r\n        let layerHelper = new FeatureLayerHelper(this.map_);\r\n\r\n        for (let i = 0, length = features.length; i < length; i++){\r\n            let layer = !_options.visible\r\n                ? layerHelper.getLayerByFeature(features[i])\r\n                : layerHelper.getVisibleLayerByFeature(features[i]);\r\n            flCollection.push([layer, features[i]]);\r\n        }\r\n        return flCollection;\r\n    }\r\n    /**\r\n     * @private\r\n     * @desc Render InfoWindow for those selected features\r\n     */\r\n    _renderInfoWindowBase(element){\r\n        let mainContainer = element;\r\n        //create Title\r\n        let titlepanelContainer = new IdentifyFeatureTitlePanel(mainContainer, { title: \"Identify\"});\r\n        titlepanelContainer.initComponent();\r\n        //create layer type selected options\r\n        let optionsContainer = this._layerTypeSelect = new IdentifyLayerTypeSelect(mainContainer);\r\n        optionsContainer.initComponent();\r\n        this._addLayerInfoOnTypeSelect(optionsContainer);\r\n        //create toolbar\r\n        let toolbarContanier = this._toolbarContanier = new IdentifyFeatureToolbar(mainContainer);\r\n        toolbarContanier.initComponent();\r\n        this._regiserToolonToolbar(toolbarContanier);\r\n    }\r\n\r\n    /**\r\n     * add layer info on the typeSelectComponent\r\n     * @param optionsContainer\r\n     * @private\r\n     */\r\n    _addLayerInfoOnTypeSelect(optionsContainer){\r\n        let layerHelper = new FeatureLayerHelper(this.map_);\r\n        let layerInfo = layerHelper.getVectorLayerInfo(this.map_.getLayers());\r\n\r\n        this._layerTypeSelect.addTreeNodeOption(layerInfo, \"图层列表\");\r\n    }\r\n    /**\r\n     * regiser default Tool on Toolbar\r\n     * @param toolbarContanier\r\n     * @private\r\n     */\r\n    _regiserToolonToolbar(toolbarContanier){\r\n        //bind draw polygon select feature\r\n        let boxSelectTool = toolbarContanier.registerExtraTool({\r\n            name: \"boxSelect\", handle: ()=> this._boxSelectHandler(boxSelectTool), image: \"boxSelect\"\r\n        });\r\n        let treeHiddenTool = this.featureTreeHiddenTool = toolbarContanier.registerExtraTool({\r\n            name: \"treeHidden\", handle: ()=> this._containerHiddenHandle(treeHiddenTool, this.featureSelectedTree), image: \"hideTree\"\r\n        });\r\n        let tableHiddenTool = this.featureAttrTableHiddenTool = toolbarContanier.registerExtraTool({\r\n            name: \"tableHidden\", handle: ()=> this._containerHiddenHandle(tableHiddenTool, this.featureAttributeTable), image: \"hideTable\"\r\n        });\r\n        let featureFitTool = toolbarContanier.registerExtraTool({\r\n            name: \"featureFit\", handle: ()=> this._fitFeatureHandle(featureFitTool, this._featureSelected\r\n                ? this._featureSelected.layerSource : null), image: \"fitFeature\"\r\n        });\r\n        let treeClearTool = toolbarContanier.registerExtraTool({\r\n            name: \"clearTree\", handle: ()=> this._treeClearHandle(treeClearTool), image: \"clearTree\"\r\n        });\r\n    }\r\n\r\n    /**\r\n     * boxSelect tool handler\r\n     * @private\r\n     */\r\n    _boxSelectHandler(tool){\r\n        if(this._mapDrawHelper.isOpen()){\r\n            this._mapDrawHelper.closeDrawRectangle();\r\n            tool.setActive(false);\r\n        }else{\r\n            this._mapDrawHelper.startDrawRectangle((element)=>{\r\n                let mapCoordinateHelper = new MapCoordinateHelper(this.map_);\r\n                let extent = mapCoordinateHelper.getExtendByElement(element);\r\n\r\n                if(extent !== null){\r\n                    let targetLayer, layers = this.map_.getLayers();\r\n                    let layerHelper = new FeatureLayerHelper(this.map_);\r\n                    let options = {}, condition = this._layerTypeSelect.getLayerTypeSelectValue();\r\n                    //According to Enum optionEnum , get the collection;\r\n                    if(condition === this._layerTypeSelect.optionEnum.ALLLAYER){\r\n                        targetLayer = layers.array_;\r\n                    }else if(condition === this._layerTypeSelect.optionEnum.TOPMOST){\r\n                        targetLayer = layers.array_;\r\n                        options.topmost = true;\r\n                    }else if(condition === this._layerTypeSelect.optionEnum.VISIBLE){\r\n                        targetLayer = layers.array_;\r\n                        options.visible = true;\r\n                    }else{\r\n                        let _targetLayer = layerHelper.getLayerByLayerID(condition.split(\"_\")[1], this.map_.getLayers().array_);\r\n                        _targetLayer && (targetLayer = [_targetLayer]);\r\n                    }\r\n                    let features = layerHelper.getFeatureByExtent(targetLayer, extent, options);\r\n\r\n                    if(!! features && features.length > 0){\r\n                        let collection = this._getLayerByFeature(features, true);\r\n                        this.renderInfoWindow(collection);\r\n                    }\r\n                }\r\n            });\r\n            tool.setActive(true);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * treeClear tool handler\r\n     * @param tool\r\n     * @private\r\n     */\r\n    _treeClearHandle(tool){\r\n        if(this.featureSelectedTreeContainer){\r\n            this._layerFeatureTree.destroyComponent();\r\n            this.featureSelectedTreeContainer = null;\r\n            this.featureSelectedTree = null;\r\n            this._layerFeatureTree = null;\r\n            this._featureSelected = null;\r\n        }\r\n        if(this.featureAttributeContainer){\r\n            this._featureAttrTable.destroyComponent();\r\n            this.featureAttributeContainer = null;\r\n            this.featureAttributeTable = null;\r\n            this._featureAttrTable = null;\r\n        }\r\n        //clear the highlightfeature\r\n        this.highlight.clearhighlightFeature();\r\n    }\r\n\r\n    /**\r\n     * hide the specific container\r\n     * @param tool\r\n     * @param container\r\n     * @private\r\n     */\r\n    _containerHiddenHandle(tool, container){\r\n        if(!container) return;\r\n\r\n        if(tool.getActive()){\r\n            this._showSpecificContainer(container);\r\n            tool.setActive(false);\r\n        }else{\r\n            this._hideSpecificContainer(container);\r\n            tool.setActive(true);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 缩放至图层工具的处理事件\r\n     * @param tool\r\n     * @private\r\n     */\r\n    _fitFeatureHandle(tool,  feature){\r\n        if(!!feature){\r\n            this.map_.getView().fit(feature.getGeometry().getExtent(), { maxZoom: 17, duration: 400 });\r\n        }\r\n    }\r\n    /**\r\n     * @private\r\n     * @desc destroy the Event Added on Map\r\n     */\r\n    _destroyMapListener(){\r\n        for (let i = 0; i < this.mapListeners.length; i++) {\r\n            Observable.unByKey(this.mapListeners[i]);\r\n        }\r\n        this.mapListeners.length = 0;\r\n    }\r\n    /**\r\n     * @private\r\n     * @desc Apply workaround to enable scrolling of overflowing content within an element\r\n     */\r\n    _enableTouchScroll(elm) {\r\n        if(this._isTouchDevice()){\r\n            let scrollStartPos = 0;\r\n            elm.addEventListener(\"touchstart\", function(event) {\r\n                scrollStartPos = this.scrollTop + event.touches[0].pageY;\r\n            }, false);\r\n            elm.addEventListener(\"touchmove\", function(event) {\r\n                this.scrollTop = scrollStartPos - event.touches[0].pageY;\r\n            }, false);\r\n        }\r\n    }\r\n    /**\r\n     * @private\r\n     * @desc Apply workaround to enable scrolling of overflowing content within an element\r\n     */\r\n    _isTouchDevice() {\r\n        try {\r\n            document.createEvent(\"TouchEvent\");\r\n            return true;\r\n        } catch(e) {\r\n            return false;\r\n        }\r\n    }\r\n}\r\n\r\n\r\n// Expose Identify as ol.control.Identify if using a full build of\r\n// OpenLayers\r\nif (window.ol && window.ol.control) {\r\n    window.ol.control.Identify = Identify;\r\n}","\nvar content = require(\"!!../../../../../../node_modules/css-loader/index.js!./ol-Identify-TitlePanel.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../node_modules/css-loader/index.js!./ol-Identify-TitlePanel.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../../node_modules/css-loader/index.js!./ol-Identify-TitlePanel.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAB1klEQVQ4T72U0XHTUBBFz5VTgFOBRQePChAVICqIqQAZB779TeyR6MAd4FSAqcAvFUQlmO9gLbOWbRLHMDbjQV+a0XtHu/feXXHmR2fmcRAYBuMK05VE14wamnex+jg/5udrYCgmI7AYq+uZwwR9MxXQ1Ei50Huz5jXYEl30YvnhNhQ3GVIPUwqWgb7HajhqgYPJHGMOyVRq7neX6byB5AtaVbC+GB3+u1L7YSgKugbLWA6zPWAzl5Jvi3Io/4ngVQtPUqCM1fAyFGUqNTOzJI/VoN51KLIDwGcV5pBU2wr9wraj7ftfga5BGExmmPVidf2yPXyTedVm9tY1Ph1YlF1pVRtMsc4ImgXiLpbDfKudy3F0hW1V41zSVzObS7ww6wT4GeAixmqwPBnYtjWeCl25KZ5Bj5ZkfTMWoIB30MYllezS3X5mimu4a6sou/CQxupTfBzoUHwOUmdqZi5H7d/XOT7k8h4whVXYGvEEeqqGW3dRMnos/j+bci7gvSTXxsPrYxbacWOKNMd8VgfLo3PoY7Zp6c6gxmjNED6f628eI8QMo488p+v5DpIyg1vP6mbblCk8dPcdfer4KtvAc1AP2sXQLhVfccnMO/g/C/aYRfqnM78A2hZqJJgRJh0AAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAA/klEQVQ4T+WUwVHDMBRE37oBKMFUgDrAJUAHKcEZwj13wsQlpAMowXTgVEBKIA14GXnAyGbCweYAg26aWT1p9/8v8cNLkReWmwpzOYst9s12Vb4DH2rME7TNNGgWENfN9rZIgO26qe7qKcBQ3hcoW4+AvACHKUAgR1wMgIJzw+sHMO7BudEgBuEAOoy1cf+t5dRG+uqwjHkP4zlh+bTodwAFVxML0h0zPP/3DLHPSPqQrg+Vg0fjqACOA9D3bKeVjsMMo8j6nBQ5FxS2dmmxJC8M9VgbL/9rRcGPIuvzMm3ALKSsTC3bbYXYfdGim8TypoIY9pzlpv9g52DGZ98AkCEcJIZ2xHYAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAABnElEQVQ4T72UT27TQBjF35sNFULCnIBwARjfIEfIkh3ZsUM2dmGbXRGNNcMN0htk0QO4J/BwgxwhF0geGpuEKm0mAaR6Y80f//y+N28+4vdjCzci9Xo3PvXu3Oe7x/ZwN5mX87XAcAoU1wlZSZPgL9vD/feAjTpX7ccpsC2bFtrOnh4IcHxOydLWAyqTCm059wDtDkggAzQ66qvMNPhyddTDwwVbXI9BMwuuOkv1PSGPF5kC2sJl4OYDxAzUOrj6x38B87IJAtYQWlJTAW1w9XSI1JHn7afr98aYKwCLgy0ZoY+dr5/HeVt8t6RpO1dn5wC/HQIlXBiDr5J5FXy5jtaQXHSuHiWBSQ/7YOslwHhTJgBugq9m/wwcSm2iZ1HVKvhqb8tRD580NoPCmFO+g7Z3wX/ZN5W0QtAFX+cPQl82y77jgIHQWKI/6WGE9HkTOpBLxtwBkDYvSHP755TnE/Q/rt4kD2Uoy2XAtgCxv36SLkjlwV0++6scprpOXs5Xg3K0EKYgfp68KckGW7gRuCn67iQsAbOIIY/f/AKycdUVuLYeXgAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAABKklEQVQ4T+2UzVHDMBCF37Mb8BFO8ZUTKsElUAJ0II8Tzj4nZKwOSAkpwSWICnBO5OgG4mVkYwiOnJ8ZuEUXa6TVp/XqvSX+eNDHU7qIgN0rgGjkvhoIn6xJ6+H+CHCRkIERabQP2O1hZU1mvEClXx4A3gMSg5wAEkmDOwb48AGlwS3JLYh3iGwAVoC8WTNdtxl+ARWABEAsIluSN8fLKzVAV5IKQAmI/Qb2B5Ve5m5uTdZ+Tw1f/K8aDgOUnitrnq3SRdxdlFb9WvdnhwmMApVeJGCQ2yJL9g+qdFlCmtyaWXkFtm94reGPrv5BNm3HSZydnJg7YTuRO9+Hpes0F+nwlO0uccqE5OocoIg8Atjse38gm7kCw4MedxQuO+1K0cd4G+w52Y3FfAIOYTUkWlIA2wAAAABJRU5ErkJggg==\"","\nvar content = require(\"!!../../../../../../node_modules/css-loader/index.js!./ol-Identify-FeatureAttrTable.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../node_modules/css-loader/index.js!./ol-Identify-FeatureAttrTable.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../../node_modules/css-loader/index.js!./ol-Identify-FeatureAttrTable.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\nvar content = require(\"!!../../../../../../node_modules/css-loader/index.js!./ol-Identify-FeatureLayerTree.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../node_modules/css-loader/index.js!./ol-Identify-FeatureLayerTree.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../../node_modules/css-loader/index.js!./ol-Identify-FeatureLayerTree.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAPCAYAAAACsSQRAAABXUlEQVQ4T52T223CQBBFzzUFhA5CCZsKQgfQgd1B7EjJd74JCNOB6QA6IB24BKggbgBPtH6AzUOK2J+Vdlez99y5I+4sFy9HUIZgY9AOgnWeJvtbz3V56OL5FAgl+b23zGyDgixfvm+7F1URFy+HUL4BkcTonrr23Iw9shQbeHWFXDJPhXyBh5YZqVyy2AleH6oAGPw0ODOHglgo/G8xw9ZYmebpZ666CxSerfEmkiwGPV8XtIOZUgiy5n3ln16SeQF6MiODcp2nH7va7O9xrY5J/atlvTuCUCICO6h+rKhFuXS+VVOp1DHEFLcdbJFOOblEMaMANpIyM4uAqcTQ/9xFqnBcsthg/PZR5tNaHZNTNmBbG9nBJaga0ctJg/KFDbZn48oxBDsf+TtIq25iT11pUeC48i108czBwAfyJtLt2emgeHVnI/tILepVkU43/BRHiDGGn2KfjZtT/AeIMtX65+VV2AAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAiCAYAAAA3WXuFAAAA+ElEQVRYR+1YsQ3CMBB8J9CzAZkAPEJGYQJkCFCnJrLiERgFapDwCBmBnoigVwjpSOFHuiKuXnL8Ov3dn99RFLi0sbl3WR6Y5ntchSbSpki9259D83TnBQCViXebCggQGGVSlRGkDE5DI2W/VaKNXXmXnaS0JND2cBoafWhIQ3AVggME5kPagFVosba7OFbXe7m9MDilmnkbFynRxLMClWqW3T7Rc+bdwWtz1ETTB08Kn28rjoN9iAFF0evGMxEDIqqTNu4BEdW63/8zICmHFrzt4UQ9Xh1DTg1HGZgPAT6DwCgD9CG4tgebqQEpA6sQYNvjiVr0h9Ubtc2rI74qi/AAAAAASUVORK5CYII=\"","\nvar content = require(\"!!../../../../../../node_modules/css-loader/index.js!./ol-Identify-TypeSelect.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../node_modules/css-loader/index.js!./ol-Identify-TypeSelect.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../../node_modules/css-loader/index.js!./ol-Identify-TypeSelect.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\nvar content = require(\"!!../../../../../../node_modules/css-loader/index.js!./ol-MapSelection-Utils.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../node_modules/css-loader/index.js!./ol-MapSelection-Utils.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../../node_modules/css-loader/index.js!./ol-MapSelection-Utils.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADWUlEQVRYR7WXTUwTURDHZ0qhDUVsaA8QRMvNhERRDOrJkthe2V5kexKiN2OAg8pBBRQjiYlijCdJrKetXvq4tofCwcSQoHDQ6MkqIRDTQosUqRTGbEObsrz9aKl73Jk377cz8/5vFqGER4hKLtjGbkAQgMCOCO3yciKYB4QkEDCopinW5Y8ZDYtGHIWI5AbAYQRwG/EngGkg0yDzXpnX89cFEMLBCUTo1wvEsxPgCPP0jGqt1QTwhaVpQLxUzub5NQTAmEf0qcVQBRDCUgARrx5m8wIEQYB5xT5eLC6AEJFGEHC4EpsXZWKQecQJZcwDAEI0ZIds5jsC2CsMkASzpZV1+ZLFcQ8CGPj63/EEJJeWIZPezMWy2GrB3twER5wOTWYCGmUe/4gmgC8ixQDwhFqkpc9fIZ1Y5ZptjgZobjupCkEEMeYVW1UBhPC7dsTdT2oR4rFFWP25CFhlglpHA5u9eT/X3RdePJzcSCSu0c4uNBxvAaerRQPCdKZYH/aVQBYcBIzyVv/dykBsdi5nsjceE9/fuP222K/z+YPr6Xj8lfzO1dkBNVYLF4KAupjHP503KgFUu1+u+/KXb2Cpq019vDPObdCOJ3eXt9bXG5tPtYHNflQNYF8fGAbIp9/mdMzM9g9zJfnc03sf/qylzmuVQdmICoDgAAI846HnM2Ctr1+ZuzXWxPM5Oz4Uz6Q3HZoZQPSxyz1MrQRl98DFl2OP11d+DR2uB6IhO2Yza7qnwFxFdU7HZMZifVSD2RZIbw+m11Z9lN1BvVMQ8oj7sn5AiHzhoHy3n/4fOgAECyGvmJshuCWQXwphqRcRX2tJWkEJN9JgMpuh2moxpoREfczrD2gCyEY9NdTUW3UJ+hHy+F1KM/82NJCFUiFI0f2qJcgbKjGMFCCJZkJeP1c71AeSqOTCLMozHV/SjKcgRWZqVxtUNUcyIaIuTEb3JwDuIKJbgkIpIkFZtbqNbqjwmwp5REFrrf5UnBOnrXmtGUHl1lmgaotbOQEZOgVKp705Qb5CjfZDisjkrsh/QR5Ga1ZQAivv/EOVoHixEZUkjtpVDCAn1Rono9TN5Xi6Tcij5/20ENEb5vX3lnpaygLYu7QKf07lbl52BgqNGZYCAJhkXnGg1C/P+/8DogVyML+S9TsAAAAASUVORK5CYII=\"","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".ol-AnimationMarker{\\r\\n    display: none;\\r\\n    position: absolute;\\r\\n    bottom: -4px;\\r\\n    left: -16px;\\r\\n}\\r\\n.ol-AnimationMarker.shown{\\r\\n    display: block !important;\\r\\n\\r\\n    animation: AnimationMarker 0.6s;\\r\\n    -moz-animation: AnimationMarker  0.6s; /* Firefox */\\r\\n    -webkit-animation: AnimationMarker  0.6s; /* Safari and Chrome */\\r\\n    -o-animation: AnimationMarker  0.6s; /* Opera */\\r\\n}\\r\\n\\r\\n.ol-AnimationMarker img{\\r\\n\\r\\n}\\r\\n\\r\\n@keyframes AnimationMarker{\\r\\n    0%{ transform: translate(0, -80px) }\\r\\n    50%{transform: translate(0, 0px) }\\r\\n    75%{transform: translate(0, -20px) }\\r\\n    100%{ transform: translate(0, 0) }\\r\\n}\\r\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../node_modules/css-loader/index.js!./ol-AnimationMarker.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js!./ol-AnimationMarker.css\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js!./ol-AnimationMarker.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAmCAYAAACoPemuAAAC/0lEQVRYR+2XQVIaQRSG/zdU4QKrYk6QAVaJQ8WcIHgCyQmCJwjuhI1kM+MSTxBzAvEEkhOIhSarGSc3wKq4kCrmpXoUhaF7ugdIyoUs6e73vvnf6/deE57pj54pF17AskZmYcWu7fbGbe5uh4EaARvMtEWEjXsA7jEwJKBbGK+dFsP28J+D/bL37bFlHYBQN3fGvdyYd9+Gh6HpmUyKXZZaHRC+mBqf28fccQJvz+S8EdhD2E4AqkqNMo5E6CZrIrTKD2D0C1F+WxdeLVgMZY3OQNiSQTHjayVw28m1q3KrzsA3xZnhepQvpsFpwS7LrS6AHZX8PI62K+FhL7ke52LOulaGjdF3AveDaj0VbFBqtYlwkJYTKrAru7XFOZyn5hPjyAnchmyPEkyE8I81un4qAXIXKrCBvV+lnHWmS/TcOCrKbqsS7LLcPAbos86wBf70zvdEuGd+pmAAf3d8b670KMEGpeaQiF7pwFTJbw4GFMb518mLIAX7WW7WItCJDiqu8QvcyqRdAnY3ffd4+n8pmEnST4woFTO4OFMgp47v1vRg5WaPQB+XUSzTx4F/VHxvpnjLFcsCJjEqPigLGJhDJ/CKq1VMAZa1rzq+OyPS8oox5trLfRu7OweRbZIOYL5wAm+m5UnBdG1ozhmjL2avxwsB1FS9Vdo7jXMs240yEiV903yRlSpm1OeSnhi/mTgkFiMPvc9CK+se6pZUaoUgvDFywLznBF5nsjdbgeabSuA9jORP3lJakn6yuDcj73XG5UIxYaROF7fWqK9TbZmxh5lv1qM1WzYwps5jJiFZBgyJFNAW2OkN+kK5aCjl5ya+taO12KibzZjRqATukXHyM18UorXqUjP/xJlWOUYfxEMwiReS9OGSdlkko5BRQYg3xTnHJN6WZmVkyrRIdIuokZy7VN6NQpk8HJcCoG4EKAovcLwe5Tu6t2Sm5E/TM+4QFldF6Bh4bNgEhMwUWhG6m6HbN4+JQYFdxNgqzywUylUCrDTHXsD+hwJZffwFjMiHNpQsBNUAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAmCAYAAACoPemuAAAC5klEQVRYR+2XTVLbQBCFXysmLCP7AsFVSNs4J4g5AeQEgSXSInACyAliFjLLOCfAnAByAsjWpsrOBezJ0j9Rp8YuU7aY0cxYTooFWtozPZ9e97xuEZ7pQ8+UCy9grplZWzH/a8/H9p99Ah8A8MGoEcGXAAzcAhAMamP06lqcVsU/B/MvezteOjkD0aHtYRKUqXQkjqt92z1OilWShwaIP9sGV6xrDKLg1Ga/FZhMG21PrwioK4MyXQC8lC7ydS/AzPc83tozpdcINoN6PbkhopoaCl8GcXCe/c9POoce0TfVHmYIHpeqeXBGsHLSbRNhXyd/StgTx4Es9pVnVos87en2SeWGcfhe938uWCXpnoNwllcTWrCkU/OI7nLrieliEO+eqNZoweYpnPYWFuCuWLfuMW5MhZ5Sqaq6rVqwSrPTAuiTMTDoo4h2209TaQcG8PdBFD6xHi1YudkVBLwxgYE1xX9pCwako1I5exGUYH7z4cADXxmh5jbvfCuzcVPmIxGHreXflWA2Rf8YRAPmEoMZ18M4kK3t8VGClZvdWwI+FFHMCQz4MYyCFfMuDMaKoPKF3MC4P4zC6kYV04O59dVBFKyIVFwxRXuZ99bJHYF2bMqBwT+HUbjS8tRghjaUPUy2F/Lo0cs45QNtb1WQqlQvfittJDGueWqyah+z6XOZw5jxC4Q+wD6B3hlZlhakiu6hd/6k2yfCW5sDUuBUREFjsdbFoBn4PYyC2UhuvJVu113d66ztQjNhmKaLe5NqRcYeqRaPSjuqgTF3HrNJSRGwbAlYpXKxyPwBsm4q1fsW5xpH61m9GWazlPlExOGFbfFLQ+XRVr3QzG+rnDRZEAkw+/nmmq+Uk2LLShBzw3QhVBYzK/S5sitzl86OrFKZ3SytgIFDG0BpvAS00nGpYfqWdCr+PIP1k04NRHUPXOOlhk3gPpj6Kbgt4vDexqStDXadYJvcs1YqNwmw0Rp7AfsfCrie8RdYRn82+vODzQAAAABJRU5ErkJggg==\"","exports = module.exports = require(\"../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".identify .infoWindow .toolbarContanier{\\r\\n    height: 35px;\\r\\n    /*border-radius: 35px;*/\\r\\n    /*box-shadow: 0 0 2px #ccc;*/\\r\\n    position: relative;\\r\\n    padding-left: 15px;\\r\\n    text-align: left;\\r\\n    background-color: #e9f0f3;\\r\\n}\\r\\n\\r\\n.identify .infoWindow a.toolContanier{\\r\\n    background-position: center 50%;\\r\\n    background-repeat: no-repeat;\\r\\n    width: 30px;\\r\\n    height: 30px;\\r\\n    top: 50%;\\r\\n    background-size: 20px 20px;\\r\\n    transform: translateY(-50%);\\r\\n    position: relative;\\r\\n    display:inline-block;\\r\\n    margin-right: 10px;\\r\\n}\\r\\n\\r\\n.identify .infoWindow a.toolContanier:hover,\\r\\n.identify .infoWindow a.toolContanier:focus,\\r\\n.identify .infoWindow .toolContanier.select{\\r\\n    background-color: white;\\r\\n}\", \"\"]);\n\n// exports\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAYCAYAAAAPtVbGAAAAjklEQVRIS2NkIAEYFHQ7XJhQeoAELWCljKRqIEc9SZaM+oTE4OoXuDCh8AOp8UKiJV0GFyaUXaCxJaM+ISGADQroEycKFyYUPiDBXaQXK/r5PTaMjMxPEJb8FmBgYH3AwPBbAUL/MQCVbbCSAUaTmIT7ae8TgwK6WEKfiB8tVohP9fTKjKNxQkqckNckAgAjW2YZ6zoksQAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAABB0lEQVQoU22S0XGDMBBEd6EBl0A6kDugg7gEUkFEMslv/B2bQa7AKsHuwB1EHYQS3ABcRhKKhcd8Mce+m909iAeP0t8K4MqZj8v9Z+YDpXc1WGgIXJgTCjKZHAzAUlgYZ9prnPcrYNI5SNV2p7jxJry3kYNUutuCqAE5Qspz2p6gIOb4DPAFgst/BqW7BkQDwS8wHiJQvoJ4gsA6825DrNnSD1Ac/PaYh03Qi1gfeLbk4XUWOonKrTPtMIeugOkLFCaYqt0byGSd+XRK9xU4aoBVtCQDpPStDeE2LBouRTy6/u28vM1+Ey1GOAsdOt+E4L6xeDnfjAWKU2pvcelblbvavz/6Nf4AaAKHgnRmo5oAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAABC0lEQVQoU5WSwU3DQBRE3yRwBiogVBDTQTqADuIOspagChLFdGB3AB1QgqkAUwHJGeJBu44RisKBf/z7d96f2RVHKgvrSWw3ZdEeHut3IwsPMxjNJfLYt6mgq5vy/mWYUxbW52g3xwoSSfmwbFrkEo9rXRfLDejs2OCRi5tImKBdEHGNvy56a6jwuFQWVgG6Bk4a6G4lAjDdq7/alDB6gq8MaaqsWJZR3eYNEfd8hs+9l9MW7W4w0d9VpKSUkvG9us0lEd9XLvE+UJqy2ETTrc1HVG/Wd3WKVkqxYlcx0iyscvBC4qKPlS6XHOxkuoLRYw/oFj3FW1vRS7/SUIO60DwBcD1Qfh7uv1/jG1GTeV0DIceFAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAs0lEQVQoU5VRwRGCQAzcDA1QgiWkBEqwA6GDuzn1q34dGdIBWIGWYAemIYgDjAyiPi7PZDfZ3RAiiyLxiCewq1KgO6gE/+/aiGlrIPHErloRtWpGN5VQ/CKxL+8Ey8wSHiSxOzNR8jRDsySxvzQErM26TGWvkwd2ZU6E2gwnlXAcF029QiU0fe/D9BwwDMcFXiXIW+pXSqME2vQAg1212uZzXz9j7T0BlKrsHssQ4v8Q++kXzw9Hq78Z4eUAAAAASUVORK5CYII=\"","var escape = require(\"../../../../node_modules/css-loader/lib/url/escape.js\");\nexports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\nexports.i(require(\"-!../../../../node_modules/css-loader/index.js!./component/TypeSelect/ol-Identify-TypeSelect.css\"), \"\");\nexports.i(require(\"-!../../../../node_modules/css-loader/index.js!./component/LayerTree/ol-Identify-FeatureLayerTree.css\"), \"\");\nexports.i(require(\"-!../../../../node_modules/css-loader/index.js!./component/AttrTable/ol-Identify-FeatureAttrTable.css\"), \"\");\nexports.i(require(\"-!../../../../node_modules/css-loader/index.js!./utils/MapSelection/ol-MapSelection-Utils.css\"), \"\");\nexports.i(require(\"-!../../../../node_modules/css-loader/index.js!./component/TitlePanel/ol-Identify-TitlePanel.css\"), \"\");\nexports.i(require(\"-!../../../../node_modules/css-loader/index.js!./component/ToolBar/ol-Identify-Toolbar.css\"), \"\");\n\n// module\nexports.push([module.id, \".identify.shown.ol-control {\\r\\n    background-color: transparent;\\r\\n}\\r\\n\\r\\n.identify.shown.ol-control:hover {\\r\\n    background-color: transparent;\\r\\n}\\r\\n\\r\\n.identify {\\r\\n    position: absolute;\\r\\n    right: 0.5em;\\r\\n}\\r\\n\\r\\n.identify.top {\\r\\n    top: 1.0em;\\r\\n}\\r\\n\\r\\n.identify.bottom {\\r\\n    bottom: 1.5em;\\r\\n}\\r\\n\\r\\n.identify.shown {\\r\\n    /*top: 1.5 em;*/\\r\\n}\\r\\n\\r\\n.identify .infoWindow {\\r\\n    width: 300px;\\r\\n    padding: 0 0 0 0;\\r\\n    margin: 0;\\r\\n    border: 1px solid #eee;\\r\\n    border-radius: 4px;\\r\\n    background-color: white;\\r\\n    display: none;\\r\\n    max-height: 100%;\\r\\n    overflow-y: auto;\\r\\n}\\r\\n\\r\\n.identify .infoWindow .featureTreeContainer {\\r\\n    width: 100%;\\r\\n    height: 180px;\\r\\n    border-radius: 5px;\\r\\n    position: relative;\\r\\n    overflow-y: auto;\\r\\n    display: none;\\r\\n}\\r\\n\\r\\n.identify .infoWindow .featureTreeContainer.shown {\\r\\n    display: block !important;\\r\\n    animation: showGradually 0.3s;\\r\\n    -moz-animation: showGradually  0.3s; /* Firefox */\\r\\n    -webkit-animation: showGradually  0.3s; /* Safari and Chrome */\\r\\n    -o-animation: showGradually  0.3s; /* Opera */\\r\\n}\\r\\n\\r\\n.identify .infoWindow .featureAttrTable {\\r\\n    width: 100%;\\r\\n    height: 280px;\\r\\n    border-radius: 5px;\\r\\n    position: relative;\\r\\n    overflow-y: auto;\\r\\n    display: none;\\r\\n    /*box-shadow: 0 0 2px #ccc;*/\\r\\n}\\r\\n\\r\\n.identify .infoWindow .featureAttrTable.shown {\\r\\n    display: block !important;\\r\\n    animation: showGradually 0.3s;\\r\\n    -moz-animation: showGradually  0.3s; /* Firefox */\\r\\n    -webkit-animation: showGradually  0.3s; /* Safari and Chrome */\\r\\n    -o-animation: showGradually  0.3s; /* Opera */\\r\\n}\\r\\n\\r\\n.identify.shown .infoWindow {\\r\\n    display: block;\\r\\n    animation: advancegradually 0.3s;\\r\\n    -moz-animation: advancegradually  0.3s; /* Firefox */\\r\\n    -webkit-animation: advancegradually  0.3s; /* Safari and Chrome */\\r\\n    -o-animation: advancegradually  0.3s; /* Opera */\\r\\n}\\r\\n\\r\\n.identify button {\\r\\n    width: 38px;\\r\\n    height: 38px;\\r\\n    background-image: url(\" + escape(require(\"./img/Identify_icon.png\")) + \") ;\\r\\n    background-repeat: no-repeat;\\r\\n    background-color: white;\\r\\n    border: none;\\r\\n    z-index:999;\\r\\n}\\r\\n\\r\\n.identify.shown button {\\r\\n    width: 38px;\\r\\n    height: 38px;\\r\\n    background-image: url(\" + escape(require(\"./img/Identify_icon_selected.png\")) + \") ;\\r\\n    background-repeat: no-repeat;\\r\\n    background-color: white;\\r\\n    border: none;\\r\\n\\r\\n    animation: advancegradually 0.3s;\\r\\n    -moz-animation: advancegradually  0.3s; /* Firefox */\\r\\n    -webkit-animation: advancegradually  0.3s; /* Safari and Chrome */\\r\\n    -o-animation: advancegradually  0.3s; /* Opera */\\r\\n}\\r\\n\\r\\n.identify button:focus, .identify button:hover {\\r\\n    background-color: #e6e6e6;\\r\\n}\\r\\n\\r\\n.identify.touch ::-webkit-scrollbar {\\r\\n    width: 4px;\\r\\n}\\r\\n\\r\\n.identify.touch ::-webkit-scrollbar-track {\\r\\n    -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\\r\\n    border-radius: 10px;\\r\\n}\\r\\n\\r\\n.identify.touch ::-webkit-scrollbar-thumb {\\r\\n    border-radius: 10px;\\r\\n    -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.5);\\r\\n}\\r\\n@keyframes advancegradually{\\r\\n    0%{ opacity: 0; transform: translate(30px, 0) }\\r\\n    100%{ opacity: 1; transform: translate(0, 0) }\\r\\n}\\r\\n@keyframes showGradually{\\r\\n    0%{ opacity: 0; transform: translate(0, -30px) }\\r\\n    100%{ opacity: 1; transform: translate(0, 0) }\\r\\n}\\r\\n\\r\\n\\r\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../node_modules/css-loader/index.js!./ol-Identify.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js!./ol-Identify.css\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js!./ol-Identify.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.quickselect = factory());\n}(this, (function () { 'use strict';\n\nfunction quickselect(arr, k, left, right, compare) {\n    quickselectStep(arr, k, left || 0, right || (arr.length - 1), compare || defaultCompare);\n}\n\nfunction quickselectStep(arr, k, left, right, compare) {\n\n    while (right > left) {\n        if (right - left > 600) {\n            var n = right - left + 1;\n            var m = k - left + 1;\n            var z = Math.log(n);\n            var s = 0.5 * Math.exp(2 * z / 3);\n            var sd = 0.5 * Math.sqrt(z * s * (n - s) / n) * (m - n / 2 < 0 ? -1 : 1);\n            var newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\n            var newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\n            quickselectStep(arr, k, newLeft, newRight, compare);\n        }\n\n        var t = arr[k];\n        var i = left;\n        var j = right;\n\n        swap(arr, left, k);\n        if (compare(arr[right], t) > 0) swap(arr, left, right);\n\n        while (i < j) {\n            swap(arr, i, j);\n            i++;\n            j--;\n            while (compare(arr[i], t) < 0) i++;\n            while (compare(arr[j], t) > 0) j--;\n        }\n\n        if (compare(arr[left], t) === 0) swap(arr, left, j);\n        else {\n            j++;\n            swap(arr, j, right);\n        }\n\n        if (j <= k) left = j + 1;\n        if (k <= j) right = j - 1;\n    }\n}\n\nfunction swap(arr, i, j) {\n    var tmp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = tmp;\n}\n\nfunction defaultCompare(a, b) {\n    return a < b ? -1 : a > b ? 1 : 0;\n}\n\nreturn quickselect;\n\n})));\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","import _ol_ from './index.js';\nimport _ol_TileState_ from './tilestate.js';\nimport _ol_easing_ from './easing.js';\nimport _ol_events_EventTarget_ from './events/eventtarget.js';\nimport _ol_events_EventType_ from './events/eventtype.js';\n\n/**\n * @classdesc\n * Base class for tiles.\n *\n * @constructor\n * @abstract\n * @extends {ol.events.EventTarget}\n * @param {ol.TileCoord} tileCoord Tile coordinate.\n * @param {ol.TileState} state State.\n * @param {olx.TileOptions=} opt_options Tile options.\n */\nvar _ol_Tile_ = function(tileCoord, state, opt_options) {\n  _ol_events_EventTarget_.call(this);\n\n  var options = opt_options ? opt_options : {};\n\n  /**\n   * @type {ol.TileCoord}\n   */\n  this.tileCoord = tileCoord;\n\n  /**\n   * @protected\n   * @type {ol.TileState}\n   */\n  this.state = state;\n\n  /**\n   * An \"interim\" tile for this tile. The interim tile may be used while this\n   * one is loading, for \"smooth\" transitions when changing params/dimensions\n   * on the source.\n   * @type {ol.Tile}\n   */\n  this.interimTile = null;\n\n  /**\n   * A key assigned to the tile. This is used by the tile source to determine\n   * if this tile can effectively be used, or if a new tile should be created\n   * and this one be used as an interim tile for this new tile.\n   * @type {string}\n   */\n  this.key = '';\n\n  /**\n   * The duration for the opacity transition.\n   * @type {number}\n   */\n  this.transition_ = options.transition === undefined ?\n    250 : options.transition;\n\n  /**\n   * Lookup of start times for rendering transitions.  If the start time is\n   * equal to -1, the transition is complete.\n   * @type {Object.<number, number>}\n   */\n  this.transitionStarts_ = {};\n\n};\n\n_ol_.inherits(_ol_Tile_, _ol_events_EventTarget_);\n\n\n/**\n * @protected\n */\n_ol_Tile_.prototype.changed = function() {\n  this.dispatchEvent(_ol_events_EventType_.CHANGE);\n};\n\n\n/**\n * @return {string} Key.\n */\n_ol_Tile_.prototype.getKey = function() {\n  return this.key + '/' + this.tileCoord;\n};\n\n/**\n * Get the interim tile most suitable for rendering using the chain of interim\n * tiles. This corresponds to the  most recent tile that has been loaded, if no\n * such tile exists, the original tile is returned.\n * @return {!ol.Tile} Best tile for rendering.\n */\n_ol_Tile_.prototype.getInterimTile = function() {\n  if (!this.interimTile) {\n    //empty chain\n    return this;\n  }\n  var tile = this.interimTile;\n\n  // find the first loaded tile and return it. Since the chain is sorted in\n  // decreasing order of creation time, there is no need to search the remainder\n  // of the list (all those tiles correspond to older requests and will be\n  // cleaned up by refreshInterimChain)\n  do {\n    if (tile.getState() == _ol_TileState_.LOADED) {\n      return tile;\n    }\n    tile = tile.interimTile;\n  } while (tile);\n\n  // we can not find a better tile\n  return this;\n};\n\n/**\n * Goes through the chain of interim tiles and discards sections of the chain\n * that are no longer relevant.\n */\n_ol_Tile_.prototype.refreshInterimChain = function() {\n  if (!this.interimTile) {\n    return;\n  }\n\n  var tile = this.interimTile;\n  var prev = this;\n\n  do {\n    if (tile.getState() == _ol_TileState_.LOADED) {\n      //we have a loaded tile, we can discard the rest of the list\n      //we would could abort any LOADING tile request\n      //older than this tile (i.e. any LOADING tile following this entry in the chain)\n      tile.interimTile = null;\n      break;\n    } else if (tile.getState() == _ol_TileState_.LOADING) {\n      //keep this LOADING tile any loaded tiles later in the chain are\n      //older than this tile, so we're still interested in the request\n      prev = tile;\n    } else if (tile.getState() == _ol_TileState_.IDLE) {\n      //the head of the list is the most current tile, we don't need\n      //to start any other requests for this chain\n      prev.interimTile = tile.interimTile;\n    } else {\n      prev = tile;\n    }\n    tile = prev.interimTile;\n  } while (tile);\n};\n\n/**\n * Get the tile coordinate for this tile.\n * @return {ol.TileCoord} The tile coordinate.\n * @api\n */\n_ol_Tile_.prototype.getTileCoord = function() {\n  return this.tileCoord;\n};\n\n\n/**\n * @return {ol.TileState} State.\n */\n_ol_Tile_.prototype.getState = function() {\n  return this.state;\n};\n\n/**\n * @param {ol.TileState} state State.\n */\n_ol_Tile_.prototype.setState = function(state) {\n  this.state = state;\n  this.changed();\n};\n\n/**\n * Load the image or retry if loading previously failed.\n * Loading is taken care of by the tile queue, and calling this method is\n * only needed for preloading or for reloading in case of an error.\n * @abstract\n * @api\n */\n_ol_Tile_.prototype.load = function() {};\n\n/**\n * Get the alpha value for rendering.\n * @param {number} id An id for the renderer.\n * @param {number} time The render frame time.\n * @return {number} A number between 0 and 1.\n */\n_ol_Tile_.prototype.getAlpha = function(id, time) {\n  if (!this.transition_) {\n    return 1;\n  }\n\n  var start = this.transitionStarts_[id];\n  if (!start) {\n    start = time;\n    this.transitionStarts_[id] = start;\n  } else if (start === -1) {\n    return 1;\n  }\n\n  var delta = time - start + (1000 / 60); // avoid rendering at 0\n  if (delta >= this.transition_) {\n    return 1;\n  }\n  return _ol_easing_.easeIn(delta / this.transition_);\n};\n\n/**\n * Determine if a tile is in an alpha transition.  A tile is considered in\n * transition if tile.getAlpha() has not yet been called or has been called\n * and returned 1.\n * @param {number} id An id for the renderer.\n * @return {boolean} The tile is in transition.\n */\n_ol_Tile_.prototype.inTransition = function(id) {\n  if (!this.transition_) {\n    return false;\n  }\n  return this.transitionStarts_[id] !== -1;\n};\n\n/**\n * Mark a transition as complete.\n * @param {number} id An id for the renderer.\n */\n_ol_Tile_.prototype.endTransition = function(id) {\n  if (this.transition_) {\n    this.transitionStarts_[id] = -1;\n  }\n};\nexport default _ol_Tile_;\n","import _ol_ from './index.js';\nimport _ol_Tile_ from './tile.js';\nimport _ol_TileState_ from './tilestate.js';\nimport _ol_dom_ from './dom.js';\nimport _ol_events_ from './events.js';\nimport _ol_events_EventType_ from './events/eventtype.js';\n\n/**\n * @constructor\n * @extends {ol.Tile}\n * @param {ol.TileCoord} tileCoord Tile coordinate.\n * @param {ol.TileState} state State.\n * @param {string} src Image source URI.\n * @param {?string} crossOrigin Cross origin.\n * @param {ol.TileLoadFunctionType} tileLoadFunction Tile load function.\n * @param {olx.TileOptions=} opt_options Tile options.\n */\nvar _ol_ImageTile_ = function(tileCoord, state, src, crossOrigin, tileLoadFunction, opt_options) {\n\n  _ol_Tile_.call(this, tileCoord, state, opt_options);\n\n  /**\n   * @private\n   * @type {?string}\n   */\n  this.crossOrigin_ = crossOrigin;\n\n  /**\n   * Image URI\n   *\n   * @private\n   * @type {string}\n   */\n  this.src_ = src;\n\n  /**\n   * @private\n   * @type {Image|HTMLCanvasElement}\n   */\n  this.image_ = new Image();\n  if (crossOrigin !== null) {\n    this.image_.crossOrigin = crossOrigin;\n  }\n\n  /**\n   * @private\n   * @type {Array.<ol.EventsKey>}\n   */\n  this.imageListenerKeys_ = null;\n\n  /**\n   * @private\n   * @type {ol.TileLoadFunctionType}\n   */\n  this.tileLoadFunction_ = tileLoadFunction;\n\n};\n\n_ol_.inherits(_ol_ImageTile_, _ol_Tile_);\n\n\n/**\n * @inheritDoc\n */\n_ol_ImageTile_.prototype.disposeInternal = function() {\n  if (this.state == _ol_TileState_.LOADING) {\n    this.unlistenImage_();\n    this.image_ = _ol_ImageTile_.getBlankImage();\n  }\n  if (this.interimTile) {\n    this.interimTile.dispose();\n  }\n  this.state = _ol_TileState_.ABORT;\n  this.changed();\n  _ol_Tile_.prototype.disposeInternal.call(this);\n};\n\n\n/**\n * Get the HTML image element for this tile (may be a Canvas, Image, or Video).\n * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n * @api\n */\n_ol_ImageTile_.prototype.getImage = function() {\n  return this.image_;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_ImageTile_.prototype.getKey = function() {\n  return this.src_;\n};\n\n\n/**\n * Tracks loading or read errors.\n *\n * @private\n */\n_ol_ImageTile_.prototype.handleImageError_ = function() {\n  this.state = _ol_TileState_.ERROR;\n  this.unlistenImage_();\n  this.image_ = _ol_ImageTile_.getBlankImage();\n  this.changed();\n};\n\n\n/**\n * Tracks successful image load.\n *\n * @private\n */\n_ol_ImageTile_.prototype.handleImageLoad_ = function() {\n  if (this.image_.naturalWidth && this.image_.naturalHeight) {\n    this.state = _ol_TileState_.LOADED;\n  } else {\n    this.state = _ol_TileState_.EMPTY;\n  }\n  this.unlistenImage_();\n  this.changed();\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\n_ol_ImageTile_.prototype.load = function() {\n  if (this.state == _ol_TileState_.ERROR) {\n    this.state = _ol_TileState_.IDLE;\n    this.image_ = new Image();\n    if (this.crossOrigin_ !== null) {\n      this.image_.crossOrigin = this.crossOrigin_;\n    }\n  }\n  if (this.state == _ol_TileState_.IDLE) {\n    this.state = _ol_TileState_.LOADING;\n    this.changed();\n    this.imageListenerKeys_ = [\n      _ol_events_.listenOnce(this.image_, _ol_events_EventType_.ERROR,\n          this.handleImageError_, this),\n      _ol_events_.listenOnce(this.image_, _ol_events_EventType_.LOAD,\n          this.handleImageLoad_, this)\n    ];\n    this.tileLoadFunction_(this, this.src_);\n  }\n};\n\n\n/**\n * Discards event handlers which listen for load completion or errors.\n *\n * @private\n */\n_ol_ImageTile_.prototype.unlistenImage_ = function() {\n  this.imageListenerKeys_.forEach(_ol_events_.unlistenByKey);\n  this.imageListenerKeys_ = null;\n};\n\n\n/**\n * Get a 1-pixel blank image.\n * @return {HTMLCanvasElement} Blank image.\n */\n_ol_ImageTile_.getBlankImage = function() {\n  var ctx = _ol_dom_.createCanvasContext2D(1, 1);\n  ctx.fillStyle = 'rgba(0,0,0,0)';\n  ctx.fillRect(0, 0, 1, 1);\n  return ctx.canvas;\n};\nexport default _ol_ImageTile_;\n","import _ol_ from './index.js';\nimport _ol_structs_LRUCache_ from './structs/lrucache.js';\nimport _ol_tilecoord_ from './tilecoord.js';\n\n/**\n * @constructor\n * @extends {ol.structs.LRUCache.<ol.Tile>}\n * @param {number=} opt_highWaterMark High water mark.\n * @struct\n */\nvar _ol_TileCache_ = function(opt_highWaterMark) {\n\n  _ol_structs_LRUCache_.call(this, opt_highWaterMark);\n\n};\n\n_ol_.inherits(_ol_TileCache_, _ol_structs_LRUCache_);\n\n\n/**\n * @param {Object.<string, ol.TileRange>} usedTiles Used tiles.\n */\n_ol_TileCache_.prototype.expireCache = function(usedTiles) {\n  var tile, zKey;\n  while (this.canExpireCache()) {\n    tile = this.peekLast();\n    zKey = tile.tileCoord[0].toString();\n    if (zKey in usedTiles && usedTiles[zKey].contains(tile.tileCoord)) {\n      break;\n    } else {\n      this.pop().dispose();\n    }\n  }\n};\n\n\n/**\n * Prune all tiles from the cache that don't have the same z as the newest tile.\n */\n_ol_TileCache_.prototype.pruneExceptNewestZ = function() {\n  if (this.getCount() === 0) {\n    return;\n  }\n  var key = this.peekFirstKey();\n  var tileCoord = _ol_tilecoord_.fromKey(key);\n  var z = tileCoord[0];\n  this.forEach(function(tile) {\n    if (tile.tileCoord[0] !== z) {\n      this.remove(_ol_tilecoord_.getKey(tile.tileCoord));\n      tile.dispose();\n    }\n  }, this);\n};\nexport default _ol_TileCache_;\n","import _ol_dom_ from './dom.js';\nimport _ol_extent_ from './extent.js';\nimport _ol_math_ from './math.js';\nimport _ol_proj_ from './proj.js';\nvar _ol_reproj_ = {};\n\n\n/**\n * Calculates ideal resolution to use from the source in order to achieve\n * pixel mapping as close as possible to 1:1 during reprojection.\n * The resolution is calculated regardless of what resolutions\n * are actually available in the dataset (TileGrid, Image, ...).\n *\n * @param {ol.proj.Projection} sourceProj Source projection.\n * @param {ol.proj.Projection} targetProj Target projection.\n * @param {ol.Coordinate} targetCenter Target center.\n * @param {number} targetResolution Target resolution.\n * @return {number} The best resolution to use. Can be +-Infinity, NaN or 0.\n */\n_ol_reproj_.calculateSourceResolution = function(sourceProj, targetProj,\n    targetCenter, targetResolution) {\n\n  var sourceCenter = _ol_proj_.transform(targetCenter, targetProj, sourceProj);\n\n  // calculate the ideal resolution of the source data\n  var sourceResolution =\n      _ol_proj_.getPointResolution(targetProj, targetResolution, targetCenter);\n\n  var targetMetersPerUnit = targetProj.getMetersPerUnit();\n  if (targetMetersPerUnit !== undefined) {\n    sourceResolution *= targetMetersPerUnit;\n  }\n  var sourceMetersPerUnit = sourceProj.getMetersPerUnit();\n  if (sourceMetersPerUnit !== undefined) {\n    sourceResolution /= sourceMetersPerUnit;\n  }\n\n  // Based on the projection properties, the point resolution at the specified\n  // coordinates may be slightly different. We need to reverse-compensate this\n  // in order to achieve optimal results.\n\n  var sourceExtent = sourceProj.getExtent();\n  if (!sourceExtent || _ol_extent_.containsCoordinate(sourceExtent, sourceCenter)) {\n    var compensationFactor =\n        _ol_proj_.getPointResolution(sourceProj, sourceResolution, sourceCenter) /\n        sourceResolution;\n    if (isFinite(compensationFactor) && compensationFactor > 0) {\n      sourceResolution /= compensationFactor;\n    }\n  }\n\n  return sourceResolution;\n};\n\n\n/**\n * Enlarge the clipping triangle point by 1 pixel to ensure the edges overlap\n * in order to mask gaps caused by antialiasing.\n *\n * @param {number} centroidX Centroid of the triangle (x coordinate in pixels).\n * @param {number} centroidY Centroid of the triangle (y coordinate in pixels).\n * @param {number} x X coordinate of the point (in pixels).\n * @param {number} y Y coordinate of the point (in pixels).\n * @return {ol.Coordinate} New point 1 px farther from the centroid.\n * @private\n */\n_ol_reproj_.enlargeClipPoint_ = function(centroidX, centroidY, x, y) {\n  var dX = x - centroidX, dY = y - centroidY;\n  var distance = Math.sqrt(dX * dX + dY * dY);\n  return [Math.round(x + dX / distance), Math.round(y + dY / distance)];\n};\n\n\n/**\n * Renders the source data into new canvas based on the triangulation.\n *\n * @param {number} width Width of the canvas.\n * @param {number} height Height of the canvas.\n * @param {number} pixelRatio Pixel ratio.\n * @param {number} sourceResolution Source resolution.\n * @param {ol.Extent} sourceExtent Extent of the data source.\n * @param {number} targetResolution Target resolution.\n * @param {ol.Extent} targetExtent Target extent.\n * @param {ol.reproj.Triangulation} triangulation Calculated triangulation.\n * @param {Array.<{extent: ol.Extent,\n *                 image: (HTMLCanvasElement|Image|HTMLVideoElement)}>} sources\n *             Array of sources.\n * @param {number} gutter Gutter of the sources.\n * @param {boolean=} opt_renderEdges Render reprojection edges.\n * @return {HTMLCanvasElement} Canvas with reprojected data.\n */\n_ol_reproj_.render = function(width, height, pixelRatio,\n    sourceResolution, sourceExtent, targetResolution, targetExtent,\n    triangulation, sources, gutter, opt_renderEdges) {\n\n  var context = _ol_dom_.createCanvasContext2D(Math.round(pixelRatio * width),\n      Math.round(pixelRatio * height));\n\n  if (sources.length === 0) {\n    return context.canvas;\n  }\n\n  context.scale(pixelRatio, pixelRatio);\n\n  var sourceDataExtent = _ol_extent_.createEmpty();\n  sources.forEach(function(src, i, arr) {\n    _ol_extent_.extend(sourceDataExtent, src.extent);\n  });\n\n  var canvasWidthInUnits = _ol_extent_.getWidth(sourceDataExtent);\n  var canvasHeightInUnits = _ol_extent_.getHeight(sourceDataExtent);\n  var stitchContext = _ol_dom_.createCanvasContext2D(\n      Math.round(pixelRatio * canvasWidthInUnits / sourceResolution),\n      Math.round(pixelRatio * canvasHeightInUnits / sourceResolution));\n\n  var stitchScale = pixelRatio / sourceResolution;\n\n  sources.forEach(function(src, i, arr) {\n    var xPos = src.extent[0] - sourceDataExtent[0];\n    var yPos = -(src.extent[3] - sourceDataExtent[3]);\n    var srcWidth = _ol_extent_.getWidth(src.extent);\n    var srcHeight = _ol_extent_.getHeight(src.extent);\n\n    stitchContext.drawImage(\n        src.image,\n        gutter, gutter,\n        src.image.width - 2 * gutter, src.image.height - 2 * gutter,\n        xPos * stitchScale, yPos * stitchScale,\n        srcWidth * stitchScale, srcHeight * stitchScale);\n  });\n\n  var targetTopLeft = _ol_extent_.getTopLeft(targetExtent);\n\n  triangulation.getTriangles().forEach(function(triangle, i, arr) {\n    /* Calculate affine transform (src -> dst)\n     * Resulting matrix can be used to transform coordinate\n     * from `sourceProjection` to destination pixels.\n     *\n     * To optimize number of context calls and increase numerical stability,\n     * we also do the following operations:\n     * trans(-topLeftExtentCorner), scale(1 / targetResolution), scale(1, -1)\n     * here before solving the linear system so [ui, vi] are pixel coordinates.\n     *\n     * Src points: xi, yi\n     * Dst points: ui, vi\n     * Affine coefficients: aij\n     *\n     * | x0 y0 1  0  0 0 |   |a00|   |u0|\n     * | x1 y1 1  0  0 0 |   |a01|   |u1|\n     * | x2 y2 1  0  0 0 | x |a02| = |u2|\n     * |  0  0 0 x0 y0 1 |   |a10|   |v0|\n     * |  0  0 0 x1 y1 1 |   |a11|   |v1|\n     * |  0  0 0 x2 y2 1 |   |a12|   |v2|\n     */\n    var source = triangle.source, target = triangle.target;\n    var x0 = source[0][0], y0 = source[0][1],\n        x1 = source[1][0], y1 = source[1][1],\n        x2 = source[2][0], y2 = source[2][1];\n    var u0 = (target[0][0] - targetTopLeft[0]) / targetResolution,\n        v0 = -(target[0][1] - targetTopLeft[1]) / targetResolution;\n    var u1 = (target[1][0] - targetTopLeft[0]) / targetResolution,\n        v1 = -(target[1][1] - targetTopLeft[1]) / targetResolution;\n    var u2 = (target[2][0] - targetTopLeft[0]) / targetResolution,\n        v2 = -(target[2][1] - targetTopLeft[1]) / targetResolution;\n\n    // Shift all the source points to improve numerical stability\n    // of all the subsequent calculations. The [x0, y0] is used here.\n    // This is also used to simplify the linear system.\n    var sourceNumericalShiftX = x0, sourceNumericalShiftY = y0;\n    x0 = 0;\n    y0 = 0;\n    x1 -= sourceNumericalShiftX;\n    y1 -= sourceNumericalShiftY;\n    x2 -= sourceNumericalShiftX;\n    y2 -= sourceNumericalShiftY;\n\n    var augmentedMatrix = [\n      [x1, y1, 0, 0, u1 - u0],\n      [x2, y2, 0, 0, u2 - u0],\n      [0, 0, x1, y1, v1 - v0],\n      [0, 0, x2, y2, v2 - v0]\n    ];\n    var affineCoefs = _ol_math_.solveLinearSystem(augmentedMatrix);\n    if (!affineCoefs) {\n      return;\n    }\n\n    context.save();\n    context.beginPath();\n    var centroidX = (u0 + u1 + u2) / 3, centroidY = (v0 + v1 + v2) / 3;\n    var p0 = _ol_reproj_.enlargeClipPoint_(centroidX, centroidY, u0, v0);\n    var p1 = _ol_reproj_.enlargeClipPoint_(centroidX, centroidY, u1, v1);\n    var p2 = _ol_reproj_.enlargeClipPoint_(centroidX, centroidY, u2, v2);\n\n    context.moveTo(p1[0], p1[1]);\n    context.lineTo(p0[0], p0[1]);\n    context.lineTo(p2[0], p2[1]);\n    context.clip();\n\n    context.transform(\n        affineCoefs[0], affineCoefs[2], affineCoefs[1], affineCoefs[3], u0, v0);\n\n    context.translate(sourceDataExtent[0] - sourceNumericalShiftX,\n        sourceDataExtent[3] - sourceNumericalShiftY);\n\n    context.scale(sourceResolution / pixelRatio,\n        -sourceResolution / pixelRatio);\n\n    context.drawImage(stitchContext.canvas, 0, 0);\n    context.restore();\n  });\n\n  if (opt_renderEdges) {\n    context.save();\n\n    context.strokeStyle = 'black';\n    context.lineWidth = 1;\n\n    triangulation.getTriangles().forEach(function(triangle, i, arr) {\n      var target = triangle.target;\n      var u0 = (target[0][0] - targetTopLeft[0]) / targetResolution,\n          v0 = -(target[0][1] - targetTopLeft[1]) / targetResolution;\n      var u1 = (target[1][0] - targetTopLeft[0]) / targetResolution,\n          v1 = -(target[1][1] - targetTopLeft[1]) / targetResolution;\n      var u2 = (target[2][0] - targetTopLeft[0]) / targetResolution,\n          v2 = -(target[2][1] - targetTopLeft[1]) / targetResolution;\n\n      context.beginPath();\n      context.moveTo(u1, v1);\n      context.lineTo(u0, v0);\n      context.lineTo(u2, v2);\n      context.closePath();\n      context.stroke();\n    });\n\n    context.restore();\n  }\n  return context.canvas;\n};\nexport default _ol_reproj_;\n","import _ol_ from '../index.js';\nimport _ol_extent_ from '../extent.js';\nimport _ol_math_ from '../math.js';\nimport _ol_proj_ from '../proj.js';\n\n/**\n * @classdesc\n * Class containing triangulation of the given target extent.\n * Used for determining source data and the reprojection itself.\n *\n * @param {ol.proj.Projection} sourceProj Source projection.\n * @param {ol.proj.Projection} targetProj Target projection.\n * @param {ol.Extent} targetExtent Target extent to triangulate.\n * @param {ol.Extent} maxSourceExtent Maximal source extent that can be used.\n * @param {number} errorThreshold Acceptable error (in source units).\n * @constructor\n */\nvar _ol_reproj_Triangulation_ = function(sourceProj, targetProj, targetExtent,\n    maxSourceExtent, errorThreshold) {\n\n  /**\n   * @type {ol.proj.Projection}\n   * @private\n   */\n  this.sourceProj_ = sourceProj;\n\n  /**\n   * @type {ol.proj.Projection}\n   * @private\n   */\n  this.targetProj_ = targetProj;\n\n  /** @type {!Object.<string, ol.Coordinate>} */\n  var transformInvCache = {};\n  var transformInv = _ol_proj_.getTransform(this.targetProj_, this.sourceProj_);\n\n  /**\n   * @param {ol.Coordinate} c A coordinate.\n   * @return {ol.Coordinate} Transformed coordinate.\n   * @private\n   */\n  this.transformInv_ = function(c) {\n    var key = c[0] + '/' + c[1];\n    if (!transformInvCache[key]) {\n      transformInvCache[key] = transformInv(c);\n    }\n    return transformInvCache[key];\n  };\n\n  /**\n   * @type {ol.Extent}\n   * @private\n   */\n  this.maxSourceExtent_ = maxSourceExtent;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.errorThresholdSquared_ = errorThreshold * errorThreshold;\n\n  /**\n   * @type {Array.<ol.ReprojTriangle>}\n   * @private\n   */\n  this.triangles_ = [];\n\n  /**\n   * Indicates that the triangulation crosses edge of the source projection.\n   * @type {boolean}\n   * @private\n   */\n  this.wrapsXInSource_ = false;\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.canWrapXInSource_ = this.sourceProj_.canWrapX() &&\n      !!maxSourceExtent &&\n      !!this.sourceProj_.getExtent() &&\n      (_ol_extent_.getWidth(maxSourceExtent) ==\n       _ol_extent_.getWidth(this.sourceProj_.getExtent()));\n\n  /**\n   * @type {?number}\n   * @private\n   */\n  this.sourceWorldWidth_ = this.sourceProj_.getExtent() ?\n    _ol_extent_.getWidth(this.sourceProj_.getExtent()) : null;\n\n  /**\n   * @type {?number}\n   * @private\n   */\n  this.targetWorldWidth_ = this.targetProj_.getExtent() ?\n    _ol_extent_.getWidth(this.targetProj_.getExtent()) : null;\n\n  var destinationTopLeft = _ol_extent_.getTopLeft(targetExtent);\n  var destinationTopRight = _ol_extent_.getTopRight(targetExtent);\n  var destinationBottomRight = _ol_extent_.getBottomRight(targetExtent);\n  var destinationBottomLeft = _ol_extent_.getBottomLeft(targetExtent);\n  var sourceTopLeft = this.transformInv_(destinationTopLeft);\n  var sourceTopRight = this.transformInv_(destinationTopRight);\n  var sourceBottomRight = this.transformInv_(destinationBottomRight);\n  var sourceBottomLeft = this.transformInv_(destinationBottomLeft);\n\n  this.addQuad_(\n      destinationTopLeft, destinationTopRight,\n      destinationBottomRight, destinationBottomLeft,\n      sourceTopLeft, sourceTopRight, sourceBottomRight, sourceBottomLeft,\n      _ol_.RASTER_REPROJECTION_MAX_SUBDIVISION);\n\n  if (this.wrapsXInSource_) {\n    var leftBound = Infinity;\n    this.triangles_.forEach(function(triangle, i, arr) {\n      leftBound = Math.min(leftBound,\n          triangle.source[0][0], triangle.source[1][0], triangle.source[2][0]);\n    });\n\n    // Shift triangles to be as close to `leftBound` as possible\n    // (if the distance is more than `worldWidth / 2` it can be closer.\n    this.triangles_.forEach(function(triangle) {\n      if (Math.max(triangle.source[0][0], triangle.source[1][0],\n          triangle.source[2][0]) - leftBound > this.sourceWorldWidth_ / 2) {\n        var newTriangle = [[triangle.source[0][0], triangle.source[0][1]],\n          [triangle.source[1][0], triangle.source[1][1]],\n          [triangle.source[2][0], triangle.source[2][1]]];\n        if ((newTriangle[0][0] - leftBound) > this.sourceWorldWidth_ / 2) {\n          newTriangle[0][0] -= this.sourceWorldWidth_;\n        }\n        if ((newTriangle[1][0] - leftBound) > this.sourceWorldWidth_ / 2) {\n          newTriangle[1][0] -= this.sourceWorldWidth_;\n        }\n        if ((newTriangle[2][0] - leftBound) > this.sourceWorldWidth_ / 2) {\n          newTriangle[2][0] -= this.sourceWorldWidth_;\n        }\n\n        // Rarely (if the extent contains both the dateline and prime meridian)\n        // the shift can in turn break some triangles.\n        // Detect this here and don't shift in such cases.\n        var minX = Math.min(\n            newTriangle[0][0], newTriangle[1][0], newTriangle[2][0]);\n        var maxX = Math.max(\n            newTriangle[0][0], newTriangle[1][0], newTriangle[2][0]);\n        if ((maxX - minX) < this.sourceWorldWidth_ / 2) {\n          triangle.source = newTriangle;\n        }\n      }\n    }, this);\n  }\n\n  transformInvCache = {};\n};\n\n\n/**\n * Adds triangle to the triangulation.\n * @param {ol.Coordinate} a The target a coordinate.\n * @param {ol.Coordinate} b The target b coordinate.\n * @param {ol.Coordinate} c The target c coordinate.\n * @param {ol.Coordinate} aSrc The source a coordinate.\n * @param {ol.Coordinate} bSrc The source b coordinate.\n * @param {ol.Coordinate} cSrc The source c coordinate.\n * @private\n */\n_ol_reproj_Triangulation_.prototype.addTriangle_ = function(a, b, c,\n    aSrc, bSrc, cSrc) {\n  this.triangles_.push({\n    source: [aSrc, bSrc, cSrc],\n    target: [a, b, c]\n  });\n};\n\n\n/**\n * Adds quad (points in clock-wise order) to the triangulation\n * (and reprojects the vertices) if valid.\n * Performs quad subdivision if needed to increase precision.\n *\n * @param {ol.Coordinate} a The target a coordinate.\n * @param {ol.Coordinate} b The target b coordinate.\n * @param {ol.Coordinate} c The target c coordinate.\n * @param {ol.Coordinate} d The target d coordinate.\n * @param {ol.Coordinate} aSrc The source a coordinate.\n * @param {ol.Coordinate} bSrc The source b coordinate.\n * @param {ol.Coordinate} cSrc The source c coordinate.\n * @param {ol.Coordinate} dSrc The source d coordinate.\n * @param {number} maxSubdivision Maximal allowed subdivision of the quad.\n * @private\n */\n_ol_reproj_Triangulation_.prototype.addQuad_ = function(a, b, c, d,\n    aSrc, bSrc, cSrc, dSrc, maxSubdivision) {\n\n  var sourceQuadExtent = _ol_extent_.boundingExtent([aSrc, bSrc, cSrc, dSrc]);\n  var sourceCoverageX = this.sourceWorldWidth_ ?\n    _ol_extent_.getWidth(sourceQuadExtent) / this.sourceWorldWidth_ : null;\n  var sourceWorldWidth = /** @type {number} */ (this.sourceWorldWidth_);\n\n  // when the quad is wrapped in the source projection\n  // it covers most of the projection extent, but not fully\n  var wrapsX = this.sourceProj_.canWrapX() &&\n               sourceCoverageX > 0.5 && sourceCoverageX < 1;\n\n  var needsSubdivision = false;\n\n  if (maxSubdivision > 0) {\n    if (this.targetProj_.isGlobal() && this.targetWorldWidth_) {\n      var targetQuadExtent = _ol_extent_.boundingExtent([a, b, c, d]);\n      var targetCoverageX =\n          _ol_extent_.getWidth(targetQuadExtent) / this.targetWorldWidth_;\n      needsSubdivision |=\n          targetCoverageX > _ol_.RASTER_REPROJECTION_MAX_TRIANGLE_WIDTH;\n    }\n    if (!wrapsX && this.sourceProj_.isGlobal() && sourceCoverageX) {\n      needsSubdivision |=\n          sourceCoverageX > _ol_.RASTER_REPROJECTION_MAX_TRIANGLE_WIDTH;\n    }\n  }\n\n  if (!needsSubdivision && this.maxSourceExtent_) {\n    if (!_ol_extent_.intersects(sourceQuadExtent, this.maxSourceExtent_)) {\n      // whole quad outside source projection extent -> ignore\n      return;\n    }\n  }\n\n  if (!needsSubdivision) {\n    if (!isFinite(aSrc[0]) || !isFinite(aSrc[1]) ||\n        !isFinite(bSrc[0]) || !isFinite(bSrc[1]) ||\n        !isFinite(cSrc[0]) || !isFinite(cSrc[1]) ||\n        !isFinite(dSrc[0]) || !isFinite(dSrc[1])) {\n      if (maxSubdivision > 0) {\n        needsSubdivision = true;\n      } else {\n        return;\n      }\n    }\n  }\n\n  if (maxSubdivision > 0) {\n    if (!needsSubdivision) {\n      var center = [(a[0] + c[0]) / 2, (a[1] + c[1]) / 2];\n      var centerSrc = this.transformInv_(center);\n\n      var dx;\n      if (wrapsX) {\n        var centerSrcEstimX =\n            (_ol_math_.modulo(aSrc[0], sourceWorldWidth) +\n             _ol_math_.modulo(cSrc[0], sourceWorldWidth)) / 2;\n        dx = centerSrcEstimX -\n            _ol_math_.modulo(centerSrc[0], sourceWorldWidth);\n      } else {\n        dx = (aSrc[0] + cSrc[0]) / 2 - centerSrc[0];\n      }\n      var dy = (aSrc[1] + cSrc[1]) / 2 - centerSrc[1];\n      var centerSrcErrorSquared = dx * dx + dy * dy;\n      needsSubdivision = centerSrcErrorSquared > this.errorThresholdSquared_;\n    }\n    if (needsSubdivision) {\n      if (Math.abs(a[0] - c[0]) <= Math.abs(a[1] - c[1])) {\n        // split horizontally (top & bottom)\n        var bc = [(b[0] + c[0]) / 2, (b[1] + c[1]) / 2];\n        var bcSrc = this.transformInv_(bc);\n        var da = [(d[0] + a[0]) / 2, (d[1] + a[1]) / 2];\n        var daSrc = this.transformInv_(da);\n\n        this.addQuad_(\n            a, b, bc, da, aSrc, bSrc, bcSrc, daSrc, maxSubdivision - 1);\n        this.addQuad_(\n            da, bc, c, d, daSrc, bcSrc, cSrc, dSrc, maxSubdivision - 1);\n      } else {\n        // split vertically (left & right)\n        var ab = [(a[0] + b[0]) / 2, (a[1] + b[1]) / 2];\n        var abSrc = this.transformInv_(ab);\n        var cd = [(c[0] + d[0]) / 2, (c[1] + d[1]) / 2];\n        var cdSrc = this.transformInv_(cd);\n\n        this.addQuad_(\n            a, ab, cd, d, aSrc, abSrc, cdSrc, dSrc, maxSubdivision - 1);\n        this.addQuad_(\n            ab, b, c, cd, abSrc, bSrc, cSrc, cdSrc, maxSubdivision - 1);\n      }\n      return;\n    }\n  }\n\n  if (wrapsX) {\n    if (!this.canWrapXInSource_) {\n      return;\n    }\n    this.wrapsXInSource_ = true;\n  }\n\n  this.addTriangle_(a, c, d, aSrc, cSrc, dSrc);\n  this.addTriangle_(a, b, c, aSrc, bSrc, cSrc);\n};\n\n\n/**\n * Calculates extent of the 'source' coordinates from all the triangles.\n *\n * @return {ol.Extent} Calculated extent.\n */\n_ol_reproj_Triangulation_.prototype.calculateSourceExtent = function() {\n  var extent = _ol_extent_.createEmpty();\n\n  this.triangles_.forEach(function(triangle, i, arr) {\n    var src = triangle.source;\n    _ol_extent_.extendCoordinate(extent, src[0]);\n    _ol_extent_.extendCoordinate(extent, src[1]);\n    _ol_extent_.extendCoordinate(extent, src[2]);\n  });\n\n  return extent;\n};\n\n\n/**\n * @return {Array.<ol.ReprojTriangle>} Array of the calculated triangles.\n */\n_ol_reproj_Triangulation_.prototype.getTriangles = function() {\n  return this.triangles_;\n};\nexport default _ol_reproj_Triangulation_;\n","import _ol_ from '../index.js';\nimport _ol_Tile_ from '../tile.js';\nimport _ol_TileState_ from '../tilestate.js';\nimport _ol_events_ from '../events.js';\nimport _ol_events_EventType_ from '../events/eventtype.js';\nimport _ol_extent_ from '../extent.js';\nimport _ol_math_ from '../math.js';\nimport _ol_reproj_ from '../reproj.js';\nimport _ol_reproj_Triangulation_ from '../reproj/triangulation.js';\n\n/**\n * @classdesc\n * Class encapsulating single reprojected tile.\n * See {@link ol.source.TileImage}.\n *\n * @constructor\n * @extends {ol.Tile}\n * @param {ol.proj.Projection} sourceProj Source projection.\n * @param {ol.tilegrid.TileGrid} sourceTileGrid Source tile grid.\n * @param {ol.proj.Projection} targetProj Target projection.\n * @param {ol.tilegrid.TileGrid} targetTileGrid Target tile grid.\n * @param {ol.TileCoord} tileCoord Coordinate of the tile.\n * @param {ol.TileCoord} wrappedTileCoord Coordinate of the tile wrapped in X.\n * @param {number} pixelRatio Pixel ratio.\n * @param {number} gutter Gutter of the source tiles.\n * @param {ol.ReprojTileFunctionType} getTileFunction\n *     Function returning source tiles (z, x, y, pixelRatio).\n * @param {number=} opt_errorThreshold Acceptable reprojection error (in px).\n * @param {boolean=} opt_renderEdges Render reprojection edges.\n */\nvar _ol_reproj_Tile_ = function(sourceProj, sourceTileGrid,\n    targetProj, targetTileGrid, tileCoord, wrappedTileCoord,\n    pixelRatio, gutter, getTileFunction,\n    opt_errorThreshold, opt_renderEdges) {\n  _ol_Tile_.call(this, tileCoord, _ol_TileState_.IDLE);\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.renderEdges_ = opt_renderEdges !== undefined ? opt_renderEdges : false;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.pixelRatio_ = pixelRatio;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.gutter_ = gutter;\n\n  /**\n   * @private\n   * @type {HTMLCanvasElement}\n   */\n  this.canvas_ = null;\n\n  /**\n   * @private\n   * @type {ol.tilegrid.TileGrid}\n   */\n  this.sourceTileGrid_ = sourceTileGrid;\n\n  /**\n   * @private\n   * @type {ol.tilegrid.TileGrid}\n   */\n  this.targetTileGrid_ = targetTileGrid;\n\n  /**\n   * @private\n   * @type {ol.TileCoord}\n   */\n  this.wrappedTileCoord_ = wrappedTileCoord ? wrappedTileCoord : tileCoord;\n\n  /**\n   * @private\n   * @type {!Array.<ol.Tile>}\n   */\n  this.sourceTiles_ = [];\n\n  /**\n   * @private\n   * @type {Array.<ol.EventsKey>}\n   */\n  this.sourcesListenerKeys_ = null;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.sourceZ_ = 0;\n\n  var targetExtent = targetTileGrid.getTileCoordExtent(this.wrappedTileCoord_);\n  var maxTargetExtent = this.targetTileGrid_.getExtent();\n  var maxSourceExtent = this.sourceTileGrid_.getExtent();\n\n  var limitedTargetExtent = maxTargetExtent ?\n    _ol_extent_.getIntersection(targetExtent, maxTargetExtent) : targetExtent;\n\n  if (_ol_extent_.getArea(limitedTargetExtent) === 0) {\n    // Tile is completely outside range -> EMPTY\n    // TODO: is it actually correct that the source even creates the tile ?\n    this.state = _ol_TileState_.EMPTY;\n    return;\n  }\n\n  var sourceProjExtent = sourceProj.getExtent();\n  if (sourceProjExtent) {\n    if (!maxSourceExtent) {\n      maxSourceExtent = sourceProjExtent;\n    } else {\n      maxSourceExtent = _ol_extent_.getIntersection(\n          maxSourceExtent, sourceProjExtent);\n    }\n  }\n\n  var targetResolution = targetTileGrid.getResolution(\n      this.wrappedTileCoord_[0]);\n\n  var targetCenter = _ol_extent_.getCenter(limitedTargetExtent);\n  var sourceResolution = _ol_reproj_.calculateSourceResolution(\n      sourceProj, targetProj, targetCenter, targetResolution);\n\n  if (!isFinite(sourceResolution) || sourceResolution <= 0) {\n    // invalid sourceResolution -> EMPTY\n    // probably edges of the projections when no extent is defined\n    this.state = _ol_TileState_.EMPTY;\n    return;\n  }\n\n  var errorThresholdInPixels = opt_errorThreshold !== undefined ?\n    opt_errorThreshold : _ol_.DEFAULT_RASTER_REPROJECTION_ERROR_THRESHOLD;\n\n  /**\n   * @private\n   * @type {!ol.reproj.Triangulation}\n   */\n  this.triangulation_ = new _ol_reproj_Triangulation_(\n      sourceProj, targetProj, limitedTargetExtent, maxSourceExtent,\n      sourceResolution * errorThresholdInPixels);\n\n  if (this.triangulation_.getTriangles().length === 0) {\n    // no valid triangles -> EMPTY\n    this.state = _ol_TileState_.EMPTY;\n    return;\n  }\n\n  this.sourceZ_ = sourceTileGrid.getZForResolution(sourceResolution);\n  var sourceExtent = this.triangulation_.calculateSourceExtent();\n\n  if (maxSourceExtent) {\n    if (sourceProj.canWrapX()) {\n      sourceExtent[1] = _ol_math_.clamp(\n          sourceExtent[1], maxSourceExtent[1], maxSourceExtent[3]);\n      sourceExtent[3] = _ol_math_.clamp(\n          sourceExtent[3], maxSourceExtent[1], maxSourceExtent[3]);\n    } else {\n      sourceExtent = _ol_extent_.getIntersection(sourceExtent, maxSourceExtent);\n    }\n  }\n\n  if (!_ol_extent_.getArea(sourceExtent)) {\n    this.state = _ol_TileState_.EMPTY;\n  } else {\n    var sourceRange = sourceTileGrid.getTileRangeForExtentAndZ(\n        sourceExtent, this.sourceZ_);\n\n    for (var srcX = sourceRange.minX; srcX <= sourceRange.maxX; srcX++) {\n      for (var srcY = sourceRange.minY; srcY <= sourceRange.maxY; srcY++) {\n        var tile = getTileFunction(this.sourceZ_, srcX, srcY, pixelRatio);\n        if (tile) {\n          this.sourceTiles_.push(tile);\n        }\n      }\n    }\n\n    if (this.sourceTiles_.length === 0) {\n      this.state = _ol_TileState_.EMPTY;\n    }\n  }\n};\n\n_ol_.inherits(_ol_reproj_Tile_, _ol_Tile_);\n\n\n/**\n * @inheritDoc\n */\n_ol_reproj_Tile_.prototype.disposeInternal = function() {\n  if (this.state == _ol_TileState_.LOADING) {\n    this.unlistenSources_();\n  }\n  _ol_Tile_.prototype.disposeInternal.call(this);\n};\n\n\n/**\n * Get the HTML Canvas element for this tile.\n * @return {HTMLCanvasElement} Canvas.\n */\n_ol_reproj_Tile_.prototype.getImage = function() {\n  return this.canvas_;\n};\n\n\n/**\n * @private\n */\n_ol_reproj_Tile_.prototype.reproject_ = function() {\n  var sources = [];\n  this.sourceTiles_.forEach(function(tile, i, arr) {\n    if (tile && tile.getState() == _ol_TileState_.LOADED) {\n      sources.push({\n        extent: this.sourceTileGrid_.getTileCoordExtent(tile.tileCoord),\n        image: tile.getImage()\n      });\n    }\n  }, this);\n  this.sourceTiles_.length = 0;\n\n  if (sources.length === 0) {\n    this.state = _ol_TileState_.ERROR;\n  } else {\n    var z = this.wrappedTileCoord_[0];\n    var size = this.targetTileGrid_.getTileSize(z);\n    var width = typeof size === 'number' ? size : size[0];\n    var height = typeof size === 'number' ? size : size[1];\n    var targetResolution = this.targetTileGrid_.getResolution(z);\n    var sourceResolution = this.sourceTileGrid_.getResolution(this.sourceZ_);\n\n    var targetExtent = this.targetTileGrid_.getTileCoordExtent(\n        this.wrappedTileCoord_);\n    this.canvas_ = _ol_reproj_.render(width, height, this.pixelRatio_,\n        sourceResolution, this.sourceTileGrid_.getExtent(),\n        targetResolution, targetExtent, this.triangulation_, sources,\n        this.gutter_, this.renderEdges_);\n\n    this.state = _ol_TileState_.LOADED;\n  }\n  this.changed();\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_reproj_Tile_.prototype.load = function() {\n  if (this.state == _ol_TileState_.IDLE) {\n    this.state = _ol_TileState_.LOADING;\n    this.changed();\n\n    var leftToLoad = 0;\n\n    this.sourcesListenerKeys_ = [];\n    this.sourceTiles_.forEach(function(tile, i, arr) {\n      var state = tile.getState();\n      if (state == _ol_TileState_.IDLE || state == _ol_TileState_.LOADING) {\n        leftToLoad++;\n\n        var sourceListenKey;\n        sourceListenKey = _ol_events_.listen(tile, _ol_events_EventType_.CHANGE,\n            function(e) {\n              var state = tile.getState();\n              if (state == _ol_TileState_.LOADED ||\n                  state == _ol_TileState_.ERROR ||\n                  state == _ol_TileState_.EMPTY) {\n                _ol_events_.unlistenByKey(sourceListenKey);\n                leftToLoad--;\n                if (leftToLoad === 0) {\n                  this.unlistenSources_();\n                  this.reproject_();\n                }\n              }\n            }, this);\n        this.sourcesListenerKeys_.push(sourceListenKey);\n      }\n    }, this);\n\n    this.sourceTiles_.forEach(function(tile, i, arr) {\n      var state = tile.getState();\n      if (state == _ol_TileState_.IDLE) {\n        tile.load();\n      }\n    });\n\n    if (leftToLoad === 0) {\n      setTimeout(this.reproject_.bind(this), 0);\n    }\n  }\n};\n\n\n/**\n * @private\n */\n_ol_reproj_Tile_.prototype.unlistenSources_ = function() {\n  this.sourcesListenerKeys_.forEach(_ol_events_.unlistenByKey);\n  this.sourcesListenerKeys_ = null;\n};\nexport default _ol_reproj_Tile_;\n","import _ol_asserts_ from './asserts.js';\nimport _ol_math_ from './math.js';\nimport _ol_tilecoord_ from './tilecoord.js';\nvar _ol_TileUrlFunction_ = {};\n\n\n/**\n * @param {string} template Template.\n * @param {ol.tilegrid.TileGrid} tileGrid Tile grid.\n * @return {ol.TileUrlFunctionType} Tile URL function.\n */\n_ol_TileUrlFunction_.createFromTemplate = function(template, tileGrid) {\n  var zRegEx = /\\{z\\}/g;\n  var xRegEx = /\\{x\\}/g;\n  var yRegEx = /\\{y\\}/g;\n  var dashYRegEx = /\\{-y\\}/g;\n  return (\n    /**\n     * @param {ol.TileCoord} tileCoord Tile Coordinate.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {ol.proj.Projection} projection Projection.\n     * @return {string|undefined} Tile URL.\n     */\n    function(tileCoord, pixelRatio, projection) {\n      if (!tileCoord) {\n        return undefined;\n      } else {\n        return template.replace(zRegEx, tileCoord[0].toString())\n            .replace(xRegEx, tileCoord[1].toString())\n            .replace(yRegEx, function() {\n              var y = -tileCoord[2] - 1;\n              return y.toString();\n            })\n            .replace(dashYRegEx, function() {\n              var z = tileCoord[0];\n              var range = tileGrid.getFullTileRange(z);\n              _ol_asserts_.assert(range, 55); // The {-y} placeholder requires a tile grid with extent\n              var y = range.getHeight() + tileCoord[2];\n              return y.toString();\n            });\n      }\n    }\n  );\n};\n\n\n/**\n * @param {Array.<string>} templates Templates.\n * @param {ol.tilegrid.TileGrid} tileGrid Tile grid.\n * @return {ol.TileUrlFunctionType} Tile URL function.\n */\n_ol_TileUrlFunction_.createFromTemplates = function(templates, tileGrid) {\n  var len = templates.length;\n  var tileUrlFunctions = new Array(len);\n  for (var i = 0; i < len; ++i) {\n    tileUrlFunctions[i] = _ol_TileUrlFunction_.createFromTemplate(\n        templates[i], tileGrid);\n  }\n  return _ol_TileUrlFunction_.createFromTileUrlFunctions(tileUrlFunctions);\n};\n\n\n/**\n * @param {Array.<ol.TileUrlFunctionType>} tileUrlFunctions Tile URL Functions.\n * @return {ol.TileUrlFunctionType} Tile URL function.\n */\n_ol_TileUrlFunction_.createFromTileUrlFunctions = function(tileUrlFunctions) {\n  if (tileUrlFunctions.length === 1) {\n    return tileUrlFunctions[0];\n  }\n  return (\n    /**\n     * @param {ol.TileCoord} tileCoord Tile Coordinate.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {ol.proj.Projection} projection Projection.\n     * @return {string|undefined} Tile URL.\n     */\n    function(tileCoord, pixelRatio, projection) {\n      if (!tileCoord) {\n        return undefined;\n      } else {\n        var h = _ol_tilecoord_.hash(tileCoord);\n        var index = _ol_math_.modulo(h, tileUrlFunctions.length);\n        return tileUrlFunctions[index](tileCoord, pixelRatio, projection);\n      }\n    }\n  );\n};\n\n\n/**\n * @param {ol.TileCoord} tileCoord Tile coordinate.\n * @param {number} pixelRatio Pixel ratio.\n * @param {ol.proj.Projection} projection Projection.\n * @return {string|undefined} Tile URL.\n */\n_ol_TileUrlFunction_.nullTileUrlFunction = function(tileCoord, pixelRatio, projection) {\n  return undefined;\n};\n\n\n/**\n * @param {string} url URL.\n * @return {Array.<string>} Array of urls.\n */\n_ol_TileUrlFunction_.expandUrl = function(url) {\n  var urls = [];\n  var match = /\\{([a-z])-([a-z])\\}/.exec(url);\n  if (match) {\n    // char range\n    var startCharCode = match[1].charCodeAt(0);\n    var stopCharCode = match[2].charCodeAt(0);\n    var charCode;\n    for (charCode = startCharCode; charCode <= stopCharCode; ++charCode) {\n      urls.push(url.replace(match[0], String.fromCharCode(charCode)));\n    }\n    return urls;\n  }\n  match = match = /\\{(\\d+)-(\\d+)\\}/.exec(url);\n  if (match) {\n    // number range\n    var stop = parseInt(match[2], 10);\n    for (var i = parseInt(match[1], 10); i <= stop; i++) {\n      urls.push(url.replace(match[0], i.toString()));\n    }\n    return urls;\n  }\n  urls.push(url);\n  return urls;\n};\nexport default _ol_TileUrlFunction_;\n","import _ol_ from '../index.js';\nimport _ol_TileCache_ from '../tilecache.js';\nimport _ol_TileState_ from '../tilestate.js';\nimport _ol_events_Event_ from '../events/event.js';\nimport _ol_proj_ from '../proj.js';\nimport _ol_size_ from '../size.js';\nimport _ol_source_Source_ from '../source/source.js';\nimport _ol_tilecoord_ from '../tilecoord.js';\nimport _ol_tilegrid_ from '../tilegrid.js';\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for sources providing images divided into a tile grid.\n *\n * @constructor\n * @abstract\n * @extends {ol.source.Source}\n * @param {ol.SourceTileOptions} options Tile source options.\n * @api\n */\nvar _ol_source_Tile_ = function(options) {\n\n  _ol_source_Source_.call(this, {\n    attributions: options.attributions,\n    extent: options.extent,\n    logo: options.logo,\n    projection: options.projection,\n    state: options.state,\n    wrapX: options.wrapX\n  });\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.opaque_ = options.opaque !== undefined ? options.opaque : false;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.tilePixelRatio_ = options.tilePixelRatio !== undefined ?\n    options.tilePixelRatio : 1;\n\n  /**\n   * @protected\n   * @type {ol.tilegrid.TileGrid}\n   */\n  this.tileGrid = options.tileGrid !== undefined ? options.tileGrid : null;\n\n  /**\n   * @protected\n   * @type {ol.TileCache}\n   */\n  this.tileCache = new _ol_TileCache_(options.cacheSize);\n\n  /**\n   * @protected\n   * @type {ol.Size}\n   */\n  this.tmpSize = [0, 0];\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this.key_ = '';\n\n  /**\n   * @protected\n   * @type {olx.TileOptions}\n   */\n  this.tileOptions = {transition: options.transition};\n\n};\n\n_ol_.inherits(_ol_source_Tile_, _ol_source_Source_);\n\n\n/**\n * @return {boolean} Can expire cache.\n */\n_ol_source_Tile_.prototype.canExpireCache = function() {\n  return this.tileCache.canExpireCache();\n};\n\n\n/**\n * @param {ol.proj.Projection} projection Projection.\n * @param {Object.<string, ol.TileRange>} usedTiles Used tiles.\n */\n_ol_source_Tile_.prototype.expireCache = function(projection, usedTiles) {\n  var tileCache = this.getTileCacheForProjection(projection);\n  if (tileCache) {\n    tileCache.expireCache(usedTiles);\n  }\n};\n\n\n/**\n * @param {ol.proj.Projection} projection Projection.\n * @param {number} z Zoom level.\n * @param {ol.TileRange} tileRange Tile range.\n * @param {function(ol.Tile):(boolean|undefined)} callback Called with each\n *     loaded tile.  If the callback returns `false`, the tile will not be\n *     considered loaded.\n * @return {boolean} The tile range is fully covered with loaded tiles.\n */\n_ol_source_Tile_.prototype.forEachLoadedTile = function(projection, z, tileRange, callback) {\n  var tileCache = this.getTileCacheForProjection(projection);\n  if (!tileCache) {\n    return false;\n  }\n\n  var covered = true;\n  var tile, tileCoordKey, loaded;\n  for (var x = tileRange.minX; x <= tileRange.maxX; ++x) {\n    for (var y = tileRange.minY; y <= tileRange.maxY; ++y) {\n      tileCoordKey = _ol_tilecoord_.getKeyZXY(z, x, y);\n      loaded = false;\n      if (tileCache.containsKey(tileCoordKey)) {\n        tile = /** @type {!ol.Tile} */ (tileCache.get(tileCoordKey));\n        loaded = tile.getState() === _ol_TileState_.LOADED;\n        if (loaded) {\n          loaded = (callback(tile) !== false);\n        }\n      }\n      if (!loaded) {\n        covered = false;\n      }\n    }\n  }\n  return covered;\n};\n\n\n/**\n * @param {ol.proj.Projection} projection Projection.\n * @return {number} Gutter.\n */\n_ol_source_Tile_.prototype.getGutter = function(projection) {\n  return 0;\n};\n\n\n/**\n * Return the key to be used for all tiles in the source.\n * @return {string} The key for all tiles.\n * @protected\n */\n_ol_source_Tile_.prototype.getKey = function() {\n  return this.key_;\n};\n\n\n/**\n * Set the value to be used as the key for all tiles in the source.\n * @param {string} key The key for tiles.\n * @protected\n */\n_ol_source_Tile_.prototype.setKey = function(key) {\n  if (this.key_ !== key) {\n    this.key_ = key;\n    this.changed();\n  }\n};\n\n\n/**\n * @param {ol.proj.Projection} projection Projection.\n * @return {boolean} Opaque.\n */\n_ol_source_Tile_.prototype.getOpaque = function(projection) {\n  return this.opaque_;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_source_Tile_.prototype.getResolutions = function() {\n  return this.tileGrid.getResolutions();\n};\n\n\n/**\n * @abstract\n * @param {number} z Tile coordinate z.\n * @param {number} x Tile coordinate x.\n * @param {number} y Tile coordinate y.\n * @param {number} pixelRatio Pixel ratio.\n * @param {ol.proj.Projection} projection Projection.\n * @return {!ol.Tile} Tile.\n */\n_ol_source_Tile_.prototype.getTile = function(z, x, y, pixelRatio, projection) {};\n\n\n/**\n * Return the tile grid of the tile source.\n * @return {ol.tilegrid.TileGrid} Tile grid.\n * @api\n */\n_ol_source_Tile_.prototype.getTileGrid = function() {\n  return this.tileGrid;\n};\n\n\n/**\n * @param {ol.proj.Projection} projection Projection.\n * @return {!ol.tilegrid.TileGrid} Tile grid.\n */\n_ol_source_Tile_.prototype.getTileGridForProjection = function(projection) {\n  if (!this.tileGrid) {\n    return _ol_tilegrid_.getForProjection(projection);\n  } else {\n    return this.tileGrid;\n  }\n};\n\n\n/**\n * @param {ol.proj.Projection} projection Projection.\n * @return {ol.TileCache} Tile cache.\n * @protected\n */\n_ol_source_Tile_.prototype.getTileCacheForProjection = function(projection) {\n  var thisProj = this.getProjection();\n  if (thisProj && !_ol_proj_.equivalent(thisProj, projection)) {\n    return null;\n  } else {\n    return this.tileCache;\n  }\n};\n\n\n/**\n * Get the tile pixel ratio for this source. Subclasses may override this\n * method, which is meant to return a supported pixel ratio that matches the\n * provided `pixelRatio` as close as possible.\n * @param {number} pixelRatio Pixel ratio.\n * @return {number} Tile pixel ratio.\n */\n_ol_source_Tile_.prototype.getTilePixelRatio = function(pixelRatio) {\n  return this.tilePixelRatio_;\n};\n\n\n/**\n * @param {number} z Z.\n * @param {number} pixelRatio Pixel ratio.\n * @param {ol.proj.Projection} projection Projection.\n * @return {ol.Size} Tile size.\n */\n_ol_source_Tile_.prototype.getTilePixelSize = function(z, pixelRatio, projection) {\n  var tileGrid = this.getTileGridForProjection(projection);\n  var tilePixelRatio = this.getTilePixelRatio(pixelRatio);\n  var tileSize = _ol_size_.toSize(tileGrid.getTileSize(z), this.tmpSize);\n  if (tilePixelRatio == 1) {\n    return tileSize;\n  } else {\n    return _ol_size_.scale(tileSize, tilePixelRatio, this.tmpSize);\n  }\n};\n\n\n/**\n * Returns a tile coordinate wrapped around the x-axis. When the tile coordinate\n * is outside the resolution and extent range of the tile grid, `null` will be\n * returned.\n * @param {ol.TileCoord} tileCoord Tile coordinate.\n * @param {ol.proj.Projection=} opt_projection Projection.\n * @return {ol.TileCoord} Tile coordinate to be passed to the tileUrlFunction or\n *     null if no tile URL should be created for the passed `tileCoord`.\n */\n_ol_source_Tile_.prototype.getTileCoordForTileUrlFunction = function(tileCoord, opt_projection) {\n  var projection = opt_projection !== undefined ?\n    opt_projection : this.getProjection();\n  var tileGrid = this.getTileGridForProjection(projection);\n  if (this.getWrapX() && projection.isGlobal()) {\n    tileCoord = _ol_tilegrid_.wrapX(tileGrid, tileCoord, projection);\n  }\n  return _ol_tilecoord_.withinExtentAndZ(tileCoord, tileGrid) ? tileCoord : null;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_source_Tile_.prototype.refresh = function() {\n  this.tileCache.clear();\n  this.changed();\n};\n\n\n/**\n * Marks a tile coord as being used, without triggering a load.\n * @param {number} z Tile coordinate z.\n * @param {number} x Tile coordinate x.\n * @param {number} y Tile coordinate y.\n * @param {ol.proj.Projection} projection Projection.\n */\n_ol_source_Tile_.prototype.useTile = _ol_.nullFunction;\n\n\n/**\n * @classdesc\n * Events emitted by {@link ol.source.Tile} instances are instances of this\n * type.\n *\n * @constructor\n * @extends {ol.events.Event}\n * @implements {oli.source.Tile.Event}\n * @param {string} type Type.\n * @param {ol.Tile} tile The tile.\n */\n_ol_source_Tile_.Event = function(type, tile) {\n\n  _ol_events_Event_.call(this, type);\n\n  /**\n   * The tile related to the event.\n   * @type {ol.Tile}\n   * @api\n   */\n  this.tile = tile;\n\n};\n_ol_.inherits(_ol_source_Tile_.Event, _ol_events_Event_);\nexport default _ol_source_Tile_;\n","/**\n * @enum {string}\n */\nvar _ol_source_TileEventType_ = {\n\n  /**\n   * Triggered when a tile starts loading.\n   * @event ol.source.Tile.Event#tileloadstart\n   * @api\n   */\n  TILELOADSTART: 'tileloadstart',\n\n  /**\n   * Triggered when a tile finishes loading, either when its data is loaded,\n   * or when loading was aborted because the tile is no longer needed.\n   * @event ol.source.Tile.Event#tileloadend\n   * @api\n   */\n  TILELOADEND: 'tileloadend',\n\n  /**\n   * Triggered if tile loading results in an error.\n   * @event ol.source.Tile.Event#tileloaderror\n   * @api\n   */\n  TILELOADERROR: 'tileloaderror'\n\n};\n\nexport default _ol_source_TileEventType_;\n","import _ol_ from '../index.js';\nimport _ol_TileState_ from '../tilestate.js';\nimport _ol_TileUrlFunction_ from '../tileurlfunction.js';\nimport _ol_source_Tile_ from '../source/tile.js';\nimport _ol_source_TileEventType_ from '../source/tileeventtype.js';\nimport _ol_tilecoord_ from '../tilecoord.js';\n\n/**\n * @classdesc\n * Base class for sources providing tiles divided into a tile grid over http.\n *\n * @constructor\n * @abstract\n * @fires ol.source.Tile.Event\n * @extends {ol.source.Tile}\n * @param {ol.SourceUrlTileOptions} options Image tile options.\n */\nvar _ol_source_UrlTile_ = function(options) {\n\n  _ol_source_Tile_.call(this, {\n    attributions: options.attributions,\n    cacheSize: options.cacheSize,\n    extent: options.extent,\n    logo: options.logo,\n    opaque: options.opaque,\n    projection: options.projection,\n    state: options.state,\n    tileGrid: options.tileGrid,\n    tilePixelRatio: options.tilePixelRatio,\n    wrapX: options.wrapX,\n    transition: options.transition\n  });\n\n  /**\n   * @protected\n   * @type {ol.TileLoadFunctionType}\n   */\n  this.tileLoadFunction = options.tileLoadFunction;\n\n  /**\n   * @protected\n   * @type {ol.TileUrlFunctionType}\n   */\n  this.tileUrlFunction = this.fixedTileUrlFunction ?\n    this.fixedTileUrlFunction.bind(this) :\n    _ol_TileUrlFunction_.nullTileUrlFunction;\n\n  /**\n   * @protected\n   * @type {!Array.<string>|null}\n   */\n  this.urls = null;\n\n  if (options.urls) {\n    this.setUrls(options.urls);\n  } else if (options.url) {\n    this.setUrl(options.url);\n  }\n  if (options.tileUrlFunction) {\n    this.setTileUrlFunction(options.tileUrlFunction);\n  }\n\n  /**\n   * @private\n   * @type {Object.<number, boolean>}\n   */\n  this.tileLoadingKeys_ = {};\n\n};\n\n_ol_.inherits(_ol_source_UrlTile_, _ol_source_Tile_);\n\n\n/**\n * @type {ol.TileUrlFunctionType|undefined}\n * @protected\n */\n_ol_source_UrlTile_.prototype.fixedTileUrlFunction;\n\n/**\n * Return the tile load function of the source.\n * @return {ol.TileLoadFunctionType} TileLoadFunction\n * @api\n */\n_ol_source_UrlTile_.prototype.getTileLoadFunction = function() {\n  return this.tileLoadFunction;\n};\n\n\n/**\n * Return the tile URL function of the source.\n * @return {ol.TileUrlFunctionType} TileUrlFunction\n * @api\n */\n_ol_source_UrlTile_.prototype.getTileUrlFunction = function() {\n  return this.tileUrlFunction;\n};\n\n\n/**\n * Return the URLs used for this source.\n * When a tileUrlFunction is used instead of url or urls,\n * null will be returned.\n * @return {!Array.<string>|null} URLs.\n * @api\n */\n_ol_source_UrlTile_.prototype.getUrls = function() {\n  return this.urls;\n};\n\n\n/**\n * Handle tile change events.\n * @param {ol.events.Event} event Event.\n * @protected\n */\n_ol_source_UrlTile_.prototype.handleTileChange = function(event) {\n  var tile = /** @type {ol.Tile} */ (event.target);\n  var uid = _ol_.getUid(tile);\n  var tileState = tile.getState();\n  var type;\n  if (tileState == _ol_TileState_.LOADING) {\n    this.tileLoadingKeys_[uid] = true;\n    type = _ol_source_TileEventType_.TILELOADSTART;\n  } else if (uid in this.tileLoadingKeys_) {\n    delete this.tileLoadingKeys_[uid];\n    type = tileState == _ol_TileState_.ERROR ? _ol_source_TileEventType_.TILELOADERROR :\n      (tileState == _ol_TileState_.LOADED || tileState == _ol_TileState_.ABORT) ?\n        _ol_source_TileEventType_.TILELOADEND : undefined;\n  }\n  if (type != undefined) {\n    this.dispatchEvent(new _ol_source_Tile_.Event(type, tile));\n  }\n};\n\n\n/**\n * Set the tile load function of the source.\n * @param {ol.TileLoadFunctionType} tileLoadFunction Tile load function.\n * @api\n */\n_ol_source_UrlTile_.prototype.setTileLoadFunction = function(tileLoadFunction) {\n  this.tileCache.clear();\n  this.tileLoadFunction = tileLoadFunction;\n  this.changed();\n};\n\n\n/**\n * Set the tile URL function of the source.\n * @param {ol.TileUrlFunctionType} tileUrlFunction Tile URL function.\n * @param {string=} opt_key Optional new tile key for the source.\n * @api\n */\n_ol_source_UrlTile_.prototype.setTileUrlFunction = function(tileUrlFunction, opt_key) {\n  this.tileUrlFunction = tileUrlFunction;\n  this.tileCache.pruneExceptNewestZ();\n  if (typeof opt_key !== 'undefined') {\n    this.setKey(opt_key);\n  } else {\n    this.changed();\n  }\n};\n\n\n/**\n * Set the URL to use for requests.\n * @param {string} url URL.\n * @api\n */\n_ol_source_UrlTile_.prototype.setUrl = function(url) {\n  var urls = this.urls = _ol_TileUrlFunction_.expandUrl(url);\n  this.setTileUrlFunction(this.fixedTileUrlFunction ?\n    this.fixedTileUrlFunction.bind(this) :\n    _ol_TileUrlFunction_.createFromTemplates(urls, this.tileGrid), url);\n};\n\n\n/**\n * Set the URLs to use for requests.\n * @param {Array.<string>} urls URLs.\n * @api\n */\n_ol_source_UrlTile_.prototype.setUrls = function(urls) {\n  this.urls = urls;\n  var key = urls.join('\\n');\n  this.setTileUrlFunction(this.fixedTileUrlFunction ?\n    this.fixedTileUrlFunction.bind(this) :\n    _ol_TileUrlFunction_.createFromTemplates(urls, this.tileGrid), key);\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_source_UrlTile_.prototype.useTile = function(z, x, y) {\n  var tileCoordKey = _ol_tilecoord_.getKeyZXY(z, x, y);\n  if (this.tileCache.containsKey(tileCoordKey)) {\n    this.tileCache.get(tileCoordKey);\n  }\n};\nexport default _ol_source_UrlTile_;\n","import _ol_ from '../index.js';\nimport _ol_ImageTile_ from '../imagetile.js';\nimport _ol_TileCache_ from '../tilecache.js';\nimport _ol_TileState_ from '../tilestate.js';\nimport _ol_events_ from '../events.js';\nimport _ol_events_EventType_ from '../events/eventtype.js';\nimport _ol_proj_ from '../proj.js';\nimport _ol_reproj_Tile_ from '../reproj/tile.js';\nimport _ol_source_UrlTile_ from '../source/urltile.js';\nimport _ol_tilecoord_ from '../tilecoord.js';\nimport _ol_tilegrid_ from '../tilegrid.js';\n\n/**\n * @classdesc\n * Base class for sources providing images divided into a tile grid.\n *\n * @constructor\n * @fires ol.source.Tile.Event\n * @extends {ol.source.UrlTile}\n * @param {olx.source.TileImageOptions} options Image tile options.\n * @api\n */\nvar _ol_source_TileImage_ = function(options) {\n\n  _ol_source_UrlTile_.call(this, {\n    attributions: options.attributions,\n    cacheSize: options.cacheSize,\n    extent: options.extent,\n    logo: options.logo,\n    opaque: options.opaque,\n    projection: options.projection,\n    state: options.state,\n    tileGrid: options.tileGrid,\n    tileLoadFunction: options.tileLoadFunction ?\n      options.tileLoadFunction : _ol_source_TileImage_.defaultTileLoadFunction,\n    tilePixelRatio: options.tilePixelRatio,\n    tileUrlFunction: options.tileUrlFunction,\n    url: options.url,\n    urls: options.urls,\n    wrapX: options.wrapX,\n    transition: options.transition\n  });\n\n  /**\n   * @protected\n   * @type {?string}\n   */\n  this.crossOrigin =\n      options.crossOrigin !== undefined ? options.crossOrigin : null;\n\n  /**\n   * @protected\n   * @type {function(new: ol.ImageTile, ol.TileCoord, ol.TileState, string,\n   *        ?string, ol.TileLoadFunctionType, olx.TileOptions=)}\n   */\n  this.tileClass = options.tileClass !== undefined ?\n    options.tileClass : _ol_ImageTile_;\n\n  /**\n   * @protected\n   * @type {Object.<string, ol.TileCache>}\n   */\n  this.tileCacheForProjection = {};\n\n  /**\n   * @protected\n   * @type {Object.<string, ol.tilegrid.TileGrid>}\n   */\n  this.tileGridForProjection = {};\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.reprojectionErrorThreshold_ = options.reprojectionErrorThreshold;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.renderReprojectionEdges_ = false;\n};\n\n_ol_.inherits(_ol_source_TileImage_, _ol_source_UrlTile_);\n\n\n/**\n * @inheritDoc\n */\n_ol_source_TileImage_.prototype.canExpireCache = function() {\n  if (!_ol_.ENABLE_RASTER_REPROJECTION) {\n    return _ol_source_UrlTile_.prototype.canExpireCache.call(this);\n  }\n  if (this.tileCache.canExpireCache()) {\n    return true;\n  } else {\n    for (var key in this.tileCacheForProjection) {\n      if (this.tileCacheForProjection[key].canExpireCache()) {\n        return true;\n      }\n    }\n  }\n  return false;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_source_TileImage_.prototype.expireCache = function(projection, usedTiles) {\n  if (!_ol_.ENABLE_RASTER_REPROJECTION) {\n    _ol_source_UrlTile_.prototype.expireCache.call(this, projection, usedTiles);\n    return;\n  }\n  var usedTileCache = this.getTileCacheForProjection(projection);\n\n  this.tileCache.expireCache(this.tileCache == usedTileCache ? usedTiles : {});\n  for (var id in this.tileCacheForProjection) {\n    var tileCache = this.tileCacheForProjection[id];\n    tileCache.expireCache(tileCache == usedTileCache ? usedTiles : {});\n  }\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_source_TileImage_.prototype.getGutter = function(projection) {\n  if (_ol_.ENABLE_RASTER_REPROJECTION &&\n      this.getProjection() && projection &&\n      !_ol_proj_.equivalent(this.getProjection(), projection)) {\n    return 0;\n  } else {\n    return this.getGutterInternal();\n  }\n};\n\n\n/**\n * @protected\n * @return {number} Gutter.\n */\n_ol_source_TileImage_.prototype.getGutterInternal = function() {\n  return 0;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_source_TileImage_.prototype.getOpaque = function(projection) {\n  if (_ol_.ENABLE_RASTER_REPROJECTION &&\n      this.getProjection() && projection &&\n      !_ol_proj_.equivalent(this.getProjection(), projection)) {\n    return false;\n  } else {\n    return _ol_source_UrlTile_.prototype.getOpaque.call(this, projection);\n  }\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_source_TileImage_.prototype.getTileGridForProjection = function(projection) {\n  if (!_ol_.ENABLE_RASTER_REPROJECTION) {\n    return _ol_source_UrlTile_.prototype.getTileGridForProjection.call(this, projection);\n  }\n  var thisProj = this.getProjection();\n  if (this.tileGrid &&\n      (!thisProj || _ol_proj_.equivalent(thisProj, projection))) {\n    return this.tileGrid;\n  } else {\n    var projKey = _ol_.getUid(projection).toString();\n    if (!(projKey in this.tileGridForProjection)) {\n      this.tileGridForProjection[projKey] =\n          _ol_tilegrid_.getForProjection(projection);\n    }\n    return /** @type {!ol.tilegrid.TileGrid} */ (this.tileGridForProjection[projKey]);\n  }\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_source_TileImage_.prototype.getTileCacheForProjection = function(projection) {\n  if (!_ol_.ENABLE_RASTER_REPROJECTION) {\n    return _ol_source_UrlTile_.prototype.getTileCacheForProjection.call(this, projection);\n  }\n  var thisProj = this.getProjection();\n  if (!thisProj || _ol_proj_.equivalent(thisProj, projection)) {\n    return this.tileCache;\n  } else {\n    var projKey = _ol_.getUid(projection).toString();\n    if (!(projKey in this.tileCacheForProjection)) {\n      this.tileCacheForProjection[projKey] = new _ol_TileCache_(this.tileCache.highWaterMark);\n    }\n    return this.tileCacheForProjection[projKey];\n  }\n};\n\n\n/**\n * @param {number} z Tile coordinate z.\n * @param {number} x Tile coordinate x.\n * @param {number} y Tile coordinate y.\n * @param {number} pixelRatio Pixel ratio.\n * @param {ol.proj.Projection} projection Projection.\n * @param {string} key The key set on the tile.\n * @return {!ol.Tile} Tile.\n * @private\n */\n_ol_source_TileImage_.prototype.createTile_ = function(z, x, y, pixelRatio, projection, key) {\n  var tileCoord = [z, x, y];\n  var urlTileCoord = this.getTileCoordForTileUrlFunction(\n      tileCoord, projection);\n  var tileUrl = urlTileCoord ?\n    this.tileUrlFunction(urlTileCoord, pixelRatio, projection) : undefined;\n  var tile = new this.tileClass(\n      tileCoord,\n      tileUrl !== undefined ? _ol_TileState_.IDLE : _ol_TileState_.EMPTY,\n      tileUrl !== undefined ? tileUrl : '',\n      this.crossOrigin,\n      this.tileLoadFunction,\n      this.tileOptions);\n  tile.key = key;\n  _ol_events_.listen(tile, _ol_events_EventType_.CHANGE,\n      this.handleTileChange, this);\n  return tile;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_source_TileImage_.prototype.getTile = function(z, x, y, pixelRatio, projection) {\n  var sourceProjection = /** @type {!ol.proj.Projection} */ (this.getProjection());\n  if (!_ol_.ENABLE_RASTER_REPROJECTION ||\n      !sourceProjection || !projection ||\n      _ol_proj_.equivalent(sourceProjection, projection)) {\n    return this.getTileInternal(z, x, y, pixelRatio, sourceProjection || projection);\n  } else {\n    var cache = this.getTileCacheForProjection(projection);\n    var tileCoord = [z, x, y];\n    var tile;\n    var tileCoordKey = _ol_tilecoord_.getKey(tileCoord);\n    if (cache.containsKey(tileCoordKey)) {\n      tile = /** @type {!ol.Tile} */ (cache.get(tileCoordKey));\n    }\n    var key = this.getKey();\n    if (tile && tile.key == key) {\n      return tile;\n    } else {\n      var sourceTileGrid = this.getTileGridForProjection(sourceProjection);\n      var targetTileGrid = this.getTileGridForProjection(projection);\n      var wrappedTileCoord =\n          this.getTileCoordForTileUrlFunction(tileCoord, projection);\n      var newTile = new _ol_reproj_Tile_(\n          sourceProjection, sourceTileGrid,\n          projection, targetTileGrid,\n          tileCoord, wrappedTileCoord, this.getTilePixelRatio(pixelRatio),\n          this.getGutterInternal(),\n          function(z, x, y, pixelRatio) {\n            return this.getTileInternal(z, x, y, pixelRatio, sourceProjection);\n          }.bind(this), this.reprojectionErrorThreshold_,\n          this.renderReprojectionEdges_);\n      newTile.key = key;\n\n      if (tile) {\n        newTile.interimTile = tile;\n        newTile.refreshInterimChain();\n        cache.replace(tileCoordKey, newTile);\n      } else {\n        cache.set(tileCoordKey, newTile);\n      }\n      return newTile;\n    }\n  }\n};\n\n\n/**\n * @param {number} z Tile coordinate z.\n * @param {number} x Tile coordinate x.\n * @param {number} y Tile coordinate y.\n * @param {number} pixelRatio Pixel ratio.\n * @param {!ol.proj.Projection} projection Projection.\n * @return {!ol.Tile} Tile.\n * @protected\n */\n_ol_source_TileImage_.prototype.getTileInternal = function(z, x, y, pixelRatio, projection) {\n  var tile = null;\n  var tileCoordKey = _ol_tilecoord_.getKeyZXY(z, x, y);\n  var key = this.getKey();\n  if (!this.tileCache.containsKey(tileCoordKey)) {\n    tile = this.createTile_(z, x, y, pixelRatio, projection, key);\n    this.tileCache.set(tileCoordKey, tile);\n  } else {\n    tile = this.tileCache.get(tileCoordKey);\n    if (tile.key != key) {\n      // The source's params changed. If the tile has an interim tile and if we\n      // can use it then we use it. Otherwise we create a new tile.  In both\n      // cases we attempt to assign an interim tile to the new tile.\n      var interimTile = tile;\n      tile = this.createTile_(z, x, y, pixelRatio, projection, key);\n\n      //make the new tile the head of the list,\n      if (interimTile.getState() == _ol_TileState_.IDLE) {\n        //the old tile hasn't begun loading yet, and is now outdated, so we can simply discard it\n        tile.interimTile = interimTile.interimTile;\n      } else {\n        tile.interimTile = interimTile;\n      }\n      tile.refreshInterimChain();\n      this.tileCache.replace(tileCoordKey, tile);\n    }\n  }\n  return tile;\n};\n\n\n/**\n * Sets whether to render reprojection edges or not (usually for debugging).\n * @param {boolean} render Render the edges.\n * @api\n */\n_ol_source_TileImage_.prototype.setRenderReprojectionEdges = function(render) {\n  if (!_ol_.ENABLE_RASTER_REPROJECTION ||\n      this.renderReprojectionEdges_ == render) {\n    return;\n  }\n  this.renderReprojectionEdges_ = render;\n  for (var id in this.tileCacheForProjection) {\n    this.tileCacheForProjection[id].clear();\n  }\n  this.changed();\n};\n\n\n/**\n * Sets the tile grid to use when reprojecting the tiles to the given\n * projection instead of the default tile grid for the projection.\n *\n * This can be useful when the default tile grid cannot be created\n * (e.g. projection has no extent defined) or\n * for optimization reasons (custom tile size, resolutions, ...).\n *\n * @param {ol.ProjectionLike} projection Projection.\n * @param {ol.tilegrid.TileGrid} tilegrid Tile grid to use for the projection.\n * @api\n */\n_ol_source_TileImage_.prototype.setTileGridForProjection = function(projection, tilegrid) {\n  if (_ol_.ENABLE_RASTER_REPROJECTION) {\n    var proj = _ol_proj_.get(projection);\n    if (proj) {\n      var projKey = _ol_.getUid(proj).toString();\n      if (!(projKey in this.tileGridForProjection)) {\n        this.tileGridForProjection[projKey] = tilegrid;\n      }\n    }\n  }\n};\n\n\n/**\n * @param {ol.ImageTile} imageTile Image tile.\n * @param {string} src Source.\n */\n_ol_source_TileImage_.defaultTileLoadFunction = function(imageTile, src) {\n  imageTile.getImage().src = src;\n};\nexport default _ol_source_TileImage_;\n","import _ol_ from '../index.js';\nimport _ol_source_TileImage_ from '../source/tileimage.js';\nimport _ol_tilegrid_ from '../tilegrid.js';\n\n/**\n * @classdesc\n * Layer source for tile data with URLs in a set XYZ format that are\n * defined in a URL template. By default, this follows the widely-used\n * Google grid where `x` 0 and `y` 0 are in the top left. Grids like\n * TMS where `x` 0 and `y` 0 are in the bottom left can be used by\n * using the `{-y}` placeholder in the URL template, so long as the\n * source does not have a custom tile grid. In this case,\n * {@link ol.source.TileImage} can be used with a `tileUrlFunction`\n * such as:\n *\n *  tileUrlFunction: function(coordinate) {\n *    return 'http://mapserver.com/' + coordinate[0] + '/' +\n *        coordinate[1] + '/' + coordinate[2] + '.png';\n *    }\n *\n *\n * @constructor\n * @extends {ol.source.TileImage}\n * @param {olx.source.XYZOptions=} opt_options XYZ options.\n * @api\n */\nvar _ol_source_XYZ_ = function(opt_options) {\n  var options = opt_options || {};\n  var projection = options.projection !== undefined ?\n    options.projection : 'EPSG:3857';\n\n  var tileGrid = options.tileGrid !== undefined ? options.tileGrid :\n    _ol_tilegrid_.createXYZ({\n      extent: _ol_tilegrid_.extentFromProjection(projection),\n      maxZoom: options.maxZoom,\n      minZoom: options.minZoom,\n      tileSize: options.tileSize\n    });\n\n  _ol_source_TileImage_.call(this, {\n    attributions: options.attributions,\n    cacheSize: options.cacheSize,\n    crossOrigin: options.crossOrigin,\n    logo: options.logo,\n    opaque: options.opaque,\n    projection: projection,\n    reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n    tileGrid: tileGrid,\n    tileLoadFunction: options.tileLoadFunction,\n    tilePixelRatio: options.tilePixelRatio,\n    tileUrlFunction: options.tileUrlFunction,\n    url: options.url,\n    urls: options.urls,\n    wrapX: options.wrapX !== undefined ? options.wrapX : true,\n    transition: options.transition\n  });\n\n};\n\n_ol_.inherits(_ol_source_XYZ_, _ol_source_TileImage_);\nexport default _ol_source_XYZ_;\n","import _ol_ from '../index.js';\nimport _ol_source_XYZ_ from '../source/xyz.js';\n\n/**\n * @classdesc\n * Layer source for the OpenStreetMap tile server.\n *\n * @constructor\n * @extends {ol.source.XYZ}\n * @param {olx.source.OSMOptions=} opt_options Open Street Map options.\n * @api\n */\nvar _ol_source_OSM_ = function(opt_options) {\n\n  var options = opt_options || {};\n\n  var attributions;\n  if (options.attributions !== undefined) {\n    attributions = options.attributions;\n  } else {\n    attributions = [_ol_source_OSM_.ATTRIBUTION];\n  }\n\n  var crossOrigin = options.crossOrigin !== undefined ?\n    options.crossOrigin : 'anonymous';\n\n  var url = options.url !== undefined ?\n    options.url : 'https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png';\n\n  _ol_source_XYZ_.call(this, {\n    attributions: attributions,\n    cacheSize: options.cacheSize,\n    crossOrigin: crossOrigin,\n    opaque: options.opaque !== undefined ? options.opaque : true,\n    maxZoom: options.maxZoom !== undefined ? options.maxZoom : 19,\n    reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n    tileLoadFunction: options.tileLoadFunction,\n    url: url,\n    wrapX: options.wrapX\n  });\n\n};\n\n_ol_.inherits(_ol_source_OSM_, _ol_source_XYZ_);\n\n\n/**\n * The attribution containing a link to the OpenStreetMap Copyright and License\n * page.\n * @const\n * @type {string}\n * @api\n */\n_ol_source_OSM_.ATTRIBUTION = '&copy; ' +\n      '<a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> ' +\n      'contributors.';\nexport default _ol_source_OSM_;\n","import Map from 'ol/map';\r\nimport View from 'ol/view';\r\nimport Projection from 'ol/proj/projection';\r\nimport Tile from 'ol/layer/tile';\r\nimport OSM from 'ol/source/osm';\r\nimport Control from 'ol/control';\r\n\r\nclass mapBase{\r\n    constructor(){\r\n        this.map =  null;//地图变量\r\n        this.view = null;//地图投影参数\r\n        this.bounds =  null;//地图的可视范围\r\n        this.baseMap = null;//地图底图类型\r\n        this.mapDivID =   null;//地图渲染的id\r\n        this.projection = null;//地图投影参数\r\n\r\n    }\r\n    getMap(){\r\n\r\n        return this.map;\r\n    }\r\n}\r\nclass mapCreator extends  mapBase{\r\n    constructor(ID){\r\n        super();\r\n        //页面上地图的id\r\n        this.mapDivID = ID;\r\n        //定义地图图层范围\r\n        this.bounds = [118.71735446343295, 30.927840396965042,\r\n            118.77970605871286, 30.971974273228675];\r\n\r\n        //定义底图图层\r\n        this.baseMap = new Tile({\r\n            source: new OSM()\r\n        });;\r\n\r\n        //定义投影参数\r\n        this.projection = new Projection({\r\n            code: 'EPSG:4326',\r\n            units: 'degrees',\r\n            axisOrientation: 'neu',\r\n            global: true\r\n        });\r\n\r\n        this.view = new View({\r\n            center: [118.74581, 30.94982],\r\n            zoom: 14,\r\n            projection: this.projection\r\n        });\r\n    }\r\n    initMap(htmlID, options){\r\n        this.mapDivID = htmlID;\r\n\r\n        for(let key in options){\r\n            !!options[key] && (this[key] = options[key]);\r\n        }\r\n        return this;\r\n    }\r\n    startMap(){\r\n        this.map = new Map({\r\n            layers: [\r\n                this.baseMap\r\n            ],\r\n            target: this.mapDivID,\r\n            controls: Control.defaults({\r\n                attributionOptions: {\r\n                    collapsible: false\r\n                }\r\n            }),\r\n            view: this.view\r\n        });\r\n        this.map.getView().fit(this.bounds, this.map.getSize());\r\n\r\n        return this;\r\n    }\r\n\r\n    addLayer(layers){\r\n        if(!this.map){\r\n            alert(\"请先初始化地图容器！\");\r\n            return;\r\n        }\r\n        this.map.addLayer(layers);\r\n\r\n        return this;\r\n    }\r\n}\r\n\r\nexport default  mapCreator;","import _ol_geom_Geometry_ from '../geom/geometry.js';\nimport _ol_obj_ from '../obj.js';\nimport _ol_proj_ from '../proj.js';\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for feature formats.\n * {ol.format.Feature} subclasses provide the ability to decode and encode\n * {@link ol.Feature} objects from a variety of commonly used geospatial\n * file formats.  See the documentation for each format for more details.\n *\n * @constructor\n * @abstract\n * @api\n */\nvar _ol_format_Feature_ = function() {\n\n  /**\n   * @protected\n   * @type {ol.proj.Projection}\n   */\n  this.defaultDataProjection = null;\n\n  /**\n   * @protected\n   * @type {ol.proj.Projection}\n   */\n  this.defaultFeatureProjection = null;\n\n};\n\n\n/**\n * Adds the data projection to the read options.\n * @param {Document|Node|Object|string} source Source.\n * @param {olx.format.ReadOptions=} opt_options Options.\n * @return {olx.format.ReadOptions|undefined} Options.\n * @protected\n */\n_ol_format_Feature_.prototype.getReadOptions = function(source, opt_options) {\n  var options;\n  if (opt_options) {\n    options = {\n      dataProjection: opt_options.dataProjection ?\n        opt_options.dataProjection : this.readProjection(source),\n      featureProjection: opt_options.featureProjection\n    };\n  }\n  return this.adaptOptions(options);\n};\n\n\n/**\n * Sets the `defaultDataProjection` on the options, if no `dataProjection`\n * is set.\n * @param {olx.format.WriteOptions|olx.format.ReadOptions|undefined} options\n *     Options.\n * @protected\n * @return {olx.format.WriteOptions|olx.format.ReadOptions|undefined}\n *     Updated options.\n */\n_ol_format_Feature_.prototype.adaptOptions = function(options) {\n  return _ol_obj_.assign({\n    dataProjection: this.defaultDataProjection,\n    featureProjection: this.defaultFeatureProjection\n  }, options);\n};\n\n\n/**\n * Get the extent from the source of the last {@link readFeatures} call.\n * @return {ol.Extent} Tile extent.\n */\n_ol_format_Feature_.prototype.getLastExtent = function() {\n  return null;\n};\n\n\n/**\n * @abstract\n * @return {ol.format.FormatType} Format.\n */\n_ol_format_Feature_.prototype.getType = function() {};\n\n\n/**\n * Read a single feature from a source.\n *\n * @abstract\n * @param {Document|Node|Object|string} source Source.\n * @param {olx.format.ReadOptions=} opt_options Read options.\n * @return {ol.Feature} Feature.\n */\n_ol_format_Feature_.prototype.readFeature = function(source, opt_options) {};\n\n\n/**\n * Read all features from a source.\n *\n * @abstract\n * @param {Document|Node|ArrayBuffer|Object|string} source Source.\n * @param {olx.format.ReadOptions=} opt_options Read options.\n * @return {Array.<ol.Feature>} Features.\n */\n_ol_format_Feature_.prototype.readFeatures = function(source, opt_options) {};\n\n\n/**\n * Read a single geometry from a source.\n *\n * @abstract\n * @param {Document|Node|Object|string} source Source.\n * @param {olx.format.ReadOptions=} opt_options Read options.\n * @return {ol.geom.Geometry} Geometry.\n */\n_ol_format_Feature_.prototype.readGeometry = function(source, opt_options) {};\n\n\n/**\n * Read the projection from a source.\n *\n * @abstract\n * @param {Document|Node|Object|string} source Source.\n * @return {ol.proj.Projection} Projection.\n */\n_ol_format_Feature_.prototype.readProjection = function(source) {};\n\n\n/**\n * Encode a feature in this format.\n *\n * @abstract\n * @param {ol.Feature} feature Feature.\n * @param {olx.format.WriteOptions=} opt_options Write options.\n * @return {string} Result.\n */\n_ol_format_Feature_.prototype.writeFeature = function(feature, opt_options) {};\n\n\n/**\n * Encode an array of features in this format.\n *\n * @abstract\n * @param {Array.<ol.Feature>} features Features.\n * @param {olx.format.WriteOptions=} opt_options Write options.\n * @return {string} Result.\n */\n_ol_format_Feature_.prototype.writeFeatures = function(features, opt_options) {};\n\n\n/**\n * Write a single geometry in this format.\n *\n * @abstract\n * @param {ol.geom.Geometry} geometry Geometry.\n * @param {olx.format.WriteOptions=} opt_options Write options.\n * @return {string} Result.\n */\n_ol_format_Feature_.prototype.writeGeometry = function(geometry, opt_options) {};\n\n\n/**\n * @param {ol.geom.Geometry|ol.Extent} geometry Geometry.\n * @param {boolean} write Set to true for writing, false for reading.\n * @param {(olx.format.WriteOptions|olx.format.ReadOptions)=} opt_options\n *     Options.\n * @return {ol.geom.Geometry|ol.Extent} Transformed geometry.\n * @protected\n */\n_ol_format_Feature_.transformWithOptions = function(\n    geometry, write, opt_options) {\n  var featureProjection = opt_options ?\n    _ol_proj_.get(opt_options.featureProjection) : null;\n  var dataProjection = opt_options ?\n    _ol_proj_.get(opt_options.dataProjection) : null;\n  /**\n   * @type {ol.geom.Geometry|ol.Extent}\n   */\n  var transformed;\n  if (featureProjection && dataProjection &&\n      !_ol_proj_.equivalent(featureProjection, dataProjection)) {\n    if (geometry instanceof _ol_geom_Geometry_) {\n      transformed = (write ? geometry.clone() : geometry).transform(\n          write ? featureProjection : dataProjection,\n          write ? dataProjection : featureProjection);\n    } else {\n      // FIXME this is necessary because ol.format.GML treats extents\n      // as geometries\n      transformed = _ol_proj_.transformExtent(\n          geometry,\n          dataProjection,\n          featureProjection);\n    }\n  } else {\n    transformed = geometry;\n  }\n  if (write && opt_options && opt_options.decimals !== undefined) {\n    var power = Math.pow(10, opt_options.decimals);\n    // if decimals option on write, round each coordinate appropriately\n    /**\n     * @param {Array.<number>} coordinates Coordinates.\n     * @return {Array.<number>} Transformed coordinates.\n     */\n    var transform = function(coordinates) {\n      for (var i = 0, ii = coordinates.length; i < ii; ++i) {\n        coordinates[i] = Math.round(coordinates[i] * power) / power;\n      }\n      return coordinates;\n    };\n    if (transformed === geometry) {\n      transformed = transformed.clone();\n    }\n    transformed.applyTransform(transform);\n  }\n  return transformed;\n};\nexport default _ol_format_Feature_;\n","import _ol_ from '../index.js';\nimport _ol_format_Feature_ from '../format/feature.js';\nimport _ol_format_FormatType_ from '../format/formattype.js';\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for JSON feature formats.\n *\n * @constructor\n * @abstract\n * @extends {ol.format.Feature}\n */\nvar _ol_format_JSONFeature_ = function() {\n  _ol_format_Feature_.call(this);\n};\n\n_ol_.inherits(_ol_format_JSONFeature_, _ol_format_Feature_);\n\n\n/**\n * @param {Document|Node|Object|string} source Source.\n * @private\n * @return {Object} Object.\n */\n_ol_format_JSONFeature_.prototype.getObject_ = function(source) {\n  if (typeof source === 'string') {\n    var object = JSON.parse(source);\n    return object ? /** @type {Object} */ (object) : null;\n  } else if (source !== null) {\n    return source;\n  } else {\n    return null;\n  }\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_format_JSONFeature_.prototype.getType = function() {\n  return _ol_format_FormatType_.JSON;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_format_JSONFeature_.prototype.readFeature = function(source, opt_options) {\n  return this.readFeatureFromObject(\n      this.getObject_(source), this.getReadOptions(source, opt_options));\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_format_JSONFeature_.prototype.readFeatures = function(source, opt_options) {\n  return this.readFeaturesFromObject(\n      this.getObject_(source), this.getReadOptions(source, opt_options));\n};\n\n\n/**\n * @abstract\n * @param {Object} object Object.\n * @param {olx.format.ReadOptions=} opt_options Read options.\n * @protected\n * @return {ol.Feature} Feature.\n */\n_ol_format_JSONFeature_.prototype.readFeatureFromObject = function(object, opt_options) {};\n\n\n/**\n * @abstract\n * @param {Object} object Object.\n * @param {olx.format.ReadOptions=} opt_options Read options.\n * @protected\n * @return {Array.<ol.Feature>} Features.\n */\n_ol_format_JSONFeature_.prototype.readFeaturesFromObject = function(object, opt_options) {};\n\n\n/**\n * @inheritDoc\n */\n_ol_format_JSONFeature_.prototype.readGeometry = function(source, opt_options) {\n  return this.readGeometryFromObject(\n      this.getObject_(source), this.getReadOptions(source, opt_options));\n};\n\n\n/**\n * @abstract\n * @param {Object} object Object.\n * @param {olx.format.ReadOptions=} opt_options Read options.\n * @protected\n * @return {ol.geom.Geometry} Geometry.\n */\n_ol_format_JSONFeature_.prototype.readGeometryFromObject = function(object, opt_options) {};\n\n\n/**\n * @inheritDoc\n */\n_ol_format_JSONFeature_.prototype.readProjection = function(source) {\n  return this.readProjectionFromObject(this.getObject_(source));\n};\n\n\n/**\n * @abstract\n * @param {Object} object Object.\n * @protected\n * @return {ol.proj.Projection} Projection.\n */\n_ol_format_JSONFeature_.prototype.readProjectionFromObject = function(object) {};\n\n\n/**\n * @inheritDoc\n */\n_ol_format_JSONFeature_.prototype.writeFeature = function(feature, opt_options) {\n  return JSON.stringify(this.writeFeatureObject(feature, opt_options));\n};\n\n\n/**\n * @abstract\n * @param {ol.Feature} feature Feature.\n * @param {olx.format.WriteOptions=} opt_options Write options.\n * @return {Object} Object.\n */\n_ol_format_JSONFeature_.prototype.writeFeatureObject = function(feature, opt_options) {};\n\n\n/**\n * @inheritDoc\n */\n_ol_format_JSONFeature_.prototype.writeFeatures = function(features, opt_options) {\n  return JSON.stringify(this.writeFeaturesObject(features, opt_options));\n};\n\n\n/**\n * @abstract\n * @param {Array.<ol.Feature>} features Features.\n * @param {olx.format.WriteOptions=} opt_options Write options.\n * @return {Object} Object.\n */\n_ol_format_JSONFeature_.prototype.writeFeaturesObject = function(features, opt_options) {};\n\n\n/**\n * @inheritDoc\n */\n_ol_format_JSONFeature_.prototype.writeGeometry = function(geometry, opt_options) {\n  return JSON.stringify(this.writeGeometryObject(geometry, opt_options));\n};\n\n\n/**\n * @abstract\n * @param {ol.geom.Geometry} geometry Geometry.\n * @param {olx.format.WriteOptions=} opt_options Write options.\n * @return {Object} Object.\n */\n_ol_format_JSONFeature_.prototype.writeGeometryObject = function(geometry, opt_options) {};\nexport default _ol_format_JSONFeature_;\n","import _ol_ from '../index.js';\nimport _ol_events_ from '../events.js';\nimport _ol_events_EventType_ from '../events/eventtype.js';\nimport _ol_extent_ from '../extent.js';\nimport _ol_geom_Geometry_ from '../geom/geometry.js';\nimport _ol_geom_GeometryType_ from '../geom/geometrytype.js';\nimport _ol_obj_ from '../obj.js';\n\n/**\n * @classdesc\n * An array of {@link ol.geom.Geometry} objects.\n *\n * @constructor\n * @extends {ol.geom.Geometry}\n * @param {Array.<ol.geom.Geometry>=} opt_geometries Geometries.\n * @api\n */\nvar _ol_geom_GeometryCollection_ = function(opt_geometries) {\n\n  _ol_geom_Geometry_.call(this);\n\n  /**\n   * @private\n   * @type {Array.<ol.geom.Geometry>}\n   */\n  this.geometries_ = opt_geometries ? opt_geometries : null;\n\n  this.listenGeometriesChange_();\n};\n\n_ol_.inherits(_ol_geom_GeometryCollection_, _ol_geom_Geometry_);\n\n\n/**\n * @param {Array.<ol.geom.Geometry>} geometries Geometries.\n * @private\n * @return {Array.<ol.geom.Geometry>} Cloned geometries.\n */\n_ol_geom_GeometryCollection_.cloneGeometries_ = function(geometries) {\n  var clonedGeometries = [];\n  var i, ii;\n  for (i = 0, ii = geometries.length; i < ii; ++i) {\n    clonedGeometries.push(geometries[i].clone());\n  }\n  return clonedGeometries;\n};\n\n\n/**\n * @private\n */\n_ol_geom_GeometryCollection_.prototype.unlistenGeometriesChange_ = function() {\n  var i, ii;\n  if (!this.geometries_) {\n    return;\n  }\n  for (i = 0, ii = this.geometries_.length; i < ii; ++i) {\n    _ol_events_.unlisten(\n        this.geometries_[i], _ol_events_EventType_.CHANGE,\n        this.changed, this);\n  }\n};\n\n\n/**\n * @private\n */\n_ol_geom_GeometryCollection_.prototype.listenGeometriesChange_ = function() {\n  var i, ii;\n  if (!this.geometries_) {\n    return;\n  }\n  for (i = 0, ii = this.geometries_.length; i < ii; ++i) {\n    _ol_events_.listen(\n        this.geometries_[i], _ol_events_EventType_.CHANGE,\n        this.changed, this);\n  }\n};\n\n\n/**\n * Make a complete copy of the geometry.\n * @return {!ol.geom.GeometryCollection} Clone.\n * @override\n * @api\n */\n_ol_geom_GeometryCollection_.prototype.clone = function() {\n  var geometryCollection = new _ol_geom_GeometryCollection_(null);\n  geometryCollection.setGeometries(this.geometries_);\n  return geometryCollection;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_geom_GeometryCollection_.prototype.closestPointXY = function(x, y, closestPoint, minSquaredDistance) {\n  if (minSquaredDistance <\n      _ol_extent_.closestSquaredDistanceXY(this.getExtent(), x, y)) {\n    return minSquaredDistance;\n  }\n  var geometries = this.geometries_;\n  var i, ii;\n  for (i = 0, ii = geometries.length; i < ii; ++i) {\n    minSquaredDistance = geometries[i].closestPointXY(\n        x, y, closestPoint, minSquaredDistance);\n  }\n  return minSquaredDistance;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_geom_GeometryCollection_.prototype.containsXY = function(x, y) {\n  var geometries = this.geometries_;\n  var i, ii;\n  for (i = 0, ii = geometries.length; i < ii; ++i) {\n    if (geometries[i].containsXY(x, y)) {\n      return true;\n    }\n  }\n  return false;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_geom_GeometryCollection_.prototype.computeExtent = function(extent) {\n  _ol_extent_.createOrUpdateEmpty(extent);\n  var geometries = this.geometries_;\n  for (var i = 0, ii = geometries.length; i < ii; ++i) {\n    _ol_extent_.extend(extent, geometries[i].getExtent());\n  }\n  return extent;\n};\n\n\n/**\n * Return the geometries that make up this geometry collection.\n * @return {Array.<ol.geom.Geometry>} Geometries.\n * @api\n */\n_ol_geom_GeometryCollection_.prototype.getGeometries = function() {\n  return _ol_geom_GeometryCollection_.cloneGeometries_(this.geometries_);\n};\n\n\n/**\n * @return {Array.<ol.geom.Geometry>} Geometries.\n */\n_ol_geom_GeometryCollection_.prototype.getGeometriesArray = function() {\n  return this.geometries_;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_geom_GeometryCollection_.prototype.getSimplifiedGeometry = function(squaredTolerance) {\n  if (this.simplifiedGeometryRevision != this.getRevision()) {\n    _ol_obj_.clear(this.simplifiedGeometryCache);\n    this.simplifiedGeometryMaxMinSquaredTolerance = 0;\n    this.simplifiedGeometryRevision = this.getRevision();\n  }\n  if (squaredTolerance < 0 ||\n      (this.simplifiedGeometryMaxMinSquaredTolerance !== 0 &&\n       squaredTolerance < this.simplifiedGeometryMaxMinSquaredTolerance)) {\n    return this;\n  }\n  var key = squaredTolerance.toString();\n  if (this.simplifiedGeometryCache.hasOwnProperty(key)) {\n    return this.simplifiedGeometryCache[key];\n  } else {\n    var simplifiedGeometries = [];\n    var geometries = this.geometries_;\n    var simplified = false;\n    var i, ii;\n    for (i = 0, ii = geometries.length; i < ii; ++i) {\n      var geometry = geometries[i];\n      var simplifiedGeometry = geometry.getSimplifiedGeometry(squaredTolerance);\n      simplifiedGeometries.push(simplifiedGeometry);\n      if (simplifiedGeometry !== geometry) {\n        simplified = true;\n      }\n    }\n    if (simplified) {\n      var simplifiedGeometryCollection = new _ol_geom_GeometryCollection_(null);\n      simplifiedGeometryCollection.setGeometriesArray(simplifiedGeometries);\n      this.simplifiedGeometryCache[key] = simplifiedGeometryCollection;\n      return simplifiedGeometryCollection;\n    } else {\n      this.simplifiedGeometryMaxMinSquaredTolerance = squaredTolerance;\n      return this;\n    }\n  }\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\n_ol_geom_GeometryCollection_.prototype.getType = function() {\n  return _ol_geom_GeometryType_.GEOMETRY_COLLECTION;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\n_ol_geom_GeometryCollection_.prototype.intersectsExtent = function(extent) {\n  var geometries = this.geometries_;\n  var i, ii;\n  for (i = 0, ii = geometries.length; i < ii; ++i) {\n    if (geometries[i].intersectsExtent(extent)) {\n      return true;\n    }\n  }\n  return false;\n};\n\n\n/**\n * @return {boolean} Is empty.\n */\n_ol_geom_GeometryCollection_.prototype.isEmpty = function() {\n  return this.geometries_.length === 0;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\n_ol_geom_GeometryCollection_.prototype.rotate = function(angle, anchor) {\n  var geometries = this.geometries_;\n  for (var i = 0, ii = geometries.length; i < ii; ++i) {\n    geometries[i].rotate(angle, anchor);\n  }\n  this.changed();\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\n_ol_geom_GeometryCollection_.prototype.scale = function(sx, opt_sy, opt_anchor) {\n  var anchor = opt_anchor;\n  if (!anchor) {\n    anchor = _ol_extent_.getCenter(this.getExtent());\n  }\n  var geometries = this.geometries_;\n  for (var i = 0, ii = geometries.length; i < ii; ++i) {\n    geometries[i].scale(sx, opt_sy, anchor);\n  }\n  this.changed();\n};\n\n\n/**\n * Set the geometries that make up this geometry collection.\n * @param {Array.<ol.geom.Geometry>} geometries Geometries.\n * @api\n */\n_ol_geom_GeometryCollection_.prototype.setGeometries = function(geometries) {\n  this.setGeometriesArray(\n      _ol_geom_GeometryCollection_.cloneGeometries_(geometries));\n};\n\n\n/**\n * @param {Array.<ol.geom.Geometry>} geometries Geometries.\n */\n_ol_geom_GeometryCollection_.prototype.setGeometriesArray = function(geometries) {\n  this.unlistenGeometriesChange_();\n  this.geometries_ = geometries;\n  this.listenGeometriesChange_();\n  this.changed();\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\n_ol_geom_GeometryCollection_.prototype.applyTransform = function(transformFn) {\n  var geometries = this.geometries_;\n  var i, ii;\n  for (i = 0, ii = geometries.length; i < ii; ++i) {\n    geometries[i].applyTransform(transformFn);\n  }\n  this.changed();\n};\n\n\n/**\n * Translate the geometry.\n * @param {number} deltaX Delta X.\n * @param {number} deltaY Delta Y.\n * @override\n * @api\n */\n_ol_geom_GeometryCollection_.prototype.translate = function(deltaX, deltaY) {\n  var geometries = this.geometries_;\n  var i, ii;\n  for (i = 0, ii = geometries.length; i < ii; ++i) {\n    geometries[i].translate(deltaX, deltaY);\n  }\n  this.changed();\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_geom_GeometryCollection_.prototype.disposeInternal = function() {\n  this.unlistenGeometriesChange_();\n  _ol_geom_Geometry_.prototype.disposeInternal.call(this);\n};\nexport default _ol_geom_GeometryCollection_;\n","import _ol_array_ from '../../array.js';\nimport _ol_math_ from '../../math.js';\nvar _ol_geom_flat_interpolate_ = {};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} fraction Fraction.\n * @param {Array.<number>=} opt_dest Destination.\n * @return {Array.<number>} Destination.\n */\n_ol_geom_flat_interpolate_.lineString = function(flatCoordinates, offset, end, stride, fraction, opt_dest) {\n  var pointX = NaN;\n  var pointY = NaN;\n  var n = (end - offset) / stride;\n  if (n === 1) {\n    pointX = flatCoordinates[offset];\n    pointY = flatCoordinates[offset + 1];\n  } else if (n == 2) {\n    pointX = (1 - fraction) * flatCoordinates[offset] +\n        fraction * flatCoordinates[offset + stride];\n    pointY = (1 - fraction) * flatCoordinates[offset + 1] +\n        fraction * flatCoordinates[offset + stride + 1];\n  } else if (n !== 0) {\n    var x1 = flatCoordinates[offset];\n    var y1 = flatCoordinates[offset + 1];\n    var length = 0;\n    var cumulativeLengths = [0];\n    var i;\n    for (i = offset + stride; i < end; i += stride) {\n      var x2 = flatCoordinates[i];\n      var y2 = flatCoordinates[i + 1];\n      length += Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n      cumulativeLengths.push(length);\n      x1 = x2;\n      y1 = y2;\n    }\n    var target = fraction * length;\n    var index = _ol_array_.binarySearch(cumulativeLengths, target);\n    if (index < 0) {\n      var t = (target - cumulativeLengths[-index - 2]) /\n          (cumulativeLengths[-index - 1] - cumulativeLengths[-index - 2]);\n      var o = offset + (-index - 2) * stride;\n      pointX = _ol_math_.lerp(\n          flatCoordinates[o], flatCoordinates[o + stride], t);\n      pointY = _ol_math_.lerp(\n          flatCoordinates[o + 1], flatCoordinates[o + stride + 1], t);\n    } else {\n      pointX = flatCoordinates[offset + index * stride];\n      pointY = flatCoordinates[offset + index * stride + 1];\n    }\n  }\n  if (opt_dest) {\n    opt_dest[0] = pointX;\n    opt_dest[1] = pointY;\n    return opt_dest;\n  } else {\n    return [pointX, pointY];\n  }\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} m M.\n * @param {boolean} extrapolate Extrapolate.\n * @return {ol.Coordinate} Coordinate.\n */\n_ol_geom_flat_interpolate_.lineStringCoordinateAtM = function(flatCoordinates, offset, end, stride, m, extrapolate) {\n  if (end == offset) {\n    return null;\n  }\n  var coordinate;\n  if (m < flatCoordinates[offset + stride - 1]) {\n    if (extrapolate) {\n      coordinate = flatCoordinates.slice(offset, offset + stride);\n      coordinate[stride - 1] = m;\n      return coordinate;\n    } else {\n      return null;\n    }\n  } else if (flatCoordinates[end - 1] < m) {\n    if (extrapolate) {\n      coordinate = flatCoordinates.slice(end - stride, end);\n      coordinate[stride - 1] = m;\n      return coordinate;\n    } else {\n      return null;\n    }\n  }\n  // FIXME use O(1) search\n  if (m == flatCoordinates[offset + stride - 1]) {\n    return flatCoordinates.slice(offset, offset + stride);\n  }\n  var lo = offset / stride;\n  var hi = end / stride;\n  while (lo < hi) {\n    var mid = (lo + hi) >> 1;\n    if (m < flatCoordinates[(mid + 1) * stride - 1]) {\n      hi = mid;\n    } else {\n      lo = mid + 1;\n    }\n  }\n  var m0 = flatCoordinates[lo * stride - 1];\n  if (m == m0) {\n    return flatCoordinates.slice((lo - 1) * stride, (lo - 1) * stride + stride);\n  }\n  var m1 = flatCoordinates[(lo + 1) * stride - 1];\n  var t = (m - m0) / (m1 - m0);\n  coordinate = [];\n  var i;\n  for (i = 0; i < stride - 1; ++i) {\n    coordinate.push(_ol_math_.lerp(flatCoordinates[(lo - 1) * stride + i],\n        flatCoordinates[lo * stride + i], t));\n  }\n  coordinate.push(m);\n  return coordinate;\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} m M.\n * @param {boolean} extrapolate Extrapolate.\n * @param {boolean} interpolate Interpolate.\n * @return {ol.Coordinate} Coordinate.\n */\n_ol_geom_flat_interpolate_.lineStringsCoordinateAtM = function(\n    flatCoordinates, offset, ends, stride, m, extrapolate, interpolate) {\n  if (interpolate) {\n    return _ol_geom_flat_interpolate_.lineStringCoordinateAtM(\n        flatCoordinates, offset, ends[ends.length - 1], stride, m, extrapolate);\n  }\n  var coordinate;\n  if (m < flatCoordinates[stride - 1]) {\n    if (extrapolate) {\n      coordinate = flatCoordinates.slice(0, stride);\n      coordinate[stride - 1] = m;\n      return coordinate;\n    } else {\n      return null;\n    }\n  }\n  if (flatCoordinates[flatCoordinates.length - 1] < m) {\n    if (extrapolate) {\n      coordinate = flatCoordinates.slice(flatCoordinates.length - stride);\n      coordinate[stride - 1] = m;\n      return coordinate;\n    } else {\n      return null;\n    }\n  }\n  var i, ii;\n  for (i = 0, ii = ends.length; i < ii; ++i) {\n    var end = ends[i];\n    if (offset == end) {\n      continue;\n    }\n    if (m < flatCoordinates[offset + stride - 1]) {\n      return null;\n    } else if (m <= flatCoordinates[end - 1]) {\n      return _ol_geom_flat_interpolate_.lineStringCoordinateAtM(\n          flatCoordinates, offset, end, stride, m, false);\n    }\n    offset = end;\n  }\n  return null;\n};\nexport default _ol_geom_flat_interpolate_;\n","import _ol_ from '../index.js';\nimport _ol_array_ from '../array.js';\nimport _ol_extent_ from '../extent.js';\nimport _ol_geom_GeometryLayout_ from '../geom/geometrylayout.js';\nimport _ol_geom_GeometryType_ from '../geom/geometrytype.js';\nimport _ol_geom_SimpleGeometry_ from '../geom/simplegeometry.js';\nimport _ol_geom_flat_closest_ from '../geom/flat/closest.js';\nimport _ol_geom_flat_deflate_ from '../geom/flat/deflate.js';\nimport _ol_geom_flat_inflate_ from '../geom/flat/inflate.js';\nimport _ol_geom_flat_interpolate_ from '../geom/flat/interpolate.js';\nimport _ol_geom_flat_intersectsextent_ from '../geom/flat/intersectsextent.js';\nimport _ol_geom_flat_length_ from '../geom/flat/length.js';\nimport _ol_geom_flat_segments_ from '../geom/flat/segments.js';\nimport _ol_geom_flat_simplify_ from '../geom/flat/simplify.js';\n\n/**\n * @classdesc\n * Linestring geometry.\n *\n * @constructor\n * @extends {ol.geom.SimpleGeometry}\n * @param {Array.<ol.Coordinate>} coordinates Coordinates.\n * @param {ol.geom.GeometryLayout=} opt_layout Layout.\n * @api\n */\nvar _ol_geom_LineString_ = function(coordinates, opt_layout) {\n\n  _ol_geom_SimpleGeometry_.call(this);\n\n  /**\n   * @private\n   * @type {ol.Coordinate}\n   */\n  this.flatMidpoint_ = null;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.flatMidpointRevision_ = -1;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.maxDelta_ = -1;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.maxDeltaRevision_ = -1;\n\n  this.setCoordinates(coordinates, opt_layout);\n\n};\n\n_ol_.inherits(_ol_geom_LineString_, _ol_geom_SimpleGeometry_);\n\n\n/**\n * Append the passed coordinate to the coordinates of the linestring.\n * @param {ol.Coordinate} coordinate Coordinate.\n * @api\n */\n_ol_geom_LineString_.prototype.appendCoordinate = function(coordinate) {\n  if (!this.flatCoordinates) {\n    this.flatCoordinates = coordinate.slice();\n  } else {\n    _ol_array_.extend(this.flatCoordinates, coordinate);\n  }\n  this.changed();\n};\n\n\n/**\n * Make a complete copy of the geometry.\n * @return {!ol.geom.LineString} Clone.\n * @override\n * @api\n */\n_ol_geom_LineString_.prototype.clone = function() {\n  var lineString = new _ol_geom_LineString_(null);\n  lineString.setFlatCoordinates(this.layout, this.flatCoordinates.slice());\n  return lineString;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_geom_LineString_.prototype.closestPointXY = function(x, y, closestPoint, minSquaredDistance) {\n  if (minSquaredDistance <\n      _ol_extent_.closestSquaredDistanceXY(this.getExtent(), x, y)) {\n    return minSquaredDistance;\n  }\n  if (this.maxDeltaRevision_ != this.getRevision()) {\n    this.maxDelta_ = Math.sqrt(_ol_geom_flat_closest_.getMaxSquaredDelta(\n        this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, 0));\n    this.maxDeltaRevision_ = this.getRevision();\n  }\n  return _ol_geom_flat_closest_.getClosestPoint(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride,\n      this.maxDelta_, false, x, y, closestPoint, minSquaredDistance);\n};\n\n\n/**\n * Iterate over each segment, calling the provided callback.\n * If the callback returns a truthy value the function returns that\n * value immediately. Otherwise the function returns `false`.\n *\n * @param {function(this: S, ol.Coordinate, ol.Coordinate): T} callback Function\n *     called for each segment.\n * @param {S=} opt_this The object to be used as the value of 'this'\n *     within callback.\n * @return {T|boolean} Value.\n * @template T,S\n * @api\n */\n_ol_geom_LineString_.prototype.forEachSegment = function(callback, opt_this) {\n  return _ol_geom_flat_segments_.forEach(this.flatCoordinates, 0,\n      this.flatCoordinates.length, this.stride, callback, opt_this);\n};\n\n\n/**\n * Returns the coordinate at `m` using linear interpolation, or `null` if no\n * such coordinate exists.\n *\n * `opt_extrapolate` controls extrapolation beyond the range of Ms in the\n * MultiLineString. If `opt_extrapolate` is `true` then Ms less than the first\n * M will return the first coordinate and Ms greater than the last M will\n * return the last coordinate.\n *\n * @param {number} m M.\n * @param {boolean=} opt_extrapolate Extrapolate. Default is `false`.\n * @return {ol.Coordinate} Coordinate.\n * @api\n */\n_ol_geom_LineString_.prototype.getCoordinateAtM = function(m, opt_extrapolate) {\n  if (this.layout != _ol_geom_GeometryLayout_.XYM &&\n      this.layout != _ol_geom_GeometryLayout_.XYZM) {\n    return null;\n  }\n  var extrapolate = opt_extrapolate !== undefined ? opt_extrapolate : false;\n  return _ol_geom_flat_interpolate_.lineStringCoordinateAtM(this.flatCoordinates, 0,\n      this.flatCoordinates.length, this.stride, m, extrapolate);\n};\n\n\n/**\n * Return the coordinates of the linestring.\n * @return {Array.<ol.Coordinate>} Coordinates.\n * @override\n * @api\n */\n_ol_geom_LineString_.prototype.getCoordinates = function() {\n  return _ol_geom_flat_inflate_.coordinates(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n};\n\n\n/**\n * Return the coordinate at the provided fraction along the linestring.\n * The `fraction` is a number between 0 and 1, where 0 is the start of the\n * linestring and 1 is the end.\n * @param {number} fraction Fraction.\n * @param {ol.Coordinate=} opt_dest Optional coordinate whose values will\n *     be modified. If not provided, a new coordinate will be returned.\n * @return {ol.Coordinate} Coordinate of the interpolated point.\n * @api\n */\n_ol_geom_LineString_.prototype.getCoordinateAt = function(fraction, opt_dest) {\n  return _ol_geom_flat_interpolate_.lineString(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride,\n      fraction, opt_dest);\n};\n\n\n/**\n * Return the length of the linestring on projected plane.\n * @return {number} Length (on projected plane).\n * @api\n */\n_ol_geom_LineString_.prototype.getLength = function() {\n  return _ol_geom_flat_length_.lineString(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n};\n\n\n/**\n * @return {Array.<number>} Flat midpoint.\n */\n_ol_geom_LineString_.prototype.getFlatMidpoint = function() {\n  if (this.flatMidpointRevision_ != this.getRevision()) {\n    this.flatMidpoint_ = this.getCoordinateAt(0.5, this.flatMidpoint_);\n    this.flatMidpointRevision_ = this.getRevision();\n  }\n  return this.flatMidpoint_;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_geom_LineString_.prototype.getSimplifiedGeometryInternal = function(squaredTolerance) {\n  var simplifiedFlatCoordinates = [];\n  simplifiedFlatCoordinates.length = _ol_geom_flat_simplify_.douglasPeucker(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride,\n      squaredTolerance, simplifiedFlatCoordinates, 0);\n  var simplifiedLineString = new _ol_geom_LineString_(null);\n  simplifiedLineString.setFlatCoordinates(\n      _ol_geom_GeometryLayout_.XY, simplifiedFlatCoordinates);\n  return simplifiedLineString;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\n_ol_geom_LineString_.prototype.getType = function() {\n  return _ol_geom_GeometryType_.LINE_STRING;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\n_ol_geom_LineString_.prototype.intersectsExtent = function(extent) {\n  return _ol_geom_flat_intersectsextent_.lineString(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride,\n      extent);\n};\n\n\n/**\n * Set the coordinates of the linestring.\n * @param {Array.<ol.Coordinate>} coordinates Coordinates.\n * @param {ol.geom.GeometryLayout=} opt_layout Layout.\n * @override\n * @api\n */\n_ol_geom_LineString_.prototype.setCoordinates = function(coordinates, opt_layout) {\n  if (!coordinates) {\n    this.setFlatCoordinates(_ol_geom_GeometryLayout_.XY, null);\n  } else {\n    this.setLayout(opt_layout, coordinates, 1);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    this.flatCoordinates.length = _ol_geom_flat_deflate_.coordinates(\n        this.flatCoordinates, 0, coordinates, this.stride);\n    this.changed();\n  }\n};\n\n\n/**\n * @param {ol.geom.GeometryLayout} layout Layout.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n */\n_ol_geom_LineString_.prototype.setFlatCoordinates = function(layout, flatCoordinates) {\n  this.setFlatCoordinatesInternal(layout, flatCoordinates);\n  this.changed();\n};\nexport default _ol_geom_LineString_;\n","import _ol_ from '../index.js';\nimport _ol_array_ from '../array.js';\nimport _ol_extent_ from '../extent.js';\nimport _ol_geom_GeometryLayout_ from '../geom/geometrylayout.js';\nimport _ol_geom_GeometryType_ from '../geom/geometrytype.js';\nimport _ol_geom_LineString_ from '../geom/linestring.js';\nimport _ol_geom_SimpleGeometry_ from '../geom/simplegeometry.js';\nimport _ol_geom_flat_closest_ from '../geom/flat/closest.js';\nimport _ol_geom_flat_deflate_ from '../geom/flat/deflate.js';\nimport _ol_geom_flat_inflate_ from '../geom/flat/inflate.js';\nimport _ol_geom_flat_interpolate_ from '../geom/flat/interpolate.js';\nimport _ol_geom_flat_intersectsextent_ from '../geom/flat/intersectsextent.js';\nimport _ol_geom_flat_simplify_ from '../geom/flat/simplify.js';\n\n/**\n * @classdesc\n * Multi-linestring geometry.\n *\n * @constructor\n * @extends {ol.geom.SimpleGeometry}\n * @param {Array.<Array.<ol.Coordinate>>} coordinates Coordinates.\n * @param {ol.geom.GeometryLayout=} opt_layout Layout.\n * @api\n */\nvar _ol_geom_MultiLineString_ = function(coordinates, opt_layout) {\n\n  _ol_geom_SimpleGeometry_.call(this);\n\n  /**\n   * @type {Array.<number>}\n   * @private\n   */\n  this.ends_ = [];\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.maxDelta_ = -1;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.maxDeltaRevision_ = -1;\n\n  this.setCoordinates(coordinates, opt_layout);\n\n};\n\n_ol_.inherits(_ol_geom_MultiLineString_, _ol_geom_SimpleGeometry_);\n\n\n/**\n * Append the passed linestring to the multilinestring.\n * @param {ol.geom.LineString} lineString LineString.\n * @api\n */\n_ol_geom_MultiLineString_.prototype.appendLineString = function(lineString) {\n  if (!this.flatCoordinates) {\n    this.flatCoordinates = lineString.getFlatCoordinates().slice();\n  } else {\n    _ol_array_.extend(\n        this.flatCoordinates, lineString.getFlatCoordinates().slice());\n  }\n  this.ends_.push(this.flatCoordinates.length);\n  this.changed();\n};\n\n\n/**\n * Make a complete copy of the geometry.\n * @return {!ol.geom.MultiLineString} Clone.\n * @override\n * @api\n */\n_ol_geom_MultiLineString_.prototype.clone = function() {\n  var multiLineString = new _ol_geom_MultiLineString_(null);\n  multiLineString.setFlatCoordinates(\n      this.layout, this.flatCoordinates.slice(), this.ends_.slice());\n  return multiLineString;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_geom_MultiLineString_.prototype.closestPointXY = function(x, y, closestPoint, minSquaredDistance) {\n  if (minSquaredDistance <\n      _ol_extent_.closestSquaredDistanceXY(this.getExtent(), x, y)) {\n    return minSquaredDistance;\n  }\n  if (this.maxDeltaRevision_ != this.getRevision()) {\n    this.maxDelta_ = Math.sqrt(_ol_geom_flat_closest_.getsMaxSquaredDelta(\n        this.flatCoordinates, 0, this.ends_, this.stride, 0));\n    this.maxDeltaRevision_ = this.getRevision();\n  }\n  return _ol_geom_flat_closest_.getsClosestPoint(\n      this.flatCoordinates, 0, this.ends_, this.stride,\n      this.maxDelta_, false, x, y, closestPoint, minSquaredDistance);\n};\n\n\n/**\n * Returns the coordinate at `m` using linear interpolation, or `null` if no\n * such coordinate exists.\n *\n * `opt_extrapolate` controls extrapolation beyond the range of Ms in the\n * MultiLineString. If `opt_extrapolate` is `true` then Ms less than the first\n * M will return the first coordinate and Ms greater than the last M will\n * return the last coordinate.\n *\n * `opt_interpolate` controls interpolation between consecutive LineStrings\n * within the MultiLineString. If `opt_interpolate` is `true` the coordinates\n * will be linearly interpolated between the last coordinate of one LineString\n * and the first coordinate of the next LineString.  If `opt_interpolate` is\n * `false` then the function will return `null` for Ms falling between\n * LineStrings.\n *\n * @param {number} m M.\n * @param {boolean=} opt_extrapolate Extrapolate. Default is `false`.\n * @param {boolean=} opt_interpolate Interpolate. Default is `false`.\n * @return {ol.Coordinate} Coordinate.\n * @api\n */\n_ol_geom_MultiLineString_.prototype.getCoordinateAtM = function(m, opt_extrapolate, opt_interpolate) {\n  if ((this.layout != _ol_geom_GeometryLayout_.XYM &&\n       this.layout != _ol_geom_GeometryLayout_.XYZM) ||\n      this.flatCoordinates.length === 0) {\n    return null;\n  }\n  var extrapolate = opt_extrapolate !== undefined ? opt_extrapolate : false;\n  var interpolate = opt_interpolate !== undefined ? opt_interpolate : false;\n  return _ol_geom_flat_interpolate_.lineStringsCoordinateAtM(this.flatCoordinates, 0,\n      this.ends_, this.stride, m, extrapolate, interpolate);\n};\n\n\n/**\n * Return the coordinates of the multilinestring.\n * @return {Array.<Array.<ol.Coordinate>>} Coordinates.\n * @override\n * @api\n */\n_ol_geom_MultiLineString_.prototype.getCoordinates = function() {\n  return _ol_geom_flat_inflate_.coordinatess(\n      this.flatCoordinates, 0, this.ends_, this.stride);\n};\n\n\n/**\n * @return {Array.<number>} Ends.\n */\n_ol_geom_MultiLineString_.prototype.getEnds = function() {\n  return this.ends_;\n};\n\n\n/**\n * Return the linestring at the specified index.\n * @param {number} index Index.\n * @return {ol.geom.LineString} LineString.\n * @api\n */\n_ol_geom_MultiLineString_.prototype.getLineString = function(index) {\n  if (index < 0 || this.ends_.length <= index) {\n    return null;\n  }\n  var lineString = new _ol_geom_LineString_(null);\n  lineString.setFlatCoordinates(this.layout, this.flatCoordinates.slice(\n      index === 0 ? 0 : this.ends_[index - 1], this.ends_[index]));\n  return lineString;\n};\n\n\n/**\n * Return the linestrings of this multilinestring.\n * @return {Array.<ol.geom.LineString>} LineStrings.\n * @api\n */\n_ol_geom_MultiLineString_.prototype.getLineStrings = function() {\n  var flatCoordinates = this.flatCoordinates;\n  var ends = this.ends_;\n  var layout = this.layout;\n  /** @type {Array.<ol.geom.LineString>} */\n  var lineStrings = [];\n  var offset = 0;\n  var i, ii;\n  for (i = 0, ii = ends.length; i < ii; ++i) {\n    var end = ends[i];\n    var lineString = new _ol_geom_LineString_(null);\n    lineString.setFlatCoordinates(layout, flatCoordinates.slice(offset, end));\n    lineStrings.push(lineString);\n    offset = end;\n  }\n  return lineStrings;\n};\n\n\n/**\n * @return {Array.<number>} Flat midpoints.\n */\n_ol_geom_MultiLineString_.prototype.getFlatMidpoints = function() {\n  var midpoints = [];\n  var flatCoordinates = this.flatCoordinates;\n  var offset = 0;\n  var ends = this.ends_;\n  var stride = this.stride;\n  var i, ii;\n  for (i = 0, ii = ends.length; i < ii; ++i) {\n    var end = ends[i];\n    var midpoint = _ol_geom_flat_interpolate_.lineString(\n        flatCoordinates, offset, end, stride, 0.5);\n    _ol_array_.extend(midpoints, midpoint);\n    offset = end;\n  }\n  return midpoints;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_geom_MultiLineString_.prototype.getSimplifiedGeometryInternal = function(squaredTolerance) {\n  var simplifiedFlatCoordinates = [];\n  var simplifiedEnds = [];\n  simplifiedFlatCoordinates.length = _ol_geom_flat_simplify_.douglasPeuckers(\n      this.flatCoordinates, 0, this.ends_, this.stride, squaredTolerance,\n      simplifiedFlatCoordinates, 0, simplifiedEnds);\n  var simplifiedMultiLineString = new _ol_geom_MultiLineString_(null);\n  simplifiedMultiLineString.setFlatCoordinates(\n      _ol_geom_GeometryLayout_.XY, simplifiedFlatCoordinates, simplifiedEnds);\n  return simplifiedMultiLineString;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\n_ol_geom_MultiLineString_.prototype.getType = function() {\n  return _ol_geom_GeometryType_.MULTI_LINE_STRING;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\n_ol_geom_MultiLineString_.prototype.intersectsExtent = function(extent) {\n  return _ol_geom_flat_intersectsextent_.lineStrings(\n      this.flatCoordinates, 0, this.ends_, this.stride, extent);\n};\n\n\n/**\n * Set the coordinates of the multilinestring.\n * @param {Array.<Array.<ol.Coordinate>>} coordinates Coordinates.\n * @param {ol.geom.GeometryLayout=} opt_layout Layout.\n * @override\n * @api\n */\n_ol_geom_MultiLineString_.prototype.setCoordinates = function(coordinates, opt_layout) {\n  if (!coordinates) {\n    this.setFlatCoordinates(_ol_geom_GeometryLayout_.XY, null, this.ends_);\n  } else {\n    this.setLayout(opt_layout, coordinates, 2);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    var ends = _ol_geom_flat_deflate_.coordinatess(\n        this.flatCoordinates, 0, coordinates, this.stride, this.ends_);\n    this.flatCoordinates.length = ends.length === 0 ? 0 : ends[ends.length - 1];\n    this.changed();\n  }\n};\n\n\n/**\n * @param {ol.geom.GeometryLayout} layout Layout.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {Array.<number>} ends Ends.\n */\n_ol_geom_MultiLineString_.prototype.setFlatCoordinates = function(layout, flatCoordinates, ends) {\n  this.setFlatCoordinatesInternal(layout, flatCoordinates);\n  this.ends_ = ends;\n  this.changed();\n};\n\n\n/**\n * @param {Array.<ol.geom.LineString>} lineStrings LineStrings.\n */\n_ol_geom_MultiLineString_.prototype.setLineStrings = function(lineStrings) {\n  var layout = this.getLayout();\n  var flatCoordinates = [];\n  var ends = [];\n  var i, ii;\n  for (i = 0, ii = lineStrings.length; i < ii; ++i) {\n    var lineString = lineStrings[i];\n    if (i === 0) {\n      layout = lineString.getLayout();\n    }\n    _ol_array_.extend(flatCoordinates, lineString.getFlatCoordinates());\n    ends.push(flatCoordinates.length);\n  }\n  this.setFlatCoordinates(layout, flatCoordinates, ends);\n};\nexport default _ol_geom_MultiLineString_;\n","import _ol_ from '../index.js';\nimport _ol_array_ from '../array.js';\nimport _ol_extent_ from '../extent.js';\nimport _ol_geom_GeometryLayout_ from '../geom/geometrylayout.js';\nimport _ol_geom_GeometryType_ from '../geom/geometrytype.js';\nimport _ol_geom_Point_ from '../geom/point.js';\nimport _ol_geom_SimpleGeometry_ from '../geom/simplegeometry.js';\nimport _ol_geom_flat_deflate_ from '../geom/flat/deflate.js';\nimport _ol_geom_flat_inflate_ from '../geom/flat/inflate.js';\nimport _ol_math_ from '../math.js';\n\n/**\n * @classdesc\n * Multi-point geometry.\n *\n * @constructor\n * @extends {ol.geom.SimpleGeometry}\n * @param {Array.<ol.Coordinate>} coordinates Coordinates.\n * @param {ol.geom.GeometryLayout=} opt_layout Layout.\n * @api\n */\nvar _ol_geom_MultiPoint_ = function(coordinates, opt_layout) {\n  _ol_geom_SimpleGeometry_.call(this);\n  this.setCoordinates(coordinates, opt_layout);\n};\n\n_ol_.inherits(_ol_geom_MultiPoint_, _ol_geom_SimpleGeometry_);\n\n\n/**\n * Append the passed point to this multipoint.\n * @param {ol.geom.Point} point Point.\n * @api\n */\n_ol_geom_MultiPoint_.prototype.appendPoint = function(point) {\n  if (!this.flatCoordinates) {\n    this.flatCoordinates = point.getFlatCoordinates().slice();\n  } else {\n    _ol_array_.extend(this.flatCoordinates, point.getFlatCoordinates());\n  }\n  this.changed();\n};\n\n\n/**\n * Make a complete copy of the geometry.\n * @return {!ol.geom.MultiPoint} Clone.\n * @override\n * @api\n */\n_ol_geom_MultiPoint_.prototype.clone = function() {\n  var multiPoint = new _ol_geom_MultiPoint_(null);\n  multiPoint.setFlatCoordinates(this.layout, this.flatCoordinates.slice());\n  return multiPoint;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_geom_MultiPoint_.prototype.closestPointXY = function(x, y, closestPoint, minSquaredDistance) {\n  if (minSquaredDistance <\n      _ol_extent_.closestSquaredDistanceXY(this.getExtent(), x, y)) {\n    return minSquaredDistance;\n  }\n  var flatCoordinates = this.flatCoordinates;\n  var stride = this.stride;\n  var i, ii, j;\n  for (i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n    var squaredDistance = _ol_math_.squaredDistance(\n        x, y, flatCoordinates[i], flatCoordinates[i + 1]);\n    if (squaredDistance < minSquaredDistance) {\n      minSquaredDistance = squaredDistance;\n      for (j = 0; j < stride; ++j) {\n        closestPoint[j] = flatCoordinates[i + j];\n      }\n      closestPoint.length = stride;\n    }\n  }\n  return minSquaredDistance;\n};\n\n\n/**\n * Return the coordinates of the multipoint.\n * @return {Array.<ol.Coordinate>} Coordinates.\n * @override\n * @api\n */\n_ol_geom_MultiPoint_.prototype.getCoordinates = function() {\n  return _ol_geom_flat_inflate_.coordinates(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n};\n\n\n/**\n * Return the point at the specified index.\n * @param {number} index Index.\n * @return {ol.geom.Point} Point.\n * @api\n */\n_ol_geom_MultiPoint_.prototype.getPoint = function(index) {\n  var n = !this.flatCoordinates ?\n    0 : this.flatCoordinates.length / this.stride;\n  if (index < 0 || n <= index) {\n    return null;\n  }\n  var point = new _ol_geom_Point_(null);\n  point.setFlatCoordinates(this.layout, this.flatCoordinates.slice(\n      index * this.stride, (index + 1) * this.stride));\n  return point;\n};\n\n\n/**\n * Return the points of this multipoint.\n * @return {Array.<ol.geom.Point>} Points.\n * @api\n */\n_ol_geom_MultiPoint_.prototype.getPoints = function() {\n  var flatCoordinates = this.flatCoordinates;\n  var layout = this.layout;\n  var stride = this.stride;\n  /** @type {Array.<ol.geom.Point>} */\n  var points = [];\n  var i, ii;\n  for (i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n    var point = new _ol_geom_Point_(null);\n    point.setFlatCoordinates(layout, flatCoordinates.slice(i, i + stride));\n    points.push(point);\n  }\n  return points;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\n_ol_geom_MultiPoint_.prototype.getType = function() {\n  return _ol_geom_GeometryType_.MULTI_POINT;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\n_ol_geom_MultiPoint_.prototype.intersectsExtent = function(extent) {\n  var flatCoordinates = this.flatCoordinates;\n  var stride = this.stride;\n  var i, ii, x, y;\n  for (i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n    x = flatCoordinates[i];\n    y = flatCoordinates[i + 1];\n    if (_ol_extent_.containsXY(extent, x, y)) {\n      return true;\n    }\n  }\n  return false;\n};\n\n\n/**\n * Set the coordinates of the multipoint.\n * @param {Array.<ol.Coordinate>} coordinates Coordinates.\n * @param {ol.geom.GeometryLayout=} opt_layout Layout.\n * @override\n * @api\n */\n_ol_geom_MultiPoint_.prototype.setCoordinates = function(coordinates, opt_layout) {\n  if (!coordinates) {\n    this.setFlatCoordinates(_ol_geom_GeometryLayout_.XY, null);\n  } else {\n    this.setLayout(opt_layout, coordinates, 1);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    this.flatCoordinates.length = _ol_geom_flat_deflate_.coordinates(\n        this.flatCoordinates, 0, coordinates, this.stride);\n    this.changed();\n  }\n};\n\n\n/**\n * @param {ol.geom.GeometryLayout} layout Layout.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n */\n_ol_geom_MultiPoint_.prototype.setFlatCoordinates = function(layout, flatCoordinates) {\n  this.setFlatCoordinatesInternal(layout, flatCoordinates);\n  this.changed();\n};\nexport default _ol_geom_MultiPoint_;\n","import _ol_extent_ from '../../extent.js';\nvar _ol_geom_flat_center_ = {};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<Array.<number>>} endss Endss.\n * @param {number} stride Stride.\n * @return {Array.<number>} Flat centers.\n */\n_ol_geom_flat_center_.linearRingss = function(flatCoordinates, offset, endss, stride) {\n  var flatCenters = [];\n  var i, ii;\n  var extent = _ol_extent_.createEmpty();\n  for (i = 0, ii = endss.length; i < ii; ++i) {\n    var ends = endss[i];\n    extent = _ol_extent_.createOrUpdateFromFlatCoordinates(\n        flatCoordinates, offset, ends[0], stride);\n    flatCenters.push((extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2);\n    offset = ends[ends.length - 1];\n  }\n  return flatCenters;\n};\nexport default _ol_geom_flat_center_;\n","import _ol_ from '../index.js';\nimport _ol_array_ from '../array.js';\nimport _ol_extent_ from '../extent.js';\nimport _ol_geom_GeometryLayout_ from '../geom/geometrylayout.js';\nimport _ol_geom_GeometryType_ from '../geom/geometrytype.js';\nimport _ol_geom_MultiPoint_ from '../geom/multipoint.js';\nimport _ol_geom_Polygon_ from '../geom/polygon.js';\nimport _ol_geom_SimpleGeometry_ from '../geom/simplegeometry.js';\nimport _ol_geom_flat_area_ from '../geom/flat/area.js';\nimport _ol_geom_flat_center_ from '../geom/flat/center.js';\nimport _ol_geom_flat_closest_ from '../geom/flat/closest.js';\nimport _ol_geom_flat_contains_ from '../geom/flat/contains.js';\nimport _ol_geom_flat_deflate_ from '../geom/flat/deflate.js';\nimport _ol_geom_flat_inflate_ from '../geom/flat/inflate.js';\nimport _ol_geom_flat_interiorpoint_ from '../geom/flat/interiorpoint.js';\nimport _ol_geom_flat_intersectsextent_ from '../geom/flat/intersectsextent.js';\nimport _ol_geom_flat_orient_ from '../geom/flat/orient.js';\nimport _ol_geom_flat_simplify_ from '../geom/flat/simplify.js';\n\n/**\n * @classdesc\n * Multi-polygon geometry.\n *\n * @constructor\n * @extends {ol.geom.SimpleGeometry}\n * @param {Array.<Array.<Array.<ol.Coordinate>>>} coordinates Coordinates.\n * @param {ol.geom.GeometryLayout=} opt_layout Layout.\n * @api\n */\nvar _ol_geom_MultiPolygon_ = function(coordinates, opt_layout) {\n\n  _ol_geom_SimpleGeometry_.call(this);\n\n  /**\n   * @type {Array.<Array.<number>>}\n   * @private\n   */\n  this.endss_ = [];\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.flatInteriorPointsRevision_ = -1;\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.flatInteriorPoints_ = null;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.maxDelta_ = -1;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.maxDeltaRevision_ = -1;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.orientedRevision_ = -1;\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.orientedFlatCoordinates_ = null;\n\n  this.setCoordinates(coordinates, opt_layout);\n\n};\n\n_ol_.inherits(_ol_geom_MultiPolygon_, _ol_geom_SimpleGeometry_);\n\n\n/**\n * Append the passed polygon to this multipolygon.\n * @param {ol.geom.Polygon} polygon Polygon.\n * @api\n */\n_ol_geom_MultiPolygon_.prototype.appendPolygon = function(polygon) {\n  /** @type {Array.<number>} */\n  var ends;\n  if (!this.flatCoordinates) {\n    this.flatCoordinates = polygon.getFlatCoordinates().slice();\n    ends = polygon.getEnds().slice();\n    this.endss_.push();\n  } else {\n    var offset = this.flatCoordinates.length;\n    _ol_array_.extend(this.flatCoordinates, polygon.getFlatCoordinates());\n    ends = polygon.getEnds().slice();\n    var i, ii;\n    for (i = 0, ii = ends.length; i < ii; ++i) {\n      ends[i] += offset;\n    }\n  }\n  this.endss_.push(ends);\n  this.changed();\n};\n\n\n/**\n * Make a complete copy of the geometry.\n * @return {!ol.geom.MultiPolygon} Clone.\n * @override\n * @api\n */\n_ol_geom_MultiPolygon_.prototype.clone = function() {\n  var multiPolygon = new _ol_geom_MultiPolygon_(null);\n\n  var len = this.endss_.length;\n  var newEndss = new Array(len);\n  for (var i = 0; i < len; ++i) {\n    newEndss[i] = this.endss_[i].slice();\n  }\n\n  multiPolygon.setFlatCoordinates(\n      this.layout, this.flatCoordinates.slice(), newEndss);\n  return multiPolygon;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_geom_MultiPolygon_.prototype.closestPointXY = function(x, y, closestPoint, minSquaredDistance) {\n  if (minSquaredDistance <\n      _ol_extent_.closestSquaredDistanceXY(this.getExtent(), x, y)) {\n    return minSquaredDistance;\n  }\n  if (this.maxDeltaRevision_ != this.getRevision()) {\n    this.maxDelta_ = Math.sqrt(_ol_geom_flat_closest_.getssMaxSquaredDelta(\n        this.flatCoordinates, 0, this.endss_, this.stride, 0));\n    this.maxDeltaRevision_ = this.getRevision();\n  }\n  return _ol_geom_flat_closest_.getssClosestPoint(\n      this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride,\n      this.maxDelta_, true, x, y, closestPoint, minSquaredDistance);\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_geom_MultiPolygon_.prototype.containsXY = function(x, y) {\n  return _ol_geom_flat_contains_.linearRingssContainsXY(\n      this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride, x, y);\n};\n\n\n/**\n * Return the area of the multipolygon on projected plane.\n * @return {number} Area (on projected plane).\n * @api\n */\n_ol_geom_MultiPolygon_.prototype.getArea = function() {\n  return _ol_geom_flat_area_.linearRingss(\n      this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride);\n};\n\n\n/**\n * Get the coordinate array for this geometry.  This array has the structure\n * of a GeoJSON coordinate array for multi-polygons.\n *\n * @param {boolean=} opt_right Orient coordinates according to the right-hand\n *     rule (counter-clockwise for exterior and clockwise for interior rings).\n *     If `false`, coordinates will be oriented according to the left-hand rule\n *     (clockwise for exterior and counter-clockwise for interior rings).\n *     By default, coordinate orientation will depend on how the geometry was\n *     constructed.\n * @return {Array.<Array.<Array.<ol.Coordinate>>>} Coordinates.\n * @override\n * @api\n */\n_ol_geom_MultiPolygon_.prototype.getCoordinates = function(opt_right) {\n  var flatCoordinates;\n  if (opt_right !== undefined) {\n    flatCoordinates = this.getOrientedFlatCoordinates().slice();\n    _ol_geom_flat_orient_.orientLinearRingss(\n        flatCoordinates, 0, this.endss_, this.stride, opt_right);\n  } else {\n    flatCoordinates = this.flatCoordinates;\n  }\n\n  return _ol_geom_flat_inflate_.coordinatesss(\n      flatCoordinates, 0, this.endss_, this.stride);\n};\n\n\n/**\n * @return {Array.<Array.<number>>} Endss.\n */\n_ol_geom_MultiPolygon_.prototype.getEndss = function() {\n  return this.endss_;\n};\n\n\n/**\n * @return {Array.<number>} Flat interior points.\n */\n_ol_geom_MultiPolygon_.prototype.getFlatInteriorPoints = function() {\n  if (this.flatInteriorPointsRevision_ != this.getRevision()) {\n    var flatCenters = _ol_geom_flat_center_.linearRingss(\n        this.flatCoordinates, 0, this.endss_, this.stride);\n    this.flatInteriorPoints_ = _ol_geom_flat_interiorpoint_.linearRingss(\n        this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride,\n        flatCenters);\n    this.flatInteriorPointsRevision_ = this.getRevision();\n  }\n  return this.flatInteriorPoints_;\n};\n\n\n/**\n * Return the interior points as {@link ol.geom.MultiPoint multipoint}.\n * @return {ol.geom.MultiPoint} Interior points as XYM coordinates, where M is\n * the length of the horizontal intersection that the point belongs to.\n * @api\n */\n_ol_geom_MultiPolygon_.prototype.getInteriorPoints = function() {\n  var interiorPoints = new _ol_geom_MultiPoint_(null);\n  interiorPoints.setFlatCoordinates(_ol_geom_GeometryLayout_.XYM,\n      this.getFlatInteriorPoints().slice());\n  return interiorPoints;\n};\n\n\n/**\n * @return {Array.<number>} Oriented flat coordinates.\n */\n_ol_geom_MultiPolygon_.prototype.getOrientedFlatCoordinates = function() {\n  if (this.orientedRevision_ != this.getRevision()) {\n    var flatCoordinates = this.flatCoordinates;\n    if (_ol_geom_flat_orient_.linearRingssAreOriented(\n        flatCoordinates, 0, this.endss_, this.stride)) {\n      this.orientedFlatCoordinates_ = flatCoordinates;\n    } else {\n      this.orientedFlatCoordinates_ = flatCoordinates.slice();\n      this.orientedFlatCoordinates_.length =\n          _ol_geom_flat_orient_.orientLinearRingss(\n              this.orientedFlatCoordinates_, 0, this.endss_, this.stride);\n    }\n    this.orientedRevision_ = this.getRevision();\n  }\n  return this.orientedFlatCoordinates_;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_geom_MultiPolygon_.prototype.getSimplifiedGeometryInternal = function(squaredTolerance) {\n  var simplifiedFlatCoordinates = [];\n  var simplifiedEndss = [];\n  simplifiedFlatCoordinates.length = _ol_geom_flat_simplify_.quantizess(\n      this.flatCoordinates, 0, this.endss_, this.stride,\n      Math.sqrt(squaredTolerance),\n      simplifiedFlatCoordinates, 0, simplifiedEndss);\n  var simplifiedMultiPolygon = new _ol_geom_MultiPolygon_(null);\n  simplifiedMultiPolygon.setFlatCoordinates(\n      _ol_geom_GeometryLayout_.XY, simplifiedFlatCoordinates, simplifiedEndss);\n  return simplifiedMultiPolygon;\n};\n\n\n/**\n * Return the polygon at the specified index.\n * @param {number} index Index.\n * @return {ol.geom.Polygon} Polygon.\n * @api\n */\n_ol_geom_MultiPolygon_.prototype.getPolygon = function(index) {\n  if (index < 0 || this.endss_.length <= index) {\n    return null;\n  }\n  var offset;\n  if (index === 0) {\n    offset = 0;\n  } else {\n    var prevEnds = this.endss_[index - 1];\n    offset = prevEnds[prevEnds.length - 1];\n  }\n  var ends = this.endss_[index].slice();\n  var end = ends[ends.length - 1];\n  if (offset !== 0) {\n    var i, ii;\n    for (i = 0, ii = ends.length; i < ii; ++i) {\n      ends[i] -= offset;\n    }\n  }\n  var polygon = new _ol_geom_Polygon_(null);\n  polygon.setFlatCoordinates(\n      this.layout, this.flatCoordinates.slice(offset, end), ends);\n  return polygon;\n};\n\n\n/**\n * Return the polygons of this multipolygon.\n * @return {Array.<ol.geom.Polygon>} Polygons.\n * @api\n */\n_ol_geom_MultiPolygon_.prototype.getPolygons = function() {\n  var layout = this.layout;\n  var flatCoordinates = this.flatCoordinates;\n  var endss = this.endss_;\n  var polygons = [];\n  var offset = 0;\n  var i, ii, j, jj;\n  for (i = 0, ii = endss.length; i < ii; ++i) {\n    var ends = endss[i].slice();\n    var end = ends[ends.length - 1];\n    if (offset !== 0) {\n      for (j = 0, jj = ends.length; j < jj; ++j) {\n        ends[j] -= offset;\n      }\n    }\n    var polygon = new _ol_geom_Polygon_(null);\n    polygon.setFlatCoordinates(\n        layout, flatCoordinates.slice(offset, end), ends);\n    polygons.push(polygon);\n    offset = end;\n  }\n  return polygons;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\n_ol_geom_MultiPolygon_.prototype.getType = function() {\n  return _ol_geom_GeometryType_.MULTI_POLYGON;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\n_ol_geom_MultiPolygon_.prototype.intersectsExtent = function(extent) {\n  return _ol_geom_flat_intersectsextent_.linearRingss(\n      this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride, extent);\n};\n\n\n/**\n * Set the coordinates of the multipolygon.\n * @param {Array.<Array.<Array.<ol.Coordinate>>>} coordinates Coordinates.\n * @param {ol.geom.GeometryLayout=} opt_layout Layout.\n * @override\n * @api\n */\n_ol_geom_MultiPolygon_.prototype.setCoordinates = function(coordinates, opt_layout) {\n  if (!coordinates) {\n    this.setFlatCoordinates(_ol_geom_GeometryLayout_.XY, null, this.endss_);\n  } else {\n    this.setLayout(opt_layout, coordinates, 3);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    var endss = _ol_geom_flat_deflate_.coordinatesss(\n        this.flatCoordinates, 0, coordinates, this.stride, this.endss_);\n    if (endss.length === 0) {\n      this.flatCoordinates.length = 0;\n    } else {\n      var lastEnds = endss[endss.length - 1];\n      this.flatCoordinates.length = lastEnds.length === 0 ?\n        0 : lastEnds[lastEnds.length - 1];\n    }\n    this.changed();\n  }\n};\n\n\n/**\n * @param {ol.geom.GeometryLayout} layout Layout.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {Array.<Array.<number>>} endss Endss.\n */\n_ol_geom_MultiPolygon_.prototype.setFlatCoordinates = function(layout, flatCoordinates, endss) {\n  this.setFlatCoordinatesInternal(layout, flatCoordinates);\n  this.endss_ = endss;\n  this.changed();\n};\n\n\n/**\n * @param {Array.<ol.geom.Polygon>} polygons Polygons.\n */\n_ol_geom_MultiPolygon_.prototype.setPolygons = function(polygons) {\n  var layout = this.getLayout();\n  var flatCoordinates = [];\n  var endss = [];\n  var i, ii, ends;\n  for (i = 0, ii = polygons.length; i < ii; ++i) {\n    var polygon = polygons[i];\n    if (i === 0) {\n      layout = polygon.getLayout();\n    }\n    var offset = flatCoordinates.length;\n    ends = polygon.getEnds();\n    var j, jj;\n    for (j = 0, jj = ends.length; j < jj; ++j) {\n      ends[j] += offset;\n    }\n    _ol_array_.extend(flatCoordinates, polygon.getFlatCoordinates());\n    endss.push(ends);\n  }\n  this.setFlatCoordinates(layout, flatCoordinates, endss);\n};\nexport default _ol_geom_MultiPolygon_;\n","// TODO: serialize dataProjection as crs member when writing\n// see https://github.com/openlayers/openlayers/issues/2078\n\nimport _ol_ from '../index.js';\nimport _ol_asserts_ from '../asserts.js';\nimport _ol_Feature_ from '../feature.js';\nimport _ol_format_Feature_ from '../format/feature.js';\nimport _ol_format_JSONFeature_ from '../format/jsonfeature.js';\nimport _ol_geom_GeometryCollection_ from '../geom/geometrycollection.js';\nimport _ol_geom_LineString_ from '../geom/linestring.js';\nimport _ol_geom_MultiLineString_ from '../geom/multilinestring.js';\nimport _ol_geom_MultiPoint_ from '../geom/multipoint.js';\nimport _ol_geom_MultiPolygon_ from '../geom/multipolygon.js';\nimport _ol_geom_Point_ from '../geom/point.js';\nimport _ol_geom_Polygon_ from '../geom/polygon.js';\nimport _ol_obj_ from '../obj.js';\nimport _ol_proj_ from '../proj.js';\n\n/**\n * @classdesc\n * Feature format for reading and writing data in the GeoJSON format.\n *\n * @constructor\n * @extends {ol.format.JSONFeature}\n * @param {olx.format.GeoJSONOptions=} opt_options Options.\n * @api\n */\nvar _ol_format_GeoJSON_ = function(opt_options) {\n\n  var options = opt_options ? opt_options : {};\n\n  _ol_format_JSONFeature_.call(this);\n\n  /**\n   * @inheritDoc\n   */\n  this.defaultDataProjection = _ol_proj_.get(\n      options.defaultDataProjection ?\n        options.defaultDataProjection : 'EPSG:4326');\n\n\n  if (options.featureProjection) {\n    this.defaultFeatureProjection = _ol_proj_.get(options.featureProjection);\n  }\n\n  /**\n   * Name of the geometry attribute for features.\n   * @type {string|undefined}\n   * @private\n   */\n  this.geometryName_ = options.geometryName;\n\n  /**\n   * Look for the geometry name in the feature GeoJSON\n   * @type {boolean|undefined}\n   * @private\n   */\n  this.extractGeometryName_ = options.extractGeometryName;\n\n};\n\n_ol_.inherits(_ol_format_GeoJSON_, _ol_format_JSONFeature_);\n\n\n/**\n * @param {GeoJSONGeometry|GeoJSONGeometryCollection} object Object.\n * @param {olx.format.ReadOptions=} opt_options Read options.\n * @private\n * @return {ol.geom.Geometry} Geometry.\n */\n_ol_format_GeoJSON_.readGeometry_ = function(object, opt_options) {\n  if (!object) {\n    return null;\n  }\n  var geometryReader = _ol_format_GeoJSON_.GEOMETRY_READERS_[object.type];\n  return (\n    /** @type {ol.geom.Geometry} */ _ol_format_Feature_.transformWithOptions(\n        geometryReader(object), false, opt_options)\n  );\n};\n\n\n/**\n * @param {GeoJSONGeometryCollection} object Object.\n * @param {olx.format.ReadOptions=} opt_options Read options.\n * @private\n * @return {ol.geom.GeometryCollection} Geometry collection.\n */\n_ol_format_GeoJSON_.readGeometryCollectionGeometry_ = function(\n    object, opt_options) {\n  var geometries = object.geometries.map(\n      /**\n       * @param {GeoJSONGeometry} geometry Geometry.\n       * @return {ol.geom.Geometry} geometry Geometry.\n       */\n      function(geometry) {\n        return _ol_format_GeoJSON_.readGeometry_(geometry, opt_options);\n      });\n  return new _ol_geom_GeometryCollection_(geometries);\n};\n\n\n/**\n * @param {GeoJSONGeometry} object Object.\n * @private\n * @return {ol.geom.Point} Point.\n */\n_ol_format_GeoJSON_.readPointGeometry_ = function(object) {\n  return new _ol_geom_Point_(object.coordinates);\n};\n\n\n/**\n * @param {GeoJSONGeometry} object Object.\n * @private\n * @return {ol.geom.LineString} LineString.\n */\n_ol_format_GeoJSON_.readLineStringGeometry_ = function(object) {\n  return new _ol_geom_LineString_(object.coordinates);\n};\n\n\n/**\n * @param {GeoJSONGeometry} object Object.\n * @private\n * @return {ol.geom.MultiLineString} MultiLineString.\n */\n_ol_format_GeoJSON_.readMultiLineStringGeometry_ = function(object) {\n  return new _ol_geom_MultiLineString_(object.coordinates);\n};\n\n\n/**\n * @param {GeoJSONGeometry} object Object.\n * @private\n * @return {ol.geom.MultiPoint} MultiPoint.\n */\n_ol_format_GeoJSON_.readMultiPointGeometry_ = function(object) {\n  return new _ol_geom_MultiPoint_(object.coordinates);\n};\n\n\n/**\n * @param {GeoJSONGeometry} object Object.\n * @private\n * @return {ol.geom.MultiPolygon} MultiPolygon.\n */\n_ol_format_GeoJSON_.readMultiPolygonGeometry_ = function(object) {\n  return new _ol_geom_MultiPolygon_(object.coordinates);\n};\n\n\n/**\n * @param {GeoJSONGeometry} object Object.\n * @private\n * @return {ol.geom.Polygon} Polygon.\n */\n_ol_format_GeoJSON_.readPolygonGeometry_ = function(object) {\n  return new _ol_geom_Polygon_(object.coordinates);\n};\n\n\n/**\n * @param {ol.geom.Geometry} geometry Geometry.\n * @param {olx.format.WriteOptions=} opt_options Write options.\n * @private\n * @return {GeoJSONGeometry|GeoJSONGeometryCollection} GeoJSON geometry.\n */\n_ol_format_GeoJSON_.writeGeometry_ = function(geometry, opt_options) {\n  var geometryWriter = _ol_format_GeoJSON_.GEOMETRY_WRITERS_[geometry.getType()];\n  return geometryWriter(/** @type {ol.geom.Geometry} */ (\n    _ol_format_Feature_.transformWithOptions(geometry, true, opt_options)),\n  opt_options);\n};\n\n\n/**\n * @param {ol.geom.Geometry} geometry Geometry.\n * @private\n * @return {GeoJSONGeometryCollection} Empty GeoJSON geometry collection.\n */\n_ol_format_GeoJSON_.writeEmptyGeometryCollectionGeometry_ = function(geometry) {\n  return /** @type {GeoJSONGeometryCollection} */ ({\n    type: 'GeometryCollection',\n    geometries: []\n  });\n};\n\n\n/**\n * @param {ol.geom.GeometryCollection} geometry Geometry.\n * @param {olx.format.WriteOptions=} opt_options Write options.\n * @private\n * @return {GeoJSONGeometryCollection} GeoJSON geometry collection.\n */\n_ol_format_GeoJSON_.writeGeometryCollectionGeometry_ = function(\n    geometry, opt_options) {\n  var geometries = geometry.getGeometriesArray().map(function(geometry) {\n    var options = _ol_obj_.assign({}, opt_options);\n    delete options.featureProjection;\n    return _ol_format_GeoJSON_.writeGeometry_(geometry, options);\n  });\n  return /** @type {GeoJSONGeometryCollection} */ ({\n    type: 'GeometryCollection',\n    geometries: geometries\n  });\n};\n\n\n/**\n * @param {ol.geom.LineString} geometry Geometry.\n * @param {olx.format.WriteOptions=} opt_options Write options.\n * @private\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\n_ol_format_GeoJSON_.writeLineStringGeometry_ = function(geometry, opt_options) {\n  return /** @type {GeoJSONGeometry} */ ({\n    type: 'LineString',\n    coordinates: geometry.getCoordinates()\n  });\n};\n\n\n/**\n * @param {ol.geom.MultiLineString} geometry Geometry.\n * @param {olx.format.WriteOptions=} opt_options Write options.\n * @private\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\n_ol_format_GeoJSON_.writeMultiLineStringGeometry_ = function(geometry, opt_options) {\n  return /** @type {GeoJSONGeometry} */ ({\n    type: 'MultiLineString',\n    coordinates: geometry.getCoordinates()\n  });\n};\n\n\n/**\n * @param {ol.geom.MultiPoint} geometry Geometry.\n * @param {olx.format.WriteOptions=} opt_options Write options.\n * @private\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\n_ol_format_GeoJSON_.writeMultiPointGeometry_ = function(geometry, opt_options) {\n  return /** @type {GeoJSONGeometry} */ ({\n    type: 'MultiPoint',\n    coordinates: geometry.getCoordinates()\n  });\n};\n\n\n/**\n * @param {ol.geom.MultiPolygon} geometry Geometry.\n * @param {olx.format.WriteOptions=} opt_options Write options.\n * @private\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\n_ol_format_GeoJSON_.writeMultiPolygonGeometry_ = function(geometry, opt_options) {\n  var right;\n  if (opt_options) {\n    right = opt_options.rightHanded;\n  }\n  return /** @type {GeoJSONGeometry} */ ({\n    type: 'MultiPolygon',\n    coordinates: geometry.getCoordinates(right)\n  });\n};\n\n\n/**\n * @param {ol.geom.Point} geometry Geometry.\n * @param {olx.format.WriteOptions=} opt_options Write options.\n * @private\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\n_ol_format_GeoJSON_.writePointGeometry_ = function(geometry, opt_options) {\n  return /** @type {GeoJSONGeometry} */ ({\n    type: 'Point',\n    coordinates: geometry.getCoordinates()\n  });\n};\n\n\n/**\n * @param {ol.geom.Polygon} geometry Geometry.\n * @param {olx.format.WriteOptions=} opt_options Write options.\n * @private\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\n_ol_format_GeoJSON_.writePolygonGeometry_ = function(geometry, opt_options) {\n  var right;\n  if (opt_options) {\n    right = opt_options.rightHanded;\n  }\n  return /** @type {GeoJSONGeometry} */ ({\n    type: 'Polygon',\n    coordinates: geometry.getCoordinates(right)\n  });\n};\n\n\n/**\n * @const\n * @private\n * @type {Object.<string, function(GeoJSONObject): ol.geom.Geometry>}\n */\n_ol_format_GeoJSON_.GEOMETRY_READERS_ = {\n  'Point': _ol_format_GeoJSON_.readPointGeometry_,\n  'LineString': _ol_format_GeoJSON_.readLineStringGeometry_,\n  'Polygon': _ol_format_GeoJSON_.readPolygonGeometry_,\n  'MultiPoint': _ol_format_GeoJSON_.readMultiPointGeometry_,\n  'MultiLineString': _ol_format_GeoJSON_.readMultiLineStringGeometry_,\n  'MultiPolygon': _ol_format_GeoJSON_.readMultiPolygonGeometry_,\n  'GeometryCollection': _ol_format_GeoJSON_.readGeometryCollectionGeometry_\n};\n\n\n/**\n * @const\n * @private\n * @type {Object.<string, function(ol.geom.Geometry, olx.format.WriteOptions=): (GeoJSONGeometry|GeoJSONGeometryCollection)>}\n */\n_ol_format_GeoJSON_.GEOMETRY_WRITERS_ = {\n  'Point': _ol_format_GeoJSON_.writePointGeometry_,\n  'LineString': _ol_format_GeoJSON_.writeLineStringGeometry_,\n  'Polygon': _ol_format_GeoJSON_.writePolygonGeometry_,\n  'MultiPoint': _ol_format_GeoJSON_.writeMultiPointGeometry_,\n  'MultiLineString': _ol_format_GeoJSON_.writeMultiLineStringGeometry_,\n  'MultiPolygon': _ol_format_GeoJSON_.writeMultiPolygonGeometry_,\n  'GeometryCollection': _ol_format_GeoJSON_.writeGeometryCollectionGeometry_,\n  'Circle': _ol_format_GeoJSON_.writeEmptyGeometryCollectionGeometry_\n};\n\n\n/**\n * Read a feature from a GeoJSON Feature source.  Only works for Feature or\n * geometry types.  Use {@link ol.format.GeoJSON#readFeatures} to read\n * FeatureCollection source. If feature at source has an id, it will be used\n * as Feature id by calling {@link ol.Feature#setId} internally.\n *\n * @function\n * @param {Document|Node|Object|string} source Source.\n * @param {olx.format.ReadOptions=} opt_options Read options.\n * @return {ol.Feature} Feature.\n * @api\n */\n_ol_format_GeoJSON_.prototype.readFeature;\n\n\n/**\n * Read all features from a GeoJSON source.  Works for all GeoJSON types.\n * If the source includes only geometries, features will be created with those\n * geometries.\n *\n * @function\n * @param {Document|Node|Object|string} source Source.\n * @param {olx.format.ReadOptions=} opt_options Read options.\n * @return {Array.<ol.Feature>} Features.\n * @api\n */\n_ol_format_GeoJSON_.prototype.readFeatures;\n\n\n/**\n * @inheritDoc\n */\n_ol_format_GeoJSON_.prototype.readFeatureFromObject = function(\n    object, opt_options) {\n  /**\n   * @type {GeoJSONFeature}\n   */\n  var geoJSONFeature = null;\n  if (object.type === 'Feature') {\n    geoJSONFeature = /** @type {GeoJSONFeature} */ (object);\n  } else {\n    geoJSONFeature = /** @type {GeoJSONFeature} */ ({\n      type: 'Feature',\n      geometry: /** @type {GeoJSONGeometry|GeoJSONGeometryCollection} */ (object)\n    });\n  }\n\n  var geometry = _ol_format_GeoJSON_.readGeometry_(geoJSONFeature.geometry, opt_options);\n  var feature = new _ol_Feature_();\n  if (this.geometryName_) {\n    feature.setGeometryName(this.geometryName_);\n  } else if (this.extractGeometryName_ && geoJSONFeature.geometry_name !== undefined) {\n    feature.setGeometryName(geoJSONFeature.geometry_name);\n  }\n  feature.setGeometry(geometry);\n  if (geoJSONFeature.id !== undefined) {\n    feature.setId(geoJSONFeature.id);\n  }\n  if (geoJSONFeature.properties) {\n    feature.setProperties(geoJSONFeature.properties);\n  }\n  return feature;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_format_GeoJSON_.prototype.readFeaturesFromObject = function(\n    object, opt_options) {\n  var geoJSONObject = /** @type {GeoJSONObject} */ (object);\n  /** @type {Array.<ol.Feature>} */\n  var features = null;\n  if (geoJSONObject.type === 'FeatureCollection') {\n    var geoJSONFeatureCollection = /** @type {GeoJSONFeatureCollection} */\n        (object);\n    features = [];\n    var geoJSONFeatures = geoJSONFeatureCollection.features;\n    var i, ii;\n    for (i = 0, ii = geoJSONFeatures.length; i < ii; ++i) {\n      features.push(this.readFeatureFromObject(geoJSONFeatures[i],\n          opt_options));\n    }\n  } else {\n    features = [this.readFeatureFromObject(object, opt_options)];\n  }\n  return features;\n};\n\n\n/**\n * Read a geometry from a GeoJSON source.\n *\n * @function\n * @param {Document|Node|Object|string} source Source.\n * @param {olx.format.ReadOptions=} opt_options Read options.\n * @return {ol.geom.Geometry} Geometry.\n * @api\n */\n_ol_format_GeoJSON_.prototype.readGeometry;\n\n\n/**\n * @inheritDoc\n */\n_ol_format_GeoJSON_.prototype.readGeometryFromObject = function(\n    object, opt_options) {\n  return _ol_format_GeoJSON_.readGeometry_(\n      /** @type {GeoJSONGeometry} */ (object), opt_options);\n};\n\n\n/**\n * Read the projection from a GeoJSON source.\n *\n * @function\n * @param {Document|Node|Object|string} source Source.\n * @return {ol.proj.Projection} Projection.\n * @api\n */\n_ol_format_GeoJSON_.prototype.readProjection;\n\n\n/**\n * @inheritDoc\n */\n_ol_format_GeoJSON_.prototype.readProjectionFromObject = function(object) {\n  var geoJSONObject = /** @type {GeoJSONObject} */ (object);\n  var crs = geoJSONObject.crs;\n  var projection;\n  if (crs) {\n    if (crs.type == 'name') {\n      projection = _ol_proj_.get(crs.properties.name);\n    } else {\n      _ol_asserts_.assert(false, 36); // Unknown SRS type\n    }\n  } else {\n    projection = this.defaultDataProjection;\n  }\n  return /** @type {ol.proj.Projection} */ (projection);\n};\n\n\n/**\n * Encode a feature as a GeoJSON Feature string.\n *\n * @function\n * @param {ol.Feature} feature Feature.\n * @param {olx.format.WriteOptions=} opt_options Write options.\n * @return {string} GeoJSON.\n * @override\n * @api\n */\n_ol_format_GeoJSON_.prototype.writeFeature;\n\n\n/**\n * Encode a feature as a GeoJSON Feature object.\n *\n * @param {ol.Feature} feature Feature.\n * @param {olx.format.WriteOptions=} opt_options Write options.\n * @return {GeoJSONFeature} Object.\n * @override\n * @api\n */\n_ol_format_GeoJSON_.prototype.writeFeatureObject = function(feature, opt_options) {\n  opt_options = this.adaptOptions(opt_options);\n\n  var object = /** @type {GeoJSONFeature} */ ({\n    'type': 'Feature'\n  });\n  var id = feature.getId();\n  if (id !== undefined) {\n    object.id = id;\n  }\n  var geometry = feature.getGeometry();\n  if (geometry) {\n    object.geometry =\n        _ol_format_GeoJSON_.writeGeometry_(geometry, opt_options);\n  } else {\n    object.geometry = null;\n  }\n  var properties = feature.getProperties();\n  delete properties[feature.getGeometryName()];\n  if (!_ol_obj_.isEmpty(properties)) {\n    object.properties = properties;\n  } else {\n    object.properties = null;\n  }\n  return object;\n};\n\n\n/**\n * Encode an array of features as GeoJSON.\n *\n * @function\n * @param {Array.<ol.Feature>} features Features.\n * @param {olx.format.WriteOptions=} opt_options Write options.\n * @return {string} GeoJSON.\n * @api\n */\n_ol_format_GeoJSON_.prototype.writeFeatures;\n\n\n/**\n * Encode an array of features as a GeoJSON object.\n *\n * @param {Array.<ol.Feature>} features Features.\n * @param {olx.format.WriteOptions=} opt_options Write options.\n * @return {GeoJSONFeatureCollection} GeoJSON Object.\n * @override\n * @api\n */\n_ol_format_GeoJSON_.prototype.writeFeaturesObject = function(features, opt_options) {\n  opt_options = this.adaptOptions(opt_options);\n  var objects = [];\n  var i, ii;\n  for (i = 0, ii = features.length; i < ii; ++i) {\n    objects.push(this.writeFeatureObject(features[i], opt_options));\n  }\n  return /** @type {GeoJSONFeatureCollection} */ ({\n    type: 'FeatureCollection',\n    features: objects\n  });\n};\n\n\n/**\n * Encode a geometry as a GeoJSON string.\n *\n * @function\n * @param {ol.geom.Geometry} geometry Geometry.\n * @param {olx.format.WriteOptions=} opt_options Write options.\n * @return {string} GeoJSON.\n * @api\n */\n_ol_format_GeoJSON_.prototype.writeGeometry;\n\n\n/**\n * Encode a geometry as a GeoJSON object.\n *\n * @param {ol.geom.Geometry} geometry Geometry.\n * @param {olx.format.WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry|GeoJSONGeometryCollection} Object.\n * @override\n * @api\n */\n_ol_format_GeoJSON_.prototype.writeGeometryObject = function(geometry,\n    opt_options) {\n  return _ol_format_GeoJSON_.writeGeometry_(geometry,\n      this.adaptOptions(opt_options));\n};\nexport default _ol_format_GeoJSON_;\n","import SymbolStyle from 'ol/style/style';\r\nimport CircleSymbol from 'ol/style/circle';\r\nimport StrokeSymbol from 'ol/style/stroke';\r\nimport FillSymbol from 'ol/style/fill';\r\n\r\nclass Symbol{\r\n    /*\r\n    符号对象，记录符号的颜色和线宽\r\n     */\r\n    constructor(r, g, b, l){\r\n        if(typeof r ===\"number\"\r\n            && typeof g ===\"number\"\r\n            && typeof b ===\"number\"\r\n        ){\r\n            this.RWeight = !!r ? r % 256: 0;//红色分量\r\n            this.GWeight = !!g ? g % 256: 0;//绿色分量\r\n            this.BWeight = !!b ? b % 256: 0;//蓝色分量\r\n            this.lineWeight = !!l ? l % 30: 1;//线宽\r\n        }else{\r\n            console.warn(\"输入的数字为非数字类型， 调用Symbol\")\r\n        }\r\n    }\r\n    toStyle(){\r\n        return [this.RWeight, this.GWeight, this.GWeight, this.lineWeight];\r\n    }\r\n    toRGBAString(){\r\n        return 'rgba('+ this.RWeight + ',' + this.GWeight + ',' + this.BWeight + ',' + this.lineWeight + ')';\r\n    }\r\n}\r\nclass ColorPicker{\r\n/*\r\n只简单的列出一些简单的方法\r\nTODO 列出更多好看的颜色的RGBA，拓展更多的颜色\r\n */\r\n    static getRGBAColor(r, g, b, a){\r\n        return new symbol(r, g, b, a);\r\n    }\r\n    static getRed(){\r\n        return new Symbol(255, 50, 20);\r\n    }\r\n    static getBlue(){\r\n        return new Symbol(20, 50 ,255);\r\n    }\r\n    static getGreen(){\r\n        return new Symbol(10, 255,40);\r\n    }\r\n    static getRandom(){\r\n        let r = Math.floor(Math.random() * 255);\r\n        let g = Math.floor(Math.random() * 255);\r\n        let b = Math.floor(Math.random() * 255);\r\n        return new Symbol(r, g, b);\r\n    }\r\n}\r\nclass SymbolCreator {\r\n    /*\r\n     *  根据符号的类型获取符号，可以传入options可选参数\r\n     *  TODO 完善符号类型 以及Options参数的实现 这里只简单实现了一个符号与随机颜色符号\r\n     */\r\n    getSymbolByGeoType(geoType, options){\r\n        let result = null;\r\n        if(!!geoType){\r\n            switch (geoType){\r\n                case \"Point\":\r\n                    result = this._getPointSymbol(options);\r\n                    break;\r\n                case \"Polyline\":\r\n                    result = this._getPolylineSymbol(options);\r\n                    break;\r\n                case \"Polygon\":\r\n                    result = this._getPolygonSymbol(options);\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }else{\r\n            console.warn(\"输入的参数无效,调用Symbol类的getSymbolByGeoType方法\");\r\n        }\r\n        return result;\r\n    }\r\n    _getPointSymbol(options){\r\n        return new SymbolStyle({\r\n            image: new CircleSymbol({\r\n                radius: 6,\r\n                snapToPixel: false,\r\n                fill: new FillSymbol({color: 'black'}),\r\n                stroke: new StrokeSymbol({\r\n                    color: 'white', width: 2\r\n                })\r\n            })\r\n        })\r\n    }\r\n    _getPolylineSymbol(options){\r\n        return new SymbolStyle({\r\n            stroke: new StrokeSymbol({\r\n                width: 6,\r\n                color: ColorPicker.getBlue().toRGBAString()\r\n            })\r\n        })\r\n    }\r\n    _getPolygonSymbol(options){\r\n        return new SymbolStyle({\r\n            fill: new FillSymbol({\r\n                color: ColorPicker.getGreen().toRGBAString()\r\n            }),\r\n            stroke: new StrokeSymbol({\r\n                color: ColorPicker.getRandom().toRGBAString(),\r\n                width: 2\r\n            })\r\n        })\r\n    }\r\n}\r\n\r\nexport default SymbolCreator;","import LayerGroup from \"ol/layer/group\";\r\nimport VectorLayer from 'ol/layer/vector';\r\nimport VectorSource from 'ol/source/vector';\r\nimport GeoJsonFormat from 'ol/format/geojson';\r\nimport loadingstrategy  from 'ol/loadingstrategy';\r\n\r\nimport SymbolCreator from './symbolCreator';\r\n\r\nfunction layerCreator(){\r\n    this.format = 'image/png';//定义图层的瓦片为png格式\r\n    //地理实体的类型，枚举对象\r\n    this.geometryType = {\r\n        Point: \"Point\",\r\n        Polygon: \"Polygon\",\r\n        Polyline: \"Polyline\"\r\n    };\r\n\r\n}\r\n/*\r\n根据名称获取地图的专题图层组\r\n */\r\nlayerCreator.prototype.getLayerGourp = function(){\r\n    var basicfacility = this._getLayerByName('basicfacility');\r\n    var roadline =      this._getLayerByName('roadline');\r\n    var trafficsign =   this._getLayerByName('trafficsign');\r\n\r\n    let layerGroup1 = new LayerGroup({\r\n        layers: [\r\n            trafficsign\r\n        ],\r\n        title: \"GIST2_group1\"\r\n    });\r\n    let layergroup2 = new LayerGroup({\r\n        layers: [\r\n            basicfacility,\r\n            roadline,\r\n            layerGroup1\r\n        ],\r\n        title: \"GIST2_group2\"\r\n    });\r\n    return new LayerGroup({\r\n        layers: [\r\n            layergroup2\r\n        ],\r\n        title: \"GIST2_group_total\"\r\n    })\r\n}\r\n/*\r\n  根据名称获取图层信息\r\n */\r\nlayerCreator.prototype._getLayerByName = function(Name){\r\n    if(!Name){\r\n        console.warn(\"调用getLayerByName方法的参数无效\");\r\n    }\r\n    var result = null;\r\n\r\n    switch (Name){\r\n        case \"basicfacility\":\r\n            result = this._getVectorLayerByUrl(\"https://raw.githubusercontent.com/wiki/DerekMar/openlayer-Identify/data/GIST2_basicfacility.json?bbox=\", this.geometryType.Polygon, {title: \"GIST2_basicfacility\"});\r\n            break;\r\n        case \"roadline\":\r\n            result = this._getVectorLayerByUrl(\"https://raw.githubusercontent.com/wiki/DerekMar/openlayer-Identify/data/GIST2_roadline.json?bbox=\", this.geometryType.Polyline, {title: \"GIST2_roadline\"});\r\n            break;\r\n        case \"trafficsign\":\r\n            result = this._getVectorLayerByUrl(\"https://raw.githubusercontent.com/wiki/DerekMar/openlayer-Identify/data/GIST2_trafficsign.json?bbox=\", this.geometryType.Point, {title: \"GIST2_trafficsign\"});\r\n            break;\r\n        default:\r\n            alert(\"调用getLayerByName方法没有对应图层名字\");\r\n            break;\r\n    }\r\n    return result\r\n}\r\nlayerCreator.prototype._getVectorLayerByUrl = function(LayerUrl, GeomtryType, options){\r\n    if(!LayerUrl || !GeomtryType){\r\n        console.warn(\"调用_getVectorLayerByUrl方法的参数无效\");\r\n    }\r\n\r\n    let GeometrySymbol = new SymbolCreator();\r\n\r\n    return new VectorLayer({\r\n        source: new VectorSource({\r\n            url: function(extent, resolution, projection){\r\n                return LayerUrl + extent.join(',');\r\n            },\r\n            format: new GeoJsonFormat(),\r\n            strategy: loadingstrategy.bbox\r\n        }),\r\n        style: GeometrySymbol.getSymbolByGeoType(GeomtryType, options),\r\n        title: options.title ? options.title : \"无标题\"\r\n    })\r\n}\r\n\r\nexport default layerCreator;","import './css/index.css';//加载css样式文件\r\nimport 'ol/ol.css';\r\nimport mapCreator from './js/mapCreator';\r\nimport layerCreator from './js/layerCreator';\r\nimport Identify from './js/Component/Identify/ol-Identify';\r\n/*\r\n生成地图\r\n */\r\nlet mapCtrl = new mapCreator(\"map\");\r\nmapCtrl.initMap(\"map\", {});\r\nmapCtrl.startMap();\r\n/*\r\n加载wfs服务图层\r\n */\r\nvar layerCtrl = new layerCreator();\r\nvar layerGroup = layerCtrl.getLayerGourp();\r\nmapCtrl.addLayer(layerGroup);\r\n/**\r\n * 引入Identify\r\n *\r\n */\r\nlet identify = new Identify({\r\n    // position: \"bottom\"\r\n});\r\nmapCtrl.getMap().addControl(identify);\r\nidentify.showIdenditfy();\r\n\r\n/*\r\n加载要素识别模块\r\n*/\r\n// let featureIdentifyCom = new featureIdentify(mapCtrl.getMap());\r\n// featureIdentifyCom.startup();\r\n/*\r\n加载要素查询模块\r\n */\r\n// let featureQueryCom = new featureQuery(mapCtrl.getMap());\r\n// featureQueryCom.startup();\r\n\r\n\r\n\r\n\r\n","exports = module.exports = require(\"../css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".ol-box {\\n  box-sizing: border-box;\\n  border-radius: 2px;\\n  border: 2px solid blue;\\n}\\n\\n.ol-mouse-position {\\n  top: 8px;\\n  right: 8px;\\n  position: absolute;\\n}\\n\\n.ol-scale-line {\\n  background: rgba(0,60,136,0.3);\\n  border-radius: 4px;\\n  bottom: 8px;\\n  left: 8px;\\n  padding: 2px;\\n  position: absolute;\\n}\\n.ol-scale-line-inner {\\n  border: 1px solid #eee;\\n  border-top: none;\\n  color: #eee;\\n  font-size: 10px;\\n  text-align: center;\\n  margin: 1px;\\n  will-change: contents, width;\\n}\\n.ol-overlay-container {\\n  will-change: left,right,top,bottom;\\n}\\n\\n.ol-unsupported {\\n  display: none;\\n}\\n.ol-viewport, .ol-unselectable {\\n  -webkit-touch-callout: none;\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  user-select: none;\\n  -webkit-tap-highlight-color: rgba(0,0,0,0);\\n}\\n.ol-selectable {\\n  -webkit-touch-callout: default;\\n  -webkit-user-select: auto;\\n  -moz-user-select: auto;\\n  -ms-user-select: auto;\\n  user-select: auto;\\n}\\n.ol-grabbing {\\n  cursor: -webkit-grabbing;\\n  cursor: -moz-grabbing;\\n  cursor: grabbing;\\n}\\n.ol-grab {\\n  cursor: move;\\n  cursor: -webkit-grab;\\n  cursor: -moz-grab;\\n  cursor: grab;\\n}\\n.ol-control {\\n  position: absolute;\\n  background-color: rgba(255,255,255,0.4);\\n  border-radius: 4px;\\n  padding: 2px;\\n}\\n.ol-control:hover {\\n  background-color: rgba(255,255,255,0.6);\\n}\\n.ol-zoom {\\n  top: .5em;\\n  left: .5em;\\n}\\n.ol-rotate {\\n  top: .5em;\\n  right: .5em;\\n  transition: opacity .25s linear, visibility 0s linear;\\n}\\n.ol-rotate.ol-hidden {\\n  opacity: 0;\\n  visibility: hidden;\\n  transition: opacity .25s linear, visibility 0s linear .25s;\\n}\\n.ol-zoom-extent {\\n  top: 4.643em;\\n  left: .5em;\\n}\\n.ol-full-screen {\\n  right: .5em;\\n  top: .5em;\\n}\\n@media print {\\n  .ol-control {\\n    display: none;\\n  }\\n}\\n\\n.ol-control button {\\n  display: block;\\n  margin: 1px;\\n  padding: 0;\\n  color: white;\\n  font-size: 1.14em;\\n  font-weight: bold;\\n  text-decoration: none;\\n  text-align: center;\\n  height: 1.375em;\\n  width: 1.375em;\\n  line-height: .4em;\\n  background-color: rgba(0,60,136,0.5);\\n  border: none;\\n  border-radius: 2px;\\n}\\n.ol-control button::-moz-focus-inner {\\n  border: none;\\n  padding: 0;\\n}\\n.ol-zoom-extent button {\\n  line-height: 1.4em;\\n}\\n.ol-compass {\\n  display: block;\\n  font-weight: normal;\\n  font-size: 1.2em;\\n  will-change: transform;\\n}\\n.ol-touch .ol-control button {\\n  font-size: 1.5em;\\n}\\n.ol-touch .ol-zoom-extent {\\n  top: 5.5em;\\n}\\n.ol-control button:hover,\\n.ol-control button:focus {\\n  text-decoration: none;\\n  background-color: rgba(0,60,136,0.7);\\n}\\n.ol-zoom .ol-zoom-in {\\n  border-radius: 2px 2px 0 0;\\n}\\n.ol-zoom .ol-zoom-out {\\n  border-radius: 0 0 2px 2px;\\n}\\n\\n\\n.ol-attribution {\\n  text-align: right;\\n  bottom: .5em;\\n  right: .5em;\\n  max-width: calc(100% - 1.3em);\\n}\\n\\n.ol-attribution ul {\\n  margin: 0;\\n  padding: 0 .5em;\\n  font-size: .7rem;\\n  line-height: 1.375em;\\n  color: #000;\\n  text-shadow: 0 0 2px #fff;\\n}\\n.ol-attribution li {\\n  display: inline;\\n  list-style: none;\\n  line-height: inherit;\\n}\\n.ol-attribution li:not(:last-child):after {\\n  content: \\\" \\\";\\n}\\n.ol-attribution img {\\n  max-height: 2em;\\n  max-width: inherit;\\n  vertical-align: middle;\\n}\\n.ol-attribution ul, .ol-attribution button {\\n  display: inline-block;\\n}\\n.ol-attribution.ol-collapsed ul {\\n  display: none;\\n}\\n.ol-attribution.ol-logo-only ul {\\n  display: block;\\n}\\n.ol-attribution:not(.ol-collapsed) {\\n  background: rgba(255,255,255,0.8);\\n}\\n.ol-attribution.ol-uncollapsible {\\n  bottom: 0;\\n  right: 0;\\n  border-radius: 4px 0 0;\\n  height: 1.1em;\\n  line-height: 1em;\\n}\\n.ol-attribution.ol-logo-only {\\n  background: transparent;\\n  bottom: .4em;\\n  height: 1.1em;\\n  line-height: 1em;\\n}\\n.ol-attribution.ol-uncollapsible img {\\n  margin-top: -.2em;\\n  max-height: 1.6em;\\n}\\n.ol-attribution.ol-logo-only button,\\n.ol-attribution.ol-uncollapsible button {\\n  display: none;\\n}\\n\\n.ol-zoomslider {\\n  top: 4.5em;\\n  left: .5em;\\n  height: 200px;\\n}\\n.ol-zoomslider button {\\n  position: relative;\\n  height: 10px;\\n}\\n\\n.ol-touch .ol-zoomslider {\\n  top: 5.5em;\\n}\\n\\n.ol-overviewmap {\\n  left: 0.5em;\\n  bottom: 0.5em;\\n}\\n.ol-overviewmap.ol-uncollapsible {\\n  bottom: 0;\\n  left: 0;\\n  border-radius: 0 4px 0 0;\\n}\\n.ol-overviewmap .ol-overviewmap-map,\\n.ol-overviewmap button {\\n  display: inline-block;\\n}\\n.ol-overviewmap .ol-overviewmap-map {\\n  border: 1px solid #7b98bc;\\n  height: 150px;\\n  margin: 2px;\\n  width: 150px;\\n}\\n.ol-overviewmap:not(.ol-collapsed) button{\\n  bottom: 1px;\\n  left: 2px;\\n  position: absolute;\\n}\\n.ol-overviewmap.ol-collapsed .ol-overviewmap-map,\\n.ol-overviewmap.ol-uncollapsible button {\\n  display: none;\\n}\\n.ol-overviewmap:not(.ol-collapsed) {\\n  background: rgba(255,255,255,0.8);\\n}\\n.ol-overviewmap-box {\\n  border: 2px dotted rgba(0,60,136,0.7);\\n}\\n\\n.ol-overviewmap .ol-overviewmap-box:hover {\\n  cursor: move;\\n}\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../css-loader/index.js!./ol.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../css-loader/index.js!./ol.css\", function() {\n\t\tvar newContent = require(\"!!../css-loader/index.js!./ol.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"a.skiplink {\\r\\n    position: absolute;\\r\\n    clip: rect(1px, 1px, 1px, 1px);\\r\\n    padding: 0;\\r\\n    border: 0;\\r\\n    height: 1px;\\r\\n    width: 1px;\\r\\n    overflow: hidden;\\r\\n}\\r\\na.skiplink:focus {\\r\\n    clip: auto;\\r\\n    height: auto;\\r\\n    width: auto;\\r\\n    background-color: #fff;\\r\\n    padding: 0.3em;\\r\\n}\\r\\n#map:focus {\\r\\n    outline: #4A74A8 solid 0.15em;\\r\\n}\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../node_modules/css-loader/index.js!./index.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!./index.css\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!./index.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}"],"sourceRoot":""}